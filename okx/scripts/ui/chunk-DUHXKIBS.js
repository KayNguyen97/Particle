import{b as c}from"./chunk-QNEJI55N.js";import{d as P}from"./chunk-5W7SRP5N.js";import{o as _}from"./chunk-R6GCLTW2.js";import{f as w,g as i,o as B}from"./chunk-ZKDHZDUE.js";import{a as E,b as p,h as T,m as b}from"./chunk-4UESFVD2.js";import{a as h}from"./chunk-D7KW4FFX.js";import{A as x,B as A,C as v,la as O}from"./chunk-RAXGEVRQ.js";import{c as g,d as m,f as k}from"./chunk-S4N75E3H.js";import{f as N,m as l,o as f}from"./chunk-6V2G2Z5W.js";l();f();var W={gasReturn:"freeGasPlugin"},X={availableTimesLimit:"wallet_extension_freegas_notif_daily_gas",exceedGasLimit:"wallet_extension_freegas_notif_exceeds_limit",exceedTodayGasLimit:"wallet_extension_freegas_notif_limit_reached",walletAssetNotEnough:"walletAssetNotEnough"},K={saveTxCommon:170001,notStart:170003,exceededTheLimit:170004,exceedingTheSubsidyLimit:170006,walletAssetNotEnough:170007},S=Object.values(K),j={transfer:1,dex:2,dapp:3,nft:4,approval:5};l();f();function R(e){return S.indexOf(e)!==-1}l();f();var u=N(h());k();B();b();O();function U(e){return{type:A,message:e.message}}function s(e){return(n,r)=>{let t=r(),{unapprovedTxs:a,unapprovedMsgs:o,unapprovedPersonalMsgs:d,unapprovedTypedMessages:y,network:C,provider:{chainId:G}}=t.metamask,L=_(a,o,d,y,C,G).filter(I=>I.id!==e);n({type:x,value:{id:e,unconfirmedActionsCount:L.length}})}}function H(e,n){return{type:v,id:e,value:n}}function se(e,n){return async r=>{e.walletId=n;try{await r(P({txData:e,walletId:n}))}catch(t){throw r(T()),t}return new Promise((t,a)=>{g().updateAndApproveTransaction(e,(o,d)=>{if(o)try{let y=o.data.originalError;if(R(y.code)){a(o);return}}catch{}if(r(H(e.id,e.txParams)),r(p()),o){r(U(o)),r(E()),u.default.error(o.message),a(o);return}e.hash=d.hash,e.serverTxId=d.serverTxId,t(e)})}).then(()=>w()).then(t=>r(i(t))).then(()=>(r(p()),r(s(e.id)),r(T()),r(c()),e)).catch(t=>{throw r(T()),t})}}function ae(e){return async n=>{let r;try{r=await m().cancelMessage(e.id)}catch(t){u.default.error(t)}return n(i(r)),n(s(e.id)),n(c()),e}}function le(e){return async n=>{let r;try{r=await m().cancelPersonalMessage(e.id)}catch(t){u.default.error(t)}return n(i(r)),n(s(e.id)),n(c()),e}}function fe(e){return async n=>{let r;try{r=await m().cancelDecryptMessage(e.id)}catch(t){u.default.error(t)}return n(i(r)),n(s(e.id)),n(c()),e}}function me(e){return async n=>{let r;try{r=await m().cancelEncryptionPublicKey(e.id)}catch(t){u.default.error(t)}return n(i(r)),n(s(e.id)),n(c()),e}}function de(e){return async n=>{let r;try{r=await m().cancelTypedMessage(e.id)}catch(t){u.default.error(t)}return n(i(r)),n(s(e.id)),n(c()),e}}function ye(e,n=!0){return r=>new Promise((t,a)=>{g().cancelTransaction(e.id,o=>{if(o){a(o);return}t()})}).then(()=>w()).then(t=>r(i(t))).then(()=>(r(p()),r(s(e.id)),n&&r(c()),e)).catch(t=>{throw t})}export{W as a,X as b,K as c,j as d,R as e,s as f,se as g,ae as h,le as i,fe as j,me as k,de as l,ye as m};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-DUHXKIBS.js.map
