import{a as tf}from"./chunk-V7JJIHCP.js";import{a as Se}from"./chunk-HGT5CHSG.js";import{a as ki}from"./chunk-AMJPJAQW.js";import{a as ef}from"./chunk-UXBKFN2U.js";import"./chunk-HCW4K7TR.js";import"./chunk-Z4JATHZR.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import{a as $n}from"./chunk-MAWXDEJZ.js";import"./chunk-ZRKMRDGI.js";import"./chunk-K2CHCG7Q.js";import"./chunk-3FBBK33H.js";import"./chunk-KTHMEYYS.js";import"./chunk-GT57MMCB.js";import{F as Qi}from"./chunk-RYNAOZ73.js";import"./chunk-Q34CQJXG.js";import{d as Rr}from"./chunk-GKHVFCKF.js";import{a as qn,c as ae,m as U,n as v,o as L}from"./chunk-6V2G2Z5W.js";var Fn=ae(Pt=>{"use strict";U();L();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.MAX_UINT64=Pt.MAX_INTEGER=void 0;var uo=Rr().Buffer,Vn=Se();Pt.MAX_INTEGER=new Vn.BN("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16);Pt.MAX_UINT64=new Vn.BN("ffffffffffffffff",16)});var Dr=ae(Ge=>{"use strict";U();L();Object.defineProperty(Ge,"__esModule",{value:!0});Ge.stripHexPrefix=Ge.isHexPrefixed=Ge.getLength=Ge.decode=Ge.encode=void 0;var rf=Se();function Dn(t){if(Array.isArray(t)){let r=[];for(let s=0;s<t.length;s++)r.push(Dn(t[s]));let i=v.Buffer.concat(r);return v.Buffer.concat([Cn(i.length,192),i])}else{let r=Cr(t);return r.length===1&&r[0]<128?r:v.Buffer.concat([Cn(r.length,128),r])}}Ge.encode=Dn;function qr(t,r){if(t[0]==="0"&&t[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(t,r)}function Cn(t,r){if(t<56)return v.Buffer.from([t+r]);{let i=Vr(t),s=i.length/2,u=Vr(r+55+s);return v.Buffer.from(u+i,"hex")}}function nf(t,r=!1){if(!t||t.length===0)return v.Buffer.from([]);let i=Cr(t),s=$r(i);if(r)return s;if(s.remainder.length!==0)throw new Error("invalid remainder");return s.data}Ge.decode=nf;function ff(t){if(!t||t.length===0)return v.Buffer.from([]);let r=Cr(t),i=r[0];if(i<=127)return r.length;if(i<=183)return i-127;if(i<=191)return i-182;if(i<=247)return i-191;{let s=i-246,u=qr(r.slice(1,s).toString("hex"),16);return s+u}}Ge.getLength=ff;function $r(t){let r,i,s,u,x,_=[],P=t[0];if(P<=127)return{data:t.slice(0,1),remainder:t.slice(1)};if(P<=183){if(r=P-127,P===128?s=v.Buffer.from([]):s=t.slice(1,r),r===2&&s[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:s,remainder:t.slice(r)}}else if(P<=191){if(i=P-182,t.length-1<i)throw new Error("invalid RLP: not enough bytes for string length");if(r=qr(t.slice(1,i).toString("hex"),16),r<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(s=t.slice(i,r+i),s.length<r)throw new Error("invalid RLP: not enough bytes for string");return{data:s,remainder:t.slice(r+i)}}else if(P<=247){for(r=P-191,u=t.slice(1,r);u.length;)x=$r(u),_.push(x.data),u=x.remainder;return{data:_,remainder:t.slice(r)}}else{i=P-246,r=qr(t.slice(1,i).toString("hex"),16);let j=i+r;if(j>t.length)throw new Error("invalid rlp: total length is larger than the data");if(u=t.slice(i,j),u.length===0)throw new Error("invalid rlp, List has a invalid length");for(;u.length;)x=$r(u),_.push(x.data),u=x.remainder;return{data:_,remainder:t.slice(j)}}}function Fr(t){return t.slice(0,2)==="0x"}Ge.isHexPrefixed=Fr;function Gn(t){return typeof t!="string"?t:Fr(t)?t.slice(2):t}Ge.stripHexPrefix=Gn;function Vr(t){if(t<0)throw new Error("Invalid integer as argument, must be unsigned!");let r=t.toString(16);return r.length%2?`0${r}`:r}function sf(t){return t.length%2?`0${t}`:t}function of(t){let r=Vr(t);return v.Buffer.from(r,"hex")}function Cr(t){if(!v.Buffer.isBuffer(t)){if(typeof t=="string")return Fr(t)?v.Buffer.from(sf(Gn(t)),"hex"):v.Buffer.from(t);if(typeof t=="number"||typeof t=="bigint")return t?of(t):v.Buffer.from([]);if(t==null)return v.Buffer.from([]);if(t instanceof Uint8Array)return v.Buffer.from(t);if(rf.BN.isBN(t))return v.Buffer.from(t.toArray());throw new Error("invalid type")}return t}});var Bt=ae(he=>{"use strict";U();L();Object.defineProperty(he,"__esModule",{value:!0});he.numberToBuffer=he.isHexString=he.getKeys=he.fromAscii=he.fromUtf8=he.toAscii=he.toUtf8=he.getBinarySize=he.intToBuffer=he.intToHex=he.padToEven=void 0;var af=Se();function rr(t){let r=t;if(typeof r!="string")throw new Error(`[ethjs-util] while padding to even, value must be string, is currently ${typeof r}, while padToEven.`);return r.length%2&&(r=`0${r}`),r}he.padToEven=rr;function Yn(t){return`0x${t.toString(16)}`}he.intToHex=Yn;function cf(t){let r=Yn(t);return v.Buffer.from(rr(r.slice(2)),"hex")}he.intToBuffer=cf;function uf(t){if(typeof t!="string")throw new Error(`[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '${typeof t}'.`);return v.Buffer.byteLength(t,"utf8")}he.getBinarySize=uf;function df(t){return new v.Buffer(rr(af.base.stripHexPrefix(t).replace(/^0+|0+$/g,"")),"hex").toString("utf8")}he.toUtf8=df;function hf(t){var r="",i=0,s=t.length;for(t.substring(0,2)==="0x"&&(i=2);i<s;i+=2){let u=parseInt(t.substr(i,2),16);r+=String.fromCharCode(u)}return r}he.toAscii=hf;function xf(t){let r=new v.Buffer(t,"utf8");return`0x${rr(r.toString("hex")).replace(/^0+|0+$/g,"")}`}he.fromUtf8=xf;function lf(t){for(var r="",i=0;i<t.length;i++){let u=t.charCodeAt(i).toString(16);r+=u.length<2?`0${u}`:u}return`0x${r}`}he.fromAscii=lf;function gf(t,r,i){if(!Array.isArray(t))throw new Error(`[ethjs-util] method getKeys expecting type Array as 'params' input, got '${typeof t}'`);if(typeof r!="string")throw new Error(`[ethjs-util] method getKeys expecting type String for input 'key' got '${typeof r}'.`);for(var s=[],u=0;u<t.length;u++){var x=t[u][r];if(i&&!x)x="";else if(typeof x!="string")throw new Error("invalid abi");s.push(x)}return s}he.getKeys=gf;function bf(t,r){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||r&&t.length!==2+2*r)}he.isHexString=bf;function yf(t){let r=t.toString(16),i=r.length%2?"0":"";return v.Buffer.from(i+r,"hex")}he.numberToBuffer=yf});var qt=ae(We=>{"use strict";U();L();Object.defineProperty(We,"__esModule",{value:!0});We.assertIsString=We.assertIsArray=We.assertIsBuffer=We.assertIsHexString=void 0;var pf=Bt(),_f=function(t){if(!(0,pf.isHexString)(t)){let r=`This method only supports 0x-prefixed hex strings but input was: ${t}`;throw new Error(r)}};We.assertIsHexString=_f;var wf=function(t){if(!v.Buffer.isBuffer(t)){let r=`This method only supports Buffer but input was: ${t}`;throw new Error(r)}};We.assertIsBuffer=wf;var vf=function(t){if(!Array.isArray(t)){let r=`This method only supports number arrays but input was: ${t}`;throw new Error(r)}};We.assertIsArray=vf;var Tf=function(t){if(typeof t!="string"){let r=`This method only supports strings but input was: ${t}`;throw new Error(r)}};We.assertIsString=Tf});var nr=ae(ve=>{"use strict";U();L();var Sf=ve&&ve.__createBinding||(Object.create?function(t,r,i,s){s===void 0&&(s=i);var u=Object.getOwnPropertyDescriptor(r,i);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(t,s,u)}:function(t,r,i,s){s===void 0&&(s=i),t[s]=r[i]}),mf=ve&&ve.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),Ef=ve&&ve.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i in t)i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)&&Sf(r,t,i);return mf(r,t),r};Object.defineProperty(ve,"__esModule",{value:!0});ve.rlphash=ve.keccakFromString=ve.keccak256=ve.keccak=void 0;var Pf=Ef(Dr()),Bf=qt(),Af=Se(),Mf=Rr();ve.keccak=Af.base.keccak;var Nf=function(t){return(0,ve.keccak)(t,256)};ve.keccak256=Nf;var If=function(t,r=256){(0,Bf.assertIsString)(t);let i=Mf.Buffer.from(t,"utf8");return(0,ve.keccak)(i,r)};ve.keccakFromString=If;var Hf=function(t){return(0,ve.keccak)(Pf.encode(t))};ve.rlphash=Hf});var $t=ae(ue=>{"use strict";U();L();Object.defineProperty(ue,"__esModule",{value:!0});ue.addHexPrefix=ue.toUnsigned=ue.fromSigned=ue.bufferToHex=ue.toBuffer=ue.unpadArray=ue.unpadBuffer=ue.stripZeros=ue.setLengthLeft=ue.zeros=void 0;var zn=Se(),Kn=Se(),Gr=Bt(),Yr=qt(),Uf=function(t){return v.Buffer.allocUnsafe(t).fill(0)};ue.zeros=Uf;var Lf=function(t,r,i){let s=(0,ue.zeros)(r);return i?t.length<r?(t.copy(s),s):t.slice(0,r):t.length<r?(t.copy(s,r-t.length),s):t.slice(-r)},Of=function(t,r){return(0,Yr.assertIsBuffer)(t),Lf(t,r,!1)};ue.setLengthLeft=Of;var jf=function(t){let r=t[0];for(;t.length>0&&r.toString()==="0";)t=t.slice(1),r=t[0];return t};ue.stripZeros=jf;var Rf=function(t){return(0,Yr.assertIsBuffer)(t),(0,ue.stripZeros)(t)};ue.unpadBuffer=Rf;var qf=function(t){return(0,Yr.assertIsArray)(t),(0,ue.stripZeros)(t)};ue.unpadArray=qf;var $f=function(t){if(t==null)return v.Buffer.allocUnsafe(0);if(v.Buffer.isBuffer(t))return v.Buffer.from(t);if(Array.isArray(t)||t instanceof Uint8Array)return v.Buffer.from(t);if(typeof t=="string"){if(!(0,Gr.isHexString)(t))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${t}`);return v.Buffer.from((0,Gr.padToEven)(Kn.base.stripHexPrefix(t)),"hex")}if(typeof t=="number")return(0,Gr.intToBuffer)(t);if(zn.BN.isBN(t))return t.toArrayLike(v.Buffer);if(t.toArray)return v.Buffer.from(t.toArray());if(t.toBuffer)return v.Buffer.from(t.toBuffer());throw new Error("invalid type")};ue.toBuffer=$f;var Vf=function(t){return t=(0,ue.toBuffer)(t),"0x"+t.toString("hex")};ue.bufferToHex=Vf;var Ff=function(t){return new zn.BN(t).fromTwos(256)};ue.fromSigned=Ff;var Cf=function(t){return v.Buffer.from(t.toTwos(256).toArray())};ue.toUnsigned=Cf;var Df=function(t){return typeof t!="string"||Kn.base.isHexPrefixed(t)?t:"0x"+t};ue.addHexPrefix=Df});var fr=ae(Ie=>{"use strict";U();L();Object.defineProperty(Ie,"__esModule",{value:!0});Ie.toType=Ie.TypeOutput=Ie.bnToRlp=Ie.bnToUnpaddedBuffer=Ie.validateNoLeadingZeroes=Ie.bnToHex=void 0;var zr=Se(),Gf=Bt(),Kr=$t();function Yf(t){return`0x${t.toString(16)}`}Ie.bnToHex=Yf;var zf=function(t){for(let[r,i]of Object.entries(t))if(i!==void 0&&i.length>0&&i[0]===0)throw new Error(`${r} cannot have leading zeroes, received: ${i.toString("hex")}`)};Ie.validateNoLeadingZeroes=zf;function Kf(t){return(0,Kr.unpadBuffer)(t.toArrayLike(v.Buffer))}Ie.bnToUnpaddedBuffer=Kf;function Xf(t){return(0,Kr.unpadBuffer)(t.toArrayLike(v.Buffer))}Ie.bnToRlp=Xf;var ir;(function(t){t[t.Number=0]="Number",t[t.BN=1]="BN",t[t.Buffer=2]="Buffer",t[t.PrefixedHexString=3]="PrefixedHexString"})(ir=Ie.TypeOutput||(Ie.TypeOutput={}));function Zf(t,r){if(typeof t=="string"&&!(0,Gf.isHexString)(t))throw new Error(`A string must be provided with a 0x-prefix, given: ${t}`);if(typeof t=="number"&&!Number.isSafeInteger(t))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");if(t=(0,Kr.toBuffer)(t),r===ir.Buffer)return t;if(r===ir.BN)return new zr.BN(t);if(r===ir.Number){let i=new zr.BN(t),s=new zr.BN(Number.MAX_SAFE_INTEGER.toString());if(i.gt(s))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return i.toNumber()}else return`0x${t.toString("hex")}`}Ie.toType=Zf});var Zr=ae(Te=>{"use strict";U();L();var Jf=Te&&Te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Te,"__esModule",{value:!0});Te.privateToAddress=Te.privateToPublic=Te.publicToAddress=Te.pubToAddress=Te.toChecksumAddress=Te.isValidAddress=void 0;var Wf=Jf($n()),Xr=Se(),Zn=nr(),sr=qt(),Xn=fr(),Qf=function(t){return(0,sr.assertIsHexString)(t),/^0x[0-9a-fA-F]{40}$/.test(t)};Te.isValidAddress=Qf;var kf=function(t,r){(0,sr.assertIsHexString)(t);let i=Xr.base.stripHexPrefix(t).toLowerCase(),s="";r&&(s=(0,Xn.toType)(r,Xn.TypeOutput.BN).toString()+"0x");let u=(0,Zn.keccakFromString)(s+i).toString("hex"),x="0x";for(let _=0;_<i.length;_++)parseInt(u[_],16)>=8?x+=i[_].toUpperCase():x+=i[_];return x};Te.toChecksumAddress=kf;var es=function(t,r=!1){if((0,sr.assertIsBuffer)(t),r&&t.length!==64){let i=Xr.signUtil.secp256k1.publicKeyConvert(t,!1);t=v.Buffer.from(i.slice(1))}return(0,Wf.default)(t.length===64),(0,Zn.keccak)(t).slice(-20)};Te.pubToAddress=es;Te.publicToAddress=Te.pubToAddress;var ts=function(t){return(0,sr.assertIsBuffer)(t),Xr.signUtil.secp256k1.publicKeyCreate(t,!1).slice(1)};Te.privateToPublic=ts;var rs=function(t){return(0,Te.publicToAddress)((0,Te.privateToPublic)(t))};Te.privateToAddress=rs});var Wn=ae(ar=>{"use strict";U();L();Object.defineProperty(ar,"__esModule",{value:!0});ar.Address=void 0;var or=$n(),Jn=$t(),Jr=Zr(),it=class{constructor(r){or(r.length===20,"Invalid address length"),this.buf=r}static zero(){return new it((0,Jn.zeros)(20))}static fromString(r){return or((0,Jr.isValidAddress)(r),"Invalid address"),new it((0,Jn.toBuffer)(r))}static fromPublicKey(r){or(v.Buffer.isBuffer(r),"Public key should be Buffer");let i=(0,Jr.pubToAddress)(r);return new it(i)}static fromPrivateKey(r){or(v.Buffer.isBuffer(r),"Private key should be Buffer");let i=(0,Jr.privateToAddress)(r);return new it(i)}equals(r){return this.buf.equals(r.buf)}isZero(){return this.equals(it.zero())}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return v.Buffer.from(this.buf)}};ar.Address=it});var hi=ae(C=>{"use strict";U();L();Object.defineProperty(C,"__esModule",{value:!0});C.typedSignatureHash=C.TypedDataUtils=C.TYPED_MESSAGE_SCHEMA=C.getLength=C.getErrorStack=C.padStart=C.bigIntToBytes=C.remove0x=C.add0x=C.hexToBytes=C.isStrictHexString=C.assertIsHexString=C.concatBytes=C.valueToBytes=C.isBytes=C.stringToBytes=C.numberToBytes=C.assert=C.SignTypedDataVersion=C.StrictHexStruct=void 0;var Ye=Ze(),ns=gt(),Vt=Se(),Wr=ki(),Qn=48,kn=58,ei=87,is=new RegExp("^u?int(?<length>[0-9]*)?$","u"),fs=32;C.StrictHexStruct=(0,Wr.pattern)((0,Wr.string)(),/^0x[0-9a-f]+$/iu);var qe;(function(t){t.V1="V1",t.V3="V3",t.V4="V4"})(qe=C.SignTypedDataVersion||(C.SignTypedDataVersion={}));function $e(t,r){if(!t)throw new Error(r)}C.assert=$e;function Ft(t){$e(typeof t=="number","Value must be a number."),$e(t>=0,"Value must be a non-negative number."),$e(Number.isSafeInteger(t),"Value is not a safe integer. Use `bigIntToBytes` instead.");let r=t.toString(16);return At(r)}C.numberToBytes=Ft;function ur(t){return $e(typeof t=="string","Value must be a string."),new TextEncoder().encode(t)}C.stringToBytes=ur;function ri(t){return t instanceof Uint8Array}C.isBytes=ri;function ni(t){if(typeof t=="bigint")return dr(t);if(typeof t=="number")return Ft(t);if(typeof t=="string")return t.startsWith("0x")?At(t):ur(t);if(ri(t))return t;throw new TypeError(`Unsupported value type: "${typeof t}".`)}C.valueToBytes=ni;function ii(t){let r=new Array(t.length),i=0;for(let u=0;u<t.length;u++){let x=ni(t[u]);r[u]=x,i+=x.length}let s=new Uint8Array(i);for(let u=0,x=0;u<r.length;u++)s.set(r[u],x),x+=r[u].length;return s}C.concatBytes=ii;function fi(t){$e((0,Ye.isHexString)(t),"Value must be a hexadecimal string.")}C.assertIsHexString=fi;function cr(t){return(0,Wr.is)(t,C.StrictHexStruct)}C.isStrictHexString=cr;function At(t){var u;if(((u=t==null?void 0:t.toLowerCase)==null?void 0:u.call(t))==="0x")return new Uint8Array;fi(t);let r=oi(t).toLowerCase(),i=r.length%2===0?r:`0${r}`,s=new Uint8Array(i.length/2);for(let x=0;x<s.length;x++){let _=i.charCodeAt(x*2),P=i.charCodeAt(x*2+1),j=_-(_<kn?Qn:ei),X=P-(P<kn?Qn:ei);s[x]=j*16+X}return s}C.hexToBytes=At;function si(t){return t.startsWith("0x")?t:t.startsWith("0X")?`0x${t.substring(2)}`:`0x${t}`}C.add0x=si;function oi(t){return t.startsWith("0x")||t.startsWith("0X")?t.substring(2):t}C.remove0x=oi;function dr(t){$e(typeof t=="bigint","Value must be a bigint."),$e(t>=BigInt(0),"Value must be a non-negative bigint.");let r=t.toString(16);return At(r)}C.bigIntToBytes=dr;function Qr(t,r=fs){let i=new Uint8Array(Math.max(r-t.length,0)).fill(0);return ii([i,t])}C.padStart=Qr;var ss=t=>{if(t instanceof Error)return t.stack};C.getErrorStack=ss;var os=t=>{var s;if(t==="int"||t==="uint")return 256;let r=t.match(is);$e((s=r==null?void 0:r.groups)==null?void 0:s.length,`Invalid number type. Expected a number type, but received "${t}".`);let i=parseInt(r.groups.length,10);return $e(i>=8&&i<=256,`Invalid number length. Expected a number between 8 and 256, but received "${t}".`),$e(i%8===0,`Invalid number length. Expected a multiple of 8, but received "${t}".`),i};C.getLength=os;C.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string",enum:as()}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function as(){let t=["bool","address","string","bytes"],r=Array.from(new Array(32)).map((u,x)=>`int${(x+1)*8}`),i=Array.from(new Array(32)).map((u,x)=>`uint${(x+1)*8}`),s=Array.from(new Array(32)).map((u,x)=>`bytes${x+1}`);return[...t,...r,...i,...s]}function hr(t,r){if(Object.keys(qe).includes(t)){if(r&&!r.includes(t))throw new Error(`SignTypedDataVersion not allowed: '${t}'. Allowed versions are: ${r.join(", ")}`)}else throw new Error(`Invalid version: '${t}'`)}function cs(t){let r=BigInt(0);for(let i=0;i<t.length;i++){let s=BigInt(t.charCodeAt(i)-48);r*=BigInt(10),s>=49?r+=s-BigInt(49)+BigInt(10):s>=17?r+=s-BigInt(17)+BigInt(10):r+=s}return Qr(dr(r),20)}function us(t,r){$e(r!==null,`Unable to encode value: Invalid number. Expected a valid number value, but received "${r}".`);let i=BigInt(r),s=(0,C.getLength)(t),u=BigInt(2)**BigInt(s)-BigInt(1);return $e(i>=-u&&i<=u,`Unable to encode value: Number "${r}" is out of range for type "${t}".`),i}function ai(t,r,i,s,u){if(hr(u,[qe.V3,qe.V4]),t[i]!==void 0)return["bytes32",u===qe.V4&&s==null?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,Ye.keccak)(kr(i,s,t,u))];if(i==="function")throw new Error('Unsupported or invalid type: "function"');if(s===void 0)throw new Error(`missing value for field ${r} of type ${i}`);if(i==="address"){if(typeof s=="number")return["address",Qr(Ft(s),20)];if(cr(s))return["address",si(s)];if(typeof s=="string")return["address",cs(s).subarray(0,20)]}if(i==="bool")return["bool",Boolean(s)];if(i==="bytes")return typeof s=="number"?s=Ft(s):cr(s)?s=At(s):typeof s=="string"&&(s=ur(s)),["bytes32",(0,Ye.keccak)(s)];if(i.startsWith("bytes")&&i!=="bytes"&&!i.includes("["))return typeof s=="number"?s<0?["bytes32",new Uint8Array(32)]:["bytes32",dr(BigInt(s))]:cr(s)?["bytes32",At(s)]:["bytes32",s];if(i.startsWith("int")&&!i.includes("[")){let x=us(i,s);return x>=BigInt(0)?["uint256",x]:["int256",x]}if(i==="string")return typeof s=="number"?s=Ft(s):s=ur(s!=null?s:""),["bytes32",(0,Ye.keccak)(s)];if(i.endsWith("]")){if(u===qe.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let x=i.slice(0,i.lastIndexOf("[")),_=s.map(X=>ai(t,r,x,X,u)),P=_.map(([X])=>X),j=_.map(([,X])=>X);return["bytes32",(0,Ye.keccak)(Vt.abi.RawEncode(P,j))]}return[i,s]}function kr(t,r,i,s){hr(s,[qe.V3,qe.V4]);let u=["bytes32"],x=[di(t,i)];for(let _ of i[t]){if(s===qe.V3&&r[_.name]===void 0)continue;let[P,j]=ai(i,_.name,_.type,r[_.name],s);u.push(P),x.push(j)}return Vt.abi.RawEncode(u,x)}function ci(t,r){let i="",s=ui(t,r);s.delete(t);let u=[t,...Array.from(s).sort()];for(let x of u){if(!r[x])throw new Error(`No type definition specified: ${x}`);i+=`${x}(${r[x].map(({name:P,type:j})=>`${j} ${P}`).join(",")})`}return i}function ui(t,r,i=new Set){if([t]=t.match(/^\w*/u),i.has(t)||r[t]===void 0)return i;i.add(t);for(let s of r[t])ui(s.type,r,i);return i}function ti(t,r,i,s){return hr(s,[qe.V3,qe.V4]),(0,Ye.keccak)(kr(t,r,i,s))}function di(t,r){return(0,Ye.keccak)(v.Buffer.from(ci(t,r)))}function ds(t){let r={};for(let i in C.TYPED_MESSAGE_SCHEMA.properties)t[i]&&(r[i]=t[i]);return"types"in r&&(r.types={EIP712Domain:[],...r.types}),r}function hs(t,r){hr(r,[qe.V3,qe.V4]);let i=ds(t),s=[v.Buffer.from("1901","hex")];return s.push(ti("EIP712Domain",i.domain,i.types,r)),i.primaryType!=="EIP712Domain"&&s.push(ti(i.primaryType,i.message,i.types,r)),(0,Ye.keccak)(v.Buffer.concat(s))}C.TypedDataUtils={encodeData:kr,encodeType:ci,hashType:di,eip712Hash:hs};function xs(t){let r=ls(t);return(0,Ye.bufferToHex)(r)}C.typedSignatureHash=xs;function ls(t){let r=new Error("Expect argument to be non-empty array");if(typeof t!="object"||!("length"in t)||!t.length)throw r;let i=t.map(function(Q){return Q.type!=="bytes"?Q.value:(0,ns.legacyToBuffer)(Q.value)}),s=t.map(function(Q){return Q.type}),u=t.map(function(Q){if(!Q.name)throw r;return`${Q.type} ${Q.name}`}),x=Vt.abi.ABI.solidityPack(new Array(t.length).fill("string"),u),_=Vt.abi.ABI.solidityPack(s,i),P=(0,Ye.keccak256)(x),j=(0,Ye.keccak256)(_),X=Vt.abi.ABI.solidityPack(["bytes32","bytes32"],[P,j]);return(0,Ye.keccak256)(X)}});var xi=ae((Co,xr)=>{"use strict";U();L();(function(t){"use strict";var r=function(n){var o,f=new Float64Array(16);if(n)for(o=0;o<n.length;o++)f[o]=n[o];return f},i=function(){throw new Error("no PRNG")},s=new Uint8Array(16),u=new Uint8Array(32);u[0]=9;var x=r(),_=r([1]),P=r([56129,1]),j=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),X=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Q=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),ye=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Ue=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Ce(n,o,f,e){n[o]=f>>24&255,n[o+1]=f>>16&255,n[o+2]=f>>8&255,n[o+3]=f&255,n[o+4]=e>>24&255,n[o+5]=e>>16&255,n[o+6]=e>>8&255,n[o+7]=e&255}function vt(n,o,f,e,a){var d,h=0;for(d=0;d<a;d++)h|=n[o+d]^f[e+d];return(1&h-1>>>8)-1}function wn(n,o,f,e){return vt(n,o,f,e,16)}function wr(n,o,f,e){return vt(n,o,f,e,32)}function Di(n,o,f,e){for(var a=e[0]&255|(e[1]&255)<<8|(e[2]&255)<<16|(e[3]&255)<<24,d=f[0]&255|(f[1]&255)<<8|(f[2]&255)<<16|(f[3]&255)<<24,h=f[4]&255|(f[5]&255)<<8|(f[6]&255)<<16|(f[7]&255)<<24,y=f[8]&255|(f[9]&255)<<8|(f[10]&255)<<16|(f[11]&255)<<24,S=f[12]&255|(f[13]&255)<<8|(f[14]&255)<<16|(f[15]&255)<<24,H=e[4]&255|(e[5]&255)<<8|(e[6]&255)<<16|(e[7]&255)<<24,E=o[0]&255|(o[1]&255)<<8|(o[2]&255)<<16|(o[3]&255)<<24,ne=o[4]&255|(o[5]&255)<<8|(o[6]&255)<<16|(o[7]&255)<<24,A=o[8]&255|(o[9]&255)<<8|(o[10]&255)<<16|(o[11]&255)<<24,q=o[12]&255|(o[13]&255)<<8|(o[14]&255)<<16|(o[15]&255)<<24,$=e[8]&255|(e[9]&255)<<8|(e[10]&255)<<16|(e[11]&255)<<24,Y=f[16]&255|(f[17]&255)<<8|(f[18]&255)<<16|(f[19]&255)<<24,G=f[20]&255|(f[21]&255)<<8|(f[22]&255)<<16|(f[23]&255)<<24,V=f[24]&255|(f[25]&255)<<8|(f[26]&255)<<16|(f[27]&255)<<24,D=f[28]&255|(f[29]&255)<<8|(f[30]&255)<<16|(f[31]&255)<<24,F=e[12]&255|(e[13]&255)<<8|(e[14]&255)<<16|(e[15]&255)<<24,M=a,O=d,B=h,N=y,I=S,m=H,l=E,g=ne,w=A,b=q,p=$,T=Y,R=G,z=V,Z=D,K=F,c,W=0;W<20;W+=2)c=M+R|0,I^=c<<7|c>>>32-7,c=I+M|0,w^=c<<9|c>>>32-9,c=w+I|0,R^=c<<13|c>>>32-13,c=R+w|0,M^=c<<18|c>>>32-18,c=m+O|0,b^=c<<7|c>>>32-7,c=b+m|0,z^=c<<9|c>>>32-9,c=z+b|0,O^=c<<13|c>>>32-13,c=O+z|0,m^=c<<18|c>>>32-18,c=p+l|0,Z^=c<<7|c>>>32-7,c=Z+p|0,B^=c<<9|c>>>32-9,c=B+Z|0,l^=c<<13|c>>>32-13,c=l+B|0,p^=c<<18|c>>>32-18,c=K+T|0,N^=c<<7|c>>>32-7,c=N+K|0,g^=c<<9|c>>>32-9,c=g+N|0,T^=c<<13|c>>>32-13,c=T+g|0,K^=c<<18|c>>>32-18,c=M+N|0,O^=c<<7|c>>>32-7,c=O+M|0,B^=c<<9|c>>>32-9,c=B+O|0,N^=c<<13|c>>>32-13,c=N+B|0,M^=c<<18|c>>>32-18,c=m+I|0,l^=c<<7|c>>>32-7,c=l+m|0,g^=c<<9|c>>>32-9,c=g+l|0,I^=c<<13|c>>>32-13,c=I+g|0,m^=c<<18|c>>>32-18,c=p+b|0,T^=c<<7|c>>>32-7,c=T+p|0,w^=c<<9|c>>>32-9,c=w+T|0,b^=c<<13|c>>>32-13,c=b+w|0,p^=c<<18|c>>>32-18,c=K+Z|0,R^=c<<7|c>>>32-7,c=R+K|0,z^=c<<9|c>>>32-9,c=z+R|0,Z^=c<<13|c>>>32-13,c=Z+z|0,K^=c<<18|c>>>32-18;M=M+a|0,O=O+d|0,B=B+h|0,N=N+y|0,I=I+S|0,m=m+H|0,l=l+E|0,g=g+ne|0,w=w+A|0,b=b+q|0,p=p+$|0,T=T+Y|0,R=R+G|0,z=z+V|0,Z=Z+D|0,K=K+F|0,n[0]=M>>>0&255,n[1]=M>>>8&255,n[2]=M>>>16&255,n[3]=M>>>24&255,n[4]=O>>>0&255,n[5]=O>>>8&255,n[6]=O>>>16&255,n[7]=O>>>24&255,n[8]=B>>>0&255,n[9]=B>>>8&255,n[10]=B>>>16&255,n[11]=B>>>24&255,n[12]=N>>>0&255,n[13]=N>>>8&255,n[14]=N>>>16&255,n[15]=N>>>24&255,n[16]=I>>>0&255,n[17]=I>>>8&255,n[18]=I>>>16&255,n[19]=I>>>24&255,n[20]=m>>>0&255,n[21]=m>>>8&255,n[22]=m>>>16&255,n[23]=m>>>24&255,n[24]=l>>>0&255,n[25]=l>>>8&255,n[26]=l>>>16&255,n[27]=l>>>24&255,n[28]=g>>>0&255,n[29]=g>>>8&255,n[30]=g>>>16&255,n[31]=g>>>24&255,n[32]=w>>>0&255,n[33]=w>>>8&255,n[34]=w>>>16&255,n[35]=w>>>24&255,n[36]=b>>>0&255,n[37]=b>>>8&255,n[38]=b>>>16&255,n[39]=b>>>24&255,n[40]=p>>>0&255,n[41]=p>>>8&255,n[42]=p>>>16&255,n[43]=p>>>24&255,n[44]=T>>>0&255,n[45]=T>>>8&255,n[46]=T>>>16&255,n[47]=T>>>24&255,n[48]=R>>>0&255,n[49]=R>>>8&255,n[50]=R>>>16&255,n[51]=R>>>24&255,n[52]=z>>>0&255,n[53]=z>>>8&255,n[54]=z>>>16&255,n[55]=z>>>24&255,n[56]=Z>>>0&255,n[57]=Z>>>8&255,n[58]=Z>>>16&255,n[59]=Z>>>24&255,n[60]=K>>>0&255,n[61]=K>>>8&255,n[62]=K>>>16&255,n[63]=K>>>24&255}function Gi(n,o,f,e){for(var a=e[0]&255|(e[1]&255)<<8|(e[2]&255)<<16|(e[3]&255)<<24,d=f[0]&255|(f[1]&255)<<8|(f[2]&255)<<16|(f[3]&255)<<24,h=f[4]&255|(f[5]&255)<<8|(f[6]&255)<<16|(f[7]&255)<<24,y=f[8]&255|(f[9]&255)<<8|(f[10]&255)<<16|(f[11]&255)<<24,S=f[12]&255|(f[13]&255)<<8|(f[14]&255)<<16|(f[15]&255)<<24,H=e[4]&255|(e[5]&255)<<8|(e[6]&255)<<16|(e[7]&255)<<24,E=o[0]&255|(o[1]&255)<<8|(o[2]&255)<<16|(o[3]&255)<<24,ne=o[4]&255|(o[5]&255)<<8|(o[6]&255)<<16|(o[7]&255)<<24,A=o[8]&255|(o[9]&255)<<8|(o[10]&255)<<16|(o[11]&255)<<24,q=o[12]&255|(o[13]&255)<<8|(o[14]&255)<<16|(o[15]&255)<<24,$=e[8]&255|(e[9]&255)<<8|(e[10]&255)<<16|(e[11]&255)<<24,Y=f[16]&255|(f[17]&255)<<8|(f[18]&255)<<16|(f[19]&255)<<24,G=f[20]&255|(f[21]&255)<<8|(f[22]&255)<<16|(f[23]&255)<<24,V=f[24]&255|(f[25]&255)<<8|(f[26]&255)<<16|(f[27]&255)<<24,D=f[28]&255|(f[29]&255)<<8|(f[30]&255)<<16|(f[31]&255)<<24,F=e[12]&255|(e[13]&255)<<8|(e[14]&255)<<16|(e[15]&255)<<24,M=a,O=d,B=h,N=y,I=S,m=H,l=E,g=ne,w=A,b=q,p=$,T=Y,R=G,z=V,Z=D,K=F,c,W=0;W<20;W+=2)c=M+R|0,I^=c<<7|c>>>32-7,c=I+M|0,w^=c<<9|c>>>32-9,c=w+I|0,R^=c<<13|c>>>32-13,c=R+w|0,M^=c<<18|c>>>32-18,c=m+O|0,b^=c<<7|c>>>32-7,c=b+m|0,z^=c<<9|c>>>32-9,c=z+b|0,O^=c<<13|c>>>32-13,c=O+z|0,m^=c<<18|c>>>32-18,c=p+l|0,Z^=c<<7|c>>>32-7,c=Z+p|0,B^=c<<9|c>>>32-9,c=B+Z|0,l^=c<<13|c>>>32-13,c=l+B|0,p^=c<<18|c>>>32-18,c=K+T|0,N^=c<<7|c>>>32-7,c=N+K|0,g^=c<<9|c>>>32-9,c=g+N|0,T^=c<<13|c>>>32-13,c=T+g|0,K^=c<<18|c>>>32-18,c=M+N|0,O^=c<<7|c>>>32-7,c=O+M|0,B^=c<<9|c>>>32-9,c=B+O|0,N^=c<<13|c>>>32-13,c=N+B|0,M^=c<<18|c>>>32-18,c=m+I|0,l^=c<<7|c>>>32-7,c=l+m|0,g^=c<<9|c>>>32-9,c=g+l|0,I^=c<<13|c>>>32-13,c=I+g|0,m^=c<<18|c>>>32-18,c=p+b|0,T^=c<<7|c>>>32-7,c=T+p|0,w^=c<<9|c>>>32-9,c=w+T|0,b^=c<<13|c>>>32-13,c=b+w|0,p^=c<<18|c>>>32-18,c=K+Z|0,R^=c<<7|c>>>32-7,c=R+K|0,z^=c<<9|c>>>32-9,c=z+R|0,Z^=c<<13|c>>>32-13,c=Z+z|0,K^=c<<18|c>>>32-18;n[0]=M>>>0&255,n[1]=M>>>8&255,n[2]=M>>>16&255,n[3]=M>>>24&255,n[4]=m>>>0&255,n[5]=m>>>8&255,n[6]=m>>>16&255,n[7]=m>>>24&255,n[8]=p>>>0&255,n[9]=p>>>8&255,n[10]=p>>>16&255,n[11]=p>>>24&255,n[12]=K>>>0&255,n[13]=K>>>8&255,n[14]=K>>>16&255,n[15]=K>>>24&255,n[16]=l>>>0&255,n[17]=l>>>8&255,n[18]=l>>>16&255,n[19]=l>>>24&255,n[20]=g>>>0&255,n[21]=g>>>8&255,n[22]=g>>>16&255,n[23]=g>>>24&255,n[24]=w>>>0&255,n[25]=w>>>8&255,n[26]=w>>>16&255,n[27]=w>>>24&255,n[28]=b>>>0&255,n[29]=b>>>8&255,n[30]=b>>>16&255,n[31]=b>>>24&255}function Yt(n,o,f,e){Di(n,o,f,e)}function zt(n,o,f,e){Gi(n,o,f,e)}var ht=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function vn(n,o,f,e,a,d,h){var y=new Uint8Array(16),S=new Uint8Array(64),H,E;for(E=0;E<16;E++)y[E]=0;for(E=0;E<8;E++)y[E]=d[E];for(;a>=64;){for(Yt(S,y,h,ht),E=0;E<64;E++)n[o+E]=f[e+E]^S[E];for(H=1,E=8;E<16;E++)H=H+(y[E]&255)|0,y[E]=H&255,H>>>=8;a-=64,o+=64,e+=64}if(a>0)for(Yt(S,y,h,ht),E=0;E<a;E++)n[o+E]=f[e+E]^S[E];return 0}function Tn(n,o,f,e,a){var d=new Uint8Array(16),h=new Uint8Array(64),y,S;for(S=0;S<16;S++)d[S]=0;for(S=0;S<8;S++)d[S]=e[S];for(;f>=64;){for(Yt(h,d,a,ht),S=0;S<64;S++)n[o+S]=h[S];for(y=1,S=8;S<16;S++)y=y+(d[S]&255)|0,d[S]=y&255,y>>>=8;f-=64,o+=64}if(f>0)for(Yt(h,d,a,ht),S=0;S<f;S++)n[o+S]=h[S];return 0}function Sn(n,o,f,e,a){var d=new Uint8Array(32);zt(d,e,a,ht);for(var h=new Uint8Array(8),y=0;y<8;y++)h[y]=e[y+16];return Tn(n,o,f,h,d)}function vr(n,o,f,e,a,d,h){var y=new Uint8Array(32);zt(y,d,h,ht);for(var S=new Uint8Array(8),H=0;H<8;H++)S[H]=d[H+16];return vn(n,o,f,e,a,S,y)}var Kt=function(n){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var o,f,e,a,d,h,y,S;o=n[0]&255|(n[1]&255)<<8,this.r[0]=o&8191,f=n[2]&255|(n[3]&255)<<8,this.r[1]=(o>>>13|f<<3)&8191,e=n[4]&255|(n[5]&255)<<8,this.r[2]=(f>>>10|e<<6)&7939,a=n[6]&255|(n[7]&255)<<8,this.r[3]=(e>>>7|a<<9)&8191,d=n[8]&255|(n[9]&255)<<8,this.r[4]=(a>>>4|d<<12)&255,this.r[5]=d>>>1&8190,h=n[10]&255|(n[11]&255)<<8,this.r[6]=(d>>>14|h<<2)&8191,y=n[12]&255|(n[13]&255)<<8,this.r[7]=(h>>>11|y<<5)&8065,S=n[14]&255|(n[15]&255)<<8,this.r[8]=(y>>>8|S<<8)&8191,this.r[9]=S>>>5&127,this.pad[0]=n[16]&255|(n[17]&255)<<8,this.pad[1]=n[18]&255|(n[19]&255)<<8,this.pad[2]=n[20]&255|(n[21]&255)<<8,this.pad[3]=n[22]&255|(n[23]&255)<<8,this.pad[4]=n[24]&255|(n[25]&255)<<8,this.pad[5]=n[26]&255|(n[27]&255)<<8,this.pad[6]=n[28]&255|(n[29]&255)<<8,this.pad[7]=n[30]&255|(n[31]&255)<<8};Kt.prototype.blocks=function(n,o,f){for(var e=this.fin?0:2048,a,d,h,y,S,H,E,ne,A,q,$,Y,G,V,D,F,M,O,B,N=this.h[0],I=this.h[1],m=this.h[2],l=this.h[3],g=this.h[4],w=this.h[5],b=this.h[6],p=this.h[7],T=this.h[8],R=this.h[9],z=this.r[0],Z=this.r[1],K=this.r[2],c=this.r[3],W=this.r[4],ie=this.r[5],fe=this.r[6],J=this.r[7],te=this.r[8],re=this.r[9];f>=16;)a=n[o+0]&255|(n[o+1]&255)<<8,N+=a&8191,d=n[o+2]&255|(n[o+3]&255)<<8,I+=(a>>>13|d<<3)&8191,h=n[o+4]&255|(n[o+5]&255)<<8,m+=(d>>>10|h<<6)&8191,y=n[o+6]&255|(n[o+7]&255)<<8,l+=(h>>>7|y<<9)&8191,S=n[o+8]&255|(n[o+9]&255)<<8,g+=(y>>>4|S<<12)&8191,w+=S>>>1&8191,H=n[o+10]&255|(n[o+11]&255)<<8,b+=(S>>>14|H<<2)&8191,E=n[o+12]&255|(n[o+13]&255)<<8,p+=(H>>>11|E<<5)&8191,ne=n[o+14]&255|(n[o+15]&255)<<8,T+=(E>>>8|ne<<8)&8191,R+=ne>>>5|e,A=0,q=A,q+=N*z,q+=I*(5*re),q+=m*(5*te),q+=l*(5*J),q+=g*(5*fe),A=q>>>13,q&=8191,q+=w*(5*ie),q+=b*(5*W),q+=p*(5*c),q+=T*(5*K),q+=R*(5*Z),A+=q>>>13,q&=8191,$=A,$+=N*Z,$+=I*z,$+=m*(5*re),$+=l*(5*te),$+=g*(5*J),A=$>>>13,$&=8191,$+=w*(5*fe),$+=b*(5*ie),$+=p*(5*W),$+=T*(5*c),$+=R*(5*K),A+=$>>>13,$&=8191,Y=A,Y+=N*K,Y+=I*Z,Y+=m*z,Y+=l*(5*re),Y+=g*(5*te),A=Y>>>13,Y&=8191,Y+=w*(5*J),Y+=b*(5*fe),Y+=p*(5*ie),Y+=T*(5*W),Y+=R*(5*c),A+=Y>>>13,Y&=8191,G=A,G+=N*c,G+=I*K,G+=m*Z,G+=l*z,G+=g*(5*re),A=G>>>13,G&=8191,G+=w*(5*te),G+=b*(5*J),G+=p*(5*fe),G+=T*(5*ie),G+=R*(5*W),A+=G>>>13,G&=8191,V=A,V+=N*W,V+=I*c,V+=m*K,V+=l*Z,V+=g*z,A=V>>>13,V&=8191,V+=w*(5*re),V+=b*(5*te),V+=p*(5*J),V+=T*(5*fe),V+=R*(5*ie),A+=V>>>13,V&=8191,D=A,D+=N*ie,D+=I*W,D+=m*c,D+=l*K,D+=g*Z,A=D>>>13,D&=8191,D+=w*z,D+=b*(5*re),D+=p*(5*te),D+=T*(5*J),D+=R*(5*fe),A+=D>>>13,D&=8191,F=A,F+=N*fe,F+=I*ie,F+=m*W,F+=l*c,F+=g*K,A=F>>>13,F&=8191,F+=w*Z,F+=b*z,F+=p*(5*re),F+=T*(5*te),F+=R*(5*J),A+=F>>>13,F&=8191,M=A,M+=N*J,M+=I*fe,M+=m*ie,M+=l*W,M+=g*c,A=M>>>13,M&=8191,M+=w*K,M+=b*Z,M+=p*z,M+=T*(5*re),M+=R*(5*te),A+=M>>>13,M&=8191,O=A,O+=N*te,O+=I*J,O+=m*fe,O+=l*ie,O+=g*W,A=O>>>13,O&=8191,O+=w*c,O+=b*K,O+=p*Z,O+=T*z,O+=R*(5*re),A+=O>>>13,O&=8191,B=A,B+=N*re,B+=I*te,B+=m*J,B+=l*fe,B+=g*ie,A=B>>>13,B&=8191,B+=w*W,B+=b*c,B+=p*K,B+=T*Z,B+=R*z,A+=B>>>13,B&=8191,A=(A<<2)+A|0,A=A+q|0,q=A&8191,A=A>>>13,$+=A,N=q,I=$,m=Y,l=G,g=V,w=D,b=F,p=M,T=O,R=B,o+=16,f-=16;this.h[0]=N,this.h[1]=I,this.h[2]=m,this.h[3]=l,this.h[4]=g,this.h[5]=w,this.h[6]=b,this.h[7]=p,this.h[8]=T,this.h[9]=R},Kt.prototype.finish=function(n,o){var f=new Uint16Array(10),e,a,d,h;if(this.leftover){for(h=this.leftover,this.buffer[h++]=1;h<16;h++)this.buffer[h]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(e=this.h[1]>>>13,this.h[1]&=8191,h=2;h<10;h++)this.h[h]+=e,e=this.h[h]>>>13,this.h[h]&=8191;for(this.h[0]+=e*5,e=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=e,e=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=e,f[0]=this.h[0]+5,e=f[0]>>>13,f[0]&=8191,h=1;h<10;h++)f[h]=this.h[h]+e,e=f[h]>>>13,f[h]&=8191;for(f[9]-=1<<13,a=(e^1)-1,h=0;h<10;h++)f[h]&=a;for(a=~a,h=0;h<10;h++)this.h[h]=this.h[h]&a|f[h];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,d=this.h[0]+this.pad[0],this.h[0]=d&65535,h=1;h<8;h++)d=(this.h[h]+this.pad[h]|0)+(d>>>16)|0,this.h[h]=d&65535;n[o+0]=this.h[0]>>>0&255,n[o+1]=this.h[0]>>>8&255,n[o+2]=this.h[1]>>>0&255,n[o+3]=this.h[1]>>>8&255,n[o+4]=this.h[2]>>>0&255,n[o+5]=this.h[2]>>>8&255,n[o+6]=this.h[3]>>>0&255,n[o+7]=this.h[3]>>>8&255,n[o+8]=this.h[4]>>>0&255,n[o+9]=this.h[4]>>>8&255,n[o+10]=this.h[5]>>>0&255,n[o+11]=this.h[5]>>>8&255,n[o+12]=this.h[6]>>>0&255,n[o+13]=this.h[6]>>>8&255,n[o+14]=this.h[7]>>>0&255,n[o+15]=this.h[7]>>>8&255},Kt.prototype.update=function(n,o,f){var e,a;if(this.leftover){for(a=16-this.leftover,a>f&&(a=f),e=0;e<a;e++)this.buffer[this.leftover+e]=n[o+e];if(f-=a,o+=a,this.leftover+=a,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(f>=16&&(a=f-f%16,this.blocks(n,o,a),o+=a,f-=a),f){for(e=0;e<f;e++)this.buffer[this.leftover+e]=n[o+e];this.leftover+=f}};function Tr(n,o,f,e,a,d){var h=new Kt(d);return h.update(f,e,a),h.finish(n,o),0}function mn(n,o,f,e,a,d){var h=new Uint8Array(16);return Tr(h,0,f,e,a,d),wn(n,o,h,0)}function Sr(n,o,f,e,a){var d;if(f<32)return-1;for(vr(n,0,o,0,f,e,a),Tr(n,16,n,32,f-32,n),d=0;d<16;d++)n[d]=0;return 0}function mr(n,o,f,e,a){var d,h=new Uint8Array(32);if(f<32||(Sn(h,0,32,e,a),mn(o,16,o,32,f-32,h)!==0))return-1;for(vr(n,0,o,0,f,e,a),d=0;d<32;d++)n[d]=0;return 0}function rt(n,o){var f;for(f=0;f<16;f++)n[f]=o[f]|0}function Er(n){var o,f,e=1;for(o=0;o<16;o++)f=n[o]+e+65535,e=Math.floor(f/65536),n[o]=f-e*65536;n[0]+=e-1+37*(e-1)}function Tt(n,o,f){for(var e,a=~(f-1),d=0;d<16;d++)e=a&(n[d]^o[d]),n[d]^=e,o[d]^=e}function St(n,o){var f,e,a,d=r(),h=r();for(f=0;f<16;f++)h[f]=o[f];for(Er(h),Er(h),Er(h),e=0;e<2;e++){for(d[0]=h[0]-65517,f=1;f<15;f++)d[f]=h[f]-65535-(d[f-1]>>16&1),d[f-1]&=65535;d[15]=h[15]-32767-(d[14]>>16&1),a=d[15]>>16&1,d[14]&=65535,Tt(h,d,1-a)}for(f=0;f<16;f++)n[2*f]=h[f]&255,n[2*f+1]=h[f]>>8}function En(n,o){var f=new Uint8Array(32),e=new Uint8Array(32);return St(f,n),St(e,o),wr(f,0,e,0)}function Pn(n){var o=new Uint8Array(32);return St(o,n),o[0]&1}function Pr(n,o){var f;for(f=0;f<16;f++)n[f]=o[2*f]+(o[2*f+1]<<8);n[15]&=32767}function Ke(n,o,f){for(var e=0;e<16;e++)n[e]=o[e]+f[e]}function Xe(n,o,f){for(var e=0;e<16;e++)n[e]=o[e]-f[e]}function ee(n,o,f){var e,a,d=0,h=0,y=0,S=0,H=0,E=0,ne=0,A=0,q=0,$=0,Y=0,G=0,V=0,D=0,F=0,M=0,O=0,B=0,N=0,I=0,m=0,l=0,g=0,w=0,b=0,p=0,T=0,R=0,z=0,Z=0,K=0,c=f[0],W=f[1],ie=f[2],fe=f[3],J=f[4],te=f[5],re=f[6],pe=f[7],oe=f[8],le=f[9],ge=f[10],be=f[11],we=f[12],Pe=f[13],Be=f[14],Ae=f[15];e=o[0],d+=e*c,h+=e*W,y+=e*ie,S+=e*fe,H+=e*J,E+=e*te,ne+=e*re,A+=e*pe,q+=e*oe,$+=e*le,Y+=e*ge,G+=e*be,V+=e*we,D+=e*Pe,F+=e*Be,M+=e*Ae,e=o[1],h+=e*c,y+=e*W,S+=e*ie,H+=e*fe,E+=e*J,ne+=e*te,A+=e*re,q+=e*pe,$+=e*oe,Y+=e*le,G+=e*ge,V+=e*be,D+=e*we,F+=e*Pe,M+=e*Be,O+=e*Ae,e=o[2],y+=e*c,S+=e*W,H+=e*ie,E+=e*fe,ne+=e*J,A+=e*te,q+=e*re,$+=e*pe,Y+=e*oe,G+=e*le,V+=e*ge,D+=e*be,F+=e*we,M+=e*Pe,O+=e*Be,B+=e*Ae,e=o[3],S+=e*c,H+=e*W,E+=e*ie,ne+=e*fe,A+=e*J,q+=e*te,$+=e*re,Y+=e*pe,G+=e*oe,V+=e*le,D+=e*ge,F+=e*be,M+=e*we,O+=e*Pe,B+=e*Be,N+=e*Ae,e=o[4],H+=e*c,E+=e*W,ne+=e*ie,A+=e*fe,q+=e*J,$+=e*te,Y+=e*re,G+=e*pe,V+=e*oe,D+=e*le,F+=e*ge,M+=e*be,O+=e*we,B+=e*Pe,N+=e*Be,I+=e*Ae,e=o[5],E+=e*c,ne+=e*W,A+=e*ie,q+=e*fe,$+=e*J,Y+=e*te,G+=e*re,V+=e*pe,D+=e*oe,F+=e*le,M+=e*ge,O+=e*be,B+=e*we,N+=e*Pe,I+=e*Be,m+=e*Ae,e=o[6],ne+=e*c,A+=e*W,q+=e*ie,$+=e*fe,Y+=e*J,G+=e*te,V+=e*re,D+=e*pe,F+=e*oe,M+=e*le,O+=e*ge,B+=e*be,N+=e*we,I+=e*Pe,m+=e*Be,l+=e*Ae,e=o[7],A+=e*c,q+=e*W,$+=e*ie,Y+=e*fe,G+=e*J,V+=e*te,D+=e*re,F+=e*pe,M+=e*oe,O+=e*le,B+=e*ge,N+=e*be,I+=e*we,m+=e*Pe,l+=e*Be,g+=e*Ae,e=o[8],q+=e*c,$+=e*W,Y+=e*ie,G+=e*fe,V+=e*J,D+=e*te,F+=e*re,M+=e*pe,O+=e*oe,B+=e*le,N+=e*ge,I+=e*be,m+=e*we,l+=e*Pe,g+=e*Be,w+=e*Ae,e=o[9],$+=e*c,Y+=e*W,G+=e*ie,V+=e*fe,D+=e*J,F+=e*te,M+=e*re,O+=e*pe,B+=e*oe,N+=e*le,I+=e*ge,m+=e*be,l+=e*we,g+=e*Pe,w+=e*Be,b+=e*Ae,e=o[10],Y+=e*c,G+=e*W,V+=e*ie,D+=e*fe,F+=e*J,M+=e*te,O+=e*re,B+=e*pe,N+=e*oe,I+=e*le,m+=e*ge,l+=e*be,g+=e*we,w+=e*Pe,b+=e*Be,p+=e*Ae,e=o[11],G+=e*c,V+=e*W,D+=e*ie,F+=e*fe,M+=e*J,O+=e*te,B+=e*re,N+=e*pe,I+=e*oe,m+=e*le,l+=e*ge,g+=e*be,w+=e*we,b+=e*Pe,p+=e*Be,T+=e*Ae,e=o[12],V+=e*c,D+=e*W,F+=e*ie,M+=e*fe,O+=e*J,B+=e*te,N+=e*re,I+=e*pe,m+=e*oe,l+=e*le,g+=e*ge,w+=e*be,b+=e*we,p+=e*Pe,T+=e*Be,R+=e*Ae,e=o[13],D+=e*c,F+=e*W,M+=e*ie,O+=e*fe,B+=e*J,N+=e*te,I+=e*re,m+=e*pe,l+=e*oe,g+=e*le,w+=e*ge,b+=e*be,p+=e*we,T+=e*Pe,R+=e*Be,z+=e*Ae,e=o[14],F+=e*c,M+=e*W,O+=e*ie,B+=e*fe,N+=e*J,I+=e*te,m+=e*re,l+=e*pe,g+=e*oe,w+=e*le,b+=e*ge,p+=e*be,T+=e*we,R+=e*Pe,z+=e*Be,Z+=e*Ae,e=o[15],M+=e*c,O+=e*W,B+=e*ie,N+=e*fe,I+=e*J,m+=e*te,l+=e*re,g+=e*pe,w+=e*oe,b+=e*le,p+=e*ge,T+=e*be,R+=e*we,z+=e*Pe,Z+=e*Be,K+=e*Ae,d+=38*O,h+=38*B,y+=38*N,S+=38*I,H+=38*m,E+=38*l,ne+=38*g,A+=38*w,q+=38*b,$+=38*p,Y+=38*T,G+=38*R,V+=38*z,D+=38*Z,F+=38*K,a=1,e=d+a+65535,a=Math.floor(e/65536),d=e-a*65536,e=h+a+65535,a=Math.floor(e/65536),h=e-a*65536,e=y+a+65535,a=Math.floor(e/65536),y=e-a*65536,e=S+a+65535,a=Math.floor(e/65536),S=e-a*65536,e=H+a+65535,a=Math.floor(e/65536),H=e-a*65536,e=E+a+65535,a=Math.floor(e/65536),E=e-a*65536,e=ne+a+65535,a=Math.floor(e/65536),ne=e-a*65536,e=A+a+65535,a=Math.floor(e/65536),A=e-a*65536,e=q+a+65535,a=Math.floor(e/65536),q=e-a*65536,e=$+a+65535,a=Math.floor(e/65536),$=e-a*65536,e=Y+a+65535,a=Math.floor(e/65536),Y=e-a*65536,e=G+a+65535,a=Math.floor(e/65536),G=e-a*65536,e=V+a+65535,a=Math.floor(e/65536),V=e-a*65536,e=D+a+65535,a=Math.floor(e/65536),D=e-a*65536,e=F+a+65535,a=Math.floor(e/65536),F=e-a*65536,e=M+a+65535,a=Math.floor(e/65536),M=e-a*65536,d+=a-1+37*(a-1),a=1,e=d+a+65535,a=Math.floor(e/65536),d=e-a*65536,e=h+a+65535,a=Math.floor(e/65536),h=e-a*65536,e=y+a+65535,a=Math.floor(e/65536),y=e-a*65536,e=S+a+65535,a=Math.floor(e/65536),S=e-a*65536,e=H+a+65535,a=Math.floor(e/65536),H=e-a*65536,e=E+a+65535,a=Math.floor(e/65536),E=e-a*65536,e=ne+a+65535,a=Math.floor(e/65536),ne=e-a*65536,e=A+a+65535,a=Math.floor(e/65536),A=e-a*65536,e=q+a+65535,a=Math.floor(e/65536),q=e-a*65536,e=$+a+65535,a=Math.floor(e/65536),$=e-a*65536,e=Y+a+65535,a=Math.floor(e/65536),Y=e-a*65536,e=G+a+65535,a=Math.floor(e/65536),G=e-a*65536,e=V+a+65535,a=Math.floor(e/65536),V=e-a*65536,e=D+a+65535,a=Math.floor(e/65536),D=e-a*65536,e=F+a+65535,a=Math.floor(e/65536),F=e-a*65536,e=M+a+65535,a=Math.floor(e/65536),M=e-a*65536,d+=a-1+37*(a-1),n[0]=d,n[1]=h,n[2]=y,n[3]=S,n[4]=H,n[5]=E,n[6]=ne,n[7]=A,n[8]=q,n[9]=$,n[10]=Y,n[11]=G,n[12]=V,n[13]=D,n[14]=F,n[15]=M}function De(n,o){ee(n,o,o)}function Bn(n,o){var f=r(),e;for(e=0;e<16;e++)f[e]=o[e];for(e=253;e>=0;e--)De(f,f),e!==2&&e!==4&&ee(f,f,o);for(e=0;e<16;e++)n[e]=f[e]}function An(n,o){var f=r(),e;for(e=0;e<16;e++)f[e]=o[e];for(e=250;e>=0;e--)De(f,f),e!==1&&ee(f,f,o);for(e=0;e<16;e++)n[e]=f[e]}function Xt(n,o,f){var e=new Uint8Array(32),a=new Float64Array(80),d,h,y=r(),S=r(),H=r(),E=r(),ne=r(),A=r();for(h=0;h<31;h++)e[h]=o[h];for(e[31]=o[31]&127|64,e[0]&=248,Pr(a,f),h=0;h<16;h++)S[h]=a[h],E[h]=y[h]=H[h]=0;for(y[0]=E[0]=1,h=254;h>=0;--h)d=e[h>>>3]>>>(h&7)&1,Tt(y,S,d),Tt(H,E,d),Ke(ne,y,H),Xe(y,y,H),Ke(H,S,E),Xe(S,S,E),De(E,ne),De(A,y),ee(y,H,y),ee(H,S,ne),Ke(ne,y,H),Xe(y,y,H),De(S,y),Xe(H,E,A),ee(y,H,P),Ke(y,y,E),ee(H,H,y),ee(y,E,A),ee(E,S,a),De(S,ne),Tt(y,S,d),Tt(H,E,d);for(h=0;h<16;h++)a[h+16]=y[h],a[h+32]=H[h],a[h+48]=S[h],a[h+64]=E[h];var q=a.subarray(32),$=a.subarray(16);return Bn(q,q),ee($,$,q),St(n,$),0}function Zt(n,o){return Xt(n,o,u)}function Mn(n,o){return i(o,32),Zt(n,o)}function Jt(n,o,f){var e=new Uint8Array(32);return Xt(e,f,o),zt(n,s,e,ht)}var Nn=Sr,Yi=mr;function zi(n,o,f,e,a,d){var h=new Uint8Array(32);return Jt(h,a,d),Nn(n,o,f,e,h)}function Ki(n,o,f,e,a,d){var h=new Uint8Array(32);return Jt(h,a,d),Yi(n,o,f,e,h)}var In=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Hn(n,o,f,e){for(var a=new Int32Array(16),d=new Int32Array(16),h,y,S,H,E,ne,A,q,$,Y,G,V,D,F,M,O,B,N,I,m,l,g,w,b,p,T,R=n[0],z=n[1],Z=n[2],K=n[3],c=n[4],W=n[5],ie=n[6],fe=n[7],J=o[0],te=o[1],re=o[2],pe=o[3],oe=o[4],le=o[5],ge=o[6],be=o[7],we=0;e>=128;){for(I=0;I<16;I++)m=8*I+we,a[I]=f[m+0]<<24|f[m+1]<<16|f[m+2]<<8|f[m+3],d[I]=f[m+4]<<24|f[m+5]<<16|f[m+6]<<8|f[m+7];for(I=0;I<80;I++)if(h=R,y=z,S=Z,H=K,E=c,ne=W,A=ie,q=fe,$=J,Y=te,G=re,V=pe,D=oe,F=le,M=ge,O=be,l=fe,g=be,w=g&65535,b=g>>>16,p=l&65535,T=l>>>16,l=(c>>>14|oe<<32-14)^(c>>>18|oe<<32-18)^(oe>>>41-32|c<<32-(41-32)),g=(oe>>>14|c<<32-14)^(oe>>>18|c<<32-18)^(c>>>41-32|oe<<32-(41-32)),w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,l=c&W^~c&ie,g=oe&le^~oe&ge,w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,l=In[I*2],g=In[I*2+1],w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,l=a[I%16],g=d[I%16],w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,b+=w>>>16,p+=b>>>16,T+=p>>>16,B=p&65535|T<<16,N=w&65535|b<<16,l=B,g=N,w=g&65535,b=g>>>16,p=l&65535,T=l>>>16,l=(R>>>28|J<<32-28)^(J>>>34-32|R<<32-(34-32))^(J>>>39-32|R<<32-(39-32)),g=(J>>>28|R<<32-28)^(R>>>34-32|J<<32-(34-32))^(R>>>39-32|J<<32-(39-32)),w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,l=R&z^R&Z^z&Z,g=J&te^J&re^te&re,w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,b+=w>>>16,p+=b>>>16,T+=p>>>16,q=p&65535|T<<16,O=w&65535|b<<16,l=H,g=V,w=g&65535,b=g>>>16,p=l&65535,T=l>>>16,l=B,g=N,w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,b+=w>>>16,p+=b>>>16,T+=p>>>16,H=p&65535|T<<16,V=w&65535|b<<16,z=h,Z=y,K=S,c=H,W=E,ie=ne,fe=A,R=q,te=$,re=Y,pe=G,oe=V,le=D,ge=F,be=M,J=O,I%16===15)for(m=0;m<16;m++)l=a[m],g=d[m],w=g&65535,b=g>>>16,p=l&65535,T=l>>>16,l=a[(m+9)%16],g=d[(m+9)%16],w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,B=a[(m+1)%16],N=d[(m+1)%16],l=(B>>>1|N<<32-1)^(B>>>8|N<<32-8)^B>>>7,g=(N>>>1|B<<32-1)^(N>>>8|B<<32-8)^(N>>>7|B<<32-7),w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,B=a[(m+14)%16],N=d[(m+14)%16],l=(B>>>19|N<<32-19)^(N>>>61-32|B<<32-(61-32))^B>>>6,g=(N>>>19|B<<32-19)^(B>>>61-32|N<<32-(61-32))^(N>>>6|B<<32-6),w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,b+=w>>>16,p+=b>>>16,T+=p>>>16,a[m]=p&65535|T<<16,d[m]=w&65535|b<<16;l=R,g=J,w=g&65535,b=g>>>16,p=l&65535,T=l>>>16,l=n[0],g=o[0],w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,b+=w>>>16,p+=b>>>16,T+=p>>>16,n[0]=R=p&65535|T<<16,o[0]=J=w&65535|b<<16,l=z,g=te,w=g&65535,b=g>>>16,p=l&65535,T=l>>>16,l=n[1],g=o[1],w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,b+=w>>>16,p+=b>>>16,T+=p>>>16,n[1]=z=p&65535|T<<16,o[1]=te=w&65535|b<<16,l=Z,g=re,w=g&65535,b=g>>>16,p=l&65535,T=l>>>16,l=n[2],g=o[2],w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,b+=w>>>16,p+=b>>>16,T+=p>>>16,n[2]=Z=p&65535|T<<16,o[2]=re=w&65535|b<<16,l=K,g=pe,w=g&65535,b=g>>>16,p=l&65535,T=l>>>16,l=n[3],g=o[3],w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,b+=w>>>16,p+=b>>>16,T+=p>>>16,n[3]=K=p&65535|T<<16,o[3]=pe=w&65535|b<<16,l=c,g=oe,w=g&65535,b=g>>>16,p=l&65535,T=l>>>16,l=n[4],g=o[4],w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,b+=w>>>16,p+=b>>>16,T+=p>>>16,n[4]=c=p&65535|T<<16,o[4]=oe=w&65535|b<<16,l=W,g=le,w=g&65535,b=g>>>16,p=l&65535,T=l>>>16,l=n[5],g=o[5],w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,b+=w>>>16,p+=b>>>16,T+=p>>>16,n[5]=W=p&65535|T<<16,o[5]=le=w&65535|b<<16,l=ie,g=ge,w=g&65535,b=g>>>16,p=l&65535,T=l>>>16,l=n[6],g=o[6],w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,b+=w>>>16,p+=b>>>16,T+=p>>>16,n[6]=ie=p&65535|T<<16,o[6]=ge=w&65535|b<<16,l=fe,g=be,w=g&65535,b=g>>>16,p=l&65535,T=l>>>16,l=n[7],g=o[7],w+=g&65535,b+=g>>>16,p+=l&65535,T+=l>>>16,b+=w>>>16,p+=b>>>16,T+=p>>>16,n[7]=fe=p&65535|T<<16,o[7]=be=w&65535|b<<16,we+=128,e-=128}return e}function xt(n,o,f){var e=new Int32Array(8),a=new Int32Array(8),d=new Uint8Array(256),h,y=f;for(e[0]=1779033703,e[1]=3144134277,e[2]=1013904242,e[3]=2773480762,e[4]=1359893119,e[5]=2600822924,e[6]=528734635,e[7]=1541459225,a[0]=4089235720,a[1]=2227873595,a[2]=4271175723,a[3]=1595750129,a[4]=2917565137,a[5]=725511199,a[6]=4215389547,a[7]=327033209,Hn(e,a,o,f),f%=128,h=0;h<f;h++)d[h]=o[y-f+h];for(d[f]=128,f=256-128*(f<112?1:0),d[f-9]=0,Ce(d,f-8,y/536870912|0,y<<3),Hn(e,a,d,f),h=0;h<8;h++)Ce(n,8*h,e[h],a[h]);return 0}function Wt(n,o){var f=r(),e=r(),a=r(),d=r(),h=r(),y=r(),S=r(),H=r(),E=r();Xe(f,n[1],n[0]),Xe(E,o[1],o[0]),ee(f,f,E),Ke(e,n[0],n[1]),Ke(E,o[0],o[1]),ee(e,e,E),ee(a,n[3],o[3]),ee(a,a,X),ee(d,n[2],o[2]),Ke(d,d,d),Xe(h,e,f),Xe(y,d,a),Ke(S,d,a),Ke(H,e,f),ee(n[0],h,y),ee(n[1],H,S),ee(n[2],S,y),ee(n[3],h,H)}function Un(n,o,f){var e;for(e=0;e<4;e++)Tt(n[e],o[e],f)}function Br(n,o){var f=r(),e=r(),a=r();Bn(a,o[2]),ee(f,o[0],a),ee(e,o[1],a),St(n,e),n[31]^=Pn(f)<<7}function Ar(n,o,f){var e,a;for(rt(n[0],x),rt(n[1],_),rt(n[2],_),rt(n[3],x),a=255;a>=0;--a)e=f[a/8|0]>>(a&7)&1,Un(n,o,e),Wt(o,n),Wt(n,n),Un(n,o,e)}function Qt(n,o){var f=[r(),r(),r(),r()];rt(f[0],Q),rt(f[1],ye),rt(f[2],_),ee(f[3],Q,ye),Ar(n,f,o)}function Mr(n,o,f){var e=new Uint8Array(64),a=[r(),r(),r(),r()],d;for(f||i(o,32),xt(e,o,32),e[0]&=248,e[31]&=127,e[31]|=64,Qt(a,e),Br(n,a),d=0;d<32;d++)o[d+32]=n[d];return 0}var kt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Nr(n,o){var f,e,a,d;for(e=63;e>=32;--e){for(f=0,a=e-32,d=e-12;a<d;++a)o[a]+=f-16*o[e]*kt[a-(e-32)],f=Math.floor((o[a]+128)/256),o[a]-=f*256;o[a]+=f,o[e]=0}for(f=0,a=0;a<32;a++)o[a]+=f-(o[31]>>4)*kt[a],f=o[a]>>8,o[a]&=255;for(a=0;a<32;a++)o[a]-=f*kt[a];for(e=0;e<32;e++)o[e+1]+=o[e]>>8,n[e]=o[e]&255}function Ir(n){var o=new Float64Array(64),f;for(f=0;f<64;f++)o[f]=n[f];for(f=0;f<64;f++)n[f]=0;Nr(n,o)}function Ln(n,o,f,e){var a=new Uint8Array(64),d=new Uint8Array(64),h=new Uint8Array(64),y,S,H=new Float64Array(64),E=[r(),r(),r(),r()];xt(a,e,32),a[0]&=248,a[31]&=127,a[31]|=64;var ne=f+64;for(y=0;y<f;y++)n[64+y]=o[y];for(y=0;y<32;y++)n[32+y]=a[32+y];for(xt(h,n.subarray(32),f+32),Ir(h),Qt(E,h),Br(n,E),y=32;y<64;y++)n[y]=e[y];for(xt(d,n,f+64),Ir(d),y=0;y<64;y++)H[y]=0;for(y=0;y<32;y++)H[y]=h[y];for(y=0;y<32;y++)for(S=0;S<32;S++)H[y+S]+=d[y]*a[S];return Nr(n.subarray(32),H),ne}function Xi(n,o){var f=r(),e=r(),a=r(),d=r(),h=r(),y=r(),S=r();return rt(n[2],_),Pr(n[1],o),De(a,n[1]),ee(d,a,j),Xe(a,a,n[2]),Ke(d,n[2],d),De(h,d),De(y,h),ee(S,y,h),ee(f,S,a),ee(f,f,d),An(f,f),ee(f,f,a),ee(f,f,d),ee(f,f,d),ee(n[0],f,d),De(e,n[0]),ee(e,e,d),En(e,a)&&ee(n[0],n[0],Ue),De(e,n[0]),ee(e,e,d),En(e,a)?-1:(Pn(n[0])===o[31]>>7&&Xe(n[0],x,n[0]),ee(n[3],n[0],n[1]),0)}function Hr(n,o,f,e){var a,d=new Uint8Array(32),h=new Uint8Array(64),y=[r(),r(),r(),r()],S=[r(),r(),r(),r()];if(f<64||Xi(S,e))return-1;for(a=0;a<f;a++)n[a]=o[a];for(a=0;a<32;a++)n[a+32]=e[a];if(xt(h,n,f),Ir(h),Ar(y,S,h),Qt(S,o.subarray(32)),Wt(y,S),Br(d,y),f-=64,wr(o,0,d,0)){for(a=0;a<f;a++)n[a]=0;return-1}for(a=0;a<f;a++)n[a]=o[a+64];return f}var Ur=32,er=24,Lt=32,mt=16,Ot=32,tr=32,jt=32,Rt=32,Lr=32,On=er,Zi=Lt,Ji=mt,nt=64,lt=32,Et=64,Or=32,jr=64;t.lowlevel={crypto_core_hsalsa20:zt,crypto_stream_xor:vr,crypto_stream:Sn,crypto_stream_salsa20_xor:vn,crypto_stream_salsa20:Tn,crypto_onetimeauth:Tr,crypto_onetimeauth_verify:mn,crypto_verify_16:wn,crypto_verify_32:wr,crypto_secretbox:Sr,crypto_secretbox_open:mr,crypto_scalarmult:Xt,crypto_scalarmult_base:Zt,crypto_box_beforenm:Jt,crypto_box_afternm:Nn,crypto_box:zi,crypto_box_open:Ki,crypto_box_keypair:Mn,crypto_hash:xt,crypto_sign:Ln,crypto_sign_keypair:Mr,crypto_sign_open:Hr,crypto_secretbox_KEYBYTES:Ur,crypto_secretbox_NONCEBYTES:er,crypto_secretbox_ZEROBYTES:Lt,crypto_secretbox_BOXZEROBYTES:mt,crypto_scalarmult_BYTES:Ot,crypto_scalarmult_SCALARBYTES:tr,crypto_box_PUBLICKEYBYTES:jt,crypto_box_SECRETKEYBYTES:Rt,crypto_box_BEFORENMBYTES:Lr,crypto_box_NONCEBYTES:On,crypto_box_ZEROBYTES:Zi,crypto_box_BOXZEROBYTES:Ji,crypto_sign_BYTES:nt,crypto_sign_PUBLICKEYBYTES:lt,crypto_sign_SECRETKEYBYTES:Et,crypto_sign_SEEDBYTES:Or,crypto_hash_BYTES:jr,gf:r,D:j,L:kt,pack25519:St,unpack25519:Pr,M:ee,A:Ke,S:De,Z:Xe,pow2523:An,add:Wt,set25519:rt,modL:Nr,scalarmult:Ar,scalarbase:Qt};function jn(n,o){if(n.length!==Ur)throw new Error("bad key size");if(o.length!==er)throw new Error("bad nonce size")}function Wi(n,o){if(n.length!==jt)throw new Error("bad public key size");if(o.length!==Rt)throw new Error("bad secret key size")}function Re(){for(var n=0;n<arguments.length;n++)if(!(arguments[n]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Rn(n){for(var o=0;o<n.length;o++)n[o]=0}t.randomBytes=function(n){var o=new Uint8Array(n);return i(o,n),o},t.secretbox=function(n,o,f){Re(n,o,f),jn(f,o);for(var e=new Uint8Array(Lt+n.length),a=new Uint8Array(e.length),d=0;d<n.length;d++)e[d+Lt]=n[d];return Sr(a,e,e.length,o,f),a.subarray(mt)},t.secretbox.open=function(n,o,f){Re(n,o,f),jn(f,o);for(var e=new Uint8Array(mt+n.length),a=new Uint8Array(e.length),d=0;d<n.length;d++)e[d+mt]=n[d];return e.length<32||mr(a,e,e.length,o,f)!==0?null:a.subarray(Lt)},t.secretbox.keyLength=Ur,t.secretbox.nonceLength=er,t.secretbox.overheadLength=mt,t.scalarMult=function(n,o){if(Re(n,o),n.length!==tr)throw new Error("bad n size");if(o.length!==Ot)throw new Error("bad p size");var f=new Uint8Array(Ot);return Xt(f,n,o),f},t.scalarMult.base=function(n){if(Re(n),n.length!==tr)throw new Error("bad n size");var o=new Uint8Array(Ot);return Zt(o,n),o},t.scalarMult.scalarLength=tr,t.scalarMult.groupElementLength=Ot,t.box=function(n,o,f,e){var a=t.box.before(f,e);return t.secretbox(n,o,a)},t.box.before=function(n,o){Re(n,o),Wi(n,o);var f=new Uint8Array(Lr);return Jt(f,n,o),f},t.box.after=t.secretbox,t.box.open=function(n,o,f,e){var a=t.box.before(f,e);return t.secretbox.open(n,o,a)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var n=new Uint8Array(jt),o=new Uint8Array(Rt);return Mn(n,o),{publicKey:n,secretKey:o}},t.box.keyPair.fromSecretKey=function(n){if(Re(n),n.length!==Rt)throw new Error("bad secret key size");var o=new Uint8Array(jt);return Zt(o,n),{publicKey:o,secretKey:new Uint8Array(n)}},t.box.publicKeyLength=jt,t.box.secretKeyLength=Rt,t.box.sharedKeyLength=Lr,t.box.nonceLength=On,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(n,o){if(Re(n,o),o.length!==Et)throw new Error("bad secret key size");var f=new Uint8Array(nt+n.length);return Ln(f,n,n.length,o),f},t.sign.open=function(n,o){if(Re(n,o),o.length!==lt)throw new Error("bad public key size");var f=new Uint8Array(n.length),e=Hr(f,n,n.length,o);if(e<0)return null;for(var a=new Uint8Array(e),d=0;d<a.length;d++)a[d]=f[d];return a},t.sign.detached=function(n,o){for(var f=t.sign(n,o),e=new Uint8Array(nt),a=0;a<e.length;a++)e[a]=f[a];return e},t.sign.detached.verify=function(n,o,f){if(Re(n,o,f),o.length!==nt)throw new Error("bad signature size");if(f.length!==lt)throw new Error("bad public key size");var e=new Uint8Array(nt+n.length),a=new Uint8Array(nt+n.length),d;for(d=0;d<nt;d++)e[d]=o[d];for(d=0;d<n.length;d++)e[d+nt]=n[d];return Hr(a,e,e.length,f)>=0},t.sign.keyPair=function(){var n=new Uint8Array(lt),o=new Uint8Array(Et);return Mr(n,o),{publicKey:n,secretKey:o}},t.sign.keyPair.fromSecretKey=function(n){if(Re(n),n.length!==Et)throw new Error("bad secret key size");for(var o=new Uint8Array(lt),f=0;f<o.length;f++)o[f]=n[32+f];return{publicKey:o,secretKey:new Uint8Array(n)}},t.sign.keyPair.fromSeed=function(n){if(Re(n),n.length!==Or)throw new Error("bad seed size");for(var o=new Uint8Array(lt),f=new Uint8Array(Et),e=0;e<32;e++)f[e]=n[e];return Mr(o,f,!0),{publicKey:o,secretKey:f}},t.sign.publicKeyLength=lt,t.sign.secretKeyLength=Et,t.sign.seedLength=Or,t.sign.signatureLength=nt,t.hash=function(n){Re(n);var o=new Uint8Array(jr);return xt(o,n,n.length),o},t.hash.hashLength=jr,t.verify=function(n,o){return Re(n,o),n.length===0||o.length===0||n.length!==o.length?!1:vt(n,0,o,0,n.length)===0},t.setPRNG=function(n){i=n},function(){var n=typeof self<"u"?self.crypto||self.msCrypto:null;if(n&&n.getRandomValues){var o=65536;t.setPRNG(function(f,e){var a,d=new Uint8Array(e);for(a=0;a<e;a+=o)n.getRandomValues(d.subarray(a,a+Math.min(e-a,o)));for(a=0;a<e;a++)f[a]=d[a];Rn(d)})}else typeof qn<"u"&&(n=Qi(),n&&n.randomBytes&&t.setPRNG(function(f,e){var a,d=n.randomBytes(e);for(a=0;a<e;a++)f[a]=d[a];Rn(d)}))}()})(typeof xr<"u"&&xr.exports?xr.exports:self.nacl=self.nacl||{})});var gi=ae((li,lr)=>{"use strict";U();L();(function(t,r){"use strict";typeof lr<"u"&&lr.exports?lr.exports=r():(t.nacl||(t.nacl={}),t.nacl.util=r())})(li,function(){"use strict";var t={};function r(i){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(i))throw new TypeError("invalid encoding")}return t.decodeUTF8=function(i){if(typeof i!="string")throw new TypeError("expected string");var s,u=unescape(encodeURIComponent(i)),x=new Uint8Array(u.length);for(s=0;s<u.length;s++)x[s]=u.charCodeAt(s);return x},t.encodeUTF8=function(i){var s,u=[];for(s=0;s<i.length;s++)u.push(String.fromCharCode(i[s]));return decodeURIComponent(escape(u.join("")))},typeof atob>"u"?typeof v.Buffer.from<"u"?(t.encodeBase64=function(i){return v.Buffer.from(i).toString("base64")},t.decodeBase64=function(i){return r(i),new Uint8Array(Array.prototype.slice.call(v.Buffer.from(i,"base64"),0))}):(t.encodeBase64=function(i){return new v.Buffer(i).toString("base64")},t.decodeBase64=function(i){return r(i),new Uint8Array(Array.prototype.slice.call(new v.Buffer(i,"base64"),0))}):(t.encodeBase64=function(i){var s,u=[],x=i.length;for(s=0;s<x;s++)u.push(String.fromCharCode(i[s]));return btoa(u.join(""))},t.decodeBase64=function(i){r(i);var s,u=atob(i),x=new Uint8Array(u.length);for(s=0;s<u.length;s++)x[s]=u.charCodeAt(s);return x}),t})});var _i=ae(ze=>{"use strict";U();L();Object.defineProperty(ze,"__esModule",{value:!0});ze.getEncryptionPublicKey=ze.decryptSafely=ze.decrypt=ze.encryptSafely=ze.encrypt=void 0;var bt=xi(),Je=gi(),Qe=gt();function bi({publicKey:t,data:r,version:i}){if((0,Qe.isNullish)(t))throw new Error("Missing publicKey parameter");if((0,Qe.isNullish)(r))throw new Error("Missing data parameter");if((0,Qe.isNullish)(i))throw new Error("Missing version parameter");switch(i){case"x25519-xsalsa20-poly1305":{let s=bt.box.keyPair(),u;try{u=Je.decodeBase64(t)}catch{throw new Error("Bad public key")}let x=Je.decodeUTF8(r),_=bt.randomBytes(bt.box.nonceLength),P=bt.box(x,_,u,s.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:Je.encodeBase64(_),ephemPublicKey:Je.encodeBase64(s.publicKey),ciphertext:Je.encodeBase64(P)}}default:throw new Error("Encryption type/version not supported")}}ze.encrypt=bi;function gs({publicKey:t,data:r,version:i}){if((0,Qe.isNullish)(t))throw new Error("Missing publicKey parameter");if((0,Qe.isNullish)(r))throw new Error("Missing data parameter");if((0,Qe.isNullish)(i))throw new Error("Missing version parameter");let s=2**11,u=16;if(typeof r=="object"&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let x={data:r,padding:""},P=v.Buffer.byteLength(JSON.stringify(x),"utf-8")%s,j=0;P>0&&(j=s-P-u),x.padding="0".repeat(j);let X=JSON.stringify(x);return bi({publicKey:t,data:X,version:i})}ze.encryptSafely=gs;function yi({encryptedData:t,privateKey:r}){if((0,Qe.isNullish)(t))throw new Error("Missing encryptedData parameter");if((0,Qe.isNullish)(r))throw new Error("Missing privateKey parameter");switch(t.version){case"x25519-xsalsa20-poly1305":{let i=pi(r),s=bt.box.keyPair.fromSecretKey(i).secretKey,u=Je.decodeBase64(t.nonce),x=Je.decodeBase64(t.ciphertext),_=Je.decodeBase64(t.ephemPublicKey),P=bt.box.open(x,u,_,s),j;try{j=Je.encodeUTF8(P)}catch{throw new Error("Decryption failed.")}if(j)return j;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}ze.decrypt=yi;function bs({encryptedData:t,privateKey:r}){if((0,Qe.isNullish)(t))throw new Error("Missing encryptedData parameter");if((0,Qe.isNullish)(r))throw new Error("Missing privateKey parameter");return JSON.parse(yi({encryptedData:t,privateKey:r})).data}ze.decryptSafely=bs;function ys(t){let r=pi(t),i=bt.box.keyPair.fromSecretKey(r).publicKey;return Je.encodeBase64(i)}ze.getEncryptionPublicKey=ys;function pi(t){let r=v.Buffer.from(t,"hex").toString("base64");return Je.decodeBase64(r)}});var gt=ae(Le=>{"use strict";U();L();var ps=Le&&Le.__createBinding||(Object.create?function(t,r,i,s){s===void 0&&(s=i);var u=Object.getOwnPropertyDescriptor(r,i);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(t,s,u)}:function(t,r,i,s){s===void 0&&(s=i),t[s]=r[i]}),vi=Le&&Le.__exportStar||function(t,r){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(r,i)&&ps(r,t,i)};Object.defineProperty(Le,"__esModule",{value:!0});Le.isNullish=Le.legacyToBuffer=Le.padWithZeroes=void 0;vi(hi(),Le);vi(_i(),Le);var wi=Ze();function _s(t,r){if(t!==""&&!/^[a-f0-9]+$/iu.test(t))throw new Error(`Expected an unprefixed hex string. Received: ${t}`);if(r<0)throw new Error(`Expected a non-negative integer target length. Received: ${r}`);return String.prototype.padStart.call(t,r,"0")}Le.padWithZeroes=_s;function ws(t){return typeof t=="string"&&!(0,wi.isHexString)(t)?v.Buffer.from(t):(0,wi.toBuffer)(t)}Le.legacyToBuffer=ws;function vs(t){return t==null}Le.isNullish=vs});var Ei=ae(Oe=>{"use strict";U();L();Object.defineProperty(Oe,"__esModule",{value:!0});Oe.recoverFromSignature=Oe.ecdsaSign=Oe.makeSignature=Oe.calculateSigRecovery=Oe.isValidSigRecovery=Oe.hashPersonalMessage=void 0;var Ts=nr(),Ss=qt(),Ct=Se(),gr=fr(),Dt=Rr(),yt=$t(),Ti=gt(),ms=Bt(),Es=function(t){(0,Ss.assertIsBuffer)(t);let r=Dt.Buffer.from(`Ethereum Signed Message:
${t.length.toString()}`,"utf-8");return(0,Ts.keccak)(Dt.Buffer.concat([r,t]))};Oe.hashPersonalMessage=Es;function Si(t){let r=new Ct.BN(t);return r.eqn(0)||r.eqn(1)}Oe.isValidSigRecovery=Si;function mi(t,r){let i=(0,gr.toType)(t,gr.TypeOutput.BN);if(!r)return i.subn(27);let s=(0,gr.toType)(r,gr.TypeOutput.BN);return i.sub(s.muln(2).addn(35))}Oe.calculateSigRecovery=mi;function Ps(t,r,i){let s=(0,yt.fromSigned)(r),u=(0,yt.fromSigned)(i),x=t,_=(0,Ti.padWithZeroes)((0,yt.toUnsigned)(s).toString("hex"),64),P=(0,Ti.padWithZeroes)((0,yt.toUnsigned)(u).toString("hex"),64),j=Ct.base.stripHexPrefix((0,ms.intToHex)(x));return(0,yt.addHexPrefix)(_.concat(P,j))}Oe.makeSignature=Ps;function Bs(t,r,i){let{signature:s,recovery:u}=Ct.signUtil.secp256k1.sign(t,r),x=Dt.Buffer.from(s.slice(0,32)),_=Dt.Buffer.from(s.slice(32,64));if(i&&!Number.isSafeInteger(i))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{v:i?u+(i*2+35):u+27,r:x,s:_}}Oe.ecdsaSign=Bs;function As(t,r,i,s,u){let x=Dt.Buffer.concat([(0,yt.setLengthLeft)(i,32),(0,yt.setLengthLeft)(s,32)],64),_=mi(r,u);if(!Si(_))throw new Error("Invalid signature v value");let P=Ct.signUtil.secp256k1.recover(x,_.toNumber(),t,!1);if(P==null)throw new Error("ecdsaRecover error");let j=Ct.signUtil.secp256k1.publicKeyConvert(P,!1);if(j==null)throw new Error("publicKeyConvert error");return j.slice(1)}Oe.recoverFromSignature=As});var Ze=ae(_e=>{"use strict";U();L();var Pi=_e&&_e.__createBinding||(Object.create?function(t,r,i,s){s===void 0&&(s=i);var u=Object.getOwnPropertyDescriptor(r,i);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(t,s,u)}:function(t,r,i,s){s===void 0&&(s=i),t[s]=r[i]}),Ms=_e&&_e.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),ct=_e&&_e.__exportStar||function(t,r){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(r,i)&&Pi(r,t,i)},Ns=_e&&_e.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i in t)i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)&&Pi(r,t,i);return Ms(r,t),r};Object.defineProperty(_e,"__esModule",{value:!0});_e.rlp=void 0;ct(Fn(),_e);ct(Zr(),_e);ct(Wn(),_e);ct(nr(),_e);ct(Ei(),_e);ct($t(),_e);ct(fr(),_e);_e.rlp=Ns(Dr());ct(Bt(),_e)});var br=ae(_t=>{"use strict";U();L();Object.defineProperty(_t,"__esModule",{value:!0});_t.BaseTransaction=_t.Chain=void 0;var Me=Ze(),pt=Se(),Bi;(function(t){t[t.Mainnet=1]="Mainnet",t[t.Ropsten=3]="Ropsten",t[t.Rinkeby=4]="Rinkeby",t[t.Kovan=42]="Kovan",t[t.Goerli=5]="Goerli",t[t.Sepolia=11155111]="Sepolia"})(Bi=_t.Chain||(_t.Chain={}));var en=class{constructor(r){this.activeCapabilities=[],this.DEFAULT_CHAIN=Bi.Mainnet;let{nonce:i,gasLimit:s,to:u,value:x,data:_,v:P,r:j,s:X,type:Q}=r;this._type=new pt.BN((0,Me.toBuffer)(Q)).toNumber();let ye=(0,Me.toBuffer)(u===""?"0x":u),Ue=(0,Me.toBuffer)(P===""?"0x":P),Ce=(0,Me.toBuffer)(j===""?"0x":j),vt=(0,Me.toBuffer)(X===""?"0x":X);this.nonce=new pt.BN((0,Me.toBuffer)(i===""?"0x":i)),this.gasLimit=new pt.BN((0,Me.toBuffer)(s===""?"0x":s)),this.to=ye.length>0?new Me.Address(ye):void 0,this.value=new pt.BN((0,Me.toBuffer)(x===""?"0x":x)),this.data=(0,Me.toBuffer)(_===""?"0x":_),this.v=Ue.length>0?new pt.BN(Ue):void 0,this.r=Ce.length>0?new pt.BN(Ce):void 0,this.s=vt.length>0?new pt.BN(vt):void 0,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0)}get transactionType(){return this.type}get type(){return this._type}isSigned(){let{v:r,r:i,s}=this;return this.type===0?!(!r||!i||!s):!(r===void 0||!i||!s)}sign(r){if(r.length!==32){let _=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(_)}let i=this.getMessageToSign(!0),{v:s,r:u,s:x}=(0,Me.ecdsaSign)(i,r);return this._processSignature(s,u,x)}_validateCannotExceedMaxInteger(r,i=256,s=!1){for(let[u,x]of Object.entries(r))switch(i){case 64:if(s){if(x!=null&&x.gte(Me.MAX_UINT64)){let _=this._errorMsg(`${u} cannot equal or exceed MAX_UINT64 (2^64-1), given ${x}`);throw new Error(_)}}else if(x!=null&&x.gt(Me.MAX_UINT64)){let _=this._errorMsg(`${u} cannot exceed MAX_UINT64 (2^64-1), given ${x}`);throw new Error(_)}break;case 256:if(s){if(x!=null&&x.gte(Me.MAX_INTEGER)){let _=this._errorMsg(`${u} cannot equal or exceed MAX_INTEGER (2^256-1), given ${x}`);throw new Error(_)}}else if(x!=null&&x.gt(Me.MAX_INTEGER)){let _=this._errorMsg(`${u} cannot exceed MAX_INTEGER (2^256-1), given ${x}`);throw new Error(_)}break;default:{let _=this._errorMsg("unimplemented bits value");throw new Error(_)}}}_getSharedErrorPostfix(){let r="";try{r=this.isSigned()?(0,Me.bufferToHex)(this.hash()):"not available (unsigned)"}catch{r="error"}let i="";try{i=this.isSigned().toString()}catch{r="error"}let s=`tx type=${this.type} hash=${r} nonce=${this.nonce} value=${this.value} `;return s+=`signed=${i}`,s}processSignature(r,i,s){return this._processSignature(r,i,s)}processSignatureWithRawV(r,i,s){return this._processSignatureWithRawV(r,i,s)}};_t.BaseTransaction=en});var Ai=ae(tn=>{"use strict";U();L();Object.defineProperty(tn,"__esModule",{value:!0});var se=Ze(),Is=br(),ut=Se(),Hs=0,dt=class extends Is.BaseTransaction{static fromTxData(r){return new dt(r)}static fromSerializedTx(r,i){let s=se.rlp.decode(r);if(!Array.isArray(s))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(s,i)}static fromValuesArray(r,i){if(r.length!==6&&r.length!==9)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");let[s,u,x,_,P,j,X,Q,ye]=r;return(0,se.validateNoLeadingZeroes)({nonce:s,gasPrice:u,gasLimit:x,value:P,v:X,r:Q,s:ye}),new dt({nonce:s,gasPrice:u,gasLimit:x,to:_,value:P,data:j,v:X,r:Q,s:ye,chainId:i})}constructor(r){if(super({...r,type:Hs}),this.gasPrice=new ut.BN((0,se.toBuffer)(r.gasPrice===""?"0x":r.gasPrice)),this.chainId=new ut.BN((0,se.toBuffer)(r.chainId===""?"0x":r.chainId)),this.gasPrice.mul(this.gasLimit).gt(se.MAX_INTEGER)){let i=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(i)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice})}raw(){return[(0,se.bnToUnpaddedBuffer)(this.nonce),(0,se.bnToUnpaddedBuffer)(this.gasPrice),(0,se.bnToUnpaddedBuffer)(this.gasLimit),this.to!==void 0?this.to.buf:v.Buffer.from([]),(0,se.bnToUnpaddedBuffer)(this.value),this.data,this.v!==void 0?(0,se.bnToUnpaddedBuffer)(this.v):v.Buffer.from([]),this.r!==void 0?(0,se.bnToUnpaddedBuffer)(this.r):v.Buffer.from([]),this.s!==void 0?(0,se.bnToUnpaddedBuffer)(this.s):v.Buffer.from([])]}serialize(){return se.rlp.encode(this.raw())}_getMessageToSign(){return[(0,se.bnToUnpaddedBuffer)(this.nonce),(0,se.bnToUnpaddedBuffer)(this.gasPrice),(0,se.bnToUnpaddedBuffer)(this.gasLimit),this.to!==void 0?this.to.buf:v.Buffer.from([]),(0,se.bnToUnpaddedBuffer)(this.value),this.data,(0,se.toBuffer)(this.chainId),(0,se.unpadBuffer)((0,se.toBuffer)(0)),(0,se.unpadBuffer)((0,se.toBuffer)(0))]}getMessageToSign(r=!0){let i=this._getMessageToSign();return r?(0,se.rlphash)(i):i}hash(){return(0,se.rlphash)(this.raw())}_processSignature(r,i,s){let u=new ut.BN(2*this.chainId.toNumber()+r+8);return dt.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,chainId:this.chainId,v:u,r:new ut.BN(i),s:new ut.BN(s)})}_processSignatureWithRawV(r,i,s){return dt.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,chainId:this.chainId,v:new ut.BN(r),r:new ut.BN(i),s:new ut.BN(s)})}toJSON(){return{nonce:(0,se.bnToHex)(this.nonce),gasPrice:(0,se.bnToHex)(this.gasPrice),gasLimit:(0,se.bnToHex)(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:(0,se.bnToHex)(this.value),data:"0x"+this.data.toString("hex"),v:this.v!==void 0?(0,se.bnToHex)(this.v):void 0,r:this.r!==void 0?(0,se.bnToHex)(this.r):void 0,s:this.s!==void 0?(0,se.bnToHex)(this.s):void 0}}errorStr(){let r=this._getSharedErrorPostfix();return r+=` gasPrice=${this.gasPrice}`,r}_errorMsg(r){return`${r} (${this.errorStr()})`}};tn.default=dt});var rn=ae(Mt=>{"use strict";U();L();Object.defineProperty(Mt,"__esModule",{value:!0});Mt.isAccessList=Mt.isAccessListBuffer=void 0;function Mi(t){if(t.length===0)return!0;let r=t[0];return!!Array.isArray(r)}Mt.isAccessListBuffer=Mi;function Us(t){return!Mi(t)}Mt.isAccessList=Us});var fn=ae(yr=>{"use strict";U();L();Object.defineProperty(yr,"__esModule",{value:!0});yr.AccessLists=void 0;var Nt=Ze(),Ls=rn(),nn=class{static getAccessListData(r){let i,s;if(r&&(0,Ls.isAccessList)(r)){i=r;let u=[];for(let x=0;x<r.length;x++){let _=r[x],P=(0,Nt.toBuffer)(_.address),j=[];for(let X=0;X<_.storageKeys.length;X++)j.push((0,Nt.toBuffer)(_.storageKeys[X]));u.push([P,j])}s=u}else{s=r!=null?r:[];let u=[];for(let x=0;x<s.length;x++){let _=s[x],P=(0,Nt.bufferToHex)(_[0]),j=[];for(let Q=0;Q<_[1].length;Q++)j.push((0,Nt.bufferToHex)(_[1][Q]));let X={address:P,storageKeys:j};u.push(X)}i=u}return{AccessListJSON:i,accessList:s}}static verifyAccessList(r){for(let i=0;i<r.length;i++){let s=r[i],u=s[0],x=s[1];if(s[2]!==void 0)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(u.length!=20)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let _=0;_<x.length;_++)if(x[_].length!=32)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}}static getAccessListJSON(r){let i=[];for(let s=0;s<r.length;s++){let u=r[s],x={address:"0x"+(0,Nt.setLengthLeft)(u[0],20).toString("hex"),storageKeys:[]},_=u[1];for(let P=0;P<_.length;P++){let j=_[P];x.storageKeys.push("0x"+(0,Nt.setLengthLeft)(j,32).toString("hex"))}i.push(x)}return i}};yr.AccessLists=nn});var Ni=ae(cn=>{"use strict";U();L();Object.defineProperty(cn,"__esModule",{value:!0});var de=Ze(),ft=Se(),Os=br(),sn=fn(),an=1,on=v.Buffer.from(an.toString(16).padStart(2,"0"),"hex"),st=class extends Os.BaseTransaction{static fromTxData(r){return new st(r)}static fromSerializedTx(r){if(!r.slice(0,1).equals(on))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: ${an}, received: ${r.slice(0,1).toString("hex")}`);let i=de.rlp.decode(r.slice(1));if(!Array.isArray(i))throw new Error("Invalid serialized tx input: must be array");return st.fromValuesArray(i)}static fromValuesArray(r){if(r.length!==8&&r.length!==11)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");let[i,s,u,x,_,P,j,X,Q,ye,Ue]=r;(0,de.validateNoLeadingZeroes)({nonce:s,gasPrice:u,gasLimit:x,value:P,v:Q,r:ye,s:Ue});let Ce=[];return new st({chainId:new ft.BN(i),nonce:s,gasPrice:u,gasLimit:x,to:_,value:P,data:j,accessList:X!=null?X:Ce,v:Q!==void 0?new ft.BN(Q):void 0,r:ye,s:Ue})}constructor(r){super({...r,type:an});let{chainId:i,accessList:s,gasPrice:u}=r;this.chainId=(0,de.toType)(i,de.TypeOutput.BN),this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);let x=sn.AccessLists.getAccessListData(s!=null?s:[]);if(this.accessList=x.accessList,this.AccessListJSON=x.AccessListJSON,sn.AccessLists.verifyAccessList(this.accessList),this.gasPrice=new ft.BN((0,de.toBuffer)(u===""?"0x":u)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),this.gasPrice.mul(this.gasLimit).gt(de.MAX_INTEGER)){let _=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(_)}if(this.v&&!this.v.eqn(0)&&!this.v.eqn(1)){let _=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(_)}}raw(){return[(0,de.bnToUnpaddedBuffer)(this.chainId),(0,de.bnToUnpaddedBuffer)(this.nonce),(0,de.bnToUnpaddedBuffer)(this.gasPrice),(0,de.bnToUnpaddedBuffer)(this.gasLimit),this.to!==void 0?this.to.buf:v.Buffer.from([]),(0,de.bnToUnpaddedBuffer)(this.value),this.data,this.accessList,this.v!==void 0?(0,de.bnToUnpaddedBuffer)(this.v):v.Buffer.from([]),this.r!==void 0?(0,de.bnToUnpaddedBuffer)(this.r):v.Buffer.from([]),this.s!==void 0?(0,de.bnToUnpaddedBuffer)(this.s):v.Buffer.from([])]}serialize(){let r=this.raw();return v.Buffer.concat([on,de.rlp.encode(r)])}getMessageToSign(r=!0){let i=this.raw().slice(0,8),s=v.Buffer.concat([on,de.rlp.encode(i)]);return r?(0,de.keccak256)(s):s}hash(){if(!this.isSigned()){let r=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(r)}return(0,de.keccak256)(this.serialize())}_processSignature(r,i,s){return st.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:new ft.BN(r-27),r:new ft.BN(i),s:new ft.BN(s)})}_processSignatureWithRawV(r,i,s){return st.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:new ft.BN(r),r:new ft.BN(i),s:new ft.BN(s)})}toJSON(){let r=sn.AccessLists.getAccessListJSON(this.accessList);return{chainId:(0,de.bnToHex)(this.chainId),nonce:(0,de.bnToHex)(this.nonce),gasPrice:(0,de.bnToHex)(this.gasPrice),gasLimit:(0,de.bnToHex)(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:(0,de.bnToHex)(this.value),data:"0x"+this.data.toString("hex"),accessList:r,v:this.v!==void 0?(0,de.bnToHex)(this.v):void 0,r:this.r!==void 0?(0,de.bnToHex)(this.r):void 0,s:this.s!==void 0?(0,de.bnToHex)(this.s):void 0}}errorStr(){var i,s;let r=this._getSharedErrorPostfix();return r+=` gasPrice=${this.gasPrice} accessListCount=${(s=(i=this.accessList)==null?void 0:i.length)!=null?s:0}`,r}_errorMsg(r){return`${r} (${this.errorStr()})`}};cn.default=st});var Ii=ae(dn=>{"use strict";U();L();Object.defineProperty(dn,"__esModule",{value:!0});var js=Ze(),Rs=Se(),wt=hn(),un=class{static fromTxData(r){if(!("type"in r)||r.type===void 0)return wt.Transaction.fromTxData(r);{let i=new Rs.BN((0,js.toBuffer)(r.type)).toNumber();if(i===0)return wt.Transaction.fromTxData(r);if(i===1)return wt.AccessListEIP2930Transaction.fromTxData(r);if(i===2)return wt.FeeMarketEIP1559Transaction.fromTxData(r);throw new Error(`Tx instantiation with type ${i} not supported`)}}static fromSerializedData(r,i){if(r[0]<=127){let s;switch(r[0]){case 1:s=2930;break;case 2:s=1559;break;default:throw new Error(`TypedTransaction with ID ${r[0]} unknown`)}return s===1559?wt.FeeMarketEIP1559Transaction.fromSerializedTx(r):wt.AccessListEIP2930Transaction.fromSerializedTx(r)}else return wt.Transaction.fromSerializedTx(r,i)}};dn.default=un});var Hi=ae(bn=>{"use strict";U();L();Object.defineProperty(bn,"__esModule",{value:!0});var ce=Ze(),ke=Se(),qs=br(),xn=fn(),gn=2,ln=v.Buffer.from(gn.toString(16).padStart(2,"0"),"hex"),ot=class extends qs.BaseTransaction{static fromTxData(r){return new ot(r)}static fromSerializedTx(r){if(!r.slice(0,1).equals(ln))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${gn}, received: ${r.slice(0,1).toString("hex")}`);let i=ce.rlp.decode(r.slice(1));if(!Array.isArray(i))throw new Error("Invalid serialized tx input: must be array");return ot.fromValuesArray(i)}static fromValuesArray(r){if(r.length!==9&&r.length!==12)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");let[i,s,u,x,_,P,j,X,Q,ye,Ue,Ce]=r;return(0,ce.validateNoLeadingZeroes)({nonce:s,maxPriorityFeePerGas:u,maxFeePerGas:x,gasLimit:_,value:j,v:ye,r:Ue,s:Ce}),new ot({chainId:new ke.BN(i),nonce:s,maxPriorityFeePerGas:u,maxFeePerGas:x,gasLimit:_,to:P,value:j,data:X,accessList:Q!=null?Q:[],v:ye!==void 0?new ke.BN(ye):void 0,r:Ue,s:Ce})}constructor(r){super({...r,type:gn});let{chainId:i,accessList:s,maxFeePerGas:u,maxPriorityFeePerGas:x}=r;this.chainId=(0,ce.toType)(i,ce.TypeOutput.BN),this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);let _=xn.AccessLists.getAccessListData(s!=null?s:[]);if(this.accessList=_.accessList,this.AccessListJSON=_.AccessListJSON,xn.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=new ke.BN((0,ce.toBuffer)(u===""?"0x":u)),this.maxPriorityFeePerGas=new ke.BN((0,ce.toBuffer)(x===""?"0x":x)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),this.gasLimit.mul(this.maxFeePerGas).gt(ce.MAX_INTEGER)){let P=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(P)}if(this.maxFeePerGas.lt(this.maxPriorityFeePerGas)){let P=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(P)}if(this.v&&!this.v.eqn(0)&&!this.v.eqn(1)){let P=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(P)}}raw(){return[(0,ce.bnToUnpaddedBuffer)(this.chainId),(0,ce.bnToUnpaddedBuffer)(this.nonce),(0,ce.bnToUnpaddedBuffer)(this.maxPriorityFeePerGas),(0,ce.bnToUnpaddedBuffer)(this.maxFeePerGas),(0,ce.bnToUnpaddedBuffer)(this.gasLimit),this.to!==void 0?this.to.buf:v.Buffer.from([]),(0,ce.bnToUnpaddedBuffer)(this.value),this.data,this.accessList,this.v!==void 0?(0,ce.bnToUnpaddedBuffer)(this.v):v.Buffer.from([]),this.r!==void 0?(0,ce.bnToUnpaddedBuffer)(this.r):v.Buffer.from([]),this.s!==void 0?(0,ce.bnToUnpaddedBuffer)(this.s):v.Buffer.from([])]}serialize(){let r=this.raw();return v.Buffer.concat([ln,ce.rlp.encode(r)])}getMessageToSign(r=!0){let i=this.raw().slice(0,9),s=v.Buffer.concat([ln,ce.rlp.encode(i)]);return r?(0,ce.keccak256)(s):s}hash(){if(!this.isSigned()){let r=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(r)}return(0,ce.keccak256)(this.serialize())}_processSignature(r,i,s){return ot.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:new ke.BN(r-27),r:new ke.BN(i),s:new ke.BN(s)})}_processSignatureWithRawV(r,i,s){return ot.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:new ke.BN(r),r:new ke.BN(i),s:new ke.BN(s)})}toJSON(){let r=xn.AccessLists.getAccessListJSON(this.accessList);return{chainId:(0,ce.bnToHex)(this.chainId),nonce:(0,ce.bnToHex)(this.nonce),maxPriorityFeePerGas:(0,ce.bnToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,ce.bnToHex)(this.maxFeePerGas),gasLimit:(0,ce.bnToHex)(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:(0,ce.bnToHex)(this.value),data:"0x"+this.data.toString("hex"),accessList:r,v:this.v!==void 0?(0,ce.bnToHex)(this.v):void 0,r:this.r!==void 0?(0,ce.bnToHex)(this.r):void 0,s:this.s!==void 0?(0,ce.bnToHex)(this.s):void 0}}errorStr(){let r=this._getSharedErrorPostfix();return r+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,r}_errorMsg(r){return`${r} (${this.errorStr()})`}};bn.default=ot});var hn=ae(me=>{"use strict";U();L();var $s=me&&me.__createBinding||(Object.create?function(t,r,i,s){s===void 0&&(s=i);var u=Object.getOwnPropertyDescriptor(r,i);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(t,s,u)}:function(t,r,i,s){s===void 0&&(s=i),t[s]=r[i]}),Vs=me&&me.__exportStar||function(t,r){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(r,i)&&$s(r,t,i)},pr=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(me,"__esModule",{value:!0});me.FeeMarketEIP1559Transaction=me.TransactionFactory=me.AccessListEIP2930Transaction=me.Transaction=void 0;var Fs=Ai();Object.defineProperty(me,"Transaction",{enumerable:!0,get:function(){return pr(Fs).default}});var Cs=Ni();Object.defineProperty(me,"AccessListEIP2930Transaction",{enumerable:!0,get:function(){return pr(Cs).default}});var Ds=Ii();Object.defineProperty(me,"TransactionFactory",{enumerable:!0,get:function(){return pr(Ds).default}});var Gs=Hi();Object.defineProperty(me,"FeeMarketEIP1559Transaction",{enumerable:!0,get:function(){return pr(Gs).default}});Vs(rn(),me)});var yn=ae(je=>{"use strict";U();L();var Ui=je&&je.__createBinding||(Object.create?function(t,r,i,s){s===void 0&&(s=i);var u=Object.getOwnPropertyDescriptor(r,i);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(t,s,u)}:function(t,r,i,s){s===void 0&&(s=i),t[s]=r[i]}),Ys=je&&je.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),Li=je&&je.__exportStar||function(t,r){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(r,i)&&Ui(r,t,i)},zs=je&&je.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i in t)i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)&&Ui(r,t,i);return Ys(r,t),r};Object.defineProperty(je,"__esModule",{value:!0});je.sigUtil=void 0;Li(Ze(),je);Li(hn(),je);je.sigUtil=zs(gt())});var pn=ae(Ve=>{"use strict";U();L();var Ks=Ve&&Ve.__createBinding||(Object.create?function(t,r,i,s){s===void 0&&(s=i);var u=Object.getOwnPropertyDescriptor(r,i);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(t,s,u)}:function(t,r,i,s){s===void 0&&(s=i),t[s]=r[i]}),Xs=Ve&&Ve.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),ji=Ve&&Ve.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i in t)i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)&&Ks(r,t,i);return Xs(r,t),r};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.hashMessage=Ve.MessageTypes=void 0;var Gt=ji(gt()),It=ji(Ze()),Oi=Se(),Ht;(function(t){t[t.ETH_SIGN=0]="ETH_SIGN",t[t.PERSONAL_SIGN=1]="PERSONAL_SIGN",t[t.TYPE_DATA_V1=2]="TYPE_DATA_V1",t[t.TYPE_DATA_V3=3]="TYPE_DATA_V3",t[t.TYPE_DATA_V4=4]="TYPE_DATA_V4"})(Ht=Ve.MessageTypes||(Ve.MessageTypes={}));var Zs=(t,r)=>{switch(t){case Ht.ETH_SIGN:return It.addHexPrefix(r);case Ht.PERSONAL_SIGN:{let i=Oi.base.isHexString(r)?Oi.base.fromHex(r):v.Buffer.from(r);return It.addHexPrefix(It.hashPersonalMessage(i).toString("hex"))}case Ht.TYPE_DATA_V1:return It.addHexPrefix(Gt.typedSignatureHash(JSON.parse(r)));case Ht.TYPE_DATA_V3:return It.addHexPrefix(Gt.TypedDataUtils.eip712Hash(JSON.parse(r),Gt.SignTypedDataVersion.V3).toString("hex"));case Ht.TYPE_DATA_V4:return It.addHexPrefix(Gt.TypedDataUtils.eip712Hash(JSON.parse(r),Gt.SignTypedDataVersion.V4).toString("hex"));default:throw new Error(`Invalid messageType: ${t}`)}};Ve.hashMessage=Zs});var $i=ae(xe=>{"use strict";U();L();Object.defineProperty(xe,"__esModule",{value:!0});xe.validSignedTransaction=xe.getSignHash=xe.getSignedTransaction=xe.getMPCSignedMessage=xe.getMPCTransaction=xe.verifyMessage=xe.signMPCMessage=xe.signMessage=xe.signTransaction=xe.validAddress=xe.getNewAddress=void 0;var k=Se(),Fe=yn(),at=pn(),Ri=gt(),Ut=ef();function Js(t){let r=k.base.fromHex(t),i=(0,Fe.privateToPublic)(r),s=(0,Fe.publicToAddress)(i);return{address:k.base.toHex(s,!0),publicKey:k.base.toHex(i,!0)}}xe.getNewAddress=Js;function Ws(t){let r="",i=(0,Fe.isValidAddress)(t);return r=(0,Fe.toChecksumAddress)(t),{isValid:i,address:r}}xe.validAddress=Ws;function Qs(t,r){let i=Fe.TransactionFactory.fromTxData(r);if(!t)return{raw:k.base.toHex(v.Buffer.from(JSON.stringify(r))),hash:k.base.toHex(i.getMessageToSign(!0)),serializeRaw:k.base.toHex(i.serialize())};let s=k.base.fromHex(t),u=i.sign(s);return k.base.toHex(u.serialize(),!0)}xe.signTransaction=Qs;function ks(t,r,i){if(!i)return qi(t,r);if(t==at.MessageTypes.TYPE_DATA_V1)return(0,Ut.signTypedMessage)(i,{data:JSON.parse(r)},"V1");if(t==at.MessageTypes.TYPE_DATA_V3)return(0,Ut.signTypedMessage)(i,{data:JSON.parse(r)},"V3");if(t==at.MessageTypes.TYPE_DATA_V4)return(0,Ut.signTypedMessage)(i,{data:JSON.parse(r)},"V4");let s=(0,at.hashMessage)(t,r),{v:u,r:x,s:_}=(0,Fe.ecdsaSign)(k.base.fromHex(s),i);return(0,Fe.makeSignature)(u,x,_)}xe.signMessage=ks;function qi(t,r){return t==at.MessageTypes.TYPE_DATA_V1?(0,Ut.typedSignatureHash)(JSON.parse(r)):t==at.MessageTypes.TYPE_DATA_V3?k.base.toHex(Ut.TypedDataUtils.sign(JSON.parse(r),!1)):t==at.MessageTypes.TYPE_DATA_V4?k.base.toHex(Ut.TypedDataUtils.sign(JSON.parse(r))):(0,at.hashMessage)(t,r)}xe.signMPCMessage=qi;function eo(t,r,i){let s=(0,at.hashMessage)(t,r),[u,x,_]=[i.slice(0,32),i.slice(32,64),i[64]];return(0,Fe.recoverFromSignature)(k.base.fromHex(s),_,u,x)}xe.verifyMessage=eo;function to(t,r,i){let s=Fe.TransactionFactory.fromTxData(JSON.parse(k.base.fromHex(t).toString())),u=s.getMessageToSign(!0),x=k.base.fromHex(r),_=x.slice(0,32),P=x.slice(32,64),j=k.signUtil.secp256k1.getV(u,k.base.toHex(_),k.base.toHex(P),k.base.fromHex(i));return s=s.processSignature(j+27,_,P),k.base.toHex(s.serialize(),!0)}xe.getMPCTransaction=to;function ro(t,r,i){let s=k.base.fromHex(r),u=s.slice(0,32),x=s.slice(32,64),_=k.signUtil.secp256k1.getV(k.base.fromHex(t),k.base.toHex(u),k.base.toHex(x),k.base.fromHex(i))+27;return(0,Fe.makeSignature)(_,u,x)}xe.getMPCSignedMessage=ro;function no(t,r,i,s){let u=Fe.TransactionFactory.fromSerializedData(k.base.fromHex(t));return u=u.processSignatureWithRawV(parseInt(s,16),k.base.fromHex(r),k.base.fromHex(i)),k.base.toHex(u.serialize(),!0)}xe.getSignedTransaction=no;function io(t){let r=Fe.TransactionFactory.fromSerializedData(k.base.fromHex(t));return k.base.toHex(r.getMessageToSign(!0))}xe.getSignHash=io;function fo(t,r,i){let s=Fe.TransactionFactory.fromSerializedData(k.base.fromHex(t),r),u=s.getMessageToSign(!0),x=(0,Ri.padWithZeroes)(k.base.toHex(s.r.toArrayLike(v.Buffer)),64),_=(0,Ri.padWithZeroes)(k.base.toHex(s.s.toArrayLike(v.Buffer)),64),P=k.base.fromHex(x.concat(_));return i&&!k.signUtil.secp256k1.verifyWithNoRecovery(u,P,k.base.fromHex(i))?new Error("signature error"):s}xe.validSignedTransaction=fo});var Vi=ae(et=>{"use strict";U();L();var so=et&&et.__createBinding||(Object.create?function(t,r,i,s){s===void 0&&(s=i);var u=Object.getOwnPropertyDescriptor(r,i);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(t,s,u)}:function(t,r,i,s){s===void 0&&(s=i),t[s]=r[i]}),_r=et&&et.__exportStar||function(t,r){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(r,i)&&so(r,t,i)};Object.defineProperty(et,"__esModule",{value:!0});_r($i(),et);_r(pn(),et);_r(yn(),et);_r(Fi(),et)});var Fi=ae(tt=>{U();L();var oo=tt&&tt.__createBinding||(Object.create?function(t,r,i,s){s===void 0&&(s=i);var u=Object.getOwnPropertyDescriptor(r,i);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(t,s,u)}:function(t,r,i,s){s===void 0&&(s=i),t[s]=r[i]}),ao=tt&&tt.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),co=tt&&tt.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i in t)i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)&&oo(r,t,i);return ao(r,t),r};Object.defineProperty(tt,"__esModule",{value:!0});tt.EthWallet=void 0;var He=tf(),Ee=Se(),Ne=co(Vi()),Ci="0xa9059cbb",_n=class extends He.BaseWallet{async getDerivedPath(r){return`m/44'/60'/0'/0/${r.index}`}async getNewAddress(r){try{let i=Ee.base.fromHex(r.privateKey);return(0,He.assertBufferLength)(i,32),Promise.resolve(Ne.getNewAddress(r.privateKey))}catch{}return Promise.reject(He.NewAddressError)}async validAddress(r){return Promise.resolve(Ne.validAddress(r.address))}convert2HexString(r){let i;return Ee.BigNumber.isBigNumber(r)?i=r:i=new Ee.BigNumber(r),Ee.base.toBigIntHex(i)}convert2TxParam(r){return{to:r.to,value:this.convert2HexString(r.value||0),nonce:this.convert2HexString(r.nonce),contractAddress:r.contractAddress,gasPrice:this.convert2HexString(r.gasPrice||0),gasLimit:this.convert2HexString(r.gasLimit||0),data:r.data,chainId:this.convert2HexString(r.chainId||1),type:r.type||0,maxPriorityFeePerGas:this.convert2HexString(r.maxPriorityFeePerGas||0),maxFeePerGas:this.convert2HexString(r.maxFeePerGas||0),useValue:r.useValue||!1}}async signTransaction(r){try{let i=r.privateKey;i&&(0,He.assertBufferLength)(Ee.base.fromHex(i),32);let s=this.convert2TxParam(r.data),u=s.chainId,x=s.nonce,_=s.type;if(_===0||_===1){let P=s.gasPrice,j=s.contractAddress,X=s.to,Q=s.value,ye;j?(ye=Ci+Array.prototype.map.call(Ee.abi.RawEncode(["address","uint256"],[X,Q]),Ce=>`00${Ce.toString(16)}`.slice(-2)).join(""),s.useValue||(Q="0x0"),X=j):ye=s.data;let Ue={nonce:x,gasPrice:P,gasLimit:s.gasLimit,to:X,value:Q,data:ye,chainId:u,type:_};return Promise.resolve(Ne.signTransaction(i,Ue))}else if(_===2){let P=s.contractAddress,j=s.to,X=s.value,Q;P?(Q=Ci+Array.prototype.map.call(Ee.abi.RawEncode(["address","uint256"],[j,X]),Ue=>`00${Ue.toString(16)}`.slice(-2)).join(""),X="0x0",j=P):Q=s.data;let ye={nonce:x,gasLimit:s.gasLimit,to:j,value:X,data:Q,chainId:u,type:_,maxPriorityFeePerGas:s.maxPriorityFeePerGas,maxFeePerGas:s.maxFeePerGas};return Promise.resolve(Ne.signTransaction(i,ye))}return Promise.reject(He.SignTxError)}catch{return Promise.reject(He.SignTxError)}}async signMessage(r){let i;r.privateKey&&((0,He.assertBufferLength)(Ee.base.fromHex(r.privateKey),32),i=Ee.base.fromHex(r.privateKey));let s=r.data,u=s.type,x=Ne.signMessage(u,s.message,i);return Promise.resolve(x)}async verifyMessage(r){let i=r.data,s=await this.ecRecover(i,r.signature),u=r.address||"";return Promise.resolve(u.toLowerCase()===s.toLowerCase())}async ecRecover(r,i){let s=r.type,u=Ne.verifyMessage(s,r.message,Ee.base.fromHex(i)),x=Ee.base.toHex(Ne.publicToAddress(u),!0);return Promise.resolve(x)}async encrypt(r,i,s){return Promise.resolve(Ne.sigUtil.encrypt({publicKey:r,data:i,version:s}))}async decrypt(r,i){return Promise.resolve(Ne.sigUtil.decrypt({encryptedData:r,privateKey:Ee.base.stripHexPrefix(i)}))}async getEncryptionPublicKey(r){return Promise.resolve(Ne.sigUtil.getEncryptionPublicKey(Ee.base.stripHexPrefix(r)))}getAddressByPublicKey(r){return Promise.resolve(Ee.base.toHex(Ne.publicToAddress(Ee.base.fromHex(r.publicKey),!0),!0))}async getMPCRawTransaction(r){try{let i=await this.signTransaction(r);return Promise.resolve({raw:i.raw,hash:i.hash})}catch{return Promise.reject(He.GetMpcRawTransactionError)}}async getMPCTransaction(r){try{let i=Ne.getMPCTransaction(r.raw,r.sigs,r.publicKey);return Promise.resolve(i)}catch{return Promise.reject(He.GetMpcTransactionError)}}async getMPCRawMessage(r){try{let i=await this.signMessage(r);return Promise.resolve({hash:i})}catch{return Promise.reject(He.GetMpcRawTransactionError)}}async getMPCSignedMessage(r){try{return Promise.resolve(Ne.getMPCSignedMessage(r.hash,r.sigs,r.publicKey))}catch{return Promise.reject(He.GetMpcTransactionError)}}async getHardWareRawTransaction(r){try{let i=await this.signTransaction(r);return Promise.resolve(i.serializeRaw)}catch{return Promise.reject(He.GetHardwareRawTransactionError)}}async getHardWareSignedTransaction(r){try{return Ne.getSignedTransaction(r.raw,r.r,r.s,r.v)}catch{return Promise.reject(He.GetHardwareSignedTransactionError)}}async calcTxHash(r){let i=Ee.base.fromHex(r.data),s=Ne.TransactionFactory.fromSerializedData(i);return Promise.resolve(Ee.base.toHex(s.hash(),!0))}async validSignedTransaction(r){try{let i=r.data?r.data.chainId:void 0,s=r.data?r.data.publicKey:void 0,u=Ne.validSignedTransaction(r.tx,i,s);return Promise.resolve((0,He.jsonStringifyUniform)(u))}catch{return Promise.reject(He.validSignedTransactionError)}}};tt.EthWallet=_n});export default Fi();

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=EthWallet-PILT4OZZ.js.map
