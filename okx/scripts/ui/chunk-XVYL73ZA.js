import{b as B}from"./chunk-ZXEHJOAD.js";import{t as b}from"./chunk-GUWGENNL.js";import{d as w,u,v as P}from"./chunk-MTMZQEHP.js";import{j as y}from"./chunk-VPBQLZCI.js";import{d as x,f as M}from"./chunk-S4N75E3H.js";import{Lb as S,N as F,Pa as W,Vb as v,pb as i,rb as k,sb as I}from"./chunk-CVJKAN5R.js";import{a as J}from"./chunk-V4YVDLI4.js";import{f as O,m as g,o as T}from"./chunk-6V2G2Z5W.js";g();T();var s=O(J());v();k();W();M();async function E({coinId:e,address:a,transaction:o}){let t={type:"simulate",base:{sequenceNumber:"",chainId:0,maxGasAmount:"",gasUnitPrice:"",expirationTimestampSecs:""},data:{abi:"[]",data:JSON.stringify(o)}},n=o.function.split("::")[0],r={coinId:e||i,address:a},c={fromAddr:a,toAddr:n},{info:m}=await w(r,c);t.base=m;let p=o.function.split("::")[1],f=await P({address:n,name:p});return t.data.abi=JSON.stringify(f),await x().signTransaction(t,a,F)}async function V({address:e,transaction:a}){let o={coinId:i,address:e},t={fromAddr:e},n=await E({address:e,transaction:a}),{fee:r}=await u(o,t,n);return r}var X=({coinId:e,address:a,requestId:o,gasUnitPrice:t,maxGasAmount:n}={},r=!1)=>{let[c,m]=(0,s.useState)({}),[p,f]=(0,s.useState)(!0),[l,C]=(0,s.useState)(!1);return y(()=>{(async()=>{try{if(t&&n){m({gasUnitPrice:t,maxGasAmount:n,fee:I(t,n)}),f(!1);return}let A={coinId:e,address:a},N={fromAddr:a},d="";o&&(d=await b(o));let h=await u(A,N,d);h&&m(h)}catch{C(!0)}finally{f(!1)}})()}),r?{loading:p,aptosFee:c,estimateFailed:l}:c},Y=()=>{let e=B();return(0,s.useMemo)(()=>{var t;let o=((t=e.find(n=>n.coinId==i))==null?void 0:t.coinAmountInt)||0;return S(o)},[i])};export{V as a,X as b,Y as c};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-XVYL73ZA.js.map
