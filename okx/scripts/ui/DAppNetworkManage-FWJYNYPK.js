import{a as Le}from"./chunk-5ZQ5NVPP.js";import{a as re}from"./chunk-PJG4F6OY.js";import"./chunk-R7OCQATX.js";import{a as De}from"./chunk-U3UPRMNJ.js";import{a as H}from"./chunk-DTVL7EQX.js";import{b as q}from"./chunk-LEU7ZZNB.js";import"./chunk-33SB5WSN.js";import"./chunk-2N2ADYFP.js";import"./chunk-X2HBIQ56.js";import"./chunk-ZXEHJOAD.js";import"./chunk-YM6UXGIC.js";import"./chunk-FEET7RP6.js";import"./chunk-MBJ4MFYL.js";import{a as Be}from"./chunk-PCY622ND.js";import"./chunk-NS35PZCP.js";import"./chunk-XOD56IFT.js";import"./chunk-BBN3UGKM.js";import"./chunk-5DEIKYJL.js";import"./chunk-QMNAWRVI.js";import"./chunk-D6ZXZUY6.js";import"./chunk-QMF5LKVF.js";import"./chunk-VMACN7YR.js";import"./chunk-PD2BTUUF.js";import"./chunk-YCMOAOGN.js";import"./chunk-2HWABU7H.js";import"./chunk-APEQZGKB.js";import"./chunk-QNEJI55N.js";import"./chunk-YVRXETFX.js";import"./chunk-B2BOSVTW.js";import"./chunk-GUJXW3GJ.js";import{a as Te,c as Se,e as Ce,i as Y}from"./chunk-VIS7KIVI.js";import"./chunk-OZ6XSJY6.js";import"./chunk-DMJQUOJT.js";import"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import"./chunk-4OTZHHYZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import{M as U,P as he}from"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import"./chunk-S3ECGMEP.js";import"./chunk-PX7HII6H.js";import"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import{q as Ae}from"./chunk-TPEASXIF.js";import{a as Ee}from"./chunk-JSAFBAMQ.js";import"./chunk-A336VZZF.js";import{b as d}from"./chunk-XEOGXIVD.js";import{a as Pe}from"./chunk-PCGRDRHF.js";import{p as n}from"./chunk-IU3TYIWS.js";import"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import{p as ge,r as xe}from"./chunk-X2LENRE7.js";import"./chunk-O4EDZSHP.js";import{k as Ie}from"./chunk-HU3KBV5G.js";import{b as ee}from"./chunk-6ZPGW3YM.js";import{k as Ne,o as Ke}from"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import{d as S,f as _e}from"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import"./chunk-FLCN6MAI.js";import"./chunk-7E3KY4EN.js";import{b as ye,c as we,d as oe,i as te,j as O}from"./chunk-JIRWXBHS.js";import"./chunk-3TVEFIPW.js";import"./chunk-UXFKODVN.js";import"./chunk-IMRS4RGO.js";import"./chunk-52GWQSZH.js";import"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import{h as ke}from"./chunk-RMQJRDTF.js";import{c as a}from"./chunk-2YLR7R2N.js";import"./chunk-MVLY6WUP.js";import"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{C as z,H as G,Pa as R,Ta as ue,ma as fe,rb as We,v as i}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{B as V,E as Z,G as de,c as pe}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{J as ae,V as B,c as He}from"./chunk-C2H3SRET.js";import{a as k}from"./chunk-V4YVDLI4.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import"./chunk-IYYFWVWL.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import"./chunk-RYNAOZ73.js";import"./chunk-PR4SLUV4.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f as x,m as t,o as r}from"./chunk-6V2G2Z5W.js";t();r();t();r();var e=x(k()),w=x(ee());t();r();var ne=x(k());t();r();var C=x(k());t();r();var D={main:"_main_1yqx5_1",logo:"_logo_1yqx5_6",content:"_content_1yqx5_10",network:"_network_1yqx5_17",icon:"_icon_1yqx5_22"};function W({icon:s,customIcon:p,name:f,content:c=null,disconnect:g,showDisconnect:l=!0}){return C.default.createElement("div",{className:D.main},p||C.default.createElement(d,{src:s,text:f,size:d.SIZE.lg,className:D.logo}),C.default.createElement("div",{className:D.content},C.default.createElement(n.Text,{strong:700,ellipsis:!0},f),c),l&&C.default.createElement(d.IconButton,{icon:"okds-unlink",className:D.icon,onClick:g}))}z();var $e=({connectedDomains:s,onDisconnect:p,domainHostCount:f})=>{let c=l=>p(l.origin),g=l=>l.extensionId?i("wallet_dapp_conncetion_subtitle_external_extension"):f[l.host]>1?l.origin:xe(l.origin);return ne.default.createElement("main",null,s.map(l=>ne.default.createElement(W,{key:l.origin,icon:l.icon,name:g(l),disconnect:()=>c(l)})))},ve=$e;_e();z();t();r();var m=x(k()),K=x(ee());var Fe=x(He());R();t();r();var Me={arrow:"_arrow_t61c5_1"};var je=({isOkx:s,isFromConnectedSitesPage:p=!1})=>{let f=Ie(),[c,g]=(0,m.useState)(!1),l=(0,K.useSelector)(U),h=(0,K.useSelector)(he)[l].keyringIdentityType===ke.PRIVATE_KEY,{origin:o}=(0,K.useSelector)(Y),N=q({dappUrl:o}),A=N==null?void 0:N.provider,Q=A?O[A]===G:!1,{isEVMProvider:P,isEVM:M,icon:F,chainName:I,isRpcModeCustomNetwork:T}=H(),E=s||P;return m.default.createElement(m.default.Fragment,null,m.default.createElement(Le,{type:"dapp",visible:c,closeCallback:()=>{g(!1)},isOkx:s,isEVM:M,isPRIVATE:h,isBitcoinProvider:Q}),m.default.createElement("div",{className:(0,Fe.default)("network-block",{"network-block-cursor":E}),onClick:()=>{E&&g(!0)}},s?m.default.createElement(m.default.Fragment,null,m.default.createElement("img",{src:"/static/images/all-chain.svg",className:"network-block--icon",alt:"network-icon"}),m.default.createElement("span",{className:"network-block-name"},f("wallet_extension_option_allchain")),m.default.createElement(d,{className:"okx-wallet-plugin-select-unfold network-block--arrow",size:d.SIZE.xxs})):m.default.createElement(m.default.Fragment,null,!p&&(T?m.default.createElement(d,{text:I,size:d.SIZE.xs,className:"network-block--text-icon"}):m.default.createElement(Z,{width:24,height:24,alt:I,src:F||oe,errorImg:oe,className:"network-block--icon"})),m.default.createElement("span",{className:"network-block-name"},I),P&&m.default.createElement(d,{className:`okx-wallet-plugin-select-unfold ${Me.arrow}`,size:d.SIZE.xxs}))))},be=je;t();r();Ke();R();t();r();var v=x(k());z();t();r();var L={wrapper:"_wrapper_1yacw_1",silence:"_silence_1yacw_5",text:"_text_1yacw_11",cancel:"_cancel_1yacw_14"};t();r();var ze=x(k());_e();var Ve=x(ee()),$=({origin:s})=>{let p=(0,Ve.useSelector)(({metamask:c})=>c.silence||{});return{removeSilencePermission:(0,ze.useCallback)(async()=>{await S().removeSilencePermission(s)},[s]),silencePermissions:p[s]||[]}};var Ze=({origin:s})=>{let{removeSilencePermission:p,silencePermissions:f}=$({origin:s});if(f.findIndex(l=>l.expireTime>Date.now())===-1)return null;let g=async()=>{await p()};return v.default.createElement(a.Box,{className:L.wrapper},v.default.createElement(a.FlexBox,{align:a.ALIGN.center,className:L.silence},v.default.createElement(n.Text,{className:L.text,type:n.TYPE.secondary,size:n.SIZE.xs},i("wallet_extension_connect_text_silent_mode_enabled")),v.default.createElement(n.Text,{strong:500,className:L.cancel,size:n.SIZE.xs,onClick:g},i("wallet_extension_connect_btn_cancel"))))};t();r();var j={chainIcon:"_chainIcon_1ea96_1",lineItem:"_lineItem_1ea96_4"};t();r();t();r();We();function J(){let s=ue;return{address:Be(s)||"",localType:s}}z();R();var y=x(k());t();r();var ie={wrapper:"_wrapper_1ktpn_1",arrow:"_arrow_1ktpn_4"};var Ge=({walletId:s})=>{let{address:p}=J(),[f,c]=y.default.useState(!1);return y.default.createElement(y.default.Fragment,null,y.default.createElement(a.FlexBox,{align:a.ALIGN.center,className:ie.wrapper,onClick:()=>{c(!0)}},y.default.createElement(n.Text,{size:n.SIZE.xs},ge(p)),y.default.createElement(d,{className:`okx-wallet-plugin-select-unfold ${ie.arrow}`,size:d.SIZE.xxs})),y.default.createElement(re,{visible:f,onClose:()=>c(!1),coinId:fe,walletId:s},y.default.createElement(re.Header,{title:i("extension_defi_top_header_title_select_address_type"),subTitle:i("extension_defi_popup_desc_new_address_default")})))};var Je=()=>{let{isEVMProvider:s,icon:p}=H(),f=(0,w.useSelector)(Ce),c=(0,w.useSelector)(Se),g=(0,w.useSelector)(U),l=(0,w.useDispatch)(),[se,h]=(0,e.useState)(!1),o=(0,w.useSelector)(Y),{removeSilencePermission:N,silencePermissions:A}=$({origin:o==null?void 0:o.origin}),Q=(o==null?void 0:o.origin)&&(o==null?void 0:o.origin.replace(/^https?:\/\//iu,"")),P=(0,w.useSelector)(Te),{setDisconnectUpgrade:M,isNeedShowDisconnectUpgrade:F}=De(),I=q({dappUrl:o==null?void 0:o.origin}),T=I==null?void 0:I.provider,{address:E}=J(),X=T?O[T]===G:!1,le=(0,e.useCallback)(()=>{F&&(de.success({title:i("wallet_extension_card_subtitle_disconnect_update")}),M())},[F,M]),ce=async u=>{S().clearCookie(u),await S().removePermittedAllAccount(u),le(),A.length>0&&N(u),await Ne(l)},Oe=()=>{h(!0);try{Promise.all(c.map(b=>(A.length>0&&N(b.origin),S().clearCookie(b.origin)))).catch(()=>{});let u=c.map(async b=>l(Ae(b.origin,g)));Promise.all(u).then(()=>{h(!1),le()}).catch(()=>{h(!1)})}catch{h(!1)}},Ue=()=>e.default.createElement(Z,{alt:"connected",src:(o==null?void 0:o.icon)||"/static/images/default-img.svg",errorImg:we,className:"connect-site-page__origin-icon"}),Ye=(0,e.useMemo)(()=>Boolean((c||[]).find(u=>u.origin===(o==null?void 0:o.origin))),[c,o]),me=(0,e.useMemo)(()=>(c||[]).filter(u=>u.origin!==(o==null?void 0:o.origin)),[c,o]),qe=(0,e.useCallback)(()=>{var u;return(u=P[o==null?void 0:o.origin])!=null&&u.isOkx?e.default.createElement(a.FlexBox,{align:a.ALIGN.center},e.default.createElement(n.Text,{type:n.TYPE.secondary,size:n.SIZE.xs},i("wallet_extension_card_dropdown_available_network",{network:""})),e.default.createElement(n.Text,{strong:500,size:n.SIZE.xs},i("wallet_extension_card_text_all_network"))):T===ye?e.default.createElement(a.FlexBox,{align:a.ALIGN.center,className:j.lineItem},e.default.createElement(n.Text,{type:n.TYPE.secondary,size:n.SIZE.xs,ellipsis:!0},i("wallet_extension_card_dropdown_available_network",{network:e.default.createElement(n.Text,{strong:500,size:n.SIZE.xs},i("wallet_extension_cosmos_text_cosmos_network"))}))):e.default.createElement(a.FlexBox,{align:a.ALIGN.center,className:j.lineItem},e.default.createElement(n.Text,{type:n.TYPE.secondary,size:n.SIZE.xs,ellipsis:!0},X?i("extension_defi_top_text_connected_address"):i("wallet_extension_card_dropdown_available_network",{network:""})),e.default.createElement(a.FlexBox,{align:a.ALIGN.center},e.default.createElement(pe,{width:16,height:16,alt:"chain",src:p||te,errorImg:te,pictureClassName:j.chainIcon}),X&&E?e.default.createElement(Ge,{walletId:g}):e.default.createElement(be,{isOkx:!1,isFromConnectedSitesPage:!0})))},[o==null?void 0:o.origin,E,T,P,p,X,g]);return e.default.createElement("div",{className:"connect-site-page__wrapper"},e.default.createElement(Ee,{title:i("wallet_home_dapp_connection_btn_connect"),closeable:!1}),e.default.createElement("div",{className:"connect-site-page__connect-site-wrapper"},e.default.createElement("p",{className:"connect-site-page__connect-site"},i("wallet_extension_header_subtitle_current_dapp"),s?e.default.createElement(V,{title:i("wallet_extension_toast_tooltip_adjust_retry"),trigger:V.TRIGGER_TYPES.hover,placement:V.DIRECTION.bottom,className:"connect-site-page__tip"},e.default.createElement(ae,{className:"connect-site-page__question-icon okds-question-mark-circle-fill"})):null),e.default.createElement(W,{customIcon:Ue(),name:Q,content:qe(),disconnect:()=>ce(o==null?void 0:o.origin),showDisconnect:Ye}),e.default.createElement(Ze,{origin:o==null?void 0:o.origin})),me.length>0&&e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{className:"connect-site-page__divide"}),e.default.createElement("div",{className:"connect-site-page__connect-site-wrapper"},e.default.createElement("p",{className:"connect-site-page__connect-site"},i("wallet_extension_header_subtitle_connected_dapp")),e.default.createElement(ve,{domainHostCount:f,connectedDomains:me,onDisconnect:ce}))),c.length?e.default.createElement(Pe.FooterActions,null,e.default.createElement(B,{block:!0,category:B.CATEGORY.fill,type:B.TYPE.highlight,size:B.SIZE.lg,onClick:Oe,loading:se},i("wallet_extension_withdraw_btn_disconnected"))):null)},Qe=(0,e.memo)(Je);export{Qe as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=DAppNetworkManage-FWJYNYPK.js.map
