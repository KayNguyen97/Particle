import{a as ke,d as Ee}from"./chunk-OGQ2MLR4.js";import{a as Ce}from"./chunk-PLVZLQPX.js";import{q as Ne}from"./chunk-FEET7RP6.js";import{b as Se,c as K,d as z,e as Te,f as Ue,g as De,h as Pe,i as Ae,j as $e,k as Be,l as We,m as ze,n as A,o as R,p as V,q as Le,r as Me,s as F,t as H,u as Ze,v as Fe,w as He,x as Ye}from"./chunk-3HKLXQEP.js";import{e as W}from"./chunk-DMJQUOJT.js";import{d as cr}from"./chunk-R6GCLTW2.js";import{a as be}from"./chunk-JSAFBAMQ.js";import{b as se}from"./chunk-XEOGXIVD.js";import{a as xe}from"./chunk-PCGRDRHF.js";import{f as ye,j as we}from"./chunk-VPBQLZCI.js";import{T as Ie,a as ge}from"./chunk-O4EDZSHP.js";import{k as C}from"./chunk-HU3KBV5G.js";import{b as P}from"./chunk-6ZPGW3YM.js";import{b as G}from"./chunk-YMZEQGAL.js";import{i as ve}from"./chunk-JIRWXBHS.js";import{a as he}from"./chunk-TPSXCUGD.js";import{a as ue,b as pr}from"./chunk-MVLY6WUP.js";import{c as de,e as fe,h as _e}from"./chunk-ZEAKIEIQ.js";import{C as ar,ib as ce,rb as mr,v as oe}from"./chunk-CVJKAN5R.js";import{B as ne,b as ie,q as v}from"./chunk-GXQ645QR.js";import{J as pe,P as T,V as Z,c as lr}from"./chunk-C2H3SRET.js";import{a as D}from"./chunk-V4YVDLI4.js";import{c as sr,f as h,m as f,n as x,o as _}from"./chunk-6V2G2Z5W.js";var ae=sr((gr,qe)=>{f();_();(function(i){"use strict";i.exports.is_uri=n,i.exports.is_http_uri=e,i.exports.is_https_uri=o,i.exports.is_web_uri=p,i.exports.isUri=n,i.exports.isHttpUri=e,i.exports.isHttpsUri=o,i.exports.isWebUri=p;var a=function(t){var l=t.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return l};function n(t){if(!!t&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(t)&&!/%[^0-9a-f]/i.test(t)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(t)){var l=[],r="",c="",s="",d="",g="",m="";if(l=a(t),r=l[1],c=l[2],s=l[3],d=l[4],g=l[5],!!(r&&r.length&&s.length>=0)){if(c&&c.length){if(!(s.length===0||/^\//.test(s)))return}else if(/^\/\//.test(s))return;if(!!/^[a-z][a-z0-9\+\-\.]*$/.test(r.toLowerCase()))return m+=r+":",c&&c.length&&(m+="//"+c),m+=s,d&&d.length&&(m+="?"+d),g&&g.length&&(m+="#"+g),m}}}function e(t,l){if(!!n(t)){var r=[],c="",s="",d="",g="",m="",w="",y="";if(r=a(t),c=r[1],s=r[2],d=r[3],m=r[4],w=r[5],!!c){if(l){if(c.toLowerCase()!="https")return}else if(c.toLowerCase()!="http")return;if(!!s)return/:(\d+)$/.test(s)&&(g=s.match(/:(\d+)$/)[0],s=s.replace(/:\d+$/,"")),y+=c+":",y+="//"+s,g&&(y+=g),y+=d,m&&m.length&&(y+="?"+m),w&&w.length&&(y+="#"+w),y}}}function o(t){return e(t,!0)}function p(t){return e(t)||o(t)}})(qe)});f();_();var tr=h(lr());var I=h(D()),or=h(cr());var te=h(P());var ir=h(he());ar();f();_();var Y=h(D());var Q=h(P());var je=(0,Y.memo)(i=>{let{disabled:a}=i,n=C(),e=(0,Q.useDispatch)(),o=({target:{value:r}})=>{e(Be(r))},{name:p,nameErr:t}=(0,Q.useSelector)(Se);return Y.default.createElement("div",{className:"net-form__wrap-input"},Y.default.createElement(v,{value:p,onBlur:()=>{e(We(n(p?"":"developer_mode_network_errortip_cannotspace")))},disabled:a,size:v.SIZE.xl,errorType:v.TIP_TYPE.always,error:t,onChange:o,placeholder:n("extension_wallet_addnetwork_placeholder_network"),label:n("wallet_transaction_history_subtitle_network_name")}))});f();_();var $=h(D());var L=h(P()),Ge=h(ae());f();_();f();_();_e();async function Oe(i,a,n=[]){let e=i,o={"Content-Type":"application/json"},{origin:p,pathname:t,username:l,password:r,search:c}=new URL(i);if(l&&r){let m=x.Buffer.from(`${l}:${r}`).toString("base64");o.Authorization=`Basic ${m}`,e=`${p}${t}${c}`}let{data:s}=await fe(e,{id:Date.now().toString(),jsonrpc:"2.0",method:a,params:n},{timeout:3e4,cache:"default",headers:o});if(!s||Array.isArray(s)||typeof s!="object")throw new Error(`RPC endpoint ${i} returned non-object response.`);let{error:d,result:g}=s;if(d)throw new Error((d==null?void 0:d.message)||d);return g}var X=i=>{try{let a=new URL(i);return a.protocol==="http:"||a.protocol==="https:"}catch{return!1}},J=((i={})=>a=>new Promise((n,e)=>i[a]?n(i[a]):Oe(a,"eth_chainId").then(o=>{i[a]=o,n(o)}).catch(o=>{e(o)})))();var Ke=$.default.memo(i=>{let{disabled:a,modify:n}=i,e=C(),o=(0,L.useDispatch)(),[p,t]=(0,$.useState)(!1),l=({target:{value:y}})=>{o(ze(y.trim()))},{rpcUrl:r,rpcUrlErr:c}=(0,L.useSelector)(K),{defaultNets:s,customNets:d}=(0,L.useSelector)(W),g=[...s,...d],{chainId:m}=(0,L.useSelector)(z);return $.default.createElement("div",{className:"net-form__wrap-input"},$.default.createElement(v,{value:r,onBlur:()=>{if(!r)return o(A(e("developer_mode_network_errortip_cannotspace")));if(!X(r))return o(A(e("developer_mode_infor_errortip_https")));if(!Ge.default.isWebUri(r))return o(A(e("developer_mode_infor_errortip_rpcurl")));let k=g.find(b=>b.rpcUrl===r);return k&&!n?o(A(e("developer_mode_infor_errortip_used_network",{network:k.name}))):(t(!0),J(r).then(b=>{try{b=parseInt(b,16).toString(10),n?b!==m&&o(V({err:e("developer_mode_infor_errortip_chainid",{chainID:b}),validChainId:m})):o(R(b))}catch{}t(!1),o(A(""))}).catch(()=>{o(A(e("developer_mode_infor_errortip_rpcurl"))),t(!1)}))},disabled:a,size:v.SIZE.xl,errorType:v.TIP_TYPE.always,error:c,onChange:l,placeholder:e("extension_wallet_addnetwork_placeholder_prcurl"),label:e("developer_mode_network_title_rpcurl"),suffix:p&&$.default.createElement(T.Circle,{size:T.SIZE.sm})}))});f();_();var B=h(D());var j=h(P());_e();pr();var Re=B.default.memo(i=>{let{disabled:a}=i,n=C(),e=(0,j.useDispatch)(),o=({target:{value:m}})=>{e(Me(m.trim()))},{symbol:p,symbolErr:t,symbolTip:l,fieldUpdated:r}=(0,j.useSelector)(Te),[c,s]=(0,B.useState)(!1),{chainId:d}=(0,j.useSelector)(z);return B.default.createElement("div",{className:"net-form__wrap-input"},B.default.createElement(v,{value:p,disabled:a,onBlur:()=>{let m="",w="";if(!d){e(F(m)),e(H(w));return}if(!p){m=n("developer_mode_network_errortip_cannotspace"),e(F(m)),e(H(w));return}s(!0),de(ue.getRpcNetworkByChainId,{chainIds:[d]}).then(({data:y})=>{var k,b;if(s(!1),Array.isArray(y)){let u=y.find(E=>E.chainId.toString()===d);u?((k=u==null?void 0:u.nativeCurrency)==null?void 0:k.symbol)!==p&&(w=n("developer_mode_infor_errortip_network_correct",{number:d,symbol:(b=u.nativeCurrency)==null?void 0:b.symbol})):w=n("developer_mode_infor_errortip_errorname_rpcurl")}e(F(m)),e(H(w))}).catch(y=>{console.log(y),w=n("developer_mode_infor_errortip_errorname_rpcurl"),s(!1),e(F(m)),e(H(w))})},size:v.SIZE.xl,errorType:v.TIP_TYPE.always,error:t,tips:l,onChange:o,suffix:c&&r&&B.default.createElement(T.Circle,{size:T.SIZE.sm}),placeholder:n("extension_wallet_addnetwork_placeholder_symbol"),label:n("developer_mode_network_title_tokenname")}))});f();_();var N=h(D());var M=h(P());f();_();mr();function Ve(i){return Number.isSafeInteger(i)&&i>0&&i<=ce}var Qe=N.default.memo(i=>{let{disabled:a,modify:n}=i,e=C(),o=(0,M.useDispatch)(),p=({target:{value:u}})=>{o(R(u.trim()))},[t,l]=(0,N.useState)(!1),{chainId:r,chainIdErr:c,chainIdTip:s,fieldUpdated:d}=(0,M.useSelector)(z),{rpcUrl:g}=(0,M.useSelector)(K),{defaultNets:m,customNets:w}=(0,M.useSelector)(W),y=[...m,...w],k=(u,E,U=r)=>{o(V({err:u,validChainId:U})),o(Le({tip:E,validChainId:U}))},b=()=>{let u="",E="";if(!r)return u=e("developer_mode_network_errortip_cannotspace"),k(u,E);let U=r,le=10;if(!U.startsWith("0x"))try{U=`0x${G(U)}`}catch{u=e("developer_mode_infor_errortip_errorchainid")}let[me]=y.filter(S=>S.chainId===U&&S.rpcUrl!==g);if(me?E=e("developer_mode_infor_errortip_network",{network:me.name}):r.startsWith("0x")?(le=16,/^0x[0-9a-f]+$/iu.test(r)||(u=e("developer_mode_infor_errortip_errornum"))):/^[0-9]+$/u.test(r)?r.startsWith("0")?u=e("developer_mode_infor_errortip_errornum"):Ve(parseInt(r,le))||(u=e("developer_mode_infor_errortip_errorchainid")):u=e("developer_mode_infor_errortip_errornum"),!g||t||u)return k(u,E);l(!0),J(g).then(S=>{if(U!==S){if(!r.startsWith("0x"))try{S=parseInt(S,16).toString(10)}catch(nr){console.log(nr)}u=e("developer_mode_infor_errortip_chainid",{chainID:S})}k(u,E,r),l(!1)}).catch(S=>{console.log(S),E=e("developer_mode_infor_errortip_rpcurl_confirm"),l(!1),k(u,E,r)})};return N.default.createElement("div",{className:"net-form__wrap-input"},N.default.createElement(v,{value:r,disabled:a||!!n,size:v.SIZE.xl,errorType:v.TIP_TYPE.always,error:c,onBlur:b,tips:s,onChange:p,suffix:t&&d&&N.default.createElement(T.Circle,{size:T.SIZE.sm}),placeholder:e("extension_wallet_addnetwork_placeholder_chainid"),label:N.default.createElement(N.default.Fragment,null,e("developer_mode_network_title_chainid"),N.default.createElement(ne,{title:e("developer_mode_network_tooltip_display_decimal"),placement:ne.DIRECTION.topRight},N.default.createElement(pe,{className:"okx-wallet-plugin-information-circle"})))}))});f();_();var q=h(D());var Xe=h(he());var O=h(P());var Je=i=>{let{modify:a}=i,n=C(),e=(0,O.useDispatch)(),o=(0,Xe.useHistory)(),p=(0,O.useSelector)($e),t=Ne(),l=(0,O.useSelector)(De),r=(0,q.useRef)(!1),c=async()=>{if(!r.current){if(r.current=!0,a){await e(Ae());let s={...l,chainId:`0x${G(l.chainId)}`};t(s)}else await e(Pe());o.replace(`${Ie}?tab=2`),r.current=!1}};return q.default.createElement(xe.FooterActions,null,q.default.createElement(Z,{disabled:p,category:Z.CATEGORY.fill,type:Z.TYPE.highlight,size:Z.SIZE.lg,onClick:c},n("developer_mode_bot_btn_save")))};f();_();var ee=h(D());var er=h(ae());var re=h(P());var rr=ee.default.memo(i=>{let{disabled:a}=i,n=C(),e=(0,re.useDispatch)(),o=({target:{value:r}})=>{e(Ze(r.trim()))},{explorerUrl:p,explorerUrlErr:t}=(0,re.useSelector)(Ue);return ee.default.createElement("div",{className:"net-form__wrap-input"},ee.default.createElement(v,{value:p,onBlur:()=>{let r="";p&&(er.default.isWebUri(p)||(X(p)?r=n("developer_mode_infor_errortip_invalidurl"):r=n("developer_mode_infor_errortip_https1"))),e(Fe(r))},disabled:a,size:v.SIZE.xl,errorType:v.TIP_TYPE.always,error:t,onChange:o,placeholder:n("extension_wallet_addnetwork_placeholder_blockchain"),label:n("developer_mode_network_title_blockchain_explorer")}))});f();_();var Ot=()=>{let i=(0,te.useDispatch)(),a=(0,ir.useHistory)(),n=Ce(),e=n.get("modify"),o=e===ke.CANT,p=decodeURIComponent(n.get("id")),t=(0,te.useSelector)((0,or.createSelector)(W,({defaultNets:d,customNets:g})=>[...d,...g].find(m=>m.uniqueId===p)||{}));we(()=>{t={...t},t.chainId&&(t.chainId=`${Number.parseInt(t.chainId,16)}`),i(He(t))}),ye(()=>{i(Ye())});let l=(0,I.useCallback)(()=>{a.action==="POP"?a.replace(ge):a.goBack()},[a]),r=Ee(),c=(0,I.useCallback)(()=>{r({editRpcInfo:t,onDeleted:l})},[r,l,t]),s=(0,I.useMemo)(()=>t.name?I.default.createElement("div",{className:"net-form__title"},I.default.createElement(se,{size:se.SIZE.md,src:t.icon,text:t.name,className:"net-form__title-icon",defaultIcon:ve}),I.default.createElement("div",{className:"net-form__title-text"},t.name)):oe("wallet_extension_settings_header_custom_network"),[t]);return I.default.createElement("div",{className:(0,tr.default)("net-form",{disabled:o})},I.default.createElement(be,{title:s,onBack:l,onClose:e&&!o?c:null,closeable:e&&!o?{icon:"okx-wallet-plugin-trash",style:{color:"var(--okd-color-semantic-negative)"}}:!1}),o||e?null:I.default.createElement(ie,{className:"net-form__warn",desc:oe("developer_mode_network_errortip_trust_network"),type:ie.TYPE.warn,closable:!1}),I.default.createElement("div",{className:"net-form__wrap"},I.default.createElement(je,{disabled:o}),I.default.createElement(Ke,{disabled:o,modify:e}),I.default.createElement(Qe,{disabled:o,modify:e}),I.default.createElement(Re,{disabled:o}),I.default.createElement(rr,{disabled:o}),o?null:I.default.createElement(Je,{modify:e})))};export{Ot as a};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-23KB33NX.js.map
