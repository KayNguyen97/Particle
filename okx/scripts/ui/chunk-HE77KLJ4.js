import{d as Xe}from"./chunk-NOZM7AA3.js";import{e as we,k as ee,l as q}from"./chunk-YLO74Q7W.js";import{a as eo}from"./chunk-D54UDGZS.js";import{a as Q}from"./chunk-E73QHIZ6.js";import{a as ve}from"./chunk-PCY622ND.js";import{h as De}from"./chunk-QMNAWRVI.js";import{E as Ke,N as Qe,b as $,d as Pe,e as Oe,f as L,g as Ue,h as Ve,i as Me,j as He,l as Ge,m as $e,n as qe,o as ze,p as Ze,r as We,s as X,u as Ye,v as je,y as Je}from"./chunk-BTS2GOAC.js";import{d as Re}from"./chunk-WYB2CUAN.js";import{h as ke}from"./chunk-MTMZQEHP.js";import{W as ye}from"./chunk-R6GCLTW2.js";import{k as he}from"./chunk-IU3TYIWS.js";import{b as T,e as K,o as Ne,q as Be,s as Le}from"./chunk-VPBQLZCI.js";import{a as Se,f as G,na as be,oa as _e}from"./chunk-O4EDZSHP.js";import{b as g}from"./chunk-6ZPGW3YM.js";import{a as vo}from"./chunk-3TVEFIPW.js";import{Z as B}from"./chunk-UXFKODVN.js";import{a as P}from"./chunk-TPSXCUGD.js";import{a as Te}from"./chunk-6PGLMYAE.js";import{a as J}from"./chunk-RMQJRDTF.js";import{a as ge}from"./chunk-5KSDRGLW.js";import{C as Ro,D as le,Ob as Ee,Pb as Fe,Tb as Ie,Vb as y,gb as de,nb as Ce,pb as Ae,rb as ko,sb as h,tb as xe,v as fe,vb as H,yb as N,zb as j}from"./chunk-CVJKAN5R.js";import{H as pe}from"./chunk-GXQ645QR.js";import{a as _}from"./chunk-V4YVDLI4.js";import{b as Do}from"./chunk-IYYFWVWL.js";import{f as c,m as t,o as s}from"./chunk-6V2G2Z5W.js";t();s();var Co=c(g());Ro();t();s();var d=c(g());y();t();s();var Z=c(le()),to=c(P());t();s();var z=c(_());y();var wo=(0,z.createContext)({coinId:null,fromAddress:""});function oo(){return(0,z.useContext)(wo)}function no(){let{coinId:e}=oo();return e}function R(){let{fromAddress:e}=oo();return e}function S(){return(e,o,n)=>{if(!e)return e;let r;return n?r=Fe(e,o.orderDecimalNum):r=Ee(e,o.orderDecimalNum),Ie(r)}}function ro(){return(e,o,n)=>{if(!e)return e;typeof n=="boolean"&&(n={isFee:n});let{isFee:r,useApproximate:i=!0,...u}=n||{};return Re(e,{fixed:o.orderDecimalNum,isFixedUp:r,useApproximate:i,...u})}}var oe={vdecimalNum:0,decimals:0,symbol:""};function b(){let{coinId:e}=(0,to.useParams)(),o=no();return Number(o)||Number(e)}var f=()=>{let e=b(),{coin:o,baseCoin:n}=Q(e,!0),r=(0,Z.isEmpty)(o)?oe:o,i=(0,Z.isEmpty)(n)?oe:n;return{coin:r,baseCoin:i}},E=()=>{let e=so(),{coin:o}=Q(e,!1);return(0,Z.isEmpty)(o)?oe:o};var io=()=>(0,d.useSelector)($),Fn=()=>(0,d.useSelector)(L),x=()=>{let e=S(),o=(0,d.useSelector)(Me),{coin:n}=f();return e(o,n,!1)},uo=()=>(0,d.useSelector)(He),In=()=>{let e=x(),{coin:o}=f();return h(e,10**o.decimals)},co=()=>(0,d.useSelector)(Ze),ne=()=>(0,d.useSelector)($e),re=()=>{let e=S(),o=ne(),n=E();return e(xe(o,10**n.decimals),n,!0)},mo=()=>(0,d.useSelector)(ze),te=()=>(0,d.useSelector)(qe),ao=()=>{let e=(0,d.useSelector)(ye),o=(0,d.useSelector)(We);return o===-1?e.currencyId:o},so=()=>{let e=(0,d.useSelector)(Ge),{baseCoin:o}=f();return e===-1?o.coinId:e},se=()=>(0,d.useSelector)(Ye),fo=()=>(0,d.useSelector)(je);t();s();var W=c(g()),lo=c(P());var po=()=>{let e=(0,lo.useHistory)(),o=(0,W.useSelector)($),n=(0,W.useSelector)(Ve),r=(0,W.useSelector)(L),{coin:i}=f();return async()=>{await Xe(i.localType,{name:n==null?void 0:n.name,type:n==null?void 0:n.type,address:r}),e.push(o)}};var Po="DontShowError";function Un(){let e=(0,Co.useSelector)(X),o=mo(),n=te();return!!e.key||!!e.text||o||n}function Vn(e){let[o,{setTrue:n,setFalse:r}]=Ne(),i=po();return{loading:o,onClick:async(...u)=>{var l,p,C;n();try{if(!await eo()){r();return}e&&(await e(...u),await i())}catch(m){if((m==null?void 0:m.message)===Te||(m==null?void 0:m.message)===Po)r();else{let I=((l=m==null?void 0:m.data)==null?void 0:l.msg)||(m==null?void 0:m.msg)||((C=(p=m==null?void 0:m.data)==null?void 0:p.originalError)==null?void 0:C.msg)||fe("wallet_home_toast_network_error");pe.error({title:I})}}r()}}}t();s();t();s();var O=c(_());var D=Symbol("UNSET_INPUT");function Oo(){let[e,o]=(0,O.useState)(D),n=K(e);return(0,O.useEffect)(()=>{Je(e!==D)},[e]),{latestRequestInputRef:n,setLatestRequestInput:o}}function Uo({domainInputValue:e,coinId:o},n,r=!1){let{latestRequestInputRef:i,setLatestRequestInput:u}=Oo(),l=K(e),{run:p,cancel:C}=Be(m=>{ke({coinId:o,domain:m}).then(({data:A})=>{m===l.current&&(A==null?void 0:A.address)&&n({address:A==null?void 0:A.address,domain:m})}).catch(A=>{console.log(A)}).finally(()=>{i.current===m&&u(D)})},{wait:800});return(0,O.useEffect)(()=>(e.indexOf(".")!==-1&&!r?(u(e),p(e)):u(D),()=>{C&&C()}),[e,r]),{loading:i.current!==D,abort:()=>{C&&C(),u(D)}}}var Vo=Uo;t();s();var Ao=c(P());function Mo(){let e=(0,Ao.useHistory)(),o=io();return()=>{e.push(o||Se)}}var Ho=Mo;t();s();var rr=()=>{let e=R(),{baseCoin:o}=f(),n=ve(o.localType);return o.localType?e||n:""};t();s();var U=c(g());var xo=c(P());function lr(){return(0,U.useSelector)(Pe)}function pr(){let e=(0,U.useSelector)(Oe),o=(0,U.useSelector)(L),n=(0,U.useSelector)(Ue);return!o||e||!!n.key}function dr(){let e=b(),o=(0,xo.useHistory)(),n=R();return T(()=>{let r={pathname:`${G}/${e}${be}`};n&&(r.search=`?from=${n}`),o.push(r)})}t();s();t();s();var k=c(_());function Go(e,o){let[n,r]=(0,k.useState)(0),i=(0,k.useRef)(0);Array.isArray(o)&&(o={override:!1,fns:o});let u=o!=null&&o.override?(o==null?void 0:o.fns)||[]:[...e||[],...(o==null?void 0:o.fns)||[]],l=(0,k.useCallback)((p,C)=>{(async()=>{let A=++i.current;r(I=>I+1);try{let I={key:"",args:{}};for(let Lo of u){let ae=await Lo(p);if(ae){I=ae;break}}A===i.current&&C(I)}finally{r(I=>I-1)}})()},u);return{isCheckingError:n>0,runErrorFns:l}}function Ir(e,o,n){let r=x();Le(()=>{(async()=>{n||e(r,o)})()},[e,r,n],{wait:100})}var V=Go;t();s();t();s();var F=c(vo());var Eo=c(Do());ko();async function Fo(e,o,n=""){let r=!1,{validAddress:i}=await ge();try{r=(await i(o,{address:e,hrp:n})).isValid}catch{return r}return r}async function Y(e,o,n=""){var r;return Fo(e,(r=de({coinId:o}))==null?void 0:r.coinType,n)}async function Nr(e){return Y(e,Ae)}async function Br(e){return Y(e,Ce)}async function $o(e,o){let n=await Fo(e,Eo.Currency.BTC);return n?o===J.SEGWIT_TAPROOT?{isValid:/^(bc1p)/.test(e),addressType:o}:{isValid:n,addressType:o}:{isValid:n,addressType:o}}async function Lr(e){return $o(e,J.SEGWIT_TAPROOT)}function Rr(e,{allowNonPrefixed:o=!0,mixedCaseUseChecksum:n=!1}={}){let r=o?(0,F.addHexPrefix)(e):e;if(!(0,F.isHexString)(r))return!1;if(n){let i=r.slice(2),u=i.toLowerCase(),l=i.toUpperCase();if(!(i===u||i===l))return(0,F.isValidChecksumAddress)(r)}return(0,F.isValidAddress)(r)}function qo(){return T(e=>e?null:{key:"wallet_transfer_errortip_receive_address_empty",args:{}})}function zo(){let{baseCoin:e}=f();return T(async o=>await Y(o,e.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}})}function Ur(){let e=qo(),o=zo();return[e,o]}t();s();y();t();s();var Io=c(g());var go=c(_());y();var Zo=e=>{let o=we(e),n=(0,Io.useSelector)(De);return(0,go.useCallback)((r,i,u)=>{let{useApproximate:l=!0}=u||{},p=n[r];return he(h(i,h(p,o.usdToThisRate)),{useApproximate:l,symbol:o.symbol})},[n,o.symbol])},ho=Zo;var v=c(_()),yo=c(g());function Wo(){let{coin:e}=f(),o=me();return(0,v.useCallback)(()=>e.baseCoinId===0&&N(o,0)?{key:"wallet_extension_transaction_input_error_insufficient_gas_fee",args:{chainSymbol:e.symbol},type:B.FEE_BALANCE_INSUFFICIENT}:null,[o])}function ie(){let e=ce();return(0,v.useCallback)(o=>j(o,e)?{key:"wallet_transfer_errortip_insufficient_balance",args:{},type:B.BALANCE_INSUFFICIENT}:null,[e])}function ue(){let e=ao(),o=ro(),n=ho(e),{coin:r}=f(),i=me();return(0,v.useCallback)(u=>{if(j(u,i)){let l=n(r.coinId,i,{useApproximate:!1}),p=`${o(i,r,{useApproximate:!1})} ${r.symbol}`;return{key:"wallet_extension_send_text_max_price",args:{fiatamount:l,cryptoamount:p},type:B.BALANCE_INSUFFICIENT}}return null},[i])}var nt=e=>{let o=(0,yo.useDispatch)(),n=Wo(),r=ie(),i=ue(),u=[n,r,i],{runErrorFns:l}=V(u,e),p=x();(0,v.useEffect)(()=>{l(p,C=>{o(Ke(C))})},[l,p])};t();s();var To=c(g());var w=c(_());y();t();s();var M={AMOUNT:"amount",FEE:"fee"};function Yo(){let e=E(),o=So();return(0,w.useCallback)(()=>N(o,0)?{key:"wallet_extension_popup_insufficient_network_fee",args:{token:e.symbol},type:B.FEE_BALANCE_INSUFFICIENT,highlight:M.FEE}:null,[o,e.symbol])}function jo(){let e=ie();return(0,w.useCallback)(o=>{let n=e(o);return n?{...n,highlight:M.AMOUNT}:null},[e])}function Jo(){let e=ue();return(0,w.useCallback)(o=>{let n=e(o);return n?{...n,highlight:M.AMOUNT}:null},[e])}function Ct(e){let o=(0,To.useDispatch)(),n=Yo(),r=jo(),i=Jo(),u=[n,r,i],{runErrorFns:l}=V(u,e),p=x();(0,w.useEffect)(()=>{l(p,C=>{o(Qe(C))})},[l,p])}t();s();var bo=c(P());y();var _o=c(le());function Dt(){let e=uo(),o=x();return!!e.key||(0,_o.isNil)(o)||o===""||N(o,0)}function kt(){let e=b(),o=(0,bo.useHistory)(),n=R();return T(()=>{let r={pathname:`${G}/${e}${_e}`};n&&(r.search=`?from=${n}`),o.push(r)})}t();s();y();var No=()=>{let e=b();return ee(e)},Gt=()=>{let e=S(),o=No(),{coin:n}=f();return e(q(o,n.decimals),n,!1)},Bo=()=>{let e=No(),o=se();return o===null?e:o},ce=()=>{let e=S(),o=Bo(),{coin:n}=f();return e(q(o,n.decimals),n,!1)},Ko=()=>{let{coin:e}=f(),o=E(),n=ne(),r=Bo();return e.coinId===o.coinId?H(r,n):r},me=()=>{let{coin:e}=f(),o=E(),n=re(),r=ce();return e.coinId===o.coinId?H(r,n):r},Qo=()=>{let e=E();return ee(e.coinId)},Xo=()=>{let{coin:e}=f(),o=E(),n=Qo(),r=fo(),i=se();return r!==null?r:e.coinId===o.coinId&&i!==null?i:n},en=()=>{let e=S(),o=Xo(),n=E();return e(q(o,n.decimals),n,!1)},So=()=>{let e=en(),o=re();return H(e,o)},$t=()=>{let{coin:e}=f(),o=co(),n=x(),r=Ko();return o?r:h(n,10**e.decimals)};t();s();t();s();var on=c(g());export{Vo as a,wo as b,R as c,ro as d,b as e,f,E as g,Fn as h,x as i,uo as j,In as k,co as l,ne as m,re as n,mo as o,te as p,ao as q,so as r,se as s,fo as t,Ho as u,rr as v,lr as w,pr as x,dr as y,Ir as z,V as A,Y as B,Nr as C,Br as D,$o as E,Lr as F,Rr as G,qo as H,zo as I,Ur as J,Wo as K,ie as L,nt as M,M as N,Yo as O,jo as P,Ct as Q,Dt as R,kt as S,No as T,Gt as U,Bo as V,ce as W,me as X,Qo as Y,Xo as Z,So as _,$t as $,Po as aa,Un as ba,Vn as ca};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-HE77KLJ4.js.map
