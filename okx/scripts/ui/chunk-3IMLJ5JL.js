import{a as he}from"./chunk-YG4ZGSDO.js";import{a as li,b as ci}from"./chunk-HCW4K7TR.js";import{a as Re}from"./chunk-TW6D7CWA.js";import{d as ui}from"./chunk-GKHVFCKF.js";import{c as yt,m as k,n as _,o as T}from"./chunk-6V2G2Z5W.js";var Ct=yt(gt=>{"use strict";k();T();Object.defineProperty(gt,"__esModule",{value:!0});gt.numberToBuffer=gt.normalize=gt.recoverPublicKey=gt.concatSig=gt.legacyToBuffer=gt.isNullish=gt.padWithZeroes=void 0;var Bt=he(),Ke=Re();function Ve(r,o){if(r!==""&&!/^[a-f0-9]+$/iu.test(r))throw new Error(`Expected an unprefixed hex string. Received: ${r}`);if(o<0)throw new Error(`Expected a non-negative integer target length. Received: ${o}`);return String.prototype.padStart.call(r,o,"0")}gt.padWithZeroes=Ve;function di(r){return r==null}gt.isNullish=di;function pi(r){return typeof r=="string"&&!(0,Ke.isHexString)(r)?_.Buffer.from(r):(0,Bt.toBuffer)(r)}gt.legacyToBuffer=pi;function mi(r,o,n){let p=(0,Bt.fromSigned)(o),f=(0,Bt.fromSigned)(n),v=(0,Bt.bufferToInt)(r),g=Ve((0,Bt.toUnsigned)(p).toString("hex"),64),b=Ve((0,Bt.toUnsigned)(f).toString("hex"),64),E=(0,Ke.stripHexPrefix)((0,Ke.intToHex)(v));return(0,Bt.addHexPrefix)(g.concat(b,E))}gt.concatSig=mi;function vi(r,o){let n=(0,Bt.fromRpcSig)(o);return(0,Bt.ecrecover)(r,n.v,n.r,n.s)}gt.recoverPublicKey=vi;function gi(r){if(!!r){if(typeof r=="number"){if(r<0)return"0x";let o=(0,Bt.toBuffer)(r);r=(0,Bt.bufferToHex)(o)}if(typeof r!="string"){let o="eth-sig-util.normalize() requires hex string or integer input.";throw o+=` received ${typeof r}: ${r}`,new Error(o)}return(0,Bt.addHexPrefix)(r.toLowerCase())}}gt.normalize=gi;function yi(r){let o=r.toString(16),n=o.length%2?"0":"";return _.Buffer.from(n+o,"hex")}gt.numberToBuffer=yi});var Br=yt(Ut=>{"use strict";k();T();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.extractPublicKey=Ut.recoverPersonalSignature=Ut.personalSign=void 0;var Jt=he(),Ot=Ct();function wi({privateKey:r,data:o}){if((0,Ot.isNullish)(o))throw new Error("Missing data parameter");if((0,Ot.isNullish)(r))throw new Error("Missing privateKey parameter");let n=(0,Ot.legacyToBuffer)(o),p=(0,Jt.hashPersonalMessage)(n),f=(0,Jt.ecsign)(p,r);return(0,Ot.concatSig)((0,Jt.toBuffer)(f.v),f.r,f.s)}Ut.personalSign=wi;function Mi({data:r,signature:o}){if((0,Ot.isNullish)(r))throw new Error("Missing data parameter");if((0,Ot.isNullish)(o))throw new Error("Missing signature parameter");let n=_r(r,o),p=(0,Jt.publicToAddress)(n);return(0,Jt.bufferToHex)(p)}Ut.recoverPersonalSignature=Mi;function bi({data:r,signature:o}){if((0,Ot.isNullish)(r))throw new Error("Missing data parameter");if((0,Ot.isNullish)(o))throw new Error("Missing signature parameter");return`0x${_r(r,o).toString("hex")}`}Ut.extractPublicKey=bi;function _r(r,o){let n=(0,Jt.hashPersonalMessage)((0,Ot.legacyToBuffer)(r));return(0,Ot.recoverPublicKey)(n,o)}});var Ze=yt(wt=>{"use strict";k();T();Object.defineProperty(wt,"__esModule",{value:!0});wt.output=wt.exists=wt.hash=wt.bytes=wt.bool=wt.number=void 0;function ae(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}wt.number=ae;function Sr(r){if(typeof r!="boolean")throw new Error(`Expected boolean, not ${r}`)}wt.bool=Sr;function ze(r,...o){if(!(r instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(o.length>0&&!o.includes(r.length))throw new TypeError(`Expected Uint8Array of length ${o}, not of length=${r.length}`)}wt.bytes=ze;function kr(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ae(r.outputLen),ae(r.blockLen)}wt.hash=kr;function Tr(r,o=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(o&&r.finished)throw new Error("Hash#digest() has already been called")}wt.exists=Tr;function Er(r,o){ze(r);let n=o.outputLen;if(r.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}wt.output=Er;var xi={number:ae,bool:Sr,bytes:ze,hash:kr,exists:Tr,output:Er};wt.default=xi});var Pr=yt(St=>{"use strict";k();T();Object.defineProperty(St,"__esModule",{value:!0});St.add=St.toBig=St.split=St.fromBig=void 0;var ue=BigInt(2**32-1),We=BigInt(32);function Fe(r,o=!1){return o?{h:Number(r&ue),l:Number(r>>We&ue)}:{h:Number(r>>We&ue)|0,l:Number(r&ue)|0}}St.fromBig=Fe;function Ar(r,o=!1){let n=new Uint32Array(r.length),p=new Uint32Array(r.length);for(let f=0;f<r.length;f++){let{h:v,l:g}=Fe(r[f],o);[n[f],p[f]]=[v,g]}return[n,p]}St.split=Ar;var _i=(r,o)=>BigInt(r>>>0)<<We|BigInt(o>>>0);St.toBig=_i;var Bi=(r,o,n)=>r>>>n,Si=(r,o,n)=>r<<32-n|o>>>n,ki=(r,o,n)=>r>>>n|o<<32-n,Ti=(r,o,n)=>r<<32-n|o>>>n,Ei=(r,o,n)=>r<<64-n|o>>>n-32,Ai=(r,o,n)=>r>>>n-32|o<<64-n,Oi=(r,o)=>o,Pi=(r,o)=>r,Li=(r,o,n)=>r<<n|o>>>32-n,Hi=(r,o,n)=>o<<n|r>>>32-n,qi=(r,o,n)=>o<<n-32|r>>>64-n,Ni=(r,o,n)=>r<<n-32|o>>>64-n;function Or(r,o,n,p){let f=(o>>>0)+(p>>>0);return{h:r+n+(f/2**32|0)|0,l:f|0}}St.add=Or;var Ii=(r,o,n)=>(r>>>0)+(o>>>0)+(n>>>0),Di=(r,o,n,p)=>o+n+p+(r/2**32|0)|0,$i=(r,o,n,p)=>(r>>>0)+(o>>>0)+(n>>>0)+(p>>>0),Ui=(r,o,n,p,f)=>o+n+p+f+(r/2**32|0)|0,ji=(r,o,n,p,f)=>(r>>>0)+(o>>>0)+(n>>>0)+(p>>>0)+(f>>>0),Ri=(r,o,n,p,f,v)=>o+n+p+f+v+(r/2**32|0)|0,Ki={fromBig:Fe,split:Ar,toBig:St.toBig,shrSH:Bi,shrSL:Si,rotrSH:ki,rotrSL:Ti,rotrBH:Ei,rotrBL:Ai,rotr32H:Oi,rotr32L:Pi,rotlSH:Li,rotlSL:Hi,rotlBH:qi,rotlBL:Ni,add:Or,add3L:Ii,add3H:Di,add4L:$i,add4H:Ui,add5H:Ri,add5L:ji};St.default=Ki});var Lr=yt(le=>{"use strict";k();T();Object.defineProperty(le,"__esModule",{value:!0});le.crypto=void 0;le.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}});var de=yt(B=>{"use strict";k();T();Object.defineProperty(B,"__esModule",{value:!0});B.randomBytes=B.wrapConstructorWithOpts=B.wrapConstructor=B.checkOpts=B.Hash=B.concatBytes=B.toBytes=B.utf8ToBytes=B.asyncLoop=B.nextTick=B.hexToBytes=B.bytesToHex=B.isLE=B.rotr=B.createView=B.u32=B.u8=void 0;var ce=Lr(),Vi=r=>new Uint8Array(r.buffer,r.byteOffset,r.byteLength);B.u8=Vi;var zi=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4));B.u32=zi;var Zi=r=>new DataView(r.buffer,r.byteOffset,r.byteLength);B.createView=Zi;var Wi=(r,o)=>r<<32-o|r>>>o;B.rotr=Wi;B.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!B.isLE)throw new Error("Non little-endian hardware is not supported");var Fi=Array.from({length:256},(r,o)=>o.toString(16).padStart(2,"0"));function Ci(r){if(!(r instanceof Uint8Array))throw new Error("Uint8Array expected");let o="";for(let n=0;n<r.length;n++)o+=Fi[r[n]];return o}B.bytesToHex=Ci;function Ji(r){if(typeof r!="string")throw new TypeError("hexToBytes: expected string, got "+typeof r);if(r.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let o=new Uint8Array(r.length/2);for(let n=0;n<o.length;n++){let p=n*2,f=r.slice(p,p+2),v=Number.parseInt(f,16);if(Number.isNaN(v)||v<0)throw new Error("Invalid byte sequence");o[n]=v}return o}B.hexToBytes=Ji;var Xi=async()=>{};B.nextTick=Xi;async function Gi(r,o,n){let p=Date.now();for(let f=0;f<r;f++){n(f);let v=Date.now()-p;v>=0&&v<o||(await(0,B.nextTick)(),p+=v)}}B.asyncLoop=Gi;function Hr(r){if(typeof r!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof r}`);return new TextEncoder().encode(r)}B.utf8ToBytes=Hr;function Je(r){if(typeof r=="string"&&(r=Hr(r)),!(r instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof r})`);return r}B.toBytes=Je;function Yi(...r){if(!r.every(p=>p instanceof Uint8Array))throw new Error("Uint8Array list expected");if(r.length===1)return r[0];let o=r.reduce((p,f)=>p+f.length,0),n=new Uint8Array(o);for(let p=0,f=0;p<r.length;p++){let v=r[p];n.set(v,f),f+=v.length}return n}B.concatBytes=Yi;var Ce=class{clone(){return this._cloneInto()}};B.Hash=Ce;var Qi=r=>Object.prototype.toString.call(r)==="[object Object]"&&r.constructor===Object;function tn(r,o){if(o!==void 0&&(typeof o!="object"||!Qi(o)))throw new TypeError("Options should be object or undefined");return Object.assign(r,o)}B.checkOpts=tn;function en(r){let o=p=>r().update(Je(p)).digest(),n=r();return o.outputLen=n.outputLen,o.blockLen=n.blockLen,o.create=()=>r(),o}B.wrapConstructor=en;function rn(r){let o=(p,f)=>r(f).update(Je(p)).digest(),n=r({});return o.outputLen=n.outputLen,o.blockLen=n.blockLen,o.create=p=>r(p),o}B.wrapConstructorWithOpts=rn;function nn(r=32){if(ce.crypto.web)return ce.crypto.web.getRandomValues(new Uint8Array(r));if(ce.crypto.node)return new Uint8Array(ce.crypto.node.randomBytes(r).buffer);throw new Error("The environment doesn't have randomBytes function")}B.randomBytes=nn});var Rr=yt(L=>{"use strict";k();T();Object.defineProperty(L,"__esModule",{value:!0});L.shake256=L.shake128=L.keccak_512=L.keccak_384=L.keccak_256=L.keccak_224=L.sha3_512=L.sha3_384=L.sha3_256=L.sha3_224=L.Keccak=L.keccakP=void 0;var Xt=Ze(),ee=Pr(),te=de(),[Ir,Dr,$r]=[[],[],[]],on=BigInt(0),Qt=BigInt(1),sn=BigInt(2),fn=BigInt(7),hn=BigInt(256),an=BigInt(113);for(let r=0,o=Qt,n=1,p=0;r<24;r++){[n,p]=[p,(2*n+3*p)%5],Ir.push(2*(5*p+n)),Dr.push((r+1)*(r+2)/2%64);let f=on;for(let v=0;v<7;v++)o=(o<<Qt^(o>>fn)*an)%hn,o&sn&&(f^=Qt<<(Qt<<BigInt(v))-Qt);$r.push(f)}var[un,ln]=ee.default.split($r,!0),qr=(r,o,n)=>n>32?ee.default.rotlBH(r,o,n):ee.default.rotlSH(r,o,n),Nr=(r,o,n)=>n>32?ee.default.rotlBL(r,o,n):ee.default.rotlSL(r,o,n);function Ur(r,o=24){let n=new Uint32Array(10);for(let p=24-o;p<24;p++){for(let g=0;g<10;g++)n[g]=r[g]^r[g+10]^r[g+20]^r[g+30]^r[g+40];for(let g=0;g<10;g+=2){let b=(g+8)%10,E=(g+2)%10,At=n[E],Dt=n[E+1],we=qr(At,Dt,1)^n[b],se=Nr(At,Dt,1)^n[b+1];for(let Vt=0;Vt<50;Vt+=10)r[g+Vt]^=we,r[g+Vt+1]^=se}let f=r[2],v=r[3];for(let g=0;g<24;g++){let b=Dr[g],E=qr(f,v,b),At=Nr(f,v,b),Dt=Ir[g];f=r[Dt],v=r[Dt+1],r[Dt]=E,r[Dt+1]=At}for(let g=0;g<50;g+=10){for(let b=0;b<10;b++)n[b]=r[g+b];for(let b=0;b<10;b++)r[g+b]^=~n[(b+2)%10]&n[(b+4)%10]}r[0]^=un[p],r[1]^=ln[p]}n.fill(0)}L.keccakP=Ur;var Zt=class extends te.Hash{constructor(o,n,p,f=!1,v=24){if(super(),this.blockLen=o,this.suffix=n,this.outputLen=p,this.enableXOF=f,this.rounds=v,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Xt.default.number(p),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,te.u32)(this.state)}keccak(){Ur(this.state32,this.rounds),this.posOut=0,this.pos=0}update(o){Xt.default.exists(this);let{blockLen:n,state:p}=this;o=(0,te.toBytes)(o);let f=o.length;for(let v=0;v<f;){let g=Math.min(n-this.pos,f-v);for(let b=0;b<g;b++)p[this.pos++]^=o[v++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:o,suffix:n,pos:p,blockLen:f}=this;o[p]^=n,(n&128)!==0&&p===f-1&&this.keccak(),o[f-1]^=128,this.keccak()}writeInto(o){Xt.default.exists(this,!1),Xt.default.bytes(o),this.finish();let n=this.state,{blockLen:p}=this;for(let f=0,v=o.length;f<v;){this.posOut>=p&&this.keccak();let g=Math.min(p-this.posOut,v-f);o.set(n.subarray(this.posOut,this.posOut+g),f),this.posOut+=g,f+=g}return o}xofInto(o){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(o)}xof(o){return Xt.default.number(o),this.xofInto(new Uint8Array(o))}digestInto(o){if(Xt.default.output(o,this),this.finished)throw new Error("digest() was already called");return this.writeInto(o),this.destroy(),o}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(o){let{blockLen:n,suffix:p,outputLen:f,rounds:v,enableXOF:g}=this;return o||(o=new Zt(n,p,f,g,v)),o.state32.set(this.state32),o.pos=this.pos,o.posOut=this.posOut,o.finished=this.finished,o.rounds=v,o.suffix=p,o.outputLen=f,o.enableXOF=g,o.destroyed=this.destroyed,o}};L.Keccak=Zt;var jt=(r,o,n)=>(0,te.wrapConstructor)(()=>new Zt(o,r,n));L.sha3_224=jt(6,144,224/8);L.sha3_256=jt(6,136,256/8);L.sha3_384=jt(6,104,384/8);L.sha3_512=jt(6,72,512/8);L.keccak_224=jt(1,144,224/8);L.keccak_256=jt(1,136,256/8);L.keccak_384=jt(1,104,384/8);L.keccak_512=jt(1,72,512/8);var jr=(r,o,n)=>(0,te.wrapConstructorWithOpts)((p={})=>new Zt(o,r,p.dkLen===void 0?n:p.dkLen,!0));L.shake128=jr(31,168,128/8);L.shake256=jr(31,136,256/8)});var Kr=yt((A,re)=>{"use strict";k();T();var cn=A&&A.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(A,"__esModule",{value:!0});A.crypto=A.wrapHash=A.equalsBytes=A.hexToBytes=A.bytesToUtf8=A.utf8ToBytes=A.createView=A.concatBytes=A.toHex=A.bytesToHex=A.assertBytes=A.assertBool=void 0;var Xe=cn(Ze()),dn=de(),pn=Xe.default.bool;A.assertBool=pn;var mn=Xe.default.bytes;A.assertBytes=mn;var ie=de();Object.defineProperty(A,"bytesToHex",{enumerable:!0,get:function(){return ie.bytesToHex}});Object.defineProperty(A,"toHex",{enumerable:!0,get:function(){return ie.bytesToHex}});Object.defineProperty(A,"concatBytes",{enumerable:!0,get:function(){return ie.concatBytes}});Object.defineProperty(A,"createView",{enumerable:!0,get:function(){return ie.createView}});Object.defineProperty(A,"utf8ToBytes",{enumerable:!0,get:function(){return ie.utf8ToBytes}});function vn(r){if(!(r instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof r}`);return new TextDecoder().decode(r)}A.bytesToUtf8=vn;function gn(r){let o=r.startsWith("0x")?r.substring(2):r;return(0,dn.hexToBytes)(o)}A.hexToBytes=gn;function yn(r,o){if(r.length!==o.length)return!1;for(let n=0;n<r.length;n++)if(r[n]!==o[n])return!1;return!0}A.equalsBytes=yn;function wn(r){return o=>(Xe.default.bytes(o),r(o))}A.wrapHash=wn;A.crypto=(()=>{let r=typeof self=="object"&&"crypto"in self?self.crypto:void 0,o=typeof re<"u"&&typeof re.require=="function"&&re.require.bind(re);return{node:o&&!r?o("crypto"):void 0,web:r}})()});var Vr=yt(Pt=>{"use strict";k();T();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.keccak512=Pt.keccak384=Pt.keccak256=Pt.keccak224=void 0;var ne=Rr(),pe=Kr();Pt.keccak224=(0,pe.wrapHash)(ne.keccak_224);Pt.keccak256=(()=>{let r=(0,pe.wrapHash)(ne.keccak_256);return r.create=ne.keccak_256.create,r})();Pt.keccak384=(0,pe.wrapHash)(ne.keccak_384);Pt.keccak512=(0,pe.wrapHash)(ne.keccak_512)});var Zr=yt((zr,Ge)=>{k();T();(function(r,o){"use strict";function n(c,t){if(!c)throw new Error(t||"Assertion failed")}function p(c,t){c.super_=t;var i=function(){};i.prototype=t.prototype,c.prototype=new i,c.prototype.constructor=c}function f(c,t,i){if(f.isBN(c))return c;this.negative=0,this.words=null,this.length=0,this.red=null,c!==null&&((t==="le"||t==="be")&&(i=t,t=10),this._init(c||0,t||10,i||"be"))}typeof r=="object"?r.exports=f:o.BN=f,f.BN=f,f.wordSize=26;var v;try{v=ui().Buffer}catch{}f.isBN=function(t){return t instanceof f?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===f.wordSize&&Array.isArray(t.words)},f.max=function(t,i){return t.cmp(i)>0?t:i},f.min=function(t,i){return t.cmp(i)<0?t:i},f.prototype._init=function(t,i,s){if(typeof t=="number")return this._initNumber(t,i,s);if(typeof t=="object")return this._initArray(t,i,s);i==="hex"&&(i=16),n(i===(i|0)&&i>=2&&i<=36),t=t.toString().replace(/\s+/g,"");var h=0;t[0]==="-"&&h++,i===16?this._parseHex(t,h):this._parseBase(t,i,h),t[0]==="-"&&(this.negative=1),this.strip(),s==="le"&&this._initArray(this.toArray(),i,s)},f.prototype._initNumber=function(t,i,s){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),s==="le"&&this._initArray(this.toArray(),i,s)},f.prototype._initArray=function(t,i,s){if(n(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var l,d,m=0;if(s==="be")for(h=t.length-1,l=0;h>=0;h-=3)d=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[l]|=d<<m&67108863,this.words[l+1]=d>>>26-m&67108863,m+=24,m>=26&&(m-=26,l++);else if(s==="le")for(h=0,l=0;h<t.length;h+=3)d=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[l]|=d<<m&67108863,this.words[l+1]=d>>>26-m&67108863,m+=24,m>=26&&(m-=26,l++);return this.strip()};function g(c,t,i){for(var s=0,h=Math.min(c.length,i),l=t;l<h;l++){var d=c.charCodeAt(l)-48;s<<=4,d>=49&&d<=54?s|=d-49+10:d>=17&&d<=22?s|=d-17+10:s|=d&15}return s}f.prototype._parseHex=function(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var h,l,d=0;for(s=t.length-6,h=0;s>=i;s-=6)l=g(t,s,s+6),this.words[h]|=l<<d&67108863,this.words[h+1]|=l>>>26-d&4194303,d+=24,d>=26&&(d-=26,h++);s+6!==i&&(l=g(t,i,s+6),this.words[h]|=l<<d&67108863,this.words[h+1]|=l>>>26-d&4194303),this.strip()};function b(c,t,i,s){for(var h=0,l=Math.min(c.length,i),d=t;d<l;d++){var m=c.charCodeAt(d)-48;h*=s,m>=49?h+=m-49+10:m>=17?h+=m-17+10:h+=m}return h}f.prototype._parseBase=function(t,i,s){this.words=[0],this.length=1;for(var h=0,l=1;l<=67108863;l*=i)h++;h--,l=l/i|0;for(var d=t.length-s,m=d%h,a=Math.min(d,d-m)+s,e=0,u=s;u<a;u+=h)e=b(t,u,u+h,i),this.imuln(l),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(m!==0){var y=1;for(e=b(t,u,t.length,i),u=0;u<m;u++)y*=i;this.imuln(y),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}},f.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},f.prototype.clone=function(){var t=new f(null);return this.copy(t),t},f.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},f.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},f.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},f.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var E=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],At=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Dt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];f.prototype.toString=function(t,i){t=t||10,i=i|0||1;var s;if(t===16||t==="hex"){s="";for(var h=0,l=0,d=0;d<this.length;d++){var m=this.words[d],a=((m<<h|l)&16777215).toString(16);l=m>>>24-h&16777215,l!==0||d!==this.length-1?s=E[6-a.length]+a+s:s=a+s,h+=2,h>=26&&(h-=26,d--)}for(l!==0&&(s=l.toString(16)+s);s.length%i!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}if(t===(t|0)&&t>=2&&t<=36){var e=At[t],u=Dt[t];s="";var y=this.clone();for(y.negative=0;!y.isZero();){var w=y.modn(u).toString(t);y=y.idivn(u),y.isZero()?s=w+s:s=E[e-w.length]+w+s}for(this.isZero()&&(s="0"+s);s.length%i!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}n(!1,"Base should be between 2 and 36")},f.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},f.prototype.toJSON=function(){return this.toString(16)},f.prototype.toBuffer=function(t,i){return n(typeof v<"u"),this.toArrayLike(v,t,i)},f.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},f.prototype.toArrayLike=function(t,i,s){var h=this.byteLength(),l=s||Math.max(1,h);n(h<=l,"byte array longer than desired length"),n(l>0,"Requested array length <= 0"),this.strip();var d=i==="le",m=new t(l),a,e,u=this.clone();if(d){for(e=0;!u.isZero();e++)a=u.andln(255),u.iushrn(8),m[e]=a;for(;e<l;e++)m[e]=0}else{for(e=0;e<l-h;e++)m[e]=0;for(e=0;!u.isZero();e++)a=u.andln(255),u.iushrn(8),m[l-e-1]=a}return m},Math.clz32?f.prototype._countBits=function(t){return 32-Math.clz32(t)}:f.prototype._countBits=function(t){var i=t,s=0;return i>=4096&&(s+=13,i>>>=13),i>=64&&(s+=7,i>>>=7),i>=8&&(s+=4,i>>>=4),i>=2&&(s+=2,i>>>=2),s+i},f.prototype._zeroBits=function(t){if(t===0)return 26;var i=t,s=0;return(i&8191)===0&&(s+=13,i>>>=13),(i&127)===0&&(s+=7,i>>>=7),(i&15)===0&&(s+=4,i>>>=4),(i&3)===0&&(s+=2,i>>>=2),(i&1)===0&&s++,s},f.prototype.bitLength=function(){var t=this.words[this.length-1],i=this._countBits(t);return(this.length-1)*26+i};function we(c){for(var t=new Array(c.bitLength()),i=0;i<t.length;i++){var s=i/26|0,h=i%26;t[i]=(c.words[s]&1<<h)>>>h}return t}f.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var s=this._zeroBits(this.words[i]);if(t+=s,s!==26)break}return t},f.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},f.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},f.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},f.prototype.isNeg=function(){return this.negative!==0},f.prototype.neg=function(){return this.clone().ineg()},f.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},f.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.strip()},f.prototype.ior=function(t){return n((this.negative|t.negative)===0),this.iuor(t)},f.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},f.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},f.prototype.iuand=function(t){var i;this.length>t.length?i=t:i=this;for(var s=0;s<i.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=i.length,this.strip()},f.prototype.iand=function(t){return n((this.negative|t.negative)===0),this.iuand(t)},f.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},f.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},f.prototype.iuxor=function(t){var i,s;this.length>t.length?(i=this,s=t):(i=t,s=this);for(var h=0;h<s.length;h++)this.words[h]=i.words[h]^s.words[h];if(this!==i)for(;h<i.length;h++)this.words[h]=i.words[h];return this.length=i.length,this.strip()},f.prototype.ixor=function(t){return n((this.negative|t.negative)===0),this.iuxor(t)},f.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},f.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},f.prototype.inotn=function(t){n(typeof t=="number"&&t>=0);var i=Math.ceil(t/26)|0,s=t%26;this._expand(i),s>0&&i--;for(var h=0;h<i;h++)this.words[h]=~this.words[h]&67108863;return s>0&&(this.words[h]=~this.words[h]&67108863>>26-s),this.strip()},f.prototype.notn=function(t){return this.clone().inotn(t)},f.prototype.setn=function(t,i){n(typeof t=="number"&&t>=0);var s=t/26|0,h=t%26;return this._expand(s+1),i?this.words[s]=this.words[s]|1<<h:this.words[s]=this.words[s]&~(1<<h),this.strip()},f.prototype.iadd=function(t){var i;if(this.negative!==0&&t.negative===0)return this.negative=0,i=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,i=this.isub(t),t.negative=1,i._normSign();var s,h;this.length>t.length?(s=this,h=t):(s=t,h=this);for(var l=0,d=0;d<h.length;d++)i=(s.words[d]|0)+(h.words[d]|0)+l,this.words[d]=i&67108863,l=i>>>26;for(;l!==0&&d<s.length;d++)i=(s.words[d]|0)+l,this.words[d]=i&67108863,l=i>>>26;if(this.length=s.length,l!==0)this.words[this.length]=l,this.length++;else if(s!==this)for(;d<s.length;d++)this.words[d]=s.words[d];return this},f.prototype.add=function(t){var i;return t.negative!==0&&this.negative===0?(t.negative=0,i=this.sub(t),t.negative^=1,i):t.negative===0&&this.negative!==0?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},f.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var i=this.iadd(t);return t.negative=1,i._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var s=this.cmp(t);if(s===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,l;s>0?(h=this,l=t):(h=t,l=this);for(var d=0,m=0;m<l.length;m++)i=(h.words[m]|0)-(l.words[m]|0)+d,d=i>>26,this.words[m]=i&67108863;for(;d!==0&&m<h.length;m++)i=(h.words[m]|0)+d,d=i>>26,this.words[m]=i&67108863;if(d===0&&m<h.length&&h!==this)for(;m<h.length;m++)this.words[m]=h.words[m];return this.length=Math.max(this.length,m),h!==this&&(this.negative=1),this.strip()},f.prototype.sub=function(t){return this.clone().isub(t)};function se(c,t,i){i.negative=t.negative^c.negative;var s=c.length+t.length|0;i.length=s,s=s-1|0;var h=c.words[0]|0,l=t.words[0]|0,d=h*l,m=d&67108863,a=d/67108864|0;i.words[0]=m;for(var e=1;e<s;e++){for(var u=a>>>26,y=a&67108863,w=Math.min(e,t.length-1),M=Math.max(0,e-c.length+1);M<=w;M++){var x=e-M|0;h=c.words[x]|0,l=t.words[M]|0,d=h*l+y,u+=d/67108864|0,y=d&67108863}i.words[e]=y|0,a=u|0}return a!==0?i.words[e]=a|0:i.length--,i.strip()}var Vt=function(t,i,s){var h=t.words,l=i.words,d=s.words,m=0,a,e,u,y=h[0]|0,w=y&8191,M=y>>>13,x=h[1]|0,S=x&8191,O=x>>>13,$t=h[2]|0,P=$t&8191,H=$t>>>13,sr=h[3]|0,N=sr&8191,I=sr>>>13,fr=h[4]|0,D=fr&8191,$=fr>>>13,hr=h[5]|0,U=hr&8191,j=hr>>>13,ar=h[6]|0,R=ar&8191,K=ar>>>13,ur=h[7]|0,V=ur&8191,z=ur>>>13,lr=h[8]|0,Z=lr&8191,W=lr>>>13,cr=h[9]|0,F=cr&8191,C=cr>>>13,dr=l[0]|0,J=dr&8191,X=dr>>>13,pr=l[1]|0,G=pr&8191,Y=pr>>>13,mr=l[2]|0,Q=mr&8191,tt=mr>>>13,vr=l[3]|0,et=vr&8191,rt=vr>>>13,gr=l[4]|0,it=gr&8191,nt=gr>>>13,yr=l[5]|0,ot=yr&8191,st=yr>>>13,wr=l[6]|0,ft=wr&8191,ht=wr>>>13,Mr=l[7]|0,at=Mr&8191,ut=Mr>>>13,br=l[8]|0,lt=br&8191,ct=br>>>13,xr=l[9]|0,dt=xr&8191,pt=xr>>>13;s.negative=t.negative^i.negative,s.length=19,a=Math.imul(w,J),e=Math.imul(w,X),e=e+Math.imul(M,J)|0,u=Math.imul(M,X);var xe=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(xe>>>26)|0,xe&=67108863,a=Math.imul(S,J),e=Math.imul(S,X),e=e+Math.imul(O,J)|0,u=Math.imul(O,X),a=a+Math.imul(w,G)|0,e=e+Math.imul(w,Y)|0,e=e+Math.imul(M,G)|0,u=u+Math.imul(M,Y)|0;var _e=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(_e>>>26)|0,_e&=67108863,a=Math.imul(P,J),e=Math.imul(P,X),e=e+Math.imul(H,J)|0,u=Math.imul(H,X),a=a+Math.imul(S,G)|0,e=e+Math.imul(S,Y)|0,e=e+Math.imul(O,G)|0,u=u+Math.imul(O,Y)|0,a=a+Math.imul(w,Q)|0,e=e+Math.imul(w,tt)|0,e=e+Math.imul(M,Q)|0,u=u+Math.imul(M,tt)|0;var Be=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Be>>>26)|0,Be&=67108863,a=Math.imul(N,J),e=Math.imul(N,X),e=e+Math.imul(I,J)|0,u=Math.imul(I,X),a=a+Math.imul(P,G)|0,e=e+Math.imul(P,Y)|0,e=e+Math.imul(H,G)|0,u=u+Math.imul(H,Y)|0,a=a+Math.imul(S,Q)|0,e=e+Math.imul(S,tt)|0,e=e+Math.imul(O,Q)|0,u=u+Math.imul(O,tt)|0,a=a+Math.imul(w,et)|0,e=e+Math.imul(w,rt)|0,e=e+Math.imul(M,et)|0,u=u+Math.imul(M,rt)|0;var Se=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Se>>>26)|0,Se&=67108863,a=Math.imul(D,J),e=Math.imul(D,X),e=e+Math.imul($,J)|0,u=Math.imul($,X),a=a+Math.imul(N,G)|0,e=e+Math.imul(N,Y)|0,e=e+Math.imul(I,G)|0,u=u+Math.imul(I,Y)|0,a=a+Math.imul(P,Q)|0,e=e+Math.imul(P,tt)|0,e=e+Math.imul(H,Q)|0,u=u+Math.imul(H,tt)|0,a=a+Math.imul(S,et)|0,e=e+Math.imul(S,rt)|0,e=e+Math.imul(O,et)|0,u=u+Math.imul(O,rt)|0,a=a+Math.imul(w,it)|0,e=e+Math.imul(w,nt)|0,e=e+Math.imul(M,it)|0,u=u+Math.imul(M,nt)|0;var ke=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(ke>>>26)|0,ke&=67108863,a=Math.imul(U,J),e=Math.imul(U,X),e=e+Math.imul(j,J)|0,u=Math.imul(j,X),a=a+Math.imul(D,G)|0,e=e+Math.imul(D,Y)|0,e=e+Math.imul($,G)|0,u=u+Math.imul($,Y)|0,a=a+Math.imul(N,Q)|0,e=e+Math.imul(N,tt)|0,e=e+Math.imul(I,Q)|0,u=u+Math.imul(I,tt)|0,a=a+Math.imul(P,et)|0,e=e+Math.imul(P,rt)|0,e=e+Math.imul(H,et)|0,u=u+Math.imul(H,rt)|0,a=a+Math.imul(S,it)|0,e=e+Math.imul(S,nt)|0,e=e+Math.imul(O,it)|0,u=u+Math.imul(O,nt)|0,a=a+Math.imul(w,ot)|0,e=e+Math.imul(w,st)|0,e=e+Math.imul(M,ot)|0,u=u+Math.imul(M,st)|0;var Te=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Te>>>26)|0,Te&=67108863,a=Math.imul(R,J),e=Math.imul(R,X),e=e+Math.imul(K,J)|0,u=Math.imul(K,X),a=a+Math.imul(U,G)|0,e=e+Math.imul(U,Y)|0,e=e+Math.imul(j,G)|0,u=u+Math.imul(j,Y)|0,a=a+Math.imul(D,Q)|0,e=e+Math.imul(D,tt)|0,e=e+Math.imul($,Q)|0,u=u+Math.imul($,tt)|0,a=a+Math.imul(N,et)|0,e=e+Math.imul(N,rt)|0,e=e+Math.imul(I,et)|0,u=u+Math.imul(I,rt)|0,a=a+Math.imul(P,it)|0,e=e+Math.imul(P,nt)|0,e=e+Math.imul(H,it)|0,u=u+Math.imul(H,nt)|0,a=a+Math.imul(S,ot)|0,e=e+Math.imul(S,st)|0,e=e+Math.imul(O,ot)|0,u=u+Math.imul(O,st)|0,a=a+Math.imul(w,ft)|0,e=e+Math.imul(w,ht)|0,e=e+Math.imul(M,ft)|0,u=u+Math.imul(M,ht)|0;var Ee=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,a=Math.imul(V,J),e=Math.imul(V,X),e=e+Math.imul(z,J)|0,u=Math.imul(z,X),a=a+Math.imul(R,G)|0,e=e+Math.imul(R,Y)|0,e=e+Math.imul(K,G)|0,u=u+Math.imul(K,Y)|0,a=a+Math.imul(U,Q)|0,e=e+Math.imul(U,tt)|0,e=e+Math.imul(j,Q)|0,u=u+Math.imul(j,tt)|0,a=a+Math.imul(D,et)|0,e=e+Math.imul(D,rt)|0,e=e+Math.imul($,et)|0,u=u+Math.imul($,rt)|0,a=a+Math.imul(N,it)|0,e=e+Math.imul(N,nt)|0,e=e+Math.imul(I,it)|0,u=u+Math.imul(I,nt)|0,a=a+Math.imul(P,ot)|0,e=e+Math.imul(P,st)|0,e=e+Math.imul(H,ot)|0,u=u+Math.imul(H,st)|0,a=a+Math.imul(S,ft)|0,e=e+Math.imul(S,ht)|0,e=e+Math.imul(O,ft)|0,u=u+Math.imul(O,ht)|0,a=a+Math.imul(w,at)|0,e=e+Math.imul(w,ut)|0,e=e+Math.imul(M,at)|0,u=u+Math.imul(M,ut)|0;var Ae=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,a=Math.imul(Z,J),e=Math.imul(Z,X),e=e+Math.imul(W,J)|0,u=Math.imul(W,X),a=a+Math.imul(V,G)|0,e=e+Math.imul(V,Y)|0,e=e+Math.imul(z,G)|0,u=u+Math.imul(z,Y)|0,a=a+Math.imul(R,Q)|0,e=e+Math.imul(R,tt)|0,e=e+Math.imul(K,Q)|0,u=u+Math.imul(K,tt)|0,a=a+Math.imul(U,et)|0,e=e+Math.imul(U,rt)|0,e=e+Math.imul(j,et)|0,u=u+Math.imul(j,rt)|0,a=a+Math.imul(D,it)|0,e=e+Math.imul(D,nt)|0,e=e+Math.imul($,it)|0,u=u+Math.imul($,nt)|0,a=a+Math.imul(N,ot)|0,e=e+Math.imul(N,st)|0,e=e+Math.imul(I,ot)|0,u=u+Math.imul(I,st)|0,a=a+Math.imul(P,ft)|0,e=e+Math.imul(P,ht)|0,e=e+Math.imul(H,ft)|0,u=u+Math.imul(H,ht)|0,a=a+Math.imul(S,at)|0,e=e+Math.imul(S,ut)|0,e=e+Math.imul(O,at)|0,u=u+Math.imul(O,ut)|0,a=a+Math.imul(w,lt)|0,e=e+Math.imul(w,ct)|0,e=e+Math.imul(M,lt)|0,u=u+Math.imul(M,ct)|0;var Oe=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,a=Math.imul(F,J),e=Math.imul(F,X),e=e+Math.imul(C,J)|0,u=Math.imul(C,X),a=a+Math.imul(Z,G)|0,e=e+Math.imul(Z,Y)|0,e=e+Math.imul(W,G)|0,u=u+Math.imul(W,Y)|0,a=a+Math.imul(V,Q)|0,e=e+Math.imul(V,tt)|0,e=e+Math.imul(z,Q)|0,u=u+Math.imul(z,tt)|0,a=a+Math.imul(R,et)|0,e=e+Math.imul(R,rt)|0,e=e+Math.imul(K,et)|0,u=u+Math.imul(K,rt)|0,a=a+Math.imul(U,it)|0,e=e+Math.imul(U,nt)|0,e=e+Math.imul(j,it)|0,u=u+Math.imul(j,nt)|0,a=a+Math.imul(D,ot)|0,e=e+Math.imul(D,st)|0,e=e+Math.imul($,ot)|0,u=u+Math.imul($,st)|0,a=a+Math.imul(N,ft)|0,e=e+Math.imul(N,ht)|0,e=e+Math.imul(I,ft)|0,u=u+Math.imul(I,ht)|0,a=a+Math.imul(P,at)|0,e=e+Math.imul(P,ut)|0,e=e+Math.imul(H,at)|0,u=u+Math.imul(H,ut)|0,a=a+Math.imul(S,lt)|0,e=e+Math.imul(S,ct)|0,e=e+Math.imul(O,lt)|0,u=u+Math.imul(O,ct)|0,a=a+Math.imul(w,dt)|0,e=e+Math.imul(w,pt)|0,e=e+Math.imul(M,dt)|0,u=u+Math.imul(M,pt)|0;var Pe=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,a=Math.imul(F,G),e=Math.imul(F,Y),e=e+Math.imul(C,G)|0,u=Math.imul(C,Y),a=a+Math.imul(Z,Q)|0,e=e+Math.imul(Z,tt)|0,e=e+Math.imul(W,Q)|0,u=u+Math.imul(W,tt)|0,a=a+Math.imul(V,et)|0,e=e+Math.imul(V,rt)|0,e=e+Math.imul(z,et)|0,u=u+Math.imul(z,rt)|0,a=a+Math.imul(R,it)|0,e=e+Math.imul(R,nt)|0,e=e+Math.imul(K,it)|0,u=u+Math.imul(K,nt)|0,a=a+Math.imul(U,ot)|0,e=e+Math.imul(U,st)|0,e=e+Math.imul(j,ot)|0,u=u+Math.imul(j,st)|0,a=a+Math.imul(D,ft)|0,e=e+Math.imul(D,ht)|0,e=e+Math.imul($,ft)|0,u=u+Math.imul($,ht)|0,a=a+Math.imul(N,at)|0,e=e+Math.imul(N,ut)|0,e=e+Math.imul(I,at)|0,u=u+Math.imul(I,ut)|0,a=a+Math.imul(P,lt)|0,e=e+Math.imul(P,ct)|0,e=e+Math.imul(H,lt)|0,u=u+Math.imul(H,ct)|0,a=a+Math.imul(S,dt)|0,e=e+Math.imul(S,pt)|0,e=e+Math.imul(O,dt)|0,u=u+Math.imul(O,pt)|0;var Le=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Le>>>26)|0,Le&=67108863,a=Math.imul(F,Q),e=Math.imul(F,tt),e=e+Math.imul(C,Q)|0,u=Math.imul(C,tt),a=a+Math.imul(Z,et)|0,e=e+Math.imul(Z,rt)|0,e=e+Math.imul(W,et)|0,u=u+Math.imul(W,rt)|0,a=a+Math.imul(V,it)|0,e=e+Math.imul(V,nt)|0,e=e+Math.imul(z,it)|0,u=u+Math.imul(z,nt)|0,a=a+Math.imul(R,ot)|0,e=e+Math.imul(R,st)|0,e=e+Math.imul(K,ot)|0,u=u+Math.imul(K,st)|0,a=a+Math.imul(U,ft)|0,e=e+Math.imul(U,ht)|0,e=e+Math.imul(j,ft)|0,u=u+Math.imul(j,ht)|0,a=a+Math.imul(D,at)|0,e=e+Math.imul(D,ut)|0,e=e+Math.imul($,at)|0,u=u+Math.imul($,ut)|0,a=a+Math.imul(N,lt)|0,e=e+Math.imul(N,ct)|0,e=e+Math.imul(I,lt)|0,u=u+Math.imul(I,ct)|0,a=a+Math.imul(P,dt)|0,e=e+Math.imul(P,pt)|0,e=e+Math.imul(H,dt)|0,u=u+Math.imul(H,pt)|0;var He=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(He>>>26)|0,He&=67108863,a=Math.imul(F,et),e=Math.imul(F,rt),e=e+Math.imul(C,et)|0,u=Math.imul(C,rt),a=a+Math.imul(Z,it)|0,e=e+Math.imul(Z,nt)|0,e=e+Math.imul(W,it)|0,u=u+Math.imul(W,nt)|0,a=a+Math.imul(V,ot)|0,e=e+Math.imul(V,st)|0,e=e+Math.imul(z,ot)|0,u=u+Math.imul(z,st)|0,a=a+Math.imul(R,ft)|0,e=e+Math.imul(R,ht)|0,e=e+Math.imul(K,ft)|0,u=u+Math.imul(K,ht)|0,a=a+Math.imul(U,at)|0,e=e+Math.imul(U,ut)|0,e=e+Math.imul(j,at)|0,u=u+Math.imul(j,ut)|0,a=a+Math.imul(D,lt)|0,e=e+Math.imul(D,ct)|0,e=e+Math.imul($,lt)|0,u=u+Math.imul($,ct)|0,a=a+Math.imul(N,dt)|0,e=e+Math.imul(N,pt)|0,e=e+Math.imul(I,dt)|0,u=u+Math.imul(I,pt)|0;var qe=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(qe>>>26)|0,qe&=67108863,a=Math.imul(F,it),e=Math.imul(F,nt),e=e+Math.imul(C,it)|0,u=Math.imul(C,nt),a=a+Math.imul(Z,ot)|0,e=e+Math.imul(Z,st)|0,e=e+Math.imul(W,ot)|0,u=u+Math.imul(W,st)|0,a=a+Math.imul(V,ft)|0,e=e+Math.imul(V,ht)|0,e=e+Math.imul(z,ft)|0,u=u+Math.imul(z,ht)|0,a=a+Math.imul(R,at)|0,e=e+Math.imul(R,ut)|0,e=e+Math.imul(K,at)|0,u=u+Math.imul(K,ut)|0,a=a+Math.imul(U,lt)|0,e=e+Math.imul(U,ct)|0,e=e+Math.imul(j,lt)|0,u=u+Math.imul(j,ct)|0,a=a+Math.imul(D,dt)|0,e=e+Math.imul(D,pt)|0,e=e+Math.imul($,dt)|0,u=u+Math.imul($,pt)|0;var Ne=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,a=Math.imul(F,ot),e=Math.imul(F,st),e=e+Math.imul(C,ot)|0,u=Math.imul(C,st),a=a+Math.imul(Z,ft)|0,e=e+Math.imul(Z,ht)|0,e=e+Math.imul(W,ft)|0,u=u+Math.imul(W,ht)|0,a=a+Math.imul(V,at)|0,e=e+Math.imul(V,ut)|0,e=e+Math.imul(z,at)|0,u=u+Math.imul(z,ut)|0,a=a+Math.imul(R,lt)|0,e=e+Math.imul(R,ct)|0,e=e+Math.imul(K,lt)|0,u=u+Math.imul(K,ct)|0,a=a+Math.imul(U,dt)|0,e=e+Math.imul(U,pt)|0,e=e+Math.imul(j,dt)|0,u=u+Math.imul(j,pt)|0;var Ie=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,a=Math.imul(F,ft),e=Math.imul(F,ht),e=e+Math.imul(C,ft)|0,u=Math.imul(C,ht),a=a+Math.imul(Z,at)|0,e=e+Math.imul(Z,ut)|0,e=e+Math.imul(W,at)|0,u=u+Math.imul(W,ut)|0,a=a+Math.imul(V,lt)|0,e=e+Math.imul(V,ct)|0,e=e+Math.imul(z,lt)|0,u=u+Math.imul(z,ct)|0,a=a+Math.imul(R,dt)|0,e=e+Math.imul(R,pt)|0,e=e+Math.imul(K,dt)|0,u=u+Math.imul(K,pt)|0;var De=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(De>>>26)|0,De&=67108863,a=Math.imul(F,at),e=Math.imul(F,ut),e=e+Math.imul(C,at)|0,u=Math.imul(C,ut),a=a+Math.imul(Z,lt)|0,e=e+Math.imul(Z,ct)|0,e=e+Math.imul(W,lt)|0,u=u+Math.imul(W,ct)|0,a=a+Math.imul(V,dt)|0,e=e+Math.imul(V,pt)|0,e=e+Math.imul(z,dt)|0,u=u+Math.imul(z,pt)|0;var $e=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+($e>>>26)|0,$e&=67108863,a=Math.imul(F,lt),e=Math.imul(F,ct),e=e+Math.imul(C,lt)|0,u=Math.imul(C,ct),a=a+Math.imul(Z,dt)|0,e=e+Math.imul(Z,pt)|0,e=e+Math.imul(W,dt)|0,u=u+Math.imul(W,pt)|0;var Ue=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,a=Math.imul(F,dt),e=Math.imul(F,pt),e=e+Math.imul(C,dt)|0,u=Math.imul(C,pt);var je=(m+a|0)+((e&8191)<<13)|0;return m=(u+(e>>>13)|0)+(je>>>26)|0,je&=67108863,d[0]=xe,d[1]=_e,d[2]=Be,d[3]=Se,d[4]=ke,d[5]=Te,d[6]=Ee,d[7]=Ae,d[8]=Oe,d[9]=Pe,d[10]=Le,d[11]=He,d[12]=qe,d[13]=Ne,d[14]=Ie,d[15]=De,d[16]=$e,d[17]=Ue,d[18]=je,m!==0&&(d[19]=m,s.length++),s};Math.imul||(Vt=se);function ai(c,t,i){i.negative=t.negative^c.negative,i.length=c.length+t.length;for(var s=0,h=0,l=0;l<i.length-1;l++){var d=h;h=0;for(var m=s&67108863,a=Math.min(l,t.length-1),e=Math.max(0,l-c.length+1);e<=a;e++){var u=l-e,y=c.words[u]|0,w=t.words[e]|0,M=y*w,x=M&67108863;d=d+(M/67108864|0)|0,x=x+m|0,m=x&67108863,d=d+(x>>>26)|0,h+=d>>>26,d&=67108863}i.words[l]=m,s=d,d=h}return s!==0?i.words[l]=s:i.length--,i.strip()}function ir(c,t,i){var s=new Tt;return s.mulp(c,t,i)}f.prototype.mulTo=function(t,i){var s,h=this.length+t.length;return this.length===10&&t.length===10?s=Vt(this,t,i):h<63?s=se(this,t,i):h<1024?s=ai(this,t,i):s=ir(this,t,i),s};function Tt(c,t){this.x=c,this.y=t}Tt.prototype.makeRBT=function(t){for(var i=new Array(t),s=f.prototype._countBits(t)-1,h=0;h<t;h++)i[h]=this.revBin(h,s,t);return i},Tt.prototype.revBin=function(t,i,s){if(t===0||t===s-1)return t;for(var h=0,l=0;l<i;l++)h|=(t&1)<<i-l-1,t>>=1;return h},Tt.prototype.permute=function(t,i,s,h,l,d){for(var m=0;m<d;m++)h[m]=i[t[m]],l[m]=s[t[m]]},Tt.prototype.transform=function(t,i,s,h,l,d){this.permute(d,t,i,s,h,l);for(var m=1;m<l;m<<=1)for(var a=m<<1,e=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),y=0;y<l;y+=a)for(var w=e,M=u,x=0;x<m;x++){var S=s[y+x],O=h[y+x],$t=s[y+x+m],P=h[y+x+m],H=w*$t-M*P;P=w*P+M*$t,$t=H,s[y+x]=S+$t,h[y+x]=O+P,s[y+x+m]=S-$t,h[y+x+m]=O-P,x!==a&&(H=e*w-u*M,M=e*M+u*w,w=H)}},Tt.prototype.guessLen13b=function(t,i){var s=Math.max(i,t)|1,h=s&1,l=0;for(s=s/2|0;s;s=s>>>1)l++;return 1<<l+1+h},Tt.prototype.conjugate=function(t,i,s){if(!(s<=1))for(var h=0;h<s/2;h++){var l=t[h];t[h]=t[s-h-1],t[s-h-1]=l,l=i[h],i[h]=-i[s-h-1],i[s-h-1]=-l}},Tt.prototype.normalize13b=function(t,i){for(var s=0,h=0;h<i/2;h++){var l=Math.round(t[2*h+1]/i)*8192+Math.round(t[2*h]/i)+s;t[h]=l&67108863,l<67108864?s=0:s=l/67108864|0}return t},Tt.prototype.convert13b=function(t,i,s,h){for(var l=0,d=0;d<i;d++)l=l+(t[d]|0),s[2*d]=l&8191,l=l>>>13,s[2*d+1]=l&8191,l=l>>>13;for(d=2*i;d<h;++d)s[d]=0;n(l===0),n((l&-8192)===0)},Tt.prototype.stub=function(t){for(var i=new Array(t),s=0;s<t;s++)i[s]=0;return i},Tt.prototype.mulp=function(t,i,s){var h=2*this.guessLen13b(t.length,i.length),l=this.makeRBT(h),d=this.stub(h),m=new Array(h),a=new Array(h),e=new Array(h),u=new Array(h),y=new Array(h),w=new Array(h),M=s.words;M.length=h,this.convert13b(t.words,t.length,m,h),this.convert13b(i.words,i.length,u,h),this.transform(m,d,a,e,h,l),this.transform(u,d,y,w,h,l);for(var x=0;x<h;x++){var S=a[x]*y[x]-e[x]*w[x];e[x]=a[x]*w[x]+e[x]*y[x],a[x]=S}return this.conjugate(a,e,h),this.transform(a,e,M,d,h,l),this.conjugate(M,d,h),this.normalize13b(M,h),s.negative=t.negative^i.negative,s.length=t.length+i.length,s.strip()},f.prototype.mul=function(t){var i=new f(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},f.prototype.mulf=function(t){var i=new f(null);return i.words=new Array(this.length+t.length),ir(this,t,i)},f.prototype.imul=function(t){return this.clone().mulTo(t,this)},f.prototype.imuln=function(t){n(typeof t=="number"),n(t<67108864);for(var i=0,s=0;s<this.length;s++){var h=(this.words[s]|0)*t,l=(h&67108863)+(i&67108863);i>>=26,i+=h/67108864|0,i+=l>>>26,this.words[s]=l&67108863}return i!==0&&(this.words[s]=i,this.length++),this},f.prototype.muln=function(t){return this.clone().imuln(t)},f.prototype.sqr=function(){return this.mul(this)},f.prototype.isqr=function(){return this.imul(this.clone())},f.prototype.pow=function(t){var i=we(t);if(i.length===0)return new f(1);for(var s=this,h=0;h<i.length&&i[h]===0;h++,s=s.sqr());if(++h<i.length)for(var l=s.sqr();h<i.length;h++,l=l.sqr())i[h]!==0&&(s=s.mul(l));return s},f.prototype.iushln=function(t){n(typeof t=="number"&&t>=0);var i=t%26,s=(t-i)/26,h=67108863>>>26-i<<26-i,l;if(i!==0){var d=0;for(l=0;l<this.length;l++){var m=this.words[l]&h,a=(this.words[l]|0)-m<<i;this.words[l]=a|d,d=m>>>26-i}d&&(this.words[l]=d,this.length++)}if(s!==0){for(l=this.length-1;l>=0;l--)this.words[l+s]=this.words[l];for(l=0;l<s;l++)this.words[l]=0;this.length+=s}return this.strip()},f.prototype.ishln=function(t){return n(this.negative===0),this.iushln(t)},f.prototype.iushrn=function(t,i,s){n(typeof t=="number"&&t>=0);var h;i?h=(i-i%26)/26:h=0;var l=t%26,d=Math.min((t-l)/26,this.length),m=67108863^67108863>>>l<<l,a=s;if(h-=d,h=Math.max(0,h),a){for(var e=0;e<d;e++)a.words[e]=this.words[e];a.length=d}if(d!==0)if(this.length>d)for(this.length-=d,e=0;e<this.length;e++)this.words[e]=this.words[e+d];else this.words[0]=0,this.length=1;var u=0;for(e=this.length-1;e>=0&&(u!==0||e>=h);e--){var y=this.words[e]|0;this.words[e]=u<<26-l|y>>>l,u=y&m}return a&&u!==0&&(a.words[a.length++]=u),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},f.prototype.ishrn=function(t,i,s){return n(this.negative===0),this.iushrn(t,i,s)},f.prototype.shln=function(t){return this.clone().ishln(t)},f.prototype.ushln=function(t){return this.clone().iushln(t)},f.prototype.shrn=function(t){return this.clone().ishrn(t)},f.prototype.ushrn=function(t){return this.clone().iushrn(t)},f.prototype.testn=function(t){n(typeof t=="number"&&t>=0);var i=t%26,s=(t-i)/26,h=1<<i;if(this.length<=s)return!1;var l=this.words[s];return!!(l&h)},f.prototype.imaskn=function(t){n(typeof t=="number"&&t>=0);var i=t%26,s=(t-i)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=s)return this;if(i!==0&&s++,this.length=Math.min(s,this.length),i!==0){var h=67108863^67108863>>>i<<i;this.words[this.length-1]&=h}return this.strip()},f.prototype.maskn=function(t){return this.clone().imaskn(t)},f.prototype.iaddn=function(t){return n(typeof t=="number"),n(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},f.prototype._iaddn=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},f.prototype.isubn=function(t){if(n(typeof t=="number"),n(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},f.prototype.addn=function(t){return this.clone().iaddn(t)},f.prototype.subn=function(t){return this.clone().isubn(t)},f.prototype.iabs=function(){return this.negative=0,this},f.prototype.abs=function(){return this.clone().iabs()},f.prototype._ishlnsubmul=function(t,i,s){var h=t.length+s,l;this._expand(h);var d,m=0;for(l=0;l<t.length;l++){d=(this.words[l+s]|0)+m;var a=(t.words[l]|0)*i;d-=a&67108863,m=(d>>26)-(a/67108864|0),this.words[l+s]=d&67108863}for(;l<this.length-s;l++)d=(this.words[l+s]|0)+m,m=d>>26,this.words[l+s]=d&67108863;if(m===0)return this.strip();for(n(m===-1),m=0,l=0;l<this.length;l++)d=-(this.words[l]|0)+m,m=d>>26,this.words[l]=d&67108863;return this.negative=1,this.strip()},f.prototype._wordDiv=function(t,i){var s=this.length-t.length,h=this.clone(),l=t,d=l.words[l.length-1]|0,m=this._countBits(d);s=26-m,s!==0&&(l=l.ushln(s),h.iushln(s),d=l.words[l.length-1]|0);var a=h.length-l.length,e;if(i!=="mod"){e=new f(null),e.length=a+1,e.words=new Array(e.length);for(var u=0;u<e.length;u++)e.words[u]=0}var y=h.clone()._ishlnsubmul(l,1,a);y.negative===0&&(h=y,e&&(e.words[a]=1));for(var w=a-1;w>=0;w--){var M=(h.words[l.length+w]|0)*67108864+(h.words[l.length+w-1]|0);for(M=Math.min(M/d|0,67108863),h._ishlnsubmul(l,M,w);h.negative!==0;)M--,h.negative=0,h._ishlnsubmul(l,1,w),h.isZero()||(h.negative^=1);e&&(e.words[w]=M)}return e&&e.strip(),h.strip(),i!=="div"&&s!==0&&h.iushrn(s),{div:e||null,mod:h}},f.prototype.divmod=function(t,i,s){if(n(!t.isZero()),this.isZero())return{div:new f(0),mod:new f(0)};var h,l,d;return this.negative!==0&&t.negative===0?(d=this.neg().divmod(t,i),i!=="mod"&&(h=d.div.neg()),i!=="div"&&(l=d.mod.neg(),s&&l.negative!==0&&l.iadd(t)),{div:h,mod:l}):this.negative===0&&t.negative!==0?(d=this.divmod(t.neg(),i),i!=="mod"&&(h=d.div.neg()),{div:h,mod:d.mod}):(this.negative&t.negative)!==0?(d=this.neg().divmod(t.neg(),i),i!=="div"&&(l=d.mod.neg(),s&&l.negative!==0&&l.isub(t)),{div:d.div,mod:l}):t.length>this.length||this.cmp(t)<0?{div:new f(0),mod:this}:t.length===1?i==="div"?{div:this.divn(t.words[0]),mod:null}:i==="mod"?{div:null,mod:new f(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new f(this.modn(t.words[0]))}:this._wordDiv(t,i)},f.prototype.div=function(t){return this.divmod(t,"div",!1).div},f.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},f.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},f.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var s=i.div.negative!==0?i.mod.isub(t):i.mod,h=t.ushrn(1),l=t.andln(1),d=s.cmp(h);return d<0||l===1&&d===0?i.div:i.div.negative!==0?i.div.isubn(1):i.div.iaddn(1)},f.prototype.modn=function(t){n(t<=67108863);for(var i=(1<<26)%t,s=0,h=this.length-1;h>=0;h--)s=(i*s+(this.words[h]|0))%t;return s},f.prototype.idivn=function(t){n(t<=67108863);for(var i=0,s=this.length-1;s>=0;s--){var h=(this.words[s]|0)+i*67108864;this.words[s]=h/t|0,i=h%t}return this.strip()},f.prototype.divn=function(t){return this.clone().idivn(t)},f.prototype.egcd=function(t){n(t.negative===0),n(!t.isZero());var i=this,s=t.clone();i.negative!==0?i=i.umod(t):i=i.clone();for(var h=new f(1),l=new f(0),d=new f(0),m=new f(1),a=0;i.isEven()&&s.isEven();)i.iushrn(1),s.iushrn(1),++a;for(var e=s.clone(),u=i.clone();!i.isZero();){for(var y=0,w=1;(i.words[0]&w)===0&&y<26;++y,w<<=1);if(y>0)for(i.iushrn(y);y-- >0;)(h.isOdd()||l.isOdd())&&(h.iadd(e),l.isub(u)),h.iushrn(1),l.iushrn(1);for(var M=0,x=1;(s.words[0]&x)===0&&M<26;++M,x<<=1);if(M>0)for(s.iushrn(M);M-- >0;)(d.isOdd()||m.isOdd())&&(d.iadd(e),m.isub(u)),d.iushrn(1),m.iushrn(1);i.cmp(s)>=0?(i.isub(s),h.isub(d),l.isub(m)):(s.isub(i),d.isub(h),m.isub(l))}return{a:d,b:m,gcd:s.iushln(a)}},f.prototype._invmp=function(t){n(t.negative===0),n(!t.isZero());var i=this,s=t.clone();i.negative!==0?i=i.umod(t):i=i.clone();for(var h=new f(1),l=new f(0),d=s.clone();i.cmpn(1)>0&&s.cmpn(1)>0;){for(var m=0,a=1;(i.words[0]&a)===0&&m<26;++m,a<<=1);if(m>0)for(i.iushrn(m);m-- >0;)h.isOdd()&&h.iadd(d),h.iushrn(1);for(var e=0,u=1;(s.words[0]&u)===0&&e<26;++e,u<<=1);if(e>0)for(s.iushrn(e);e-- >0;)l.isOdd()&&l.iadd(d),l.iushrn(1);i.cmp(s)>=0?(i.isub(s),h.isub(l)):(s.isub(i),l.isub(h))}var y;return i.cmpn(1)===0?y=h:y=l,y.cmpn(0)<0&&y.iadd(t),y},f.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),s=t.clone();i.negative=0,s.negative=0;for(var h=0;i.isEven()&&s.isEven();h++)i.iushrn(1),s.iushrn(1);do{for(;i.isEven();)i.iushrn(1);for(;s.isEven();)s.iushrn(1);var l=i.cmp(s);if(l<0){var d=i;i=s,s=d}else if(l===0||s.cmpn(1)===0)break;i.isub(s)}while(!0);return s.iushln(h)},f.prototype.invm=function(t){return this.egcd(t).a.umod(t)},f.prototype.isEven=function(){return(this.words[0]&1)===0},f.prototype.isOdd=function(){return(this.words[0]&1)===1},f.prototype.andln=function(t){return this.words[0]&t},f.prototype.bincn=function(t){n(typeof t=="number");var i=t%26,s=(t-i)/26,h=1<<i;if(this.length<=s)return this._expand(s+1),this.words[s]|=h,this;for(var l=h,d=s;l!==0&&d<this.length;d++){var m=this.words[d]|0;m+=l,l=m>>>26,m&=67108863,this.words[d]=m}return l!==0&&(this.words[d]=l,this.length++),this},f.prototype.isZero=function(){return this.length===1&&this.words[0]===0},f.prototype.cmpn=function(t){var i=t<0;if(this.negative!==0&&!i)return-1;if(this.negative===0&&i)return 1;this.strip();var s;if(this.length>1)s=1;else{i&&(t=-t),n(t<=67108863,"Number is too big");var h=this.words[0]|0;s=h===t?0:h<t?-1:1}return this.negative!==0?-s|0:s},f.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var i=this.ucmp(t);return this.negative!==0?-i|0:i},f.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,s=this.length-1;s>=0;s--){var h=this.words[s]|0,l=t.words[s]|0;if(h!==l){h<l?i=-1:h>l&&(i=1);break}}return i},f.prototype.gtn=function(t){return this.cmpn(t)===1},f.prototype.gt=function(t){return this.cmp(t)===1},f.prototype.gten=function(t){return this.cmpn(t)>=0},f.prototype.gte=function(t){return this.cmp(t)>=0},f.prototype.ltn=function(t){return this.cmpn(t)===-1},f.prototype.lt=function(t){return this.cmp(t)===-1},f.prototype.lten=function(t){return this.cmpn(t)<=0},f.prototype.lte=function(t){return this.cmp(t)<=0},f.prototype.eqn=function(t){return this.cmpn(t)===0},f.prototype.eq=function(t){return this.cmp(t)===0},f.red=function(t){return new q(t)},f.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},f.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},f.prototype._forceRed=function(t){return this.red=t,this},f.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},f.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},f.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},f.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},f.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},f.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},f.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},f.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},f.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},f.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},f.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},f.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},f.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},f.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var Me={k256:null,p224:null,p192:null,p25519:null};function _t(c,t){this.name=c,this.p=new f(t,16),this.n=this.p.bitLength(),this.k=new f(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_t.prototype._tmp=function(){var t=new f(null);return t.words=new Array(Math.ceil(this.n/13)),t},_t.prototype.ireduce=function(t){var i=t,s;do this.split(i,this.tmp),i=this.imulK(i),i=i.iadd(this.tmp),s=i.bitLength();while(s>this.n);var h=s<this.n?-1:i.ucmp(this.p);return h===0?(i.words[0]=0,i.length=1):h>0?i.isub(this.p):i.strip(),i},_t.prototype.split=function(t,i){t.iushrn(this.n,0,i)},_t.prototype.imulK=function(t){return t.imul(this.k)};function fe(){_t.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}p(fe,_t),fe.prototype.split=function(t,i){for(var s=4194303,h=Math.min(t.length,9),l=0;l<h;l++)i.words[l]=t.words[l];if(i.length=h,t.length<=9){t.words[0]=0,t.length=1;return}var d=t.words[9];for(i.words[i.length++]=d&s,l=10;l<t.length;l++){var m=t.words[l]|0;t.words[l-10]=(m&s)<<4|d>>>22,d=m}d>>>=22,t.words[l-10]=d,d===0&&t.length>10?t.length-=10:t.length-=9},fe.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,s=0;s<t.length;s++){var h=t.words[s]|0;i+=h*977,t.words[s]=i&67108863,i=h*64+(i/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function nr(){_t.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}p(nr,_t);function or(){_t.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}p(or,_t);function be(){_t.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}p(be,_t),be.prototype.imulK=function(t){for(var i=0,s=0;s<t.length;s++){var h=(t.words[s]|0)*19+i,l=h&67108863;h>>>=26,t.words[s]=l,i=h}return i!==0&&(t.words[t.length++]=i),t},f._prime=function(t){if(Me[t])return Me[t];var i;if(t==="k256")i=new fe;else if(t==="p224")i=new nr;else if(t==="p192")i=new or;else if(t==="p25519")i=new be;else throw new Error("Unknown prime "+t);return Me[t]=i,i};function q(c){if(typeof c=="string"){var t=f._prime(c);this.m=t.p,this.prime=t}else n(c.gtn(1),"modulus must be greater than 1"),this.m=c,this.prime=null}q.prototype._verify1=function(t){n(t.negative===0,"red works only with positives"),n(t.red,"red works only with red numbers")},q.prototype._verify2=function(t,i){n((t.negative|i.negative)===0,"red works only with positives"),n(t.red&&t.red===i.red,"red works only with red numbers")},q.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},q.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},q.prototype.add=function(t,i){this._verify2(t,i);var s=t.add(i);return s.cmp(this.m)>=0&&s.isub(this.m),s._forceRed(this)},q.prototype.iadd=function(t,i){this._verify2(t,i);var s=t.iadd(i);return s.cmp(this.m)>=0&&s.isub(this.m),s},q.prototype.sub=function(t,i){this._verify2(t,i);var s=t.sub(i);return s.cmpn(0)<0&&s.iadd(this.m),s._forceRed(this)},q.prototype.isub=function(t,i){this._verify2(t,i);var s=t.isub(i);return s.cmpn(0)<0&&s.iadd(this.m),s},q.prototype.shl=function(t,i){return this._verify1(t),this.imod(t.ushln(i))},q.prototype.imul=function(t,i){return this._verify2(t,i),this.imod(t.imul(i))},q.prototype.mul=function(t,i){return this._verify2(t,i),this.imod(t.mul(i))},q.prototype.isqr=function(t){return this.imul(t,t.clone())},q.prototype.sqr=function(t){return this.mul(t,t)},q.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(n(i%2===1),i===3){var s=this.m.add(new f(1)).iushrn(2);return this.pow(t,s)}for(var h=this.m.subn(1),l=0;!h.isZero()&&h.andln(1)===0;)l++,h.iushrn(1);n(!h.isZero());var d=new f(1).toRed(this),m=d.redNeg(),a=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new f(2*e*e).toRed(this);this.pow(e,a).cmp(m)!==0;)e.redIAdd(m);for(var u=this.pow(e,h),y=this.pow(t,h.addn(1).iushrn(1)),w=this.pow(t,h),M=l;w.cmp(d)!==0;){for(var x=w,S=0;x.cmp(d)!==0;S++)x=x.redSqr();n(S<M);var O=this.pow(u,new f(1).iushln(M-S-1));y=y.redMul(O),u=O.redSqr(),w=w.redMul(u),M=S}return y},q.prototype.invm=function(t){var i=t._invmp(this.m);return i.negative!==0?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},q.prototype.pow=function(t,i){if(i.isZero())return new f(1).toRed(this);if(i.cmpn(1)===0)return t.clone();var s=4,h=new Array(1<<s);h[0]=new f(1).toRed(this),h[1]=t;for(var l=2;l<h.length;l++)h[l]=this.mul(h[l-1],t);var d=h[0],m=0,a=0,e=i.bitLength()%26;for(e===0&&(e=26),l=i.length-1;l>=0;l--){for(var u=i.words[l],y=e-1;y>=0;y--){var w=u>>y&1;if(d!==h[0]&&(d=this.sqr(d)),w===0&&m===0){a=0;continue}m<<=1,m|=w,a++,!(a!==s&&(l!==0||y!==0))&&(d=this.mul(d,h[m]),a=0,m=0)}e=26}return d},q.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},q.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},f.mont=function(t){return new zt(t)};function zt(c){q.call(this,c),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new f(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}p(zt,q),zt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},zt.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},zt.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(i),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),l=s.isub(h).iushrn(this.shift),d=l;return l.cmp(this.m)>=0?d=l.isub(this.m):l.cmpn(0)<0&&(d=l.iadd(this.m)),d._forceRed(this)},zt.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new f(0)._forceRed(this);var s=t.mul(i),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),l=s.isub(h).iushrn(this.shift),d=l;return l.cmp(this.m)>=0?d=l.isub(this.m):l.cmpn(0)<0&&(d=l.iadd(this.m)),d._forceRed(this)},zt.prototype.invm=function(t){var i=this.imod(t._invmp(this.m).mul(this.r2));return i._forceRed(this)}})(typeof Ge>"u"||Ge,zr)});var Xr=yt(Ht=>{"use strict";k();T();var Mn=Ht&&Ht.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.rawEncode=Ht.parseNumber=Ht.solidityPack=void 0;var Kt=he(),bn=Re(),Wt=Mn(Zr()),Fr=Ct();function xn(r,o){if(r.length!==o.length)throw new Error("Number of types are not matching the values");let n=[];for(let p=0;p<r.length;p++){let f=Jr(r[p]),v=o[p];n.push(Cr(f,v,null))}return _.Buffer.concat(n)}Ht.solidityPack=xn;function me(r){return r.lastIndexOf("]")===r.length-1}function ve(r){let o=r.match(/(.*)\[(.*?)\]$/u);return o?o[2]===""?"dynamic":parseInt(o[2],10):null}function Gt(r){return parseInt(/^\D+(\d+)$/u.exec(r)[1],10)}function Rt(r){let o=typeof r;if(o==="string")return(0,Kt.isHexPrefixed)(r)?new Wt.default((0,bn.stripHexPrefix)(r),16):new Wt.default(r,10);if(o==="number")return new Wt.default(r);if(r.toArray)return r;throw new Error("Argument is not a number")}Ht.parseNumber=Rt;function Cr(r,o,n){let p,f;if(me(r)){let v=r.replace(/\[.*?\]/u,"");if(!me(v)){let b=ve(r);if(b!=="dynamic"&&b!==0&&o.length>b)throw new Error(`Elements exceed array size: ${b}`)}let g=o.map(function(b){return Cr(v,b,256)});return _.Buffer.concat(g)}else{if(r==="bytes")return o;if(r==="string")return _.Buffer.from(o,"utf8");if(r==="bool"){n=n||8;let v=Array(n/4).join("0");return _.Buffer.from(o?`${v}1`:`${v}0`,"hex")}else if(r==="address"){let v=20;return n&&(v=n/8),(0,Kt.setLengthLeft)((0,Kt.toBuffer)(o),v)}else if(r.startsWith("bytes")){if(p=Gt(r),p<1||p>32)throw new Error(`Invalid bytes<N> width: ${p}`);return typeof o=="number"&&(o=(0,Fr.normalize)(o)),(0,Kt.setLengthRight)((0,Kt.toBuffer)(o),p)}else if(r.startsWith("uint")){if(p=Gt(r),p%8||p<8||p>256)throw new Error(`Invalid uint<N> width: ${p}`);if(f=Rt(o),f.bitLength()>p)throw new Error(`Supplied uint exceeds width: ${p} vs ${f.bitLength()}`);return n=n||p,f.toArrayLike(_.Buffer,"be",n/8)}else if(r.startsWith("int")){if(p=Gt(r),p%8||p<8||p>256)throw new Error(`Invalid int<N> width: ${p}`);if(f=Rt(o),f.bitLength()>p)throw new Error(`Supplied int exceeds width: ${p} vs ${f.bitLength()}`);return n=n||p,f.toTwos(p).toArrayLike(_.Buffer,"be",n/8)}}throw new Error(`Unsupported or invalid type: ${r}`)}function Jr(r){return r.startsWith("int[")?`int256${r.slice(3)}`:r==="int"?"int256":r.startsWith("uint[")?`uint256${r.slice(4)}`:r==="uint"?"uint256":r.startsWith("fixed[")?`fixed128x128${r.slice(5)}`:r==="fixed"?"fixed128x128":r.startsWith("ufixed[")?`ufixed128x128${r.slice(6)}`:r==="ufixed"?"ufixed128x128":r}function _n(r,o){let n=[],p=[],f=0;r.forEach(function(v){if(me(v)){let g=ve(v);g!=="dynamic"?f+=32*g:f+=32}else f+=32});for(let v=0;v<r.length;v++){let g=Jr(r[v]),b=o[v],E=Lt(g,b);Bn(g)?(n.push(Lt("uint256",f)),p.push(E),f+=E.length):n.push(E)}return _.Buffer.concat(n.concat(p))}Ht.rawEncode=_n;function Lt(r,o){let n,p,f,v;if(r==="address")return Lt("uint160",Rt(o));if(r==="bool")return Lt("uint8",o?1:0);if(r==="string")return Lt("bytes",_.Buffer.from(o,"utf8"));if(me(r)){if(typeof o.length>"u")throw new Error("Not an array?");if(n=ve(r),n!=="dynamic"&&n!==0&&o.length>n)throw new Error(`Elements exceed array size: ${n}`);f=[],r=r.slice(0,r.lastIndexOf("[")),typeof o=="string"&&(o=JSON.parse(o));for(v in o)Object.prototype.hasOwnProperty.call(o,v)&&f.push(Lt(r,o[v]));if(n==="dynamic"){let g=Lt("uint256",o.length);f.unshift(g)}return _.Buffer.concat(f)}else{if(r==="bytes")return o=_.Buffer.from(o),f=_.Buffer.concat([Lt("uint256",o.length),o]),o.length%32!==0&&(f=_.Buffer.concat([f,(0,Kt.zeros)(32-o.length%32)])),f;if(r.startsWith("bytes")){if(n=Gt(r),n<1||n>32)throw new Error(`Invalid bytes<N> width: ${n}`);return typeof o=="number"&&(o=(0,Fr.normalize)(o)),(0,Kt.setLengthRight)((0,Kt.toBuffer)(o),32)}else if(r.startsWith("uint")){if(n=Gt(r),n%8||n<8||n>256)throw new Error(`Invalid uint<N> width: ${n}`);if(p=Rt(o),p.bitLength()>n)throw new Error(`Supplied uint exceeds width: ${n} vs ${p.bitLength()}`);if(p<0)throw new Error("Supplied uint is negative");return p.toArrayLike(_.Buffer,"be",32)}else if(r.startsWith("int")){if(n=Gt(r),n%8||n<8||n>256)throw new Error(`Invalid int<N> width: ${n}`);if(p=Rt(o),p.bitLength()>n)throw new Error(`Supplied int exceeds width: ${n} vs ${p.bitLength()}`);return p.toTwos(256).toArrayLike(_.Buffer,"be",32)}else if(r.startsWith("ufixed")){if(n=Wr(r),p=Rt(o),p<0)throw new Error("Supplied ufixed is negative");return Lt("uint256",p.mul(new Wt.default(2).pow(new Wt.default(n[1]))))}else if(r.startsWith("fixed"))return n=Wr(r),Lt("int256",Rt(o).mul(new Wt.default(2).pow(new Wt.default(n[1]))))}throw new Error(`Unsupported or invalid type: ${r}`)}function Bn(r){return r==="string"||r==="bytes"||ve(r)==="dynamic"}function Wr(r){let o=/^\D+(\d+)x(\d+)$/u.exec(r);return[parseInt(o[1],10),parseInt(o[2],10)]}});var ei=yt(mt=>{"use strict";k();T();Object.defineProperty(mt,"__esModule",{value:!0});mt.recoverTypedSignature=mt.signTypedData=mt.typedSignatureHash=mt.TypedDataUtils=mt.TYPED_MESSAGE_SCHEMA=mt.SignTypedDataVersion=void 0;var Sn=Re(),bt=he(),qt=Vr(),oe=Xr(),Nt=Ct(),Mt;(function(r){r.V1="V1",r.V3="V3",r.V4="V4"})(Mt=mt.SignTypedDataVersion||(mt.SignTypedDataVersion={}));mt.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function Yt(r,o){if(Object.keys(Mt).includes(r)){if(o&&!o.includes(r))throw new Error(`SignTypedDataVersion not allowed: '${r}'. Allowed versions are: ${o.join(", ")}`)}else throw new Error(`Invalid version: '${r}'`)}function Gr(r,o,n,p,f){if(Yt(f,[Mt.V3,Mt.V4]),r[n]!==void 0)return["bytes32",f===Mt.V4&&p==null?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,bt.arrToBufArr)((0,qt.keccak256)(Qe(n,p,r,f)))];if(p===void 0)throw new Error(`missing value for field ${o} of type ${n}`);if(n==="bytes")return typeof p=="number"?p=(0,Nt.numberToBuffer)(p):(0,Sn.isHexString)(p)?p=(0,Nt.numberToBuffer)(parseInt(p,16)):p=_.Buffer.from(p,"utf8"),["bytes32",(0,bt.arrToBufArr)((0,qt.keccak256)(p))];if(n==="string")return typeof p=="number"?p=(0,Nt.numberToBuffer)(p):p=_.Buffer.from(p!=null?p:"","utf8"),["bytes32",(0,bt.arrToBufArr)((0,qt.keccak256)(p))];if(n.lastIndexOf("]")===n.length-1){if(f===Mt.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let v=n.slice(0,n.lastIndexOf("[")),g=p.map(b=>Gr(r,o,v,b,f));return["bytes32",(0,bt.arrToBufArr)((0,qt.keccak256)((0,oe.rawEncode)(g.map(([b])=>b),g.map(([,b])=>b))))]}return[n,p]}function Qe(r,o,n,p){Yt(p,[Mt.V3,Mt.V4]);let f=["bytes32"],v=[Qr(r,n)];for(let g of n[r]){if(p===Mt.V3&&o[g.name]===void 0)continue;let[b,E]=Gr(n,g.name,g.type,o[g.name],p);f.push(b),v.push(E)}return(0,oe.rawEncode)(f,v)}function Yr(r,o){let n="",p=tr(r,o);p.delete(r);let f=[r,...Array.from(p).sort()];for(let v of f){if(!o[v])throw new Error(`No type definition specified: ${v}`);n+=`${v}(${o[v].map(({name:b,type:E})=>`${E} ${b}`).join(",")})`}return n}function tr(r,o,n=new Set){if([r]=r.match(/^\w*/u),n.has(r)||o[r]===void 0)return n;n.add(r);for(let p of o[r])tr(p.type,o,n);return n}function Ye(r,o,n,p){return Yt(p,[Mt.V3,Mt.V4]),(0,bt.arrToBufArr)((0,qt.keccak256)(Qe(r,o,n,p)))}function Qr(r,o){let n=_.Buffer.from(Yr(r,o),"utf-8");return(0,bt.arrToBufArr)((0,qt.keccak256)(n))}function ti(r){let o={};for(let n in mt.TYPED_MESSAGE_SCHEMA.properties)r[n]&&(o[n]=r[n]);return"types"in o&&(o.types=Object.assign({EIP712Domain:[]},o.types)),o}function kn(r,o){Yt(o,[Mt.V3,Mt.V4]);let n=ti(r),p=[_.Buffer.from("1901","hex")];return p.push(Ye("EIP712Domain",n.domain,n.types,o)),n.primaryType!=="EIP712Domain"&&p.push(Ye(n.primaryType,n.message,n.types,o)),(0,bt.arrToBufArr)((0,qt.keccak256)(_.Buffer.concat(p)))}mt.TypedDataUtils={encodeData:Qe,encodeType:Yr,findTypeDependencies:tr,hashStruct:Ye,hashType:Qr,sanitizeData:ti,eip712Hash:kn};function Tn(r){let o=er(r);return(0,bt.bufferToHex)(o)}mt.typedSignatureHash=Tn;function er(r){let o=new Error("Expect argument to be non-empty array");if(typeof r!="object"||!("length"in r)||!r.length)throw o;let n=r.map(function(v){return v.type!=="bytes"?v.value:(0,Nt.legacyToBuffer)(v.value)}),p=r.map(function(v){return v.type}),f=r.map(function(v){if(!v.name)throw o;return`${v.type} ${v.name}`});return(0,bt.arrToBufArr)((0,qt.keccak256)((0,oe.solidityPack)(["bytes32","bytes32"],[(0,qt.keccak256)((0,oe.solidityPack)(new Array(r.length).fill("string"),f)),(0,qt.keccak256)((0,oe.solidityPack)(p,n))])))}function En({privateKey:r,data:o,version:n}){if(Yt(n),(0,Nt.isNullish)(o))throw new Error("Missing data parameter");if((0,Nt.isNullish)(r))throw new Error("Missing private key parameter");let p=n===Mt.V1?er(o):mt.TypedDataUtils.eip712Hash(o,n),f=(0,bt.ecsign)(p,r);return(0,Nt.concatSig)((0,bt.toBuffer)(f.v),f.r,f.s)}mt.signTypedData=En;function An({data:r,signature:o,version:n}){if(Yt(n),(0,Nt.isNullish)(r))throw new Error("Missing data parameter");if((0,Nt.isNullish)(o))throw new Error("Missing signature parameter");let p=n===Mt.V1?er(r):mt.TypedDataUtils.eip712Hash(r,n),f=(0,Nt.recoverPublicKey)(p,o),v=(0,bt.publicToAddress)(f);return(0,bt.bufferToHex)(v)}mt.recoverTypedSignature=An});var si=yt(vt=>{"use strict";k();T();var On=vt&&vt.__createBinding||(Object.create?function(r,o,n,p){p===void 0&&(p=n);var f=Object.getOwnPropertyDescriptor(o,n);(!f||("get"in f?!o.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return o[n]}}),Object.defineProperty(r,p,f)}:function(r,o,n,p){p===void 0&&(p=n),r[p]=o[n]}),Pn=vt&&vt.__setModuleDefault||(Object.create?function(r,o){Object.defineProperty(r,"default",{enumerable:!0,value:o})}:function(r,o){r.default=o}),ri=vt&&vt.__importStar||function(r){if(r&&r.__esModule)return r;var o={};if(r!=null)for(var n in r)n!=="default"&&Object.prototype.hasOwnProperty.call(r,n)&&On(o,r,n);return Pn(o,r),o};Object.defineProperty(vt,"__esModule",{value:!0});vt.getEncryptionPublicKey=vt.decryptSafely=vt.decrypt=vt.encryptSafely=vt.encrypt=void 0;var Ft=ri(li()),Et=ri(ci()),It=Ct();function ii({publicKey:r,data:o,version:n}){if((0,It.isNullish)(r))throw new Error("Missing publicKey parameter");if((0,It.isNullish)(o))throw new Error("Missing data parameter");if((0,It.isNullish)(n))throw new Error("Missing version parameter");switch(n){case"x25519-xsalsa20-poly1305":{if(typeof o!="string")throw new Error("Message data must be given as a string");let p=Ft.box.keyPair(),f;try{f=Et.decodeBase64(r)}catch{throw new Error("Bad public key")}let v=Et.decodeUTF8(o),g=Ft.randomBytes(Ft.box.nonceLength),b=Ft.box(v,g,f,p.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:Et.encodeBase64(g),ephemPublicKey:Et.encodeBase64(p.publicKey),ciphertext:Et.encodeBase64(b)}}default:throw new Error("Encryption type/version not supported")}}vt.encrypt=ii;function Ln({publicKey:r,data:o,version:n}){if((0,It.isNullish)(r))throw new Error("Missing publicKey parameter");if((0,It.isNullish)(o))throw new Error("Missing data parameter");if((0,It.isNullish)(n))throw new Error("Missing version parameter");let p=2**11,f=16;if(typeof o=="object"&&"toJSON"in o)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let v={data:o,padding:""},b=_.Buffer.byteLength(JSON.stringify(v),"utf-8")%p,E=0;b>0&&(E=p-b-f),v.padding="0".repeat(E);let At=JSON.stringify(v);return ii({publicKey:r,data:At,version:n})}vt.encryptSafely=Ln;function ni({encryptedData:r,privateKey:o}){if((0,It.isNullish)(r))throw new Error("Missing encryptedData parameter");if((0,It.isNullish)(o))throw new Error("Missing privateKey parameter");switch(r.version){case"x25519-xsalsa20-poly1305":{let n=oi(o),p=Ft.box.keyPair.fromSecretKey(n).secretKey,f=Et.decodeBase64(r.nonce),v=Et.decodeBase64(r.ciphertext),g=Et.decodeBase64(r.ephemPublicKey),b=Ft.box.open(v,f,g,p),E;try{E=Et.encodeUTF8(b)}catch{throw new Error("Decryption failed.")}if(E)return E;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}vt.decrypt=ni;function Hn({encryptedData:r,privateKey:o}){if((0,It.isNullish)(r))throw new Error("Missing encryptedData parameter");if((0,It.isNullish)(o))throw new Error("Missing privateKey parameter");return JSON.parse(ni({encryptedData:r,privateKey:o})).data}vt.decryptSafely=Hn;function qn(r){let o=oi(r),n=Ft.box.keyPair.fromSecretKey(o).publicKey;return Et.encodeBase64(n)}vt.getEncryptionPublicKey=qn;function oi(r){let o=_.Buffer.from(r,"hex").toString("base64");return Et.decodeBase64(o)}});var hi=yt(xt=>{"use strict";k();T();var Nn=xt&&xt.__createBinding||(Object.create?function(r,o,n,p){p===void 0&&(p=n);var f=Object.getOwnPropertyDescriptor(o,n);(!f||("get"in f?!o.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return o[n]}}),Object.defineProperty(r,p,f)}:function(r,o,n,p){p===void 0&&(p=n),r[p]=o[n]}),rr=xt&&xt.__exportStar||function(r,o){for(var n in r)n!=="default"&&!Object.prototype.hasOwnProperty.call(o,n)&&Nn(o,r,n)};Object.defineProperty(xt,"__esModule",{value:!0});xt.normalize=xt.concatSig=void 0;rr(Br(),xt);rr(ei(),xt);rr(si(),xt);var fi=Ct();Object.defineProperty(xt,"concatSig",{enumerable:!0,get:function(){return fi.concatSig}});Object.defineProperty(xt,"normalize",{enumerable:!0,get:function(){return fi.normalize}})});var jn=yt(kt=>{"use strict";k();T();var In=kt&&kt.__createBinding||(Object.create?function(r,o,n,p){p===void 0&&(p=n);var f=Object.getOwnPropertyDescriptor(o,n);(!f||("get"in f?!o.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return o[n]}}),Object.defineProperty(r,p,f)}:function(r,o,n,p){p===void 0&&(p=n),r[p]=o[n]}),Dn=kt&&kt.__setModuleDefault||(Object.create?function(r,o){Object.defineProperty(r,"default",{enumerable:!0,value:o})}:function(r,o){r.default=o}),$n=kt&&kt.__importStar||function(r){if(r&&r.__esModule)return r;var o={};if(r!=null)for(var n in r)n!=="default"&&Object.prototype.hasOwnProperty.call(r,n)&&In(o,r,n);return Dn(o,r),o};Object.defineProperty(kt,"__esModule",{value:!0});kt.transformTypedData=void 0;var ge=$n(hi());function ye(r){switch(Object.prototype.toString.call(r)){case"[object Object]":{let o=Object.keys(r).map(n=>[n,ye(r[n])]);return Object.fromEntries(o)}case"[object Array]":return r.map(o=>ye(o));case"[object BigInt]":return r.toString();default:return r}}var Un=(r,o)=>{if(!o)throw new Error("Trezor: Only version 4 of typed data signing is supported");let n=ge.SignTypedDataVersion.V4,{types:p,primaryType:f,domain:v,message:g}=ge.TypedDataUtils.sanitizeData(r),b=ge.TypedDataUtils.hashStruct("EIP712Domain",ye(v),p,n).toString("hex"),E=null;return f!=="EIP712Domain"&&(E=ge.TypedDataUtils.hashStruct(f,ye(g),p,n).toString("hex")),Object.assign({domain_separator_hash:b,message_hash:E},r)};kt.transformTypedData=Un;kt.default=kt.transformTypedData});export{jn as a};
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-3IMLJ5JL.js.map
