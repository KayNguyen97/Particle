import{j as Bt,q as Ft}from"./chunk-DYEVUST3.js";import{$a as q,Da as Pt,H as Ve,K as z,M as Ot,T as Lt,W as ke,_a as ci,b as wt,f as vt,i as Te,ia as ae,k as St,na as Dt,o as xe,p as _e,s as At,x as P,xa as yt}from"./chunk-LFVM5TW4.js";import{$a as he,Ma as bt,Va as It,ba as Tt,da as xt,ea as kt,ga as oe,ja as de,jb as Ct,ka as Rt,kb as Xe,la as L,p as $,yb as Nt}from"./chunk-IQVVVGEA.js";import{f as Se,o as Qe}from"./chunk-GXQ645QR.js";import{J as Ye,V as Et}from"./chunk-C2H3SRET.js";import{a as ve}from"./chunk-V4YVDLI4.js";import{c as W,f as ne,h as u,l as process,m as d,o as h}from"./chunk-6V2G2Z5W.js";var Ce=W(U=>{"use strict";d();h();var vi=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function Si(r,t){return Object.prototype.hasOwnProperty.call(r,t)}U.assign=function(r){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(!!e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(var i in e)Si(e,i)&&(r[i]=e[i])}}return r};U.shrinkBuf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};var Ti={arraySet:function(r,t,e,i,s){if(t.subarray&&r.subarray){r.set(t.subarray(e,e+i),s);return}for(var n=0;n<i;n++)r[s+n]=t[e+n]},flattenChunks:function(r){var t,e,i,s,n,l;for(i=0,t=0,e=r.length;t<e;t++)i+=r[t].length;for(l=new Uint8Array(i),s=0,t=0,e=r.length;t<e;t++)n=r[t],l.set(n,s),s+=n.length;return l}},xi={arraySet:function(r,t,e,i,s){for(var n=0;n<i;n++)r[s+n]=t[e+n]},flattenChunks:function(r){return[].concat.apply([],r)}};U.setTyped=function(r){r?(U.Buf8=Uint8Array,U.Buf16=Uint16Array,U.Buf32=Int32Array,U.assign(U,Ti)):(U.Buf8=Array,U.Buf16=Array,U.Buf32=Array,U.assign(U,xi))};U.setTyped(vi)});var Yt=W((ea,qt)=>{"use strict";d();h();function ki(r,t,e,i){for(var s=r&65535|0,n=r>>>16&65535|0,l=0;e!==0;){l=e>2e3?2e3:e,e-=l;do s=s+t[i++]|0,n=n+s|0;while(--l);s%=65521,n%=65521}return s|n<<16|0}qt.exports=ki});var Xt=W((ia,Qt)=>{"use strict";d();h();function Ri(){for(var r,t=[],e=0;e<256;e++){r=e;for(var i=0;i<8;i++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}var bi=Ri();function Ii(r,t,e,i){var s=bi,n=i+e;r^=-1;for(var l=i;l<n;l++)r=r>>>8^s[(r^t[l])&255];return r^-1}Qt.exports=Ii});var $t=W((aa,Vt)=>{"use strict";d();h();var Ue=30,Ci=12;Vt.exports=function(t,e){var i,s,n,l,f,m,a,o,I,g,c,T,w,x,E,O,A,k,_,N,R,v,b,y,S;i=t.state,s=t.next_in,y=t.input,n=s+(t.avail_in-5),l=t.next_out,S=t.output,f=l-(e-t.avail_out),m=l+(t.avail_out-257),a=i.dmax,o=i.wsize,I=i.whave,g=i.wnext,c=i.window,T=i.hold,w=i.bits,x=i.lencode,E=i.distcode,O=(1<<i.lenbits)-1,A=(1<<i.distbits)-1;e:do{w<15&&(T+=y[s++]<<w,w+=8,T+=y[s++]<<w,w+=8),k=x[T&O];t:for(;;){if(_=k>>>24,T>>>=_,w-=_,_=k>>>16&255,_===0)S[l++]=k&65535;else if(_&16){N=k&65535,_&=15,_&&(w<_&&(T+=y[s++]<<w,w+=8),N+=T&(1<<_)-1,T>>>=_,w-=_),w<15&&(T+=y[s++]<<w,w+=8,T+=y[s++]<<w,w+=8),k=E[T&A];r:for(;;){if(_=k>>>24,T>>>=_,w-=_,_=k>>>16&255,_&16){if(R=k&65535,_&=15,w<_&&(T+=y[s++]<<w,w+=8,w<_&&(T+=y[s++]<<w,w+=8)),R+=T&(1<<_)-1,R>a){t.msg="invalid distance too far back",i.mode=Ue;break e}if(T>>>=_,w-=_,_=l-f,R>_){if(_=R-_,_>I&&i.sane){t.msg="invalid distance too far back",i.mode=Ue;break e}if(v=0,b=c,g===0){if(v+=o-_,_<N){N-=_;do S[l++]=c[v++];while(--_);v=l-R,b=S}}else if(g<_){if(v+=o+g-_,_-=g,_<N){N-=_;do S[l++]=c[v++];while(--_);if(v=0,g<N){_=g,N-=_;do S[l++]=c[v++];while(--_);v=l-R,b=S}}}else if(v+=g-_,_<N){N-=_;do S[l++]=c[v++];while(--_);v=l-R,b=S}for(;N>2;)S[l++]=b[v++],S[l++]=b[v++],S[l++]=b[v++],N-=3;N&&(S[l++]=b[v++],N>1&&(S[l++]=b[v++]))}else{v=l-R;do S[l++]=S[v++],S[l++]=S[v++],S[l++]=S[v++],N-=3;while(N>2);N&&(S[l++]=S[v++],N>1&&(S[l++]=S[v++]))}}else if((_&64)===0){k=E[(k&65535)+(T&(1<<_)-1)];continue r}else{t.msg="invalid distance code",i.mode=Ue;break e}break}}else if((_&64)===0){k=x[(k&65535)+(T&(1<<_)-1)];continue t}else if(_&32){i.mode=Ci;break e}else{t.msg="invalid literal/length code",i.mode=Ue;break e}break}}while(s<n&&l<m);N=w>>3,s-=N,w-=N<<3,T&=(1<<w)-1,t.next_in=s,t.next_out=l,t.avail_in=s<n?5+(n-s):5-(s-n),t.avail_out=l<m?257+(m-l):257-(l-m),i.hold=T,i.bits=w}});var or=W((la,nr)=>{"use strict";d();h();var Jt=Ce(),pe=15,er=852,tr=592,rr=0,rt=1,ir=2,Ni=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Ai=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Oi=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Li=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];nr.exports=function(t,e,i,s,n,l,f,m){var a=m.bits,o=0,I=0,g=0,c=0,T=0,w=0,x=0,E=0,O=0,A=0,k,_,N,R,v,b=null,y=0,S,M=new Jt.Buf16(pe+1),p=new Jt.Buf16(pe+1),F=null,Z=0,re,ie,ue;for(o=0;o<=pe;o++)M[o]=0;for(I=0;I<s;I++)M[e[i+I]]++;for(T=a,c=pe;c>=1&&M[c]===0;c--);if(T>c&&(T=c),c===0)return n[l++]=1<<24|64<<16|0,n[l++]=1<<24|64<<16|0,m.bits=1,0;for(g=1;g<c&&M[g]===0;g++);for(T<g&&(T=g),E=1,o=1;o<=pe;o++)if(E<<=1,E-=M[o],E<0)return-1;if(E>0&&(t===rr||c!==1))return-1;for(p[1]=0,o=1;o<pe;o++)p[o+1]=p[o]+M[o];for(I=0;I<s;I++)e[i+I]!==0&&(f[p[e[i+I]]++]=I);if(t===rr?(b=F=f,S=19):t===rt?(b=Ni,y-=257,F=Ai,Z-=257,S=256):(b=Oi,F=Li,S=-1),A=0,I=0,o=g,v=l,w=T,x=0,N=-1,O=1<<T,R=O-1,t===rt&&O>er||t===ir&&O>tr)return 1;for(;;){re=o-x,f[I]<S?(ie=0,ue=f[I]):f[I]>S?(ie=F[Z+f[I]],ue=b[y+f[I]]):(ie=32+64,ue=0),k=1<<o-x,_=1<<w,g=_;do _-=k,n[v+(A>>x)+_]=re<<24|ie<<16|ue|0;while(_!==0);for(k=1<<o-1;A&k;)k>>=1;if(k!==0?(A&=k-1,A+=k):A=0,I++,--M[o]===0){if(o===c)break;o=e[i+f[I]]}if(o>T&&(A&R)!==N){for(x===0&&(x=T),v+=g,w=o-x,E=1<<w;w+x<c&&(E-=M[w+x],!(E<=0));)w++,E<<=1;if(O+=1<<w,t===rt&&O>er||t===ir&&O>tr)return 1;N=A&R,n[N]=T<<24|w<<16|v-l|0}}return A!==0&&(n[v+A]=o-x<<24|64<<16|0),m.bits=T,0}});var Hr=W(K=>{"use strict";d();h();var H=Ce(),ft=Yt(),Y=Xt(),Di=$t(),Ne=or(),yi=0,Or=1,Lr=2,ar=4,Pi=5,Me=6,le=0,Bi=1,Fi=2,G=-2,Dr=-3,lt=-4,Ui=-5,sr=8,yr=1,fr=2,lr=3,cr=4,ur=5,dr=6,hr=7,_r=8,pr=9,mr=10,We=11,X=12,it=13,gr=14,nt=15,Er=16,wr=17,vr=18,Sr=19,He=20,Ze=21,Tr=22,xr=23,kr=24,Rr=25,br=26,ot=27,Ir=28,Cr=29,D=30,ct=31,Mi=32,Hi=852,Zi=592,Wi=15,Gi=Wi;function Nr(r){return(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24)}function ji(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new H.Buf16(320),this.work=new H.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Pr(r){var t;return!r||!r.state?G:(t=r.state,r.total_in=r.total_out=t.total=0,r.msg="",t.wrap&&(r.adler=t.wrap&1),t.mode=yr,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new H.Buf32(Hi),t.distcode=t.distdyn=new H.Buf32(Zi),t.sane=1,t.back=-1,le)}function Br(r){var t;return!r||!r.state?G:(t=r.state,t.wsize=0,t.whave=0,t.wnext=0,Pr(r))}function Fr(r,t){var e,i;return!r||!r.state||(i=r.state,t<0?(e=0,t=-t):(e=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?G:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=e,i.wbits=t,Br(r))}function Ur(r,t){var e,i;return r?(i=new ji,r.state=i,i.window=null,e=Fr(r,t),e!==le&&(r.state=null),e):G}function Ki(r){return Ur(r,Gi)}var Ar=!0,at,st;function zi(r){if(Ar){var t;for(at=new H.Buf32(512),st=new H.Buf32(32),t=0;t<144;)r.lens[t++]=8;for(;t<256;)r.lens[t++]=9;for(;t<280;)r.lens[t++]=7;for(;t<288;)r.lens[t++]=8;for(Ne(Or,r.lens,0,288,at,0,r.work,{bits:9}),t=0;t<32;)r.lens[t++]=5;Ne(Lr,r.lens,0,32,st,0,r.work,{bits:5}),Ar=!1}r.lencode=at,r.lenbits=9,r.distcode=st,r.distbits=5}function Mr(r,t,e,i){var s,n=r.state;return n.window===null&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new H.Buf8(n.wsize)),i>=n.wsize?(H.arraySet(n.window,t,e-n.wsize,n.wsize,0),n.wnext=0,n.whave=n.wsize):(s=n.wsize-n.wnext,s>i&&(s=i),H.arraySet(n.window,t,e-i,s,n.wnext),i-=s,i?(H.arraySet(n.window,t,e-i,i,0),n.wnext=i,n.whave=n.wsize):(n.wnext+=s,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=s))),0}function qi(r,t){var e,i,s,n,l,f,m,a,o,I,g,c,T,w,x=0,E,O,A,k,_,N,R,v,b=new H.Buf8(4),y,S,M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!r||!r.state||!r.output||!r.input&&r.avail_in!==0)return G;e=r.state,e.mode===X&&(e.mode=it),l=r.next_out,s=r.output,m=r.avail_out,n=r.next_in,i=r.input,f=r.avail_in,a=e.hold,o=e.bits,I=f,g=m,v=le;e:for(;;)switch(e.mode){case yr:if(e.wrap===0){e.mode=it;break}for(;o<16;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}if(e.wrap&2&&a===35615){e.check=0,b[0]=a&255,b[1]=a>>>8&255,e.check=Y(e.check,b,2,0),a=0,o=0,e.mode=fr;break}if(e.flags=0,e.head&&(e.head.done=!1),!(e.wrap&1)||(((a&255)<<8)+(a>>8))%31){r.msg="incorrect header check",e.mode=D;break}if((a&15)!==sr){r.msg="unknown compression method",e.mode=D;break}if(a>>>=4,o-=4,R=(a&15)+8,e.wbits===0)e.wbits=R;else if(R>e.wbits){r.msg="invalid window size",e.mode=D;break}e.dmax=1<<R,r.adler=e.check=1,e.mode=a&512?mr:X,a=0,o=0;break;case fr:for(;o<16;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}if(e.flags=a,(e.flags&255)!==sr){r.msg="unknown compression method",e.mode=D;break}if(e.flags&57344){r.msg="unknown header flags set",e.mode=D;break}e.head&&(e.head.text=a>>8&1),e.flags&512&&(b[0]=a&255,b[1]=a>>>8&255,e.check=Y(e.check,b,2,0)),a=0,o=0,e.mode=lr;case lr:for(;o<32;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}e.head&&(e.head.time=a),e.flags&512&&(b[0]=a&255,b[1]=a>>>8&255,b[2]=a>>>16&255,b[3]=a>>>24&255,e.check=Y(e.check,b,4,0)),a=0,o=0,e.mode=cr;case cr:for(;o<16;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}e.head&&(e.head.xflags=a&255,e.head.os=a>>8),e.flags&512&&(b[0]=a&255,b[1]=a>>>8&255,e.check=Y(e.check,b,2,0)),a=0,o=0,e.mode=ur;case ur:if(e.flags&1024){for(;o<16;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}e.length=a,e.head&&(e.head.extra_len=a),e.flags&512&&(b[0]=a&255,b[1]=a>>>8&255,e.check=Y(e.check,b,2,0)),a=0,o=0}else e.head&&(e.head.extra=null);e.mode=dr;case dr:if(e.flags&1024&&(c=e.length,c>f&&(c=f),c&&(e.head&&(R=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),H.arraySet(e.head.extra,i,n,c,R)),e.flags&512&&(e.check=Y(e.check,i,c,n)),f-=c,n+=c,e.length-=c),e.length))break e;e.length=0,e.mode=hr;case hr:if(e.flags&2048){if(f===0)break e;c=0;do R=i[n+c++],e.head&&R&&e.length<65536&&(e.head.name+=String.fromCharCode(R));while(R&&c<f);if(e.flags&512&&(e.check=Y(e.check,i,c,n)),f-=c,n+=c,R)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=_r;case _r:if(e.flags&4096){if(f===0)break e;c=0;do R=i[n+c++],e.head&&R&&e.length<65536&&(e.head.comment+=String.fromCharCode(R));while(R&&c<f);if(e.flags&512&&(e.check=Y(e.check,i,c,n)),f-=c,n+=c,R)break e}else e.head&&(e.head.comment=null);e.mode=pr;case pr:if(e.flags&512){for(;o<16;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}if(a!==(e.check&65535)){r.msg="header crc mismatch",e.mode=D;break}a=0,o=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),r.adler=e.check=0,e.mode=X;break;case mr:for(;o<32;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}r.adler=e.check=Nr(a),a=0,o=0,e.mode=We;case We:if(e.havedict===0)return r.next_out=l,r.avail_out=m,r.next_in=n,r.avail_in=f,e.hold=a,e.bits=o,Fi;r.adler=e.check=1,e.mode=X;case X:if(t===Pi||t===Me)break e;case it:if(e.last){a>>>=o&7,o-=o&7,e.mode=ot;break}for(;o<3;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}switch(e.last=a&1,a>>>=1,o-=1,a&3){case 0:e.mode=gr;break;case 1:if(zi(e),e.mode=He,t===Me){a>>>=2,o-=2;break e}break;case 2:e.mode=wr;break;case 3:r.msg="invalid block type",e.mode=D}a>>>=2,o-=2;break;case gr:for(a>>>=o&7,o-=o&7;o<32;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}if((a&65535)!==(a>>>16^65535)){r.msg="invalid stored block lengths",e.mode=D;break}if(e.length=a&65535,a=0,o=0,e.mode=nt,t===Me)break e;case nt:e.mode=Er;case Er:if(c=e.length,c){if(c>f&&(c=f),c>m&&(c=m),c===0)break e;H.arraySet(s,i,n,c,l),f-=c,n+=c,m-=c,l+=c,e.length-=c;break}e.mode=X;break;case wr:for(;o<14;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}if(e.nlen=(a&31)+257,a>>>=5,o-=5,e.ndist=(a&31)+1,a>>>=5,o-=5,e.ncode=(a&15)+4,a>>>=4,o-=4,e.nlen>286||e.ndist>30){r.msg="too many length or distance symbols",e.mode=D;break}e.have=0,e.mode=vr;case vr:for(;e.have<e.ncode;){for(;o<3;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}e.lens[M[e.have++]]=a&7,a>>>=3,o-=3}for(;e.have<19;)e.lens[M[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,y={bits:e.lenbits},v=Ne(yi,e.lens,0,19,e.lencode,0,e.work,y),e.lenbits=y.bits,v){r.msg="invalid code lengths set",e.mode=D;break}e.have=0,e.mode=Sr;case Sr:for(;e.have<e.nlen+e.ndist;){for(;x=e.lencode[a&(1<<e.lenbits)-1],E=x>>>24,O=x>>>16&255,A=x&65535,!(E<=o);){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}if(A<16)a>>>=E,o-=E,e.lens[e.have++]=A;else{if(A===16){for(S=E+2;o<S;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}if(a>>>=E,o-=E,e.have===0){r.msg="invalid bit length repeat",e.mode=D;break}R=e.lens[e.have-1],c=3+(a&3),a>>>=2,o-=2}else if(A===17){for(S=E+3;o<S;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}a>>>=E,o-=E,R=0,c=3+(a&7),a>>>=3,o-=3}else{for(S=E+7;o<S;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}a>>>=E,o-=E,R=0,c=11+(a&127),a>>>=7,o-=7}if(e.have+c>e.nlen+e.ndist){r.msg="invalid bit length repeat",e.mode=D;break}for(;c--;)e.lens[e.have++]=R}}if(e.mode===D)break;if(e.lens[256]===0){r.msg="invalid code -- missing end-of-block",e.mode=D;break}if(e.lenbits=9,y={bits:e.lenbits},v=Ne(Or,e.lens,0,e.nlen,e.lencode,0,e.work,y),e.lenbits=y.bits,v){r.msg="invalid literal/lengths set",e.mode=D;break}if(e.distbits=6,e.distcode=e.distdyn,y={bits:e.distbits},v=Ne(Lr,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,y),e.distbits=y.bits,v){r.msg="invalid distances set",e.mode=D;break}if(e.mode=He,t===Me)break e;case He:e.mode=Ze;case Ze:if(f>=6&&m>=258){r.next_out=l,r.avail_out=m,r.next_in=n,r.avail_in=f,e.hold=a,e.bits=o,Di(r,g),l=r.next_out,s=r.output,m=r.avail_out,n=r.next_in,i=r.input,f=r.avail_in,a=e.hold,o=e.bits,e.mode===X&&(e.back=-1);break}for(e.back=0;x=e.lencode[a&(1<<e.lenbits)-1],E=x>>>24,O=x>>>16&255,A=x&65535,!(E<=o);){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}if(O&&(O&240)===0){for(k=E,_=O,N=A;x=e.lencode[N+((a&(1<<k+_)-1)>>k)],E=x>>>24,O=x>>>16&255,A=x&65535,!(k+E<=o);){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}a>>>=k,o-=k,e.back+=k}if(a>>>=E,o-=E,e.back+=E,e.length=A,O===0){e.mode=br;break}if(O&32){e.back=-1,e.mode=X;break}if(O&64){r.msg="invalid literal/length code",e.mode=D;break}e.extra=O&15,e.mode=Tr;case Tr:if(e.extra){for(S=e.extra;o<S;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}e.length+=a&(1<<e.extra)-1,a>>>=e.extra,o-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=xr;case xr:for(;x=e.distcode[a&(1<<e.distbits)-1],E=x>>>24,O=x>>>16&255,A=x&65535,!(E<=o);){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}if((O&240)===0){for(k=E,_=O,N=A;x=e.distcode[N+((a&(1<<k+_)-1)>>k)],E=x>>>24,O=x>>>16&255,A=x&65535,!(k+E<=o);){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}a>>>=k,o-=k,e.back+=k}if(a>>>=E,o-=E,e.back+=E,O&64){r.msg="invalid distance code",e.mode=D;break}e.offset=A,e.extra=O&15,e.mode=kr;case kr:if(e.extra){for(S=e.extra;o<S;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}e.offset+=a&(1<<e.extra)-1,a>>>=e.extra,o-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){r.msg="invalid distance too far back",e.mode=D;break}e.mode=Rr;case Rr:if(m===0)break e;if(c=g-m,e.offset>c){if(c=e.offset-c,c>e.whave&&e.sane){r.msg="invalid distance too far back",e.mode=D;break}c>e.wnext?(c-=e.wnext,T=e.wsize-c):T=e.wnext-c,c>e.length&&(c=e.length),w=e.window}else w=s,T=l-e.offset,c=e.length;c>m&&(c=m),m-=c,e.length-=c;do s[l++]=w[T++];while(--c);e.length===0&&(e.mode=Ze);break;case br:if(m===0)break e;s[l++]=e.length,m--,e.mode=Ze;break;case ot:if(e.wrap){for(;o<32;){if(f===0)break e;f--,a|=i[n++]<<o,o+=8}if(g-=m,r.total_out+=g,e.total+=g,g&&(r.adler=e.check=e.flags?Y(e.check,s,g,l-g):ft(e.check,s,g,l-g)),g=m,(e.flags?a:Nr(a))!==e.check){r.msg="incorrect data check",e.mode=D;break}a=0,o=0}e.mode=Ir;case Ir:if(e.wrap&&e.flags){for(;o<32;){if(f===0)break e;f--,a+=i[n++]<<o,o+=8}if(a!==(e.total&4294967295)){r.msg="incorrect length check",e.mode=D;break}a=0,o=0}e.mode=Cr;case Cr:v=Bi;break e;case D:v=Dr;break e;case ct:return lt;case Mi:default:return G}return r.next_out=l,r.avail_out=m,r.next_in=n,r.avail_in=f,e.hold=a,e.bits=o,(e.wsize||g!==r.avail_out&&e.mode<D&&(e.mode<ot||t!==ar))&&Mr(r,r.output,r.next_out,g-r.avail_out)?(e.mode=ct,lt):(I-=r.avail_in,g-=r.avail_out,r.total_in+=I,r.total_out+=g,e.total+=g,e.wrap&&g&&(r.adler=e.check=e.flags?Y(e.check,s,g,r.next_out-g):ft(e.check,s,g,r.next_out-g)),r.data_type=e.bits+(e.last?64:0)+(e.mode===X?128:0)+(e.mode===He||e.mode===nt?256:0),(I===0&&g===0||t===ar)&&v===le&&(v=Ui),v)}function Yi(r){if(!r||!r.state)return G;var t=r.state;return t.window&&(t.window=null),r.state=null,le}function Qi(r,t){var e;return!r||!r.state||(e=r.state,(e.wrap&2)===0)?G:(e.head=t,t.done=!1,le)}function Xi(r,t){var e=t.length,i,s,n;return!r||!r.state||(i=r.state,i.wrap!==0&&i.mode!==We)?G:i.mode===We&&(s=1,s=ft(s,t,e,0),s!==i.check)?Dr:(n=Mr(r,t,e,e),n?(i.mode=ct,lt):(i.havedict=1,le))}K.inflateReset=Br;K.inflateReset2=Fr;K.inflateResetKeep=Pr;K.inflateInit=Ki;K.inflateInit2=Ur;K.inflate=qi;K.inflateEnd=Yi;K.inflateGetHeader=Qi;K.inflateSetDictionary=Xi;K.inflateInfo="pako inflate (from Nodeca project)"});var jr=W(me=>{"use strict";d();h();var Ge=Ce(),Zr=!0,Wr=!0;try{String.fromCharCode.apply(null,[0])}catch{Zr=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Wr=!1}var Ae=new Ge.Buf8(256);for(V=0;V<256;V++)Ae[V]=V>=252?6:V>=248?5:V>=240?4:V>=224?3:V>=192?2:1;var V;Ae[254]=Ae[254]=1;me.string2buf=function(r){var t,e,i,s,n,l=r.length,f=0;for(s=0;s<l;s++)e=r.charCodeAt(s),(e&64512)===55296&&s+1<l&&(i=r.charCodeAt(s+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),s++)),f+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Ge.Buf8(f),n=0,s=0;n<f;s++)e=r.charCodeAt(s),(e&64512)===55296&&s+1<l&&(i=r.charCodeAt(s+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),s++)),e<128?t[n++]=e:e<2048?(t[n++]=192|e>>>6,t[n++]=128|e&63):e<65536?(t[n++]=224|e>>>12,t[n++]=128|e>>>6&63,t[n++]=128|e&63):(t[n++]=240|e>>>18,t[n++]=128|e>>>12&63,t[n++]=128|e>>>6&63,t[n++]=128|e&63);return t};function Gr(r,t){if(t<65534&&(r.subarray&&Wr||!r.subarray&&Zr))return String.fromCharCode.apply(null,Ge.shrinkBuf(r,t));for(var e="",i=0;i<t;i++)e+=String.fromCharCode(r[i]);return e}me.buf2binstring=function(r){return Gr(r,r.length)};me.binstring2buf=function(r){for(var t=new Ge.Buf8(r.length),e=0,i=t.length;e<i;e++)t[e]=r.charCodeAt(e);return t};me.buf2string=function(r,t){var e,i,s,n,l=t||r.length,f=new Array(l*2);for(i=0,e=0;e<l;){if(s=r[e++],s<128){f[i++]=s;continue}if(n=Ae[s],n>4){f[i++]=65533,e+=n-1;continue}for(s&=n===2?31:n===3?15:7;n>1&&e<l;)s=s<<6|r[e++]&63,n--;if(n>1){f[i++]=65533;continue}s<65536?f[i++]=s:(s-=65536,f[i++]=55296|s>>10&1023,f[i++]=56320|s&1023)}return Gr(f,i)};me.utf8border=function(r,t){var e;for(t=t||r.length,t>r.length&&(t=r.length),e=t-1;e>=0&&(r[e]&192)===128;)e--;return e<0||e===0?t:e+Ae[r[e]]>t?e:t}});var zr=W((Ea,Kr)=>{"use strict";d();h();Kr.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var Yr=W((Sa,qr)=>{"use strict";d();h();qr.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var Xr=W((ka,Qr)=>{"use strict";d();h();function Vi(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}Qr.exports=Vi});var $r=W((Ia,Vr)=>{"use strict";d();h();function $i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}Vr.exports=$i});var ei=W(Le=>{"use strict";d();h();var ge=Hr(),Oe=Ce(),je=jr(),B=zr(),ut=Yr(),Ji=Xr(),en=$r(),Jr=Object.prototype.toString;function ce(r){if(!(this instanceof ce))return new ce(r);this.options=Oe.assign({chunkSize:16384,windowBits:0,to:""},r||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(r&&r.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ji,this.strm.avail_out=0;var e=ge.inflateInit2(this.strm,t.windowBits);if(e!==B.Z_OK)throw new Error(ut[e]);if(this.header=new en,ge.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=je.string2buf(t.dictionary):Jr.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=ge.inflateSetDictionary(this.strm,t.dictionary),e!==B.Z_OK)))throw new Error(ut[e])}ce.prototype.push=function(r,t){var e=this.strm,i=this.options.chunkSize,s=this.options.dictionary,n,l,f,m,a,o=!1;if(this.ended)return!1;l=t===~~t?t:t===!0?B.Z_FINISH:B.Z_NO_FLUSH,typeof r=="string"?e.input=je.binstring2buf(r):Jr.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;do{if(e.avail_out===0&&(e.output=new Oe.Buf8(i),e.next_out=0,e.avail_out=i),n=ge.inflate(e,B.Z_NO_FLUSH),n===B.Z_NEED_DICT&&s&&(n=ge.inflateSetDictionary(this.strm,s)),n===B.Z_BUF_ERROR&&o===!0&&(n=B.Z_OK,o=!1),n!==B.Z_STREAM_END&&n!==B.Z_OK)return this.onEnd(n),this.ended=!0,!1;e.next_out&&(e.avail_out===0||n===B.Z_STREAM_END||e.avail_in===0&&(l===B.Z_FINISH||l===B.Z_SYNC_FLUSH))&&(this.options.to==="string"?(f=je.utf8border(e.output,e.next_out),m=e.next_out-f,a=je.buf2string(e.output,f),e.next_out=m,e.avail_out=i-m,m&&Oe.arraySet(e.output,e.output,f,m,0),this.onData(a)):this.onData(Oe.shrinkBuf(e.output,e.next_out))),e.avail_in===0&&e.avail_out===0&&(o=!0)}while((e.avail_in>0||e.avail_out===0)&&n!==B.Z_STREAM_END);return n===B.Z_STREAM_END&&(l=B.Z_FINISH),l===B.Z_FINISH?(n=ge.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===B.Z_OK):(l===B.Z_SYNC_FLUSH&&(this.onEnd(B.Z_OK),e.avail_out=0),!0)};ce.prototype.onData=function(r){this.chunks.push(r)};ce.prototype.onEnd=function(r){r===B.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Oe.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function dt(r,t){var e=new ce(t);if(e.push(r,!0),e.err)throw e.msg||ut[e.err];return e.result}function tn(r,t){return t=t||{},t.raw=!0,dt(r,t)}Le.Inflate=ce;Le.inflate=dt;Le.inflateRaw=tn;Le.ungzip=dt});d();h();var De=ne(ve());d();h();d();h();var Mt=ne(ve());var{BigNumber:ui}=de;function Ut(r,t){let{chainId:e,isNativeToken:i,balance:s,availableBalance:n}=t,{fromToStore:l,accountStore:f}=xe(),{getTokenBalanceByAccount:m}=l,a=yt(e,Ct.BTC_MAINNET)&&i;(0,Mt.useEffect)(()=>{a&&ui(n).isNaN()&&m(r,t)},[a,s,n,f.computedSpecialWalletAddress])}function di(){let{fromToStore:r}=xe(),{from:t,to:e}=r;Ut(Xe.FROM,Te(t)),Ut(Xe.TO,Te(e))}var Ht=di;function hi(){Ht()}var Zt=hi;function _i(){let{accountStore:r,fromToStore:t}=xe(),{computedAccountId:e,address:i,setFromChainId:s}=r,{from:n,to:l,setBalanceState:f,getSwapTokenBalance:m,computedIsToAddressEqualsCurrentToAddress:a}=t,{amount:o,chainId:I}=n;(0,De.useEffect)(()=>{Dt(I)&&s(I)},[I,s]),(0,De.useEffect)(()=>{m()},[e,m]),(0,De.useEffect)(()=>{f({amount:o,address:i,from:n,to:l})},[o,i,n,l,f,a]),Zt()}var vn=_i;d();h();var fe=ne(ve()),ye=ne(ci());d();h();var se={navigator:"_navigator_18l0n_1",title:"_title_18l0n_8",back:"_back_18l0n_13","right-icon":"_right-icon_18l0n_14",rightIcon:"_right-icon_18l0n_14",icon:"_icon_18l0n_36"};var pi=({className:r,onBack:t,title:e,rightIcon:i,settingIcon:s,settingIconClick:n=()=>{}})=>fe.default.createElement("div",{className:(0,ye.default)(se.navigator,r)},fe.default.createElement("div",{className:se.back},fe.default.createElement(Ye,{onClick:t,className:(0,ye.default)("okds-arrow-chevron-left-centered-md",se.icon)})),fe.default.createElement("div",{className:se.title},e),i&&fe.default.createElement("div",{className:se.rightIcon},i),s&&fe.default.createElement(Ye,{className:(0,ye.default)("okds-setting",se.rightIcon),style:{fontSize:"24px"},onClick:n})),Ln=pi;d();h();var jt=ne(ve());d();h();var Pe=ne(ve());d();h();var Wt={"warn-state-container":"_warn-state-container_6j01f_1",warnStateContainer:"_warn-state-container_6j01f_1","error-state-container":"_error-state-container_6j01f_2",errorStateContainer:"_error-state-container_6j01f_2","error-state-title":"_error-state-title_6j01f_15",errorStateTitle:"_error-state-title_6j01f_15","error-state-content":"_error-state-content_6j01f_21",errorStateContent:"_error-state-content_6j01f_21","add-funds":"_add-funds_6j01f_28",addFunds:"_add-funds_6j01f_28",warning:"_warning_6j01f_33",error:"_error_6j01f_2","ledger-network-tips":"_ledger-network-tips_6j01f_39",ledgerNetworkTips:"_ledger-network-tips_6j01f_39",mb16:"_mb16_6j01f_42","error-icon":"_error-icon_6j01f_45",errorIcon:"_error-icon_6j01f_45","warn-icon":"_warn-icon_6j01f_46",warnIcon:"_warn-icon_6j01f_46"};var mi=({chainName:r})=>{let t=()=>{let e=Qe.tip({infoType:Qe.Tip.INFO_TYPE.default,children:L("swaptrade_top_modaldesc_ledger_supported_paychains"),confirmText:L("swaptrade_card_btn_value_difference_gotit"),onConfirm:()=>{e.destroy()},confirmBtnProps:{block:!0,size:Et.SIZE.md}})};return Pe.default.createElement(Pe.default.Fragment,null,L("swaptrade_top_alert_desc_paychain_not_supported",{payChain:r}),Pe.default.createElement(Se,{className:Wt.ledgerNetworkTips,type:Se.TYPE.primary,weight:Se.WEIGHT.muted,size:Se.SIZE.xs,onClick:t},L("swaptrade_top_alert_textbtn_view_supported_chains")))},Gt=mi;var gi=r=>{let t=L("swaptrade_adjustslip_modal_title_wrongnetwork"),e=L("swaptrade_card_alert_switch_wallet_to_match",{chainName:r});return he()?(t=L("swaptrade_extension_mid_plzswitch_wallet"),e=L("swaptrade_extension_mid_plzswitch_wallettips",{chain:r})):Ft&&(t=L("swaptrade_top_alert_title_please_switch_network"),e=jt.default.createElement(Gt,{chainName:r})),{title:t,content:e}},J={default:()=>({type:"",title:"",content:"",errorType:""}),quote:()=>({type:"error",title:L("swap_title_quote_server_error"),content:L("swaptrade_quote_server_error_content"),errorType:$.QUOTE_ERROR}),honeypot:r=>({type:"error",title:L("wallet_swap_alert_scamtoken",{tokenSymbol:r}),titleEquation:L("wallet_swap_alert_scamtoken",{tokenSymbol:q(r)}),content:L("wallet_swap_toast_scam_token_desc"),errorType:$.QUOTE_ERROR}),leverageToken:(r,t)=>{let e=r&&t?L("swaptrade_mid_alert_highrisk_both_token",{sellToken:r.tokenSymbol,receiveToken:t.tokenSymbol}):L("swaptrade_mid_alert_highrisk_token",{token:(r==null?void 0:r.tokenSymbol)||(t==null?void 0:t.tokenSymbol)}),i=r&&t?L("swaptrade_mid_alert_highrisk_both_token",{sellToken:q(r.tokenSymbol),receiveToken:q(t.tokenSymbol)}):L("swaptrade_mid_alert_highrisk_token",{token:q(r==null?void 0:r.tokenSymbol)||q(t==null?void 0:t.tokenSymbol)});return{type:"error",title:e,titleEquation:i,content:L("swaptrade_top_text_protect_capital"),errorType:$.QUOTE_ERROR}},wrongNetwork:r=>{let{title:t,content:e}=gi(r);return{type:"warning",title:t,content:e,errorType:$.NETWORK_ERROR}},feeConfig:()=>({type:"error",title:L("swaptrade_card_reminder_title_parameter_error"),content:L("swaptrade_card_reminder_desc_feepercent",{feePercent:"feePercent",value1:"0",value2:ae(bt,{needZero:!1})}),errorType:$.FEE_CONFIG_ERROR}),accountErrorTips:()=>({type:"warning",title:L("swaptrade_adjustslip_modal_title_wrongnetwork"),content:L("swaptrade_mid_alert_desc_vm_wallet"),errorType:$.FEE_CONFIG_ERROR})},ro={handleBalanceErrorState:({state:r})=>r.errorType===$.BALANCE_ERROR?J.default():"",handleQuoteErrorState:({quote:r,honeypotToken:t,hasLeverageToken:e,leverageTokenPair:i=[]})=>{let{quoteError:s}=r;return s?J.quote():t?J.honeypot(t.tokenSymbol):e?J.leverageToken(i[0],i[1]):""},handleNetworkErrorState:r=>(Pt({type:Tt.SWITCH_WALLET}),J.wrongNetwork(r)),handleDefaultState:()=>J.default(),handleFeeConfigErrorState:()=>J.feeConfig(),handleFacetTokenAccountErrorState:()=>J.accountErrorTips()};d();h();d();h();function $e(){return he()?{walletType:"okwallet-extension"}:Rt.getProjectStorage("onChain")}var Kt={HEART:"heart",HEART_FINISH:"heartFinish",UPDATE_HASH:"updateHash",UPDATE_HASH_ERROR:"updateHashError",SAVE_ORDER:"saveOrder",SAVE_ORDER_PARAMS:"saveOrderParams",SAVE_ORDER_ERROR:"saveOrderError",SEND_ERROR:"sendError",ON_WALLET_FAIL:"onWalletFail",PAYLOAD:"payload",UPDATE_NONCE:"updateNonce",UPDATE_NONCE_FAIL:"updateNonceFail",CLOSE_CONFIRM_SWAP:"closeConfirmSwap",BEFOREUNLOAD:"beforeunload",CANCEL_ORDER:"cancelOrder",REDEEM_ORDER:"redeemOrder",ERROR_BOUNDARY:"errorBoundary",STUFF_LOG:"stuffLog",GET_LIMIT_CALL_DATA_ERROR:"getLimitCallDataError",SAVE_APPROVE:"saveApprove",SAVE_APPROVE_ERROR:"saveApproveError",APPROVE_DATA:"approveData",APPROVE_TOKEN_ERROR:"approveTokenError",CHAIN_ID_ADDRESS_MAP_IS_EMPTY:"chainIdAddressMapIsEmpty",UPDATE_BTC_BALANCE_ERROR_BEFORE_SWAP:"updateBtcBalanceErrorBeforeSwap",CHAIN_INFO:"chainInfo",UPDATE_APPROVAL_GAS_INFO_ERROR:"updateApprovalGasInfoError",WALLET_INFO:"walletInfo",OVER_VIEW_PRE_DATA_ERROR:"overViewInfoPreDataError",TRANSACTION_HISTORY_PRE_DATA_ERROR:"transactionHistoryPreDataError",REDEEM_ORDER_CALL_DATA:"redeemOrderCallData",REDEEM_ORDER_CALL_DATA_ERROR:"redeemOrderCallDataError",REDEEM_ORDER_ERROR:"redeemOrderError",INTENT_QUOTE_CALLDATA_ERROR:"intentQuoteCallDataError",INTENT_SWAP_SIGN_ERROR:"intentSwapSignError",INTENT_ORDER_CREATE_ERROR:"intentOrderCreateError",INTENT_SWAP_PROCESS_ERROR:"intentSwapProcessError",REGISTER_CO_LISTING_ERROR:"registerCoListingError",BEFORE_SEND_TRANSACTION_ERROR:"beforeSendTransactionError",TRANSACTION_HISTORY_LIST_ERROR:"transaction_history_list_error",TRANSACTION_HISTORY_INFO_ERROR:"transaction_history_info_error",EXTENSION_SWITCH_BTC_ADDRESS_ERROR:"extensionSwitchBtcAddressError"};var Ei={business:"dex"},Je=class{constructor(t){u(this,"setTags",t=>{this.tags={...this.tags,...t}});u(this,"extendTags",()=>{let{walletType:t,scanAppType:e}=$e();return Lt({walletType:t,scanAppType:e,taskId:this.uid,...this.tags},At)});u(this,"wrapHandle",(t,e,i)=>{t(e,{...i,tags:{...this.extendTags(),...i==null?void 0:i.tags}})});u(this,"debug",(...t)=>{this.wrapHandle(oe.debug,...t)});u(this,"info",(...t)=>{this.wrapHandle(oe.info,...t)});u(this,"error",(...t)=>{this.wrapHandle(oe.error,...t)});u(this,"warn",(...t)=>{this.wrapHandle(oe.warn,...t)});u(this,"stuff",(...t)=>{t.length===1&&typeof t[0]=="string"?this.wrapHandle(oe.info,Kt.STUFF_LOG,{msg:t[0]}):this.wrapHandle(oe.info,Kt.STUFF_LOG,...t)});u(this,"generateUUID",()=>{this.uid=Bt()});u(this,"timerRef",null);u(this,"heartNumber",0);u(this,"uid","");u(this,"keepLive",()=>{this.generateUUID(),this.heartNumber=0,this.timerRef&&clearInterval(this.timerRef),this.heartCheck(),this.timerRef=setInterval(()=>{this.heartCheck()},30*1e3)});u(this,"heartCheck",()=>{this.info("heart",{tags:{heartNumber:this.heartNumber}}),this.heartNumber++});u(this,"removeKeep",()=>{this.timerRef&&clearInterval(this.timerRef),this.info("heart finish",{tags:{heartNumber:this.heartNumber}}),this.heartNumber=0,this.uid=""});this.tags=t}};var zt=new Je(Ei);d();h();d();h();d();h();d();h();d();h();var Re=class{constructor(t,e){u(this,"percent","");u(this,"exactPercent","");u(this,"dexRouterPercent","");Object.assign(this,e),this.dexRouterPercent=t}get computedPercent(){return this.percent?ae(this.percent,{needZero:!1}):""}get computedExactPercent(){let t=new de.BigNumber(this.percent).multipliedBy(this.dexRouterPercent).dividedBy(100).toNumber();return Ot(t)?"":ae(t,{needZero:!1})}};var be=class{constructor(t,e,i){u(this,"fromToken",{});u(this,"toToken",{});u(this,"dexQuoteInfoList",[]);var f,m,a;let{fromToken:s={},toToken:n={},dexQuoteInfoList:l}=e||{};this.fromToken=s,this.toToken=n,this.dialogHeaderText=i?q((f=this.toToken)==null?void 0:f.tokenSymbol):`${q((m=this.fromToken)==null?void 0:m.tokenSymbol)}/${q((a=this.toToken)==null?void 0:a.tokenSymbol)}`,_e(l)&&(this.dexQuoteInfoList=l.map(o=>new Re(t,o)))}};var Ie=class{constructor(t,e){u(this,"percent","");u(this,"router","");u(this,"subRouterList",[]);u(this,"flag","");let{percent:i="",router:s="",flag:n="",subRouterList:l}=t||{};this.percent=i,this.router=s,this.flag=n,_e(l)&&(this.subRouterList=l.map(f=>new be(i,f,e)))}get computedPercent(){return this.percent?ae(this.percent,{needZero:!1}):""}};var ee=class{constructor(t,e=!1){u(this,"data",[]);_e(t)&&(this.data=t.map(i=>new Ie(i,e)))}};var{BigNumber:wi}=de,j={DEFAULT:0,LOADING:1,DISCONNECTION:2,NO_DATA:3,SHOW_DATA:4},Q={DISMISS:"0",FROM:"1",BRIDGE:"2",TO:"3"},et={IN_CHAIN:"0",CROSS_CHAIN:"1"},Fe={NORMAL_PERCENT:0,EXACT_PERCENT:1},tt=class{constructor({swapStore:t,fromToStore:e}){u(this,"showEntryForPc",!1);u(this,"isShowShowAll",!0);u(this,"updateIsShowShowAll",(t=!1)=>{this.isShowShowAll=t});u(this,"status",j.LOADING);u(this,"percentType",Fe.NORMAL_PERCENT);u(this,"swapType",et.IN_CHAIN);u(this,"tokenInfo",{dexRouter:{token0:{},token1:{}},fromDexRouter:{token0:{},token1:{}},bridge:{token0:{},token1:{}},toDexRouter:{token0:{},token1:{}}});u(this,"dexRouterList",[]);u(this,"fromDexRouterList",[]);u(this,"toDexRouterToList",[]);u(this,"bridgeRouterList",[]);u(this,"getInfoByMenuType",t=>{if(this.swapType===et.IN_CHAIN)return{routerList:this.dexRouterList,tokenInfo:this.tokenInfo.dexRouter};switch(t){case Q.FROM:return{routerList:this.fromDexRouterList,tokenInfo:this.tokenInfo.fromDexRouter};case Q.BRIDGE:return{routerList:this.bridgeRouterList,tokenInfo:this.tokenInfo.bridge};case Q.TO:return{routerList:this.toDexRouterToList,tokenInfo:this.tokenInfo.toDexRouter};default:return{routerList:[],tokenInfo:this.tokenInfo.dexRouter}}});u(this,"currentMenu",Q.DISMISS);u(this,"menuList",[]);u(this,"showMenuList",!0);u(this,"isCrossBridgeOnly",!1);u(this,"showXRouteModal",Nt.SWAP);u(this,"subRouterData",null);u(this,"subRouterModal",!1);u(this,"setSubRouterModal",t=>{this.subRouterModal=t});u(this,"dexQuoteInfoListData",[]);u(this,"setDexQuoteInfoListData",t=>{this.dexQuoteInfoListData=t});u(this,"oldRouterModal",!1);this.fromToStore=e||{},this.quoteStore=t.quoteStore||{},St(this,{},{autoBind:!0}),vt(()=>{var i,s,n;return{isFetchQuoting:(i=this.quoteStore.quote)==null?void 0:i.isFetchQuoting,bestRoute:this.quoteStore.computedRouterForSmartRouterStore,quoteError:(s=this.quoteStore.quote)==null?void 0:s.quoteError,quoteNull:(n=this.quoteStore.quote)==null?void 0:n.quoteNull,fromToken:this.fromToStore.from,toToken:this.fromToStore.to}},({isFetchQuoting:i,bestRoute:s,quoteError:n,quoteNull:l})=>{let f=Te(s);this.setStatusByQuote({isFetchQuoting:i,quoteError:n,bestRoute:f,quoteNull:l}),this.updateData(f||{})},{equals:wt.shallow})}setShowEntryForPc(t){this.showEntryForPc=t}setStatus(t){let i=Ve(j).some(s=>s===t);this.status=i?t:j.DEFAULT}setStatusByQuote({isFetchQuoting:t,quoteError:e,bestRoute:i,quoteNull:s}){var n;if(!e&&!i&&!s&&wi((n=this.fromToStore)==null?void 0:n.computedTypedValue).gt(0)){this.setStatus(j.LOADING);return}if(t&&this.status!==j.SHOW_DATA&&this.status!==j.NO_DATA){this.setStatus(j.LOADING);return}if(e){this.setStatus(j.DISCONNECTION);return}if(s&&z(i==null?void 0:i.dexRouterList)&&z(i==null?void 0:i.fromDexRouterList)&&z(i==null?void 0:i.bridge)&&z(i==null?void 0:i.toDexRouterToList)){this.setStatus(j.NO_DATA);return}if(!z(i==null?void 0:i.dexRouterList)||!z(i==null?void 0:i.fromDexRouterList)||!z(i==null?void 0:i.bridge)||!z(i==null?void 0:i.toDexRouterToList)){this.setStatus(j.SHOW_DATA);return}this.setStatus(j.DEFAULT)}switchPercentType(){this.percentType=this.percentType===Fe.NORMAL_PERCENT?Fe.EXACT_PERCENT:Fe.NORMAL_PERCENT}setSwapType(t){this.swapType=t}updateTokenInfo(t){ke(this.tokenInfo,"dexRouter",{token0:this.fromToStore.from||{},token1:this.fromToStore.to||{}}),ke(this.tokenInfo,"fromDexRouter",{token0:P(t,"fromToken",{}),token1:P(t,"fromSwapToTokenInfo",{})}),ke(this.tokenInfo,"bridge",{token0:P(t,this.isCrossBridgeOnly?"fromToken":"bridge.crossFromToken",{}),token1:P(t,this.isCrossBridgeOnly?"toToken":"bridge.crossToToken",{})}),ke(this.tokenInfo,"toDexRouter",{token0:P(t,"toSwapFromTokenInfo",{}),token1:P(t,"toToken",{})})}setDexRouterList(t){this.dexRouterList=new ee(t).data}setFromDexRouterList(t){this.fromDexRouterList=new ee(t).data}setToDexRouterToList(t){this.toDexRouterToList=new ee(t).data}setBridgeRouterList(t,e){let i=(s={},n)=>({...s,tokenSymbol:n,fromBridge:!0});this.bridgeRouterList=new ee([{percent:P(e,"percent")||"100",subRouterList:[{dexQuoteInfoList:[{dexName:P(e,"bridgeName"),percent:"100",okLinkUrl:P(e,"fromPoolAddress")}],fromToken:{},toToken:i(P(e,"crossFromToken"),P(e,"fromPoolName"))},{dexQuoteInfoList:[{dexName:P(e,"bridgeName"),percent:"100",okLinkUrl:P(e,"toPoolAddress")}],fromToken:{},toToken:i(P(e,"crossToToken"),P(e,"toPoolName"))}]}],!0).data}checkIsManyQuote(t){if(t.length>1)return!1;let e=t.length>0?P(t,[0,"subRouterList"],[]):[];return e.length>1?!1:P(e,[0,"dexQuoteInfoList","length"])>5}checkIsFewRouter(t){return t.length===1&&P(t,[0,"subRouterList","length"])<3}get computedIsFewRouter(){let{routerList:t}=this.computedCurrentRouter;return this.checkIsFewRouter(t)}get computedIsManyQuoteInfo(){let{routerList:t}=this.computedCurrentRouter;return this.checkIsManyQuote(t)}get computedCurrentRouter(){return this.getInfoByMenuType(this.currentMenu)}setCurrentMenu(t){let i=Ve(Q).some(s=>s===t);this.currentMenu=i?t:Q.DISMISS}setMenuListAndCurrentMenu(t,e){if(!Array.isArray(t)||z(t))this.showMenuList=!1,this.isCrossBridgeOnly=!1,this.setCurrentMenu(Q.DISMISS);else{this.menuList=t;let i=P(t,[0,"smartRoutingMenuType"]);(!this.showMenuList||this.currentMenu===Q.DISMISS||!t.some(s=>P(s,"smartRoutingMenuType")===this.currentMenu))&&this.setCurrentMenu(i),this.isCrossBridgeOnly=t.length===1&&i===Q.BRIDGE&&e===et.CROSS_CHAIN,this.showMenuList=!this.isCrossBridgeOnly}}updateData(t){let{swapType:e,smartRoutingMenuVoList:i,dexRouterList:s,fromDexRouterList:n,bridge:l,toDexRouterToList:f}=t;this.setSwapType(e),this.setMenuListAndCurrentMenu(i,e),this.setDexRouterList(s),this.setFromDexRouterList(n),this.setBridgeRouterList(t,l),this.setToDexRouterToList(f),this.updateTokenInfo(t)}setXRouteModal(t){this.showXRouteModal=t}setSubRouterData(t){this.subRouterData=t}setOldRouterModal(t){this.oldRouterModal=t}};d();h();d();h();var oi=ne(ei());d();h();d();h();d();h();d();h();d();h();var Ke=()=>Boolean(typeof window>"u"||process.env.SSR_ENV);var ht={PING:"ping",PONG:"pong"},Ee={CONNECTED:0,DISCONNECTED:1,PING_PENDING:2,PING_PENDING_OVER:3},te=!Ke(),ze=te&&!window.inOKXExtension;var rn=/^\{|\[/,ii="",ti,ri;te&&(ii=(ri=(ti=window==null?void 0:window.okGlobal)==null?void 0:ti.socketBaseUrls)==null?void 0:ri.trade);var qe={isPushingJSON(r){return rn.test(r)},getRealConnectUrl(r=ii){return r}};d();h();var ni={decode(r){let t=0,e,i,s,n,l,f=[],m=r.length;for(;t<m;)e=r[t++],e<128?l=e:e<224?(i=r[t++],l=(e&31)<<6|i&63):e<240?(i=r[t++],s=r[t++],l=(e&15)<<12|(i&63)<<6|s&63):(i=r[t++],s=r[t++],n=r[t++],l=(e&7)<<18|(i&63)<<12|(s&63)<<6|n&63),f.push(String.fromCodePoint(l));return f.join("")}};var ai=ni;if(te&&ze){let{location:r,TextDecoder:t}=window;t&&(ai=new t("utf-8")),window.$has_debug_push_param$=r.href.indexOf("debug_push=true")>-1}var _t={};function pt(r={}){let t=this,e=qe.getRealConnectUrl(r.connectUrl),i={maxPendingTime:5e3,maxReconnectTime:1e4,maxWaitingResponseTime:1e4,maxSleepRecoveringTime:3e3,...r,connectUrl:e},s=_t[i.connectUrl];if(s)return s;let n={isConnected:!1,isConnectPending:!1,isClosingByClient:!1,isKillingUnWakeUp:!1,isPingPending:!1},l,f={reconnectTimer:0,handlePendingTimer:0,discontinueTimer:0,killingUnWakeUpTimer:0,pingPendingTimer:0},m={currReconnectTime:0,lastReceivingTime:0},a=[],o=[],I=[],g=[],c=[],T=()=>{},w=()=>{this.isConnected()&&(T(),f.pingPendingTimer=setTimeout(()=>{n.isPingPending=!0,g.forEach(p=>{p(Ee.PING_PENDING)})},i.maxPendingTime))},x=(p,F)=>{for(let Z=0;Z<p.length;Z++)if(p[Z]===F){p.splice(Z,1);break}},E=()=>{n.isPingPending=!1,clearTimeout(f.pingPendingTimer)},O=()=>{clearInterval(f.handlePendingTimer)},A=()=>{m.currReconnectTime=0,f.reconnectTimer&&(clearTimeout(f.reconnectTimer),delete f.reconnectTimer)},k=()=>{!this.isConnected()&&!n.isConnectPending&&(A(),_())},_=function(){l=new WebSocket(i.connectUrl),n.isConnectPending=!0,l.onopen=N,l.onmessage=v,l.onclose=y,l.onerror=S,f.handlePendingTimer=setInterval(t.handleConnectPending,i.maxPendingTime)},N=function(){n.isConnected=!0,n.isConnectPending=!1,n.isClosingByClient=!1,A(),O(),o.forEach(p=>{p(),p.triggered=!0}),g.forEach(p=>{p(Ee.CONNECTED)})},R=function(){n.isPingPending&&g.forEach(p=>{p(Ee.PING_PENDING_OVER)}),E()},v=function(p){if(m.lastReceivingTime=Date.now(),clearTimeout(f.discontinueTimer),clearTimeout(f.killingUnWakeUpTimer),f.discontinueTimer=setTimeout(w,i.maxPendingTime),p.data instanceof Blob){let F=p.data,Z=new FileReader,re={done:!1,resultString:""};c.push(re),Z.onload=function(ie){if(ie.target.readyState==FileReader.DONE){let ue=(0,oi.inflateRaw)(ie.target.result);for(re.done=!0,re.resultString=ai.decode(ue);c[0]&&c[0].done;){let{resultString:we}=c.shift();we===ht.PONG&&R();let gt=qe.isPushingJSON(we)?JSON.parse(we):we;M(gt),window.$has_debug_push_param$&&(console.log(we),window.$ok_debug_push_callback$&&window.$ok_debug_push_callback$(gt))}}},Z.readAsArrayBuffer(F)}else{let F=p.data;F===ht.PONG&&R(),M(qe.isPushingJSON(F)?JSON.parse(F):F),window.$has_debug_push_param$&&console.log(F)}},b=function(){n.isConnected=!1,n.isConnectPending=!1,E(),o.forEach(p=>{p.triggered=!1})},y=function(){if(n.isKillingUnWakeUp){n.isKillingUnWakeUp=!1;return}n.isClosingByClient?b():f.reconnectTimer||S()},S=function(){b(),O(),a.forEach(F=>{F()}),g.forEach(F=>{F(Ee.DISCONNECTED)}),f.reconnectTimer=setTimeout(_,m.currReconnectTime);let p=m.currReconnectTime+1e3;p>i.maxReconnectTime&&(p=i.maxReconnectTime),m.currReconnectTime=p},M=function(p){if(p.event==="error"&&Number(p.errorCode)===30026){l.close();return}I.forEach(Z=>Z(p))};if(this.setPushDataResolver=function(p){return I.push(p),()=>{x(I,p)}},this.connect=function(){if(te){if(this.isConnected()){o.forEach(p=>{p.triggered||(p(),p.triggered=!0)});return}!this.isConnected()&&!n.isConnectPending&&_()}},this.disconnect=function(){clearTimeout(f.reconnectTimer),clearTimeout(f.discontinueTimer),delete f.reconnectTimer,delete f.discontinueTimer,n.isClosingByClient=!0,l.close(),a.length=0,o.length=0,I.length=0,T=()=>{},delete _t[i.connectUrl];let{connection:p}=navigator;p&&p.removeEventListener&&p.removeEventListener("change",this.handleConnectionChange),ze&&document.removeEventListener("visibilitychange",this.handleVisibilityChange)},this.isConnected=function(){return n.isConnected},this.sendChannel=function(p){l.readyState===WebSocket.OPEN?l.send(p):console.error("WebSocket is not in open state, can not send!")},this.onSocketConnected=function(p){return o.push(p),()=>{x(o,p)}},this.onSocketError=function(p){return a.push(p),()=>{x(a,p)}},this.onPushDiscontinue=function(p){return T=p,()=>{}},this.onStatusChange=function(p){return g.push(p),()=>{x(g,p)}},this.handleConnectPending=function(){n.isConnectPending&&a.forEach(p=>{p()})},this.handleConnectionChange=()=>{navigator.onLine===!0&&k()},this.handleVisibilityChange=()=>{if(!document.hidden){if(!this.isConnected()){k();return}Date.now()-m.lastReceivingTime>i.maxWaitingResponseTime&&(w(),f.killingUnWakeUpTimer=setTimeout(()=>{b(),A(),n.isKillingUnWakeUp=!0,l.close(),_()},i.maxSleepRecoveringTime))}},te){let{connection:p}=navigator;p&&p.addEventListener&&p.addEventListener("change",this.handleConnectionChange),ze&&document.addEventListener("visibilitychange",this.handleVisibilityChange)}return _t[i.connectUrl]=this,this}pt.STATUS=Ee;te&&!window.WebSocketCore&&(window.WebSocketCore=pt);var si=pt;var fi={DEX_PUSH_ENGINE:"dex-across-order-info",WALLET_ASSET:"wallet-asset"},nn=r=>r.reduce((t,e)=>{let{channel:i}=e;return t.has(i)||t.set(i,new Set),t},new Map),li=r=>r?r.split(",").map(e=>({token:e})):[],mt=class{constructor(){u(this,"initEventList",()=>{this.errorHandlerList=new Set,this.channelList=Object.keys(fi).map(t=>({channel:fi[t]})),this.eventList=nn(this.channelList)});u(this,"connectUrl",()=>{var e;let t="";return he()?It.global.urlConfig.serverPushUrl:(t=((e=kt.socketBaseUrls)==null?void 0:e.dex)||"",`${t}/ws/v5/iprivate`)});u(this,"init",t=>{if(!xt()){if(this.isLoginDone=!1,!t){this.tokens="";return}if(this.tokens=t,this.isConnected()){this.connectedCallback();return}this.wsInstance||(this.wsInstance=new si({connectUrl:this.connectUrl(),reconnectTime:1e4,maxPendingTime:2e4}),this.setCallbacks(),this.wsInstance.connect())}});u(this,"getInstance",()=>this.wsInstance);u(this,"setCallbacks",()=>{this.wsInstance.onSocketConnected(this.connectedCallback),this.wsInstance.onSocketError(this.errorCallback),this.wsInstance.onPushDiscontinue(()=>{this.wsInstance.sendChannel("ping")}),this.wsInstance.setPushDataResolver(t=>this.dataCallback(t))});u(this,"connectedCallback",()=>{this.login(this.tokens).then(()=>(this.subscribe(),this.isLoginDone=!0,!0)).catch(()=>{zt.stuff("ws login fail")})});u(this,"errorCallback",t=>{this.errorHandlerList.forEach(e=>{e(t)})});u(this,"dataCallback",t=>{this.isLoginDone?this.dataHandler(t):this.loginHandler(t)});u(this,"login",t=>new Promise((e,i)=>{this.isLoginDone=!1,this.wsInstance.sendChannel(JSON.stringify({op:"login",args:li(t)})),this.loginResolveFn=e,this.loginRejectFn=i}));u(this,"loginHandler",t=>{let{event:e,code:i}=t;if(e==="login"){if(Number(i)===0){this.loginResolveFn();return}this.loginRejectFn()}});u(this,"dataHandler",t=>{let{arg:e,data:i}=t,s=e==null?void 0:e.channel,n=this.eventList.get(s);(n==null?void 0:n.size)>0&&n.forEach(l=>{l(i)})});u(this,"logout",t=>{this.isConnected()&&this.wsInstance.sendChannel(JSON.stringify({op:"logout",args:li(t)}))});u(this,"subscribe",()=>{this.wsInstance.sendChannel(JSON.stringify({op:"subscribe",args:this.channelList}))});u(this,"unsubscribe",()=>{this.isConnected()&&this.wsInstance.sendChannel(JSON.stringify({op:"unsubscribe",args:this.channelList}))});u(this,"addListen",(t,e)=>{if(t==="error"){this.errorHandlerList.add(e);return}this.eventList.has(t)&&this.eventList.get(t).add(e)});u(this,"removeListen",(t,e)=>{if(t==="error"){this.errorHandlerList.delete(e);return}this.eventList.has(t)&&this.eventList.get(t).delete(e)});u(this,"removeAll",()=>{this.initEventList()});u(this,"isConnected",()=>{var t;return!!((t=this.wsInstance)!=null&&t.isConnected())});u(this,"disconnect",()=>{var t;(t=this.wsInstance)==null||t.disconnect(),this.initEventList()});this.wsInstance=null,this.initEventList()}},vs=new mt;d();h();var Rs="1",bs="2",Is="3",Cs="0";export{Kt as a,zt as b,fi as c,vs as d,vn as e,Ln as f,J as g,ro as h,j as i,et as j,Fe as k,tt as l,Rs as m,bs as n,Is as o,Cs as p};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-FLA6IX6E.js.map
