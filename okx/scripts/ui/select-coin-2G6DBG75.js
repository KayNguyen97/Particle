import{a as re,b as je}from"./chunk-B7I5GB3L.js";import{a as Ge}from"./chunk-NHCC23IQ.js";import{a as Ze}from"./chunk-IB7AGNX6.js";import{a as We,b as F}from"./chunk-QD3BLTXZ.js";import"./chunk-5QB4AVYL.js";import"./chunk-5SDFP3VE.js";import{a as Ye}from"./chunk-MYEZWV3Q.js";import{b as ze}from"./chunk-NWQEX4PI.js";import{a as Ke}from"./chunk-R7OCQATX.js";import{a as Me}from"./chunk-JEPC4J2M.js";import"./chunk-IFXL6RBY.js";import"./chunk-H5KDYYS6.js";import{a as Re}from"./chunk-P552UEY3.js";import{a as Je}from"./chunk-TQFQVAHK.js";import{a as He}from"./chunk-HI4AQDIG.js";import{a as oe}from"./chunk-TYILG3ER.js";import"./chunk-ZXEHJOAD.js";import{a as ie}from"./chunk-YM6UXGIC.js";import"./chunk-E73QHIZ6.js";import"./chunk-E2KMZQ6K.js";import"./chunk-JXT6JCNO.js";import"./chunk-PLVZLQPX.js";import"./chunk-FEET7RP6.js";import"./chunk-MBJ4MFYL.js";import"./chunk-PCY622ND.js";import"./chunk-NS35PZCP.js";import"./chunk-XOD56IFT.js";import"./chunk-BBN3UGKM.js";import"./chunk-5DEIKYJL.js";import"./chunk-QMNAWRVI.js";import"./chunk-D6ZXZUY6.js";import"./chunk-QMF5LKVF.js";import"./chunk-VMACN7YR.js";import{k as Oe}from"./chunk-PD2BTUUF.js";import"./chunk-YCMOAOGN.js";import{l as ee,m as te}from"./chunk-2HWABU7H.js";import"./chunk-APEQZGKB.js";import"./chunk-5W7SRP5N.js";import"./chunk-WYB2CUAN.js";import"./chunk-B2BOSVTW.js";import"./chunk-GUJXW3GJ.js";import"./chunk-VIS7KIVI.js";import"./chunk-F64VYES3.js";import"./chunk-DHX2X277.js";import"./chunk-67YO4IPY.js";import"./chunk-DLUAVD7X.js";import"./chunk-WRWXCAEZ.js";import"./chunk-OZ6XSJY6.js";import"./chunk-DMJQUOJT.js";import{M as Fe}from"./chunk-MTMZQEHP.js";import"./chunk-NKTQMEXG.js";import"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import"./chunk-4OTZHHYZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import{U as $e,W as Pe}from"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import"./chunk-S3ECGMEP.js";import"./chunk-PX7HII6H.js";import"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import{b as W}from"./chunk-ODS2CEAN.js";import{a as V}from"./chunk-JSAFBAMQ.js";import"./chunk-A336VZZF.js";import"./chunk-XEOGXIVD.js";import"./chunk-PCGRDRHF.js";import{k as De,l as Le}from"./chunk-IU3TYIWS.js";import{b as Ve,d as X}from"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import{p as be,u as j,v as z,x as ke}from"./chunk-X2LENRE7.js";import{Y as Q,f as U,ma as O,w as J}from"./chunk-O4EDZSHP.js";import{k as xe}from"./chunk-HU3KBV5G.js";import{b as Ee}from"./chunk-6ZPGW3YM.js";import"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import"./chunk-FLCN6MAI.js";import"./chunk-7E3KY4EN.js";import{e as Y,k as ge}from"./chunk-JIRWXBHS.js";import"./chunk-3TVEFIPW.js";import"./chunk-UXFKODVN.js";import{f as Ue}from"./chunk-IMRS4RGO.js";import"./chunk-52GWQSZH.js";import{a as ue}from"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import{b as Be,e as qe}from"./chunk-RMQJRDTF.js";import{c as we}from"./chunk-2YLR7R2N.js";import"./chunk-MVLY6WUP.js";import"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{C as P,H as Te,Na as Ie,Pa as Ae,Vb as ut,ma as Ne,v as l,zb as fe}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{B as _e,E as Z,o as R,y as H}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{J as Ce,V as Se,c as ft}from"./chunk-C2H3SRET.js";import{a as $}from"./chunk-V4YVDLI4.js";import"./chunk-UXBKFN2U.js";import"./chunk-HCW4K7TR.js";import"./chunk-Z4JATHZR.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import"./chunk-IYYFWVWL.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import"./chunk-RYNAOZ73.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f as b,m as i,o as r}from"./chunk-6V2G2Z5W.js";i();r();var ct=b($());i();r();var y=b($());ut();P();var ot=b(ue());i();r();var M=b($());P();function gt({list:o,pageType:m,isVirtualList:a,onSearch:t,renderEmpty:c,getItemProps:p,loading:f,loadingMore:_,...T},v){let{currentNetworkUniqueId:A}=ie(),N=(0,M.useMemo)(()=>{let s=o.map(L=>({...L,symbolName:L.symbol}));return Oe(s,A,m==="send")},[A,o]),D=s=>{let C,{baseCoinId:L,childrenCoin:e,tokenType:u,aggregation:g}=s;if(m==="send"){let B=(e||[]).filter(G=>G.currencyAmount>0);g&&B.length>1?C=l("wallet_manage_crypto_labels_crypto_multichain"):C=L===0?"":u}else C=g?l("wallet_manage_crypto_labels_crypto_multichain"):u;let x=p?p(s):{};return{name:s.name,tag:C,...x}};return M.default.createElement(We,{headerProps:{closeable:!1,title:l("wallet_transfer_send_select_coin_maintitle_select_coin")},...T,searchPlaceholder:l("wallet_transfer_send_select_coin_placeholder_input_name"),list:N,onSearch:t,getItemProps:D,renderEmpty:c,isVirtualList:a,loadingMore:_,loading:f,ref:v})}var se=(0,M.forwardRef)(gt);i();r();function ht(){let o=Ge(),m=Ze(),a=Me(),t=Je();return async c=>{let p=await o(c),f=await m({coinId:c.coinId}),_=await a({coinId:c.coinId});return!p||!f||!_?Promise.reject():(await t(c),Promise.resolve())}}var ne=ht;i();r();var n=b($());var tt=b(ft());P();i();r();P();var Qe=b(Ee()),yt=o=>{let m=(0,Qe.useSelector)(Pe);return a=>{let t=qe[a.addressType],c=be(o[t]),p=l(Be[t]),f=Le(a.coinAmount),_=De(a.currencyAmount,{useApproximate:!1,symbol:m.symbol});return{addressDisplay:c,addressTypeDisplay:p,amountDisplay:f,currencyAmountDisplay:_}}},me=yt;i();r();var Xe=b(ue());var vt=(o,m)=>{let a=(0,Xe.useHistory)();return t=>{let c=W({from:o[t.addressType]}),p=W({coinId:t.coinId,addressType:t.addressType}),f=m==="send"?`${U}/${t.coinId}${O}${c}`:`${J}${p}`;a.push(f)}},le=vt;i();r();var S={container:"_container_19qhk_1","setting-nav":"_setting-nav_19qhk_6",settingNav:"_setting-nav_19qhk_6",body:"_body_19qhk_9",item:"_item_19qhk_12","item-left":"_item-left_19qhk_21",itemLeft:"_item-left_19qhk_21","item-right":"_item-right_19qhk_24",itemRight:"_item-right_19qhk_24","item-right-top":"_item-right-top_19qhk_27",itemRightTop:"_item-right-top_19qhk_27","item-right-bottom":"_item-right-bottom_19qhk_32",itemRightBottom:"_item-right-bottom_19qhk_32","item-icon":"_item-icon_19qhk_37",itemIcon:"_item-icon_19qhk_37","item-address":"_item-address_19qhk_41",itemAddress:"_item-address_19qhk_41","item-address-type":"_item-address-type_19qhk_48",itemAddressType:"_item-address-type_19qhk_48","item-currency-amount":"_item-currency-amount_19qhk_60",itemCurrencyAmount:"_item-currency-amount_19qhk_60","item-amount":"_item-amount_19qhk_71",itemAmount:"_item-amount_19qhk_71",infoIcon:"_infoIcon_19qhk_82"};var et="SelectBTCAddress_has_opened_tip_on_dlg",Ct=({visible:o,onClose:m,coin:a,type:t})=>{let c=localStorage.getItem(et),p=ee(),[f,_]=(0,n.useState)(!c),T=Ke(a),v=t==="send"?T.filter(C=>C.coinAmount>0):T,A=me(p),N=le(p,t),D=()=>{_(!1),localStorage.setItem(et,!0)},s=()=>t==="send"?l("extension_defi_top_tooltips_only_usage_utxo_value"):l("extension_defi_top_tooltips_only_usage_utxo");return n.default.createElement("div",null,n.default.createElement(R.Action,{onClose:m,visible:o,width:"lg",noTopRadius:!0,animateDisable:!0,mask:!1,hideCloseBtn:!0,alignBottom:!0,noContentPadding:!0,windowStyle:{height:"100vh",maxHeight:"100%",overflow:"hidden",width:"100%"}},n.default.createElement("div",{className:S.container},n.default.createElement(V,{className:"setting-nav",title:l("extension_defi_top_header_title_select_address_type"),onBack:()=>{m()},closeable:!1},n.default.createElement(_e,{width:310,placement:_e.DIRECTION.bottomRight,title:s()},n.default.createElement(Ce,{"data-testid":"top-header-info-icon",className:(0,tt.default)("okds-information-circle",S.infoIcon)}))),n.default.createElement("div",{className:S.body},n.default.createElement("div",{className:S.list},v.map(C=>{let{addressDisplay:L,addressTypeDisplay:e,amountDisplay:u,currencyAmountDisplay:g}=A(C);return n.default.createElement("div",{"data-testid":"select-btc-address-item",className:S.item,onClick:()=>{N(C)}},n.default.createElement("div",{className:S.itemLeft},n.default.createElement(Z,{width:32,height:32,alt:e,src:C.image,errorImg:Y,className:S.itemIcon})),n.default.createElement("div",{className:S.itemRight},n.default.createElement("div",{className:S.itemRightBottom},n.default.createElement("div",{className:S.itemAddressType},e),n.default.createElement("div",{className:S.itemAmount},u)),n.default.createElement("div",{className:S.itemRightTop},n.default.createElement("div",{className:S.itemAddress},L),n.default.createElement("div",{className:S.itemCurrencyAmount},g))))}))))),n.default.createElement(R.Confirmation,{visible:o&&f,confirmText:l("wallet_extension_btn_general_gotit"),onConfirm:D,onClose:D,confirmBtnProps:{size:Se.SIZE.lg}},n.default.createElement("div",{className:re.container},n.default.createElement("div",{className:re.title},l("extension_defi_popup_title_btc_address_type")),n.default.createElement("div",{className:re.tip},l("extension_defi_popup_desc_btc_address_type")))))},ae=Ct;i();r();var h=b($());P();i();r();var I={container:"_container_10hvf_1",body:"_body_10hvf_6",item:"_item_10hvf_9","item-left":"_item-left_10hvf_18",itemLeft:"_item-left_10hvf_18","item-right":"_item-right_10hvf_21",itemRight:"_item-right_10hvf_21","item-right-top":"_item-right-top_10hvf_24",itemRightTop:"_item-right-top_10hvf_24","item-right-bottom":"_item-right-bottom_10hvf_29",itemRightBottom:"_item-right-bottom_10hvf_29","item-icon":"_item-icon_10hvf_34",itemIcon:"_item-icon_10hvf_34","item-address":"_item-address_10hvf_38",itemAddress:"_item-address_10hvf_38","item-address-type":"_item-address-type_10hvf_45",itemAddressType:"_item-address-type_10hvf_45","item-currency-amount":"_item-currency-amount_10hvf_57",itemCurrencyAmount:"_item-currency-amount_10hvf_57","item-amount":"_item-amount_10hvf_68",itemAmount:"_item-amount_10hvf_68"};var St=({visible:o,onClose:m,coin:a,type:t})=>{let c=te(),p=je(a),f=t==="send"?p.filter(v=>v.coinAmount>0):p,_=me(c),T=le(c,t);return h.default.createElement("div",null,h.default.createElement(R.Action,{noTopRadius:!0,alignBottom:!0,hideCloseBtn:!0,animateDisable:!0,noContentPadding:!0,onClose:m,visible:o,windowStyle:{width:"100%",height:"100%",maxHeight:"100%",overflow:"hidden"}},h.default.createElement("div",{className:I.container},h.default.createElement(V,{className:"setting-nav",title:l("extension_defi_top_header_title_select_address_type"),onBack:m,closeable:!1}),h.default.createElement("div",{className:I.body},h.default.createElement("div",{className:I.list},f.map(v=>{let{addressDisplay:A,addressTypeDisplay:N,amountDisplay:D,currencyAmountDisplay:s}=_(v);return h.default.createElement("div",{className:I.item,onClick:()=>{T(v)}},h.default.createElement("div",{className:I.itemLeft},h.default.createElement(Z,{width:32,height:32,alt:N,src:v.image,errorImg:Y,className:I.itemIcon})),h.default.createElement("div",{className:I.itemRight},h.default.createElement("div",{className:I.itemRightBottom},h.default.createElement("div",{className:I.itemAddressType},N),h.default.createElement("div",{className:I.itemAmount},D)),h.default.createElement("div",{className:I.itemRightTop},h.default.createElement("div",{className:I.itemAddress},A),h.default.createElement("div",{className:I.itemCurrencyAmount},s))))}))))))},ce=St;i();r();var de={empty:"_empty_68vmq_1",emptyResult:"_emptyResult_68vmq_5"};function Tt(){let o=(0,ot.useHistory)(),m=F(),a=oe(),t=(0,y.useMemo)(()=>(a||[]).filter(e=>fe(e.coinAmount,0)),[a]),c=ne(),[p,f]=(0,y.useState)(!1),[_,T]=(0,y.useState)(!1),[v,A]=(0,y.useState)(null),N=ee(),D=te(),s=(e,u)=>{let g=e.childrenCoin.filter(x=>x.coinId===e.coinId&&fe(x.coinAmount,0));if(g.length===1){let x=u[g[0].addressType];o.push({pathname:`${U}/${e.coinId}${O}`,search:`?from=${x}`})}return null},C=async e=>{if(j(e)){s(e,N),A(e),f(!0);return}if(z(e)){s(e,D),A(e),T(!0);return}await c(e);let u,g,B=(e.childrenCoin||[]).filter(G=>G.currencyAmount>0);B.length>1&&e.aggregation?(u=Q,g=`coinKey=${encodeURIComponent(e.key)}&aggregationSymbol=${e.symbol}&type=${m}`):B.length===1&&e.aggregation?u=`${U}/${B[0].coinId}${O}`:u=`${U}/${e.coinId}${O}`,o.push({pathname:u,search:g})};return t.length===0?y.default.createElement(we.Container,null,y.default.createElement(V,{closeable:!1,title:l("wallet_transfer_send_select_coin_maintitle_select_coin")}),y.default.createElement(H.State,{className:de.empty,title:l("wallet_transfer_maintitle_not_any_token")})):y.default.createElement(y.default.Fragment,null,y.default.createElement(se,{list:t,renderEmpty:e=>y.default.createElement(H.State,{className:de.emptyResult,title:l("wallet_extension_send_toast_unfoundcrypto",{crypto:y.default.createElement("span",{className:de.emptyText},e)})}),onClick:C,pageType:"send"}),y.default.createElement(ae,{visible:p,onClose:()=>{f(!1)},coin:v,type:"send"}),y.default.createElement(ce,{visible:_,onClose:()=>{T(!1)},coin:v,type:"send"}))}var it=Tt;i();r();var E=b($()),mt=b(Ee());var lt=b(ue());Ae();i();r();var rt=b($());Ae();function st(){let o=oe(),m=X(()=>Array.from(new Set(Ye(o).map(s=>s.coinId))),[o]),a=Re(),[t,c]=(0,rt.useState)(""),p=Ve(s=>{c(s)}),f=He(),{data:_,loading:T,loadingMore:v,listRef:A}=ze({aggregation:!0,symbolLike:t,chainIds:f!==""?[Number(f)]:void 0,excludeCoinIds:m},{reloadDeps:[t],enable:!a}),N=X(()=>new Set(o.map(s=>s.aggregation?s.symbol:s.coinId)),[o]);return{list:X(()=>{var e;let s=(e=_==null?void 0:_.list)!=null?e:[];return[...t?o.filter(u=>{var g;return(g=u.symbol)==null?void 0:g.toLowerCase().includes(t.toLowerCase())}):o,...s].filter(({coinId:u,baseCoinId:g})=>!Ie(u,g))},[o,N,_==null?void 0:_.list]),listRef:A,search:t,onSearch:p,loading:T,loadingMore:v,isSearching:T&&!!t}}P();i();r();var nt={empty:"_empty_1umri_1"};function Nt(){let o=(0,lt.useHistory)(),m=xe(),{keyringIdentityType:a}=(0,mt.useSelector)($e),{currentNetworkUniqueId:t}=ie(),c=F(),p=ne(),{list:f,listRef:_,onSearch:T,loading:v,loadingMore:A,isSearching:N}=st(),[D,s]=(0,E.useState)(!1),[C,L]=(0,E.useState)(!1),[e,u]=(0,E.useState)(null),g=w=>{var q;if(((q=w==null?void 0:w.childrenCoin)==null?void 0:q.length)===1){let{addressType:d}=w.childrenCoin[0]||{},K=W({coinId:w.coinId,addressType:d});o.push(`${J}${K}`)}},x=async w=>{var he,ye,ve;let q=ke(w),d;if(q){if(d=await Fe(w),t!==""&&(d==null?void 0:d.aggregation)&&(d=(ye=(he=d.childrenCoin)==null?void 0:he.find(_t=>_t.chainId===Number(t)))!=null?ye:null),!d)return}else d=w;if(j(d)){u(d),s(!0);return}if(z(d)){g(d),u(d),L(!0);return}await p(d);let K,pe,dt=d.aggregation,pt=(ve=d.childrenCoin)!=null?ve:[];dt&&pt.length>0?(K=Q,pe=`coinKey=${encodeURIComponent(d.key)}&aggregationSymbol=${d.symbol}&type=${c}`):(K=J,pe=`coinId=${d.coinId}`),o.push({pathname:K,search:pe})},B=(0,E.useCallback)(w=>{let q={};return w.localType===Te&&w.coinId===Ne&&Ue(a)&&(q.tag=m("extension_wallet_footer_alert_asset_notsupported")),q},[a,m]);return E.default.createElement(E.default.Fragment,null,E.default.createElement(se,{list:N?[]:f,onClick:x,getItemProps:B,isVirtualList:!1,onSearch:T,ref:_,renderEmpty:()=>E.default.createElement(H.State,{className:nt.empty,title:l("commonall_emptystate_text_no_results")}),loadingMore:A||v&&!N,loading:N}),E.default.createElement(ae,{visible:D,onClose:()=>{s(!1)},coin:e,type:"receive"}),E.default.createElement(ce,{visible:C,onClose:()=>{L(!1)},coin:e,type:"receive"}))}var at=Nt;var It={[ge.SEND]:it,[ge.RECEIVE]:at};function At(){let o=F(),m=It[o];return m?ct.default.createElement(m,null):null}var Zi=At;export{Zi as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=select-coin-2G6DBG75.js.map
