import{a as O}from"./chunk-7T7NBYQH.js";import{b as oo}from"./chunk-5DEIKYJL.js";import{b as G}from"./chunk-67YO4IPY.js";import{N as J,O as Q,P as R}from"./chunk-MTMZQEHP.js";import{i as Z}from"./chunk-62JDSRZZ.js";import{W as F}from"./chunk-R6GCLTW2.js";import{a as V}from"./chunk-JSAFBAMQ.js";import{b as x}from"./chunk-XEOGXIVD.js";import{a as K}from"./chunk-PCGRDRHF.js";import{b as H,l as X,n as $}from"./chunk-VPBQLZCI.js";import{k as Y}from"./chunk-HU3KBV5G.js";import{b as z}from"./chunk-6ZPGW3YM.js";import{e as P}from"./chunk-JIRWXBHS.js";import{c as C}from"./chunk-2YLR7R2N.js";import{C as E,q as D,v as y}from"./chunk-CVJKAN5R.js";import{B as T,E as M,M as I}from"./chunk-GXQ645QR.js";import{P as j,c as W}from"./chunk-C2H3SRET.js";import{a as v}from"./chunk-V4YVDLI4.js";import{f as L,m as c,o as m}from"./chunk-6V2G2Z5W.js";c();m();var B=L(v());c();m();var u=L(v());var ao=L(W()),so=L(z());E();c();m();E();var s=L(v()),to=L(z());var po="DEX_CHAIN_LIST";function go(){let e=oo(),o=Z(),n=(0,s.useMemo)(()=>[...new Set(Object.values((o==null?void 0:o.account)||{}))].filter(Boolean),[o==null?void 0:o.account]),{data:r,loading:_,error:f}=X(async()=>{try{let{data:i,code:l}=await J({deviceId:"",userWalletAddresses:n});if(Number(l)===0){let{gasStationSupportChainList:t=[],isInBlackList:p}=i;return p===1?[]:t.filter(N=>!!e.find(k=>Number(k.chainId)===Number(N.chainId)))}return Promise.reject()}catch{return Promise.reject()}},{cacheKey:po});return{chainList:r||[],isError:!!f,loading:_}}function ho({supportChainList:e,walletId:o}){let[n,r]=(0,s.useState)([]),[_,f]=(0,s.useState)(!1),i=(0,s.useCallback)(async()=>{f(!0);let l=await R({supportChainList:e,walletId:o}),{data:t=[],code:p}=l;if(p!==0){f(!1);return}r(t),f(!1)},[e,o]);return(0,s.useEffect)(()=>{e.length&&i()},[i,e]),{loading:_,allCoinList:n}}function eo({tabChainId:e,walletId:o}){let{chainList:n}=go(),[r,_]=(0,s.useState)(),[f,i]=(0,s.useState)(!1),[l,t]=(0,s.useState)([]);o=(0,to.useSelector)(({metamask:a})=>o||a.selectedWallet);let p=(0,s.useMemo)(()=>n.map(a=>a.chainId),[n]),{allCoinList:N}=ho({supportChainList:p,walletId:o}),k=(0,s.useMemo)(()=>n.length>1?[{chainName:y("wallet_extension_history_dropdown_all_network"),chainId:"all"},...n]:n,[n]),b=H(async()=>{i(!0),t([]);try{let a=await Q({chainId:r,walletId:o}),{data:A=[]}=a;t(A)}catch{t([])}finally{i(!1)}});return(0,s.useEffect)(()=>{r&&r!=="all"&&b()},[b,r]),(0,s.useEffect)(()=>{r==="all"&&t(N)},[r,N]),(0,s.useEffect)(()=>{e&&k.find(a=>`${a.chainId}`==`${e}`)?_(e):k.length&&_(k[0].chainId)},[k,e]),{loading:f,coinList:l,allCoinList:N,chainList:k,chainId:r,setChainId:_}}c();m();var h=L(v());E();var ro=L(W());c();m();var g=L(v()),w=L(W());c();m();var U={root:"_root_1pf5a_1",closeIcon:"_closeIcon_1pf5a_4"};var Lo=({visible:e,onClick:o,onClose:n,options:r,activeId:_=0,timeout:f=0})=>{let i=(0,g.useRef)(null),l=O(e,f,i);return l===O.STATUS.UNMOUNT?null:g.default.createElement("div",{className:(0,w.default)("coin-detail__network-select",U.root,`coin-detail__network-select--${l}`),ref:i},g.default.createElement("div",{className:(0,w.default)("coin-detail__network-select__mask",`coin-detail__network-select__mask--${l}`),onClick:n}),g.default.createElement("div",{className:(0,w.default)("coin-detail__network-select__content",`coin-detail__network-select__content--${l}`)},g.default.createElement("div",{className:"coin-detail__network-select__content-head"},g.default.createElement(x.IconButton,{icon:"okx-wallet-plugin-close",className:U.closeIcon,onClick:n})),g.default.createElement("div",{className:"coin-detail__network-select__content-list"},r.map((t,p)=>g.default.createElement("div",{key:t.chainName,className:(0,w.default)("coin-detail__network-select__content-list-item",{"coin-detail__network-select__content-list-item--active":p===_,"coin-detail__network-select__content-list-item--no-margin":(p+1)%3===0}),onClick:()=>{o(t),n()}},t.chainName)))))},no=(0,g.memo)(Lo);c();m();var ko=({className:e,activeId:o,onChange:n,chainList:r})=>{let[_,{toggle:f}]=$(!1),[i,{toggle:l}]=$(!1);return(0,h.useEffect)(()=>{let t=document.querySelector(".okui-tabs-pane-list-container");(t==null?void 0:t.clientWidth)>290&&f(!0)},[]),h.default.createElement(h.default.Fragment,null,h.default.createElement(I,{className:(0,ro.default)("gas-chain__tabs-container",e),category:I.CATEGORY.fill,type:I.TYPE.primary,size:I.SIZE.xs,activeId:o,headerClassName:"gas-chain__tabs",fullScreenScroll:!0,hideContent:!0,hideNav:!0,clickToView:!0,noLine:!0,afterSlot:_?h.default.createElement(T,{className:"gas-chain__tooltip",title:y("wallet_extension_overview_more"),type:T.TYPES.neutral,placement:T.DIRECTION.bottom},h.default.createElement(x.IconButton,{icon:"okx-wallet-plugin-arrow-small-down",className:"gas-chain__arrow",onClick:l})):null},r.map((t,p)=>h.default.createElement(I.TabPane,{tab:t.chainName,key:t.chainName,id:p,onClick:()=>{n(t)},className:"gas-chain__tabs-pane"}))),h.default.createElement(no,{visible:i,timeout:400,onClose:l,onClick:n,options:r,activeId:o}))},io=(0,h.memo)(ko);c();m();var d={container:"_container_13n9v_1",scrollable:"_scrollable_13n9v_7",wrapContainer:"_wrapContainer_13n9v_12",icon:"_icon_13n9v_20",tokenLogo:"_tokenLogo_13n9v_23",tokenLogoLarger:"_tokenLogoLarger_13n9v_30",chainLogo:"_chainLogo_13n9v_37",tab:"_tab_13n9v_52",tabBox:"_tabBox_13n9v_55",list:"_list_13n9v_62",chainSmall:"_chainSmall_13n9v_65",chainLarge:"_chainLarge_13n9v_69"};var No=({iconUrl:e,chainUrl:o})=>u.default.createElement(C.Box,{className:(0,ao.default)(d.icon,o?d.chainSmall:d.chainLarge)},u.default.createElement(M,{className:o?d.tokenLogo:d.tokenLogoLarger,alt:"coin-icon",errorImg:P,src:e}),!!o&&u.default.createElement(M,{className:d.chainLogo,alt:"coin-icon",errorImg:P,src:o,width:16,height:16}));function q({onSelect:e,onBack:o,tabId:n,walletId:r}){let _=Y(),{usdToThisRate:f}=(0,so.useSelector)(F),{chainList:i,coinList:l,chainId:t,setChainId:p}=eo({tabChainId:n,walletId:r}),N=(0,u.useMemo)(()=>i.findIndex(a=>`${a.chainId}`==`${t}`),[i,t]),k=async a=>{p(a==null?void 0:a.chainId)},b=a=>{e({...a,currentTabId:t}),o()};return u.default.createElement(C.Container,{className:d.container},u.default.createElement(K,{offsetTop:0},u.default.createElement(V,{title:_("swaptrade_top_nav_select_paytoken"),onBack:o,closeable:!1,sticky:!1}),i.length>0?u.default.createElement(io,{className:d.tab,chainList:i,activeId:N,onChange:k}):u.default.createElement(C.Box,{className:d.tabBox})),u.default.createElement(G,{className:d.list,loading:!l.length&&{size:j.SIZE.lg},dataSource:l,renderItem:a=>{let{tokenName:A,chainName:lo,amountNum:co,tokenSymbol:mo,tokenLogoUrl:_o,chainBWLogoUrl:uo,currencyAmount:fo}=a;return u.default.createElement(G.Coin,{icon:u.default.createElement(No,{iconUrl:_o,chainUrl:t==="all"&&uo}),symbol:mo,balance:co,name:t!=="all"?A:lo,market:D.mul(fo,f),onClick:()=>{b(a)}})}}))}var wt=({visible:e,closeCallback:o,onSelect:n,tabId:r,walletId:_})=>B.default.createElement(C.Portal,{noStyle:!0},e&&B.default.createElement(C.Box,{className:d.wrapContainer},B.default.createElement(q,{onSelect:n,onBack:o,tabId:r,walletId:_})));export{wt as a};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-QNVM7T5C.js.map
