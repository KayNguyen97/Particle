import{M as f,R as l,ca as d}from"./chunk-R6GCLTW2.js";import{D as T}from"./chunk-CVJKAN5R.js";import{f as P,m as u,o as m}from"./chunk-6V2G2Z5W.js";u();m();var A=P(T());u();m();var g={exposedAccounts:"exposedAccounts",primaryAccountOnly:"primaryAccountOnly"};function x(e){return e.metamask.domains||{}}function y(e){return e.metamask.domainMetadata||{}}function E(e){let t=x(e);return Object.keys(t).reduce((n,r)=>{let o=v(k(t[r]));return o.length>0&&(n[r]=o),n},{})}function _(e){let t=f(e),n=x(e),r=y(e),o=[];return(0,A.forOwn)(n,(s,i)=>{if(!h(s).includes(t))return;let{extensionId:a,name:c,icon:C,host:O,isOkx:I}=r[i]||{};o.push({extensionId:a,origin:i,isOkx:I,name:c,icon:C,host:O})}),o}function h(e){return v(k(e))}function k(e={}){return Array.isArray(e.permissions)?e.permissions.find(t=>t.parentCapability==="eth_accounts"):{}}function v(e){let t=D(e);return t&&Array.isArray(t.value)?t.value:[]}function D(e={}){return Array.isArray(e.caveats)&&e.caveats.find(t=>t.name===g.exposedAccounts)}function j(e){let{permissionsHistory:t={}}=e.metamask;return Object.keys(t).reduce((n,r)=>{let o=JSON.parse(JSON.stringify(t[r].eth_accounts));return{...n,[r]:o}},{})}function B(e){let t=y(e);return Object.values(t).reduce((n,{host:r})=>(r&&(n[r]?n[r]+=1:n[r]=1),n),{})}function q(e){return(e.metamask.permissionsRequests||[]).map(n=>{var r,o,s,i,p,a,c;return{...n,time:((r=e.metamask.pendingApprovals[n.metadata.id])==null?void 0:r.time)||Date.now(),providerType:(s=(o=e.metamask.pendingApprovals[n.metadata.id])==null?void 0:o.requestData)==null?void 0:s.providerType,method:(p=(i=e.metamask.pendingApprovals[n.metadata.id])==null?void 0:i.requestData)==null?void 0:p.method,exts:(c=(a=e.metamask.pendingApprovals[n.metadata.id])==null?void 0:a.requestData)==null?void 0:c.exts}})}function F(e){let t=q(e);return t&&t[0]?t[t.length-1]:null}function W(e){let t=F(e);return t&&t.metadata?t.metadata.id:null}function H(e){let{domainMetadata:t={}}=e.metamask,n=d(e);return{...t[n],origin:n}}function J(e){let{domains:t={}}=e.metamask,n=d(e);return Boolean(t[n])}function V(e){let{domains:t={}}=e.metamask,n=d(e);if(t[n]){let r=t[n].permissions.filter(o=>o.parentCapability==="eth_accounts");if(r.length){let o=r[0].caveats.filter(s=>s.name==="exposedAccounts");if(o.length)return o[0].value}}return[]}function $(e){let t=l(e);return`${t.keyringName} - ${t.walletName}`}export{y as a,E as b,_ as c,j as d,B as e,q as f,F as g,W as h,H as i,J as j,V as k,$ as l};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-VIS7KIVI.js.map
