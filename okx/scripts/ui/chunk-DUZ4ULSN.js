import{a as So}from"./chunk-PGPPXRV7.js";import{c as Ze}from"./chunk-54GDJWA6.js";import{a as ko}from"./chunk-UGYRJNZG.js";import{a as Co}from"./chunk-PLVZLQPX.js";import{a as vo}from"./chunk-QNVM7T5C.js";import{b as De,c as Oe}from"./chunk-BBN3UGKM.js";import{a as Io}from"./chunk-5DEIKYJL.js";import{Bc as Fe,Cc as $e,Dc as No}from"./chunk-IQVVVGEA.js";import{c as Eo}from"./chunk-UCS37WXR.js";import{m as fo}from"./chunk-DUHXKIBS.js";import{q as Lo,r as Po}from"./chunk-GUWGENNL.js";import{b as te}from"./chunk-67YO4IPY.js";import{Q as Ao,R as qe,b as ho,e as wo,r as bo}from"./chunk-MTMZQEHP.js";import{h as xo}from"./chunk-62JDSRZZ.js";import{a as yo}from"./chunk-JSAFBAMQ.js";import{b as A}from"./chunk-XEOGXIVD.js";import{a as To}from"./chunk-PCGRDRHF.js";import{f as Le,p as n}from"./chunk-IU3TYIWS.js";import{d as go}from"./chunk-VPBQLZCI.js";import{Ya as Pe}from"./chunk-O4EDZSHP.js";import{k as R}from"./chunk-HU3KBV5G.js";import{b as dr}from"./chunk-6ZPGW3YM.js";import{d as Te,f as io}from"./chunk-S4N75E3H.js";import{a as Ne,b as ue}from"./chunk-YMZEQGAL.js";import{e as He}from"./chunk-JIRWXBHS.js";import{aa as S,ba as ye,ca as H,k as po,m as uo}from"./chunk-UXFKODVN.js";import{a as _o}from"./chunk-TPSXCUGD.js";import{c}from"./chunk-2YLR7R2N.js";import{a as co,b as pr}from"./chunk-MVLY6WUP.js";import{f as lo,h as mr}from"./chunk-ZEAKIEIQ.js";import{C as _e,D as ao,F as so,Pa as lr,Vb as cr,ic as de,nc as _r,q as ve,sb as Ye,v as e,vb as mo}from"./chunk-CVJKAN5R.js";import{E as Me,G as pe,b as W,o as Ee,q as no,y as ze}from"./chunk-GXQ645QR.js";import{P as Ve,V as Y,c as Se}from"./chunk-C2H3SRET.js";import{a as G}from"./chunk-V4YVDLI4.js";import{b as sr}from"./chunk-IYYFWVWL.js";import{f as h,m as o,o as r}from"./chunk-6V2G2Z5W.js";o();r();var f=h(G()),Qo=h(_o());_e();o();r();var he={container:"_container_1n9ph_1",contentContainer:"_contentContainer_1n9ph_8",loaderContainer:"_loaderContainer_1n9ph_15",errorContainer:"_errorContainer_1n9ph_18"};o();r();var We=h(G());var Fo=h(ao());_e();var Do=({visible:i,checkFlag:a,code:t,enoughFlag:s,onCancel:g,onConfirm:b,onClose:I,chainName:x})=>{let k=[{message:e("swaptrade_dialog_text_irregular_operations"),confirmName:e("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:S.BLACK_LIST,code:H.BLACK_LIST},{message:e("swaptrade_dialog_modal_service_closed"),confirmName:e("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:S.CLOSE,code:H.CLOSE},{message:e("swaptrade_dialog_text_daily_orderlimit"),confirmName:e("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:S.LIMIT,code:H.LIMIT},{message:e("swaptrade_extension_dialog_desc_swapgas_inprogress"),confirmName:e("swaptrade_extension_dialog_btn_view_pending_order"),cancelName:e("swaptrade_dialog_modal_oneorder_pending_okbtn"),title:e("wallet_extension_swapforgas_dialog_title_order_pending"),checkFlag:S.PENDING_GAS_STATION,code:H.PENDING_GAS_STATION},{message:e("swaptrade_extension_dialog_desc_similar_order_processing"),confirmName:e("swaptrade_extension_dialog_btn_view_pending_order"),cancelName:e("swaptrade_extension_dialog_btn_continue_submit_swap"),title:e("wallet_extension_swapforgas_dialog_title_order_pending"),checkFlag:S.PENDING_SWAP,enoughFlag:ye.ENOUGH,code:H.PENDING_SWAP},{message:e("swaptrade_extension_dialog_desc_swap_order_processing"),confirmName:e("swaptrade_extension_dialog_btn_view_pending_order"),cancelName:e("swaptrade_dialog_modal_oneorder_pending_okbtn"),title:e("wallet_extension_swapforgas_dialog_title_order_pending"),checkFlag:S.PENDING_SWAP,enoughFlag:ye.NOT_ENOUGH,code:H.PENDING_SWAP},{message:e("swaptrade_swapforgas_desc_in_progress",{chain:x}),confirmName:e("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:S.WALLET_HAS_PENDING_ORDER},{message:e("defi_dextrade_errormsg_tron_change"),confirmName:e("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:S.TRON_PERMISSION,code:H.TRON_PERMISSION},{title:e("wallet_extension_swapforgas_dialog_title_high_payment"),message:e("wallet_extension_swapforgas_dialog_desc_high_payment"),confirmName:e("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:S.PAY_TOO_LARGE,code:H.PAY_TOO_LARGE},{title:e("wallet_extension_swapforgas_dialog_title_low_payment"),message:e("wallet_extension_swapforgas_dialog_desc_low_payment"),confirmName:e("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:S.PAY_TOO_SMALL,code:H.PAY_TOO_SMALL}],{confirmName:T,cancelName:p,message:C,title:l}=k.find(v=>(0,Fo.isUndefined)(a)?v.code===+t:v.checkFlag===S.PENDING_SWAP?v.checkFlag===+a&&v.enoughFlag===+s:v.checkFlag===+a)||k[1];return We.default.createElement(Ee.Tip,{visible:i,title:l,confirmText:T,cancelText:p,onConfirm:b,onCancel:g,onClose:I,btnFull:!1},We.default.createElement("div",null,C))};o();r();var u=h(G());var je=h(Se());_e();o();r();var K=h(G());var Oo=h(Se());o();r();var $={container:"_container_1c0ml_1",textContainer:"_textContainer_1c0ml_10",tokenName:"_tokenName_1c0ml_17",chainName:"_chainName_1c0ml_21",imgContainer:"_imgContainer_1c0ml_26",tokenImg:"_tokenImg_1c0ml_31",chainImg:"_chainImg_1c0ml_36",arrowIcon:"_arrowIcon_1c0ml_44",disabled:"_disabled_1c0ml_47"};var ur=({onClick:i,token:a,chain:t,disabled:s,className:g})=>K.default.createElement(c.Box,{onClick:i,className:(0,Oo.default)($.container,g,{[$.disabled]:s})},K.default.createElement(c.Box,{className:$.imgContainer},K.default.createElement(Me,{className:$.tokenImg,alt:"token-img",errorImg:He,src:a.imgSrc}),K.default.createElement(Me,{className:$.chainImg,alt:"chain-img",errorImg:He,src:t.imgSrc})),K.default.createElement(c.Box,{className:$.textContainer},K.default.createElement(n.Text,{strong:700,className:$.tokenName,ellipsis:{tooltip:a.name}},a.name),K.default.createElement(n.Text,{size:"sm",className:$.chainName,ellipsis:{tooltip:t.name}},t.name)),!s&&K.default.createElement(A,{size:A.SIZE.xxs,className:`okx-wallet-plugin-select-unfold ${$.arrowIcon}`})),Ke=ur;o();r();var E={container:"_container_1h0v3_1",swapTokenContainer:"_swapTokenContainer_1h0v3_4",swapToken:"_swapToken_1h0v3_4",swapIcon:"_swapIcon_1h0v3_12",rightArrow:"_rightArrow_1h0v3_16",walletIcon:"_walletIcon_1h0v3_19",rate:"_rate_1h0v3_22",flex:"_flex_1h0v3_25",infoIcon:"_infoIcon_1h0v3_29",exchangeRate:"_exchangeRate_1h0v3_32",exchangeRateValue:"_exchangeRateValue_1h0v3_42",finalReceive:"_finalReceive_1h0v3_47",finalReceiveValue:"_finalReceiveValue_1h0v3_48",max:"_max_1h0v3_52",rangeAmount:"_rangeAmount_1h0v3_58",error:"_error_1h0v3_61",disabled:"_disabled_1h0v3_64",textContainer:"_textContainer_1h0v3_69",selectCoinText:"_selectCoinText_1h0v3_76",selectAmountText:"_selectAmountText_1h0v3_79",rateText:"_rateText_1h0v3_82",receiveText:"_receiveText_1h0v3_85",displayAmount:"_displayAmount_1h0v3_88"};o();r();var J=h(G());_e();var Je=h(Se());o();r();var q={swapInput:"_swapInput_1baav_1",inputWrapper:"_inputWrapper_1baav_8",input:"_input_1baav_8",inputInner:"_inputInner_1baav_15",inputClass:"_inputClass_1baav_22",symbol:"_symbol_1baav_31",currency:"_currency_1baav_34",currencyError:"_currencyError_1baav_38",error:"_error_1baav_41"};o();r();var fr=12,Bo=({priceInfo:i,setAmount:a,amount:t,error:s})=>{let{fromTokenValue:g,fromTokenSymbol:b,currencyAbnormalType:I,fromTokenDecimals:x}=i,k=Math.min(fr,Number(x)),T,[{symbol:p,usdToThisRate:C}]=Oe(De.selectedCurrency),l=(0,J.useMemo)(()=>I==="1"||I==="3",[I]),v=(0,J.useMemo)(()=>l?`${p}0.0`:Number(t)?`${Fe(ve.mul(g,C),p)}`:"",[t,g,l,p,C]);return J.default.createElement(c.FlexBox,{className:(0,Je.default)(q.swapInput,{[q.error]:s}),direction:c.DIRECTION.vertical,onClick:()=>{T==null||T.focus()}},J.default.createElement(c.FlexBox,{className:q.inputWrapper,align:c.ALIGN.center},J.default.createElement(no.Number,{onRef:y=>{T=y},placeholder:"0.0",precision:k,inputMode:"decimal",className:q.input,inputClassName:q.inputClass,innerClassName:q.inputInner,onChange:y=>{y!==t&&a(y)},value:t}),J.default.createElement(n.Text,{strong:700,className:q.symbol},b)),J.default.createElement(n.Text,{size:n.SIZE.sm,className:(0,Je.default)(q.currency,{[q.currencyError]:l}),type:n.TYPE.secondary},v))};o();r();var d=h(G());_e();o();r();var P={container:"_container_6qc5o_1",infoIcon:"_infoIcon_6qc5o_6",exchangeRate:"_exchangeRate_6qc5o_9",exchangeRateValue:"_exchangeRateValue_6qc5o_19",finalReceive:"_finalReceive_6qc5o_24",finalReceiveValue:"_finalReceiveValue_6qc5o_25",max:"_max_6qc5o_29",rangeAmount:"_rangeAmount_6qc5o_35",amountText:"_amountText_6qc5o_38",receiveText:"_receiveText_6qc5o_41",displayAmount:"_displayAmount_6qc5o_44",tokenValue:"_tokenValue_6qc5o_47"};var we="--",Go=({priceInfo:i,pay:a})=>{let t=R(),[{symbol:s,usdToThisRate:g}]=Oe(De.selectedCurrency),{toTokenSymbol:b,toAmount:I,rate:x,tradeTimes:k,currencyAbnormalType:T,toTokenValue:p}=i,C=()=>!x||T!=="0"?we:n.formatCryptoNumbericalValue(x),l=`1 ${a.token.name} \u2248 ${C()} ${b}`;return d.default.createElement(c.Box,{className:P.container},d.default.createElement(te.Line,{size:"sm",label:d.default.createElement(c.FlexBox,{align:c.ALIGN.center},d.default.createElement("div",{className:P.exchangeRate},t("swaptrade_list_title_reference")),d.default.createElement(Le,{title:t("swaptrade_intro_text_gassation_reference_explained")},d.default.createElement(A,{size:A.SIZE.xs,className:`okx-wallet-plugin-information-circle ${P.infoIcon}`})))},d.default.createElement(c.FlexBox,{align:c.ALIGN.center,className:P.exchangeRateValue},d.default.createElement(n.Text,{size:n.SIZE.md,ellipsis:{tooltip:l}},`1 ${a.token.name} \u2248 ${C()}`),"\xA0",b)),d.default.createElement(te.Line,{className:P.amountText,size:"sm",label:d.default.createElement(c.FlexBox,{align:c.ALIGN.center},d.default.createElement(n.Text,{type:n.TYPE.secondary,size:n.SIZE.sm},e("wallet_extension_swapforgas_label_est_gentrades")),d.default.createElement(Le,{title:e("wallet_extension_swapforgas_dialog_desc_est_gentrades")},d.default.createElement(A,{size:A.SIZE.xs,className:`okx-wallet-plugin-information-circle ${P.infoIcon}`})))},d.default.createElement(c.FlexBox,{align:c.ALIGN.center,className:P.exchangeRateValue},d.default.createElement(n.Text,{size:n.SIZE.md,ellipsis:{tooltip:k}},k||we))),d.default.createElement(te.Line,{className:P.receiveText,size:"sm",label:d.default.createElement(c.FlexBox,{align:c.ALIGN.center},d.default.createElement("div",{className:P.finalReceive},t("swaptrade_list_title_you_receive")),d.default.createElement(Le,{title:t("swaptrade_list_tooltip_receive_describe")},d.default.createElement(A,{size:A.SIZE.xs,className:`okx-wallet-plugin-information-circle ${P.infoIcon}`}))),value:d.default.createElement(c.FlexBox,{align:"center",className:P.finalReceiveValue},d.default.createElement(n.DisplayAmount,{className:P.displayAmount,size:"lg",strong:700,mode:n.CRYPTO,symbol:b},I))}),d.default.createElement(n.Text,{type:n.TYPE.secondary,size:n.SIZE.sm,className:P.tokenValue},`${Fe(ve.mul(p,g),s)}`))};var gr=({coinInfo:i,priceInfo:a,clickPayToken:t,setAmount:s,amount:g,isValidateAmount:b})=>{let{toTokenSymbol:I,toTokenLogoUrl:x,toChainName:k,toChainLogoUrl:T,fromTokenSymbol:p,fromTokenLogoUrl:C,balance:l,fromChainLogoUrl:v,fromChainName:y,minimumAmount:Z,maximumAmount:ee,currencyAbnormalType:N,balanceAbnormalType:F,isQuoteAvailable:z}=a,D=i?{token:{name:i.tokenSymbol,imgSrc:i.tokenLogoUrl},chain:{name:i.chainName,imgSrc:i.chainLogoUrl}}:{token:{name:p,imgSrc:C},chain:{name:y,imgSrc:v}},oe={token:{name:I,imgSrc:x},chain:{name:k,imgSrc:T}},ne=(0,u.useMemo)(()=>{let le=z==="1",Be=e("wallet_extension_swapforgas_label_amount_range",{minAmount:le?$e(Z):we}),Ge=e("wallet_extension_swapforgas_label_amount_limit",{maxAmount:le?$e(ee):we});return`${Be} \uFF5E ${Ge}`},[z,ee,Z]),ie=()=>{let le=No(l,{ifFromMax:!0,noNeedThousandth:!0});s(le)},M=(0,u.useMemo)(()=>N!=="0"||F!=="0"?!1:b,[F,N,b]),se=(0,u.useMemo)(()=>F!=="0",[F]),Q=(0,u.useMemo)(()=>g!==""&&!b,[g,b]);return u.default.createElement(c.Box,{className:E.container},u.default.createElement(te.Line,{className:E.selectCoinText,size:"sm",label:e("swaptrade_function_title_select_token")}),u.default.createElement(c.Box,{className:E.swapTokenContainer},u.default.createElement(Ke,{...D,onClick:t,className:E.swapToken}),u.default.createElement(A,{size:A.SIZE.md,className:`okx-wallet-plugin-to ${E.rightArrow}`}),u.default.createElement(Ke,{disabled:!0,...oe,className:E.swapToken})),u.default.createElement(te.Line,{className:E.selectAmountText,size:"sm",label:u.default.createElement("div",{className:E.flex},e("wallet_extension_swapforgas_label_pay_amount"),u.default.createElement(A,{size:A.SIZE.xs,className:(0,je.default)("okx-wallet-plugin-wallet",E.walletIcon,{[E.error]:se})}),se?u.default.createElement(n.Text,{className:E.error,size:n.SIZE.sm},e("wallet_extension_swapforgas_error_unknown_balance")):u.default.createElement(u.default.Fragment,null,u.default.createElement(n.DisplayAmount,{noStyle:!0,mode:n.CRYPTO},l),u.default.createElement(n.Text,{className:E.max,onClick:ie,size:n.SIZE.sm},e("wallet_extension_transaction_input_max"))))}),u.default.createElement(Bo,{priceInfo:a,setAmount:s,amount:g,error:Q}),u.default.createElement(n.Text,{type:n.TYPE.secondary,size:n.SIZE.sm,className:(0,je.default)(E.rangeAmount,{[E.error]:Q})},ne),M&&u.default.createElement(Go,{priceInfo:a,pay:D}))},zo=gr;o();r();var j=h(G());o();r();var Qe={title:"_title_vcieq_1",infoIcon:"_infoIcon_vcieq_5"};o();r();var X=h(G());o();r();var be={container:"_container_1y0j3_1",title:"_title_1y0j3_5",content:"_content_1y0j3_9",footer:"_footer_1y0j3_14"};var Mo=({visible:i,closeCallback:a})=>{let t=R();return X.default.createElement(Ee.Action,{onClose:()=>{a()},visible:i,maskClosable:!0,hideCloseBtn:!0,noTopRadius:!1,windowStyle:{overflow:"hidden"}},X.default.createElement(X.default.Fragment,null,X.default.createElement("div",{className:be.container},X.default.createElement(n.Text,{strong:700,className:be.title},t("swaptrade_intro_title_swap_forgas")),X.default.createElement(n.Text,{size:n.SIZE.sm,className:be.content},t("swaptrade_intro_text_swap_forgas_desc"))),X.default.createElement("div",{className:be.footer},X.default.createElement(Y,{block:!0,category:Y.CATEGORY.fill,type:Y.TYPE.highlight,size:Y.SIZE.lg,onClick:()=>a(!1)},t("swaptrade_intro_btn_ok")))))};var Yo=({onClose:i=()=>{}})=>{let a=R(),[t,s]=(0,j.useState)(!1);return j.default.createElement(j.default.Fragment,null,j.default.createElement(yo,{title:j.default.createElement("div",{className:Qe.title},a("swaptrade_header_title_swap_forgas"),j.default.createElement(A,{size:A.SIZE.sm,className:`okx-wallet-plugin-information-circle ${Qe.infoIcon}`,onClick:()=>s(!0)})),onBack:i,onClose:i}),j.default.createElement(Mo,{visible:t,closeCallback:s}))};o();r();var Re=h(G());cr();_r();var Ae=h(dr()),eo=h(sr());io();o();r();var Ho={min:"0",max:"0",normal:"0",minGasPrice:"0",supportEip1559:!1,suggestBaseFee:"0",safePriorityFee:"0",proposePriorityFee:"0",fastPriorityFee:"0",baseFee:"0"};var $o=h(_o());lr();var qo=({priceInfo:i,setLoading:a,setErrorInfo:t,coinId:s,toChainId:g,chainList:b,txId:I,amount:x,isValidateAmount:k})=>{let T=R(),p=(0,Ae.useDispatch)(),C=(0,$o.useHistory)(),{toTokenSymbol:l,fromTokenValue:v,fromTokenContractAddress:y,toTokenAddress:Z,currencyAbnormalType:ee,fromChainName:N,fromTokenSymbol:F,balance:z,fromChainId:D,balanceAbnormalType:oe,isQuoteAvailable:ne}=i,{allAddress:ie,currentAddress:M}=(0,Ae.useSelector)(_=>Ze(_,D)),{currentAddress:se}=(0,Ae.useSelector)(_=>Ze(_,g)),Q=()=>ne==="0"||ee!=="0"||oe!=="0"?!1:z&&x&&k?+z>=+x:!1,le=()=>ee!=="0"||oe!=="0"?T("swaptrade_footer_btn_fill_up",{nativeToken:l}):z&&x?+z>=+x?T("swaptrade_footer_btn_fill_up",{nativeToken:l}):T("swaptrade_bot_btn_insufficient_balance",{token:F}):T("swaptrade_footer_btn_fill_up",{nativeToken:l}),Be=async()=>{let _={amount:x,chainId:D,currentUserWalletAddress:M,fromTokenAddress:y,toChainId:g,toTokenAddress:Z,walletAddresses:ie},{data:m}=await Ao(_);return m},Ge=async()=>{let{data:_}=await ho({coinId:s,address:M});return _},Ro=async({from:_,to:m,data:O,value:L},B)=>{var ce,Ue;let U={address:M,inputData:O,coinId:s,value:L,tokenAddress:m},{data:V}=await wo(U),re=((ce=B==null?void 0:B.info)==null?void 0:ce.gasPrice)||Ho,me=(Ue=B==null?void 0:B.info)==null?void 0:Ue.newNonce,{normal:fe}=re,ge={chainId:D,from:_,to:m,data:O,gasPrice:de(ue(fe)),value:de(ue(L)),nonce:de(ue(me)),gas:de(ue(V.gasLimit)),gasLimit:de(ue(V.gasLimit))},xe=await Te().signTransaction(ge,ge.from),ke=await So(so,xe);return{rawTx:xe,txHash:ke,txParams:ge,gasLimitInfo:V}},er=async _=>await Te().silentOfflineSignTron(_),ro=_=>({chainId:D,fromAmount:x,fromTokenAddress:y,payValue:v,toChainId:g,userWalletAddress:M,walletAddresses:ie,receiveWalletAddress:se,..._}),or=async(_,m)=>{let{txID:O,signedTx:L}=_,{to:B,data:U}=m,{info:{fee:V}}=await bo({coinId:s,address:M},{fromAddr:M,scenario:po.SCENARIO_INTERACTION,inputData:U,toAddr:B,dataLength:U.length}),re=JSON.stringify({chainId:D,serviceCharge:V,inputData:m.data,toAdr:m.to,coinAmount:m.value,signedTx:L,txSource:3,fromAdr:m.from,txHash:O,extJson:JSON.stringify({nonce:"",priorityFee:"",feeType:"",oldTxHash:"",maxBaseFee:"",gasPrice:"",gas:"",decimal:6})}),me=ro({inputData:re,approveTransactionHash:O,signedTx:L});return await qe(me)},rr=async(_,m,O)=>{let{txHash:L,rawTx:B,gasLimitInfo:U,txParams:V}=_,{gasPrice:re,nonce:me,gas:fe}={...V,nonce:Ne(V.nonce),gasPrice:Ne(V.gasPrice),value:Ne(V.value),gas:Ne(V.gas)},{normal:ge,proposePriorityFee:xe,supportEip1559:ke}=O.info.gasPrice,ce=fe;(U==null?void 0:U.originGasLimit)&&m.approveGasLimitCoefficient&&(ce=Ye(U.originGasLimit,m.approveGasLimitCoefficient).toString());let ar=Ye(re,fe),nr=JSON.stringify({chainId:D,serviceCharge:ar,inputData:m.data,toAdr:m.to,coinAmount:m.value,signedTx:B,txSource:3,fromAdr:m.from,txHash:L,extJson:JSON.stringify({nonce:me,priorityFee:xe||"",feeType:ke?uo.FEE_MARKET:"",oldTxHash:"",maxBaseFee:ke?mo(ge,xe):"",gasPrice:re,gas:ce})}),ir=ro({inputData:nr,approveTransactionHash:L,approveGasLimit:ce,approveGasPrice:re,approveNonce:me});return await qe(ir)},to=async _=>{var O;let m;if(+D==+eo.Currency.TRX){let L=await er(_);m=await or(L,_)}else{_.networkType=(O=b.find(U=>+U.netWorkId==+D))==null?void 0:O.chain;let L=await Ge(),B=await Ro(_,L);m=await rr(B,_,L)}m.code!==0?t({...m,visible:!0}):C.replace(`${Pe}/${m.data}`)},tr=async()=>{let _=await Be(),{checkFlag:m,approveInfo:O}=_;a(!0),m===0&&I&&(p(Lo.setKeepOpen({show:!0})),await p(fo({id:I},!1)),+g==+eo.Currency.TRX?await p(Po(I)):Eo());try{m!==0?t({..._,visible:!0,chainName:N,reConfirm:()=>{to(O)}}):await to(O),a(!1)}catch{pe.error({title:T("wallet_extension_toast_asset_error_try_again"),duration:1,placement:pe.DIRECTION.top}),a(!1)}};return Re.default.createElement(To.FooterActions,null,Re.default.createElement(Y,{block:!0,category:Y.CATEGORY.fill,type:Y.TYPE.highlight,size:Y.SIZE.lg,onClick:tr,disabled:!Q()},le()))};o();r();var oo=h(G());var Wo=h(Se());o();r();var Zo={errorContainer:"_errorContainer_12hl2_1"};var Ko=({errorText:i,onClick:a,btnText:t,className:s})=>oo.default.createElement("div",{className:(0,Wo.default)(Zo.errorContainer,s)},oo.default.createElement(ze.State,{type:ze.State.TYPE.noRecord,title:i,onButtonClick:a,buttonText:t}));o();r();io();pr();mr();var Jo=h(ao()),ae=h(G());var Xo=({coinInfo:i,chainId:a,walletId:t,setLoading:s})=>{let[g,b]=(0,ae.useState)({tradeTimes:"",balance:"",balanceAbnormalType:"0",currencyAbnormalType:"0"}),I=xo(),x=t||I,k=(0,ae.useCallback)(C=>{b({...C,...g})},[]),T=(0,ae.useCallback)(async C=>{let l;i?l={fromChainId:i.chainId,fromTokenContractAddress:i.tokenContractAddress,toChainId:a}:l={toChainId:a};try{let v=await Te().getUserUniqueId(),{data:y}=await lo(co.getPriceInfoUrl,{...l,userUniqueId:v,walletId:x,amount:C});s(!1),b(y)}catch{k({error:!0}),s(!1)}},[a,i,x,k,s]),p=(0,ae.useMemo)(()=>(0,Jo.debounce)(T,500),[T]);return{priceInfo:g,fetchPriceInfo:p}};o();r();_e();var Ce=h(G());o();r();var Ie={alert:"_alert_1txjs_1"};var jo=({priceInfo:i})=>{let{fromTokenSymbol:a,toTokenSymbol:t,currencyAbnormalType:s}=i;switch(s){case"1":return Ce.default.createElement(W,{className:Ie.alert,title:e("swaptrade_top_reminder_paysymbol_failed",{paySymbol:a}),type:W.TYPE.error,closable:!1});case"2":return Ce.default.createElement(W,{className:Ie.alert,title:e("swaptrade_top_reminder_receivesymbol_failed",{receiveSymbol:t}),type:W.TYPE.error,closable:!1});case"3":return Ce.default.createElement(W,{className:Ie.alert,title:e("swaptrade_top_reminder_payreceive_failed",{paySymbol:a,receiveSymbol:t}),type:W.TYPE.error,closable:!1});default:break}return i.isQuoteAvailable==="0"?Ce.default.createElement(W,{className:Ie.alert,title:e("wallet_extension_swapforgas_error_gas_price_flux"),type:W.TYPE.error,closable:!1}):null};var xr=i=>{let a=(0,Qo.useHistory)(),t=Co(),s=i.chainId||t.get("chainId"),g=i.txId||t.get("txId"),b=i.walletId||t.get("walletId"),[I,x]=(0,f.useState)(!0),[k,T]=(0,f.useState)(!1),[p,C]=(0,f.useState)(null),[l,v]=(0,f.useState)(""),[y,Z]=(0,f.useState)({orderId:"",checkFlag:-1,enoughFlag:0,visible:!1,code:0,reConfirm:()=>{}}),ee=Io(),{priceInfo:N,fetchPriceInfo:F}=Xo({coinInfo:p,chainId:s,walletId:b,setLoading:x});(0,f.useEffect)(()=>{p&&N.error&&pe.error({title:e("wallet_extension_toast_asset_error_try_again"),placement:pe.DIRECTION.top})},[N.error,p]);let z=ko(),{coinId:D}=go(()=>z.find(Q=>+Q.chainId==+N.fromChainId)||{},[z,N==null?void 0:N.fromChainId]);(0,f.useEffect)(()=>{let Q=setInterval(()=>{F(l)},1e4);return F==null||F(l),()=>clearInterval(Q)},[l,F]);let oe=!p&&N.error,ne=(0,f.useMemo)(()=>Number(l)>=Number(N==null?void 0:N.minimumAmount)&&Number(l)<=Number(N==null?void 0:N.maximumAmount),[l,N]),ie=()=>oe?f.default.createElement(Ko,{className:he.errorContainer,errorText:e("swaptrade_mid_title_network_error"),btnText:e("swaptrade_mid_btn_reload"),onClick:()=>{x(!0),F(l)}}):null,M=()=>oe?null:f.default.createElement("div",{className:he.contentContainer},f.default.createElement(zo,{coinInfo:p,priceInfo:N,amount:l,setAmount:v,isValidateAmount:ne,clickPayToken:()=>T(!0)}),f.default.createElement(jo,{priceInfo:N})),se=()=>f.default.createElement(c.Box,{className:he.loaderContainer},f.default.createElement(Ve.Circle,{hasMask:!0,maskColor:"var(--okd-color-background-base-primary)",size:Ve.SIZE.xl}));return f.default.createElement("div",{className:he.container},f.default.createElement(Yo,{onClose:i.onClose}),ie(),I?se():M(),f.default.createElement(qo,{priceInfo:N,setLoading:x,setErrorInfo:Z,coinId:D,toChainId:s,chainList:ee,txId:g,amount:l,isValidateAmount:ne}),f.default.createElement(Do,{...y,onConfirm:()=>{(y.checkFlag===S.PENDING_GAS_STATION||y.checkFlag===S.PENDING_SWAP)&&a.replace(`${Pe}/${y.orderId}`),Z({...y,visible:!1})},onCancel:()=>{y.checkFlag===S.PENDING_SWAP&&y.enoughFlag===ye.ENOUGH&&y.reConfirm(),Z({...y,visible:!1})},onClose:()=>{Z({...y,visible:!1})}}),f.default.createElement(vo,{visible:k,closeCallback:()=>T(!1),onSelect:C,tabId:p==null?void 0:p.currentTabId,walletId:b}))},Zn=xr;export{Ho as a,Zn as b};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-DUZ4ULSN.js.map
