import{a as pi,b as di,c as fi,d as R,e as Pt,f as Ot,h as Ye,l as xi,m as Ti,n as q}from"./chunk-KCIDY7KH.js";import{a as ui}from"./chunk-QIUJDVIV.js";import{a as Bt}from"./chunk-HDBJAEKO.js";import{a as mi}from"./chunk-2N4YHUFI.js";import{c as ii,g as ni,l as si,r as li}from"./chunk-DPVVGFWQ.js";import{a as Qo}from"./chunk-ATUBFYS2.js";import{a as ci}from"./chunk-S2GTSTCF.js";import{b as Ft,e as ti}from"./chunk-HG2HGCVV.js";import{a as oi}from"./chunk-D54UDGZS.js";import{a as St}from"./chunk-KZ77CGYD.js";import{a as at,b as ei,c as Lt}from"./chunk-7CB4COOY.js";import{a as Oe}from"./chunk-E73QHIZ6.js";import{a as jo,c as Xo,f as bt}from"./chunk-E2KMZQ6K.js";import{a as zo}from"./chunk-JXT6JCNO.js";import{a as Jo}from"./chunk-UGYRJNZG.js";import{c as Dt}from"./chunk-5DEIKYJL.js";import{b as wt,c as yt,e as Vo}from"./chunk-PD2BTUUF.js";import{c as Ho}from"./chunk-D5VZXMFP.js";import{b as ri,f as _i,j as Rt,k as ai}from"./chunk-7CGGT32T.js";import{a as Zo}from"./chunk-QLH3KLV3.js";import{c as _t}from"./chunk-573GFXXJ.js";import{b as At,g as Wo,l as vt}from"./chunk-2HWABU7H.js";import{b as io}from"./chunk-WYB2CUAN.js";import{C as Ko,M as qo}from"./chunk-MTMZQEHP.js";import{h as $o}from"./chunk-62JDSRZZ.js";import{W as Et}from"./chunk-R6GCLTW2.js";import{H as Po,I as oo,J as Oo,s as lt,v as Bo}from"./chunk-UEO7AURD.js";import{a as Yo}from"./chunk-JSAFBAMQ.js";import{b as Mo}from"./chunk-XEOGXIVD.js";import{k as Uo,l as j,p as Ze}from"./chunk-IU3TYIWS.js";import{b as Go}from"./chunk-VPBQLZCI.js";import{p as K}from"./chunk-X2LENRE7.js";import{Ya as ht}from"./chunk-O4EDZSHP.js";import{e as Tt,f as Ct,k as b}from"./chunk-HU3KBV5G.js";import{b as Pe}from"./chunk-6ZPGW3YM.js";import{d as We,f as vo}from"./chunk-S4N75E3H.js";import{e as Ne}from"./chunk-JIRWXBHS.js";import{a as F,b as o,d as $,e as rt,g as Ie}from"./chunk-UXFKODVN.js";import{a as ko}from"./chunk-TPSXCUGD.js";import{a as Nt}from"./chunk-XKG5DY6K.js";import{b as It,e as gt}from"./chunk-RMQJRDTF.js";import{a as st,b as Ro}from"./chunk-MVLY6WUP.js";import{f as nt,h as So}from"./chunk-ZEAKIEIQ.js";import{C as Ce,Ca as it,D as ot,Da as Do,Kb as eo,Ob as Fo,Pa as bo,Vb as to,a as go,b as rs,p as Re,q as Eo,sb as ut,ub as xt,v,vb as Lo,z as wo}from"./chunk-CVJKAN5R.js";import{B as me,G as Ao,H as de,N as Ve,O as pe,o as ho,y as Qt}from"./chunk-GXQ645QR.js";import{J as Be,P as ve,V as Jt,c as Me}from"./chunk-C2H3SRET.js";import{a as D,f as yo}from"./chunk-V4YVDLI4.js";import{f as I,m as _,o as a}from"./chunk-6V2G2Z5W.js";_();a();Ce();var Ci=I(ot());var Ni="okx-wallet-plugin-report-centre",Ii="okx-wallet-plugin-nft",_s="okx-wallet-plugin-report-centre",as="okx-wallet-plugin-lock-1",cs="okx-wallet-plugin-swap-1",ms="okx-wallet-plugin-documentation",gi=(e=[],t="en-US",i=!1)=>{if(!Array.isArray(e))return[[],[]];let s=new Map,n=[],r=[],l=0,c=p=>{let u=Re(p.txTime,{format:"yyyyMMdd",locale:t});(0,Ci.isNil)(s.get(u))&&(s.set(u,l),r[l]={},r[l].date=u,r[l].list=[],l++);let d=s.get(u);r[d].list.push(p)};return e.forEach(p=>{p.txStatus===F.PENDING?!p.isShowPending&&i?c(p):n.push(p):c(p)}),[n,r]},no=(e={})=>{let{txType:t}=e;return t===o.SEND_NFT||t===o.RECEIVE_NFT||t===o.MINT_NFT||t===o.CANCEL_NFT||t===o.NFT_AUTHORIZATION?Ii:t===o.NFT_CANCEL_AUTHORIZATION?ms:t===o.DAPP_NFT||t===o.CONTRACTCALL?_s:t===o.AUTHORIZATION||t===o.CANCEL_AUTHORIZATION?as:t===o.SWAP||t===o.BUY_NFT||t===o.SELL_NFT?cs:Ni},Ei=(e={})=>{let{txType:t}=e;return t===o.SEND_NFT||t===o.RECEIVE_NFT||t===o.BUY_NFT||t===o.SELL_NFT||t===o.MINT_NFT||t===o.DAPP_NFT||t===o.CANCEL_NFT},wi=(e={},t={})=>{let{nftId:i}=e,{txType:s}=t;return i||s===o.ORDINAL_NFT?Ii:s===o.ORDINAL_TEXT?`${Nt()}/cdn/assets/imgs/237/8FEBB75DDC505B6F.png`:Ni},yi=(e={})=>{let{hideTxType:t}=e;return Number.isInteger(t)&&t!==ri.NORMAL};_();a();var H=I(D()),Bn=I(ot());_();a();var X=I(D()),sn=I(yo()),Ut=I(Me());_();a();var Q=I(D());var qe=I(Me());_();a();var He=I(D());_();a();var T={"coin-flow":"_coin-flow_1t7y4_1",coinFlow:"_coin-flow_1t7y4_1","coin-flow__include":"_coin-flow__include_1t7y4_7",coinFlowInclude:"_coin-flow__include_1t7y4_7","coin-flow__include-title":"_coin-flow__include-title_1t7y4_14",coinFlowIncludeTitle:"_coin-flow__include-title_1t7y4_14","coin-flow__include-item":"_coin-flow__include-item_1t7y4_21",coinFlowIncludeItem:"_coin-flow__include-item_1t7y4_21","coin-flow__include-item-icon":"_coin-flow__include-item-icon_1t7y4_27",coinFlowIncludeItemIcon:"_coin-flow__include-item-icon_1t7y4_27","coin-flow__include-item-token":"_coin-flow__include-item-token_1t7y4_33",coinFlowIncludeItemToken:"_coin-flow__include-item-token_1t7y4_33","coin-flow__include-item-protocol":"_coin-flow__include-item-protocol_1t7y4_42",coinFlowIncludeItemProtocol:"_coin-flow__include-item-protocol_1t7y4_42","coin-flow__protocol":"_coin-flow__protocol_1t7y4_46",coinFlowProtocol:"_coin-flow__protocol_1t7y4_46","coin-flow__protocol-title":"_coin-flow__protocol-title_1t7y4_53",coinFlowProtocolTitle:"_coin-flow__protocol-title_1t7y4_53","coin-flow__protocol-item":"_coin-flow__protocol-item_1t7y4_60",coinFlowProtocolItem:"_coin-flow__protocol-item_1t7y4_60","coin-flow__protocol-item-icon":"_coin-flow__protocol-item-icon_1t7y4_66",coinFlowProtocolItemIcon:"_coin-flow__protocol-item-icon_1t7y4_66","coin-flow__protocol-item-token":"_coin-flow__protocol-item-token_1t7y4_72",coinFlowProtocolItemToken:"_coin-flow__protocol-item-token_1t7y4_72","coin-flow__protocol-item-protocol":"_coin-flow__protocol-item-protocol_1t7y4_81",coinFlowProtocolItemProtocol:"_coin-flow__protocol-item-protocol_1t7y4_81","coin-flow__mul-icons__top-right":"_coin-flow__mul-icons__top-right_1t7y4_85",coinFlowMulIconsTopRight:"_coin-flow__mul-icons__top-right_1t7y4_85","coin-flow__mul-icons__bottom-right":"_coin-flow__mul-icons__bottom-right_1t7y4_89",coinFlowMulIconsBottomRight:"_coin-flow__mul-icons__bottom-right_1t7y4_89","coin-flow__hidden-label":"_coin-flow__hidden-label_1t7y4_93",coinFlowHiddenLabel:"_coin-flow__hidden-label_1t7y4_93","coin-flow__label-text":"_coin-flow__label-text_1t7y4_93",coinFlowLabelText:"_coin-flow__label-text_1t7y4_93","coin-flow__label":"_coin-flow__label_1t7y4_93",coinFlowLabel:"_coin-flow__label_1t7y4_93","coin-flow__label__overflow":"_coin-flow__label__overflow_1t7y4_105",coinFlowLabelOverflow:"_coin-flow__label__overflow_1t7y4_105","coin-flow__label__expand":"_coin-flow__label__expand_1t7y4_108",coinFlowLabelExpand:"_coin-flow__label__expand_1t7y4_108","coin-flow__receive":"_coin-flow__receive_1t7y4_121",coinFlowReceive:"_coin-flow__receive_1t7y4_121","coin-flow__record-title":"_coin-flow__record-title_1t7y4_121",coinFlowRecordTitle:"_coin-flow__record-title_1t7y4_121","coin-flow__record":"_coin-flow__record_1t7y4_121",coinFlowRecord:"_coin-flow__record_1t7y4_121","coin-flow__record-left-box":"_coin-flow__record-left-box_1t7y4_132",coinFlowRecordLeftBox:"_coin-flow__record-left-box_1t7y4_132","coin-flow__record-title-box":"_coin-flow__record-title-box_1t7y4_138",coinFlowRecordTitleBox:"_coin-flow__record-title-box_1t7y4_138","coin-flow__tool-tip":"_coin-flow__tool-tip_1t7y4_144",coinFlowToolTip:"_coin-flow__tool-tip_1t7y4_144","coin-flow__record-left-box--middle":"_coin-flow__record-left-box--middle_1t7y4_148",coinFlowRecordLeftBoxMiddle:"_coin-flow__record-left-box--middle_1t7y4_148","coin-flow__record-left-box--has-right":"_coin-flow__record-left-box--has-right_1t7y4_152",coinFlowRecordLeftBoxHasRight:"_coin-flow__record-left-box--has-right_1t7y4_152","protocol-margin":"_protocol-margin_1t7y4_168",protocolMargin:"_protocol-margin_1t7y4_168","coin-flow__record-icon":"_coin-flow__record-icon_1t7y4_173",coinFlowRecordIcon:"_coin-flow__record-icon_1t7y4_173","coin-flow__record-icon-nft":"_coin-flow__record-icon-nft_1t7y4_181",coinFlowRecordIconNft:"_coin-flow__record-icon-nft_1t7y4_181","coin-flow__record-icon__mul-icons-wrap":"_coin-flow__record-icon__mul-icons-wrap_1t7y4_184",coinFlowRecordIconMulIconsWrap:"_coin-flow__record-icon__mul-icons-wrap_1t7y4_184","coin-flow__record-right-box":"_coin-flow__record-right-box_1t7y4_201",coinFlowRecordRightBox:"_coin-flow__record-right-box_1t7y4_201","coin-flow__record-halfwidth":"_coin-flow__record-halfwidth_1t7y4_206",coinFlowRecordHalfwidth:"_coin-flow__record-halfwidth_1t7y4_206","coin-flow__record-jumpInfo-box":"_coin-flow__record-jumpInfo-box_1t7y4_210",coinFlowRecordJumpInfoBox:"_coin-flow__record-jumpInfo-box_1t7y4_210","coin-flow__record__plus":"_coin-flow__record__plus_1t7y4_217",coinFlowRecordPlus:"_coin-flow__record__plus_1t7y4_217","coin-flow__pointer":"_coin-flow__pointer_1t7y4_222",coinFlowPointer:"_coin-flow__pointer_1t7y4_222","coin-flow__invest-apply-right":"_coin-flow__invest-apply-right_1t7y4_225",coinFlowInvestApplyRight:"_coin-flow__invest-apply-right_1t7y4_225","coin-flow__invest-apply-num":"_coin-flow__invest-apply-num_1t7y4_231",coinFlowInvestApplyNum:"_coin-flow__invest-apply-num_1t7y4_231","coin-flow__invest-apply-num__tooltip":"_coin-flow__invest-apply-num__tooltip_1t7y4_241",coinFlowInvestApplyNumTooltip:"_coin-flow__invest-apply-num__tooltip_1t7y4_241","coin-flow__invest-apply-num__tooltip__content":"_coin-flow__invest-apply-num__tooltip__content_1t7y4_247",coinFlowInvestApplyNumTooltipContent:"_coin-flow__invest-apply-num__tooltip__content_1t7y4_247","coin-flow__invest-apply-token":"_coin-flow__invest-apply-token_1t7y4_253",coinFlowInvestApplyToken:"_coin-flow__invest-apply-token_1t7y4_253","coin-flow__invest-platform-name":"_coin-flow__invest-platform-name_1t7y4_264",coinFlowInvestPlatformName:"_coin-flow__invest-platform-name_1t7y4_264","coin-flow__claim":"_coin-flow__claim_1t7y4_269",coinFlowClaim:"_coin-flow__claim_1t7y4_269","coin-flow__claim__icon":"_coin-flow__claim__icon_1t7y4_273",coinFlowClaimIcon:"_coin-flow__claim__icon_1t7y4_273","coin-flow__claim-info":"_coin-flow__claim-info_1t7y4_276",coinFlowClaimInfo:"_coin-flow__claim-info_1t7y4_276",flowRightToken:"_flowRightToken_1t7y4_288",flowRightApply:"_flowRightApply_1t7y4_293"};function ps({logo:e}){let{middleLogo:t,bottomRightLogo:i,topRightLogo:s}=e||{},n=i&&i.length>0,r=s&&s.length>0;return He.default.createElement(He.default.Fragment,null,He.default.createElement(Lt,{srcset:t&&t.length>0?t:[Ne],topRightLogo:s,bottomRightLogo:i}),(r||n)&&He.default.createElement("div",{className:T["coin-flow__record-icon__mul-icons-wrap"]},r&&He.default.createElement(Lt,{className:T["coin-flow__mul-icons__top-right"],size:"small",srcset:s}),n&&He.default.createElement(Lt,{className:T["coin-flow__mul-icons__bottom-right"],size:"small",srcset:i})))}var Ke=ps;_();a();var De=(e,t)=>e?t?`+ ${j(e,{symbol:t})}`:`+ ${j(e)}`:"--",Ge=(e,t)=>e?t?`- ${j(e,{symbol:t})}`:`- ${j(e)}`:"--";var vi="/static/images/tx-history/default-nft-detail.svg",ds="/static/images/tx-history/default-nft.svg",hi="/static/images/tx-history/default-brcnft.svg";function Ai(e){return e?vi:Ne}var ye={[o.AUTHORIZATION]:"wallet_extension_header_approval_title_approve",[o.CANCEL_AUTHORIZATION]:"wallet_extension_header_approval_title_cancel_approval",[o.CANCEL_NFT]:"wallet_extension_text_cancel_listing",[o.NFT_AUTHORIZATION]:"wallet_extension_approve_text_approve",[o.NFT_CANCEL_AUTHORIZATION]:"wallet_extension_title_revoke_approve",[o.DAPP_APPLY]:"wallet_extension_subtitle_investwith",[o.DAPP_REDEEM]:"wallet_extension_subtitle_redeem_from",[o.EARN_BRC30_DEPLOY]:"wallet_extension_subtitle_redeem_from",[o.EARN_BRC30_REDEEM]:"wallet_extension_subtitle_redeem_from",[o.EARN_BRC30_APPLY]:"wallet_extension_subtitle_investwith",[o.EARN_BRC30_CLAIM]:"wallet_extension_subtitle_claim",[o.BRC20_RECEIVE]:"extension_wallet_details_text_receive",[o.BRC30_INSCRIBE]:"extension_wallet_details_text_inscribe",[o.BRC20_INSCRIBE]:"extension_wallet_details_text_inscribe",[o.BRC20_DEPLOY]:"extension_wallet_details_text_send",[o.ORDINAL_NFT]:"extension_wallet_details_text_send",[o.ORDINAL_TEXT]:"extension_wallet_details_text_send",[o.BRC20_MINT]:"extension_wallet_details_text_send",[o.BRC30_TRADE]:"extension_wallet_details_text_send",[o.BRC20_TRADE]:"extension_wallet_details_text_send",[o.BRC20_SEND]:"extension_wallet_details_text_send",[o.BRC30_SEND]:"extension_wallet_details_text_send",[o.RUNES_SWEEP]:"extension_wallet_details_text_send",[o.DAPP_CLAIM]:"wallet_extension_subtitle_claimwith",[o.BTC_NFT_BULK_SEND]:"extension_wallet_details_text_send",[o.BTC_NFT_BULK_RECEIVE]:"extension_defi_header_textarea_pay",[o.BTC_NFT_BULK_TRADE]:"extension_wallet_details_text_send",[o.DEFI_MINT]:"extension_defi_history_header_text_mint_from",[o.DEFI_REPAY]:"extension_defi_history_header_text_repay_with"};function fs(e){let t=b(),i=t("wallet_extension_history_text_unknown_token"),s=t("wallet_extension_history_text_unknown_protocol");return(0,Q.useMemo)(()=>{let{txType:n,txStatus:r,approveInfo:l,input:c,output:m,investTxData:p,poolId:u}=e,{investInCoins:d}=e.investTxData||{},w=Object.values(o),N=()=>m&&m.length>0?{label:t(ye[n]),items:(m||[]).map(({name:x,amount:E,icon:f,nftId:h,brc20Coin:A,brc20sCoin:B,protocolName:L})=>({isNFT:!!h||A||B,icon:f||hi,title:Ge(E,x),right:L?Q.default.createElement(pe,{className:T.protocol,size:Ve.SIZE.sm},L):null,autoWidth:!!L}))}:null,C=()=>!c||!(c!=null&&c.length)?null:{label:t("extension_wallet_details_text_receive"),className:"coin-flow__receive",items:(c||[]).map(({name:x,amount:E,icon:f,nftId:h,brc20Coin:A,brc20sCoin:B,protocolName:L})=>({isNFT:!!h||A||B,icon:f||hi,title:De(E,x),right:L?Q.default.createElement("div",{className:(0,qe.default)(T.protocol)},L):null,autoWidth:!!L}))},y=()=>({label:t(ye[n]),items:[{icon:(l==null?void 0:l.icon)||Ne,title:(l==null?void 0:l.name)||i}]}),S=()=>({label:t(ye[n]),items:[{icon:(l==null?void 0:l.nftCollectionIcon)||ds,title:(l==null?void 0:l.nftCollectionName)||t("wallet_extension_title_approve_nft_collection")}]}),W=()=>({label:t(ye[n]),items:(m||[]).map(({nftId:x,icon:E,name:f})=>({isNFT:!!x,icon:E||vi,title:f||t("wallet_extension_title_approve_nft")}))}),U=()=>{let{registerInfo:x}=e;return x?{label:"",items:[{icon:(x==null?void 0:x.icon)||Ne,title:(x==null?void 0:x.name)||i}],title:t("wallet_extension_title_approve_nft")}:null},Z=()=>({label:t(ye[n]),items:(d||[]).map(({tokenName:x,num:E,tokenLogo:f})=>(E=Ge(E),{icon:f!=null?f:i,title:`${E} ${x}`}))}),M=()=>({label:t(ye[n]),items:(d||[]).map(({tokenName:x,num:E,tokenLogo:f})=>(E=Ge(E),{icon:f!=null?f:i,title:`${E} ${x}`}))}),G=()=>{var et,J;let{investInfo:x,redeemShowNum:E}=e.investTxData||{},{investName:f,platformName:h,investLogo:A}=x||{},B=null,L="",se="";if(!e.investTxData)return null;let Qe=e.investTxData.investmentDetailType;if((Qe==Ie.FARM_LP_TOKEN||Qe==Ie.FARM_OTHER_TOKEN)&&(L=T.flowRightToken,se=T.flowRightApply),E&&d&&d.length){let ce=Ge((et=d[0])==null?void 0:et.num);B=Q.default.createElement("div",{className:(0,qe.default)(T["coin-flow__invest-apply-right"],se)},Q.default.createElement("div",{className:T["coin-flow__invest-apply-num"]},Q.default.createElement(Ze.Text,{ellipsis:{tooltip:!0},className:T["coin-flow__invest-apply-num__tooltip"]},ce)),Q.default.createElement("div",{className:(0,qe.default)(T["coin-flow__invest-apply-token"],L)},(J=d[0])==null?void 0:J.tokenName))}return{label:t(ye[n]),items:[{icon:Q.default.createElement(Ke,{logo:A}),title:f!=null?f:i,right:B,subTitle:Q.default.createElement("div",{className:T["coin-flow__invest-platform-name"]},h!=null?h:s)}]}},fe=()=>p?{label:t(ye[n]),items:[{isNFT:!1,icon:p.investInfo.investLogo.middleLogo[0]||Ne,title:p.investInfo.investName,subTitle:Q.default.createElement("div",{className:T["coin-flow__invest-platform-name"]},p.investInfo.poolId?`ID: ${p.investInfo.poolId}`:"")}]}:null,ee=()=>p?{label:t(ye[n]),items:[{isNFT:!1,icon:p.investInfo.investLogo.middleLogo[0]||Ne,title:p.investInfo.investName,subTitle:Q.default.createElement("div",{className:T["coin-flow__invest-platform-name"]},u?`ID: ${u}`:"")}]}:null,O=()=>{let x;return r===F.PENDING?x=Q.default.createElement("div",{className:T["coin-flow__claim"]},t("wallet_extension_subtitle_claimwith"),Q.default.createElement(me,{title:t("wallet_extension_card_ntfy_claim_text"),placement:me.DIRECTION.bottomLeft},Q.default.createElement("span",{className:`okds-information-circle ${T["coin-flow__claim__icon"]}`}))):x=t(ye[n]),{label:x,items:(d||[]).map(({tokenName:E,num:f,tokenLogo:h})=>(f=De(f),{icon:h!=null?h:i,title:`${f} ${E}`,className:"coin-flow__receive"}))}},Te=()=>m&&m.length>0?{label:t("wallet_extension_header_redeem_title_sent"),items:(m||[]).map(({name:x,amount:E,icon:f,nftId:h,protocolName:A,include:B})=>({isNFT:!!h,icon:f||Ai(h),title:Ge(E,x),right:A?Q.default.createElement("div",{className:(0,qe.default)(T.protocol)},A):null,autoWidth:!!A,includeAssets:B}))}:null,ae=()=>m&&m.length>0?{label:t("wallet_extension_header_redeem_title_sent"),items:(m||[]).map(({name:x,amount:E,icon:f,nftId:h,protocolName:A})=>({isNFT:!!h,icon:f||Ai(h),title:Ge(E,x),right:A?Q.default.createElement("div",{className:(0,qe.default)(T.protocol)},A):null,autoWidth:!!A}))}:null,ne=()=>null,ue={[o.BRC30_INSCRIBE]:N,[o.BRC20_INSCRIBE]:N,[o.BRC20_DEPLOY]:N,[o.ORDINAL_NFT]:N,[o.ORDINAL_TEXT]:N,[o.BRC20_MINT]:N,[o.BRC20_TRADE]:N,[o.BRC30_TRADE]:N,[o.BRC20_RECEIVE]:C,[o.BRC30_RECEIVE]:C,[o.RUNES_SWEEP]:N,[o.CANCEL_AUTHORIZATION]:y,[o.AUTHORIZATION]:y,[o.NFT_CANCEL_AUTHORIZATION]:S,[o.NFT_AUTHORIZATION]:S,[o.CANCEL_NFT]:W,[o.REGISTRATION]:U,[o.EARN_BRC30_APPLY]:Z,[o.DAPP_APPLY]:M,[o.EARN_BRC30_REDEEM]:fe,[o.DAPP_REDEEM]:G,[o.EARN_BRC30_CLAIM]:ee,[o.DAPP_CLAIM]:O,[o.BTC_NFT_BULK_SEND]:ne,[o.BTC_NFT_BULK_RECEIVE]:ne,[o.BRC20_SEND]:Te,[o.BRC30_SEND]:Te,[o.DEFI_MINT]:G,[o.DEFI_REPAY]:M,default:ae};return ue[n]?ue[n]():w.includes(n)?ae():null},[e])}var Di=fs;_();a();var z=I(D()),so=I(Me());var{NFT_AUTHORIZATION:bi,NFT_CANCEL_AUTHORIZATION:Si,CANCEL_NFT:lo,AUTHORIZATION:Li,CANCEL_AUTHORIZATION:Fi,REGISTRATION:us,DAPP_APPLY:Ri,DAPP_REDEEM:Bi,DAPP_CLAIM:Pi,BRC20_TRADE:Oi,BRC20_SEND:ki,BRC20_RECEIVE:Ui,BRC20_MINT:Mi,BRC20_INSCRIBE:Vi,BRC20_DEPLOY:Hi,BRC30_TRADE:xs,EARN_BRC30_APPLY:Gi,EARN_BRC30_REDEEM:$i,EARN_BRC30_CLAIM:Wi,EARN_BRC30_DEPLOY:Ts,BRC30_SEND:Zi,BRC30_RECEIVE:Yi,BRC30_INSCRIBE:Ki,ORDINAL_NFT:qi,ORDINAL_TEXT:ji,MINT_NFT:Cs,BTC_NFT_BULK_RECEIVE:Ns,BTC_NFT_BULK_SEND:Is,BTC_NFT_BULK_TRADE:gs,DEFI_MINT:Es,DEFI_REPAY:ws,RUNES_ETCH:zi,RUNES_SWEEP:Xi}=o,ys="/static/images/tx-history/default-nft-detail.svg";function hs(e){return e?ys:Ne}var ke={[Li]:"wallet_extension_header_approval_title_for",[Fi]:"wallet_extension_header_approval_title_for",[lo]:"wallet_extension_text_cancel_listing_on",[bi]:"wallet_extension_approve_text_for",[Si]:"wallet_extension_approve_text_for",[Ri]:"wallet_extension_subtitle_into",[Bi]:"wallet_extension_subtitle_receive",[Pi]:"wallet_extension_subtitle_from",[$i]:"wallet_extension_subtitle_receive",[Gi]:"wallet_extension_subtitle_into",[Wi]:"wallet_extension_subtitle_receive",[Ki]:"wallet_extension_header_redeem_title_reveive",[Vi]:"wallet_extension_header_redeem_title_reveive",[Yi]:"extension_wallet_details_text_include",[Ui]:"extension_wallet_details_text_include",[qi]:"extension_wallet_details_text_receive",[ji]:"extension_wallet_details_text_receive",[Hi]:"extension_wallet_details_text_receive",[Mi]:"extension_wallet_details_text_receive",[Zi]:"extension_wallet_details_text_include",[ki]:"extension_wallet_details_text_include",[Oi]:"extension_wallet_details_text_receive",[zi]:"extension_wallet_details_text_receive",[Xi]:"extension_wallet_details_text_receive",[o.BTC_NFT_BULK_SEND]:"extension_wallet_details_text_include",[o.BTC_NFT_BULK_RECEIVE]:"extension_wallet_details_text_include",[o.BTC_NFT_BULK_TRADE]:"extension_defi_header_textarea_receive",[o.DEFI_MINT]:"extension_defi_history_header_text_receive",[o.DEFI_REPAY]:"extension_defi_history_header_text_into"},As="/static/images/tx-history/default-protocol.svg",ct="/static/images/tx-history/default-brcnft.svg";function vs(e){let t=b(),i=t("wallet_extension_history_text_unknown_token"),s=t("wallet_extension_history_text_unknown_protocol"),n=Object.values(o);return(0,z.useMemo)(()=>{let{txType:r,input:l,include:c,investTxData:m,contractInfo:p,output:u}=e,{investInfo:d,investOutCoins:w}=m!=null?m:{},N=()=>!l||!l.length?null:{label:t("wallet_extension_header_redeem_title_reveive"),items:l.map(({name:x,amount:E,icon:f,nftId:h,protocolName:A,coinId:B})=>(f=f||hs(h),{isNFT:!!h,icon:f,title:De(E,x),right:A?z.default.createElement(pe,{className:T.protocol,size:Ve.SIZE.sm},A):null,autoWidth:!!A,addCustomCoin:{coinId:B}})),className:"coin-flow__receive"},C=()=>{var x,E,f,h,A;return m?{label:t("wallet_extension_header_redeem_title_reveive"),items:[{isNFT:!0,icon:((E=(x=m==null?void 0:m.investInfo)==null?void 0:x.investLogo)==null?void 0:E.middleLogo[0])||Ne,title:(f=m==null?void 0:m.investInfo)==null?void 0:f.investName,subTitle:z.default.createElement("div",{className:T["coin-flow__invest-platform-name"]},(h=m==null?void 0:m.investInfo)!=null&&h.poolId?`ID: ${(A=m==null?void 0:m.investInfo)==null?void 0:A.poolId}`:"")}]}:null},y=()=>l&&l.length>0?{label:t(ke[e.txType]),items:l.map(({name:x,amount:E,icon:f,nftId:h,brc20Coin:A,brc20sCoin:B,protocolName:L})=>(f=f||ct,{isNFT:!!h||A||B,icon:f,title:De(E,x),right:L?z.default.createElement(pe,{className:T.protocol,size:Ve.SIZE.sm},L):null,autoWidth:!!L})),className:"coin-flow__receive"}:null,S=()=>c!=null&&c.length?{isNewInclude:!0,items:(c||[]).map(({name:x,amount:E,icon:f,vdecimalNum:h,nftId:A,brc20Coin:B,brc20sCoin:L,protocolName:se})=>({isNFT:!!A||B||L,icon:f||ct,title:`- ${io(E,{fixed:h})} ${x}`,right:se?z.default.createElement(pe,{className:T.protocol,size:Ve.SIZE.sm},se):null,autoWidth:!!se}))}:null,W=()=>({items:(u||[]).map(({name:x,amount:E,icon:f,vdecimalNum:h,nftId:A,brc20Coin:B,brc20sCoin:L})=>({isNFT:!!A||B||L,icon:f||ct,title:`- ${io(E,{fixed:h})} ${x}`}))}),U=()=>l&&l.length>0?{items:(l||[]).map(({name:x,amount:E,icon:f,nftId:h,brc20Coin:A,brc20sCoin:B})=>({isNFT:!!h||A||B,icon:f||ct,title:`+ ${j(E,{symbol:x})}`}))}:null,Z=()=>({label:t(ke[e.txType]),items:[{icon:(p==null?void 0:p.icon)||As,title:(p==null?void 0:p.name)||s,subTitle:e.txType!==lo&&(p==null?void 0:p.address)&&z.default.createElement(Ye,{className:T["coin-flow__record-address"],label:K(p.address),value:p.address,message:t("wallet_extension_popup_title_receiving_address_copied"),addressStyle:{color:"var(--okd-color-content-contrast)"}})}]}),M=()=>{let{investName:x,investLogo:E,poolId:f}=d||{},h;return{isNFT:!0,label:t(ke[e.txType]),items:[{icon:z.default.createElement(Ke,{logo:E}),title:x!=null?x:i,subTitle:z.default.createElement("div",{className:T["coin-flow__invest-platform-name"]},f?`ID: ${f}`:""),right:h}]}},G=()=>{let{investName:x,platformName:E,investLogo:f}=d||{},h,A="",B="";if(!e.investTxData)return null;if(e.investTxData.investmentDetailType===Ie.FARM_OTHER_TOKEN&&(A=T.flowRightToken,B=T.flowRightApply),(e.investTxData.investmentDetailType===Ie.SAVE_OTHER_COIN||e.investTxData.investmentDetailType===Ie.VAULTS_OTHER_COIN||e.investTxData.investmentDetailType===Ie.FARM_OTHER_TOKEN)&&w&&w.length>0){let[{tokenName:L,num:se}]=w;h=z.default.createElement("div",{className:(0,so.default)(T["coin-flow__invest-apply-right"],B)},z.default.createElement("div",{className:T["coin-flow__invest-apply-num"]},z.default.createElement(at,{text:j(se),maxWidth:"85px"})),z.default.createElement("div",{className:(0,so.default)(T["coin-flow__invest-apply-token"],A)},L))}return{label:t(ke[e.txType]),items:[{icon:z.default.createElement(Ke,{logo:f}),title:x!=null?x:i,subTitle:z.default.createElement("div",{className:T["coin-flow__invest-platform-name"]},E!=null?E:s),right:h}]}},fe=()=>({label:t(ke[e.txType]),items:(m.investInCoins||[]).map(({tokenName:E,num:f,tokenLogo:h})=>(f=De(f),{icon:h!=null?h:i,title:`${f} ${E}`})),className:"coin-flow__receive"}),ee=()=>!w||(w==null?void 0:w.length)===0?null:{label:t(ke[e.txType]),items:(w||[]).map(({tokenName:x,num:E,tokenLogo:f,tokenId:h})=>{let A=De(E),B=e.txStatus===F.SUCCESS&&h,L=B?`${A} ${x} #${B}`:`${A} ${x}`;return{icon:f,title:L}}),className:"coin-flow__receive"},O=()=>{let x=t(ke[e.txType]);return m?{isNFT:!0,label:x,items:(m.investInCoins||[]).map(({tokenName:E,num:f,tokenLogo:h})=>(f=De(f),{icon:h!=null?h:i,title:`${f} ${E}`})),className:"coin-flow__receive"}:null},Te=()=>{let{platformName:x,investLogo:E,investName:f}=d||{};return{label:t(ke[e.txType]),items:[{icon:z.default.createElement(Ke,{logo:E}),title:f!=null?f:i,subTitle:z.default.createElement("div",{className:T["coin-flow__invest-platform-name"]},x!=null?x:s)}]}},ae=()=>c&&c.length>0?{isNewInclude:!0,items:(c||[]).map(({name:x,amount:E,icon:f,nftId:h,brc20Coin:A,brc20sCoin:B,protocolName:L})=>({isNFT:!!h||A||B,icon:f||ct,title:`+ ${j(E,{symbol:x})}`,right:L?z.default.createElement(pe,{className:T.protocol,size:Ve.SIZE.sm},L):null,autoWidth:!!L,includeAssets:c}))}:null,ne=()=>null,ue={[Ts]:C,[Ki]:y,[Vi]:y,[qi]:y,[ji]:y,[Hi]:y,[Mi]:y,[zi]:y,[Xi]:y,[Yi]:ae,[Ui]:ae,[xs]:y,[Oi]:y,[Zi]:S,[ki]:S,[bi]:Z,[Si]:Z,[Fi]:Z,[Li]:Z,[lo]:Z,[Gi]:M,[Ri]:G,[$i]:fe,[Bi]:ee,[Wi]:O,[Pi]:Te,[us]:ne,[Cs]:N,[Is]:W,[Ns]:U,[gs]:y,[Es]:ee,[ws]:G};return ue[r]?ue[r]():n.includes(r)?N():null},[e])}var Ji=vs;_();a();var Y=I(D()),nn=I(Me());Ce();_();a();var kt=I(D());Ce();_();a();var Qi=I(D());Ce();So();Ro();vo();var Ds=e=>{let{coinId:t}=e||{},i=(0,Qi.useRef)(!1),s=$o();return Go(async()=>{try{if(i.current===!0||!t)return;i.current=!0;let n=await We().getUserUniqueId(),r={coinId:t,accountId:s,userUniqueId:n},c={headers:await We().getSignRequestHeaders({walletId:s})},[m]=await Promise.all([qo({coinId:t}),nt(st.postAddCoin,r,c)]);await Ho(m),de.success(v("wallet_extension_customtoken_notification_title_token_added"))}catch{de.error(v("wallet_home_toast_network_error"))}finally{i.current=!1}})},en=Ds;_();a();var tn={root:"_root_4qsur_1"};function bs({coinId:e}){let t=ci(),i=(0,kt.useMemo)(()=>!t||!e||!!t.some(n=>n.coinId===e),[e,t]),s=en({coinId:e});return i?null:kt.default.createElement(Mo.IconButton,{className:tn.root,icon:"okx-wallet-plugin-add",tooltip:{title:v("wallet_extension_customtoken_tooltips_add_token"),placement:me.DIRECTION.topLeft},onClick:s})}var on=bs;var Ss=(e,t)=>{!e||globalThis.platform.openTab({url:`https://${t}/${e}`})},Ls=e=>{e||(e=""),typeof e!="string"&&(e=e.toString());let t=e==null?void 0:e.length;return t<=15?"18px":t<=17?"16px":t<=19?"14px":(t<=22,"12px")};function Fs(e){e||(e=""),typeof e!="string"&&(e=e.toString());let t=e==null?void 0:e.length;return t<=13?"32px":t===14?"30px":t===15?"28px":t===16?"26px":t===17?"24px":t<=19?"22px":t<=21?"20px":t<=23?"18px":t<=26?"16px":t<=30?"14px":"12px"}function Rs({recordData:e,isNFT:t,icon:i,title:s,subTitle:n,right:r,autoWidth:l,jumpInfo:c,hasPlus:m,isNewInclude:p,addCustomCoin:u}){let d=Zo(),w=Nt(),N=typeof i=="string"?Y.default.createElement(ei,{isNFT:t,className:(0,nn.default)({}),src:i,alt:""}):i;return p?Y.default.createElement("div",{className:`${p?T["coin-flow__protocol"]:T["coin-flow__include"]}`},Y.default.createElement("div",{className:`${T["coin-flow__include-title"]}`},v("extension_defi_card_text_include_assets")),((e==null?void 0:e.items)||[]).map(C=>Y.default.createElement("div",{className:`${T["coin-flow__include-item"]}`},Y.default.createElement("img",{className:`${T["coin-flow__include-item-icon"]}`,alt:"",src:C.icon}),Y.default.createElement(Ze.AdaptiveText,{className:`${T["coin-flow__include-item-token"]}`,text:C.title,ellipsis:{tooltip:!0},autoSize:Ls},C.title),C.right))):Y.default.createElement(Y.default.Fragment,null,Y.default.createElement("div",{className:`${T["coin-flow__record"]} ${c?T["coin-flow__pointer"]:""}`,onClick:()=>{Ss(c,d)}},Y.default.createElement("div",{className:T["coin-flow__record-icon"]},N),Y.default.createElement("div",{className:T["coin-flow__record-left-box--middle"]},Y.default.createElement("div",{className:r?T["coin-flow__record-left-box--has-right"]:T["coin-flow__record-left-box"]},Y.default.createElement("div",{className:`${l?T["protocol-margin"]:T["coin-flow__record-title-box"]}`},!r||l?Y.default.createElement(Ze.AdaptiveText,{className:"coin-flow__record-title",text:s,ellipsis:{tooltip:!0},autoSize:Fs},s):Y.default.createElement(Ze.Text,{ellipsis:{tooltip:!0},className:`coin-flow__record-title ${T["coin-flow__record-title"]}`},s),n&&Y.default.createElement("div",{className:T["coin-flow__record-sub-title"]},n)),r&&Y.default.createElement("div",{className:`${T["coin-flow__record-right-box"]} ${l?"":T["coin-flow__record-halfwidth"]}`},r))),u&&Y.default.createElement(on,{coinId:u.coinId}),c&&Y.default.createElement("img",{className:T["coin-flow__record-jumpInfo-box"],src:`${w}/cdn/assets/imgs/236/1708B3075C6617C7.svg`,alt:"goto"})),m&&Y.default.createElement(Be,{className:`${T["coin-flow__record__plus"]} okds-plus`}))}var mt=Rs;function ro({className:e,label:t,children:i}){return X.default.createElement("div",{className:(0,Ut.default)(t?T["coin-flow__label"]:"",e)},X.default.createElement("div",{className:T["coin-flow__label-text"]},t),X.default.createElement("div",null,i))}function Bs({className:e,label:t,children:i,isExpand:s,setExpand:n}){return X.default.createElement("div",{className:(0,Ut.default)(t?T["coin-flow__label__overflow"]:"",e)},X.default.createElement("div",{className:T["coin-flow__label-text"]},t),X.default.createElement("div",null,s?i:i.slice(0,2)),X.default.createElement(At,{className:T["coin-flow__label__expand"],side:s?At.SIDE.TOP:At.SIDE.BOTTOM,onClick:()=>{n(!s)}}))}function _o({data:e}){let{txType:t}=e,i=Di(e),s=Ji(e),[n,r]=(0,X.useState)(!1);if(!i&&!s||t===o.CANCEL_NFT&&i.items.length===0)return null;let l=!i||!s,c=m=>{if(!m)return null;let{items:p,label:u,...d}=m,w=e==null?void 0:e.investmentPath;return m!=null&&m.isNewInclude?X.default.createElement(ro,{...d,label:u},X.default.createElement(mt,{recordData:m,isNewInclude:m==null?void 0:m.isNewInclude})):t===o.DAPP_APPLY||t===o.DAPP_REDEEM?X.default.createElement(ro,{...d,label:u},p.map((N,C)=>X.default.createElement(mt,{jumpInfo:N.subTitle?w:void 0,...N,key:C,hasPlus:p.length>=2&&C!==p.length-1,label:u}))):(p==null?void 0:p.length)>2?X.default.createElement(Bs,{...d,label:u,isExpand:n,setExpand:r},p.map((N,C)=>X.default.createElement(mt,{...N,key:C}))):X.default.createElement(ro,{...d,label:u},p==null?void 0:p.map((N,C)=>X.default.createElement(mt,{jumpInfo:N.subTitle?w:void 0,...N,key:C})))};return X.default.createElement("div",{className:(0,Ut.default)(T["coin-flow"],{[T["coin-flow__hidden-label"]]:l})},c(i),c(s,!0))}var ln=_o;_o.propTypes={data:sn.default.object};_o.defaultProps={data:{}};_();a();var te=I(D());_();a();var ge={address:"_address_1oafg_1","address-type":"_address-type_1oafg_5",addressType:"_address-type_1oafg_5","address-content":"_address-content_1oafg_12",addressContent:"_address-content_1oafg_12","address-string":"_address-string_1oafg_21",addressString:"_address-string_1oafg_21","address-right":"_address-right_1oafg_28",addressRight:"_address-right_1oafg_28","address-container":"_address-container_1oafg_31",addressContainer:"_address-container_1oafg_31","address-tag":"_address-tag_1oafg_36",addressTag:"_address-tag_1oafg_36"};_();a();var Ee=I(D());_();a();var Mt={"tx-detail-info__add-address":"_tx-detail-info__add-address_11gsp_1",txDetailInfoAddAddress:"_tx-detail-info__add-address_11gsp_1","tx-detail-info__add-address__tooltip":"_tx-detail-info__add-address__tooltip_11gsp_1",txDetailInfoAddAddressTooltip:"_tx-detail-info__add-address__tooltip_11gsp_1","tx-detail-info__add-address__img":"_tx-detail-info__add-address__img_11gsp_1",txDetailInfoAddAddressImg:"_tx-detail-info__add-address__img_11gsp_1"};function Ps({address:e,network:t}){let i=b(),[s,n]=(0,Ee.useState)(!1),[r,l]=(0,Ee.useState)({}),[c,m]=(0,Ee.useState)(""),p=ti(()=>{m(Bt.TYPE.ADD),l({address:e,network:t}),n(!0)}),u=w=>{n(!1),setTimeout(()=>{m(Bt.TYPE.EDIT),l({...w,network:t}),n(!0)})},d=()=>{n(!1),l({}),m("")};return Ee.default.createElement(Ee.default.Fragment,null,Ee.default.createElement("div",{className:Mt["tx-detail-info__add-address"]},Ee.default.createElement(me,{className:Mt["tx-detail-info__add-address__tooltip"],title:i("wallet_extension_history_pop_tap_to_add"),type:me.TYPES.neutral,placement:me.DIRECTION.bottomRight},Ee.default.createElement(Be,{className:`${Mt["tx-detail-info__add-address__img"]} okds-plus-circle`,onClick:p}))),s&&Ee.default.createElement(Bt,{type:c,data:r,onClose:d,onChangeToEdit:u}))}var Vt=Ps;function Os({data:e}){let{inAdrList:t,txType:i,mainCoinId:s,coinId:n}=e,[,r]=bt(n),l=b(),c=Dt({coinId:+s}),m=c==null?void 0:c.localType,[p,u]=te.default.useState(!0),d=Ft(m),w=vt(m),N=(0,te.useMemo)(()=>[...new Set((t||[]).map(({address:y})=>y))].map(y=>{let S=!1,W;(i===o.TRANS_IN||i===o.TRANS_OUT||i===o.SEND_NFT||i===o.RECEIVE_NFT||i===o.BRC20_RECEIVE||i===o.BRC20_SEND||i===o.BRC20_INSCRIBE||i===o.BRC20_MINT||i===o.BRC20_DEPLOY||i===o.ORDINAL_NFT||i===o.ORDINAL_TEXT||i===o.BRC20_TRADE||i===o.BRC30_TRADE||i===o.RUNES_SWEEP)&&(W=d(y),S=!W);let U=w[y],Z=U?St(l,U,r==null?void 0:r.symbol):l("wallet_extension_popup_title_receiving_address_copied"),M=U?l(It[gt[U]]):"";return{address:y,canAdd:S,msg:Z,tag:M,tag2:W}}),[i,t,d]);return!N||N.length===0?null:te.default.createElement("div",{className:ge.address},te.default.createElement("div",{className:ge["address-type"]},l("wallet_extension_mid_text_from")),N.map(C=>{var y,S;return te.default.createElement(te.default.Fragment,null,te.default.createElement("div",{className:ge["address-content"]},te.default.createElement("div",{className:ge["address-string"]},C.address),te.default.createElement("div",{className:ge["address-right"]},te.default.createElement(Ye,{label:C.label,value:C.address,message:C.msg}),C.canAdd&&te.default.createElement(Vt,{address:C.address,network:m}))),te.default.createElement("div",{className:ge["address-container"]},C.tag&&te.default.createElement(pe,{className:ge["address-tag"]},C==null?void 0:C.tag),((y=C==null?void 0:C.tag2)==null?void 0:y.name)&&te.default.createElement(pe,{className:ge["address-tag"]},(S=C==null?void 0:C.tag2)==null?void 0:S.name)))}),te.default.createElement("div",{className:p?ge.fold:ge.unfold,onClick:()=>{u(!p)}}))}var rn=Os;_();a();var le=I(D());_();a();var he={"address-to":"_address-to_eshen_1",addressTo:"_address-to_eshen_1","address-type":"_address-type_eshen_4",addressType:"_address-type_eshen_4","address-content":"_address-content_eshen_12",addressContent:"_address-content_eshen_12","address-string":"_address-string_eshen_21",addressString:"_address-string_eshen_21","address-right":"_address-right_eshen_28",addressRight:"_address-right_eshen_28","address-container":"_address-container_eshen_31",addressContainer:"_address-container_eshen_31","tx-clipboard__tag":"_tx-clipboard__tag_eshen_36",txClipboardTag:"_tx-clipboard__tag_eshen_36"};function ks({data:e}){let{to:t,txType:i,contractInfo:s,mainCoinId:n,coinId:r}=e,[,l]=bt(r),c=b(),m=Dt({coinId:+n}),p=m==null?void 0:m.localType,u=Ft(p),d=vt(p),{label:w,toAddress:N,msg:C,tag:y,tag2:S,tag3:W,canAdd:U}=(0,le.useMemo)(()=>{let Z,M,G=!1,fe,ee;if(i===o.TRANS_IN||i===o.TRANS_OUT||i===o.SEND_NFT||i===o.RECEIVE_NFT||[o.BRC20_INSCRIBE,o.BRC20_MINT,o.ORDINAL_NFT,o.ORDINAL_TEXT,o.BRC20_DEPLOY,o.BRC20_RECEIVE,o.BRC20_SEND,o.BRC20_TRADE,o.EARN_BRC30_APPLY,o.EARN_BRC30_REDEEM,o.EARN_BRC30_CLAIM,o.EARN_BRC30_DEPLOY,o.BRC30_SEND,o.BRC30_RECEIVE,o.EARN_BRC30_CLAIM,o.BRC30_INSCRIBE,o.BRC30_TRADE,o.RUNES_SWEEP].includes(i)){let ne=u(t);G=!ne,Z=c("wallet_extension_mid_text_to"),ne!=null&&ne.name&&(fe=ne.name),M=t}else{let{address:ne,name:ue}=s||{};Z=i===o.REGISTRATION?c("wallet_extension_item_register_address"):c("wallet_extension_mid_text_interaction_address"),ee=ue,i===o.AUTHORIZATION||i===o.CANCEL_AUTHORIZATION||i===o.NFT_AUTHORIZATION||i===o.NFT_CANCEL_AUTHORIZATION?M=t:M=ne}let O=d[M],Te=O?c(It[gt[O]]):"",ae=O?St(c,O,l==null?void 0:l.symbol):c("wallet_extension_popup_title_receiving_address_copied");return{label:Z,toAddress:M,tag2:fe,tag3:ee,canAdd:G,tag:Te,msg:ae}},[i,d,u,t,c,s]);return i===o.ZK_REGISTER||!N?null:le.default.createElement(le.default.Fragment,null,le.default.createElement("div",{className:he["address-to"]},le.default.createElement("div",{className:he["address-type"]},w),le.default.createElement("div",{className:he["address-content"]},le.default.createElement("div",{className:he["address-string"]},N),le.default.createElement("div",{className:he["address-right"]},le.default.createElement(Ye,{value:N,message:C}),U&&le.default.createElement(Vt,{address:N,network:p}))),le.default.createElement("div",{className:he["address-container"]},y&&le.default.createElement(pe,{className:he["tx-clipboard__tag"]},y),S&&le.default.createElement(pe,{className:he["tx-clipboard__tag"]},S),W&&le.default.createElement(pe,{className:he["tx-clipboard__tag"]},W))))}var _n=ks;_();a();var $e=I(D());_();a();var je={"tx-detail-status":"_tx-detail-status_6etev_1",txDetailStatus:"_tx-detail-status_6etev_1","tx-detail-icon":"_tx-detail-icon_6etev_5",txDetailIcon:"_tx-detail-icon_6etev_5","tx-detail-loading":"_tx-detail-loading_6etev_11",txDetailLoading:"_tx-detail-loading_6etev_11","tx-detail-loader":"_tx-detail-loader_6etev_16",txDetailLoader:"_tx-detail-loader_6etev_16","tx-detail-text":"_tx-detail-text_6etev_20",txDetailText:"_tx-detail-text_6etev_20","tx-detail-failed":"_tx-detail-failed_6etev_31",txDetailFailed:"_tx-detail-failed_6etev_31"};var Us={"tx-detail-completed":"wallet_extension_history_tab_completed1","tx-detail-waiting":"wallet_extension_history_status_waiting","tx-detail-pending":"wallet_extension_history_status_pending","tx-detail-speeding":"wallet_extension_send_status_speedingup1","tx-detail-canceling":"wallet_extension_send_status_canceling1","tx-detail-speedingcancel":"wallet_extension_send_status_canceling1","tx-detail-failed":"wallet_extension_history_status_failed1","tx-detail-canceled":"wallet_extension_send_status_canceled"},Ms={"tx-detail-completed":"okds-success-circle","tx-detail-canceled":"okx-wallet-plugin-warning-circle","tx-detail-waiting":"okx-wallet-plugin-waiting","tx-detail-failed":"okx-wallet-plugin-failed"};function Vs({data:e}){let t=b();if(!e)return $e.default.createElement($e.default.Fragment,null);let{txStatus:i,isShowPending:s,repeatTxType:n}=e,r="";i===F.CONFIRMING||i===F.SUCCESS?i===F.SUCCESS&&n===$.SPEEDING_CANCEL||n===$.CANCELING?r="tx-detail-canceled":r="tx-detail-completed":i===F.PENDING?(s&&n===$.CONFIRMING&&(r="tx-detail-pending"),!s&&n===$.CONFIRMING&&(r="tx-detail-waiting"),n===$.SPEEDING&&(r="tx-detail-speeding"),n===$.CANCELING&&(r="tx-detail-canceling"),n===$.SPEEDING_CANCEL&&(r="tx-detail-speedingcancel")):i===F.ERROR&&(r="tx-detail-failed");let l=Ms[r]||"";return $e.default.createElement("div",{className:je["tx-detail-status"]+(r==="tx-detail-failed"?` ${je["tx-detail-failed"]}`:"")},$e.default.createElement(Be,{className:`${je["tx-detail-icon"]} ${l}`}),!l&&$e.default.createElement(ve.Circle,{size:ve.SIZE.md,className:je["tx-detail-loading"],loaderClassName:je["tx-detail-loader"]}),$e.default.createElement("div",null,t(Us[r])))}var an=Vs;_();a();var V=I(D());Ce();var vn=I(Pe());var mo=I(ot());_();a();var Se=I(D()),pt=I(yo());var cn=I(Me());_();a();var be={"tx-hash__inner":"_tx-hash__inner_1f08g_1",txHashInner:"_tx-hash__inner_1f08g_1","tx-hash__inner-wrap":"_tx-hash__inner-wrap_1f08g_5",txHashInnerWrap:"_tx-hash__inner-wrap_1f08g_5","tx-hash__vertical":"_tx-hash__vertical_1f08g_14",txHashVertical:"_tx-hash__vertical_1f08g_14","tx-hash__icon":"_tx-hash__icon_1f08g_20",txHashIcon:"_tx-hash__icon_1f08g_20","okx-wallet-plugin-copy-1":"_okx-wallet-plugin-copy-1_1f08g_25",okxWalletPluginCopy1:"_okx-wallet-plugin-copy-1_1f08g_25","tx-hash__message":"_tx-hash__message_1f08g_36",txHashMessage:"_tx-hash__message_1f08g_36","tx-hash__tag":"_tx-hash__tag_1f08g_40",txHashTag:"_tx-hash__tag_1f08g_40"};function ao({className:e,label:t,value:i,message:s,tag:n,url:r,showExplorerUrl:l}){let c=b(),[m,p]=ui(),u=()=>{m||(p(i),Ao.success({title:s||c("wallet_receive_toast_address_copied"),desc:Se.default.createElement("div",{className:be["tx-hash__message"]},i)}))},d=()=>{!l||globalThis.platform.openTab({url:r})};return Se.default.createElement("div",{className:(0,cn.default)(be["tx-hash"],e)},Se.default.createElement("div",{className:be["tx-hash__inner"]},Se.default.createElement("div",{className:be[l?"tx-hash__inner-wrap":""],onClick:d},t,n&&Se.default.createElement("div",{className:be["tx-hash__tag"]},n)),Se.default.createElement("div",{className:be["tx-hash__vertical"]}),Se.default.createElement("div",{className:be["tx-hash__icon"],onClick:u},Se.default.createElement(Be,{className:`okx-wallet-plugin-copy-1 ${be["okx-wallet-plugin-copy-1"]}`}))))}var Ht=ao;ao.propTypes={label:pt.default.any,value:pt.default.string,message:pt.default.string,className:pt.default.string};ao.defaultProps={label:"",value:"",className:"",message:""};_();a();var mn=I(D());function Hs({txType:e,investTxData:t}){let i=b();if(!t||!t.lpTokenInfo||[Ie.FARM_LP_TOKEN,Ie.FARM_OTHER_TOKEN].includes(t==null?void 0:t.investmentDetailType))return null;let s;if(e===o.DAPP_APPLY?s="wallet_extension_info_receive":e===o.DAPP_REDEEM&&(s="wallet_extension_info_pay"),!s)return null;let{num:n,tokenName:r}=t.lpTokenInfo;return mn.default.createElement(q,{label:i(s),value:j(n,{symbol:r})})}var pn=Hs;_();a();var Tn=I(D());_();a();var dn=I(ot());Ce();var Gs="okx-wallet-plugin-lock-1",$s="okx-wallet-plugin-enrollment",fn=(e={})=>{let{txType:t,assetChange:i=[],poolLogo:s}=e;if(t===o.AUTHORIZATION||t===o.CANCEL_AUTHORIZATION||t===o.DAPP_NFT||t===o.CONTRACTCALL||t===o.CANCEL_NFT||t===o.NFT_CANCEL_AUTHORIZATION)return[e.contractIcon||no(e)];if(t===o.NFT_AUTHORIZATION)return[e.contractIcon||Gs];if(t===o.ZK_REGISTER)return[$s];if(t===o.EARN_BRC30_DEPLOY)return[s];let n=i.map(r=>{let{coinImgUrl:l}=r||{};return l||wi(r,e)});return n.reverse(),n.length===0?[no(e)]:n},Gt=(e={})=>{let{txType:t,approveSymbol:i,nftCollectionName:s}=e;return Ot(t,{symbol:i,collection:s},e)},un=(e={},t="en-US")=>{let i=b(),s=[],{txType:n,txStatus:r}=e;if(n===o.TRANS_OUT||n===o.SEND_NFT||n===o.BRC20_SEND||n===o.BRC20_RECEIVE||n===o.BRC30_TRADE||n===o.BRC30_SEND){let l=K(e.to),c=`${i("wallet_extension_history_list_send_to")}   ${l}`;s.push(c)}else if(n===o.TRANS_IN||n===o.RECEIVE_NFT||n===o.BRC30_RECEIVE){let l=K(e.from),c=`${i("wallet_extension_history_list_receive_from")}   ${l}`;s.push(c)}else if(n===o.CANCEL_NFT){let l=e.contractName||K(e.to);s.push(l)}else if(n===o.ZK_REGISTER)s.push(K(e.from));else if(n===o.EARN_BRC30_APPLY||n===o.EARN_BRC30_REDEEM||n===o.EARN_BRC30_CLAIM||n===o.EARN_BRC30_DEPLOY)e.poolId&&s.push(`Pool ID: ${e.poolId}`);else if(n===o.BRC30_INSCRIBE){let l=K(e.from);s.push(l)}else{let{contractName:l,contractAddress:c}=e,m=l||K(c)||"";s.push(m)}if(r===F.PENDING){let l=Re(e.txTime,{format:"yyyyMMddHHmmss",locale:t});s.push(l)}return s},xn=(e={})=>{let{assetChange:t=[],txType:i,repeatTxType:s,coinId:n}=e,{baseCoin:r}=Oe(n,!0),l=yt(r.coinId);return t.map(m=>{let{direction:p,coinAmount:u,coinSymbol:d}=m||{};if((0,dn.isNil)(u))return null;let w=null;return(u!=="0"||l&&(i===o.TRANS_IN||i===o.TRANS_OUT)&&s!==$.CANCELING&&s!==$.SPEEDING_CANCEL)&&(w=j(u)),i===o.CANCEL_NFT?{coinAmount:"",symbol:d}:{direction:p,coinAmount:w,symbol:d}}).filter(Boolean)};function Ws(e){let{txType:t}=e,i=b(),s=Gt(e);return t===o.ZK_REGISTER&&(s=i("wallet_extension_history_text_change_pubkey")),Tn.default.createElement(q,{label:i("wallet_extension_info_text_type"),value:s})}var Cn=Ws;_();a();var $t=I(D());var Nn=I(Pe());Ce();to();bo();var Zs=[it,Do];function Ys({mainCoinId:e,txStatus:t,serviceCharge:i,chainSymbol:s,serviceChargeUsd:n,feeName:r,feeDecimalNum:l,txType:c}){let m=b(),p=wt(e),u=Zs.includes(e),{coin:d}=Oe(e,!1),w=(0,Nn.useSelector)(Et),N,C;if(c===o.DAPP_UNISAT||c===o.ZK_REGISTER&&e===it)return null;u?(N=l,C=r):(N=d.decimals,C=s);let y=Eo.div(i||0,10**(N||0)),S=`${j(y)} ${C}`;if((p||u)&&t!==F.PENDING){let{usdToThisRate:W}=w,U=ut(n,W);S+=` (${Uo(U,{symbol:w.symbol,useApproximate:!1})})`}return $t.default.createElement($t.default.Fragment,null,$t.default.createElement(q,{label:m("wallet_extension_mid_text_network_fee"),value:S}))}var In=Ys;_();a();var Wt=I(D());_();a();var gn=I(D());rs();function co(){let e=jo(),t=zo();return(0,gn.useCallback)(i=>{try{let s=i==null?`type: ${String(i)}`:i;go.captureEvent({message:"coin not found in tx detail",contexts:{report:{info:JSON.stringify({coinId:s,coinIdType:typeof i,coinsReady:e,coinsMapSize:Object.keys(t!=null?t:{}).length,coinExisted:i!=null?t==null?void 0:t[i]:!1})}},exception:{values:[{type:"BIZ_ERROR_txHistoryCoinNofFound",value:String(s)}]},level:"info"})}catch(s){console.log(s)}},[e,t])}function Ks({mainCoinId:e}){let t=b(),{coin:i}=Oe(e,!1),s=co();return(0,Wt.useEffect)(()=>{setTimeout(()=>{i!=null&&i.coinId||s(e)},1500)},[i,e,s]),Wt.default.createElement(q,{label:t("wallet_extension_mid_text_network"),value:i.chainName})}var En=Ks;_();a();var wn=I(D());bo();function qs({txType:e,mainCoinId:t,confirmedCount:i}){let s=b();return e===o.ZK_REGISTER&&t===it?null:wn.default.createElement(q,{label:s("wallet_extension_mid_text_block_confirmation"),value:i})}var yn=qs;_();a();var Zt=I(D());function js(e){let{txType:t,approveInfo:i}=e,s=b(),{amount:n,decimalNum:r}=i||{},l=(0,Zt.useMemo)(()=>n==="115792089237316195423570985008687907853269984665640564039457584007913129639935"?s("wallet_extension_mid_text_unlimited"):j(n,{decimals:r}),[n]);return t!==o.AUTHORIZATION?null:Zt.default.createElement(q,{label:s("wallet_extension_mid_text_approved_amount"),value:l})}var hn=js;_();a();var An={"tx-detail-info":"_tx-detail-info_pqo7x_1",txDetailInfo:"_tx-detail-info_pqo7x_1","tx-detail-info__tooltip":"_tx-detail-info__tooltip_pqo7x_5",txDetailInfoTooltip:"_tx-detail-info__tooltip_pqo7x_5","tx-detail-info__status":"_tx-detail-info__status_pqo7x_8",txDetailInfoStatus:"_tx-detail-info__status_pqo7x_8","tx-detail-info__status--loading":"_tx-detail-info__status--loading_pqo7x_20",txDetailInfoStatusLoading:"_tx-detail-info__status--loading_pqo7x_20",spin:"_spin_pqo7x_1","tx-detail-info__network":"_tx-detail-info__network_pqo7x_23",txDetailInfoNetwork:"_tx-detail-info__network_pqo7x_23","tx-detail-info__to-name":"_tx-detail-info__to-name_pqo7x_33",txDetailInfoToName:"_tx-detail-info__to-name_pqo7x_33","tx-detail-info__gas-fee":"_tx-detail-info__gas-fee_pqo7x_43",txDetailInfoGasFee:"_tx-detail-info__gas-fee_pqo7x_43","tx-detail-info__add-address":"_tx-detail-info__add-address_pqo7x_50",txDetailInfoAddAddress:"_tx-detail-info__add-address_pqo7x_50","tx-detail-info__add-address__img":"_tx-detail-info__add-address__img_pqo7x_54",txDetailInfoAddAddressImg:"_tx-detail-info__add-address__img_pqo7x_54"};function zs({memo:e}){let t=b();return(0,mo.isNil)(e)?null:V.default.createElement(q,{label:t("wallet_extension_text_memocontent"),value:V.default.createElement(at,{text:e||"--",maxWidth:"260px"})})}function Xs({mev:e}){return(0,mo.isNil)(e)?null:V.default.createElement(q,{label:"MEV",value:V.default.createElement(at,{text:e||"--",maxWidth:"260px"})})}function Js({data:e}){let t=b(),i=(0,vn.useSelector)(Ct),{txTime:s,txHash:n,investTxData:r,txHash1:l,txHash2:c,explorerUrl:m,explorerUrl1:p,explorerUrl2:u,showExplorerUrl:d}=e;return V.default.createElement("div",{className:An["tx-detail-info"]},V.default.createElement(q,{label:t("wallet_extension_mid_text_time"),value:Re(s,{format:"yyyyMMddHHmmss",locale:i})}),V.default.createElement(Cn,{...e}),V.default.createElement(pn,{...e}),V.default.createElement(In,{...e}),V.default.createElement(En,{...e}),!l&&n&&V.default.createElement(q,{label:t("wallet_extension_mid_text_transaction_hash"),value:V.default.createElement(Ht,{showExplorerUrl:d,label:K(n),value:n,url:m,message:t("wallet_extension_popup_title_transaction_hash_copied")})}),l&&V.default.createElement(q,{label:t("extension_wallet_details_item_transaction_hash1"),value:V.default.createElement(V.default.Fragment,null,V.default.createElement(Ht,{showExplorerUrl:d,label:K(l),value:l,url:p,message:t("wallet_extension_popup_title_transaction_hash_copied")}))}),c&&V.default.createElement(q,{label:t("extension_wallet_details_item_transaction_hash2"),value:V.default.createElement(V.default.Fragment,null,V.default.createElement(Ht,{showExplorerUrl:d,label:K(c),value:c,url:u,message:t("wallet_extension_popup_title_transaction_hash_copied")}))}),V.default.createElement(yn,{...e}),(r==null?void 0:r.validateName)&&V.default.createElement(q,{label:t("extension_wallet_history_text_validator"),value:K(r==null?void 0:r.validateName)}),V.default.createElement(hn,{...e}),V.default.createElement(Xs,{...e}),V.default.createElement(zs,{...e}))}var Dn=Js;_();a();var oe=I(D());_();a();var dt=I(D());Ce();vo();So();Ro();var Qs=({tx:e,closeVisible:t,repeatVisible:i,onClose:s,onConfirm:n})=>{var Z;let r=t||i,{txHash:l,coinId:c,txId:m,include:p,coinSymbol:u}=e,d=(Z=p==null?void 0:p[0])==null?void 0:Z.protocolName,w=u,N=Wo(),y=Xo(c).chainId,S=async()=>{let M=await We().getRequestHeaders({walletId:N,needSign:!0,currency:"usd"}),G={txHash:l,accountId:N,chainId:y};return await nt(st.postCloseTranscation,G,{headers:M})},W=async()=>{let M=await We().getRequestHeaders({walletId:N,needSign:!0,currency:"usd"}),G={txHash:l,accountId:N,chainId:y};return(await nt(st.postRepeatTranscation,G,{headers:M})).code},U=async()=>{try{t?(Po({token_name:w,protocol:d}),await S()):i&&(Oo({token_name:w,protocol:d}),await W())}catch{de.error({title:v("extension_defi_toast_header_tips_request_failed")});return}n(m),de.success({title:v("extension_defi_toast_header_tips_request_submit")})};return dt.default.createElement(ho.Prompt,{visible:r,className:"ethereum-tx-speed-dialog",alignBottom:!1,titleCenter:!1,infoType:null,onConfirm:U,onClose:()=>{s&&s()},confirmText:v("wallet_extension_btn_general_confirm"),confirmBtnProps:{type:Jt.TYPE.highlight,size:Jt.SIZE.lg},renderContent:M=>dt.default.createElement(M,null,dt.default.createElement("div",{className:"ethereum-tx-speed-dialog__title"},t&&v("extension_defi_toast_title_release_utxo"),i&&v("extension_defi_toast_title_rebroadcast")),dt.default.createElement("div",{className:"ethereum-tx-speed-dialog__subtitle"},t&&v("extension_defi_toast_desc_release_utxo"),i&&v("extension_defi_toast_desc_rebroadcast")))})},bn=Qs;_();a();var P=I(D()),ze=I(Me());Ce();to();_();a();var k={"transaction-detail-box":"_transaction-detail-box_1ugec_1",transactionDetailBox:"_transaction-detail-box_1ugec_1","dialog-header":"_dialog-header_1ugec_4",dialogHeader:"_dialog-header_1ugec_4","dialog-title":"_dialog-title_1ugec_7",dialogTitle:"_dialog-title_1ugec_7","close-icon":"_close-icon_1ugec_14",closeIcon:"_close-icon_1ugec_14","transaction-acceleration-container":"_transaction-acceleration-container_1ugec_17",transactionAccelerationContainer:"_transaction-acceleration-container_1ugec_17","transaction-acceleration-header":"_transaction-acceleration-header_1ugec_20",transactionAccelerationHeader:"_transaction-acceleration-header_1ugec_20","transaction-acceleration-title":"_transaction-acceleration-title_1ugec_23",transactionAccelerationTitle:"_transaction-acceleration-title_1ugec_23","transaction-acceleration-subtitle":"_transaction-acceleration-subtitle_1ugec_28",transactionAccelerationSubtitle:"_transaction-acceleration-subtitle_1ugec_28","text-underline":"_text-underline_1ugec_33",textUnderline:"_text-underline_1ugec_33","transaction-acceleration-details":"_transaction-acceleration-details_1ugec_38",transactionAccelerationDetails:"_transaction-acceleration-details_1ugec_38","transaction-detail-row":"_transaction-detail-row_1ugec_43",transactionDetailRow:"_transaction-detail-row_1ugec_43","transaction-detail-label":"_transaction-detail-label_1ugec_50",transactionDetailLabel:"_transaction-detail-label_1ugec_50","transaction-detail-value":"_transaction-detail-value_1ugec_56",transactionDetailValue:"_transaction-detail-value_1ugec_56","transaction-detail-fiat-value":"_transaction-detail-fiat-value_1ugec_64",transactionDetailFiatValue:"_transaction-detail-fiat-value_1ugec_64","transaction-acceleration-footer":"_transaction-acceleration-footer_1ugec_70",transactionAccelerationFooter:"_transaction-acceleration-footer_1ugec_70","empty-state":"_empty-state_1ugec_77",emptyState:"_empty-state_1ugec_77"};var el=({currentAvgFeeRate:e,expectedFeeRate:t,currentTxSize:i,ancestorsTxSize:s,totalFee:n,totalFeeUSD:r})=>P.default.createElement("div",{className:k.transactionDetailBox},P.default.createElement("section",{className:k.transactionAccelerationDetails},P.default.createElement("p",{className:k.transactionDetailRow},s?P.default.createElement(me,{title:v("extension_defi_popup_tooltips_feerate_before_speedup"),placement:me.DIRECTION.topLeft,arrowAlignBoundary:!0},P.default.createElement("span",{className:(0,ze.default)(k.transactionDetailLabel,k.textUnderline)},v("extension_defi_toast_item_current_fee_rate"))):P.default.createElement("span",{className:k.transactionDetailLabel},v("extension_defi_toast_item_current_fee_rate")),P.default.createElement("span",{className:k.transactionDetailValue},`${e} sats/vb`)),P.default.createElement("p",{className:k.transactionDetailRow},P.default.createElement("span",{className:k.transactionDetailLabel},v("extension_defi_toast_item_speedup_rate")),P.default.createElement("span",{className:k.transactionDetailValue},`${t} sats/vb`)),P.default.createElement("p",{className:k.transactionDetailRow},P.default.createElement("span",{className:k.transactionDetailLabel},v("extension_defi_toast_item_txn_size")),P.default.createElement("span",{className:k.transactionDetailValue},`${i}vb`)),s?P.default.createElement("p",{className:k.transactionDetailRow},P.default.createElement("span",{className:k.transactionDetailLabel},v("extension_defi_toast_item_ancestor_txn")),P.default.createElement("span",{className:k.transactionDetailValue},`${s}vb`)):null,P.default.createElement("section",{className:k.transactionDetailRow},s?P.default.createElement(me,{title:v("extension_defi_popup_tooltips_desc_total_fee_meaning")},P.default.createElement("span",{className:(0,ze.default)(k.transactionDetailLabel,k.textUnderline)},v("extension_defi_toast_item_total_fee"))):P.default.createElement("span",{className:(0,ze.default)(k.transactionDetailLabel)},v("extension_defi_toast_item_total_fee")),P.default.createElement("p",{className:(0,ze.default)(k.transactionDetailValue,k.transactionDetailFiatValue)},eo(n)," ~ ",r))),P.default.createElement("p",{className:k.transactionAccelerationFooter},v("extension_defi_toast_desc_0service_fee"))),tl=({tx:e,feeInfo:t,visible:i,networkError:s,onClose:n,onConfirm:r,onRetry:l})=>{let{currencyPrice:c,currencySymbol:m}=Qo(e.mainCoinId),p=`${m}${Fo(ut(eo(t.totalFee),c),2)}`;return P.default.createElement(pi,{visible:i,error:s,onClose:n,onConfirm:r,title:v("extension_defi_toast_title_speedup_txn"),headerTitle:wo("extension_defi_toast_subtitle_raise_fee_variable",{cpfp:P.default.createElement(me,{title:v("extension_defi_popup_tooltips_cpfp_meaning")},P.default.createElement("span",{className:(0,ze.default)(k.transactionAccelerationSubtitle,k.textUnderline)},`${v("extension_defi_toast_subtitle_using_cpfp")}`))}),content:P.default.createElement(el,{...t,totalFeeUSD:p}),errContent:P.default.createElement(Qt.State,{title:v("extension_defi_toast_title_internet_error"),type:Qt.State.TYPE.noNetwork,description:v("extension_defi_toast_subtitle_cant_get_fee"),buttonText:v("extension_defi_toast_btn_retry"),onButtonClick:()=>{l&&l()},className:k.emptyState}),confirmText:v("wallet_extension_btn_general_confirm")})},Sn=tl;_();a();to();Ce();var re=I(D());var Ln=I(Pe()),ol=(e,t)=>{var Qe,et;let{address:i,mainCoinId:s,txHash:n,txId:r,btcSpeedUpInfo:l}=e,c=((Qe=l==null?void 0:l.cpfpSpeedUpUtxo)==null?void 0:Qe[0].address)||i,m=400002,[p,u]=(0,re.useState)(!1),[d,w]=(0,re.useState)(!1),[N,C]=(0,re.useState)(!1),[y,S]=(0,re.useState)(!1),[W,U]=(0,re.useState)(!1),[Z,M]=(0,re.useState)({}),[G,fe]=(0,re.useState)({}),[ee,O,Te,ae]=ni({...e,address:c}),ne=(0,Ln.useSelector)(Et),{currencyId:ue}=ne,x=si({address:i,coinId:s,currencyId:ue,doubleConfirmSource:ii.ACCELERATE});(0,re.useEffect)(()=>{(async()=>{if(ee&&(O==null?void 0:O.expectedFeeRate)){let[ce,Fe,,tt]=await ae(ee,O);(ce||Fe)&&M({...O,totalFee:xt(Number(O.increaseFee)+tt)})}})()},[O,ee,ae]);let E=(0,re.useCallback)((J,ce)=>{if((J==null?void 0:J.code)===m){de.error({title:v("extension_defi_top_toast_speedup_fail")}),t(r);return}if((J==null?void 0:J.code)===mi.BALANCE_NOT_ENOUGH){ce==="confirm"&&lt({accelerate_status:"utxo_fail"}),de.error({title:v("extension_defi_top_text_insufficient_utxo_pay")});return}ce==="init"?(w(!0),u(!0)):(lt({accelerate_status:"other_fail"}),C(!0))},[]),f=(0,re.useCallback)(async()=>{if(!y){S(!0);try{let[J,ce,,Fe]=await ae(ee,O);if(J||ce)M({...O,totalFee:xt(Number(O.increaseFee)+Fe)});else{de.error({title:v("extension_defi_top_text_insufficient_utxo_pay")});return}u(!0),w(!1),C(!1)}catch(J){E(J,"init")}S(!1)}},[ee,O,E,n]),h=Jo(),A=(et=h==null?void 0:h.find(J=>J.coinId===s))==null?void 0:et.localType,B=li({coinId:s,fromAddr:c,toAddr:c,outputs:[{address:c,amount:G.sendAmountInt}],networkFee:G.networkFeeInt,localType:A,dustSize:G.totalInput,satBytes:O.expectedFeeRate,coinAmount:G.sendAmountInt,extraPublishParams:{coinAmount:G.sendAmountInt,txType:o.TRANS_OUT}});(0,re.useEffect)(()=>{(async()=>{try{let{confirm:ce,utxoList:Fe}=G;ce&&(await B({utxoList:Fe}),de.success(v("extension_defi_top_toast_speedup_success")),lt({accelerate_status:"success"}))}catch{de.error({title:v("extension_defi_top_toast_speedup_fail")})}})()},[G]);let L=(0,re.useCallback)(async()=>{if(W)return;if(U(!0),await oi())try{let[ce,Fe,tt,ns]=await ae(ee,O);if(!ce&&!Fe){de.error({title:v("extension_defi_top_text_insufficient_utxo_pay")}),lt({accelerate_status:"utxo_fail"}),U(!1);return}try{await x(tt)}catch{U(!1);return}let Co=tt.reduce((ss,ls)=>ss+ls.coinAmount,0),No=xt(ns,Number(O.increaseFee)),Io=Number(Lo(Co,No));Fe&&(Io=Te),fe({totalInput:Co,sendAmountInt:Io,networkFeeInt:No,utxoList:tt,confirm:!0}),w(!1),C(!1),U(!1),u(!1),t(r)}catch(ce){E(ce,"confirm"),U(!1)}},[ee,O,n]),se=(0,re.useCallback)(async()=>{d&&f(),N&&L()},[f,N,d,L]);return{isFetchingTxFee:y,btcSpeedUpHandle:f,isBTCSpeedUpDialogVisible:p,displayFee:Z,isFetchBTCFeeInfoNetworkError:d,isConfirmAccelerateError:N,onConfirmAccelerateBTCTX:L,setIsBTCSpeedUpDialogVisible:u,onRetryBtcSpeedUp:se}},Fn=ol;function il({data:e,onRefresh:t}){var L;let{txStatus:i,isShowSpeedUp:s,isShowCancel:n,isShowSpeedupCancel:r,mainCoinId:l,showCloseTransaction:c,showTxRepeatBroadcast:m,include:p,coinSymbol:u}=e,[d,w]=(0,oe.useState)(!1),[N,C]=(0,oe.useState)(!1),[y,S]=(0,oe.useState)(!1),[W,U]=(0,oe.useState)(!1),Z=wt(l),M=Vo(l);(0,oe.useEffect)(()=>{Bo({button_appear:M&&s?"yes":"no"})},[M,s]);let[G]=(0,oe.useState)(M&&s),fe=Z&&i===F.PENDING,ee=c||m||G,O=(L=p==null?void 0:p[0])==null?void 0:L.protocolName,Te=u,{isFetchingTxFee:ae,btcSpeedUpHandle:ne,isBTCSpeedUpDialogVisible:ue,displayFee:x,isFetchBTCFeeInfoNetworkError:E,isConfirmAccelerateError:f,onConfirmAccelerateBTCTX:h,setIsBTCSpeedUpDialogVisible:A,onRetryBtcSpeedUp:B}=Fn(e,t);return oe.default.createElement("div",{className:"tx-detail-action"},(fe||ee)&&oe.default.createElement(oe.default.Fragment,null,oe.default.createElement(xi,{isLoading:ae,isShowCancel:n,isShowSpeedUp:s&&Z,isShowSpeedupCancel:r,showCloseTransaction:c,canAccelerateBtcTx:G,showTxRepeatBroadcast:m,onCancel:()=>{w(!0)},onSpeedUp:()=>{C(!0)},onClose:()=>{S(!0),oo({token_name:Te,protocol:O,button_name:"releaseutxo"})},onRepeat:()=>{U(!0),oo({token_name:Te,protocol:O,button_name:"rebroadcast"})},onBtcSpeedUp:ne}),d&&oe.default.createElement(di,{visible:d,tx:e,onConfirm:se=>{t(se),w(!1)},onClose:()=>{w(!1)}}),N&&oe.default.createElement(fi,{visible:N,tx:e,onConfirm:se=>{t(se),C(!1)},onClose:()=>{C(!1)}}),(y||W)&&oe.default.createElement(bn,{tx:e,closeVisible:y,repeatVisible:W,onConfirm:se=>{t(se),S(!1),U(!1)},onClose:()=>{S(!1),U(!1)}}),ue&&oe.default.createElement(Sn,{tx:e,feeInfo:x,networkError:E||f,visible:ue,onConfirm:async()=>{await h()},onClose:()=>{A(!1)},onRetry:B})))}var Rn=il;_();a();var ft={"tx-detail":"_tx-detail_1okj5_1",txDetail:"_tx-detail_1okj5_1","metax-ok-navigator":"_metax-ok-navigator_1okj5_13",metaxOkNavigator:"_metax-ok-navigator_1okj5_13","tx-detail__inner":"_tx-detail__inner_1okj5_19",txDetailInner:"_tx-detail__inner_1okj5_19","tx-detail__underline":"_tx-detail__underline_1okj5_24",txDetailUnderline:"_tx-detail__underline_1okj5_24","tx-detail__loading":"_tx-detail__loading_1okj5_29",txDetailLoading:"_tx-detail__loading_1okj5_29"};_();a();function sl({params:e,onRefresh:t,onClose:i}){let s=(0,H.useRef)(""),n=(0,H.useRef)(null),[r,l]=(0,H.useState)(),c=()=>{if(!e)return;let{coinId:d,address:w,orderType:N,orderId:C}=e;Ko({coinId:d,txId:s.current,address:w,orderType:N,orderId:C}).then(y=>{e&&!(0,Bn.isEmpty)(y)&&l({...y,address:w})}).catch(()=>{})};(0,H.useEffect)(()=>{e?(s.current=e.txId,c(),n.current=c):(s.current="",l(null))},[e]);let m=()=>{n.current&&s.current&&n.current()},p=_t("wallet-transaction"),u=_t("wallet-tx-confirm",m);return(0,H.useEffect)(()=>{var d,w,N,C,y;(p&&((w=r==null?void 0:r.orderTxIdList)==null?void 0:w.includes((d=p.data)==null?void 0:d.txId))||u&&((N=u.data)==null?void 0:N.txId)===s.current&&((C=u.data)==null?void 0:C.confirmedCount)<=((y=u.data)==null?void 0:y.totalConfirm))&&c()},[p,u]),e?H.default.createElement("div",{className:ft["tx-detail"]},H.default.createElement(Yo,{onBack:i,title:H.default.createElement(an,{data:r})}),r?H.default.createElement(H.default.Fragment,null,H.default.createElement(Ti,{message:r.failReason}),H.default.createElement("div",{className:ft["tx-detail__inner"]},H.default.createElement(ln,{data:r}),r&&H.default.createElement(rn,{data:r}),r&&H.default.createElement(_n,{data:r}),H.default.createElement("div",{className:ft["tx-detail__underline"]}),H.default.createElement(Dn,{data:r}),H.default.createElement(Rn,{data:r,onRefresh:d=>{s.current=d,c(),t&&t()}}))):H.default.createElement("div",{className:ft["tx-detail__loading"]},H.default.createElement(ve.Circle,{size:ve.SIZE.lg}))):null}var po=sl;_();a();_();a();var qt=I(D());_();a();var Ae=I(D()),Pn=I(Pe()),On=I(ko());_();a();var Yt=(e={})=>{let t=b(),{txStatus:i,isShowPending:s,repeatTxType:n}=e;if(i===F.SUCCESS&&(n===$.CANCELING||n===$.SPEEDING_CANCEL))return t("wallet_extension_send_status_canceled");if(i===F.CONFIRMING||i===F.SUCCESS)return"";if(i===F.ERROR)return t("wallet_extension_history_status_failed");if(i===F.PENDING&&!s)return t("wallet_extension_history_list_status_waiting");if(i===F.PENDING&&s){if(n===$.CONFIRMING)return"";if(n===$.SPEEDING)return t("wallet_extension_send_status_speedingup");if(n===$.CANCELING||n===$.SPEEDING_CANCEL)return t("wallet_extension_send_status_canceling")}return""},Kt=(e={})=>{let{txStatus:t,isShowPending:i,repeatTxType:s}=e;return t===F.SUCCESS&&(s===$.CANCELING||s===$.SPEEDING_CANCEL)?rt.CANCELED:t===F.CONFIRMING||t===F.SUCCESS?"":t===F.ERROR?rt.FAILED:t===F.PENDING&&!i?rt.WAITING:rt.PENDING};var ll=({data:e={},onClick:t,onRepeat:i})=>{let s=(0,On.useHistory)(),n=(0,Pn.useSelector)(Tt),r=fn(e),l=xn(e),c=Gt(e),m=un(e,n),p=Kt(e),u=Yt(e),d=Ei(e),w=yi(e),N=Pt(m,l),C=Ae.default.createElement(R.Label,{className:"tx-history-ml4",type:p,text:u,data:e}),y=e==null?void 0:e.dexOrderId;return Ae.default.createElement(R.ItemContainer,{onClick:()=>{y&&s.push(`${ht}/${e.dexOrderId}`),t()}},Ae.default.createElement(R.Row,{assets:l,align:N},Ae.default.createElement(R.Info,{icons:r,title:c,details:m,label:C,data:e}),Ae.default.createElement(R.Assets,{assets:l,isValuelessNftTxType:w})),d&&Ae.default.createElement(R.NFTs,{data:e}),!y&&Ae.default.createElement(R.Actions,{data:e,onRepeat:i}))},kn=(0,Ae.memo)(ll);var rl=({data:e={},onClick:t,onRepeat:i})=>qt.default.createElement(kn,{data:e,onClick:t,onRepeat:i}),Xe=(0,qt.memo)(rl);_();a();var ie=I(D());var uo=I(Pe());_();a();var fo=I(D()),Mn=I(Me());_();a();var Un={root:"_root_17ca3_1"};function _l({className:e}){return fo.default.createElement("div",{className:(0,Mn.default)(Un.root,e)},fo.default.createElement(ve.Circle,{size:ve.SIZE.md}))}var jt=_l;_();a();var Je=I(D());var al=({date:e,list:t,onClick:i})=>Je.default.createElement(R.List,null,Je.default.createElement(R.Date,null,e),t.map((s,n)=>Je.default.createElement(Xe,{data:s,key:n,onClick:()=>{i(s)}}))),Vn=(0,Je.memo)(al);_();a();var Hn={list:"_list_1ou1i_1"};var cl=({pendingList:e,completedList:t,isLoading:i,onRepeat:s,onClick:n,onContainer:r})=>{let l=(0,uo.useSelector)(Rt),c=(0,uo.useSelector)(ai),[m,p]=(0,ie.useState)({}),[u,d]=(0,ie.useState)(0);return c?ie.default.createElement(R.Loading,{top:160}):i||!e?null:!i&&e.length===0&&t.length===0?ie.default.createElement(R.Empty,{top:72}):ie.default.createElement(R.ListContainer,{onContainer:r},ie.default.createElement(R.Dialogs,{data:m,type:u,onConfirm:()=>{p({}),d(0),s()},onCancel:()=>{d(0)}}),e.length>0?ie.default.createElement(ie.default.Fragment,null,ie.default.createElement(R.PendingTag,null),ie.default.createElement("div",{className:Hn.list},e.map((w,N)=>ie.default.createElement(Xe,{data:w,key:N,onClick:()=>{n(w)},onRepeat:C=>{p(w),d(C)}})))):null,t.map(({date:w,list:N},C)=>ie.default.createElement(Vn,{date:w,list:N,key:C,onClick:n})),l&&ie.default.createElement(jt,null))},Gn=(0,ie.memo)(cl);var ml={VirtualItem:Xe,HistoryList:Gn};_();a();_();a();_();a();var _e=I(D()),To=I(Pe());var es=I(ko());_();a();var we=I(D());_();a();var zt=I(D());_();a();var Le=I(D()),jn=I(Pe());_();a();Ce();var pl="okx-wallet-plugin-report-centre",$n="okx-wallet-plugin-pointer-up",Wn="okx-wallet-plugin-pointer-down",dl="okx-wallet-plugin-lock-1",fl="okx-wallet-plugin-swap-1",ul="okx-wallet-plugin-mint-nft",xl="okx-wallet-plugin-report-centre",Tl="okx-wallet-plugin-supply",Cl="okx-wallet-plugin-claim",Nl="okx-wallet-plugin-enrollment",Il="okx-wallet-plugin-mint",gl="okx-wallet-plugin-mint",El="okx-wallet-plugin-coin-inscribe-brc20",wl="okx-wallet-plugin-pointer-down",yl="okx-wallet-plugin-pointer-up",hl="okx-wallet-plugin-quick",Zn=(e={})=>{let{txType:t}=e,i=[];return t===o.TRANS_OUT&&i.push($n),t===o.PERPETUAIL&&i.push(wl),t===o.WITHDRAW&&i.push(yl),t===o.QUICK_WITHDRAW&&i.push(hl),t===o.TRANS_IN&&i.push(Wn),(t===o.AUTHORIZATION||t===o.CANCEL_AUTHORIZATION)&&i.push(dl),(t===o.SWAP||t===o.BUY_NFT||t===o.SELL_NFT||t===o.GAS_STATION||t===o.DEX_CROSS_CHAIN_SWAP||t===o.BRC20_TRADE||t===o.BRC30_TRADE||t===o.RUNES_SWEEP)&&i.push(fl),t===o.MINT_NFT&&i.push(ul),(t===o.CONTRACTCALL||t===o.DAPP_NFT)&&i.push(xl),t===o.DAPP_APPLY&&i.push(Tl),(t===o.DAPP_REDEEM||t===o.DAPP_CLAIM||t===o.EARN_BRC30_CLAIM||t===o.EARN_BRC30_APPLY||t===o.EARN_BRC30_REDEEM)&&i.push(Cl),(t===o.REGISTRATION||t===o.ZK_REGISTER)&&i.push(Nl),(t===o.BRC20_RECEIVE||t===o.BRC30_RECEIVE||t===o.DEFI_MINT)&&i.push(Wn),(t===o.BRC20_INSCRIBE||t===o.BRC30_INSCRIBE)&&i.push(El),(t===o.BRC20_MINT||t===o.ORDINAL_NFT||t===o.ORDINAL_TEXT||t===o.BRC20_DEPLOY)&&i.push(Il),(t===o.BRC20_SEND||t===o.BRC30_SEND||t===o.DEFI_REPAY)&&i.push($n),t===o.EARN_BRC30_DEPLOY&&i.push(gl),i.length||i.push(pl),i},Yn=(e={})=>{let{txType:t,coinSymbol:i}=e;return Ot(t,{symbol:i},e)},Kn=(e={},t="en-US")=>{let i=b(),s=[],{txType:n,txStatus:r}=e;if(n===o.TRANS_OUT||n===o.SEND_NFT||n===o.BRC20_SEND||n===o.BRC20_TRADE||n===o.BRC30_SEND||n===o.RUNES_SWEEP){let l=K(e.to),c=`${i("wallet_extension_history_list_send_to")}  ${l}`;s.push(c)}else if(n===o.TRANS_IN||n===o.RECEIVE_NFT||n===o.BRC20_RECEIVE||n===o.BRC20_MINT||n===o.ORDINAL_NFT||n===o.ORDINAL_TEXT||n===o.BRC20_INSCRIBE||n===o.BRC20_DEPLOY||n===o.BRC30_RECEIVE||n===o.RUNES_ETCH){let l=K(e.from),c=`${i("wallet_extension_history_list_receive_from")}   ${l}`;s.push(c)}else if(n===o.BRC30_INSCRIBE){let l=K(e.to);s.push(l)}else if(n===o.ZK_REGISTER)s.push(K(e.from));else{let{contractName:l,contractAddress:c}=e,m=l||K(c)||"";s.push(m)}if(r===F.PENDING){let l=Re(e.txTime,{format:"yyyyMMddHHmmss",locale:t});s.push(l)}return s},qn=(e={})=>{let t=[],{direction:i,coinAmount:s,coinSymbol:n,txType:r,repeatTxType:l,coinId:c}=e,{baseCoin:m}=Oe(c,!0),p=yt(m.coinId);if(r===o.AUTHORIZATION||r===o.CANCEL_AUTHORIZATION||r===o.REGISTRATION)return t;let u=null;return(s!=="0"||p&&(r===o.TRANS_IN||r===o.TRANS_OUT)&&l!==$.CANCELING&&l!==$.SPEEDING_CANCEL)&&(u=j(s)),t.push({direction:i,coinAmount:u,symbol:n}),!(e!=null&&e.brc20Type)&&(e==null?void 0:e.ordinalNftName)&&(e==null?void 0:e.ordinalNftDirection)&&(e==null?void 0:e.ordinalNftAmount)&&t.push({direction:e==null?void 0:e.ordinalNftDirection,coinAmount:e==null?void 0:e.ordinalNftAmount,symbol:e==null?void 0:e.ordinalNftName}),t};var Al=({data:e={},onClick:t,onRepeat:i})=>{let s=(0,jn.useSelector)(Tt),n=Zn(e),r=Yn(e),l=Kn(e,s),c=qn(e),m=Pt(l,c),p=Kt(e),u=Yt(e),d=Le.default.createElement(R.Label,{className:"tx-history-ml4",type:p,text:u,data:e});return Le.default.createElement(R.ItemContainer,{onClick:t},Le.default.createElement(R.Row,{assets:c,align:m},Le.default.createElement(R.Info,{icons:n,title:r,details:l,label:d,data:e}),Le.default.createElement(R.CoinAssets,{assets:c})),Le.default.createElement(R.Actions,{data:e,onRepeat:i}))},zn=(0,Le.memo)(Al);var vl=({data:e={},onRepeat:t,onClick:i})=>zt.default.createElement(zn,{data:e,onClick:i,onRepeat:t}),Xt=(0,zt.memo)(vl);_();a();var Xn={root:"_root_1otry_1"};var Dl=({pendingList:e,onRepeat:t,onClick:i})=>{let[s,n]=(0,we.useState)({}),[r,l]=(0,we.useState)(0);return e.length===0?null:we.default.createElement(we.default.Fragment,null,we.default.createElement(R.Dialogs,{data:s,type:r,onConfirm:()=>{n({}),l(0),t()},onCancel:()=>{l(0)}}),we.default.createElement("div",{className:Xn.root},e.map((c,m)=>we.default.createElement(Xt,{data:c,key:m,onRepeat:p=>{n(c),l(p)},onClick:()=>{i(c)}}))))},Jn=(0,we.memo)(Dl);_();a();var Ue=I(D());var bl=({completedList:e,onClick:t})=>Ue.default.createElement(Ue.default.Fragment,null,e.map(({date:i,list:s},n)=>Ue.default.createElement(R.List,{key:n},Ue.default.createElement(R.Date,null,i),s.map((r,l)=>Ue.default.createElement(Xt,{data:r,key:l,onClick:()=>{t(r)}}))))),Qn=(0,Ue.memo)(bl);_();a();var xo={loading:"_loading_arfpq_1",scrollLoading:"_scrollLoading_arfpq_7"};var Sl=({txList:e,isLoading:t,onRepeat:i})=>{let[s,n]=(0,_e.useState)(),r=(0,To.useSelector)(Ct),l=(0,To.useSelector)(Rt),c=(0,es.useHistory)(),[m,p]=(0,_e.useMemo)(()=>gi(e,r,!0),[e,r]);if(!t&&m.length===0&&p.length===0)return _e.default.createElement(R.Empty,null);if(t)return _e.default.createElement(R.Loading,{top:0,className:xo.loading});if(!Array.isArray(e))return null;let u=d=>{d!=null&&d.dexOrderId?c.push(`${ht}/${d.dexOrderId}`):n(d)};return _e.default.createElement(_e.default.Fragment,null,_e.default.createElement("div",{className:"coin-history__list"},_e.default.createElement(Jn,{pendingList:m,onRepeat:i,onClick:u}),_e.default.createElement(Qn,{completedList:p,onClick:u}),l&&_e.default.createElement(jt,{className:xo.scrollLoading})),_e.default.createElement(po,{params:s,onRefresh:i,onClose:()=>{n(null)}}))},ts=(0,_e.memo)(Sl);var Ll={TxList:ts};_();a();var xe=I(D()),os=I(Pe()),is=I(ot());function Iu({scrollContainer:e,selector:t=".tx-history-item-container",index:i=15},s){let n=(0,xe.useRef)(null),r=(0,xe.useRef)(null),l=(0,os.useSelector)(_i),c=()=>{if(n.current)if(r.current){let{bottom:y}=n.current.getBoundingClientRect(),{top:S}=r.current.getBoundingClientRect();S>=y&&s()}else s()},m=_t("wallet-transaction",c),[p,u]=(0,xe.useState)(!1),[d,w]=(0,xe.useState)(!1),[N,C]=(0,xe.useState)(0);(0,xe.useEffect)(()=>{m&&w(!0)},[m]),(0,xe.useLayoutEffect)(()=>{let y;if(e){let S=e.querySelectorAll(t);y=(0,is.throttle)(()=>{let{bottom:W}=e.getBoundingClientRect(),{top:U}=r.current.getBoundingClientRect();u(U>=W)},200),r.current=S[i],r.current?(y(),e.addEventListener("scroll",y)):u(!0),n.current=e}else u(!0);return()=>{e&&(e.removeEventListener("scroll",y),r.current=null)}},[N,e,t,i,l]),(0,xe.useEffect)(()=>{p&&d&&(s&&s(),u(!1),w(!1),C(y=>{let S=y+1;return S>=1e6&&(S=1),S}))},[p,d])}export{gi as a,po as b,Ll as c,ml as d,Iu as e};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-ROGKJGAC.js.map
