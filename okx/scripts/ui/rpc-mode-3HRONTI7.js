import{a as Js,b as Rs,c as ei}from"./chunk-FXXWM5E2.js";import{a as Qs,b as Ko,c as Xs}from"./chunk-UDTVMV4G.js";import{a as js}from"./chunk-23KB33NX.js";import{a as Yr,b as Ee,c as It}from"./chunk-OGQ2MLR4.js";import{a as Zs,b as Ks}from"./chunk-YSTMAX2G.js";import{a as Os,b as Bs,c as Fs,d as Zo,e as Ms,f as Us,g as Hs,i as Gs,j as Ws,k as Vs,l as zs,m as $s,o as qs,r as Ys}from"./chunk-G37W3QVU.js";import{a as S,b as I,c as st,d as As,e as Ss,f as Ue,g as Ds,h as Yo,i as Ls,k as Ps}from"./chunk-NNLKCRJB.js";import"./chunk-I4A7V6SN.js";import{d as k,e as qo,g as Le,h as Me,i as wt,j as ks,k as ws,l as Is,m as bs}from"./chunk-KCIDY7KH.js";import{a as Ns}from"./chunk-QIUJDVIV.js";import{a as Fe}from"./chunk-IRW6W6VZ.js";import{a as Ma}from"./chunk-GYYWRO2I.js";import{a as Es}from"./chunk-WCMEUGVM.js";import{a as ls}from"./chunk-5RXQBXEZ.js";import{a as cs}from"./chunk-NC54FPSJ.js";import"./chunk-IKPPHICM.js";import"./chunk-GQOO5OO7.js";import"./chunk-WIOZQWEG.js";import"./chunk-67PEY2GN.js";import{a as zo}from"./chunk-JVE4G6JP.js";import"./chunk-VNHZZRMI.js";import"./chunk-5TSD6WDE.js";import"./chunk-TPBDSGSX.js";import{a as ms}from"./chunk-I2KPNTIF.js";import"./chunk-MEW6SUUR.js";import{a as ss,c as qr}from"./chunk-2CPFAAZ7.js";import"./chunk-ZG26PGPF.js";import{G as kt}from"./chunk-HE77KLJ4.js";import"./chunk-NOZM7AA3.js";import{a as rs}from"./chunk-73YQ4YAD.js";import"./chunk-OEVJ7FDO.js";import"./chunk-ATUBFYS2.js";import{a as ds,b as fs,c as Ts,d as hs,f as gs,g as Cs,h as vs,i as ys}from"./chunk-CL2DMDLG.js";import"./chunk-OG2MGBYR.js";import"./chunk-6AXJCAVF.js";import"./chunk-5ZZIKR7L.js";import"./chunk-YOZOX6GO.js";import"./chunk-S4WP5LDP.js";import{a as us}from"./chunk-U3UPRMNJ.js";import"./chunk-DTVL7EQX.js";import{a as $o,b as ps}from"./chunk-DCZKBMNP.js";import{a as _s}from"./chunk-CPWFRAFM.js";import"./chunk-UXA3OASR.js";import"./chunk-LEU7ZZNB.js";import"./chunk-UOE3CUM7.js";import"./chunk-AJZPYKQF.js";import"./chunk-33SB5WSN.js";import"./chunk-GDJJKMDU.js";import"./chunk-IWWNTYBF.js";import{a as xs}from"./chunk-S6BDCAXK.js";import"./chunk-R4VMIVHR.js";import"./chunk-MJKT3ZH2.js";import"./chunk-HI4AQDIG.js";import"./chunk-WIYPU26K.js";import"./chunk-2N2ADYFP.js";import"./chunk-HG2HGCVV.js";import{a as as}from"./chunk-X2HBIQ56.js";import{a as Vo}from"./chunk-YLO74Q7W.js";import"./chunk-D54UDGZS.js";import"./chunk-2SGW2RXR.js";import"./chunk-ZXEHJOAD.js";import"./chunk-U3YDJ2W7.js";import{a as is}from"./chunk-VCWU5FEX.js";import"./chunk-KZ77CGYD.js";import"./chunk-YM6UXGIC.js";import{a as $r,b as ns}from"./chunk-7CB4COOY.js";import"./chunk-RDZIVMHO.js";import"./chunk-E73QHIZ6.js";import"./chunk-E2KMZQ6K.js";import"./chunk-JXT6JCNO.js";import"./chunk-AHAXQBXQ.js";import"./chunk-DUZ4ULSN.js";import"./chunk-PGPPXRV7.js";import"./chunk-54GDJWA6.js";import"./chunk-UGYRJNZG.js";import{a as re}from"./chunk-PLVZLQPX.js";import"./chunk-QNVM7T5C.js";import"./chunk-7T7NBYQH.js";import{a as qn,d as Go,e as ye,f as A,g as Jn,i as Rn,k as es,l as ts,m as Wo,o as os}from"./chunk-FEET7RP6.js";import"./chunk-MBJ4MFYL.js";import{b as ve}from"./chunk-PCY622ND.js";import"./chunk-NS35PZCP.js";import"./chunk-XOD56IFT.js";import"./chunk-BBN3UGKM.js";import"./chunk-5DEIKYJL.js";import"./chunk-QMNAWRVI.js";import"./chunk-D6ZXZUY6.js";import"./chunk-QMF5LKVF.js";import"./chunk-VMACN7YR.js";import"./chunk-IQVVVGEA.js";import"./chunk-PGY6IZUS.js";import"./chunk-AXKCDQTS.js";import"./chunk-JWFSXEUV.js";import"./chunk-PD2BTUUF.js";import"./chunk-YCMOAOGN.js";import"./chunk-JLLMIXPD.js";import{A as tr,B as Zr,C as ci,D as pi,E as or,F as rr,I as Dt,J as ce,K as Xt,L as di,b as Q,c as le,d as Qo,e as it,f as Xo,g as jo,h as bt,i as ti,j as He,k as Jo,l as Kt,m as At,n as Ro,o as Qt,p as oi,q as Ge,r as St,s as ri,t as ni,u as si,v as ii,w as mi,x as ai,y as li,z as er}from"./chunk-BEUQTIXQ.js";import"./chunk-3HKLXQEP.js";import"./chunk-5OUCZQSW.js";import{a as Un}from"./chunk-QWA3DFD5.js";import{a as Fa}from"./chunk-QJBKVZVF.js";import"./chunk-EXUJ54CX.js";import"./chunk-XAMN4IIH.js";import"./chunk-BTS2GOAC.js";import"./chunk-6L6L7B7D.js";import"./chunk-P4XRBDXP.js";import"./chunk-573GFXXJ.js";import{c as zn,d as Vr,e as Zt,g as $n}from"./chunk-2HWABU7H.js";import"./chunk-APEQZGKB.js";import"./chunk-P2BTSOJO.js";import"./chunk-3T5SDSKD.js";import"./chunk-2NIR645O.js";import"./chunk-SI3RW2CS.js";import"./chunk-AX4SXHC6.js";import"./chunk-UCS37WXR.js";import"./chunk-DUHXKIBS.js";import{b as Sn}from"./chunk-QNEJI55N.js";import"./chunk-5W7SRP5N.js";import"./chunk-YVRXETFX.js";import"./chunk-GUWGENNL.js";import"./chunk-WYB2CUAN.js";import"./chunk-B2BOSVTW.js";import"./chunk-GUJXW3GJ.js";import"./chunk-VIS7KIVI.js";import"./chunk-F64VYES3.js";import"./chunk-DHX2X277.js";import{b as zr}from"./chunk-67YO4IPY.js";import"./chunk-DLUAVD7X.js";import"./chunk-WRWXCAEZ.js";import{f as Xn,g as jn}from"./chunk-OZ6XSJY6.js";import{d as Ho,e as Nt,f as L,g as Yn,j as Zn,k as Kn,l as Qn}from"./chunk-DMJQUOJT.js";import"./chunk-MTMZQEHP.js";import"./chunk-NKTQMEXG.js";import{b as Wr,i as Vn}from"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import{d as Ct}from"./chunk-4OTZHHYZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import{R as In,V as bn,W as Io,da as bo}from"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import"./chunk-S3ECGMEP.js";import"./chunk-PX7HII6H.js";import{K as kn,o as Nn}from"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import"./chunk-TPEASXIF.js";import{a as M}from"./chunk-JSAFBAMQ.js";import"./chunk-A336VZZF.js";import{b as wo}from"./chunk-XEOGXIVD.js";import{a as Ce}from"./chunk-PCGRDRHF.js";import{l as xt,p as De}from"./chunk-IU3TYIWS.js";import{C as Wn,b as _e,c as Hn,e as Mo,f as Uo,j as oe,q as Gn}from"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import{p as K}from"./chunk-X2LENRE7.js";import{Aa as Fn,Ba as Ao,Ca as So,Da as yt,Ea as xe,Fa as Do,Ga as Lo,Ha as Po,Ia as Oo,Ja as Bo,Ka as Et,La as Fo,R as Ln,T as Pn,a as Y,aa as On,bb as Mn,i as Dn,ya as vt,za as Bn}from"./chunk-O4EDZSHP.js";import{f as gt,k as g}from"./chunk-HU3KBV5G.js";import{b as y}from"./chunk-6ZPGW3YM.js";import"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import{a as Aa}from"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import{d as Tn,f as Da}from"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import"./chunk-FLCN6MAI.js";import{a as q,b as An}from"./chunk-YMZEQGAL.js";import"./chunk-7E3KY4EN.js";import{e as wn}from"./chunk-JIRWXBHS.js";import{a as Ba}from"./chunk-3TVEFIPW.js";import{e as Yt}from"./chunk-UXFKODVN.js";import"./chunk-IMRS4RGO.js";import"./chunk-52GWQSZH.js";import{a as z}from"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import{j as Gr}from"./chunk-RMQJRDTF.js";import{c as nt}from"./chunk-2YLR7R2N.js";import"./chunk-MVLY6WUP.js";import"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{Ab as qt,Bb as ht,C as G,D as et,F as hn,Fb as ko,Hb as rt,Ib as se,Mb as xn,Ob as Cn,Pa as La,Tb as vn,Vb as te,Wb as yn,ec as Pa,hc as En,nc as Oa,p as _t,q as H,s as fn,sb as $,ub as gn,v as T,vb as tt,xb as Eo,yb as No,zb as ot}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{B as fe,D as Z,G as Tt,H as $t,o as yo,q as P,y as _n}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{J as B,P as Hr,V as D,c as ee}from"./chunk-C2H3SRET.js";import{a as _,f as Sa}from"./chunk-V4YVDLI4.js";import"./chunk-UXBKFN2U.js";import"./chunk-HCW4K7TR.js";import"./chunk-Z4JATHZR.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import"./chunk-IYYFWVWL.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import"./chunk-RYNAOZ73.js";import"./chunk-PR4SLUV4.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f as l,h as Ur,m as i,o as m}from"./chunk-6V2G2Z5W.js";i();m();var ut=l(_()),ft=l(z());var ln=l(y());i();m();var jt=l(_()),Pt=l(z());i();m();var Lt=l(y()),pe=l(_());i();m();var ke=l(_());var fi=l(y());i();m();var Ne=l(_()),ui=l(ee());var Kr=e=>{let{title:o,networks:t,handleSelect:r,currentRpc:n}=e;return t.length?Ne.default.createElement("div",{className:"net-collection"},Ne.default.createElement("div",{className:"net-collection__title"},o),Ne.default.createElement("div",{className:"net-collection__content"},t.map(s=>{var a;return Ne.default.createElement("div",{className:(0,ui.default)("net-collection__content-item",{"net-collection__content-item-current":It(n,s)}),key:s.rpcUrl||s.chainId,onClick:()=>{It(n,s)||r(s)}},s.icon?Ne.default.createElement("img",{alt:s.name,src:s.icon,className:"net-collection__content-item-image"}):Ne.default.createElement("div",{className:"net-collection__content-item-icon"},(a=s.name[0])==null?void 0:a.toUpperCase()),Ne.default.createElement("div",{className:"net-collection__content-item-name"},Ne.default.createElement(fe,{title:s.name},Ne.default.createElement("div",{className:"net-collection__content-item-name-text"},s.name))))}))):null};i();m();var _i=e=>{let{handleSelect:o,rpcInfo:t,history:r}=e,n=(0,ke.useCallback)(()=>{r.push(Ao)},[r]),s=g(),{defaultNets:a,customNets:c}=(0,fi.useSelector)(Nt);return ke.default.createElement("div",{className:"evm-nets"},ke.default.createElement("div",{className:"evm-nets__content"},ke.default.createElement(Kr,{title:s("developer_mode_network_title_test_network"),networks:a,handleSelect:o,currentRpc:t}),ke.default.createElement(Kr,{title:s("developer_mode_network_title_editcustom"),networks:c,handleSelect:o,currentRpc:t})),ke.default.createElement(Ce.FooterActions,{offsetBottom:0},ke.default.createElement(D,{block:!0,className:"evm-nets__button",category:D.CATEGORY.outline,type:D.TYPE.primary,size:D.SIZE.md,onClick:n},ke.default.createElement(B,{className:"okx-wallet-plugin-plus evm-nets__icon"}),s("developer_mode_network_maintitle_add_network"))))};var Ti=({history:e})=>{let o=g(),t=(0,Lt.useDispatch)(),r=(0,Lt.useSelector)(L),n=re(),[s,a]=(0,pe.useState)(!!n.get("hideErr")),c=(0,pe.useCallback)(()=>{e.push(Fn)},[e]),p=(0,Lt.useSelector)(Kn),d=(0,Lt.useSelector)(Qn),[f,h]=(0,pe.useState)(!1);Hn(()=>{if(p===Ee.success){if(f)return;e.replace(Y)}else p===Ee.loading&&a(!1)},[p,d]);let C=(0,pe.useCallback)(v=>{h(!1),t(Yn(v))},[t]);return pe.default.createElement("div",{className:"net-list"},pe.default.createElement(M,{title:o("developer_mode_top_title_network_management"),backable:{icon:"okx-wallet-plugin-close"},onBack:()=>{e.push(Y)},closeable:{icon:"okds-edit"},onClose:c}),pe.default.createElement(_i,{handleSelect:C,history:e,rpcInfo:r}),pe.default.createElement(Xs,{handleClose:()=>h(!0)}),pe.default.createElement(Ko,{visible:p===Ee.failed&&!s,onChangeNet:()=>{a(!0)},onClose:()=>{h(!0)}}))};i();m();var We=l(_());var gi=l(y());i();m();var Te=l(_()),Qr=l(ee());var nr=l(y());var hi=l(z());var Xr=({title:e,networks:o,disabled:t})=>{let r=g(),n=(0,nr.useDispatch)(),s=(0,hi.useHistory)(),a=(0,nr.useSelector)(L),c=d=>{if(t)return;if(It(d,a)){$t.error({title:r("developer_mode_network_toast_cannot_delete"),top:16});return}let f=yo.warn({title:r("developer_mode_mid_title_delete"),text:r("developer_mode__mid_subtitle_deleselect"),confirmText:r("developer_mode_mid_btn_confirmdele"),confirmBtnProps:{type:D.TYPE.highlight,size:D.SIZE.lg},cancelText:r("developer_mode_network_btn_botcancel"),alignBottom:!1,onConfirm:()=>{$t.success(r("developer_mode_network_toast_delete_done")),n(Zn(d)),f.destroy()}})},p=({rpcUrl:d})=>{s.push(`${Ao}?rpcUrl=${encodeURIComponent(d)}&modify=${t?Yr.CANT:Yr.CAN}`)};return Te.default.createElement("div",{className:"edit-group"},Te.default.createElement("div",{className:"edit-group__title"},e),o.map(d=>Te.default.createElement("div",{className:"edit-group__item"},Te.default.createElement("div",{className:(0,Qr.default)("edit-group__item-delete",{disabled:It(d,a)||t}),onClick:()=>c(d)},Te.default.createElement(B,{className:"okx-wallet-plugin-delete"})),d.icon?Te.default.createElement("img",{src:d.icon,alt:"",className:"edit-group__item-image"}):Te.default.createElement("div",{className:"edit-group__item-icon"},d.name[0].toUpperCase()),Te.default.createElement("div",{className:"edit-group__item-name"},d.name),Te.default.createElement("div",{className:"edit-group__item-pencil",onClick:()=>{p(d)}},Te.default.createElement(B,{className:(0,Qr.default)({"okx-wallet-plugin-report-centre":t,"okx-wallet-plugin-draw":!t})})))))};var xi=({history:e})=>{let o=g(),{defaultNets:t,customNets:r}=(0,gi.useSelector)(Nt),n=(0,We.useCallback)(()=>{e.goBack()},[e]);return We.default.createElement("div",{className:"net-edit"},We.default.createElement(M,{onBack:n,title:o("developer_mode_top_title_network_management")},We.default.createElement("div",{className:"net-edit__header-done",onClick:n},o("developer_mode_top_text_done"))),We.default.createElement(Xr,{title:o("developer_mode_network_title_test_network"),networks:t,disabled:!0}),r.length?We.default.createElement(Xr,{title:o("developer_mode_network_title_editcustom"),networks:r}):null)};var Ci=()=>jt.default.createElement(Pt.Switch,null,jt.default.createElement(Pt.Route,{path:`${vt}/list`,component:Ti,exact:!0}),jt.default.createElement(Pt.Route,{path:`${vt}/edit`,component:xi,exact:!0}),jt.default.createElement(Pt.Route,{path:`${vt}/form`,component:js,exact:!0}));i();m();var J=l(_()),me=l(z());i();m();var b=l(_()),Pi=l(z()),Rt=l(y());G();Pa();Oa();i();m();var ir=l(_()),sr=l(y()),yi=l(z());G();i();m();var Ga=l(_());var Wa=l(y());i();m();var Ua=l(_()),Ha=l(ee());var vi="SHOW-SWITCH";var Ei=()=>{let e=re(),o=(0,yi.useHistory)(),t=ye(),r=(0,sr.useSelector)(L),n=ve(),[s,a]=ir.default.useState(!0),c=(0,sr.useSelector)(bo),{walletAccount:p}=(0,sr.useSelector)(f=>({walletAccount:In(f)}));oe(()=>{e.get("from")==="setting"&&(a(!1),o.replace({search:""}),fn.listen(vi,()=>{a(!0)}))});let d=(0,ir.useMemo)(()=>t.find(({address:f})=>!f)||{},[t]);return{rpcInfo:r,mainToken:d,chainTokens:t,walletAccount:p,ethereumAccount:n,isNotBackupWallet:c,switchVisible:s}};i();m();var he=l(_()),Ni=l(Wr()),ki=l(ee());var wi=l(z());i();m();var Jt={button:"_button_l2q1y_1",showButton:"_showButton_l2q1y_5",editIcon:"_editIcon_l2q1y_11"};var Va=190,Ii=({dataSource:e,backupHeight:o,scrollTop:t})=>{let r=g(),n=(0,he.useMemo)(()=>e.length>=8&&t>Va,[e.length,t]),{paddingBottom:s,buttonPaddingBottom:a,absoluteBottom:c}=ys({isButtonAbsolute:n,backupHeight:o});return he.default.createElement("div",{className:Jt.wrapper},he.default.createElement("div",{style:{paddingBottom:s}},he.default.createElement(zr,{className:"rc-mode-home__tokens",dataSource:e,renderItem:p=>he.default.createElement(zr.Coin,{name:p==null?void 0:p.name,symbol:p==null?void 0:p.symbol,to:`${Et}?${Ni.default.stringify({address:p==null?void 0:p.address})}`,balance:p.balance||"0",market:!1})})),he.default.createElement("div",{className:`${n?Jt.showButton:""} ${Jt.button}`,style:{bottom:c,paddingBottom:a}},he.default.createElement(wi.Link,{to:Po},he.default.createElement(D,{circle:!0,type:D.TYPE.primary,category:D.CATEGORY.outline},he.default.createElement(B,{className:(0,ki.default)("okx-wallet-plugin-edit-wallet",Jt.editIcon)}),r("developer_mode_home_maintitle_managecpt")))))};i();m();var Ve=l(_());var Ai=l(z()),Si=l(Wr());var jr=l(y());i();m();var bi=[{text:"wallet_home_btn_send",icon:"okx-wallet-plugin-up",type:"SEND"},{text:"wallet_home_btn_receive",icon:"okx-wallet-plugin-down",type:"RECEIVE"},{text:"developer_mode_home_btn_faucet",icon:"okx-wallet-plugin-faucet-1",type:"FAUCET",disabledText:"extension_wallet_home_tooltip_no_faucet"},{text:"developer_mode_home_btn_t_tradinghistory",icon:"okx-wallet-plugin-history-1",type:"HISTORY"},{text:"wallet_extension_home_text_toolkit",icon:"okx-wallet-plugin-toolkit",type:"MORE"}];var Di=()=>{let e=(0,jr.useSelector)(bo),o=$o(),t=(0,Ai.useHistory)(),r=ye(),n=(0,jr.useSelector)(L),s=(0,Ve.useMemo)(()=>r.filter(({balance:x})=>!!Number(x)),[r]),a=(0,Ve.useCallback)(()=>{var x;s.length===1?t.push(`${xe}?${Si.default.stringify({address:(x=s[0])==null?void 0:x.address})}`):t.push(Lo)},[s]),c=(0,Ve.useCallback)(()=>{e?o():t.push(yt)},[e]),p=()=>{t.push(Bo)},d=(0,Ve.useCallback)(()=>{n.faucetUrl&&globalThis.open(n.faucetUrl)},[n.faucetUrl]),{hasNewFeature:f}=hs(),h=()=>{Nn({button_name:"more",site:""})},C=()=>{t.push(Dn)},v=(0,Ve.useCallback)(x=>{switch(x.type){case"SEND":a();break;case"RECEIVE":c();break;case"HISTORY":p();break;case"FAUCET":d();break;case"DAPP_CONNECT":C();break;case"MORE":h();break;default:break}},[C,d,p,c,a]),w=(0,Ve.useMemo)(()=>bi.map(x=>x.type==="FAUCET"?{...x,disabled:!(n!=null&&n.faucetUrl)}:x.type==="MORE"?{...x,hasNewFeature:f}:x),[f,n]);return{clickHandle:v,iconOptions:w}};i();m();var Li={wrapper:"_wrapper_11hdl_1"};var Oi=()=>{let e=(0,Pi.useHistory)(),o=$o(),t=(0,Rt.useDispatch)(),{rpcInfo:r,chainTokens:n,isNotBackupWallet:s,mainToken:a,ethereumAccount:c}=Ei(),p=Vn(),d=(0,b.useRef)(null),[f,h]=(0,b.useState)(0),[C,v]=(0,b.useState)(0),w=(0,b.useRef)(null),{unapprovedRequestCount:x,unapprovedPermissionsRequestId:ae}=Ys(),F=ds();(0,b.useEffect)(()=>{s&&x!==0?o({text:T("wallet_dapp_conncetion_alert_backup_wallet")},ae):x>0&&e.push(Ln)},[s,x]),(0,b.useEffect)(()=>{(async()=>{x===0&&await t(Sn())})()},[x]);let{isRpcMode:U}=(0,Rt.useSelector)(Ct);(0,b.useEffect)(()=>{U||e.replace(Y)},[U]);let Re=(0,Rt.useSelector)(bn),de=En()===yn;(0,b.useEffect)(()=>{Re&&de&&globalThis.platform.openExtensionInPopup(So)},[]);let Pr=xt(a.balance),{clickHandle:Co,iconOptions:Or}=Di(),{isNeedShowDisconnectUpgrade:Wt,setDisconnectUpgrade:vo}=us(),Br=(0,b.useCallback)(()=>{Wt&&(Tt.success({title:T("wallet_extension_card_subtitle_disconnect_update")}),vo())},[Wt,vo]),[Fr,Vt]=(0,b.useState)(Ee.init),zt=xs(),{run:Mr}=Gn(()=>{var ue;v(((ue=w.current)==null?void 0:ue.scrollTop)||0)},{wait:50,maxWait:50}),V=()=>{!r.rpcUrl||(Vt(Ee.loading),Qs(r.rpcUrl).then(()=>{Vt(Ee.success)}).catch(()=>{Vt(Ee.failed)}))};return oe(()=>{V()}),(0,b.useLayoutEffect)(()=>{var ue;d.current&&s&&h(((ue=d.current)==null?void 0:ue.clientHeight)||0)},[s]),b.default.createElement("div",{className:Li.wrapper,ref:w,onScroll:()=>{Mr()}},b.default.createElement("div",null,b.default.createElement(Cs,{titleLeft:p==null?void 0:p.keyringName,titleRight:p==null?void 0:p.walletName,subTitle:K(c),address:c,chainName:r==null?void 0:r.name}),b.default.createElement(vs,{balance:Pr,symbol:a.symbol}),b.default.createElement(gs,{clickHandle:Co,iconOptions:Or}),b.default.createElement(Ii,{dataSource:n,scrollTop:C,backupHeight:s?f+24:0})),b.default.createElement(fs,{disconnectCallback:Br}),b.default.createElement("div",{ref:d},b.default.createElement(ps,{offsetBottom:24})),b.default.createElement(Ts,{showBackup:()=>{}}),b.default.createElement(Ko,{visible:Fr===Ee.failed,onRetry:V,onChangeNet:()=>{var ue;e.push(`${Pn}?tab=${(ue=zt==null?void 0:zt.networkType)!=null?ue:"1"}`)}}),F&&b.default.createElement(_s,{actionMap:{["RECOVER"]:()=>{e.push(`${Mn}?action=${is.RECOVER}`)},["SWITCH_WALLET"]:()=>{e.push(`${On}?fromHome=1`)}}}))};i();m();var zi=l(_());i();m();var Bi=l(Fa()),Fi=l(y());var eo=l(_());te();var Mi=l(et());var Jr=class extends Bi.default{constructor(){super();Ur(this,"DROPPED_BUFFER_COUNT",3);Ur(this,"droppedBlocksBufferByTxHash",new Map);this.confirmedTxs=[],this.web3=null}setWeb3(t){this.web3=t}setConfirmedTxs(t){this.confirmedTxs=t}async checkPendingTx(t,r,n){let s=[t,...t.txPool],a=0,c;(await Promise.allSettled(s.map(d=>this.checkOnePendingTx(d)))).forEach(d=>{if(d.status==="fulfilled"){let{value:f={}}=d;if(f.status==="dropped")a++;else if(f.status==="confirmed"){let{txId:h,transactionReceipt:C,timestamp:v}=f;c={id:h,transactionReceipt:C,timestamp:v}}}}),c?r(c,t.id):a===s.length&&n(t.id)}async checkOnePendingTx(t){let{id:r,txHash:n}=t;if(!n||t.status===S.DROPPED||this.checkIfNonceIsTaken(t))return{status:"dropped"};try{let s=await this.web3.eth.getTransactionReceipt(n);if(s!=null&&s.blockNumber){let{timestamp:a}=await this.web3.eth.getBlock(s==null?void 0:s.blockHash);return{status:"confirmed",txId:r,transactionReceipt:s,timestamp:a}}}catch(s){throw new Error(s)}return await this.checkIfTxWasDropped(t)?{status:"dropped"}:{}}checkIfNonceIsTaken(t){return this.confirmedTxs.some(r=>r.id!==t.id&&ht(q(r.txParams.nonce),q(t.txParams.nonce)))}async checkIfTxWasDropped(t){let{id:r,txHash:n,txParams:{nonce:s,from:a}}=t,c=`${r}-${n}`,p;try{p=await this.web3.eth.getTransactionCount(a)}catch{return!1}if((0,Mi.isNil)(p)||qt(q(s),p))return!1;this.droppedBlocksBufferByTxHash.has(c)||this.droppedBlocksBufferByTxHash.set(c,0);let d=this.droppedBlocksBufferByTxHash.get(c);return d<this.DROPPED_BUFFER_COUNT?(this.droppedBlocksBufferByTxHash.set(c,d+1),!1):(this.droppedBlocksBufferByTxHash.delete(c),!0)}};function Ui(){let e=Go(),o=Bs(),t=(0,Fi.useSelector)(Ho),r=Mo(ve()),n=Mo(Ue()),s=Mo(As()),a=(0,eo.useRef)(!1),c=(0,eo.useRef)(new Jr),p=async(h,C,v)=>{let w=await Fs({txId:h,replaceTxId:C,tx:v});o(w)},d=h=>{p(h,null,{status:S.DROPPED,finishTime:+new Date})},f=({id:h,transactionReceipt:C},v)=>{let w={blockNumber:C.blockNumber,gasUsed:C.gasUsed,finishTime:+new Date,extraParams:{contractAddress:C.contractAddress}};C.status?w.status=S.SUCCEED:w.status=S.FAILED,p(v,h,w)};(0,eo.useEffect)(()=>{(async()=>{if(!(n.current.length===0||a.current)){a.current=!0;try{let C=await e();c.current.setWeb3(C),c.current.setConfirmedTxs(s.current);let v=null;try{v=await C.eth.getTransactionCount(r.current,"latest")}catch{}await Promise.all(n.current.map(w=>v!==null&&qt(q(w.txParams.nonce),v)?null:c.current.checkPendingTx(w,f,d)))}finally{a.current=!1}}})()},[t,e])}i();m();var mr=l(et()),Ot=l(_()),ar=l(y());var Hi=l(Aa());var $a=3*60*1e3,qa={mainTokens:[],chainTokens:[]},Gi=()=>{let e=(0,ar.useDispatch)(),o=(0,Ot.useRef)(null),t=Rn(),r=(0,Ot.useRef)(qa),n=ts(),{isRpcMode:s}=(0,ar.useSelector)(Ct);(0,Ot.useEffect)(()=>{let{chainId:p,chainTokens:d}=n,f=(0,mr.map)((0,mr.uniqBy)(d,"address"),({address:h})=>h||"");r.current={chainId:p,tokenAddresses:f}},[n]);let a=()=>{clearInterval(o.current),o.current=null},c=async()=>{try{let{chainId:p,tokenAddresses:d}=r.current;if(d.length){let f=await t(p,d);f==null||f.forEach(({price:h="0",address:C})=>{e(jn({chainId:p,address:C,price:h}))})}}catch(p){Hi.default.debug(`fetch coin price failed 
${p}`)}};oe(()=>{c()}),(0,Ot.useEffect)(()=>(s?o.current=setInterval(()=>{c()},$a):a(),()=>{a()}),[s])};i();m();var Rr=l(_()),lr=l(et()),Wi=l(y());var Vi=()=>{let e=Wo(),o=os(),{defaultNets:t,customNets:r}=(0,Wi.useSelector)(Nt),n=Rr.default.useMemo(()=>[...t,...r].map(a=>(0,lr.omit)(a,"lastUsage")),[t,r]),s=qn(()=>n,n,(a,c)=>!(0,lr.isEqual)(a,c));Rr.default.useEffect(()=>{let a=o==null?void 0:o.reduce((c,{walletIdentities:p})=>[...c,...p.map(({account:{mainnet:d}})=>d)],[]);s.forEach(async c=>{a.forEach(p=>{let d=c.chainId;e(d,void 0,{...c,account:p})})})},[o,s])};var Ya=()=>(Es(),Zs(),Gi(),Ui(),Vi(),null),$i=(0,zi.memo)(Ya);i();m();var cr=l(_());var qi=l(y());var Yi=l(z());var Za=()=>{let e=(0,Yi.useHistory)(),o=re(),t=o.get("showClose"),r=o.get("address"),n=(0,qi.useSelector)(L),s=A(r),a=ve(),c=`ethereum:${a}`;return cr.default.createElement(rs,{navigator:{bordered:!1,onClose:t?()=>{e.push(Y)}:null,closeable:!0},content:{symbol:s==null?void 0:s.symbol,coinLogo:s==null?void 0:s.icon,chainName:n==null?void 0:n.name,walletAddress:a,aggregation:!1,QRCodeAddress:c}})},Zi=(0,cr.memo)(Za);i();m();var Ie=l(_());i();m();var pr=l(_()),ne=l(y());te();i();m();te();G();function ze(e,{symbol:o,decimals:t}={}){let r;return e=vn(Cn(e,t||18)),e==="0"?r="0":r=H.thousandFormat(e),o&&(r+=` ${o}`),r}function to(){let e=(0,ne.useSelector)(Qt),o=(0,ne.useSelector)(Ge),t=(0,ne.useSelector)(bt),r=(0,ne.useSelector)(He);return zo(xn,se)(t?ko(t):e,r||o)}function mt(e){let o=A(),{symbol:t,usdToThisRate:r}=(0,ne.useSelector)(Io),n=$(o==null?void 0:o.price,r),s=ze(e,{symbol:o==null?void 0:o.symbol,decimals:o==null?void 0:o.decimals}),a=Vo({amount:e,rate:n,symbol:t},{useApproximate:!0});return`${s} ${a}`}function dr(){let e=(0,ne.useDispatch)(),{chainGasPrice:o,requestChainGasPrice:t}=Gs(),r=(0,ne.useSelector)(le),n=(0,ne.useSelector)(Q),s=(0,ne.useSelector)(Kt),a=(0,ne.useSelector)(Xo),c=(0,ne.useSelector)(ti),p=!n,{chainGasLimit:d,requestChainGasLimit:f,loadingChainGasLimit:h}=Ws({to:p?r:n,data:s,value:p?a:null,gasPrice:c});return(0,pr.useEffect)(()=>{e(er(o))},[o]),(0,pr.useEffect)(()=>{e(tr(d))},[d]),{requestChainGasPrice:t,loadingChainGasLimit:h,requestChainGasLimit:f}}function ur(){let e=(0,ne.useDispatch)(),{nonce:o,suggestedNonce:t,request:r}=Os();return(0,pr.useEffect)(()=>{e(or(t))},[o,t]),{nonce:o,suggestedNonce:t,request:r}}var lm=l(y());i();m();var Ki=l(_());var Qi=l(z()),oo=l(y());var Ka=()=>{let e=(0,Qi.useHistory)(),o=(0,oo.useDispatch)(),r=re().get("showClose"),n=(0,oo.useSelector)(Ro),s=(0,oo.useSelector)(Q),a=A(s),c=()=>{setTimeout(()=>{o(rr())},200)},p=()=>{c(),e.goBack()},d=r?()=>{c(),e.push(n||Y)}:null;return Ki.default.createElement(M,{title:a==null?void 0:a.symbol,icon:{text:a==null?void 0:a.symbol},onBack:p,onClose:d})},Xi=Ka;i();m();var at=l(_()),ro=l(y());function Qa(){let e=g(),o=(0,ro.useDispatch)(),t=(0,ro.useSelector)(le),r=(0,ro.useSelector)(Qo),n=(0,at.useRef)(null),s=a=>{let{value:c}=a.target,p=null;c?c&&!kt(c,{allowNonPrefixed:!1})&&(p={key:"wallet_manage_crypto_errortip_invalid_address_tips"}):p={key:"wallet_transfer_errortip_receive_address_empty"},o(ni(c)),o(si(p))};return(0,at.useLayoutEffect)(()=>{n.current.focus()},[]),at.default.createElement(Fe.Row,null,at.default.createElement(P.TextArea,{onRef:a=>{n.current=a},value:t,label:e("wallet_extension_transaction_input_label_to"),placeholder:e("wallet_extension_transaction_placeholder_input_address"),size:P.SIZE.xl,autoResize:!0,errorType:P.TIP_TYPE.always,error:r&&e(r.key,r.args),onChange:s}))}var ji=Qa;i();m();var we=l(_()),$e=l(y());G();te();i();m();var fr={"max-button":"_max-button_5lu07_1",maxButton:"_max-button_5lu07_1",balance:"_balance_5lu07_12","balance-wrap":"_balance-wrap_5lu07_16",balanceWrap:"_balance-wrap_5lu07_16"};function Xa(){let e=(0,$e.useDispatch)(),o=(0,$e.useSelector)(Q),t=A(),r=A(o),n=t==null?void 0:t.balance,s=to(),a=!o,{run:c,cancel:p}=Wn(d=>{let f=null,h=tt(n,s);ot(d,a?h:r==null?void 0:r.balance)?f={key:"wallet_transfer_errortip_insufficient_balance"}:Eo(h,0)&&(f={key:"wallet_transfer_errortip_mainchain_coin_insufficient",args:{chainSymbol:t==null?void 0:t.symbol}}),e(mi(f))},{wait:100});return Uo(p),c}function ja(){let e=(0,$e.useDispatch)(),o=A(),t=(0,$e.useSelector)(Q),r=(0,$e.useSelector)(it),n=(0,$e.useSelector)(jo),s=A(t),a=s==null?void 0:s.balance,c=ze(a,{symbol:s==null?void 0:s.symbol,decimals:s==null?void 0:s.decimals}),p=Xa(),d=to(),f=(0,we.useRef)(!!r),h=v=>{f.current=!0,e(ii(v))},C=()=>{if(t)h(a);else{let v=tt(a,d);h(No(v,0)?"0":v)}};return(0,we.useEffect)(()=>{f.current&&p(r)},[r,d,o==null?void 0:o.balance]),we.default.createElement(Fe.Row,null,we.default.createElement(P.Number,{placeholder:H.showFloorTruncation(0,6,{needZero:!0}),title:T("wallet_extension_send_subtitle_amount"),size:P.SIZE.xl,enableMinus:!1,precision:s==null?void 0:s.decimals,value:r,error:n&&T(n.key,n.args),errorType:P.TIP_TYPE.always,onChange:h,action:we.default.createElement(De.Text,{size:De.SIZE.xs,type:De.TYPE.secondary,className:fr["balance-wrap"],onClick:C},`${T("wallet_extension_send_text_balance")}:`,we.default.createElement(De.Text,{inherit:!0,ellipsis:{tooltip:!0},className:fr.balance},c)),suffix:we.default.createElement(De.Text,{className:fr["max-button"],onClick:C},T("wallet_extension_send_text_max"))}))}var Ji=ja;i();m();var qe=l(_()),Pe=l(y());te();var Ri=l(et()),em=l(Ba());i();m();function Ja(){let e=(0,Pe.useDispatch)(),o=(0,Pe.useSelector)(Q),t=A(o),r=(0,Pe.useSelector)(le),n=(0,Pe.useSelector)(it);(0,qe.useEffect)(()=>{if(o&&kt(r)&&(t==null?void 0:t.decimals)){let s=!n||(0,Ri.isNaN)(Number(n));e(Zr(as(r,s?"0":(0,em.addHexPrefix)(An($(n,10**(t==null?void 0:t.decimals)))))))}},[o,t==null?void 0:t.decimals,r,n])}function Ra(){let e=g(),o=(0,Pe.useDispatch)(),r=!(0,Pe.useSelector)(Q),n=(0,Pe.useSelector)(Jo);return Ja(),r?qe.default.createElement(Fe.Row,null,qe.default.createElement(P,{title:qe.default.createElement("div",{className:"rpc-evm-send-edit-input-data__title"},e("developer_mode_send_maintitle_gasprice"),qe.default.createElement(fe,{title:e("developer_mode_send_tooltip_additional_data"),placement:fe.DIRECTION.topRight},qe.default.createElement(B,{className:"okx-wallet-plugin-information-circle rpc-evm-send-edit-input-data__info-icon"}))),placeholder:e("developer_mode_select_a_token_input_optional"),errorType:P.TIP_TYPE.always,size:P.SIZE.xl,value:n,onChange:s=>{o(Zr(s.target.value))}})):null}var tm=Ra;i();m();var Bt=l(_()),no=l(y());var om=l(ee());te();var rm=l(et());G();i();m();function el(){let e=g(),o=(0,no.useDispatch)(),t=(0,no.useSelector)(At),r=(0,no.useSelector)(St),n=a=>{o(ci(a))},s;return t&&(ot(t,r)?s=e("developer_mode_send_tooltip_higher",{num:r}):Eo(t,r)&&(s=e("developer_mode_send_tooltip_lower",{num:r}))),Bt.default.createElement(Fe.Row,{className:"rpc-evm-send-edit-nonce",noMargin:!0},Bt.default.createElement("div",{className:"rpc-evm-send-edit-nonce__inner"},Bt.default.createElement(P.Number,{innerClassName:(0,om.default)({"rpc-evm-send-edit-nonce__warning-input":!!s}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,title:e("developer_mode_send_maintitle_nonce1"),placeholder:`${(0,rm.isNil)(r)?"":H.thousandFormat(r)}`,size:P.SIZE.xl,value:t,onAdd:()=>!t&&r!==null?(n(gn(r,1)),!1):!0,onSub:()=>!t&&ot(r,0)?(n(tt(r-1)),!1):!0,onChange:n})),s&&Bt.default.createElement("div",{className:"rpc-evm-send-edit-nonce__warning-text"},Bt.default.createElement(B,{className:"okx-wallet-plugin-warning-circle rpc-evm-send-edit-nonce__warning-icon"}),s))}var nm=el;i();m();var sm=l(_()),im=l(z());G();var lt=l(y());function tl(){let e=(0,lt.useSelector)(le),o=(0,lt.useSelector)(Qo),t=(0,lt.useSelector)(jo),r=(0,lt.useSelector)(He),n=(0,lt.useSelector)(Ge);return!e||!!o||!!t||!r&&n===0}function ol({loading:e}){let o=(0,im.useHistory)(),t=(0,lt.useSelector)(Q),r=tl(),n=()=>{let s=Do;t&&(s+=`?address=${t}`),o.push(s)};return sm.default.createElement(D,{category:D.CATEGORY.fill,type:D.TYPE.highlight,size:D.SIZE.lg,loading:e,block:!0,disabled:r,onClick:n},T("wallet_extension_send_btn_next"))}var mm=ol;i();m();var am={"rpc-evm-send-edit__inner":"_rpc-evm-send-edit__inner_3qvkv_1",rpcEvmSendEditInner:"_rpc-evm-send-edit__inner_3qvkv_1"};function rl(){let e=(0,lm.useDispatch)(),o=re(),{loadingChainGasLimit:t}=dr();return ur(),oe(()=>{e(ri(o.get("address")))}),Ie.default.createElement(nt.Container,null,Ie.default.createElement(Xi,null),Ie.default.createElement(nt.Box,{className:am["rpc-evm-send-edit__inner"]},Ie.default.createElement(ji,null),Ie.default.createElement(Ji,null),Ie.default.createElement(tm,null),Ie.default.createElement(nm,null)),Ie.default.createElement(Ce.FooterActions,null,Ie.default.createElement(mm,{loading:t})))}var cm=rl;i();m();var O=l(_());var E=l(y());G();var pm=l(et()),dm=l(z());La();te();function nl({requestChainGasPrice:e,requestChainGasLimit:o,requestNonce:t}){let r=(0,E.useDispatch)(),[n,s]=(0,O.useState)(!1),a=(0,E.useSelector)(le),c=(0,E.useSelector)(Q),p=!c,d=(0,E.useSelector)(Jo),f=(0,E.useSelector)(bt),h=(0,E.useSelector)(Qt),C=(0,E.useSelector)(He),v=(0,E.useSelector)(Ge),w=(0,E.useSelector)(At),x=(0,E.useSelector)(St),ae=(0,E.useSelector)(it);return{loading:n,onChecker:_e(()=>{let F=[];return f===""&&h===null&&F.push(e().then(U=>{r(er(U))})),C===""&&v===null&&F.push(o({to:p?a:c,data:d,value:ae}).then(U=>{r(tr(U))})),w===""&&x===null&&F.push(t().then(({suggestedNonce:U})=>{r(or(U))})),F.length===0?Promise.resolve():(s(!0),Promise.all(F).finally(()=>{setTimeout(()=>{s(!1)})}))})}}function sl(){let e=(0,E.useSelector)(Q),o=!e,t=ve(),r=(0,E.useSelector)(le),n=(0,E.useSelector)(Kt),s=(0,E.useSelector)(Xo),a=(0,E.useSelector)(bt),c=(0,E.useSelector)(Qt),p=(0,E.useSelector)(He),d=(0,E.useSelector)(Ge),f=(0,E.useSelector)(At),h=(0,E.useSelector)(St),C=(0,E.useSelector)(L),v={from:t,to:o?r:e,value:o?s:"0x0",data:n},[w,x]=Vs(v),ae=zs({data:v.data,type:w}),[F,U]=$s(v.to),Re=xt((ae==null?void 0:ae.amount)||0,{decimals:(F==null?void 0:F.decimals)||6});return{txMeta:qs({tx:v,gasLimit:p||d,gasPrice:a?ko(a):c,nonce:f||h,txData:ae,tokenInfo:F,chain:C,approvedAmount:Re,formattedAmount:Re,txType:w}),loadingTxData:x||U}}var il=()=>{var dn;let e=(0,dm.useHistory)(),o=(0,E.useDispatch)(),t=(0,E.useSelector)(Ro),r=(0,E.useSelector)(Q),n=A(r),s=A(),a=(0,E.useSelector)(it),c=$n(),p=(0,E.useSelector)(le),d=to(),f=(0,E.useSelector)(At),h=(0,E.useSelector)(St),C=(0,E.useSelector)(Kt),v=(0,E.useSelector)(L),w=Ms(),x=cs(c),ae=(0,E.useSelector)(bt),F=(0,E.useSelector)(He),U=(0,E.useSelector)(oi),Re=(0,E.useSelector)(Ge),de=mt(d),[Pr,Co]=(0,O.useState)(!1),[Or,Wt]=(0,O.useState)(!1),{request:vo}=ur(),{requestChainGasPrice:Br,requestChainGasLimit:Fr,loadingChainGasLimit:Vt}=dr(),{loading:zt,onChecker:Mr}=nl({requestChainGasPrice:Br,requestChainGasLimit:Fr,requestNonce:vo}),{txMeta:V,loadingTxData:ue}=sl();oe(()=>{if(!p){let R=xe;r&&(R+=`?address=${r}`),e.replace(R)}});let cn=(0,O.useMemo)(()=>{var R;return[I.AUTHORIZATION,I.CANCEL_AUTHORIZATION].includes(V.type)?!1:V.type===I.TRANS_OUT?(R=V.extraParams)==null?void 0:R.value:a},[a,V]),ka=(0,O.useMemo)(()=>{var R,un;return V.type===I.TRANS_OUT?(R=V.extraParams)==null?void 0:R.coinSymbol:[I.AUTHORIZATION,I.CANCEL_AUTHORIZATION].includes(V.type)?T(st[V.type],{symbol:(un=V.extraParams)==null?void 0:un.coinSymbol}):T(st[V.type])},[V]),pn=()=>{setTimeout(()=>{o(rr())},200),e.push(t||Y)},wa=async()=>{try{Wt(!0),await Mr(),kn({chain_id:parseInt(v.chainId,16),wallet_address:V.txParams.from}),await w(V),pn()}catch(R){(0,pm.noop)(R)}finally{Wt(!1)}},Ia=_e(R=>{o(li(R))}),ba=_e(R=>{o(ai(R))});return O.default.createElement(nt.Container,null,O.default.createElement(M,{icon:V.type===I.TRANS_OUT&&{text:(dn=V.extraParams)==null?void 0:dn.coinSymbol},title:ka,onClose:pn}),cn&&O.default.createElement(Zt,null,O.default.createElement(ss,{summaryList:[{useMinPrecision:!1,coinAmount:cn,injectCoin:n,displayEstimate:!1}],title:T("wallet_extension_send_colored_send")})),O.default.createElement(Zt,null,O.default.createElement(Vr,{localType:hn,title:T("extension_send_mid_text_from"),walletId:c,onCopyCallback:()=>{x({trade:"send",all_confirmation:"wallet_used_address"})}}),O.default.createElement(Vr,{address:p,title:T("extension_send_mid_text_to"),onCopyCallback:()=>{x({trade:"send",all_confirmation:"to_address"})}})),O.default.createElement(Zt,null,O.default.createElement(ms,{onClick:()=>{Co(!0)},injectCoin:s,networkFee:H.mul(d,10**(s==null?void 0:s.decimals))})),O.default.createElement(Zt,{bordered:!1},O.default.createElement(zn,{title:T("developer_mode_send_maintitle_nonce1")},O.default.createElement(De.Text,{size:De.SIZE.sm},f||h)),!!C&&O.default.createElement(ls,{copyable:!0,defaultExpanded:!0,data:C})),O.default.createElement(Ce,{placeholder:!0,offsetBottom:0},O.default.createElement(qr,{buttonGroup:[{onClick:wa,actionType:qr.ACTION_TYPE.CONFIRM,loading:zt||ue||Vt||Or}]})),O.default.createElement(Ks,{visible:Pr,setVisible:Co,gasPrice:ae,gasLimit:F,chainGasPrice:U,chainGasLimit:Re,gasFeeDisplay:de,setGasLimit:Ia,setGasPrice:ba}))},um=il;i();m();var Qe=l(_());G();var Um=l(y());i();m();var fm=l(_()),_r=l(y());G();function ml(){let e=(0,_r.useDispatch)(),o=(0,_r.useSelector)(ce),t=Ue(),r=[{text:T("wallet_extension_history_option_pending",{num:t.length}),value:Dt.PENDING},{text:T("wallet_extension_history_tab_completed"),value:Dt.COMPLETE}];return oe(()=>{t.length===0&&e(Xt({status:Dt.COMPLETE}))}),fm.default.createElement(k.FilterTabs,{tabs:r,value:o.status,onSelect:n=>{e(Xt({status:n}))}})}var _m=ml;i();m();var so=l(_()),hr=l(y()),Tm=l(ee());G();Da();i();m();var Tr={root:"_root_1iqyp_1",resetNonceIcon:"_resetNonceIcon_1iqyp_12",disabledResetNonceIcon:"_disabledResetNonceIcon_1iqyp_16"};function al(){let e=(0,hr.useDispatch)(),o=(0,hr.useSelector)(ce),t=Ue(),r=()=>{t.length!==0&&yo.warn({alignBottom:!1,title:T("extension_wallet_advanced_title_clear_confirm"),text:T("extension_wallet_advanced_subtitle_clear_confirm"),cancelText:T("wallet_extension_btn_general_cancel"),confirmText:T("wallet_extension_btn_general_confirm"),onConfirm:async()=>{await Tn().rpcEvmClearPendingTransaction(),$t.success({title:T("extension_wallet_advanced_notification_cleared")})}})};return so.default.createElement("div",{className:Tr.root},so.default.createElement(k.DateRangeSelection,{dates:o.dates,onChange:(n,s)=>{e(Xt({dates:s}))}}),so.default.createElement(fe,{title:T("wallet_extension_settings_tooltips_reset_nonce"),placement:fe.DIRECTION.bottomRight},so.default.createElement(B,{className:(0,Tm.default)("okx-wallet-plugin-brush-20",Tr.resetNonceIcon,{[Tr.disabledResetNonceIcon]:t.length===0}),onClick:r})))}var hm=al;i();m();var Ke=l(_()),Fm=l(y());i();m();i();m();var Ze=l(_());i();m();var en=l(_());var ll=({tx:e,onBack:o})=>{let t=g(),{type:r,extraParams:n}=e,s=st[r],a=r===I.AUTHORIZATION||r===I.CANCEL_AUTHORIZATION?t(s,{symbol:(n==null?void 0:n.coinSymbol)||""}):t(s);return en.default.createElement(M,{title:a,onBack:o})},gm=en.default.memo(ll);i();m();var Ye=l(_());te();i();m();var tn=l(_()),on=l(ee());i();m();var cl={lightBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},deepBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},lightGray:{background:"var(var(--okd-color-content-contrast))",color:"var(--okx-wallet-color-white)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--okx-wallet-color-white)"},black:{background:"var(--okx-wallet-color-black)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(var(--okd-color-content-tertiary))",color:"var(--okx-wallet-color-white)"}},pl={larger:{size:56,fontSize:30},large:{size:32,fontSize:20},normal:{size:24,fontSize:14},small:{size:20,fontSize:12}};function dl({icon:e,className:o,text:t,size:r="normal",fontSize:n,theme:s,color:a,background:c}){if(!t)return null;let p=t[0].toUpperCase(),d,f,h;if(s){let x=cl[s];d=x==null?void 0:x.color,f=x==null?void 0:x.background,h=x==null?void 0:x.border}let C,v;if(typeof r=="string"){let x=pl[r];C=x==null?void 0:x.size,v=x==null?void 0:x.fontSize}else C=r.size;let w={width:`${C}px`,height:`${C}px`};return e?tn.default.createElement("img",{alt:"icon",src:e,style:w,className:(0,on.default)("capitalize-letter",o)}):(w={...w,fontSize:`${n||v}px`,color:a||d,background:c||f,border:h},tn.default.createElement("div",{style:w,className:(0,on.default)("capitalize-letter",o)},p))}var X=dl;G();i();m();var ie=l(_()),xm=l(Sa()),gr=l(ee());i();m();function ul({className:e,label:o,children:t}){return ie.default.createElement("div",{className:(0,gr.default)("rpc-evm-coin-flow__label",e)},ie.default.createElement("div",{className:"rpc-evm-coin-flow__label-text"},o),ie.default.createElement("div",null,t))}function fl({isNFT:e,icon:o,title:t,address:r}){let n=g(),s=typeof o=="string"?ie.default.createElement(ns,{className:(0,gr.default)({"rpc-evm-coin-flow__record-icon-nft":e}),src:o,alt:""}):o;return ie.default.createElement("div",{className:"rpc-evm-coin-flow__record"},ie.default.createElement("div",{className:"rpc-evm-coin-flow__record-icon"},s),ie.default.createElement("div",{className:"rpc-evm-coin-flow__record-right"},ie.default.createElement("div",{className:"rpc-evm-coin-flow__record-title"},t),r&&ie.default.createElement(Me,{className:"rpc-evm-coin-flow__record-address",label:K(r),value:r,message:n("wallet_extension_popup_title_receiving_address_copied")})))}function rn({data:e}){if(e=(e||[]).filter(Boolean),e.length===0)return null;let o=e.length===1,t=r=>{if(!r)return null;let{items:n,label:s,...a}=r;return ie.default.createElement(ul,{...a,label:s,key:r},n.map((c,p)=>ie.default.createElement(fl,{...c,key:p})))};return ie.default.createElement("div",{className:(0,gr.default)("rpc-evm-coin-flow",{"rpc-evm-coin-flow__hidden-label":o})},e.map(t))}var Cm=rn;rn.propTypes={data:xm.default.array};rn.defaultProps={data:[]};var{TRANS_OUT:vm,CONTRACT_CALL:ym,AUTHORIZATION:xr,CANCEL_AUTHORIZATION:Cr,CONTRACT_DEPLOY:Em}=I,_l={[xr]:"wallet_extension_header_approval_title_approve",[Cr]:"wallet_extension_header_approval_title_cancel_approval"},Tl={[xr]:"wallet_extension_header_approval_title_for",[Cr]:"wallet_extension_header_approval_title_for"},hl="/static/images/tx-history/default-protocol.svg";function gl(e){let o=g(),{type:t}=e,r=A("",!0);switch(t){case vm:{let{value:n,coinSymbol:s}=e.extraParams||{},a=`- ${H.thousandFormat(n)} ${s||o("wallet_extension_history_text_unknown_token")}`;return{items:[{icon:Ye.default.createElement(X,{icon:!s&&wn,text:s,size:"large",theme:"black"}),title:Ye.default.createElement($r,{maxWidth:"284px",text:a})}]}}case ym:{let{value:n}=e.txParams||{},s=q(n);if(ht(s,0))return null;let a=`- ${ze(se(s),{symbol:r.symbol,decimals:r==null?void 0:r.decimals})}`;return{items:[{icon:Ye.default.createElement(X,{text:r.symbol,size:"large",theme:"black"}),title:Ye.default.createElement($r,{text:a,maxWidth:"284px"})}]}}case xr:case Cr:{let{coinSymbol:n}=e.extraParams||{};return n?{label:o(_l[t]),items:[{icon:Ye.default.createElement(X,{text:n,size:"large",theme:"black"}),title:n}]}:null}case Em:default:return null}}function xl(e){let o=g(),{type:t,extraParams:r}=e;switch(t){case xr:case Cr:{let{approvedAddress:n}=r||{};return{label:o(Tl[t]),items:[{icon:hl,title:Ye.default.createElement(Me,{className:"rpc-mode-evm-tx-detail-flow__authorization",label:K(n),value:n,message:o("wallet_extension_popup_title_receiving_address_copied")})}]}}case vm:case ym:case Em:default:return null}}function Cl({tx:e}){let o=gl(e),t=xl(e);return Ye.default.createElement(Cm,{data:[o,t]})}var Nm=Cl;i();m();var N=l(_());var km=l(ee());var io=l(y());G();te();function vl({status:e,isCanceling:o,isSpeeding:t,isShowPending:r}){let n=g(),s,a="";return e===S.SUCCEED?(s=wt.TxStatusInfoEnum.SUCCESS,a=n("wallet_extension_history_status_completed")):e===S.FAILED||e===S.DROPPED?(s=wt.TxStatusInfoEnum.FAILED,a=n("wallet_extension_history_status_failed")):e===S.PENDING&&(r?(s=wt.TxStatusInfoEnum.PENDING,o?a=n("wallet_extension_send_status_canceling"):t?a=n("wallet_extension_send_status_speedingup"):a=n("wallet_extension_history_list_status_pending")):(s=wt.TxStatusInfoEnum.WAITING,a=n("wallet_extension_history_list_status_waiting"))),N.default.createElement(wt,{label:n("wallet_extension_mid_text_status"),status:s,statusText:a})}function yl({status:e,sendTime:o,finishTime:t}){let r=g(),n=(0,io.useSelector)(gt);return N.default.createElement(Le,{label:r("wallet_extension_mid_text_time"),value:_t(e===S.PENDING?o:t,{format:"yyyyMMddHHmmss",locale:n})})}function El({type:e,extraParams:o}){let t=g(),{approvedAmount:r}=o||{};return e!==I.AUTHORIZATION?null:N.default.createElement(Le,{label:t("wallet_extension_mid_text_approved_amount"),value:r>=10**13?t("wallet_extension_mid_text_unlimited"):H.thousandFormat(r||"0")})}function Nl({status:e,blockNumber:o}){let t=g(),r=(0,io.useSelector)(Ho),n=tt(r,o);return e===S.PENDING||e===S.DROPPED||No(n,0)||qt(n,14)?null:N.default.createElement(Le,{label:t("wallet_extension_mid_text_block_confirmation"),value:n})}function kl(){let e=g(),o=(0,io.useSelector)(L);return N.default.createElement(Le,{label:e("wallet_extension_mid_text_network"),value:N.default.createElement(N.default.Fragment,null,N.default.createElement(X,{className:"rpc-mode-evm-tx-detail-info__network-icon",icon:o.icon,text:o.name,size:"small",theme:"lightGray"}),o.name)})}function wl({txParams:e}){let o=g(),{from:t}=e;return N.default.createElement(Le,{label:o("wallet_extension_mid_text_from"),value:N.default.createElement(Me,{label:K(t),value:t,message:o("wallet_extension_popup_title_receiving_address_copied")})})}function Il({status:e,type:o,extraParams:t,txParams:r}){let n=g(),{toAddress:s,tokenAddress:a,contractAddress:c}=t||{},{to:p}=r,d,f;if(o===I.TRANS_OUT)d=n("wallet_extension_mid_text_to"),f=s;else if(o===I.CONTRACT_DEPLOY)if(e===S.SUCCEED)d=n("developer_mode_history_subtitle_developer"),f=c;else return null;else d=n("wallet_extension_mid_text_interaction_address"),o===I.AUTHORIZATION||o===I.CANCEL_AUTHORIZATION?f=a:f=p;return N.default.createElement(Le,{label:d,value:N.default.createElement(Me,{label:K(f),value:f,message:n("wallet_extension_popup_title_receiving_address_copied")})})}function bl({status:e,gasUsed:o,txParams:t}){let r=g(),n=(0,io.useSelector)(L),{gasLimit:s,gasPrice:a}=t,c=zo($,se),p=ze(c(a,o||s),{symbol:n==null?void 0:n.symbol,decimals:n==null?void 0:n.decimals});return N.default.createElement(ks,{label:r("wallet_extension_mid_text_network_fee"),value:p,tip:e===S.PENDING&&r("wallet_extension_popup_cancle_transaction_gasprice_gaslimit",{gasPrice:H.thousandFormat(rt(a)),gasLimit:H.thousandFormat(s)})})}function Al({txParams:e}){let o=g(),{data:t}=e,[r,n]=(0,N.useState)(!1);return t?N.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data"},N.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__inner"},N.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__title",onClick:()=>{n(s=>!s)}},o("developer_mode_history_title_transaction_data"),N.default.createElement(B,{className:(0,km.default)("okx-wallet-plugin-arrow-small-down rpc-mode-evm-tx-detail-info-data__arrow",{"rpc-mode-evm-tx-detail-info-data__arrow--spread":r})})),r&&N.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__data"},t))):null}function Sl({tx:e}){let o=g(),{txHash:t,txParams:{nonce:r}}=e;return N.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info"},N.default.createElement(vl,{...e}),N.default.createElement(yl,{...e}),N.default.createElement(El,{...e}),N.default.createElement(Nl,{...e}),N.default.createElement(kl,{...e}),N.default.createElement(wl,{...e}),N.default.createElement(Il,{...e}),N.default.createElement(bl,{...e}),N.default.createElement(Le,{label:o("developer_mode_history_title_nonce"),value:q(r)}),N.default.createElement(Le,{label:o("wallet_extension_mid_text_transaction_hash"),value:N.default.createElement(Me,{label:K(t),value:t,message:o("wallet_extension_popup_title_transaction_hash_copied")})}),N.default.createElement(Al,{...e}))}var wm=Sl;i();m();var be=l(_());i();m();i();m();var vr=l(_());te();function Dl({txId:e,onClose:o}){let t=Yo(e),r=Us(),[n,s]=(0,vr.useState)(!1),a=async()=>{if(n)return;s(!0);let v=await Zo(t.id);if(!v||v.status!==S.PENDING){s(!1),o();return}r(t).catch(w=>{console.log(w)}).finally(()=>{s(!1),o()})},{gasPrice:c,gasLimit:p}=(t==null?void 0:t.txParams)||{};c=q(c),p=q(p);let d=mt(se($(c,p))),f=`=Gas Price(${rt(c)})`,h=mt(se($($(c,1.2),p))),C=`=Gas Price(${rt($(c,1.2))})`;return vr.default.createElement(k.EthereumTxSpeedDialogBase,{visible:!!t,onConfirm:a,loading:n,onClose:o,oldGasFeeDisplay:d,oldGasDetailDisplay:f,newGasFeeDisplay:h,newGasDetailDisplay:C})}var mo=Dl;i();m();var yr=l(_());te();function Ll({txId:e,onClose:o}){let t=Yo(e),r=Hs(),n=A(),[s,a]=(0,yr.useState)(!1),c=async()=>{if(s)return;if(a(!0),(await Zo(t.id)).status!==S.PENDING){a(!1),o();return}r(t).catch(v=>{console.log(v)}).finally(()=>{o(),a(!1)})},{gasPrice:p,gasLimit:d}=(t==null?void 0:t.txParams)||{};p=q(p),d=q(d);let f=mt(se($($(p,1.2),d))),h=`Gas Price (${rt($(p,1.2))} GWEI) *Gas Limit(${d}) `;return yr.default.createElement(k.EthereumTxCancelDialogBase,{visible:!!t,onConfirm:c,loading:s,onClose:o,chainSymbol:n==null?void 0:n.symbol,newGasFeeDisplay:f,newGasDetailDisplay:h})}var ao=Ll;i();m();var Oe=l(_());i();m();var ct=l(_());G();var Sm=l(y());i();m();var lo=l(_());var Im=({onClick:e,children:o})=>lo.default.createElement(D,{className:"rpc-evm-tx-actions__button",category:D.CATEGORY.outline,type:D.TYPE.primary,size:D.SIZE.xs,onClick:t=>{t.stopPropagation(),e&&e(t)}},o);function Pl({tx:e,onCancel:o,onSpeed:t}){let r=g(),{isShowPending:n,isCanceling:s}=e,a=r(s?"wallet_extension_history_list_status_btn_speed_up_cancellation":"wallet_extension_history_list_status_btn_cancel_transaction");return n?lo.default.createElement("div",{className:"rpc-evm-tx-actions"},lo.default.createElement(Im,{onClick:o},a),!s&&lo.default.createElement(Im,{onClick:t},r("wallet_extension_history_list_status_btn_speed_up"))):null}var bm=Pl;i();m();G();te();var Am=l(y());function Er({type:e,extraParams:o}){let t=st[e],r,n=T(t);return e===I.TRANS_OUT?r="okx-wallet-plugin-pointer-up":e===I.AUTHORIZATION||e===I.CANCEL_AUTHORIZATION?(r="okx-wallet-plugin-lock-1",n=T(t,{symbol:o==null?void 0:o.coinSymbol})):e===I.CONTRACT_CALL?r="okx-wallet-plugin-report-centre":e===I.CONTRACT_DEPLOY&&(r="okx-wallet-plugin-futures-20"),{icons:[r],title:n}}function Nr({type:e,txParams:o,extraParams:t}){let r=(0,Am.useSelector)(L);if(e===I.TRANS_OUT){let a=t==null?void 0:t.value;return a&&(a=H.thousandFormat(a)),[{direction:Gr.OUT,coinAmount:`${a||""} ${(t==null?void 0:t.coinSymbol)||""}`}]}let{value:n}=o||{},s=q(n);return ot(s,0)?[{direction:Gr.OUT,coinAmount:`${H.thousandFormat(se(s))} ${r.symbol||""}`}]:[]}function kr(e){var t;let o;return e.type===I.TRANS_OUT?o=`${T("wallet_extension_history_list_send_to")}   ${K(e.extraParams.toAddress)}`:e.type===I.AUTHORIZATION||e.type===I.CANCEL_AUTHORIZATION?o=K((t=e.extraParams)==null?void 0:t.approvedAddress):o=K(e.txParams.to),o}function Ol({isShowPending:e,isSpeeding:o,isCanceling:t}){let r=g(),n="",s="";return e?(n=Yt.PENDING,o?s=r("wallet_extension_send_status_speedingup"):t?s=r("wallet_extension_send_status_canceling"):s=r("wallet_extension_history_list_status_pending")):(n=Yt.WAITING,s=r("wallet_extension_history_list_status_waiting")),{labelType:n,labelText:s}}function Bl(e){let o=kr(e),t=(0,Sm.useSelector)(gt),r=[o],n=_t(e.sendTime,{format:"yyyyMMddHHmmss",locale:t});return r.push(n),r}function Fl({tx:e,onClick:o,onCancel:t,onSpeed:r}){let{icons:n,title:s}=Er(e),{labelType:a,labelText:c}=Ol(e),p=Nr(e),d=Bl(e),f=qo(d,p),h=ct.default.createElement(k.Label,{className:"tx-history-ml4",type:a,text:c});return ct.default.createElement(k.ItemContainer,{onClick:C=>{o&&o(e,C)}},ct.default.createElement(k.Row,{assets:p,align:f},ct.default.createElement(k.Info,{icons:n,title:s,label:h,details:d}),ct.default.createElement(k.Assets,{assets:p})),ct.default.createElement(bm,{tx:e,onCancel:t,onSpeed:r}))}var co=Fl;function Ml({txs:e,onClick:o}){let[t,r]=(0,Oe.useState)(null),[n,s]=(0,Oe.useState)(null);return Oe.default.createElement(Oe.default.Fragment,null,e.map(a=>Oe.default.createElement(co,{key:a.id,tx:a,onClick:o,onSpeed:()=>{r(a.id)},onCancel:()=>{s(a.id)}})),Oe.default.createElement(mo,{txId:t,onClose:()=>{r(null)}}),Oe.default.createElement(ao,{txId:n,onClose:()=>{s(null)}}))}var po=Ml;i();m();var pt=l(_());G();var nn=l(y());function Ul({txs:e,onClick:o}){let t=(0,nn.useSelector)(gt),{dates:r}=(0,nn.useSelector)(ce),n=(0,pt.useMemo)(()=>{let s=e.map(f=>({...f,groupDate:_t(f.sortTime,{format:"yyyyMMdd",locale:t})})),a=[],c=0,p,d;return s.forEach(f=>{let{groupDate:h}=f;p!==h&&(p=h,d=[],a[c++]={date:p,list:d}),d.push(f)}),a},[e,r]);return pt.default.createElement(k.List,null,n.map(({date:s,list:a},c)=>pt.default.createElement("div",{key:c},pt.default.createElement(k.Date,null,s),a.map(p=>pt.default.createElement(p.Comp,{key:p.id,tx:p,onClick:o})))))}var uo=Ul;i();m();var Ft=l(_());function Hl({status:e}){let o=g(),t="",r="";return(e===S.FAILED||e===S.DROPPED)&&(t=Yt.FAILED,r=o("wallet_extension_history_status_failed")),{labelText:r,labelType:t}}function Gl(e){return[kr(e)]}function Wl({tx:e,onClick:o}){let{icons:t,title:r}=Er(e),n=Nr(e),s=Gl(e),a=qo(s,n),{labelType:c,labelText:p}=Hl(e),d=Ft.default.createElement(k.Label,{className:"tx-history-ml4",type:c,text:p});return Ft.default.createElement(k.ItemContainer,{onClick:f=>{o&&o(e,f)}},Ft.default.createElement(k.Row,{assets:n,align:a},Ft.default.createElement(k.Info,{icons:t,title:r,label:d,details:s}),Ft.default.createElement(k.Assets,{assets:n})))}var fo=Wl;function Vl({tx:e}){let o=g(),t=Ps(),{status:r,isShowPending:n,isCanceling:s}=e,[a,c]=(0,be.useState)(!1),[p,d]=(0,be.useState)(!1);return be.default.createElement(be.default.Fragment,null,(r===S.SUCCEED||r===S.FAILED)&&be.default.createElement(ws,{url:t(e.txHash),text:o("wallet_extension_mid_link_explorer")}),n&&r===S.PENDING&&be.default.createElement(Is,{isShowCancel:!s,isShowSpeedUp:!s,isShowSpeedupCancel:s,onCancel:()=>{c(!0)},onSpeedUp:()=>{d(!0)}}),p&&be.default.createElement(mo,{txId:e==null?void 0:e.id,onClose:()=>{d(!1)}}),a&&be.default.createElement(ao,{txId:e==null?void 0:e.id,onClose:()=>{c(!1)}}))}var Dm=Vl;function zl({txId:e,onBack:o}){let r=Ds().find(({id:n})=>n===e);return r?Ze.default.createElement(nt.Portal,{className:"rpc-mode-tx-detail"},Ze.default.createElement(gm,{tx:r,onBack:o}),Ze.default.createElement(bs,{message:r.errorMessage}),Ze.default.createElement("div",{className:"rpc-mode-tx-detail__content"},Ze.default.createElement(Nm,{tx:r}),Ze.default.createElement(wm,{tx:r}),Ze.default.createElement(Dm,{tx:r}))):null}var _o=zl;i();m();var sn=l(_());function $l({symbol:e}){return sn.default.createElement("div",{className:"rpc-mode-evm-title-header__title"},sn.default.createElement(X,{className:"rpc-mode-evm-title-header__icon",text:e,theme:"black"}),e)}var mn=$l;i();m();i();m();var wr=l(_()),Lm=l(y());function ql({onClick:e}){let{dates:o}=(0,Lm.useSelector)(ce),t=Ue({dates:o});return t.length===0?wr.default.createElement(k.Empty,{top:72}):wr.default.createElement(k.ListContainer,{style:{paddingTop:"8px"}},wr.default.createElement(po,{txs:t,onClick:e}))}var Pm=ql;i();m();var Mt=l(_());var Om=l(y());function Yl({onClick:e}){let{dates:o}=(0,Om.useSelector)(ce),t=Ss({dates:o}),r=(0,Mt.useMemo)(()=>t.map(n=>({...n,sortTime:n.finishTime,Comp:fo})),[t]);return r.length===0?Mt.default.createElement(k.Empty,{top:72}):Mt.default.createElement(k.ListContainer,null,Mt.default.createElement(uo,{txs:r,onClick:e}))}var Bm=Yl;function Zl(){let e=(0,Fm.useSelector)(ce),[o,t]=(0,Ke.useState)(null),r=n=>{t(n.id)};return Ke.default.createElement(Ke.default.Fragment,null,e.status===Dt.PENDING?Ke.default.createElement(Pm,{onClick:r}):Ke.default.createElement(Bm,{onClick:r}),o&&Ke.default.createElement(_o,{txId:o,onBack:()=>{t(null)}}))}var Mm=Zl;i();m();function Kl(){let e=(0,Um.useDispatch)();return Uo(()=>{e(di())}),Qe.default.createElement(k.PageContainer,{className:"rpc-evm-tx-history"},Qe.default.createElement(Ce,{className:"rpc-evm-tx-history__top",offsetTop:0},Qe.default.createElement(M,{sticky:!1,title:T("wallet_extension_header_text_history")}),Qe.default.createElement(_m,null),Qe.default.createElement(hm,null)),Qe.default.createElement("div",{className:"rpc-evm-tx-history__bottom"},Qe.default.createElement(Mm,null)))}var Hm=Kl;i();m();var Ht=l(_());i();m();var Ut=l(_());var Gm=l(z());i();m();function Xe(){return re().get("address")}var Ql=()=>{let e=g(),o=(0,Gm.useHistory)(),t=Xe(),r=A(t),n=()=>{o.push(Y)};return Ut.default.createElement(M,{title:Ut.default.createElement(mn,{symbol:r==null?void 0:r.symbol}),onBack:n},t&&Ut.default.createElement(fe,{title:e("developer_mode_infor_tooltip_token_details"),placement:fe.DIRECTION.bottom},Ut.default.createElement(B,{className:"okds-information-circle rpc-mode-evm-coin-detail-header__info-icon",onClick:()=>{o.push(`${Fo}?address=${t}`)}})))},Wm=Ut.default.memo(Ql);i();m();var ho=l(_());var $m=l(y());te();i();m();var To=l(_());G();var Vm=l(z());te();var Ir=l(y());function Xl(){let e=(0,Vm.useHistory)(),o=(0,Ir.useDispatch)(),t=(0,Ir.useSelector)(L),r=Xe(),n=A(r),s=`${Et}?address=${r||""}`,a=!r&&(t==null?void 0:t.faucetUrl);return To.default.createElement("div",{className:`rpc-evm-coin-detail-btns ${a?"with-faucet":"without-faucet"}`},To.default.createElement(wo.IconButtonWithLabel,{disabled:ht(n==null?void 0:n.balance,0),icon:"okx-wallet-plugin-up",text:T("wallet_home_btn_send"),onClick:()=>{o(pi(s));let c=`${xe}?showClose=1`;r&&(c+=`&address=${r}`),e.push(c)}}),To.default.createElement(wo.IconButtonWithLabel,{icon:"okx-wallet-plugin-down",text:T("wallet_home_btn_receive"),onClick:()=>{let c=r?`&address=${r}`:"";e.push(`${yt}?showClose=1${c}`)}}),a&&To.default.createElement(wo.IconButtonWithLabel,{icon:"okx-wallet-plugin-faucet-1",text:T("developer_mode_home_btn_faucet"),href:t==null?void 0:t.faucetUrl}))}var zm=Xl;function jl(){let e=Xe(),o=A(e),t=(o==null?void 0:o.balance)||0,{symbol:r,usdToThisRate:n}=(0,$m.useSelector)(Io),s=$(o==null?void 0:o.price,n);return{coinAmount:t,coinSymbol:o==null?void 0:o.symbol,coinAmountDisplay:xt(t),currencyAmountDisplay:Vo({amount:t,rate:s,symbol:r},{useSign:!0,useFixed:!0})}}function Jl(){let e=ve(),{coinSymbol:o,coinAmountDisplay:t}=jl();return ho.default.createElement(ei,null,ho.default.createElement(Js,{coinSymbol:o,amountDisplay:t,currencyDisplay:null}),ho.default.createElement(Rs,{address:e}),ho.default.createElement(zm,null))}var qm=Jl;i();m();var Ae=l(_());i();m();var Ym=l(_());function Rl({txs:e,onClick:o}){return e.length===0?null:Ym.default.createElement(po,{txs:e,onClick:o})}var Zm=Rl;i();m();var br=l(_());function ec({txs:e,onClick:o}){let t=(0,br.useMemo)(()=>e.map(r=>{let n,s;return r.status===S.PENDING?(n=r.sendTime,s=co):(n=r.finishTime,s=fo),{...r,sortTime:n,Comp:s}}),[e]);return t.length===0?null:br.default.createElement(uo,{txs:t,onClick:o})}var Km=ec;function tc(){let e=Xe(),o=Ls({tokenAddress:e}),[t,r]=(0,Ae.useState)(null),[n,s]=(0,Ae.useMemo)(()=>{let c=[],p=[];return o.forEach(d=>{d.isShowPending?c.push(d):p.push(d)}),[c,p]},[o]),a=c=>{r(c.id)};return o.length===0?Ae.default.createElement(k.Empty,null):Ae.default.createElement("div",null,Ae.default.createElement(Zm,{txs:n,onClick:a}),Ae.default.createElement(Km,{txs:s,onClick:a}),Ae.default.createElement(_o,{txId:t,onBack:()=>{r(null)}}))}var Qm=tc;i();m();function oc(){return Ht.default.createElement("div",{className:"rpc-evm-coin-detail"},Ht.default.createElement(Wm,null),Ht.default.createElement("div",{className:"rpc-evm-coin-detail__content"},Ht.default.createElement(qm,null),Ht.default.createElement(Qm,null)))}var Xm=oc;i();m();var ge=l(_()),ra=l(Wr());G();var na=l(z());i();m();var Rm=l(_()),ea=l(ee());i();m();var Gt=l(_()),jm=l(ee());var Jm=({token:e,className:o,children:t,onClick:r})=>Gt.default.createElement("div",{onClick:r,className:(0,jm.default)("rc-mode__token",o)},Gt.default.createElement(X,{fontSize:"18px",theme:"black",className:"rc-mode__token__icon",size:"large",text:e==null?void 0:e.symbol}),Gt.default.createElement("div",{className:"rc-mode__token__info"},Gt.default.createElement("div",{className:"rc-mode__token__title"},e.symbol),Gt.default.createElement("div",{className:"rc-mode__token__name"},e.name)),t);var ta=({className:e,dataSource:o=[],renderItem:t,emptyText:r,component:n="div",...s})=>{let a=!o.length;return Rm.default.createElement(n,{className:(0,ea.default)("rc-mode__tokens",e),...s},o.map(c=>t(c)),a&&r)};ta.Item=Jm;var je=ta;i();m();var go=l(_());var oa=()=>{let e=ye(),[o,t]=go.default.useState(),r=_e(({target:{value:a}})=>{t(a)},[]),n=(0,go.useMemo)(()=>e.filter(({balance:a})=>!!Number(a)),[e]);return[(0,go.useMemo)(()=>o?n.filter(({name:a,symbol:c})=>{var d,f;let p=o==null?void 0:o.toLowerCase();return((d=a==null?void 0:a.toLowerCase())==null?void 0:d.includes(p))||((f=c==null?void 0:c.toLowerCase())==null?void 0:f.includes(p))}):n,[o,n]),{onChange:r,value:o,showSearch:!!n.length}]};i();m();var sa=()=>{let[e,{showSearch:o,...t}]=oa();return ge.default.createElement("div",{className:"rc-mode-select__token"},ge.default.createElement(M,{title:T("developer_mode_send_title_selecta_token")}),o&&ge.default.createElement(P.Search,{placeholder:T("developer_mode_send_input_selecta_token"),className:"rc-mode-select__token__search",...t}),ge.default.createElement(je,{dataSource:e,renderItem:r=>ge.default.createElement(na.Link,{to:`${xe}?${ra.default.stringify({showClose:1,address:r==null?void 0:r.address})}`},ge.default.createElement(je.Item,{token:r},ge.default.createElement("div",{className:"rc-mode-select__token__balance"},ge.default.createElement("div",{className:"rc-mode-select__token__amount"},H.thousandFormat(r.balance||0))))),emptyText:ge.default.createElement(_n.State,{className:"rc-mode-select__token__empty",title:o?T("developer_mode_send_toast_addnewtoken",{crypto:ge.default.createElement("span",{className:"rc-mode-select__token__empty__title__special"},t.value)}):T("developer_mode_send_toast_nonetoken")})}))};i();m();var dt=l(_());G();var pa=l(z());var da=l(y());i();m();i();m();var Ar=l(_()),rc=({children:e})=>Ar.default.createElement("div",{className:"token-detail-container"},e),ia=(0,Ar.memo)(rc);i();m();var Je=l(_()),nc=({image:e,symbol:o,name:t})=>Je.default.createElement("div",{className:"token-detail-intro"},Je.default.createElement("div",{className:"token-detail-intro__image"},e),Je.default.createElement("div",{className:"token-detail-intro__desc"},Je.default.createElement("div",{className:"token-detail-intro__symbol"},o),Je.default.createElement("div",{className:"token-detail-intro__name"},t))),ma=(0,Je.memo)(nc);i();m();var Se=l(_()),aa=l(ee());var sc=({className:e,title:o,text:t,copyText:r,copyNotificationTitle:n,copyNotificationDesc:s})=>{let a=(0,aa.default)("token-detail-row",e),[c,p]=Ns();return Se.default.createElement("div",{className:a},Se.default.createElement("div",{className:"token-detail-row__title"},o),Se.default.createElement("div",{className:"token-detail-row__content"},Se.default.createElement("div",{className:"token-detail-row__text"},t),r&&Se.default.createElement("div",{className:"token-detail-row__copy",onClick:()=>{c||(p(r),Tt.success({title:n,desc:Se.default.createElement("div",{className:"token-detail-row__copy-desc"},s)}))}},Se.default.createElement(B,{className:"okx-wallet-plugin-copy"}))))},Sr=(0,Se.memo)(sc);i();m();var xo=l(_()),la=l(ee());var ic=({details:e})=>xo.default.createElement("div",{className:"token-detail-details"},e.map((o,t)=>{let r=t===0?"":"token-detail-details__split",n=(0,la.default)(o==null?void 0:o.className,r);return xo.default.createElement(Sr,{...o,className:n})})),ca=(0,xo.memo)(ic);var Dr={Container:ia,Intro:ma,Row:Sr,Details:ca};i();m();function mc(){let e=(0,pa.useHistory)(),t=re().get("address"),r=A(t,!0),n=(0,da.useSelector)(L),s=[{title:T("developer_mode_infor_subtitle_contractadd"),text:K(t),copyText:t,copyNotificationTitle:T("developer_mode_infor_toast_success"),copyNotificationDesc:t},{title:T("developer_mode_infor_subtitle_tokendecimal"),text:r.decimals},{title:T("developer_mode_infor_subtitle_network"),text:n.name}];return oe(()=>{t||e.replace(Y)}),dt.default.createElement("div",{className:"rpc-evm-token-detail"},dt.default.createElement(M,{title:T("developer_mode_infor_maintitle_tokendetails")}),dt.default.createElement(Dr.Container,null,dt.default.createElement(Dr.Intro,{image:dt.default.createElement(X,{text:r.symbol,size:"large",theme:"black"}),symbol:r.symbol,name:r.name}),dt.default.createElement(Dr.Details,{details:s})))}var ua=mc;i();m();var j=l(_()),Ta=l(ee()),ha=l(z());var an=l(Ma());i();m();var fa=l(_());var Lr=l(y());var _a=()=>{let e=(0,Lr.useDispatch)(),{chainId:o}=(0,Lr.useSelector)(L)||{},t=ye(!0,!0),r=(0,fa.useMemo)(()=>{let s=[],a=[];return t.forEach(c=>{c.isDeleted?a.push(c):s.push(c)}),{usedChainTokens:s,disusedChainTokens:a}},[t]),n=_e(({address:s,isDeleted:a})=>{e(Xn({chainId:o,address:s,isDeleted:!a}))},[o]);return[r,n]};i();m();var ga=()=>{let e=g(),[{usedChainTokens:o,disusedChainTokens:t},r]=_a();return j.default.createElement("div",{className:"rpc-mode-manage-crypto"},j.default.createElement(M,{closeable:!1,title:e("developer_mode_home_maintitle_managecpt")}),j.default.createElement(ha.Link,{to:Oo},j.default.createElement("div",{className:"rpc-mode-manage-crypto__custom"},j.default.createElement("span",{className:"rpc-mode-manage-crypto__custom__title"},e("developer_mode_manage_text_customcpt")),j.default.createElement(B,{className:"okx-wallet-plugin-arrow-small-right"}))),j.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},e("developer_mode_manage_title_addedcpt")),j.default.createElement(je,{component:an.default,className:"rc-mode-home__tokens",dataSource:o,transitionName:"fade",transitionEnterTimeout:300,transitionLeaveTimeout:300,renderItem:n=>{let s=!n.address;return j.default.createElement(je.Item,{token:n},j.default.createElement(B,{className:(0,Ta.default)("okx-wallet-plugin-take","rc-mode-home__token__action","rc-mode-home__token__action__minus",{"rc-mode-home__token__action__disabled":s}),onClick:()=>r(n)}))}}),!!t.length&&j.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},e("developer_mode_manage_title_adding")),j.default.createElement(je,{component:an.default,className:"rc-mode-home__tokens",dataSource:t,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade",renderItem:n=>j.default.createElement(je.Item,{token:n,key:n==null?void 0:n.address},j.default.createElement(B,{className:"okx-wallet-plugin-add rc-mode-home__token__action rc-mode-home__token__action__add",onClick:()=>r(n)}))}))};i();m();var W=l(_());i();m();var Be=l(_()),xa=l(et());var Ca=l(z()),va=l(y());G();var ac="0x",lc=()=>{let e=Go();return async o=>{try{return!kt(o)||await(await e()).eth.getCode(o)===ac}catch(t){return console.log(t),!0}}},ya=()=>{let e=Z.useForm(),o=(0,Ca.useHistory)(),[t,r]=Be.default.useState(null),[n,s]=Be.default.useState(!1),[a,c]=Be.default.useState(!1),p=Wo(),d=Jn(),f=es(),h=lc(),C=ye(!0,!0),v=(0,va.useSelector)(L);Be.default.useEffect(()=>{e==null||e.setFieldsValue({network:v.name})},[v]);let w=_e(()=>{let{chainId:F}=v,U=e.getFieldsValue();p(F,U.address,U),f({chainId:F,address:U.address}),Tt.success({title:T("developer_mode_manage_toast_added")}),o.go(-1)},[v]),x=_e((0,xa.debounce)(async()=>{r(null),c(null);let F=e.getFieldValue("address");if(e.cleanErrors(),!F)return!1;let U=C.find(de=>de.address===F);if(U&&!U.isDeleted)return e.setErrors({address:T("developer_mode_manage_errortip_duplicate_add")});if(s(!0),c(!1),await h(F))return s(!1),e.setErrors({address:T("developer_mode_manage_errortip_request_failed")});try{let de=await d(F);r(de),e.setFieldsValue(de)}catch(de){c(!0),e.setErrors({address:""}),console.log("error",de)}finally{s(!1)}},250),[C]),ae=(0,Be.useMemo)(()=>a?Be.default.createElement("div",{className:"rpc-mode-custom-crypto__address__error"},T("developer_mode_manage_errortip_request_failed"),Be.default.createElement("span",{className:"rpc-mode-custom-crypto__address__refresh",onClick:x},T("developer_mode_manage_errortip_refresh"))):null,[a]);return{form:e,token:t,rpcInfo:v,fetching:n,addressError:ae,onConfirm:w,onAddressTrigger:x}};i();m();var cc=11,Ea=e=>{let o=g(e),{form:t,token:r,rpcInfo:n,fetching:s,onConfirm:a,addressError:c,onAddressTrigger:p}=ya();return W.default.createElement("div",{className:"rpc-mode-custom-crypto"},W.default.createElement(M,{title:o("developer_mode_manage_maintitle_customcpt")}),W.default.createElement(Z,{form:t,size:Z.SIZE.lg,validateTrigger:["onBlur","onChange"],className:"rpc-mode-custom-crypto__form"},W.default.createElement(Z.Item,{name:"network",label:o("developer_mode_manage_title_network")},W.default.createElement(P,{size:Z.SIZE.xl,innerClassName:"rpc-mode-custom-crypto__form__input__disabled",prefix:W.default.createElement(X,{theme:"lightGray",icon:n.icon,text:n==null?void 0:n.name,className:"rpc-mode-custom-crypto__icon"})})),W.default.createElement(Z.Item,{name:"address",label:o("developer_mode_manage_title_contractadd"),extra:c},W.default.createElement(P.TextArea,{autoResize:!0,size:Z.SIZE.xl,onChange:p,errorType:P.TIP_TYPE.always,suffix:s&&W.default.createElement(Hr.Circle,{size:Hr.SIZE.sm})})),W.default.createElement(Z.Item,{name:"symbol",hidden:!r,label:o("developer_mode_manage_title_symbol"),rules:[{validator:(d,f)=>(f==null?void 0:f.length)>cc?Promise.reject(o("developer_mode_manage_errortip_symbollimit")):Promise.resolve()}]},W.default.createElement(P,{size:Z.SIZE.xl})),W.default.createElement(Z.Item,{hidden:!r,name:"decimals",label:o("developer_mode_manage_title_decimals")},W.default.createElement(P,{size:Z.SIZE.xl,disabled:!0})),W.default.createElement(Z.Item,{hidden:!0,name:"name"},W.default.createElement(P,{size:Z.SIZE.xl})),W.default.createElement(Z.Item,{noStyle:!0,shouldUpdate:!0},({getFieldsError:d,getFieldValue:f})=>W.default.createElement(Ce.FooterActions,{offsetBottom:0},W.default.createElement(D,{size:D.SIZE.lg,type:D.TYPE.highlight,category:D.CATEGORY.fill,disabled:d().length||!f("symbol"),onClick:a},o("developer_mode_manage_btn_confirm"))))))};var Na=()=>J.default.createElement(J.default.Fragment,null,J.default.createElement(me.Switch,null,J.default.createElement(me.Route,{path:So,component:Oi,exact:!0}),J.default.createElement(me.Route,{path:yt,component:Zi,exact:!0}),J.default.createElement(me.Route,{path:xe,component:cm,exact:!0}),J.default.createElement(me.Route,{path:Do,component:um,exact:!0}),J.default.createElement(me.Route,{path:Lo,component:sa,exact:!0}),J.default.createElement(me.Route,{path:Po,component:ga,exact:!0}),J.default.createElement(me.Route,{path:Oo,component:Ea,exact:!0}),J.default.createElement(me.Route,{path:Bo,component:Hm,exact:!0}),J.default.createElement(me.Route,{path:Et,component:Xm,exact:!0}),J.default.createElement(me.Route,{path:Fo,component:ua,exact:!0})),J.default.createElement($i,null));var FN=()=>{let e=(0,ft.useHistory)(),o=(0,ln.useSelector)(r=>r.metamask.rpcModeCommonConf.netListLoading),{isRpcMode:t}=(0,ln.useSelector)(Ct);return(0,ut.useEffect)(()=>{t||e.replace(Y)},[t]),o?ut.default.createElement(Un,null):ut.default.createElement(ft.Switch,null,ut.default.createElement(ft.Route,{path:vt,component:Ci}),ut.default.createElement(ft.Route,{path:Bn,component:Na}))};export{FN as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=rpc-mode-3HRONTI7.js.map
