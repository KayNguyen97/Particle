import{a as Ce}from"./chunk-FLAY3RSM.js";import{d as se}from"./chunk-HR4SA7Z5.js";import"./chunk-X43FDTPV.js";import"./chunk-ZGEQVSMJ.js";import"./chunk-5OUYE6NE.js";import"./chunk-GQOO5OO7.js";import"./chunk-WIOZQWEG.js";import{a as le,h as pe,j as ue,l as xe,p as ye,q as _e}from"./chunk-DPVVGFWQ.js";import"./chunk-67PEY2GN.js";import"./chunk-JVE4G6JP.js";import{b as fe}from"./chunk-VNHZZRMI.js";import"./chunk-5TSD6WDE.js";import"./chunk-TPBDSGSX.js";import"./chunk-K24OHEUM.js";import"./chunk-MEW6SUUR.js";import{a as ie}from"./chunk-ZG26PGPF.js";import"./chunk-HE77KLJ4.js";import"./chunk-NOZM7AA3.js";import"./chunk-73YQ4YAD.js";import"./chunk-OEVJ7FDO.js";import"./chunk-ATUBFYS2.js";import{b as we,c as de,d as ge}from"./chunk-A5VEFKCJ.js";import"./chunk-YLO74Q7W.js";import"./chunk-D54UDGZS.js";import"./chunk-2SGW2RXR.js";import"./chunk-ZXEHJOAD.js";import"./chunk-U3YDJ2W7.js";import"./chunk-VCWU5FEX.js";import"./chunk-KZ77CGYD.js";import"./chunk-7CB4COOY.js";import"./chunk-RDZIVMHO.js";import{a as H}from"./chunk-E73QHIZ6.js";import{b as ne}from"./chunk-E2KMZQ6K.js";import{a as ae}from"./chunk-JXT6JCNO.js";import"./chunk-AHAXQBXQ.js";import"./chunk-DUZ4ULSN.js";import{a as lo}from"./chunk-PGPPXRV7.js";import"./chunk-54GDJWA6.js";import"./chunk-UGYRJNZG.js";import{a as me}from"./chunk-PLVZLQPX.js";import"./chunk-QNVM7T5C.js";import"./chunk-7T7NBYQH.js";import"./chunk-FEET7RP6.js";import"./chunk-MBJ4MFYL.js";import"./chunk-PCY622ND.js";import"./chunk-NS35PZCP.js";import"./chunk-XOD56IFT.js";import"./chunk-BBN3UGKM.js";import"./chunk-5DEIKYJL.js";import{j as re}from"./chunk-QMNAWRVI.js";import"./chunk-D6ZXZUY6.js";import"./chunk-QMF5LKVF.js";import"./chunk-VMACN7YR.js";import"./chunk-IQVVVGEA.js";import"./chunk-PGY6IZUS.js";import"./chunk-JLLMIXPD.js";import"./chunk-BTS2GOAC.js";import{g as te}from"./chunk-2HWABU7H.js";import"./chunk-APEQZGKB.js";import"./chunk-SI3RW2CS.js";import"./chunk-AX4SXHC6.js";import"./chunk-UCS37WXR.js";import"./chunk-DUHXKIBS.js";import"./chunk-QNEJI55N.js";import{d as Qo}from"./chunk-5W7SRP5N.js";import"./chunk-YVRXETFX.js";import"./chunk-GUWGENNL.js";import"./chunk-WYB2CUAN.js";import"./chunk-B2BOSVTW.js";import"./chunk-GUJXW3GJ.js";import"./chunk-VIS7KIVI.js";import"./chunk-F64VYES3.js";import"./chunk-DHX2X277.js";import{b as U}from"./chunk-67YO4IPY.js";import"./chunk-DLUAVD7X.js";import"./chunk-WRWXCAEZ.js";import"./chunk-OZ6XSJY6.js";import"./chunk-DMJQUOJT.js";import{d as ce}from"./chunk-MTMZQEHP.js";import"./chunk-NKTQMEXG.js";import{f as ee}from"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import"./chunk-4OTZHHYZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import"./chunk-S3ECGMEP.js";import"./chunk-PX7HII6H.js";import"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import"./chunk-TPEASXIF.js";import{a as fo}from"./chunk-JSAFBAMQ.js";import"./chunk-A336VZZF.js";import{b as M}from"./chunk-XEOGXIVD.js";import{a as so}from"./chunk-PCGRDRHF.js";import{p as y}from"./chunk-IU3TYIWS.js";import{b as vo,c as Ro,j as Vo,l as oe,o as eo}from"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import{p as wo,s as Mo}from"./chunk-X2LENRE7.js";import{a as io}from"./chunk-O4EDZSHP.js";import"./chunk-HU3KBV5G.js";import{b as Ho}from"./chunk-6ZPGW3YM.js";import"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import{d as O,f as yo}from"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import"./chunk-FLCN6MAI.js";import{a as Q,b as $}from"./chunk-YMZEQGAL.js";import"./chunk-7E3KY4EN.js";import"./chunk-JIRWXBHS.js";import"./chunk-3TVEFIPW.js";import{b as Xo,d as Jo,m as Oo}from"./chunk-UXFKODVN.js";import"./chunk-IMRS4RGO.js";import"./chunk-52GWQSZH.js";import{a as qo}from"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import{b as Ko,e as go,i as $o}from"./chunk-RMQJRDTF.js";import{c as h}from"./chunk-2YLR7R2N.js";import"./chunk-MVLY6WUP.js";import"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{C as B,D as nt,H as ko,Ha as _o,Pa as Yo,Ra as Zo,U as Do,da as Uo,jb as Go,ma as mo,q as oo,rb as mt,v as C}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{D as G,G as xo,a as Bo,o as no}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{V as P,c as Lo}from"./chunk-C2H3SRET.js";import{a as N}from"./chunk-V4YVDLI4.js";import"./chunk-UXBKFN2U.js";import"./chunk-HCW4K7TR.js";import"./chunk-Z4JATHZR.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import"./chunk-IYYFWVWL.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import"./chunk-RYNAOZ73.js";import"./chunk-PR4SLUV4.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f as W,m as p,o as u}from"./chunk-6V2G2Z5W.js";p();u();var T=W(N());B();var Je=W(qo());Yo();yo();p();u();var q=W(N()),Te=W(Lo());p();u();var g={"wax-create-account-confirm":"_wax-create-account-confirm_zw70j_1",waxCreateAccountConfirm:"_wax-create-account-confirm_zw70j_1","wax-create-account-confirm-form":"_wax-create-account-confirm-form_zw70j_4",waxCreateAccountConfirmForm:"_wax-create-account-confirm-form_zw70j_4","wax-create-account-confirm-form-select":"_wax-create-account-confirm-form-select_zw70j_7",waxCreateAccountConfirmFormSelect:"_wax-create-account-confirm-form-select_zw70j_7","wax-create-account-confirm-form-select-disabled":"_wax-create-account-confirm-form-select-disabled_zw70j_14",waxCreateAccountConfirmFormSelectDisabled:"_wax-create-account-confirm-form-select-disabled_zw70j_14","wax-create-account-confirm-form-select-free":"_wax-create-account-confirm-form-select-free_zw70j_18",waxCreateAccountConfirmFormSelectFree:"_wax-create-account-confirm-form-select-free_zw70j_18","wax-create-account-confirm-form-select-free-text":"_wax-create-account-confirm-form-select-free-text_zw70j_21",waxCreateAccountConfirmFormSelectFreeText:"_wax-create-account-confirm-form-select-free-text_zw70j_21","wax-create-account-confirm-form-select-free-amount":"_wax-create-account-confirm-form-select-free-amount_zw70j_25",waxCreateAccountConfirmFormSelectFreeAmount:"_wax-create-account-confirm-form-select-free-amount_zw70j_25","wax-create-account-confirm-form-select-space":"_wax-create-account-confirm-form-select-space_zw70j_29",waxCreateAccountConfirmFormSelectSpace:"_wax-create-account-confirm-form-select-space_zw70j_29","wax-create-account-confirm-form-payInfo":"_wax-create-account-confirm-form-payInfo_zw70j_32",waxCreateAccountConfirmFormPayInfo:"_wax-create-account-confirm-form-payInfo_zw70j_32","wax-create-account-confirm-form-payInfo-icon":"_wax-create-account-confirm-form-payInfo-icon_zw70j_37",waxCreateAccountConfirmFormPayInfoIcon:"_wax-create-account-confirm-form-payInfo-icon_zw70j_37","wax-create-account-confirm-form-payCrypto-dialog":"_wax-create-account-confirm-form-payCrypto-dialog_zw70j_41",waxCreateAccountConfirmFormPayCryptoDialog:"_wax-create-account-confirm-form-payCrypto-dialog_zw70j_41","wax-create-account-confirm-form-payCrypto-title":"_wax-create-account-confirm-form-payCrypto-title_zw70j_44",waxCreateAccountConfirmFormPayCryptoTitle:"_wax-create-account-confirm-form-payCrypto-title_zw70j_44","wax-create-account-confirm-form-payCrypto-list":"_wax-create-account-confirm-form-payCrypto-list_zw70j_50",waxCreateAccountConfirmFormPayCryptoList:"_wax-create-account-confirm-form-payCrypto-list_zw70j_50","wax-create-account-confirm-form-payWallet":"_wax-create-account-confirm-form-payWallet_zw70j_53",waxCreateAccountConfirmFormPayWallet:"_wax-create-account-confirm-form-payWallet_zw70j_53","wax-create-account-confirm-form-payWallet-navigator":"_wax-create-account-confirm-form-payWallet-navigator_zw70j_56",waxCreateAccountConfirmFormPayWalletNavigator:"_wax-create-account-confirm-form-payWallet-navigator_zw70j_56","wax-create-account-confirm-form-payWallet-wallet-item":"_wax-create-account-confirm-form-payWallet-wallet-item_zw70j_59",waxCreateAccountConfirmFormPayWalletWalletItem:"_wax-create-account-confirm-form-payWallet-wallet-item_zw70j_59","wax-create-account-confirm-form-payWallet-accordion":"_wax-create-account-confirm-form-payWallet-accordion_zw70j_62",waxCreateAccountConfirmFormPayWalletAccordion:"_wax-create-account-confirm-form-payWallet-accordion_zw70j_62","wax-create-account-confirm-form-payWallet-accordion-header":"_wax-create-account-confirm-form-payWallet-accordion-header_zw70j_68",waxCreateAccountConfirmFormPayWalletAccordionHeader:"_wax-create-account-confirm-form-payWallet-accordion-header_zw70j_68","wax-create-account-confirm-form-payWallet-accordion-content":"_wax-create-account-confirm-form-payWallet-accordion-content_zw70j_72",waxCreateAccountConfirmFormPayWalletAccordionContent:"_wax-create-account-confirm-form-payWallet-accordion-content_zw70j_72","wax-create-account-confirm-form-payWallet-accordion-icon":"_wax-create-account-confirm-form-payWallet-accordion-icon_zw70j_75",waxCreateAccountConfirmFormPayWalletAccordionIcon:"_wax-create-account-confirm-form-payWallet-accordion-icon_zw70j_75","wax-create-account-confirm-form-payWallet-account-item":"_wax-create-account-confirm-form-payWallet-account-item_zw70j_78",waxCreateAccountConfirmFormPayWalletAccountItem:"_wax-create-account-confirm-form-payWallet-account-item_zw70j_78","wax-create-account-confirm-form-payWallet-account-item-main":"_wax-create-account-confirm-form-payWallet-account-item-main_zw70j_82",waxCreateAccountConfirmFormPayWalletAccountItemMain:"_wax-create-account-confirm-form-payWallet-account-item-main_zw70j_82","wax-create-account-confirm-form-payWallet-tag":"_wax-create-account-confirm-form-payWallet-tag_zw70j_85",waxCreateAccountConfirmFormPayWalletTag:"_wax-create-account-confirm-form-payWallet-tag_zw70j_85","wax-create-account-confirm-form-payWallet-selected-icon":"_wax-create-account-confirm-form-payWallet-selected-icon_zw70j_94",waxCreateAccountConfirmFormPayWalletSelectedIcon:"_wax-create-account-confirm-form-payWallet-selected-icon_zw70j_94","wax-create-account-confirm-form-payWallet-footer":"_wax-create-account-confirm-form-payWallet-footer_zw70j_97",waxCreateAccountConfirmFormPayWalletFooter:"_wax-create-account-confirm-form-payWallet-footer_zw70j_97","wax-create-account-confirm-form-insufficient-error":"_wax-create-account-confirm-form-insufficient-error_zw70j_100",waxCreateAccountConfirmFormInsufficientError:"_wax-create-account-confirm-form-insufficient-error_zw70j_100","wax-create-account-confirm-form-fill-up":"_wax-create-account-confirm-form-fill-up_zw70j_103",waxCreateAccountConfirmFormFillUp:"_wax-create-account-confirm-form-fill-up_zw70j_103"};var it=({type:a,value:t,disabled:o,placeholder:s,onClick:e})=>q.default.createElement(h.FlexBox,{align:h.ALIGN.center,onClick:()=>{e==null||e(a)},className:(0,Te.default)(g["wax-create-account-confirm-form-select"],{[g["wax-create-account-confirm-form-select-disabled"]]:o})},q.default.createElement(h.Space,{className:g["wax-create-account-confirm-form-select-space"],space:0,direction:h.DIRECTION.vertical},!t&&s&&q.default.createElement(y.Text,{type:y.TYPE.secondary},s),!!t&&q.default.createElement(y.Text,null,(t==null?void 0:t.label)||t),!!(t!=null&&t.desc)&&q.default.createElement(y.Text,{size:y.SIZE.xs,type:y.TYPE.secondary},(t==null?void 0:t.desc)||t)),!o&&q.default.createElement(M,{icon:"okds-arrow-chevron-right-centered-md",size:M.SIZE.xs})),Co=q.default.memo(it);p();u();var v=W(N());B();var he=W(Lo());var st=({coinAmount:a,decimals:t,symbol:o})=>v.default.createElement(h.FlexBox,{align:h.ALIGN.center,className:(0,he.default)(g["wax-create-account-confirm-form-select"],g["wax-create-account-confirm-form-select-free"])},v.default.createElement(h.Space,{space:6,align:h.ALIGN.center,direction:h.DIRECTION.horizontal},v.default.createElement(y.Text,{className:g["wax-create-account-confirm-form-select-free-text"]},C("wallet_extension_mid_colored_free")),v.default.createElement(y.DisplayAmount,{className:g["wax-create-account-confirm-form-select-free-amount"],mode:y.CRYPTO,size:y.SIZE.sm,symbol:o,amount:a,decimals:t}))),Ae=v.default.memo(st);p();u();var K=W(N());B();var ft=({symbol:a,decimals:t,value:o={}})=>{let s=[{symbol:a,decimals:t,label:"extension_wallet_create_colored_cpu",value:o==null?void 0:o.cpuAmount},{symbol:a,decimals:t,label:"extension_wallet_create_colored_network",value:o==null?void 0:o.netAmount},{decimals:0,symbol:"bytes",label:"extension_wallet_create_colored_ram",value:o==null?void 0:o.ramAmount},{symbol:a,decimals:t,label:"extension_wallet_create_colored_price",value:o==null?void 0:o.sumAmount,icon:{icon:"okds-information-circle",tooltip:"extension_wallet_create_tooltip_20percent_transferfee"}}];return K.default.createElement(U,{space:20,className:g["wax-create-account-confirm-form-payInfo"],dataSource:s,renderItem:({icon:e,label:r,value:l,symbol:f,decimals:m})=>K.default.createElement(U.Line,{size:y.SIZE.sm,label:K.default.createElement(K.default.Fragment,null,C(r),!!e&&K.default.createElement(M,{className:g["wax-create-account-confirm-form-payInfo-icon"],icon:e==null?void 0:e.icon,size:M.SIZE.xs,tooltip:e!=null&&e.tooltip?C(e==null?void 0:e.tooltip):!1})),value:K.default.createElement(y.DisplayAmount,{symbol:f,decimals:m,mode:y.CRYPTO,size:y.SIZE.sm},l)})})},Fe=K.default.memo(ft);p();u();var Y=W(N());B();var lt=({name:a,value:t,visible:o,options:s,onChange:e,onClose:r})=>Y.default.createElement(no,{windowClass:g["wax-create-account-confirm-form-payCrypto-dialog"],alignBottom:!0,onClose:()=>{r==null||r(a)},visible:o},Y.default.createElement(y.Text,{className:g["wax-create-account-confirm-form-payCrypto-title"],strong:700,ellipsis:{tooltip:!0}},C("extension_wallet_popup_maintitle_select_crypto")),Y.default.createElement(U,{className:g["wax-create-account-confirm-form-payCrypto-list"],space:16,dataSource:s,renderItem:l=>{let{icon:f}=l;return Y.default.createElement(U.Card,{icon:{src:f},onClick:()=>{e==null||e({[a]:l}),r==null||r(a)},selected:(t==null?void 0:t.coinId)===l.coinId},Y.default.createElement(h.Space,{space:2,direction:h.DIRECTION.vertical},Y.default.createElement(y.Text,null,l.label),Y.default.createElement(y.Text,{type:y.TYPE.secondary,size:y.SIZE.sm},l.message)))}})),We=Y.default.memo(lt);p();u();var to=W(N());B();p();u();p();u();p();u();var Ie=W(N()),pt=({coinId:a,sendAmount:t,fromAddr:o,toAddr:s})=>{let[e,r]=(0,Ie.useState)({});return{props:{visible:!1,coinId:a,address:o,inputData:"",tokenAddress:s,value:t,onGasChange:r},ethereumGasInfo:e}},Pe=pt;p();u();var ut=({coinId:a,coinAmount:t,fromAddr:o,toAddr:s,ethereumGasInfo:e,btnProps:r,beforeClick:l,onClick:f})=>{let x={fetchParams:{coinId:a,from:o,to:s,amount:t,gasPrice:e.gasPrice},userGasInfo:e,baseCoinAmountUse:t};return{props:{beforeClick:l,dataForCheck:x,btnProps:r,onClick:f}}},Se=ut;p();u();var Ee=W(Ho());mt();yo();var xt=({coinId:a,walletId:t,sendAmount:o,fromAddr:s,toAddr:e,ethereumGasInfo:r,onPublish:l})=>{let f=(0,Ee.useDispatch)(),{coin:m}=H(a,!1),x=_=>{let{updateGasInfo:d}=_;return d?{...d,gasLimit:r.gasLimit,supportEip1559:r.supportEip1559,networkFee:r.networkFee}:{...r}},n=({updateData:_,finallyGasInfo:d})=>{var z;let{nonce:I}=_,A=(z=Go(m.localType))==null?void 0:z.realChainIdHex,F={from:s,gasLimit:$(d.gasLimit),nonce:$(I),chainId:A};return d.supportEip1559?(F.maxFeePerGas=$(d.maxFeePerGas),F.maxPriorityFeePerGas=$(d.maxPriorityFeePerGas),F.type=Oo.FEE_MARKET):F.gasPrice=$(d.gasPrice),F.value=$(o),F.to=e,Mo(F)},i=({txParams:_,finallyGasInfo:d})=>{let I=Q(_.value),A=Q(_.gasLimit),F=Q(r.supportEip1559?_.maxFeePerGas:_.gasPrice),b={..._,value:I,from:s,to:e,gas:A,gasPrice:F,priorityFee:Q(r.supportEip1559?_.maxPriorityFeePerGas:0),nonce:Q(_.nonce),repeatTxType:Jo.CONFIRMING,oldTxHash:""};return{coinId:m.coinId,coinAmount:o,fromAdr:s,toAdr:e,serviceCharge:d.networkFee,extJson:JSON.stringify(b),txSource:$o.NORMAL,inputData:_.data?_.data:""}};return async _=>{let d=x(_),I=n({updateData:_,finallyGasInfo:d}),A={...I,walletId:t},F=i({txParams:I,finallyGasInfo:d});await f(Qo({txParams:A,walletId:t}));let b=await O().signAndGetEthereumPublishParams({signParams:A,from:I.from,baseChain:Zo,publishParams:F});typeof l=="function"&&await l(b)}},be=xt;var yt=({toAddr:a,coinId:t,walletId:o,fromAddr:s,sendAmount:e,btnProps:r,onBeforeClick:l=()=>{},onPublishTrascation:f=()=>{},onClickWrap:m=()=>{}})=>{let{props:x,ethereumGasInfo:n}=Pe({coinId:t,toAddr:a,fromAddr:s,sendAmount:e}),i=n==null?void 0:n.networkFee,w=be({coinId:t,walletId:o,sendAmount:e,fromAddr:s,toAddr:a,ethereumGasInfo:n,onPublish:f}),{props:_}=Se({toAddr:a,coinId:t,fromAddr:s,ethereumGasInfo:n,coinAmount:e,btnProps:r,beforeClick:()=>l==null?void 0:l(i),onClick:(...d)=>{m(async()=>{await w(...d)})}});return to.default.createElement(to.default.Fragment,null,to.default.createElement(se,{...x}),to.default.createElement(Ce,{..._},C("wallet_extension_btn_general_confirm")))},ze=yt;p();u();B();var Ne=W(N());var _t=({fromAddr:a,coinId:t,toAddr:o,disabled:s,loading:e,walletId:r,walletType:l,sendAmount:f,hideLoading:m,onBeforeClick:x=()=>{},onPublishTrascation:n=()=>{},onClickWrap:i=()=>{}})=>{let{coin:w}=H(t,!1),_=fe({coinId:t,address:a},{pollingInterval:20*1e3}),d=_==null?void 0:_.normal,[,I]=ue({coinId:t,walletId:r,address:a},{refreshDeps:[r,a]}),[,A]=ye({coinId:t,toAddr:o,walletId:r,fromAddr:a,satBytes:d,coinAmount:f,canTransferAmount:I}),F=_e({coinId:t,toAddr:o,walletId:r,fromAddr:a,satBytes:d,networkFee:A,coinAmount:f,localType:w==null?void 0:w.localType,dustSize:_==null?void 0:_.minOutput}),b=pe({coinId:t,walletId:r,address:a,utxoType:le.TRANSFER}),z=xe({coinId:t,txType:Xo.TRANS_OUT,address:a}),j=async()=>{i(async()=>{x&&await x(A,I);let c=await b(f,A);await z(c,()=>{m==null||m()});let k=await F({utxoList:c}),Z=await lo(w.localType,k),ro={coinId:t,txHash:Z,signedTx:k,walletId:r,walletType:l,toAdr:o,serviceCharge:A,fromAdr:a,coinAmount:f};n==null||n(ro)})};return Ne.default.createElement(P,{loading:e,disabled:s,size:P.SIZE.lg,category:P.CATEGORY.fill,type:P.TYPE.highlight,onClick:j},C("wallet_extension_btn_general_confirm"))},je=_t;p();u();var Le=W(N());B();yo();var wt=({fromAddr:a,coinId:t,toAddr:o,disabled:s,loading:e,walletId:r,walletType:l,sendAmount:f,onBeforeClick:m=()=>{},onPublishTrascation:x=()=>{},onClickWrap:n=()=>{}})=>{let{coin:i}=H(t,!1),w=async()=>{n(async()=>{typeof m=="function"&&m("0");let _=await ce({coinId:t,address:a},{fromAddr:a,toAddr:o}),{info:d}=_||{},{chainid:I,compression:A,refBlockNumber:F,refBlockId:b,refBlockTimestamp:z,expireSeconds:j}=d,c={type:0,from:a,to:o,amount:f,memo:"",common:{chainId:I,compression:A,refBlockNumber:F,refBlockId:b,refBlockTimestamp:z,expireSeconds:j}},k=await O().signTransaction(c,a,i.localType),Z=await lo(i.localType,k);typeof x=="function"&&await x({coinId:t,txHash:Z,signedTx:k,walletId:r,walletType:l,toAdr:o,serviceCharge:"0",fromAdr:a,coinAmount:f})})};return Le.default.createElement(P,{loading:e,disabled:s,size:P.SIZE.lg,category:P.CATEGORY.fill,type:P.TYPE.highlight,onClick:w},C("wallet_extension_btn_general_confirm"))},Be=wt;p();u();var ke=W(N());B();var De=W(qo());var dt=600001,gt=({loading:a,disabled:t,fromPage:o,retryCreateAccount:s,onPublishTrascation:e=()=>{}})=>{let r=(0,De.useHistory)(),l=async()=>{let f=await(e==null?void 0:e());if(Number(f==null?void 0:f.code)===dt){let m=no.warn({alignBottom:!1,title:C("wallet_extension_wax_modaltitle_account_unavailable"),text:C("wallet_extension_wax_modaldesc_free_account_unsupported"),cancelText:C("wallet_extension_btn_general_cancel"),confirmText:C("wallet_extension_mid_btn_retry"),onCancel:()=>{m.destroy(),r.push(o||io)},onConfirm:()=>{m.destroy(),s==null||s()}})}};return ke.default.createElement(P,{loading:a,disabled:t,size:P.SIZE.lg,category:P.CATEGORY.fill,type:P.TYPE.highlight,onClick:l},C("wallet_extension_btn_general_confirm"))},Ue=gt;p();u();var E=W(N());B();var Ct=({name:a,value:t,visible:o,options:s=[],onChange:e,onClose:r})=>{let[l,f]=(0,E.useState)(t);return(0,E.useEffect)(()=>{f(t)},[t]),o?E.default.createElement(h.Portal,{component:h.Container,className:g["wax-create-account-confirm-form-payWallet"]},E.default.createElement(fo,{className:g["wax-create-account-confirm-form-payWallet-navigator"],title:C("extension_wallet_header_title_select_wallet"),closeable:!1,onBack:()=>{r==null||r(a)}}),E.default.createElement(U,{className:g["wax-create-account-confirm-form-payWallet-wallet-item"],space:12,dataSource:s||[],renderItem:({keyringName:m,keyringColor:x,walletIdentities:n})=>E.default.createElement(Bo,{defaultExpanded:!0,iconClassName:g["wax-create-account-confirm-form-payWallet-accordion-icon"],title:E.default.createElement(y.Text,{strong:!0,size:y.SIZE.lg,style:{color:x}},m),className:g["wax-create-account-confirm-form-payWallet-accordion"],headerClassName:g["wax-create-account-confirm-form-payWallet-accordion-header"],contentClassName:g["wax-create-account-confirm-form-payWallet-accordion-content"]},E.default.createElement(U,{dataSource:n,renderItem:i=>E.default.createElement(h.FlexBox,{className:g["wax-create-account-confirm-form-payWallet-account-item"],align:h.ALIGN.center,onClick:()=>{f(i)}},E.default.createElement(h.Space,{className:g["wax-create-account-confirm-form-payWallet-account-item-main"],space:0,direction:h.DIRECTION.vertical},E.default.createElement(h.Space,{space:8,align:h.ALIGN.center},E.default.createElement(y.Text,{size:y.SIZE.md},i==null?void 0:i.walletName),!!i.addressType&&E.default.createElement(h.Box,{className:g["wax-create-account-confirm-form-payWallet-tag"]},C(Ko[i.addressType]))),E.default.createElement(y.DisplayAmount,{mode:y.CRYPTO,decimals:i==null?void 0:i.decimals,symbol:i==null?void 0:i.symbol,size:y.SIZE.xs,type:y.TYPE.secondary},i==null?void 0:i.coinAmountInt)),(l==null?void 0:l.address)===(i==null?void 0:i.address)&&E.default.createElement(M,{className:g["wax-create-account-confirm-form-payWallet-selected-icon"],icon:"okds-success-circle-fill"}))}))}),E.default.createElement(so.FooterActions,{className:g["wax-create-account-confirm-form-payWallet-footer"]},E.default.createElement(P,{size:P.SIZE.lg,category:P.CATEGORY.fill,type:P.TYPE.highlight,onClick:()=>{r==null||r(a),e==null||e({[a]:l})}},C("wallet_extension_btn_general_confirm")))):null},Ye=Ct;p();u();B();var Ze=W(Ho());Yo();var Tt=()=>{let a=ne(),t=(0,Ze.useSelector)(re),o=ee({hasBackup:!0});return vo(async(s,e)=>{let r=await a(s),l=r==null?void 0:r.localType;return!s||!l?null:(o==null?void 0:o.map(m=>{let{walletIdentities:x}=m;return{...m,walletIdentities:x.map(n=>{let{coins:i=[]}=t[n==null?void 0:n.walletId]||{};return{...n,coins:i.filter(w=>(w==null?void 0:w.coinId)===s&&oo.gte(w.coinAmountInt,e))}}).filter(({coins:n})=>n==null?void 0:n.length)}}).filter(({walletIdentities:m})=>m==null?void 0:m.some(({coins:x})=>x==null?void 0:x.length))).map(m=>{let x=m==null?void 0:m.walletIdentities;return s===mo?x=x==null?void 0:x.reduce((n,{coins:i,walletName:w,addressType:_,...d})=>[...n,...i.map(({coinAmountInt:I,addressType:A,...F})=>{var z,j;let b=(j=(z=_==null?void 0:_[ko])==null?void 0:z.find(c=>(c==null?void 0:c.addressType)===go[A]))==null?void 0:j.address;return{...d,...F,walletName:w,coinAmountInt:I,label:`${m==null?void 0:m.keyringName} - ${w}`,desc:wo(b),addressType:go[A],address:b}})],[]):x=x.map(({account:n,walletName:i,coins:w,..._})=>{let d=n==null?void 0:n[l];return{...w[0],..._,address:d,walletName:i,label:`${m==null?void 0:m.keyringName} - ${i}`,desc:wo(d)}}),{...m,walletIdentities:x}})},[t,o])},Ge=Tt;p();u();var R=W(N()),ht=()=>{let a=G.useForm(),[t,o]=(0,R.useState)({}),[s,e]=(0,R.useState)({payCrypto:!1,payWallet:!1}),r=(0,R.useCallback)(f=>{e(m=>({...m,[f]:!m[f]}))},[]),l=(0,R.useCallback)(f=>{a.setFieldsValue(f),o((m={})=>({...m,...f}))},[]);return{form:a,visible:s,payValues:t,onPayValuesChange:l,onToggleSelectPanel:r}},Me=ht;p();u();var V=W(N()),At=({form:a,payInfo:t,payValues:o,isFreeCreate:s,walletOptions:e,payCryptoOptions:r,onPayValuesChange:l,setPayWalletError:f})=>{let m=(0,V.useRef)({payCrypto:!1,payWallet:!1}),x=n=>{l==null||l(n),a.setFieldsValue(n)};(0,V.useEffect)(()=>{x({payInfo:t})},[t]),(0,V.useEffect)(()=>{if(!m.current.payCrypto&&(r==null?void 0:r.length)){let n=r.find(({recommend:i})=>i);x({payCrypto:n}),m.current={...m.current,payCrypto:!0}}if(m.current.payCrypto&&(r==null?void 0:r.length)){let n=r.find(({coinId:i})=>{var w;return i===((w=o==null?void 0:o.payCrypto)==null?void 0:w.coinId)});n&&x({payCrypto:n})}},[r]),(0,V.useEffect)(()=>{if(!s){if(!m.current.payWallet&&(e==null?void 0:e.length)){let[{walletIdentities:[n]}]=e;x({payWallet:n}),m.current={...m.current,payWallet:!0}}if(m.current.payWallet){e!=null&&e.length||(x({payWallet:null}),f==null||f(!1));let{coinId:n}=(o==null?void 0:o.payCrypto)||{},{coinId:i}=(o==null?void 0:o.payWallet)||{};if((e==null?void 0:e.length)&&n!==i){let[{walletIdentities:[w]}]=e;x({payWallet:w}),f==null||f(!1)}}}},[s,e])},He=At;p();u();var qe=W(nt());var X=W(N());var Ft=60*1e3,Wt=a=>{let[t,o]=(0,X.useState)({}),[s,{set:e}]=eo(!1),[r,{set:l}]=eo(),[f,m]=(0,X.useState)([]),x=ae(),n=(0,X.useMemo)(()=>(0,qe.isEmpty)(x)?[]:f.map(d=>{let{coinId:I,coinAmount:A}=d,F=x[I]||{},{image:b,symbol:z,decimals:j}=F;return{...F,...d,icon:b,label:X.default.createElement(y.DisplayAmount,{noStyle:!0,symbol:z,decimals:j,mode:y.CRYPTO},A)}}),[x,f]),i=async()=>{let{eosMarket:d,coins:I,freeAccount:A}=await we({coinId:a});o(d),m(I),l(A)},{runAsync:w,refreshAsync:_}=oe(i,{manual:!0,pollingInterval:Ft,pollingWhenHidden:!1,pollingErrorRetryCount:3});return Vo(()=>{(async()=>{try{e(!0),await w()}catch(d){console.log(d)}finally{e(!1)}})()}),[s,r,t,n,_]},Ke=Wt;p();u();B();var $e=W(N()),It=({sendAmount:a,availableBalance:t="0",onCheckCallback:o})=>(0,$e.useCallback)((s="0",e)=>oo.gt(oo.add(a,s),e!==void 0?e:t)?o==null?void 0:o(!0):o==null?void 0:o(!1),[a,t]),Xe=It;var Pt=()=>{var Io,Po,So,Eo,bo,zo,No;let a=me(),t=(0,Je.useHistory)(),[o,s]=(0,T.useState)(null),e=Number(a.get("coinId"))||_o,{coin:r}=H(e,!1),l=te(),[f,m]=(0,T.useState)(!1),[x,n,i,w,_]=Ke(e),[d,I]=(0,T.useState)(!1),[A,{setTrue:F,setFalse:b}]=eo(!1),{form:z,visible:j,payValues:c,onPayValuesChange:k,onToggleSelectPanel:Z}=Me({payInfo:i,payCryptoOptions:w}),ro=Ge((Io=c==null?void 0:c.payCrypto)==null?void 0:Io.coinId,(Po=c==null?void 0:c.payCrypto)==null?void 0:Po.coinAmount);Ro(()=>{(async()=>{var L,D,J;if(!n&&((L=c==null?void 0:c.payCrypto)==null?void 0:L.coinId)){let uo=await ro((D=c==null?void 0:c.payCrypto)==null?void 0:D.coinId,(J=c==null?void 0:c.payCrypto)==null?void 0:J.coinAmount);s(uo)}})()},[n,(So=c==null?void 0:c.payCrypto)==null?void 0:So.coinId,(Eo=c==null?void 0:c.payCrypto)==null?void 0:Eo.coinAmount]),He({form:z,payInfo:i,payValues:c,isFreeCreate:n,walletOptions:o,payCryptoOptions:w,setPayWalletError:m,onPayValuesChange:k});let{coinId:co,coinAmount:To,toAddress:Oe}=(c==null?void 0:c.payCrypto)||{},{walletId:Qe,serverWalletType:ho,address:Ao,coinAmountInt:Fo}=(c==null?void 0:c.payWallet)||{},ve=async L=>{try{F(),await L()}catch(D){let J=(D==null?void 0:D.msg)||C("extension_wallet_transaction_notif_waxaccount_failed");xo.error({title:J})}finally{b()}},Re=Xe({sendAmount:To,availableBalance:Fo,onCheckCallback:L=>(m(L),L?Promise.reject():Promise.resolve())}),Wo=async L=>{let D=await O().getPublicKeyByWalletId(l,Do),{coinAmount:J,symbol:uo}=(c==null?void 0:c.payCrypto)||{},{ramBytes:ot,cpuAmount:et,ramAmount:tt,netAmount:rt,sumAmount:ct}=(c==null?void 0:c.payInfo)||{},at={transaction:L,order:{payCoin:uo,ramBytes:ot,payAmount:J,eosAmount:ct,cpuAmount:et,ramAmount:tt,netAmount:rt,ownerKey:D,activeKey:D,payAddress:Ao,account:a.get("account"),coinId:r==null?void 0:r.coinId,chainId:r==null?void 0:r.chainId}},jo=await(n?ge:de)(at,l);return Number(jo.code)===0&&(xo.success({title:C("extension_wallet_transaction_notif_waxaccount_created"),desc:a.get("account")}),t.push(a.get("from")||io)),jo},po={coinId:co,toAddr:Oe,walletId:Qe,fromAddr:Ao,sendAmount:To,onBeforeClick:Re,onPublishTrascation:Wo,onClickWrap:ve},ao=!n&&(!(c!=null&&c.payCrypto)||!(c!=null&&c.payWallet)),Ve=(0,T.useMemo)(()=>n?w.find(L=>(L==null?void 0:L.coinId)===e)||(w==null?void 0:w[0]):{},[n,e,w]);return T.default.createElement(h.Container,{loading:x,className:g["wax-create-account-confirm"]},T.default.createElement(fo,{closeable:!1,title:C("extension_wallet_header_title_waxaccount_opening")}),T.default.createElement(G,{form:z,className:g["wax-create-account-confirm-form"]},T.default.createElement(G.Item,{name:"payCrypto",label:C("extension_wallet_create_text_payment_crypto")},n?T.default.createElement(Ae,{...Ve}):T.default.createElement(Co,{type:"payCrypto",onClick:Z})),!n&&T.default.createElement(G.Item,{name:"payWallet",extra:!!f&&T.default.createElement(h.Space,{space:7},T.default.createElement(y.Text,{className:g["wax-create-account-confirm-form-insufficient-error"],size:y.SIZE.sm},C("extension_wallet_create_errortip_insufficient_balance")),T.default.createElement(y.Text,{className:g["wax-create-account-confirm-form-fill-up"],size:y.SIZE.sm,onClick:()=>{I(!0)}},C("extension_wallet_create_textbtn_fill_up",{crypto:(bo=c==null?void 0:c.payCrypto)==null?void 0:bo.symbol}))),label:C("extension_wallet_create_text_payment_wallet")},T.default.createElement(Co,{type:"payWallet",onClick:Z,disabled:!(o!=null&&o.length),placeholder:C("extension_wallet_create_input_no_available_wallets")})),T.default.createElement(G.Item,{name:"payInfo",label:C("extension_wallet_create_text_pay_toopen")},T.default.createElement(Fe,{symbol:r==null?void 0:r.symbol,decimals:r.decimals})),T.default.createElement(G.Item,null,T.default.createElement(so.FooterActions,{placeholder:!1},!n&&co===mo&&T.default.createElement(je,{loading:A,disabled:ao,walletType:ho,hideLoading:b,availableAmount:Fo,...po}),!n&&co===Uo&&T.default.createElement(ze,{btnProps:{loading:A,disabled:ao},...po}),!n&&co===_o&&T.default.createElement(Be,{loading:A,disabled:ao,walletType:ho,...po}),n&&T.default.createElement(Ue,{loading:A,disabled:ao,fromPage:a.get("from"),retryCreateAccount:_,onPublishTrascation:Wo})))),T.default.createElement(We,{name:"payCrypto",value:c.payCrypto,visible:j.payCrypto,options:w,onChange:k,onClose:Z}),T.default.createElement(Ye,{name:"payWallet",value:c==null?void 0:c.payWallet,visible:j==null?void 0:j.payWallet,options:o,onClose:Z,onChange:k}),T.default.createElement(ie,{visible:d,closeCallback:()=>I(!1),address:(zo=c==null?void 0:c.payWallet)==null?void 0:zo.address,coinId:(No=c==null?void 0:c.payCrypto)==null?void 0:No.coinId,receiveOnly:!0}))},Da=T.default.memo(Pt);export{Da as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ConfirmPay-AAZ6ZWWN.js.map
