import{a as Xo,b as Ro}from"./chunk-YSTMAX2G.js";import{a as ot,b as et,d as nt,e as rt}from"./chunk-6SQMYO7V.js";import{n as J,p as Jo,r as Ko,s as Qo}from"./chunk-G37W3QVU.js";import"./chunk-NNLKCRJB.js";import{a as tt}from"./chunk-WGSAQS5P.js";import"./chunk-I4A7V6SN.js";import"./chunk-KQ6VNFYE.js";import"./chunk-KOSLQKT7.js";import{a as $o}from"./chunk-IRW6W6VZ.js";import{a as qo}from"./chunk-WCMEUGVM.js";import"./chunk-4AOAXYPU.js";import"./chunk-P34A6LS4.js";import"./chunk-OCVOVZC6.js";import{h as U,j as Vo}from"./chunk-VEYNKMNX.js";import{a as Uo}from"./chunk-5RXQBXEZ.js";import{a as jo,j as Zo}from"./chunk-HHT2ACSL.js";import"./chunk-IB4K3FN6.js";import{a as Ho}from"./chunk-NLMSL6KB.js";import{a as Go,b as Wo}from"./chunk-HX3FTBPA.js";import{a as Yo}from"./chunk-NC54FPSJ.js";import"./chunk-VNHZZRMI.js";import"./chunk-5TSD6WDE.js";import"./chunk-TPBDSGSX.js";import{a as Oo}from"./chunk-I2KPNTIF.js";import"./chunk-MEW6SUUR.js";import{b as Fo}from"./chunk-D6O2GLPR.js";import{c as S}from"./chunk-2CPFAAZ7.js";import"./chunk-ZG26PGPF.js";import"./chunk-HE77KLJ4.js";import"./chunk-NOZM7AA3.js";import{c as Mo}from"./chunk-73YQ4YAD.js";import"./chunk-OEVJ7FDO.js";import"./chunk-ATUBFYS2.js";import"./chunk-2N2ADYFP.js";import"./chunk-YLO74Q7W.js";import{a as Po}from"./chunk-D54UDGZS.js";import"./chunk-2SGW2RXR.js";import"./chunk-ZXEHJOAD.js";import"./chunk-U3YDJ2W7.js";import"./chunk-VCWU5FEX.js";import"./chunk-KZ77CGYD.js";import"./chunk-7CB4COOY.js";import"./chunk-RDZIVMHO.js";import"./chunk-E73QHIZ6.js";import"./chunk-E2KMZQ6K.js";import"./chunk-JXT6JCNO.js";import"./chunk-AHAXQBXQ.js";import"./chunk-DUZ4ULSN.js";import"./chunk-PGPPXRV7.js";import"./chunk-54GDJWA6.js";import"./chunk-UGYRJNZG.js";import"./chunk-PLVZLQPX.js";import"./chunk-QNVM7T5C.js";import"./chunk-7T7NBYQH.js";import{n as Lo}from"./chunk-FEET7RP6.js";import"./chunk-MBJ4MFYL.js";import"./chunk-PCY622ND.js";import"./chunk-NS35PZCP.js";import"./chunk-XOD56IFT.js";import"./chunk-BBN3UGKM.js";import"./chunk-5DEIKYJL.js";import"./chunk-QMNAWRVI.js";import"./chunk-D6ZXZUY6.js";import"./chunk-QMF5LKVF.js";import"./chunk-VMACN7YR.js";import"./chunk-IQVVVGEA.js";import"./chunk-JLLMIXPD.js";import"./chunk-5OUCZQSW.js";import"./chunk-YIKS2AYL.js";import"./chunk-EXUJ54CX.js";import"./chunk-D5VZXMFP.js";import"./chunk-XAMN4IIH.js";import"./chunk-BTS2GOAC.js";import{d as no,e as z}from"./chunk-2HWABU7H.js";import"./chunk-APEQZGKB.js";import"./chunk-AX4SXHC6.js";import"./chunk-UCS37WXR.js";import"./chunk-DUHXKIBS.js";import{b as bo}from"./chunk-QNEJI55N.js";import"./chunk-5W7SRP5N.js";import{a as M,b as Eo}from"./chunk-YVRXETFX.js";import{c as zo,d as $,g as Do}from"./chunk-GUWGENNL.js";import"./chunk-WYB2CUAN.js";import"./chunk-B2BOSVTW.js";import"./chunk-GUJXW3GJ.js";import"./chunk-VIS7KIVI.js";import"./chunk-F64VYES3.js";import"./chunk-DHX2X277.js";import"./chunk-67YO4IPY.js";import"./chunk-DLUAVD7X.js";import"./chunk-WRWXCAEZ.js";import"./chunk-OZ6XSJY6.js";import{f as Bo}from"./chunk-DMJQUOJT.js";import"./chunk-MTMZQEHP.js";import"./chunk-NKTQMEXG.js";import"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import"./chunk-4OTZHHYZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import{H as Co}from"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import"./chunk-S3ECGMEP.js";import"./chunk-PX7HII6H.js";import{n as yo}from"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import"./chunk-TPEASXIF.js";import{a as No}from"./chunk-JSAFBAMQ.js";import"./chunk-A336VZZF.js";import"./chunk-XEOGXIVD.js";import{a as q}from"./chunk-PCGRDRHF.js";import{p as H}from"./chunk-IU3TYIWS.js";import{b as Z,o as V}from"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import"./chunk-X2LENRE7.js";import{a as So,h as Io}from"./chunk-O4EDZSHP.js";import"./chunk-HU3KBV5G.js";import{b as W}from"./chunk-6ZPGW3YM.js";import{k as eo,o as Dt}from"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import"./chunk-FLCN6MAI.js";import{b as wo}from"./chunk-YMZEQGAL.js";import"./chunk-7E3KY4EN.js";import{e as vo,h as F}from"./chunk-JIRWXBHS.js";import"./chunk-3TVEFIPW.js";import{b as j}from"./chunk-UXFKODVN.js";import"./chunk-IMRS4RGO.js";import"./chunk-52GWQSZH.js";import{a as zt}from"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import"./chunk-RMQJRDTF.js";import{c as L}from"./chunk-2YLR7R2N.js";import"./chunk-MVLY6WUP.js";import"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{C as B,Cb as ko,D as Y,F as fo,Pa as Bt,Vb as xo,ic as Ao,nc as Lt,q as so,sb as _o,ub as ho,v as a,vb as go,xb as To,zb as to}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{F as co,H as uo,b as O,o as lo,q as oo,r as po}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{J as mo,V as w,c as Nt}from"./chunk-C2H3SRET.js";import{a as b}from"./chunk-V4YVDLI4.js";import"./chunk-UXBKFN2U.js";import"./chunk-HCW4K7TR.js";import"./chunk-Z4JATHZR.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import"./chunk-IYYFWVWL.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import"./chunk-RYNAOZ73.js";import"./chunk-PR4SLUV4.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f as d,m as e,o as n}from"./chunk-6V2G2Z5W.js";e();n();var I=d(b()),X=d(zt()),R=d(W());var ao=d(Y());e();n();var Q=d(b());e();n();var l=d(b());B();e();n();var ro=d(b());var it=d(W());B();var Mt=({transaction:o,actions:t,modifiedDataError:c,walletInfo:i,unapprovedTx:m})=>{let r=(0,it.useSelector)(Bo),{chain:p,nonce:u,fee:s,loading:T}=o,{sign:f,cancel:_}=t,C=(0,ro.useCallback)(async()=>{await _()},[_]),A={actionType:S.ACTION_TYPE.CANCEL,onClick:C},h=async()=>{try{if(!await Po({walletId:i==null?void 0:i.walletId,callback:_}))return;yo({chain_id:parseInt(p.chainId,16),wallet_address:m.from})}catch(G){console.error(G)}f(i==null?void 0:i.walletId)},y=(0,ro.useCallback)(()=>{r.faucetUrl&&globalThis.open(r.faucetUrl)},[r.faucetUrl]),g={disabled:s.loading||s.lackCoin&&!r.faucetUrl||u.pending||T.sign||T.token||c,actionType:S.ACTION_TYPE.CONFIRM,onClick:h};return s.lackCoin&&r.faucetUrl&&(g.actionType=S.ACTION_TYPE.FILL_UP,g.onClick=y,g.btnText=a("wallet_extension_transfer_btn_via_faucet")),[A,g]},at=Mt;e();n();B();var st=d(Y());var Pt=({modifiedDataError:o,isSufficientBalance:t,isRevokeTx:c,transaction:i,isOffline:m})=>{let{auth:r,chain:p}=i,u=U(r.name||F),s=U(r.symbol||F),T=()=>o?{}:null,f=()=>t?{type:O.TYPE.warn,message:a("wallet_extension_popup_insufficient_network_fee",{token:p.symbol})}:null,_=()=>c?{type:O.TYPE.info,message:a("extension_revoke_approval_alert_evoke_authorization",{contract:u,asset:s})}:null,C=()=>$(r.customApproveAmount)?{type:O.TYPE.warn,message:a("wallet_extension_popup_unlimited_transfer",{contract:u,asset:s})}:(0,st.gt)(r.customApproveAmount,0)?{type:O.TYPE.warn,message:a("extension_approve_alert_authorized_tips",{contract:u,asset:s})}:null;if(m)return null;let A=[T,f,_,C];for(let h=0;h<A.length;h++){let y=A[h],E=y();if(E)return E}return null},mt=Pt;e();n();var D=d(b());var io=d(Nt());xo();var lt=d(Y());B();e();n();var P={RpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",rpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",content:"_content_1jypd_1",inner:"_inner_1jypd_5","rpc-evm-send-edit-nonce__warning-input":"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",rpcEvmSendEditNonceWarningInput:"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",warningText:"_warningText_1jypd_9",icon:"_icon_1jypd_13"};function Ot({nonce:o,suggestedNonce:t,setNonce:c}){let i=r=>{c(r)},m;return o&&(to(o,t)?m=a("developer_mode_send_tooltip_higher",{num:t}):To(o,t)&&(m=a("developer_mode_send_tooltip_lower",{num:t}))),D.default.createElement($o.Row,{className:P.RpcEvmSendEditNonce,noMargin:!0,noPadding:!0},D.default.createElement("div",{className:P.content},D.default.createElement("div",{className:P.inner},D.default.createElement(oo.Number,{innerClassName:(0,io.default)({"rpc-evm-send-edit-nonce__warning-input":!!m}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,title:a("developer_mode_send_maintitle_nonce"),placeholder:`${(0,lt.isNil)(t)?"":so.thousandFormat(t)}`,size:oo.SIZE.xl,value:o,onAdd:()=>!o&&t!==null?(i(ho(t,1)),!1):!0,onSub:()=>!o&&to(t,0)?(i(go(t-1)),!1):!0,onChange:i})),m&&D.default.createElement("div",{className:P.warningText},D.default.createElement(mo,{className:(0,io.default)(P.icon,"okx-wallet-plugin-warning-circle")}),m)))}var pt=Ot;e();n();var v=d(b());B();Lt();xo();e();n();var x=d(b());B();e();n();var N={AuthorizationToken:"_AuthorizationToken_g68hx_1",authorizationToken:"_AuthorizationToken_g68hx_1",title:"_title_g68hx_1",content:"_content_g68hx_4",unlimited_text:"_unlimited_text_g68hx_13",unlimitedText:"_unlimited_text_g68hx_13",balance:"_balance_g68hx_17",amount:"_amount_g68hx_22",checkAll:"_checkAll_g68hx_26",checkAll__text:"_checkAll__text_g68hx_30",checkAllText:"_checkAll__text_g68hx_30",footerActions:"_footerActions_g68hx_33"};var Ft=({onClose:o,onConfirm:t,approveToken:c})=>{let{symbol:i,decimals:m,customApproveAmount:r}=c,p=U(i,10),u=$(r),[s,T]=(0,x.useState)(!1),[f,_]=(0,x.useState)(u?"0":r),C=g=>{_(g)},[A,{set:h}]=V(!1),y=(0,x.useMemo)(()=>Vo(s,f),[s,f]),E=Z(async()=>{try{h(!0);let g=s?zo:f;await(t==null?void 0:t(g)),o==null||o()}catch(g){console.log(g)}finally{h(!1)}});return x.default.createElement(L.FlexBox,{className:N.AuthorizationToken,direction:L.DIRECTION.vertical,align:L.ALIGN.center},x.default.createElement(H.Text,{strong:700,className:N.title},a("wallet_contract_interaction_approval_permission_authorized_amount")),x.default.createElement(L.Box,{className:N.content},s?x.default.createElement(H.Text,{strong:500,size:H.SIZE.xl,className:N.unlimited_text},a("wallet_extension_transfer_title_unlimited_amount",{token:p})):x.default.createElement(Mo,{symbol:p,autoSize:Do,placeholder:"0",decimals:m||0,value:f,onChange:C,style:{fontWeight:500,height:"48px"}})),x.default.createElement(po,{className:N.checkAll,checked:s,textClass:N.checkAll__text,onChange:({target:{checked:g}})=>{T(g)}},a("wallet_extension_transfer_dialog_checkbox_set_to_unlimited")),x.default.createElement(q.FooterActions,{affixStyle:{position:"none"},placeholder:!1,className:N.footerActions},x.default.createElement(w,{loading:A,disabled:y,category:w.CATEGORY.fill,type:w.TYPE.primary,size:w.SIZE.lg,onClick:E},a("commonall_filter_btn_save"))))},ct=Ft;e();n();var K={edit_btn:"_edit_btn_rw6lw_1",editBtn:"_edit_btn_rw6lw_1",authorization_token_dialog:"_authorization_token_dialog_rw6lw_5",authorizationTokenDialog:"_authorization_token_dialog_rw6lw_5",authorization_token_dialog__content:"_authorization_token_dialog__content_rw6lw_5",authorizationTokenDialogContent:"_authorization_token_dialog__content_rw6lw_5"};var Ut=({onUpdateAuthAmount:o,dappInfo:t,isOffline:c,approveToken:i})=>{let{isApprove:m,isRevoke:r,address:p,customApproveAmount:u=0,symbol:s=F,decimals:T=0,icon:f=vo}=i,_=(0,v.useMemo)(()=>{let E=r?j.CANCEL_AUTHORIZATION:j.AUTHORIZATION,g=Ao(wo(_o(u,ko.pow(10,T))));return{approvalType:E,asset:{symbol:s,decimals:T,address:p,imageUrl:f},approvalRaw:g}},[s,T,p,u,r,f]),[C,{set:A}]=V(!1),h=Z(()=>{A(!1)}),y=()=>{A(!0)};return c?v.default.createElement(jo,null):m?v.default.createElement(v.default.Fragment,null,v.default.createElement(Zo,{approveInfo:_,editBtnSlot:!r&&v.default.createElement(w,{size:w.SIZE.xs,type:w.TYPE.primary,category:w.CATEGORY.outline,className:K.edit_btn,onClick:y},a("wallet_extension_transfer_text_edit"))}),v.default.createElement(lo,{className:K.authorization_token_dialog,alignBottom:!0,noContentPadding:!0,onClose:h,visible:C,windowClass:K.authorization_token_dialog__content},v.default.createElement(ct,{txType:j.AUTHORIZATION,onConfirm:o,approveToken:i,onClose:h}))):v.default.createElement(z,null,v.default.createElement(Ho,{...t}))},ut=Ut;var dt=({unapprovedTx:o})=>{let[t,c]=(0,l.useState)(""),[i,m]=(0,l.useState)(!1),r=Wo(t),p=ot(o.origin,o.from),[u,s]=Jo({...o,walletId:p==null?void 0:p.walletId}),{title:T,auth:f,meta:_,chain:C,nonce:A,fee:h,gas:y,loading:E,data:g}=u,{setNonce:G,setGasLimit:vt,setGasPrice:Ct,setAuthAmount:wt}=s;qo(),Xo(o.from);let Et=mt({isSufficientBalance:h.lackCoin,isRevokeTx:f.isRevoke,modifiedDataError:r,transaction:u,isOffline:h.loading}),bt=at({transaction:u,actions:s,modifiedDataError:r,walletInfo:p,unapprovedTx:o}),St=()=>{m(!0)};return l.default.createElement(L.Container,null,l.default.createElement(No,{title:T,closeable:!1,backable:!1}),l.default.createElement(ut,{confirmBuryPointFn:()=>{},onUpdateAuthAmount:It=>{wt(It)},dappInfo:_.originInfo,isOffline:E.token,approveToken:f}),l.default.createElement(z,null,l.default.createElement(Oo,{onClick:h.loading?void 0:St,injectCoin:C,networkFee:h.gasInEthDec,useMinPrecision:!1})),l.default.createElement(z,null,l.default.createElement(no,{title:a("wallet_extension_network_address_title_walletused"),address:p.address,walletId:p.walletId}),!!o.to&&l.default.createElement(no,{title:a("wallet_extension_popup_text_interact_with"),address:o.to})),l.default.createElement(pt,{nonce:A.custom,suggestedNonce:A.suggested,setNonce:G}),g?l.default.createElement(z,{bordered:!1},l.default.createElement(Uo,{data:g,copyable:{hideDesc:!0}})):l.default.createElement(z,{bordered:!1},l.default.createElement(Go,{value:t,error:r,onChange:c})),l.default.createElement(q,{placeholder:!0,offsetBottom:0,borderTop:!0},!r&&l.default.createElement(Fo,{...Et}),l.default.createElement(S,{buttonGroup:bt})),l.default.createElement(Ro,{gasFeeDisplay:h.gasDisplay,setVisible:m,visible:i,gasPrice:y.price.custom,gasLimit:y.limit.custom,chainGasPrice:y.price.suggested,chainGasLimit:y.limit.suggested,setGasPrice:Ct,setGasLimit:vt}))};var ft=({unapprovedTxList:o})=>{let t=o[o.length-1];return Q.default.createElement(Q.default.Fragment,null,Q.default.createElement(dt,{unapprovedTx:t}))};e();n();var gt=d(b());e();n();B();var _t=d(W());Dt();var Gt=o=>{let t=(0,_t.useDispatch)(),{address:c}=o,i=et(),m=Yo(),r={actionType:S.ACTION_TYPE.CANCEL,btnText:a("wallet_dapp_connection_btn_reject"),async onClick(){m({all_confirmation:"cancel",trade:"add_token"}),await i(c,!1),await eo(t)}},p=J(),{url:u,chainId:s}=p,T=Lo(u),f={actionType:S.ACTION_TYPE.CONFIRM,async onClick(){try{m({all_confirmation:"confirm",trade:"add_token"}),await T(s,o.address),await i(c,!0),await eo(t)}catch{uo.error(a("wallet_extenshion_toast_add_failed"))}}};return[r,f]},ht=Gt;var Yt=({unapproved:o})=>{let t=J(),c=Qo(o),i=ht(c);return gt.default.createElement(tt,{token:c,provider:t,buttonGroup:i})},Tt=Yt;e();n();var kt=d(b()),xt=d(Y()),At=d(W());Bt();var yt=()=>{let o=(0,At.useSelector)(Co),t=(0,xt.last)(o);return kt.default.createElement(nt,{unapproved:{...t,localType:fo}})};e();n();var gr=()=>{let{unapprovedTxList:o,unapprovedTxCount:t,unapprovedStList:c,unapprovedStCount:i,unapprovedSnList:m,unapprovedSnCount:r,unapprovedPermissionsRequestId:p,unapprovedRequestCount:u,unapprovedPermissionCount:s}=Ko(),T=(0,R.useDispatch)(),f=(0,X.useHistory)(),_=(0,R.useSelector)(Eo);switch((0,I.useEffect)(()=>{(async()=>{u===0&&(await T(bo()),f.push(So))})()},[u]),!0){case(_===M.connect&&s>0):return I.default.createElement(X.Redirect,{to:`${Io}/${p}`});case _===M.msg:return I.default.createElement(yt,null);case(_===M.addToken&&i>0):return I.default.createElement(Tt,{unapproved:(0,ao.last)(c)});case(_===M.addChain&&r>0):return I.default.createElement(rt,{unapproved:(0,ao.last)(m)});case(_===M.transaction&&t>0):return I.default.createElement(ft,{unapprovedTxList:o});default:return I.default.createElement(co,{delayTime:5e3})}};export{gr as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=RpcMode-Y7FH2UCL.js.map
