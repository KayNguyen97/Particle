import{a as er}from"./chunk-FLAY3RSM.js";import{a as nr}from"./chunk-26PWDO73.js";import{a as tr}from"./chunk-5QB4AVYL.js";import{a as Ge,b as or}from"./chunk-6K5ISA27.js";import{a as rr}from"./chunk-WAZ4Y276.js";import"./chunk-WB3OW5ND.js";import{c as jo}from"./chunk-XVYL73ZA.js";import{b as ke}from"./chunk-TLDPVFFH.js";import{d as Yo}from"./chunk-HR4SA7Z5.js";import"./chunk-X43FDTPV.js";import"./chunk-MHASEPVA.js";import"./chunk-ZGEQVSMJ.js";import"./chunk-5OUYE6NE.js";import"./chunk-GQOO5OO7.js";import"./chunk-WIOZQWEG.js";import"./chunk-DPVVGFWQ.js";import"./chunk-67PEY2GN.js";import{a as Wo}from"./chunk-JVE4G6JP.js";import"./chunk-VNHZZRMI.js";import"./chunk-5TSD6WDE.js";import"./chunk-TPBDSGSX.js";import"./chunk-K24OHEUM.js";import"./chunk-I2KPNTIF.js";import{a as pt,b as Ho}from"./chunk-MEW6SUUR.js";import"./chunk-D6O2GLPR.js";import"./chunk-2CPFAAZ7.js";import"./chunk-ZG26PGPF.js";import{C as $o,D as zo,E as Zo,G as Vo}from"./chunk-HE77KLJ4.js";import"./chunk-NOZM7AA3.js";import"./chunk-73YQ4YAD.js";import"./chunk-OEVJ7FDO.js";import"./chunk-ATUBFYS2.js";import{a as bt}from"./chunk-AJZPYKQF.js";import{a as me,b as Mo,f as ce}from"./chunk-YLO74Q7W.js";import{a as qo}from"./chunk-D54UDGZS.js";import"./chunk-2SGW2RXR.js";import"./chunk-ZXEHJOAD.js";import"./chunk-U3YDJ2W7.js";import"./chunk-VCWU5FEX.js";import"./chunk-KZ77CGYD.js";import{a as Uo}from"./chunk-7CB4COOY.js";import"./chunk-RDZIVMHO.js";import{a as St}from"./chunk-E73QHIZ6.js";import{c as Bo,e as ae,f as Oo}from"./chunk-E2KMZQ6K.js";import"./chunk-JXT6JCNO.js";import"./chunk-AHAXQBXQ.js";import"./chunk-DUZ4ULSN.js";import{a as ie}from"./chunk-PGPPXRV7.js";import"./chunk-54GDJWA6.js";import"./chunk-UGYRJNZG.js";import"./chunk-PLVZLQPX.js";import"./chunk-QNVM7T5C.js";import"./chunk-7T7NBYQH.js";import"./chunk-FEET7RP6.js";import"./chunk-MBJ4MFYL.js";import"./chunk-PCY622ND.js";import"./chunk-NS35PZCP.js";import"./chunk-XOD56IFT.js";import"./chunk-BBN3UGKM.js";import"./chunk-5DEIKYJL.js";import"./chunk-QMNAWRVI.js";import"./chunk-D6ZXZUY6.js";import"./chunk-QMF5LKVF.js";import"./chunk-VMACN7YR.js";import"./chunk-IQVVVGEA.js";import"./chunk-PGY6IZUS.js";import"./chunk-JLLMIXPD.js";import"./chunk-BTS2GOAC.js";import{b as Ht,c as Ko,d as Xo,e as De,f as B,g as S,h as nt,i as st,j as le,k as Qo,l as Ft,m as fe,n as Ro}from"./chunk-DCUBXXOY.js";import{g as bo}from"./chunk-2HWABU7H.js";import"./chunk-APEQZGKB.js";import{l as ht}from"./chunk-P2BTSOJO.js";import{a as Ut,c as Jo}from"./chunk-2NIR645O.js";import"./chunk-SI3RW2CS.js";import"./chunk-AX4SXHC6.js";import"./chunk-UCS37WXR.js";import{b as Wt,d as ho,e as Ao}from"./chunk-DUHXKIBS.js";import"./chunk-QNEJI55N.js";import{d as Io,f as wo}from"./chunk-5W7SRP5N.js";import"./chunk-YVRXETFX.js";import"./chunk-GUWGENNL.js";import"./chunk-WYB2CUAN.js";import"./chunk-B2BOSVTW.js";import"./chunk-GUJXW3GJ.js";import"./chunk-VIS7KIVI.js";import"./chunk-F64VYES3.js";import"./chunk-DHX2X277.js";import"./chunk-67YO4IPY.js";import"./chunk-DLUAVD7X.js";import"./chunk-WRWXCAEZ.js";import"./chunk-OZ6XSJY6.js";import"./chunk-DMJQUOJT.js";import{d as Po,g as Eo,l as ko,m as Do,o as Go,t as Lo,x as Ee}from"./chunk-MTMZQEHP.js";import"./chunk-NKTQMEXG.js";import"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import"./chunk-4OTZHHYZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import{M as et,R as vo,S as No,U as At,W as oe}from"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import"./chunk-S3ECGMEP.js";import"./chunk-PX7HII6H.js";import{b as fo}from"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import"./chunk-TPEASXIF.js";import{a as Fo}from"./chunk-JSAFBAMQ.js";import"./chunk-A336VZZF.js";import"./chunk-XEOGXIVD.js";import{a as rt}from"./chunk-PCGRDRHF.js";import{l as uo}from"./chunk-IU3TYIWS.js";import{a as pn,b as Co,j as ot,l as So,o as se,q as Pe}from"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import{p as q,s as lo}from"./chunk-X2LENRE7.js";import{a as U,n as ne,o as Ct}from"./chunk-O4EDZSHP.js";import{k as W}from"./chunk-HU3KBV5G.js";import{b as P}from"./chunk-6ZPGW3YM.js";import"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import{d as Tt,f as be}from"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import{g as It}from"./chunk-FLCN6MAI.js";import{a as wt,b as j}from"./chunk-YMZEQGAL.js";import"./chunk-7E3KY4EN.js";import"./chunk-JIRWXBHS.js";import"./chunk-3TVEFIPW.js";import{P as yo,Q as To,d as _o,m as go,q as xo,s as dt}from"./chunk-UXFKODVN.js";import"./chunk-IMRS4RGO.js";import"./chunk-52GWQSZH.js";import{a as tt}from"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import{a as re}from"./chunk-6PGLMYAE.js";import{i as $}from"./chunk-RMQJRDTF.js";import{c as po}from"./chunk-2YLR7R2N.js";import{a as Mt,b as co}from"./chunk-MVLY6WUP.js";import{d as to,e as eo,f as oo,h as ro}from"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{Ab as te,C as lt,Db as ao,Ib as Ot,K as Ke,Lb as io,Pa as Xe,Pb as mo,Ra as Qe,Tb as ee,Vb as Y,ab as Qt,jb as Re,mb as vt,nb as Nt,pb as V,q as Jt,rb as Rt,sb as R,tb as no,ub as Fe,v as I,zb as so}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{B as Se,G as L,b as Xt,q as ft}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{J as je,P as Je,V as T,c as Bt}from"./chunk-C2H3SRET.js";import{a as C,f as Kt}from"./chunk-V4YVDLI4.js";import"./chunk-UXBKFN2U.js";import"./chunk-HCW4K7TR.js";import"./chunk-Z4JATHZR.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import"./chunk-IYYFWVWL.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import"./chunk-RYNAOZ73.js";import"./chunk-PR4SLUV4.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f as c,m as a,o as i}from"./chunk-6V2G2Z5W.js";a();i();var Ne=c(C()),gt=c(tt());var dn=c(P());a();i();var $t=c(C()),yr=c(P()),Tr=c(tt());a();i();var Yt=c(C()),Pt=c(Kt()),sr=c(P());var Le=({title:e,children:t,onBack:o,onClose:r,nav:n,loading:s,pageName:l})=>{let m=(0,sr.useSelector)(S);return Yt.default.createElement(po.Container,{loading:s,className:`metax-send-nft-page main-container ${l==="confirmDetail"&&(m==null?void 0:m.chain)==0?"metax-send-btc-page":""}`},!n&&Yt.default.createElement(Fo,{title:e,onClose:r,onBack:o,closeable:!!r,className:l==="confirmDetail"&&(m==null?void 0:m.chain)==0?"metax-send-btc-page-nav":""}),n,Yt.default.createElement("div",{className:`metax-send-nft-page__content ${l==="confirmDetail"&&(m==null?void 0:m.chain)==0?"metax-send-btc-content":""}`},m&&Yt.default.createElement("div",{className:"metax-send-nft-page__content__main"},t)))};Le.defaultProps={nav:null,title:"",onBack:null,onClose:null};Le.propTypes={children:Pt.default.node.isRequired,onBack:Pt.default.func,onClose:Pt.default.func,title:Pt.default.string,nav:Pt.default.node};var de=Le;a();i();lt();var H=c(C()),_e=c(P()),_r=c(Kt());a();i();Rt();var ar=async(e,t,o)=>{let r="",{coinId:n,baseCoinId:s}=o;return e?((n===Nt||s===Nt)&&!await zo(e)||(n===vt||s===vt)&&!(await Zo(e)).isValid||(n===V||s===V)&&!await $o(e)||o.coinId!==Nt&&o.coinId!==V&&o.coinId!==vt&&!Vo(e,{allowNonPrefixed:!1}))&&(r="wallet_manage_crypto_errortip_invalid_address_tips"):r="wallet_transfer_errortip_receive_address_empty",r},ir=({amount:e,balance:t,t:o})=>e==="0"?o("wallet_extension_nft_toast_input_amount_no0"):e?e>t?o("wallet_extension_nft_toast_input_amount_no_greater",{max_amount:t}):"":o("wallet_extension_nft_toast_input_transfer_amount");a();i();var G=c(C()),ue=c(Kt()),dr=c(Bt());lt();var pr=c(tt());a();i();var Be=c(C());var pe=c(Kt());var Oe=({disabled:e,buttonText:t,nextJump:o})=>{let r=()=>{e||o&&o()};return Be.default.createElement(rt.FooterActions,null,Be.default.createElement(T,{block:!0,category:T.CATEGORY.fill,type:T.TYPE.highlight,size:T.SIZE.lg,onClick:r,disabled:e},t))};Oe.propTypes={disabled:pe.default.bool,buttonText:pe.default.string.isRequired,nextJump:pe.default.func};Oe.defaultProps={disabled:!1,nextJump:()=>{}};var mr=Oe;a();i();var cr=c(P());ro();co();var lr=c(C()),un=0,_n=()=>{let{chain:e,tokenId:t,accountAddress:o,tokenStandard:r}=(0,cr.useSelector)(S),{loading:n,data:s,error:l}=So(async()=>{let p={chain:e,walletAddress:o,inscriptionIds:[t],tokenStandard:Jo[r]},{data:f}=await oo(Mt.postBtcNftStatus,p);return(f==null?void 0:f.assetStatusList)||[]},{ready:e===un&&[Ut.Ordinals,Ut.ATOMICAL].includes(r)}),m=(0,lr.useMemo)(()=>[Ut.ATOMICAL,Ut.Ordinals].includes(r)&&(s==null?void 0:s.some(({unavailable:p})=>Number(p)===1))?1:0,[s,r]);return[n,m,l]},fr=_n;var Me=({nftBalance:e,nftInfo:t,amount:o,toAddress:r,toError:n,amountError:s,onAmountChange:l,onToAddressChange:m,showAmount:p,onLoadingChange:f,tipMessage:x})=>{let[u,v,_]=fr(),y=(0,pr.useHistory)(),w=()=>{y.replace(Ct)};(0,G.useEffect)(()=>{f==null||f(u)},[u]);let d=(0,G.useMemo)(()=>_?I("extension_wallet_header_alert_nft_check_error"):v===1?I("extension_wallet_header_alert_utxo_limit_arc"):null,[_,v]);return G.default.createElement("div",{className:(0,dr.default)("metax-send-nft-form")},(v||_)&&G.default.createElement(Xt,{closable:!1,type:_?Xt.TYPE.error:Xt.TYPE.warn,className:"metax-send-nft-form__alert",title:d}),G.default.createElement("div",{className:"metax-send-nft-form__row"},G.default.createElement(ft.TextArea,{className:"metax-send-nft-form__address",inputClassName:"metax-send-nft-form__address-input",placeholder:I("wallet_extension_transaction_placeholder_input_address"),label:I("wallet_transfer_subtitle_receive_address"),value:r,error:n?I(n):"",disabled:!!v||u,size:ft.SIZE.xl,errorType:ft.TIP_TYPE.always,onChange:m,tips:x||I("wallet_extension_nft_popup_toast_wrong_address_cannnot_retrieved"),autoResize:!0})),p&&G.default.createElement("div",{className:"metax-send-nft-form__row"},G.default.createElement(ft.Number,{className:"ethereum-send-form__amount",placeholder:"0",title:I("wallet_contract_interactiom_subtitle_amount"),size:ft.SIZE.xl,precision:0,enableMinus:!1,value:o,error:s||"",errorType:ft.TIP_TYPE.always,onChange:l}),G.default.createElement("div",{className:"metax-send-nft-form__row__max"},G.default.createElement("span",{className:"metax-send-nft-form__row__max-amount"},I("wallet_extension_nft_toast_owned"),":",e),G.default.createElement("span",{onClick:()=>{l(`${t.totalBalance||0}`)},className:"metax-send-nft-form__row__btn-max"},I("wallet_transfer_btn_max_balance_amount")))),G.default.createElement(mr,{nextJump:w,buttonText:I("wallet_transfer_btn_next"),disabled:!r||n||v||p&&(!o||s)}))};Me.propTypes={nftBalance:ue.default.number.isRequired,amount:ue.default.number,toAddress:ue.default.string};Me.defaultProps={toAddress:"",amount:void 0};var ur=Me;function gr(e){let t=Bo(void 0,void 0,{key:e.nftInfo.baseCoinKey}),o=(0,_e.useSelector)(fe),[r,n]=(0,H.useState)(null),[s,l]=(0,H.useState)(null),{run:m}=Pe(async(_,y)=>{!t||(_.toLowerCase()===y.toLowerCase()&&l(H.default.createElement("div",{className:"metax-send-nft-form__waring"},H.default.createElement("span",{className:"metax-send-nft-form__waring__tips"},I("wallet_extension_mid_textarea_same_address")))),n(await ar(_,y,t)))},{wait:200}),[p,f]=(0,H.useState)(null),{run:x}=Pe((_,y)=>{f(ir({amount:_,balance:y,t:I}))},{wait:200}),u=(0,H.useCallback)(_=>{e.setToAddress(_.target.value),m(_.target.value,e.fromAddress)},[e.fromAddress,m]),v=(0,H.useCallback)(_=>{let y=_.replace(/\D.*$/g,"").replace(/^0*/,"").replace(/\D/g,"");e.setAmount(y),x(y,e.nftBalance)},[e.nftBalance,x]);return H.default.createElement(ur,{...e,toError:r,tipMessage:s,amountError:p,showAmount:o,onToAddressChange:u,onAmountChange:v})}gr.propTypes={nftInfo:_r.default.object.isRequired};function gn(e){var t,o;return{amount:e.nftSend.amount,toAddress:e.nftSend.toAddress,fromAddress:(t=e.nftSend.nftInfo)==null?void 0:t.accountAddress,nftInfo:e.nftSend.nftInfo,nftBalance:(o=e.nftSend.nftInfo)==null?void 0:o.totalBalance}}function xn(e){return{setToAddress:t=>e(Ht.setToAddress(t)),setAmount:t=>e(Ht.setAmount(t))}}var xr=(0,_e.connect)(gn,xn)(gr);var yn=()=>{let e=W(),t=(0,yr.useDispatch)(),o=(0,Tr.useHistory)(),[r,{set:n}]=se(!1),s=(0,$t.useCallback)(()=>{t(Ht.resetSend()),o.goBack()},[o]);return $t.default.createElement(de,{onBack:s,loading:r,title:e("wallet_home_btn_send")},$t.default.createElement(xr,{onLoadingChange:n}))},vr=yn;a();i();var Vt=c(C());var cn=c(P()),ln=c(tt());a();i();var Zt=c(C()),an=c(P());Rt();a();i();var N=c(C()),z=c(P());var Lr=c(tt());lt();Y();a();i();var Et=c(P());Rt();Y();be();function Nr(){let e=(0,Et.useDispatch)(),{contractAddress:t,accountAddress:o,baseCoinId:r,localType:n}=(0,Et.useSelector)(S),{gasLimit:s,gasPrice:l,maxFeePerGas:m,maxPriorityFeePerGas:p,supportEip1559:f}=(0,Et.useSelector)(Qo),x=(0,Et.useSelector)(le),u=bo();return{send:async({nonce:v,updateGasInfo:_,activityId:y})=>{var K;let w=(K=Re(n))==null?void 0:K.realChainIdHex,d={from:o,to:t,nonce:j(v),data:x,chainId:w,value:"0",gasLimit:j(s)};f?(d.type=go.FEE_MARKET,d.maxFeePerGas=j(m),d.maxPriorityFeePerGas=j(p)):d.gasPrice=j(l),_&&(d.maxFeePerGas?(d.maxFeePerGas=j(_.maxFeePerGas),d.maxPriorityFeePerGas=j(_.maxPriorityFeePerGas)):d.gasPrice=j(_.gasPrice));let E={...lo(d)};E.walletId=u;let O=wt(f?d.maxFeePerGas:d.gasPrice),D=wt(d.gasLimit),M={...d,value:wt(d.value),from:d.from,to:d.to,gas:D,gasPrice:O,priorityFee:wt(f?d.maxPriorityFeePerGas:0),nonce:wt(d.nonce),repeatTxType:_o.CONFIRMING,oldTxHash:""},J={coinId:r,coinAmount:0,fromAdr:d.from,toAdr:d.to,serviceCharge:R(D,O),extJson:JSON.stringify(M),txSource:$.NFT,inputData:d.data?d.data:"",activityId:y};return await e(Io({txParams:E,walletId:u})),{serverTxId:await Tt().signAndPublishTransferTransaction({signParams:E,from:E.from,baseChain:Qe,publishParams:J})}}}}a();i();var at=c(C()),hr=c(pn());var k=({label:e,value:t,valueDisplay:o,canCopy:r})=>{let n=W(),s=(0,at.useCallback)(()=>{(0,hr.default)(t),L.success({title:n("wallet_transaction_history_toast_address_copied"),desc:t,duration:3,containerClassName:"address-copy-notification",showClose:!0,placement:L.DIRECTION.top})},[t]);return at.default.createElement("div",{className:"metax-send-nft-confirm"},at.default.createElement("div",{className:"metax-send-nft-confirm__label"},e),at.default.createElement("div",{className:"metax-send-nft-confirm__value",onClick:r?s:void 0},at.default.createElement(Uo,{text:o,maxWidth:"215px"}),r&&at.default.createElement("span",{className:"okds-copy confirm-transaction--copy"})))};a();i();var b=c(C()),Er=c(Bt()),ut=c(P());lt();var kr=c(tt());a();i();a();i();var Ir=c(C()),wr=c(Bt());lt();a();i();var Ar={root:"_root_1leh0_1"};function Tn({className:e,style:t}){return Ir.default.createElement("div",{className:(0,wr.default)(Ar.root,e),style:t},I("wallet_extension_freegas_notif_networkfee_rebate"))}var We=Tn;a();i();var Sr=c(C());a();i();var Cr={text:"_text_1qgtl_1"};function vn({status:e}){return e!==pt.ok?null:Sr.default.createElement(We,{className:Cr.text})}var Ue=vn;a();i();var br=c(C()),Fr=c(Bt());a();i();var it={root:"_root_6th6e_1",render:"_render_6th6e_9",iconWrapper:"_iconWrapper_6th6e_13",icon:"_icon_6th6e_13",error:"_error_6th6e_23"};function Nn({className:e,children:t,error:o}){return br.default.createElement("div",{className:(0,Fr.default)(it.root,e,{[it.error]:o})},t)}var He=Nn;a();i();lt();var zt=c(C());var Ye=c(Bt());function hn({className:e,status:t,tip:o,activity:r}){if(t!==pt.error&&t!==pt.ok||!o)return null;let{gas:n,totalTimes:s}=r,{text:l,key:m,args:p,error:f}=o,x=l||I(m,p||{}),u;return m===Wt.availableTimesLimit?u=I("wallet_extension_freegas_tooltip_5refund_day",{num:s}):m===Wt.exceedGasLimit?u=I("wallet_extension_freegas_tooltip_under_10u",{num:n}):m===Wt.exceedTodayGasLimit?u=I("wallet_extension_freegas_tooltip_paused_rules"):m===Wt.walletAssetNotEnough&&(u=I("wallet_extension_freegas_notif_greater_than10",{num:s})),u&&(x=zt.default.createElement("div",{className:it.iconWrapper},x,zt.default.createElement(Se,{title:u,trigger:Se.TRIGGER_TYPES.hover},zt.default.createElement(je,{className:(0,Ye.default)("okx-wallet-plugin-information-circle",it.icon,{[it.error]:f})})))),zt.default.createElement(He,{className:(0,Ye.default)(it.render,e),error:f},x)}var $e=hn;a();i();lt();var ge=c(P());Y();var Pr=()=>{let e=(0,ge.useSelector)(Ft),t=(0,ge.useSelector)(st),{baseCoin:o}=St(e,!0),{networkFee:r}=t,n=(0,ge.useSelector)(oe),l=Mo(Ot,u=>mo(u,o.vdecimalNum),ee),m=`${Jt.thousandFormat(l(r))} ${o.symbol}`,f=ce([o.coinId])[o.coinId],x=me({amount:Ot(r),rate:f,symbol:n.symbol},{useApproximate:!0});return{gasFeeToETHDisplay:m,gasFeeToCurrencyDisplay:x}};a();i();var ze={arrow:"_arrow_1p9f5_1",gasReturnTip:"_gasReturnTip_1p9f5_6"};function An(){let e=(0,ut.useSelector)(st),t=Ge(),{status:o}=t,{gasType:r}=e,n=To[r],s=n?I(n):"",{gasFeeToETHDisplay:l,gasFeeToCurrencyDisplay:m}=Pr();return o===pt.ok?b.default.createElement(b.default.Fragment,null,b.default.createElement(Ue,{status:o}),b.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},s,"\xA0",l)):b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},s,"\xA0",l),b.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},m))}var Dr=()=>{let e=(0,ut.useDispatch)(),t=(0,kr.useHistory)(),{accountAddress:o,contractAddress:r}=(0,ut.useSelector)(S),n=(0,ut.useSelector)(Ft),s=(0,ut.useSelector)(le),[l,{setTrue:m,setFalse:p}]=se(!1),f=Ge(),x=Co(v=>{e(Ko(v))}),u=()=>{e(B()),t.push(U)};return b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"metax-send-nft-confirm"},b.default.createElement("div",{className:"metax-send-nft-confirm__label"},I("wallet_transfer_subtitle_network_fee")),b.default.createElement("div",{className:"metax-send-nft-confirm__value",onClick:m},b.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},b.default.createElement(An,null)),b.default.createElement("div",{className:"metax-send-nft-confirm__value__narrow"},b.default.createElement("span",{className:(0,Er.default)("okds-arrow-chevron-right-centered-md",ze.arrow)}))),b.default.createElement(Yo,{visible:l,coinId:n,address:o,inputData:s,tokenAddress:r,value:"0",onBack:p,onClose:u,onGasChange:x,gasReturn:f})),b.default.createElement($e,{className:ze.gasReturnTip,activity:f.activity,status:f.status,tip:f.tip}))};a();i();var Ze=c(P());Y();function Gr(){let{baseCoinKey:e}=(0,Ze.useSelector)(S),t=ae(void 0,void 0,{key:e}),o=t==null?void 0:t.coinAmountInt,r=(0,Ze.useSelector)(st),{gasLimit:n,gasPrice:s,supportEip1559:l,maxFeePerGas:m,maxPriorityFeePerGas:p}=r;if(n==="0"||l&&(m==="0"||p==="0")||!l&&s==="0")return!1;let x=R(`${(l?m:s)||0}`,`${n||0}`);return te(`${o||0}`,x)}var In=()=>{let e=(0,z.useDispatch)(),t=W(),o=(0,z.useSelector)(Ro),{accountAddress:r,baseCoinId:n,image:s,name:l,chainName:m}=(0,z.useSelector)(S),p=Gr(),f=(0,Lr.useHistory)(),{name:x,keyringName:u}=(0,z.useSelector)(At),v=(0,z.useSelector)(st),_=(0,z.useSelector)(Ft),[,y]=Oo(_),{toAddress:w,amount:d}=(0,z.useSelector)(nt),F=(0,z.useSelector)(fe),[E,O]=(0,N.useState)(!1),{send:D}=Nr(),M=Ho({coinId:_,txType:ho.nft,fromAddress:r,toAddress:w,unavailable:v.gasType===yo.CUSTOM,fee:Ot(v.networkFee)}),J=M==null?void 0:M.errorCode,mt=()=>{O(!0)},K=()=>{O(!1)},{gasPrice:Dt}=v,X={fetchParams:{coinId:_,from:r,to:w,amount:d,gasPrice:Dt},userGasInfo:v,baseCoinAmountUse:"0"},Gt=(0,N.useMemo)(()=>F?Jt.thousandFormat(d):"",[d,F]),ct=(0,N.useCallback)(()=>{e(B()),p?f.goBack():f.replace(U)},[p]),Q=(0,N.useCallback)(async Ae=>{var qt,yt,jt;if(!await qo({callback:ct}))return;let{nonce:we,updateGasInfo:Lt}=Ae;try{let Z=await D({nonce:we,updateGasInfo:Lt,activityId:M.activityId}),{serverTxId:Ce}=Z||{};ht({tx_id:Ce}),L.success({title:t("wallet_transfer_notif_transaction_submit")}),e(B()),f.replace("/")}catch(Z){let Ce=(yt=(qt=Z==null?void 0:Z.data)==null?void 0:qt.originalError)==null?void 0:yt.code;Ao(Ce)?(L.error({title:((jt=Z==null?void 0:Z.data)==null?void 0:jt.originalError.msg)||t("wallet_home_toast_network_error")}),M.clear()):Z.message!==re&&L.error({title:t("wallet_home_toast_network_error")})}},[n,r,D]);(0,N.useEffect)(()=>{J===0&&typeof(y==null?void 0:y.chainId)<"u"&&fo({wallet_address:r,interactive_address:w,chain_id:y==null?void 0:y.chainId,transaction_type:"send_nft"})},[J,y==null?void 0:y.chainId]);let he=It({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return N.default.createElement(or,{gasReturn:M},N.default.createElement("div",{className:"metax-send-nft-detail"},N.default.createElement("div",{className:"metax-send-nft-detail__base--container"},N.default.createElement(bt,{src:s,alt:"nft",startStatus:!0,backupImage:he,classnames:"metax-send-nft-detail__icon"}),N.default.createElement("div",{className:"metax-send-nft-detail__name-container"},N.default.createElement("div",{className:"metax-send-nft-detail__name"},l))),N.default.createElement(k,{label:t("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${u} - ${x}`}),N.default.createElement(k,{label:t("wallet_transfer_subtitle_send_address"),value:r,valueDisplay:q(r),canCopy:!0}),N.default.createElement(k,{label:t("wallet_transfer_subtitle_receive_address"),value:w,valueDisplay:q(w),canCopy:!0}),N.default.createElement("div",{className:"metax-send-nft-detail__hr"}),N.default.createElement(k,{label:t("wallet_extension_nft_popup_text_network"),valueDisplay:m}),N.default.createElement(Dr,null),!o&&!p&&N.default.createElement("div",{className:"metax-send-nft-detail__error"},t("wallet_dapp_connection_errortip_insufficient_tip")),F&&N.default.createElement(k,{label:t("wallet_extension_transaction_module_input_label_amount"),valueDisplay:Gt})),N.default.createElement(rt.FooterActions,null,N.default.createElement(T,{category:T.CATEGORY.outline,type:T.TYPE.secondary,size:T.SIZE.lg,width:160,onClick:ct},t("wallet_dapp_connection_btn_reject")),N.default.createElement(er,{dataForCheck:X,onClick:Q,beforeClick:mt,afterClick:K,btnProps:{loading:E,width:160,disabled:o||!p}},t("wallet_set_password_btn_confirm"))))},Br=In;a();i();var h=c(C());a();i();var xe=c(C());Y();Xe();var Or=(e={},t=!1,o=!1)=>{let[r,n]=(0,xe.useState)({}),[s,l]=(0,xe.useState)(!0),[m,p]=(0,xe.useState)(!1),f=r.fee;return ot(()=>{(async()=>{try{let u=await ko(e);u!=null&&u.fee&&n(u),l(!1)}catch{o&&(p(!0),l(!1))}})()}),t?{solanaFee:f,solanaFeeInfo:r,loading:s,error:m}:f};a();i();var Mr=c(P());Y();var wn=(e,t)=>Wo((n,s)=>no(n,10**s.decimals),ee)(e,t),ye=(e,t={})=>uo(e,{symbol:t==null?void 0:t.symbol,decimals:t==null?void 0:t.decimals}),Te=(e,t={})=>{let o=(0,Mr.useSelector)(oe),n=ce([t.coinId])[t.coinId],s=wn(e,t);return me({amount:s,rate:n,symbol:o.symbol},{useApproximate:!0})};var _t=c(P()),zr=c(tt());a();i();Xe();a();i();be();var Wr=e=>async(t,o)=>{let r=o(),n=et(r),s=e.walletId||n,l=No(r,s),m=l==null?void 0:l.serverWalletType,p=await Tt().getSignRequestHeaders({walletId:s}),f={txSource:$.NORMAL,accountId:s,walletType:m,...e};return await Eo(f,{headers:p})};var Ur=({type:e,from:t,to:o,coinId:r,blockHash:n,coinAmount:s,mint:l=null,createAssociatedAddress:m,serviceCharge:p,computeUnitPrice:f,computeUnitLimit:x,txSource:u=$.NORMAL,extJson:v=JSON.stringify({}),walletId:_})=>async y=>{let w={type:e,payer:t,blockHash:n,from:t,to:o,amount:s,computeUnitPrice:f,computeUnitLimit:x},d;e===xo.TRANSFER?d={...w}:d={...w,mint:l,createAssociatedAddress:m};let F=await y(wo(d,t,_)),E=await ie(Ke,F);return await y(Wr({signedTx:F,coinAmount:s,coinId:r,fromAdr:t,toAdr:o,serviceCharge:p,txSource:u,extJson:v,txHash:E}))};Y();a();i();var Ve=c(C());function Cn(e){let[t,o]=(0,Ve.useState)(!0),[r,n]=(0,Ve.useState)(),s=rr();return ot(()=>{(async function(){try{let m=await s(e);n(m)}finally{o(!1)}})()}),{loading:t,priorityGasLimit:r}}var Hr=Cn;a();i();var Yr=c(P());Y();function $r(e){let{baseCoinKey:t}=(0,Yr.useSelector)(S),r=ae(void 0,void 0,{key:t}).coinAmountInt;return e==="0"?!1:te(r,e)}var Sn=()=>{let e=(0,_t.useDispatch)(),t=W(),{tokenId:o,accountAddress:r,baseCoinId:n,image:s,name:l,chainName:m,extendProperty:p}=(0,_t.useSelector)(S),{tokenStandard:f}=p||{},{baseCoin:x}=St(n,!0),u=(0,zr.useHistory)(),v=(0,h.useRef)(!1),{name:_,keyringName:y}=(0,_t.useSelector)(At),{toAddress:w}=(0,_t.useSelector)(nt),{loading:d,solanaFeeInfo:F}=Or({coinId:n,address:w},!0),{loading:E,priorityGasLimit:O}=Hr({coinId:n,from:r,chainId:x.chainId}),D=d||E,{fee:M,computeUnitPrice:J,feelimit:mt}=F,{priorityFee:K,priorityGasPrice:Dt,priorityGasLimit:xt}=ke(mt,J,O),X=Fe(M,K),Gt=Te(X,x),ct=ye(X,x),Q=$r(X),he=(0,_t.useSelector)(et),[Ae,Ie]=(0,h.useState)(!1),we=It({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return h.default.createElement(h.default.Fragment,null,h.default.createElement("div",{className:"metax-send-nft-detail"},h.default.createElement("div",{className:"metax-send-nft-detail__base--container"},h.default.createElement(bt,{src:s,startStatus:!0,alt:"",backupImage:we,classnames:"metax-send-nft-detail__icon"}),h.default.createElement("div",{className:"metax-send-nft-detail__name-container"},h.default.createElement("div",{className:"metax-send-nft-detail__name"},l))),h.default.createElement(k,{label:t("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${y} - ${_}`}),h.default.createElement(k,{label:t("wallet_transfer_subtitle_send_address"),value:r,valueDisplay:q(r),canCopy:!0}),h.default.createElement(k,{label:t("wallet_transfer_subtitle_receive_address"),value:w,valueDisplay:q(w),canCopy:!0}),h.default.createElement("div",{className:"metax-send-nft-detail__hr"}),h.default.createElement(k,{label:t("wallet_extension_nft_popup_text_network"),valueDisplay:m}),h.default.createElement("div",{className:"metax-send-nft-confirm metax-send-nft-fee-item"},h.default.createElement("div",{className:"metax-send-nft-confirm__label"},t("wallet_transfer_subtitle_network_fee")),h.default.createElement("div",{className:"metax-send-nft-confirm__value"},h.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},h.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},t("wallet_transfer_subtitle_trading_speed_average")," ",ct),h.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},Gt)))),!Q&&!D&&h.default.createElement("div",{className:"metax-send-nft-detail__error"},t("wallet_dapp_connection_errortip_insufficient_tip"))),h.default.createElement(rt.FooterActions,null,h.default.createElement(T,{category:T.CATEGORY.outline,type:T.TYPE.secondary,size:T.SIZE.lg,width:160,onClick:()=>{e(B()),Q?u.goBack():u.replace(U)}},t("wallet_dapp_connection_btn_reject")),h.default.createElement(T,{category:T.CATEGORY.fill,type:T.TYPE.highlight,size:T.SIZE.lg,width:160,loading:D||Ae,disabled:!Q,onClick:async()=>{if(!v.current){v.current=!0,Ie(!0);try{let{data:{legal:Lt}}=await Go({mint:o,address:w}),qt=await Do({coinId:n,address:r},{fromAddr:r,toAddr:w}),yt={from:r,to:w,coinId:n,blockHash:qt,serviceCharge:X,computeUnitPrice:Dt,computeUnitLimit:xt,txSource:$.NFT,coinAmount:1,mint:o,createAssociatedAddress:!Lt,walletId:he,type:"tokenTransfer"};f===4&&(yt.type="mplTransfer",yt.tokenStandard=4);let jt=await e(Ur(yt));ht({tx_id:jt}),e(B()),L.success({title:t("wallet_transfer_notif_transaction_submit")}),u.replace(U)}catch(Lt){Lt.message!==re&&L.error({title:t("wallet_home_toast_network_error")})}v.current=!1,Ie(!1)}}},t("wallet_set_password_btn_confirm"))))},Zr=Sn;a();i();var A=c(C()),kt=c(P());var on=c(tt());Y();a();i();Rt();be();Y();ro();co();var bn=e=>{let t=et(e),o=vo(e),n=((o==null?void 0:o.account)||{})[Qt]||"";return{walletId:t,address:n}},Fn=async e=>{let t={coinId:V,address:e.address},o={fromAddr:e.fromAddress,toAddr:e.toAddress},{info:r={}}=await Po(t,o),{sequenceNumber:n,chainId:s,expirationTimestampSecs:l,gasUnitPrice:m}=r;return{sequenceNumber:n,chainId:s,expirationTimestampSecs:l,gasUnitPrice:m,maxGasAmount:8e3}},Pn=e=>async t=>{let{signedTx:o,sequenceNumber:r,fromAddress:n,toAddress:s,gasUnitPrice:l,maxGasAmount:m,amount:p}=e,f={nonce:r},x=R(l,m),u={signedTx:o,coinId:V,fromAdr:n,toAdr:s,serviceCharge:x,extJson:JSON.stringify(f),coinAmount:ao(p),txSource:$.NFT};return await t(tr(u))},qe=e=>async(t,o)=>{let r=o(),{address:n}=bn(r),{type:s,maxGasAmount:l,gasUnitPrice:m,fromAddress:p,toAddress:f,receiver:x,sender:u,creator:v,collectionName:_,tokenName:y,version:w,amount:d}=e,F=await Fn({fromAddress:p,toAddress:f,address:n});l&&(F.maxGasAmount=l),m&&(F.gasUnitPrice=m);let E={};s===dt.OFFER_NFT||s===dt.OFFER_NFT_SIMULATE?(E.receiver=x,E.amount=d):E.sender=u;let O={type:s,base:F,data:{...E,creator:v,collectionName:_,tokenName:y,version:w}},D=await Tt().signTransaction(O,n,Qt);return{base:F,signedTx:D}},Vr=e=>async t=>{let{fromAddress:o,toAddress:r,amount:n}=e,{base:s,signedTx:l}=await t(qe(e)),m=await ie(Qt,l);return{txId:await t(Pn({...s,signedTx:l,fromAddress:o,toAddress:r,amount:n})),txHash:m}},qr=async(e={},t)=>{let o;try{o=await Lo(t)}catch(s){o=e.maxGasAmount||2e3,console.log(s)}let{gasUnitPrice:r}=e,n=R(r,o);return{gasUnitPrice:r,maxGasAmount:o,fee:n}},jr=e=>async t=>{let{base:o,signedTx:r}=await t(qe({...e,type:dt.OFFER_NFT_SIMULATE}));return qr(o,r)},Jr=e=>async t=>{let{base:o,signedTx:r}=await t(qe({...e,type:dt.CLAIM_NFT_SIMULATE}));return qr(o,r)},Kr=e=>async t=>t(Vr({...e,type:dt.OFFER_NFT})),Xr=e=>async t=>t(Vr({...e,type:dt.CLAIM_NFT})),Qr=async(e,t,o)=>{let{data:{data:{token_data:{handle:r}}}}=await to(Mt.getAptosResourceType.replace("{creator}",e)),{data:n}=await eo(Mt.getAptosTable.replace("{handle}",r),{key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:e,collection:t,name:o}});return n.largest_property_version};a();i();var Rr=c(C());var tn=c(P()),en=(e,t)=>{let o=(0,tn.useDispatch)(),[r,n]=(0,Rr.useState)({aptosFee:0,gasUnitPrice:"0",maxGasAmount:"0",loading:!1,version:0});return ot(()=>{(async()=>{n({...r,loading:!0}),e.version=await Qr(e.creator,e.collectionName,e.tokenName);let{gasUnitPrice:l,maxGasAmount:m,fee:p}=t?await o(Jr(e)):await o(jr(e));n({aptosFee:p,gasUnitPrice:l,maxGasAmount:m,loading:!1,version:e.version})})()}),r};var En=()=>{let e=(0,kt.useDispatch)(),t=W(),{creatorAddress:o,name:r,projectName:n,accountAddress:s,baseCoinId:l,image:m,chainName:p,claim:f}=(0,kt.useSelector)(S),x=(0,on.useHistory)(),{name:u,keyringName:v}=(0,kt.useSelector)(At),{toAddress:_,amount:y=1}=(0,kt.useSelector)(nt),{baseCoin:w}=St(l,!0),d=f?{fromAddress:s,toAddress:_,sender:s,creator:o,collectionName:n,tokenName:r,amount:y}:{fromAddress:s,toAddress:_,receiver:_,creator:o,collectionName:n,tokenName:r,amount:y},{aptosFee:F,gasUnitPrice:E,maxGasAmount:O,loading:D,version:M}=en(d,f),[J,mt]=(0,A.useState)(!1),K=jo(),Dt=ye(F,w),xt=so(K,io(F)),X=Te(F,w),Gt=It({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return A.default.createElement(A.default.Fragment,null,A.default.createElement("div",{className:"metax-send-nft-detail"},A.default.createElement("div",{className:"metax-send-nft-detail__base--container"},A.default.createElement(bt,{src:m,startStatus:!0,alt:"nft",backupImage:Gt,classnames:"metax-send-nft-detail__icon"}),A.default.createElement("div",{className:"metax-send-nft-detail__name-container"},A.default.createElement("div",{className:"metax-send-nft-detail__name"},r))),A.default.createElement(k,{label:t("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${v} - ${u}`}),A.default.createElement(k,{label:t("wallet_transfer_subtitle_send_address"),value:s,valueDisplay:q(s),canCopy:!0}),A.default.createElement(k,{label:t("wallet_transfer_subtitle_receive_address"),value:_,valueDisplay:q(_),canCopy:!0}),A.default.createElement("div",{className:"metax-send-nft-detail__hr"}),A.default.createElement(k,{label:t("wallet_extension_nft_popup_text_network"),valueDisplay:p}),A.default.createElement("div",{className:"metax-send-nft-confirm metax-send-nft-fee-item"},A.default.createElement("div",{className:"metax-send-nft-confirm__label"},t("wallet_transfer_subtitle_network_fee")),A.default.createElement("div",{className:"metax-send-nft-confirm__value"},D?A.default.createElement(Je,null):A.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},A.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},t("wallet_transfer_subtitle_trading_speed_average")," ",Dt),A.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},X)))),!xt&&!D&&A.default.createElement("div",{className:"metax-send-nft-detail__error"},t("wallet_dapp_connection_errortip_insufficient_tip"))),A.default.createElement(rt.FooterActions,null,A.default.createElement(T,{category:T.CATEGORY.outline,type:T.TYPE.secondary,size:T.SIZE.lg,width:160,onClick:()=>{e(B()),xt?x.goBack():x.replace(U)}},t("wallet_dapp_connection_btn_reject")),A.default.createElement(T,{category:T.CATEGORY.fill,type:T.TYPE.highlight,size:T.SIZE.lg,width:160,loading:J,disabled:!xt||D,onClick:async()=>{try{mt(!0),d.gasUnitPrice=E,d.maxGasAmount=O,d.version=M;let{txId:ct,txHash:Q}=f?await e(Xr(d)):await e(Kr(d));f?await Ee(21,Q,_):await Ee(20,Q,s),ht({tx_id:ct}),e(B()),L.success({title:t("wallet_transfer_notif_transaction_submit")}),x.replace(U)}catch{L.error({title:t("wallet_home_toast_network_error")})}finally{mt(!1)}}},t("wallet_set_password_btn_confirm"))))},rn=En;a();i();var nn=c(C());var ve=c(P());var sn=()=>{let{accountAddress:e,inscriptionIdProtocol:t}=(0,ve.useSelector)(S),{toAddress:o}=(0,ve.useSelector)(nt),r=(0,ve.useSelector)(et);return nn.default.createElement(nr,{unapproved:{walletId:r,params:{transfer:{from:e,to:o,data:t}}}})};var kn=()=>{let{baseCoinId:e}=(0,an.useSelector)(S);switch(e){case vt:return Zt.default.createElement(sn,null);case Nt:return Zt.default.createElement(Zr,null);case V:return Zt.default.createElement(rn,null);default:return Zt.default.createElement(Br,null)}},mn=kn;var Dn=()=>{var n;let e=W(),t=(0,ln.useHistory)(),o=(0,cn.useDispatch)(),r=(0,Vt.useCallback)(()=>{o(De()),t.replace(ne)},[]);return Vt.default.createElement(de,{pageName:Ct,title:(n=t.location.state)!=null&&n.nftInfo.claim?e("extension_aptos_nft_title_receiveconfirm"):e("wallet_trade_maintitle_transaction_confirm"),onBack:()=>{var s;if((s=t.location.state)!=null&&s.nftInfo.claim){o(B()),o(De()),t.goBack();return}r()}},Vt.default.createElement(mn,null))},fn=Dn;var Gn=()=>{let e=(0,gt.useHistory)(),t=(0,dn.useDispatch)();return ot(()=>{var o;e.location.state?t(Xo((o=e.location.state)==null?void 0:o.nftInfo)):e.replace(U)}),Ne.default.createElement(gt.Switch,null,Ne.default.createElement(gt.Route,{exact:!0,path:ne,component:vr}),Ne.default.createElement(gt.Route,{exact:!0,path:Ct,component:fn}))},Ol=Gn;export{Ol as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=SendNft-HYLRWMES.js.map
