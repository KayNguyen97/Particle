import{a as pu}from"./chunk-F2CV7BH6.js";import{a as yu}from"./chunk-XRV6EHVP.js";import{E as ta,p as du}from"./chunk-RYNAOZ73.js";import{a as J,c as lu,d as Qi}from"./chunk-GKHVFCKF.js";import{b as Le,c as Mt,d as hu,f as Fe,g as Ji,m as T,n as Q,o as P}from"./chunk-6V2G2Z5W.js";var ga=Mt((ya,zo)=>{T();P();(function(s,t){"use strict";function e(y,a){if(!y)throw new Error(a||"Assertion failed")}function r(y,a){y.super_=a;var f=function(){};f.prototype=a.prototype,y.prototype=new f,y.prototype.constructor=y}function n(y,a,f){if(n.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,y!==null&&((a==="le"||a==="be")&&(f=a,a=10),this._init(y||0,a||10,f||"be"))}typeof s=="object"?s.exports=n:t.BN=n,n.BN=n,n.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Qi().Buffer}catch{}n.isBN=function(a){return a instanceof n?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===n.wordSize&&Array.isArray(a.words)},n.max=function(a,f){return a.cmp(f)>0?a:f},n.min=function(a,f){return a.cmp(f)<0?a:f},n.prototype._init=function(a,f,l){if(typeof a=="number")return this._initNumber(a,f,l);if(typeof a=="object")return this._initArray(a,f,l);f==="hex"&&(f=16),e(f===(f|0)&&f>=2&&f<=36),a=a.toString().replace(/\s+/g,"");var d=0;a[0]==="-"&&(d++,this.negative=1),d<a.length&&(f===16?this._parseHex(a,d,l):(this._parseBase(a,f,d),l==="le"&&this._initArray(this.toArray(),f,l)))},n.prototype._initNumber=function(a,f,l){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(e(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),f,l)},n.prototype._initArray=function(a,f,l){if(e(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var m,v,_=0;if(l==="be")for(d=a.length-1,m=0;d>=0;d-=3)v=a[d]|a[d-1]<<8|a[d-2]<<16,this.words[m]|=v<<_&67108863,this.words[m+1]=v>>>26-_&67108863,_+=24,_>=26&&(_-=26,m++);else if(l==="le")for(d=0,m=0;d<a.length;d+=3)v=a[d]|a[d+1]<<8|a[d+2]<<16,this.words[m]|=v<<_&67108863,this.words[m+1]=v>>>26-_&67108863,_+=24,_>=26&&(_-=26,m++);return this._strip()};function i(y,a){var f=y.charCodeAt(a);if(f>=48&&f<=57)return f-48;if(f>=65&&f<=70)return f-55;if(f>=97&&f<=102)return f-87;e(!1,"Invalid character in "+y)}function u(y,a,f){var l=i(y,f);return f-1>=a&&(l|=i(y,f-1)<<4),l}n.prototype._parseHex=function(a,f,l){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var m=0,v=0,_;if(l==="be")for(d=a.length-1;d>=f;d-=2)_=u(a,f,d)<<m,this.words[v]|=_&67108863,m>=18?(m-=18,v+=1,this.words[v]|=_>>>26):m+=8;else{var g=a.length-f;for(d=g%2===0?f+1:f;d<a.length;d+=2)_=u(a,f,d)<<m,this.words[v]|=_&67108863,m>=18?(m-=18,v+=1,this.words[v]|=_>>>26):m+=8}this._strip()};function h(y,a,f,l){for(var d=0,m=0,v=Math.min(y.length,f),_=a;_<v;_++){var g=y.charCodeAt(_)-48;d*=l,g>=49?m=g-49+10:g>=17?m=g-17+10:m=g,e(g>=0&&m<l,"Invalid character"),d+=m}return d}n.prototype._parseBase=function(a,f,l){this.words=[0],this.length=1;for(var d=0,m=1;m<=67108863;m*=f)d++;d--,m=m/f|0;for(var v=a.length-l,_=v%d,g=Math.min(v,v-_)+l,c=0,b=l;b<g;b+=d)c=h(a,b,b+d,f),this.imuln(m),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(_!==0){var F=1;for(c=h(a,b,a.length,f),b=0;b<_;b++)F*=f;this.imuln(F),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},n.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red};function p(y,a){y.words=a.words,y.length=a.length,y.negative=a.negative,y.red=a.red}if(n.prototype._move=function(a){p(a,this)},n.prototype.clone=function(){var a=new n(null);return this.copy(a),a},n.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=k}catch{n.prototype.inspect=k}else n.prototype.inspect=k;function k(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(a,f){a=a||10,f=f|0||1;var l;if(a===16||a==="hex"){l="";for(var d=0,m=0,v=0;v<this.length;v++){var _=this.words[v],g=((_<<d|m)&16777215).toString(16);m=_>>>24-d&16777215,d+=2,d>=26&&(d-=26,v--),m!==0||v!==this.length-1?l=x[6-g.length]+g+l:l=g+l}for(m!==0&&(l=m.toString(16)+l);l.length%f!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(a===(a|0)&&a>=2&&a<=36){var c=I[a],b=S[a];l="";var F=this.clone();for(F.negative=0;!F.isZero();){var V=F.modrn(b).toString(a);F=F.idivn(b),F.isZero()?l=V+l:l=x[c-V.length]+V+l}for(this.isZero()&&(l="0"+l);l.length%f!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}e(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&e(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},n.prototype.toJSON=function(){return this.toString(16,2)},o&&(n.prototype.toBuffer=function(a,f){return this.toArrayLike(o,a,f)}),n.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)};var E=function(a,f){return a.allocUnsafe?a.allocUnsafe(f):new a(f)};n.prototype.toArrayLike=function(a,f,l){this._strip();var d=this.byteLength(),m=l||Math.max(1,d);e(d<=m,"byte array longer than desired length"),e(m>0,"Requested array length <= 0");var v=E(a,m),_=f==="le"?"LE":"BE";return this["_toArrayLike"+_](v,d),v},n.prototype._toArrayLikeLE=function(a,f){for(var l=0,d=0,m=0,v=0;m<this.length;m++){var _=this.words[m]<<v|d;a[l++]=_&255,l<a.length&&(a[l++]=_>>8&255),l<a.length&&(a[l++]=_>>16&255),v===6?(l<a.length&&(a[l++]=_>>24&255),d=0,v=0):(d=_>>>24,v+=2)}if(l<a.length)for(a[l++]=d;l<a.length;)a[l++]=0},n.prototype._toArrayLikeBE=function(a,f){for(var l=a.length-1,d=0,m=0,v=0;m<this.length;m++){var _=this.words[m]<<v|d;a[l--]=_&255,l>=0&&(a[l--]=_>>8&255),l>=0&&(a[l--]=_>>16&255),v===6?(l>=0&&(a[l--]=_>>24&255),d=0,v=0):(d=_>>>24,v+=2)}if(l>=0)for(a[l--]=d;l>=0;)a[l--]=0},Math.clz32?n.prototype._countBits=function(a){return 32-Math.clz32(a)}:n.prototype._countBits=function(a){var f=a,l=0;return f>=4096&&(l+=13,f>>>=13),f>=64&&(l+=7,f>>>=7),f>=8&&(l+=4,f>>>=4),f>=2&&(l+=2,f>>>=2),l+f},n.prototype._zeroBits=function(a){if(a===0)return 26;var f=a,l=0;return(f&8191)===0&&(l+=13,f>>>=13),(f&127)===0&&(l+=7,f>>>=7),(f&15)===0&&(l+=4,f>>>=4),(f&3)===0&&(l+=2,f>>>=2),(f&1)===0&&l++,l},n.prototype.bitLength=function(){var a=this.words[this.length-1],f=this._countBits(a);return(this.length-1)*26+f};function B(y){for(var a=new Array(y.bitLength()),f=0;f<a.length;f++){var l=f/26|0,d=f%26;a[f]=y.words[l]>>>d&1}return a}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var l=this._zeroBits(this.words[f]);if(a+=l,l!==26)break}return a},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},n.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this._strip()},n.prototype.ior=function(a){return e((this.negative|a.negative)===0),this.iuor(a)},n.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},n.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},n.prototype.iuand=function(a){var f;this.length>a.length?f=a:f=this;for(var l=0;l<f.length;l++)this.words[l]=this.words[l]&a.words[l];return this.length=f.length,this._strip()},n.prototype.iand=function(a){return e((this.negative|a.negative)===0),this.iuand(a)},n.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},n.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},n.prototype.iuxor=function(a){var f,l;this.length>a.length?(f=this,l=a):(f=a,l=this);for(var d=0;d<l.length;d++)this.words[d]=f.words[d]^l.words[d];if(this!==f)for(;d<f.length;d++)this.words[d]=f.words[d];return this.length=f.length,this._strip()},n.prototype.ixor=function(a){return e((this.negative|a.negative)===0),this.iuxor(a)},n.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},n.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},n.prototype.inotn=function(a){e(typeof a=="number"&&a>=0);var f=Math.ceil(a/26)|0,l=a%26;this._expand(f),l>0&&f--;for(var d=0;d<f;d++)this.words[d]=~this.words[d]&67108863;return l>0&&(this.words[d]=~this.words[d]&67108863>>26-l),this._strip()},n.prototype.notn=function(a){return this.clone().inotn(a)},n.prototype.setn=function(a,f){e(typeof a=="number"&&a>=0);var l=a/26|0,d=a%26;return this._expand(l+1),f?this.words[l]=this.words[l]|1<<d:this.words[l]=this.words[l]&~(1<<d),this._strip()},n.prototype.iadd=function(a){var f;if(this.negative!==0&&a.negative===0)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();var l,d;this.length>a.length?(l=this,d=a):(l=a,d=this);for(var m=0,v=0;v<d.length;v++)f=(l.words[v]|0)+(d.words[v]|0)+m,this.words[v]=f&67108863,m=f>>>26;for(;m!==0&&v<l.length;v++)f=(l.words[v]|0)+m,this.words[v]=f&67108863,m=f>>>26;if(this.length=l.length,m!==0)this.words[this.length]=m,this.length++;else if(l!==this)for(;v<l.length;v++)this.words[v]=l.words[v];return this},n.prototype.add=function(a){var f;return a.negative!==0&&this.negative===0?(a.negative=0,f=this.sub(a),a.negative^=1,f):a.negative===0&&this.negative!==0?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},n.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var l=this.cmp(a);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,m;l>0?(d=this,m=a):(d=a,m=this);for(var v=0,_=0;_<m.length;_++)f=(d.words[_]|0)-(m.words[_]|0)+v,v=f>>26,this.words[_]=f&67108863;for(;v!==0&&_<d.length;_++)f=(d.words[_]|0)+v,v=f>>26,this.words[_]=f&67108863;if(v===0&&_<d.length&&d!==this)for(;_<d.length;_++)this.words[_]=d.words[_];return this.length=Math.max(this.length,_),d!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(a){return this.clone().isub(a)};function O(y,a,f){f.negative=a.negative^y.negative;var l=y.length+a.length|0;f.length=l,l=l-1|0;var d=y.words[0]|0,m=a.words[0]|0,v=d*m,_=v&67108863,g=v/67108864|0;f.words[0]=_;for(var c=1;c<l;c++){for(var b=g>>>26,F=g&67108863,V=Math.min(c,a.length-1),j=Math.max(0,c-y.length+1);j<=V;j++){var et=c-j|0;d=y.words[et]|0,m=a.words[j]|0,v=d*m+F,b+=v/67108864|0,F=v&67108863}f.words[c]=F|0,g=b|0}return g!==0?f.words[c]=g|0:f.length--,f._strip()}var N=function(a,f,l){var d=a.words,m=f.words,v=l.words,_=0,g,c,b,F=d[0]|0,V=F&8191,j=F>>>13,et=d[1]|0,mt=et&8191,vt=et>>>13,or=d[2]|0,kt=or&8191,It=or>>>13,Ci=d[3]|0,Ot=Ci&8191,Ct=Ci>>>13,Ni=d[4]|0,Nt=Ni&8191,zt=Ni>>>13,zi=d[5]|0,Ut=zi&8191,Kt=zi>>>13,Ui=d[6]|0,Wt=Ui&8191,qt=Ui>>>13,Ki=d[7]|0,Ht=Ki&8191,Dt=Ki>>>13,Wi=d[8]|0,Ft=Wi&8191,Vt=Wi>>>13,qi=d[9]|0,$t=qi&8191,Gt=qi>>>13,Hi=m[0]|0,jt=Hi&8191,Zt=Hi>>>13,Di=m[1]|0,Yt=Di&8191,Xt=Di>>>13,Fi=m[2]|0,Jt=Fi&8191,Qt=Fi>>>13,Vi=m[3]|0,te=Vi&8191,ee=Vi>>>13,$i=m[4]|0,re=$i&8191,ne=$i>>>13,Gi=m[5]|0,se=Gi&8191,oe=Gi>>>13,ji=m[6]|0,ie=ji&8191,ae=ji>>>13,Zi=m[7]|0,ce=Zi&8191,ue=Zi>>>13,Yi=m[8]|0,fe=Yi&8191,he=Yi>>>13,Xi=m[9]|0,le=Xi&8191,de=Xi>>>13;l.negative=a.negative^f.negative,l.length=19,g=Math.imul(V,jt),c=Math.imul(V,Zt),c=c+Math.imul(j,jt)|0,b=Math.imul(j,Zt);var io=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(io>>>26)|0,io&=67108863,g=Math.imul(mt,jt),c=Math.imul(mt,Zt),c=c+Math.imul(vt,jt)|0,b=Math.imul(vt,Zt),g=g+Math.imul(V,Yt)|0,c=c+Math.imul(V,Xt)|0,c=c+Math.imul(j,Yt)|0,b=b+Math.imul(j,Xt)|0;var ao=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(ao>>>26)|0,ao&=67108863,g=Math.imul(kt,jt),c=Math.imul(kt,Zt),c=c+Math.imul(It,jt)|0,b=Math.imul(It,Zt),g=g+Math.imul(mt,Yt)|0,c=c+Math.imul(mt,Xt)|0,c=c+Math.imul(vt,Yt)|0,b=b+Math.imul(vt,Xt)|0,g=g+Math.imul(V,Jt)|0,c=c+Math.imul(V,Qt)|0,c=c+Math.imul(j,Jt)|0,b=b+Math.imul(j,Qt)|0;var co=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(co>>>26)|0,co&=67108863,g=Math.imul(Ot,jt),c=Math.imul(Ot,Zt),c=c+Math.imul(Ct,jt)|0,b=Math.imul(Ct,Zt),g=g+Math.imul(kt,Yt)|0,c=c+Math.imul(kt,Xt)|0,c=c+Math.imul(It,Yt)|0,b=b+Math.imul(It,Xt)|0,g=g+Math.imul(mt,Jt)|0,c=c+Math.imul(mt,Qt)|0,c=c+Math.imul(vt,Jt)|0,b=b+Math.imul(vt,Qt)|0,g=g+Math.imul(V,te)|0,c=c+Math.imul(V,ee)|0,c=c+Math.imul(j,te)|0,b=b+Math.imul(j,ee)|0;var uo=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(uo>>>26)|0,uo&=67108863,g=Math.imul(Nt,jt),c=Math.imul(Nt,Zt),c=c+Math.imul(zt,jt)|0,b=Math.imul(zt,Zt),g=g+Math.imul(Ot,Yt)|0,c=c+Math.imul(Ot,Xt)|0,c=c+Math.imul(Ct,Yt)|0,b=b+Math.imul(Ct,Xt)|0,g=g+Math.imul(kt,Jt)|0,c=c+Math.imul(kt,Qt)|0,c=c+Math.imul(It,Jt)|0,b=b+Math.imul(It,Qt)|0,g=g+Math.imul(mt,te)|0,c=c+Math.imul(mt,ee)|0,c=c+Math.imul(vt,te)|0,b=b+Math.imul(vt,ee)|0,g=g+Math.imul(V,re)|0,c=c+Math.imul(V,ne)|0,c=c+Math.imul(j,re)|0,b=b+Math.imul(j,ne)|0;var fo=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(fo>>>26)|0,fo&=67108863,g=Math.imul(Ut,jt),c=Math.imul(Ut,Zt),c=c+Math.imul(Kt,jt)|0,b=Math.imul(Kt,Zt),g=g+Math.imul(Nt,Yt)|0,c=c+Math.imul(Nt,Xt)|0,c=c+Math.imul(zt,Yt)|0,b=b+Math.imul(zt,Xt)|0,g=g+Math.imul(Ot,Jt)|0,c=c+Math.imul(Ot,Qt)|0,c=c+Math.imul(Ct,Jt)|0,b=b+Math.imul(Ct,Qt)|0,g=g+Math.imul(kt,te)|0,c=c+Math.imul(kt,ee)|0,c=c+Math.imul(It,te)|0,b=b+Math.imul(It,ee)|0,g=g+Math.imul(mt,re)|0,c=c+Math.imul(mt,ne)|0,c=c+Math.imul(vt,re)|0,b=b+Math.imul(vt,ne)|0,g=g+Math.imul(V,se)|0,c=c+Math.imul(V,oe)|0,c=c+Math.imul(j,se)|0,b=b+Math.imul(j,oe)|0;var ho=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(ho>>>26)|0,ho&=67108863,g=Math.imul(Wt,jt),c=Math.imul(Wt,Zt),c=c+Math.imul(qt,jt)|0,b=Math.imul(qt,Zt),g=g+Math.imul(Ut,Yt)|0,c=c+Math.imul(Ut,Xt)|0,c=c+Math.imul(Kt,Yt)|0,b=b+Math.imul(Kt,Xt)|0,g=g+Math.imul(Nt,Jt)|0,c=c+Math.imul(Nt,Qt)|0,c=c+Math.imul(zt,Jt)|0,b=b+Math.imul(zt,Qt)|0,g=g+Math.imul(Ot,te)|0,c=c+Math.imul(Ot,ee)|0,c=c+Math.imul(Ct,te)|0,b=b+Math.imul(Ct,ee)|0,g=g+Math.imul(kt,re)|0,c=c+Math.imul(kt,ne)|0,c=c+Math.imul(It,re)|0,b=b+Math.imul(It,ne)|0,g=g+Math.imul(mt,se)|0,c=c+Math.imul(mt,oe)|0,c=c+Math.imul(vt,se)|0,b=b+Math.imul(vt,oe)|0,g=g+Math.imul(V,ie)|0,c=c+Math.imul(V,ae)|0,c=c+Math.imul(j,ie)|0,b=b+Math.imul(j,ae)|0;var lo=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(lo>>>26)|0,lo&=67108863,g=Math.imul(Ht,jt),c=Math.imul(Ht,Zt),c=c+Math.imul(Dt,jt)|0,b=Math.imul(Dt,Zt),g=g+Math.imul(Wt,Yt)|0,c=c+Math.imul(Wt,Xt)|0,c=c+Math.imul(qt,Yt)|0,b=b+Math.imul(qt,Xt)|0,g=g+Math.imul(Ut,Jt)|0,c=c+Math.imul(Ut,Qt)|0,c=c+Math.imul(Kt,Jt)|0,b=b+Math.imul(Kt,Qt)|0,g=g+Math.imul(Nt,te)|0,c=c+Math.imul(Nt,ee)|0,c=c+Math.imul(zt,te)|0,b=b+Math.imul(zt,ee)|0,g=g+Math.imul(Ot,re)|0,c=c+Math.imul(Ot,ne)|0,c=c+Math.imul(Ct,re)|0,b=b+Math.imul(Ct,ne)|0,g=g+Math.imul(kt,se)|0,c=c+Math.imul(kt,oe)|0,c=c+Math.imul(It,se)|0,b=b+Math.imul(It,oe)|0,g=g+Math.imul(mt,ie)|0,c=c+Math.imul(mt,ae)|0,c=c+Math.imul(vt,ie)|0,b=b+Math.imul(vt,ae)|0,g=g+Math.imul(V,ce)|0,c=c+Math.imul(V,ue)|0,c=c+Math.imul(j,ce)|0,b=b+Math.imul(j,ue)|0;var po=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(po>>>26)|0,po&=67108863,g=Math.imul(Ft,jt),c=Math.imul(Ft,Zt),c=c+Math.imul(Vt,jt)|0,b=Math.imul(Vt,Zt),g=g+Math.imul(Ht,Yt)|0,c=c+Math.imul(Ht,Xt)|0,c=c+Math.imul(Dt,Yt)|0,b=b+Math.imul(Dt,Xt)|0,g=g+Math.imul(Wt,Jt)|0,c=c+Math.imul(Wt,Qt)|0,c=c+Math.imul(qt,Jt)|0,b=b+Math.imul(qt,Qt)|0,g=g+Math.imul(Ut,te)|0,c=c+Math.imul(Ut,ee)|0,c=c+Math.imul(Kt,te)|0,b=b+Math.imul(Kt,ee)|0,g=g+Math.imul(Nt,re)|0,c=c+Math.imul(Nt,ne)|0,c=c+Math.imul(zt,re)|0,b=b+Math.imul(zt,ne)|0,g=g+Math.imul(Ot,se)|0,c=c+Math.imul(Ot,oe)|0,c=c+Math.imul(Ct,se)|0,b=b+Math.imul(Ct,oe)|0,g=g+Math.imul(kt,ie)|0,c=c+Math.imul(kt,ae)|0,c=c+Math.imul(It,ie)|0,b=b+Math.imul(It,ae)|0,g=g+Math.imul(mt,ce)|0,c=c+Math.imul(mt,ue)|0,c=c+Math.imul(vt,ce)|0,b=b+Math.imul(vt,ue)|0,g=g+Math.imul(V,fe)|0,c=c+Math.imul(V,he)|0,c=c+Math.imul(j,fe)|0,b=b+Math.imul(j,he)|0;var yo=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(yo>>>26)|0,yo&=67108863,g=Math.imul($t,jt),c=Math.imul($t,Zt),c=c+Math.imul(Gt,jt)|0,b=Math.imul(Gt,Zt),g=g+Math.imul(Ft,Yt)|0,c=c+Math.imul(Ft,Xt)|0,c=c+Math.imul(Vt,Yt)|0,b=b+Math.imul(Vt,Xt)|0,g=g+Math.imul(Ht,Jt)|0,c=c+Math.imul(Ht,Qt)|0,c=c+Math.imul(Dt,Jt)|0,b=b+Math.imul(Dt,Qt)|0,g=g+Math.imul(Wt,te)|0,c=c+Math.imul(Wt,ee)|0,c=c+Math.imul(qt,te)|0,b=b+Math.imul(qt,ee)|0,g=g+Math.imul(Ut,re)|0,c=c+Math.imul(Ut,ne)|0,c=c+Math.imul(Kt,re)|0,b=b+Math.imul(Kt,ne)|0,g=g+Math.imul(Nt,se)|0,c=c+Math.imul(Nt,oe)|0,c=c+Math.imul(zt,se)|0,b=b+Math.imul(zt,oe)|0,g=g+Math.imul(Ot,ie)|0,c=c+Math.imul(Ot,ae)|0,c=c+Math.imul(Ct,ie)|0,b=b+Math.imul(Ct,ae)|0,g=g+Math.imul(kt,ce)|0,c=c+Math.imul(kt,ue)|0,c=c+Math.imul(It,ce)|0,b=b+Math.imul(It,ue)|0,g=g+Math.imul(mt,fe)|0,c=c+Math.imul(mt,he)|0,c=c+Math.imul(vt,fe)|0,b=b+Math.imul(vt,he)|0,g=g+Math.imul(V,le)|0,c=c+Math.imul(V,de)|0,c=c+Math.imul(j,le)|0,b=b+Math.imul(j,de)|0;var go=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(go>>>26)|0,go&=67108863,g=Math.imul($t,Yt),c=Math.imul($t,Xt),c=c+Math.imul(Gt,Yt)|0,b=Math.imul(Gt,Xt),g=g+Math.imul(Ft,Jt)|0,c=c+Math.imul(Ft,Qt)|0,c=c+Math.imul(Vt,Jt)|0,b=b+Math.imul(Vt,Qt)|0,g=g+Math.imul(Ht,te)|0,c=c+Math.imul(Ht,ee)|0,c=c+Math.imul(Dt,te)|0,b=b+Math.imul(Dt,ee)|0,g=g+Math.imul(Wt,re)|0,c=c+Math.imul(Wt,ne)|0,c=c+Math.imul(qt,re)|0,b=b+Math.imul(qt,ne)|0,g=g+Math.imul(Ut,se)|0,c=c+Math.imul(Ut,oe)|0,c=c+Math.imul(Kt,se)|0,b=b+Math.imul(Kt,oe)|0,g=g+Math.imul(Nt,ie)|0,c=c+Math.imul(Nt,ae)|0,c=c+Math.imul(zt,ie)|0,b=b+Math.imul(zt,ae)|0,g=g+Math.imul(Ot,ce)|0,c=c+Math.imul(Ot,ue)|0,c=c+Math.imul(Ct,ce)|0,b=b+Math.imul(Ct,ue)|0,g=g+Math.imul(kt,fe)|0,c=c+Math.imul(kt,he)|0,c=c+Math.imul(It,fe)|0,b=b+Math.imul(It,he)|0,g=g+Math.imul(mt,le)|0,c=c+Math.imul(mt,de)|0,c=c+Math.imul(vt,le)|0,b=b+Math.imul(vt,de)|0;var mo=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(mo>>>26)|0,mo&=67108863,g=Math.imul($t,Jt),c=Math.imul($t,Qt),c=c+Math.imul(Gt,Jt)|0,b=Math.imul(Gt,Qt),g=g+Math.imul(Ft,te)|0,c=c+Math.imul(Ft,ee)|0,c=c+Math.imul(Vt,te)|0,b=b+Math.imul(Vt,ee)|0,g=g+Math.imul(Ht,re)|0,c=c+Math.imul(Ht,ne)|0,c=c+Math.imul(Dt,re)|0,b=b+Math.imul(Dt,ne)|0,g=g+Math.imul(Wt,se)|0,c=c+Math.imul(Wt,oe)|0,c=c+Math.imul(qt,se)|0,b=b+Math.imul(qt,oe)|0,g=g+Math.imul(Ut,ie)|0,c=c+Math.imul(Ut,ae)|0,c=c+Math.imul(Kt,ie)|0,b=b+Math.imul(Kt,ae)|0,g=g+Math.imul(Nt,ce)|0,c=c+Math.imul(Nt,ue)|0,c=c+Math.imul(zt,ce)|0,b=b+Math.imul(zt,ue)|0,g=g+Math.imul(Ot,fe)|0,c=c+Math.imul(Ot,he)|0,c=c+Math.imul(Ct,fe)|0,b=b+Math.imul(Ct,he)|0,g=g+Math.imul(kt,le)|0,c=c+Math.imul(kt,de)|0,c=c+Math.imul(It,le)|0,b=b+Math.imul(It,de)|0;var bo=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(bo>>>26)|0,bo&=67108863,g=Math.imul($t,te),c=Math.imul($t,ee),c=c+Math.imul(Gt,te)|0,b=Math.imul(Gt,ee),g=g+Math.imul(Ft,re)|0,c=c+Math.imul(Ft,ne)|0,c=c+Math.imul(Vt,re)|0,b=b+Math.imul(Vt,ne)|0,g=g+Math.imul(Ht,se)|0,c=c+Math.imul(Ht,oe)|0,c=c+Math.imul(Dt,se)|0,b=b+Math.imul(Dt,oe)|0,g=g+Math.imul(Wt,ie)|0,c=c+Math.imul(Wt,ae)|0,c=c+Math.imul(qt,ie)|0,b=b+Math.imul(qt,ae)|0,g=g+Math.imul(Ut,ce)|0,c=c+Math.imul(Ut,ue)|0,c=c+Math.imul(Kt,ce)|0,b=b+Math.imul(Kt,ue)|0,g=g+Math.imul(Nt,fe)|0,c=c+Math.imul(Nt,he)|0,c=c+Math.imul(zt,fe)|0,b=b+Math.imul(zt,he)|0,g=g+Math.imul(Ot,le)|0,c=c+Math.imul(Ot,de)|0,c=c+Math.imul(Ct,le)|0,b=b+Math.imul(Ct,de)|0;var wo=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(wo>>>26)|0,wo&=67108863,g=Math.imul($t,re),c=Math.imul($t,ne),c=c+Math.imul(Gt,re)|0,b=Math.imul(Gt,ne),g=g+Math.imul(Ft,se)|0,c=c+Math.imul(Ft,oe)|0,c=c+Math.imul(Vt,se)|0,b=b+Math.imul(Vt,oe)|0,g=g+Math.imul(Ht,ie)|0,c=c+Math.imul(Ht,ae)|0,c=c+Math.imul(Dt,ie)|0,b=b+Math.imul(Dt,ae)|0,g=g+Math.imul(Wt,ce)|0,c=c+Math.imul(Wt,ue)|0,c=c+Math.imul(qt,ce)|0,b=b+Math.imul(qt,ue)|0,g=g+Math.imul(Ut,fe)|0,c=c+Math.imul(Ut,he)|0,c=c+Math.imul(Kt,fe)|0,b=b+Math.imul(Kt,he)|0,g=g+Math.imul(Nt,le)|0,c=c+Math.imul(Nt,de)|0,c=c+Math.imul(zt,le)|0,b=b+Math.imul(zt,de)|0;var vo=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(vo>>>26)|0,vo&=67108863,g=Math.imul($t,se),c=Math.imul($t,oe),c=c+Math.imul(Gt,se)|0,b=Math.imul(Gt,oe),g=g+Math.imul(Ft,ie)|0,c=c+Math.imul(Ft,ae)|0,c=c+Math.imul(Vt,ie)|0,b=b+Math.imul(Vt,ae)|0,g=g+Math.imul(Ht,ce)|0,c=c+Math.imul(Ht,ue)|0,c=c+Math.imul(Dt,ce)|0,b=b+Math.imul(Dt,ue)|0,g=g+Math.imul(Wt,fe)|0,c=c+Math.imul(Wt,he)|0,c=c+Math.imul(qt,fe)|0,b=b+Math.imul(qt,he)|0,g=g+Math.imul(Ut,le)|0,c=c+Math.imul(Ut,de)|0,c=c+Math.imul(Kt,le)|0,b=b+Math.imul(Kt,de)|0;var ko=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(ko>>>26)|0,ko&=67108863,g=Math.imul($t,ie),c=Math.imul($t,ae),c=c+Math.imul(Gt,ie)|0,b=Math.imul(Gt,ae),g=g+Math.imul(Ft,ce)|0,c=c+Math.imul(Ft,ue)|0,c=c+Math.imul(Vt,ce)|0,b=b+Math.imul(Vt,ue)|0,g=g+Math.imul(Ht,fe)|0,c=c+Math.imul(Ht,he)|0,c=c+Math.imul(Dt,fe)|0,b=b+Math.imul(Dt,he)|0,g=g+Math.imul(Wt,le)|0,c=c+Math.imul(Wt,de)|0,c=c+Math.imul(qt,le)|0,b=b+Math.imul(qt,de)|0;var xo=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(xo>>>26)|0,xo&=67108863,g=Math.imul($t,ce),c=Math.imul($t,ue),c=c+Math.imul(Gt,ce)|0,b=Math.imul(Gt,ue),g=g+Math.imul(Ft,fe)|0,c=c+Math.imul(Ft,he)|0,c=c+Math.imul(Vt,fe)|0,b=b+Math.imul(Vt,he)|0,g=g+Math.imul(Ht,le)|0,c=c+Math.imul(Ht,de)|0,c=c+Math.imul(Dt,le)|0,b=b+Math.imul(Dt,de)|0;var So=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(So>>>26)|0,So&=67108863,g=Math.imul($t,fe),c=Math.imul($t,he),c=c+Math.imul(Gt,fe)|0,b=Math.imul(Gt,he),g=g+Math.imul(Ft,le)|0,c=c+Math.imul(Ft,de)|0,c=c+Math.imul(Vt,le)|0,b=b+Math.imul(Vt,de)|0;var _o=(_+g|0)+((c&8191)<<13)|0;_=(b+(c>>>13)|0)+(_o>>>26)|0,_o&=67108863,g=Math.imul($t,le),c=Math.imul($t,de),c=c+Math.imul(Gt,le)|0,b=Math.imul(Gt,de);var Io=(_+g|0)+((c&8191)<<13)|0;return _=(b+(c>>>13)|0)+(Io>>>26)|0,Io&=67108863,v[0]=io,v[1]=ao,v[2]=co,v[3]=uo,v[4]=fo,v[5]=ho,v[6]=lo,v[7]=po,v[8]=yo,v[9]=go,v[10]=mo,v[11]=bo,v[12]=wo,v[13]=vo,v[14]=ko,v[15]=xo,v[16]=So,v[17]=_o,v[18]=Io,_!==0&&(v[19]=_,l.length++),l};Math.imul||(N=O);function Y(y,a,f){f.negative=a.negative^y.negative,f.length=y.length+a.length;for(var l=0,d=0,m=0;m<f.length-1;m++){var v=d;d=0;for(var _=l&67108863,g=Math.min(m,a.length-1),c=Math.max(0,m-y.length+1);c<=g;c++){var b=m-c,F=y.words[b]|0,V=a.words[c]|0,j=F*V,et=j&67108863;v=v+(j/67108864|0)|0,et=et+_|0,_=et&67108863,v=v+(et>>>26)|0,d+=v>>>26,v&=67108863}f.words[m]=_,l=v,v=d}return l!==0?f.words[m]=l:f.length--,f._strip()}function H(y,a,f){return Y(y,a,f)}n.prototype.mulTo=function(a,f){var l,d=this.length+a.length;return this.length===10&&a.length===10?l=N(this,a,f):d<63?l=O(this,a,f):d<1024?l=Y(this,a,f):l=H(this,a,f),l};function X(y,a){this.x=y,this.y=a}X.prototype.makeRBT=function(a){for(var f=new Array(a),l=n.prototype._countBits(a)-1,d=0;d<a;d++)f[d]=this.revBin(d,l,a);return f},X.prototype.revBin=function(a,f,l){if(a===0||a===l-1)return a;for(var d=0,m=0;m<f;m++)d|=(a&1)<<f-m-1,a>>=1;return d},X.prototype.permute=function(a,f,l,d,m,v){for(var _=0;_<v;_++)d[_]=f[a[_]],m[_]=l[a[_]]},X.prototype.transform=function(a,f,l,d,m,v){this.permute(v,a,f,l,d,m);for(var _=1;_<m;_<<=1)for(var g=_<<1,c=Math.cos(2*Math.PI/g),b=Math.sin(2*Math.PI/g),F=0;F<m;F+=g)for(var V=c,j=b,et=0;et<_;et++){var mt=l[F+et],vt=d[F+et],or=l[F+et+_],kt=d[F+et+_],It=V*or-j*kt;kt=V*kt+j*or,or=It,l[F+et]=mt+or,d[F+et]=vt+kt,l[F+et+_]=mt-or,d[F+et+_]=vt-kt,et!==g&&(It=c*V-b*j,j=c*j+b*V,V=It)}},X.prototype.guessLen13b=function(a,f){var l=Math.max(f,a)|1,d=l&1,m=0;for(l=l/2|0;l;l=l>>>1)m++;return 1<<m+1+d},X.prototype.conjugate=function(a,f,l){if(!(l<=1))for(var d=0;d<l/2;d++){var m=a[d];a[d]=a[l-d-1],a[l-d-1]=m,m=f[d],f[d]=-f[l-d-1],f[l-d-1]=-m}},X.prototype.normalize13b=function(a,f){for(var l=0,d=0;d<f/2;d++){var m=Math.round(a[2*d+1]/f)*8192+Math.round(a[2*d]/f)+l;a[d]=m&67108863,m<67108864?l=0:l=m/67108864|0}return a},X.prototype.convert13b=function(a,f,l,d){for(var m=0,v=0;v<f;v++)m=m+(a[v]|0),l[2*v]=m&8191,m=m>>>13,l[2*v+1]=m&8191,m=m>>>13;for(v=2*f;v<d;++v)l[v]=0;e(m===0),e((m&-8192)===0)},X.prototype.stub=function(a){for(var f=new Array(a),l=0;l<a;l++)f[l]=0;return f},X.prototype.mulp=function(a,f,l){var d=2*this.guessLen13b(a.length,f.length),m=this.makeRBT(d),v=this.stub(d),_=new Array(d),g=new Array(d),c=new Array(d),b=new Array(d),F=new Array(d),V=new Array(d),j=l.words;j.length=d,this.convert13b(a.words,a.length,_,d),this.convert13b(f.words,f.length,b,d),this.transform(_,v,g,c,d,m),this.transform(b,v,F,V,d,m);for(var et=0;et<d;et++){var mt=g[et]*F[et]-c[et]*V[et];c[et]=g[et]*V[et]+c[et]*F[et],g[et]=mt}return this.conjugate(g,c,d),this.transform(g,c,j,v,d,m),this.conjugate(j,v,d),this.normalize13b(j,d),l.negative=a.negative^f.negative,l.length=a.length+f.length,l._strip()},n.prototype.mul=function(a){var f=new n(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},n.prototype.mulf=function(a){var f=new n(null);return f.words=new Array(this.length+a.length),H(this,a,f)},n.prototype.imul=function(a){return this.clone().mulTo(a,this)},n.prototype.imuln=function(a){var f=a<0;f&&(a=-a),e(typeof a=="number"),e(a<67108864);for(var l=0,d=0;d<this.length;d++){var m=(this.words[d]|0)*a,v=(m&67108863)+(l&67108863);l>>=26,l+=m/67108864|0,l+=v>>>26,this.words[d]=v&67108863}return l!==0&&(this.words[d]=l,this.length++),f?this.ineg():this},n.prototype.muln=function(a){return this.clone().imuln(a)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(a){var f=B(a);if(f.length===0)return new n(1);for(var l=this,d=0;d<f.length&&f[d]===0;d++,l=l.sqr());if(++d<f.length)for(var m=l.sqr();d<f.length;d++,m=m.sqr())f[d]!==0&&(l=l.mul(m));return l},n.prototype.iushln=function(a){e(typeof a=="number"&&a>=0);var f=a%26,l=(a-f)/26,d=67108863>>>26-f<<26-f,m;if(f!==0){var v=0;for(m=0;m<this.length;m++){var _=this.words[m]&d,g=(this.words[m]|0)-_<<f;this.words[m]=g|v,v=_>>>26-f}v&&(this.words[m]=v,this.length++)}if(l!==0){for(m=this.length-1;m>=0;m--)this.words[m+l]=this.words[m];for(m=0;m<l;m++)this.words[m]=0;this.length+=l}return this._strip()},n.prototype.ishln=function(a){return e(this.negative===0),this.iushln(a)},n.prototype.iushrn=function(a,f,l){e(typeof a=="number"&&a>=0);var d;f?d=(f-f%26)/26:d=0;var m=a%26,v=Math.min((a-m)/26,this.length),_=67108863^67108863>>>m<<m,g=l;if(d-=v,d=Math.max(0,d),g){for(var c=0;c<v;c++)g.words[c]=this.words[c];g.length=v}if(v!==0)if(this.length>v)for(this.length-=v,c=0;c<this.length;c++)this.words[c]=this.words[c+v];else this.words[0]=0,this.length=1;var b=0;for(c=this.length-1;c>=0&&(b!==0||c>=d);c--){var F=this.words[c]|0;this.words[c]=b<<26-m|F>>>m,b=F&_}return g&&b!==0&&(g.words[g.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(a,f,l){return e(this.negative===0),this.iushrn(a,f,l)},n.prototype.shln=function(a){return this.clone().ishln(a)},n.prototype.ushln=function(a){return this.clone().iushln(a)},n.prototype.shrn=function(a){return this.clone().ishrn(a)},n.prototype.ushrn=function(a){return this.clone().iushrn(a)},n.prototype.testn=function(a){e(typeof a=="number"&&a>=0);var f=a%26,l=(a-f)/26,d=1<<f;if(this.length<=l)return!1;var m=this.words[l];return!!(m&d)},n.prototype.imaskn=function(a){e(typeof a=="number"&&a>=0);var f=a%26,l=(a-f)/26;if(e(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(f!==0&&l++,this.length=Math.min(l,this.length),f!==0){var d=67108863^67108863>>>f<<f;this.words[this.length-1]&=d}return this._strip()},n.prototype.maskn=function(a){return this.clone().imaskn(a)},n.prototype.iaddn=function(a){return e(typeof a=="number"),e(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},n.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},n.prototype.isubn=function(a){if(e(typeof a=="number"),e(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},n.prototype.addn=function(a){return this.clone().iaddn(a)},n.prototype.subn=function(a){return this.clone().isubn(a)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(a,f,l){var d=a.length+l,m;this._expand(d);var v,_=0;for(m=0;m<a.length;m++){v=(this.words[m+l]|0)+_;var g=(a.words[m]|0)*f;v-=g&67108863,_=(v>>26)-(g/67108864|0),this.words[m+l]=v&67108863}for(;m<this.length-l;m++)v=(this.words[m+l]|0)+_,_=v>>26,this.words[m+l]=v&67108863;if(_===0)return this._strip();for(e(_===-1),_=0,m=0;m<this.length;m++)v=-(this.words[m]|0)+_,_=v>>26,this.words[m]=v&67108863;return this.negative=1,this._strip()},n.prototype._wordDiv=function(a,f){var l=this.length-a.length,d=this.clone(),m=a,v=m.words[m.length-1]|0,_=this._countBits(v);l=26-_,l!==0&&(m=m.ushln(l),d.iushln(l),v=m.words[m.length-1]|0);var g=d.length-m.length,c;if(f!=="mod"){c=new n(null),c.length=g+1,c.words=new Array(c.length);for(var b=0;b<c.length;b++)c.words[b]=0}var F=d.clone()._ishlnsubmul(m,1,g);F.negative===0&&(d=F,c&&(c.words[g]=1));for(var V=g-1;V>=0;V--){var j=(d.words[m.length+V]|0)*67108864+(d.words[m.length+V-1]|0);for(j=Math.min(j/v|0,67108863),d._ishlnsubmul(m,j,V);d.negative!==0;)j--,d.negative=0,d._ishlnsubmul(m,1,V),d.isZero()||(d.negative^=1);c&&(c.words[V]=j)}return c&&c._strip(),d._strip(),f!=="div"&&l!==0&&d.iushrn(l),{div:c||null,mod:d}},n.prototype.divmod=function(a,f,l){if(e(!a.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var d,m,v;return this.negative!==0&&a.negative===0?(v=this.neg().divmod(a,f),f!=="mod"&&(d=v.div.neg()),f!=="div"&&(m=v.mod.neg(),l&&m.negative!==0&&m.iadd(a)),{div:d,mod:m}):this.negative===0&&a.negative!==0?(v=this.divmod(a.neg(),f),f!=="mod"&&(d=v.div.neg()),{div:d,mod:v.mod}):(this.negative&a.negative)!==0?(v=this.neg().divmod(a.neg(),f),f!=="div"&&(m=v.mod.neg(),l&&m.negative!==0&&m.isub(a)),{div:v.div,mod:m}):a.length>this.length||this.cmp(a)<0?{div:new n(0),mod:this}:a.length===1?f==="div"?{div:this.divn(a.words[0]),mod:null}:f==="mod"?{div:null,mod:new n(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new n(this.modrn(a.words[0]))}:this._wordDiv(a,f)},n.prototype.div=function(a){return this.divmod(a,"div",!1).div},n.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},n.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},n.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var l=f.div.negative!==0?f.mod.isub(a):f.mod,d=a.ushrn(1),m=a.andln(1),v=l.cmp(d);return v<0||m===1&&v===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},n.prototype.modrn=function(a){var f=a<0;f&&(a=-a),e(a<=67108863);for(var l=(1<<26)%a,d=0,m=this.length-1;m>=0;m--)d=(l*d+(this.words[m]|0))%a;return f?-d:d},n.prototype.modn=function(a){return this.modrn(a)},n.prototype.idivn=function(a){var f=a<0;f&&(a=-a),e(a<=67108863);for(var l=0,d=this.length-1;d>=0;d--){var m=(this.words[d]|0)+l*67108864;this.words[d]=m/a|0,l=m%a}return this._strip(),f?this.ineg():this},n.prototype.divn=function(a){return this.clone().idivn(a)},n.prototype.egcd=function(a){e(a.negative===0),e(!a.isZero());var f=this,l=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var d=new n(1),m=new n(0),v=new n(0),_=new n(1),g=0;f.isEven()&&l.isEven();)f.iushrn(1),l.iushrn(1),++g;for(var c=l.clone(),b=f.clone();!f.isZero();){for(var F=0,V=1;(f.words[0]&V)===0&&F<26;++F,V<<=1);if(F>0)for(f.iushrn(F);F-- >0;)(d.isOdd()||m.isOdd())&&(d.iadd(c),m.isub(b)),d.iushrn(1),m.iushrn(1);for(var j=0,et=1;(l.words[0]&et)===0&&j<26;++j,et<<=1);if(j>0)for(l.iushrn(j);j-- >0;)(v.isOdd()||_.isOdd())&&(v.iadd(c),_.isub(b)),v.iushrn(1),_.iushrn(1);f.cmp(l)>=0?(f.isub(l),d.isub(v),m.isub(_)):(l.isub(f),v.isub(d),_.isub(m))}return{a:v,b:_,gcd:l.iushln(g)}},n.prototype._invmp=function(a){e(a.negative===0),e(!a.isZero());var f=this,l=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var d=new n(1),m=new n(0),v=l.clone();f.cmpn(1)>0&&l.cmpn(1)>0;){for(var _=0,g=1;(f.words[0]&g)===0&&_<26;++_,g<<=1);if(_>0)for(f.iushrn(_);_-- >0;)d.isOdd()&&d.iadd(v),d.iushrn(1);for(var c=0,b=1;(l.words[0]&b)===0&&c<26;++c,b<<=1);if(c>0)for(l.iushrn(c);c-- >0;)m.isOdd()&&m.iadd(v),m.iushrn(1);f.cmp(l)>=0?(f.isub(l),d.isub(m)):(l.isub(f),m.isub(d))}var F;return f.cmpn(1)===0?F=d:F=m,F.cmpn(0)<0&&F.iadd(a),F},n.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),l=a.clone();f.negative=0,l.negative=0;for(var d=0;f.isEven()&&l.isEven();d++)f.iushrn(1),l.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;l.isEven();)l.iushrn(1);var m=f.cmp(l);if(m<0){var v=f;f=l,l=v}else if(m===0||l.cmpn(1)===0)break;f.isub(l)}while(!0);return l.iushln(d)},n.prototype.invm=function(a){return this.egcd(a).a.umod(a)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(a){return this.words[0]&a},n.prototype.bincn=function(a){e(typeof a=="number");var f=a%26,l=(a-f)/26,d=1<<f;if(this.length<=l)return this._expand(l+1),this.words[l]|=d,this;for(var m=d,v=l;m!==0&&v<this.length;v++){var _=this.words[v]|0;_+=m,m=_>>>26,_&=67108863,this.words[v]=_}return m!==0&&(this.words[v]=m,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(a){var f=a<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var l;if(this.length>1)l=1;else{f&&(a=-a),e(a<=67108863,"Number is too big");var d=this.words[0]|0;l=d===a?0:d<a?-1:1}return this.negative!==0?-l|0:l},n.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var f=this.ucmp(a);return this.negative!==0?-f|0:f},n.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,l=this.length-1;l>=0;l--){var d=this.words[l]|0,m=a.words[l]|0;if(d!==m){d<m?f=-1:d>m&&(f=1);break}}return f},n.prototype.gtn=function(a){return this.cmpn(a)===1},n.prototype.gt=function(a){return this.cmp(a)===1},n.prototype.gten=function(a){return this.cmpn(a)>=0},n.prototype.gte=function(a){return this.cmp(a)>=0},n.prototype.ltn=function(a){return this.cmpn(a)===-1},n.prototype.lt=function(a){return this.cmp(a)===-1},n.prototype.lten=function(a){return this.cmpn(a)<=0},n.prototype.lte=function(a){return this.cmp(a)<=0},n.prototype.eqn=function(a){return this.cmpn(a)===0},n.prototype.eq=function(a){return this.cmp(a)===0},n.red=function(a){return new R(a)},n.prototype.toRed=function(a){return e(!this.red,"Already a number in reduction context"),e(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},n.prototype.fromRed=function(){return e(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(a){return this.red=a,this},n.prototype.forceRed=function(a){return e(!this.red,"Already a number in reduction context"),this._forceRed(a)},n.prototype.redAdd=function(a){return e(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},n.prototype.redIAdd=function(a){return e(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},n.prototype.redSub=function(a){return e(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},n.prototype.redISub=function(a){return e(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},n.prototype.redShl=function(a){return e(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},n.prototype.redMul=function(a){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},n.prototype.redIMul=function(a){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},n.prototype.redSqr=function(){return e(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return e(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return e(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return e(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return e(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(a){return e(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var gt={k256:null,p224:null,p192:null,p25519:null};function ot(y,a){this.name=y,this.p=new n(a,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ot.prototype._tmp=function(){var a=new n(null);return a.words=new Array(Math.ceil(this.n/13)),a},ot.prototype.ireduce=function(a){var f=a,l;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),l=f.bitLength();while(l>this.n);var d=l<this.n?-1:f.ucmp(this.p);return d===0?(f.words[0]=0,f.length=1):d>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},ot.prototype.split=function(a,f){a.iushrn(this.n,0,f)},ot.prototype.imulK=function(a){return a.imul(this.k)};function Et(){ot.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(Et,ot),Et.prototype.split=function(a,f){for(var l=4194303,d=Math.min(a.length,9),m=0;m<d;m++)f.words[m]=a.words[m];if(f.length=d,a.length<=9){a.words[0]=0,a.length=1;return}var v=a.words[9];for(f.words[f.length++]=v&l,m=10;m<a.length;m++){var _=a.words[m]|0;a.words[m-10]=(_&l)<<4|v>>>22,v=_}v>>>=22,a.words[m-10]=v,v===0&&a.length>10?a.length-=10:a.length-=9},Et.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,l=0;l<a.length;l++){var d=a.words[l]|0;f+=d*977,a.words[l]=f&67108863,f=d*64+(f/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function Tt(){ot.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(Tt,ot);function Ee(){ot.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(Ee,ot);function U(){ot.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(U,ot),U.prototype.imulK=function(a){for(var f=0,l=0;l<a.length;l++){var d=(a.words[l]|0)*19+f,m=d&67108863;d>>>=26,a.words[l]=m,f=d}return f!==0&&(a.words[a.length++]=f),a},n._prime=function(a){if(gt[a])return gt[a];var f;if(a==="k256")f=new Et;else if(a==="p224")f=new Tt;else if(a==="p192")f=new Ee;else if(a==="p25519")f=new U;else throw new Error("Unknown prime "+a);return gt[a]=f,f};function R(y){if(typeof y=="string"){var a=n._prime(y);this.m=a.p,this.prime=a}else e(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}R.prototype._verify1=function(a){e(a.negative===0,"red works only with positives"),e(a.red,"red works only with red numbers")},R.prototype._verify2=function(a,f){e((a.negative|f.negative)===0,"red works only with positives"),e(a.red&&a.red===f.red,"red works only with red numbers")},R.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(p(a,a.umod(this.m)._forceRed(this)),a)},R.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},R.prototype.add=function(a,f){this._verify2(a,f);var l=a.add(f);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},R.prototype.iadd=function(a,f){this._verify2(a,f);var l=a.iadd(f);return l.cmp(this.m)>=0&&l.isub(this.m),l},R.prototype.sub=function(a,f){this._verify2(a,f);var l=a.sub(f);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},R.prototype.isub=function(a,f){this._verify2(a,f);var l=a.isub(f);return l.cmpn(0)<0&&l.iadd(this.m),l},R.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},R.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},R.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},R.prototype.isqr=function(a){return this.imul(a,a.clone())},R.prototype.sqr=function(a){return this.mul(a,a)},R.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(e(f%2===1),f===3){var l=this.m.add(new n(1)).iushrn(2);return this.pow(a,l)}for(var d=this.m.subn(1),m=0;!d.isZero()&&d.andln(1)===0;)m++,d.iushrn(1);e(!d.isZero());var v=new n(1).toRed(this),_=v.redNeg(),g=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);this.pow(c,g).cmp(_)!==0;)c.redIAdd(_);for(var b=this.pow(c,d),F=this.pow(a,d.addn(1).iushrn(1)),V=this.pow(a,d),j=m;V.cmp(v)!==0;){for(var et=V,mt=0;et.cmp(v)!==0;mt++)et=et.redSqr();e(mt<j);var vt=this.pow(b,new n(1).iushln(j-mt-1));F=F.redMul(vt),b=vt.redSqr(),V=V.redMul(b),j=mt}return F},R.prototype.invm=function(a){var f=a._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},R.prototype.pow=function(a,f){if(f.isZero())return new n(1).toRed(this);if(f.cmpn(1)===0)return a.clone();var l=4,d=new Array(1<<l);d[0]=new n(1).toRed(this),d[1]=a;for(var m=2;m<d.length;m++)d[m]=this.mul(d[m-1],a);var v=d[0],_=0,g=0,c=f.bitLength()%26;for(c===0&&(c=26),m=f.length-1;m>=0;m--){for(var b=f.words[m],F=c-1;F>=0;F--){var V=b>>F&1;if(v!==d[0]&&(v=this.sqr(v)),V===0&&_===0){g=0;continue}_<<=1,_|=V,g++,!(g!==l&&(m!==0||F!==0))&&(v=this.mul(v,d[_]),g=0,_=0)}c=26}return v},R.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},R.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},n.mont=function(a){return new D(a)};function D(y){R.call(this,y),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(D,R),D.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},D.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},D.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var l=a.imul(f),d=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=l.isub(d).iushrn(this.shift),v=m;return m.cmp(this.m)>=0?v=m.isub(this.m):m.cmpn(0)<0&&(v=m.iadd(this.m)),v._forceRed(this)},D.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new n(0)._forceRed(this);var l=a.mul(f),d=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=l.isub(d).iushrn(this.shift),v=m;return m.cmp(this.m)>=0?v=m.isub(this.m):m.cmpn(0)<0&&(v=m.iadd(this.m)),v._forceRed(this)},D.prototype.invm=function(a){var f=this.imod(a._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(typeof zo>"u"||zo,ya)});var ba=Mt((B0,ma)=>{"use strict";T();P();var Jn=du().Buffer;function df(s){if(s.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<s.length;r++){var n=s.charAt(r),o=n.charCodeAt(0);if(t[o]!==255)throw new TypeError(n+" is ambiguous");t[o]=r}var i=s.length,u=s.charAt(0),h=Math.log(i)/Math.log(256),p=Math.log(256)/Math.log(i);function k(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=Jn.from(S)),!Jn.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var E=0,B=0,O=0,N=S.length;O!==N&&S[O]===0;)O++,E++;for(var Y=(N-O)*p+1>>>0,H=new Uint8Array(Y);O!==N;){for(var X=S[O],gt=0,ot=Y-1;(X!==0||gt<B)&&ot!==-1;ot--,gt++)X+=256*H[ot]>>>0,H[ot]=X%i>>>0,X=X/i>>>0;if(X!==0)throw new Error("Non-zero carry");B=gt,O++}for(var Et=Y-B;Et!==Y&&H[Et]===0;)Et++;for(var Tt=u.repeat(E);Et<Y;++Et)Tt+=s.charAt(H[Et]);return Tt}function x(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return Jn.alloc(0);var E=0;if(S[E]!==" "){for(var B=0,O=0;S[E]===u;)B++,E++;for(var N=(S.length-E)*h+1>>>0,Y=new Uint8Array(N);S[E];){var H=t[S.charCodeAt(E)];if(H===255)return;for(var X=0,gt=N-1;(H!==0||X<O)&&gt!==-1;gt--,X++)H+=i*Y[gt]>>>0,Y[gt]=H%256>>>0,H=H/256>>>0;if(H!==0)throw new Error("Non-zero carry");O=X,E++}if(S[E]!==" "){for(var ot=N-O;ot!==N&&Y[ot]===0;)ot++;var Et=Jn.allocUnsafe(B+(N-ot));Et.fill(0,0,B);for(var Tt=B;ot!==N;)Et[Tt++]=Y[ot++];return Et}}}function I(S){var E=x(S);if(E)return E;throw new Error("Non-base"+i+" character")}return{encode:k,decodeUnsafe:x,decode:I}}ma.exports=df});var va=Mt((R0,wa)=>{T();P();var pf=ba(),yf="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";wa.exports=pf(yf)});var Ho=Mt(A=>{"use strict";T();P();Object.defineProperty(A,"__esModule",{value:!0});A.s16=A.s8=A.nu64be=A.u48be=A.u40be=A.u32be=A.u24be=A.u16be=A.nu64=A.u48=A.u40=A.u32=A.u24=A.u16=A.u8=A.offset=A.greedy=A.Constant=A.UTF8=A.CString=A.Blob=A.Boolean=A.BitField=A.BitStructure=A.VariantLayout=A.Union=A.UnionLayoutDiscriminator=A.UnionDiscriminator=A.Structure=A.Sequence=A.DoubleBE=A.Double=A.FloatBE=A.Float=A.NearInt64BE=A.NearInt64=A.NearUInt64BE=A.NearUInt64=A.IntBE=A.Int=A.UIntBE=A.UInt=A.OffsetLayout=A.GreedyCount=A.ExternalLayout=A.bindConstructorLayout=A.nameWithProperty=A.Layout=A.uint8ArrayToBuffer=A.checkUint8Array=void 0;A.constant=A.utf8=A.cstr=A.blob=A.unionLayoutDiscriminator=A.union=A.seq=A.bits=A.struct=A.f64be=A.f64=A.f32be=A.f32=A.ns64be=A.s48be=A.s40be=A.s32be=A.s24be=A.s16be=A.ns64=A.s48=A.s40=A.s32=A.s24=void 0;var Wo=Qi();function Dr(s){if(!(s instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}A.checkUint8Array=Dr;function ht(s){return Dr(s),Wo.Buffer.from(s.buffer,s.byteOffset,s.length)}A.uint8ArrayToBuffer=ht;var dt=class{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){let e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}};A.Layout=dt;function qo(s,t){return t.property?s+"["+t.property+"]":s}A.nameWithProperty=qo;function wf(s,t){if(typeof s!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(s,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof dt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");s.layout_=t,t.boundConstructor_=s,t.makeDestinationObject=()=>new s,Object.defineProperty(s.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(s,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}A.bindConstructorLayout=wf;var xe=class extends dt{isCount(){throw new Error("ExternalLayout is abstract")}};A.ExternalLayout=xe;var ts=class extends xe{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Dr(t);let r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}};A.GreedyCount=ts;var un=class extends xe{constructor(t,e=0,r){if(!(t instanceof dt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Pe||this.layout instanceof Ce}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}};A.OffsetLayout=un;var Pe=class extends dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ht(t).readUIntLE(e,this.span)}encode(t,e,r=0){return ht(e).writeUIntLE(t,r,this.span),this.span}};A.UInt=Pe;var Ce=class extends dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ht(t).readUIntBE(e,this.span)}encode(t,e,r=0){return ht(e).writeUIntBE(t,r,this.span),this.span}};A.UIntBE=Ce;var Ye=class extends dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ht(t).readIntLE(e,this.span)}encode(t,e,r=0){return ht(e).writeIntLE(t,r,this.span),this.span}};A.Int=Ye;var gr=class extends dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ht(t).readIntBE(e,this.span)}encode(t,e,r=0){return ht(e).writeIntBE(t,r,this.span),this.span}};A.IntBE=gr;var Ko=Math.pow(2,32);function ms(s){let t=Math.floor(s/Ko),e=s-t*Ko;return{hi32:t,lo32:e}}function bs(s,t){return s*Ko+t}var es=class extends dt{constructor(t){super(8,t)}decode(t,e=0){let r=ht(t),n=r.readUInt32LE(e),o=r.readUInt32LE(e+4);return bs(o,n)}encode(t,e,r=0){let n=ms(t),o=ht(e);return o.writeUInt32LE(n.lo32,r),o.writeUInt32LE(n.hi32,r+4),8}};A.NearUInt64=es;var rs=class extends dt{constructor(t){super(8,t)}decode(t,e=0){let r=ht(t),n=r.readUInt32BE(e),o=r.readUInt32BE(e+4);return bs(n,o)}encode(t,e,r=0){let n=ms(t),o=ht(e);return o.writeUInt32BE(n.hi32,r),o.writeUInt32BE(n.lo32,r+4),8}};A.NearUInt64BE=rs;var ns=class extends dt{constructor(t){super(8,t)}decode(t,e=0){let r=ht(t),n=r.readUInt32LE(e),o=r.readInt32LE(e+4);return bs(o,n)}encode(t,e,r=0){let n=ms(t),o=ht(e);return o.writeUInt32LE(n.lo32,r),o.writeInt32LE(n.hi32,r+4),8}};A.NearInt64=ns;var ss=class extends dt{constructor(t){super(8,t)}decode(t,e=0){let r=ht(t),n=r.readInt32BE(e),o=r.readUInt32BE(e+4);return bs(n,o)}encode(t,e,r=0){let n=ms(t),o=ht(e);return o.writeInt32BE(n.hi32,r),o.writeUInt32BE(n.lo32,r+4),8}};A.NearInt64BE=ss;var os=class extends dt{constructor(t){super(4,t)}decode(t,e=0){return ht(t).readFloatLE(e)}encode(t,e,r=0){return ht(e).writeFloatLE(t,r),4}};A.Float=os;var is=class extends dt{constructor(t){super(4,t)}decode(t,e=0){return ht(t).readFloatBE(e)}encode(t,e,r=0){return ht(e).writeFloatBE(t,r),4}};A.FloatBE=is;var as=class extends dt{constructor(t){super(8,t)}decode(t,e=0){return ht(t).readDoubleLE(e)}encode(t,e,r=0){return ht(e).writeDoubleLE(t,r),8}};A.Double=as;var cs=class extends dt{constructor(t){super(8,t)}decode(t,e=0){return ht(t).readDoubleBE(e)}encode(t,e,r=0){return ht(e).writeDoubleBE(t,r),8}};A.DoubleBE=cs;var us=class extends dt{constructor(t,e,r){if(!(t instanceof dt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof xe&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(e instanceof xe)&&0<t.span&&(n=e*t.span),super(n,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof xe&&(n=n.decode(t,e)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let o=0;for(;o<n;)r+=this.elementLayout.getSpan(t,e+r),++o}return r}decode(t,e=0){let r=[],n=0,o=this.count;for(o instanceof xe&&(o=o.decode(t,e));n<o;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),n+=1;return r}encode(t,e,r=0){let n=this.elementLayout,o=t.reduce((i,u)=>i+n.encode(u,e,r+i),0);return this.count instanceof xe&&this.count.encode(t.length,e,r),o}};A.Sequence=us;var fs=class extends dt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((o,i)=>o&&i instanceof dt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(let o of t)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=t.reduce((o,i)=>o+i.getSpan(),0)}catch{}super(n,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((n,o)=>{let i=o.getSpan(t,e);return e+=i,n+i},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){Dr(t);let r=this.makeDestinationObject();for(let n of this.fields)if(n.property!==void 0&&(r[n.property]=n.decode(t,e)),e+=n.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){let n=r,o=0,i=0;for(let u of this.fields){let h=u.span;if(i=0<h?h:0,u.property!==void 0){let p=t[u.property];p!==void 0&&(i=u.encode(p,e,r),0>h&&(h=u.getSpan(e,r)))}o=r,r+=h}return o+i-n}fromArray(t){let e=this.makeDestinationObject();for(let r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(let r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}};A.Structure=fs;var fn=class{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}};A.UnionDiscriminator=fn;var Hr=class extends fn{constructor(t,e){if(!(t instanceof xe&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}};A.UnionLayoutDiscriminator=Hr;var hn=class extends dt{constructor(t,e,r){let n;if(t instanceof Pe||t instanceof Ce)n=new Hr(new un(t));else if(t instanceof xe&&t.isCount())n=new Hr(t);else if(t instanceof fn)n=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof dt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let o=-1;e&&(o=e.span,0<=o&&(t instanceof Pe||t instanceof Ce)&&(o+=n.layout.span)),super(o,r),this.discriminator=n,this.usesPrefixDiscriminator=t instanceof Pe||t instanceof Ce,this.defaultLayout=e,this.registry={};let i=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return i(u)},this.configGetSourceVariant=function(u){i=u.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;let r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;let e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(let e in this.registry){let r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r,n=this.discriminator,o=n.decode(t,e),i=this.registry[o];if(i===void 0){let u=this.defaultLayout,h=0;this.usesPrefixDiscriminator&&(h=n.layout.span),r=this.makeDestinationObject(),r[n.property]=o,r[u.property]=u.decode(t,e+h)}else r=i.decode(t,e);return r}encode(t,e,r=0){let n=this.getSourceVariant(t);if(n===void 0){let o=this.discriminator,i=this.defaultLayout,u=0;return this.usesPrefixDiscriminator&&(u=o.layout.span),o.encode(t[o.property],e,r),u+i.encode(t[i.property],e,r+u)}return n.encode(t,e,r)}addVariant(t,e,r){let n=new hs(this,t,e,r);return this.registry[t]=n,n}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}};A.Union=hn;var hs=class extends dt{constructor(t,e,r,n){if(!(t instanceof hn))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&n===void 0&&(n=r,r=null),r){if(!(r instanceof dt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof n!="string")throw new TypeError("variant must have a String property")}let o=t.span;0>t.span&&(o=r?r.span:0,0<=o&&t.usesPrefixDiscriminator&&(o+=t.discriminator.layout.span)),super(o,n),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(t,e+r)),r+n}decode(t,e=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let o=n;if(this.layout&&(this.layout.encode(t[this.property],e,r+n),o+=this.layout.getSpan(e,r+n),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(t){if(this.layout)return this.layout.fromArray(t)}};A.VariantLayout=hs;function qr(s){return 0>s&&(s+=4294967296),s}var ln=class extends dt{constructor(t,e,r){if(!(t instanceof Pe||t instanceof Ce))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let n=0;this._packedSetValue=function(o){return n=qr(o),this},this._packedGetValue=function(){return n}}decode(t,e=0){let r=this.makeDestinationObject(),n=this.word.decode(t,e);this._packedSetValue(n);for(let o of this.fields)o.property!==void 0&&(r[o.property]=o.decode(t));return r}encode(t,e,r=0){let n=this.word.decode(e,r);this._packedSetValue(n);for(let o of this.fields)if(o.property!==void 0){let i=t[o.property];i!==void 0&&o.encode(i)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){let r=new dn(this,t,e);return this.fields.push(r),r}addBoolean(t){let e=new ls(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}};A.BitStructure=ln;var dn=class{constructor(t,e,r){if(!(t instanceof ln))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");let n=8*t.span,o=t.fields.reduce((i,u)=>i+u.bits,0);if(e+o>n)throw new Error("bits too long for span remainder ("+(n-o)+" of "+n+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=n-o-e),this.wordMask=qr(this.valueMask<<this.start),this.property=r}decode(t,e){let r=this.container._packedGetValue();return qr(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==qr(t&this.valueMask))throw new TypeError(qo("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let e=this.container._packedGetValue(),r=qr(t<<this.start);this.container._packedSetValue(qr(e&~this.wordMask)|r)}};A.BitField=dn;var ls=class extends dn{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};A.Boolean=ls;var ds=class extends dt{constructor(t,e){if(!(t instanceof xe&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof xe||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),ht(t).slice(e,e+r)}encode(t,e,r){let n=this.length;if(this.length instanceof xe&&(n=t.length),!(t instanceof Uint8Array&&n===t.length))throw new TypeError(qo("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>e.length)throw new RangeError("encoding overruns Uint8Array");let o=ht(t);return ht(e).write(o.toString("hex"),r,n,"hex"),this.length instanceof xe&&this.length.encode(n,e,r),n}};A.Blob=ds;var ps=class extends dt{constructor(t){super(-1,t)}getSpan(t,e=0){Dr(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){let r=this.getSpan(t,e);return ht(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));let n=Wo.Buffer.from(t,"utf8"),o=n.length;if(r+o>e.length)throw new RangeError("encoding overruns Buffer");let i=ht(e);return n.copy(i,r),i[r+o]=0,o+1}};A.CString=ps;var ys=class extends dt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Dr(t),t.length-e}decode(t,e=0){let r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return ht(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));let n=Wo.Buffer.from(t,"utf8"),o=n.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(r+o>e.length)throw new RangeError("encoding overruns Buffer");return n.copy(ht(e),r),o}};A.UTF8=ys;var gs=class extends dt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}};A.Constant=gs;A.greedy=(s,t)=>new ts(s,t);A.offset=(s,t,e)=>new un(s,t,e);A.u8=s=>new Pe(1,s);A.u16=s=>new Pe(2,s);A.u24=s=>new Pe(3,s);A.u32=s=>new Pe(4,s);A.u40=s=>new Pe(5,s);A.u48=s=>new Pe(6,s);A.nu64=s=>new es(s);A.u16be=s=>new Ce(2,s);A.u24be=s=>new Ce(3,s);A.u32be=s=>new Ce(4,s);A.u40be=s=>new Ce(5,s);A.u48be=s=>new Ce(6,s);A.nu64be=s=>new rs(s);A.s8=s=>new Ye(1,s);A.s16=s=>new Ye(2,s);A.s24=s=>new Ye(3,s);A.s32=s=>new Ye(4,s);A.s40=s=>new Ye(5,s);A.s48=s=>new Ye(6,s);A.ns64=s=>new ns(s);A.s16be=s=>new gr(2,s);A.s24be=s=>new gr(3,s);A.s32be=s=>new gr(4,s);A.s40be=s=>new gr(5,s);A.s48be=s=>new gr(6,s);A.ns64be=s=>new ss(s);A.f32=s=>new os(s);A.f32be=s=>new is(s);A.f64=s=>new as(s);A.f64be=s=>new cs(s);A.struct=(s,t,e)=>new fs(s,t,e);A.bits=(s,t,e)=>new ln(s,t,e);A.seq=(s,t,e)=>new us(s,t,e);A.union=(s,t,e)=>new hn(s,t,e);A.unionLayoutDiscriminator=(s,t)=>new Hr(s,t);A.blob=(s,t)=>new ds(s,t);A.cstr=s=>new ps(s);A.utf8=(s,t)=>new ys(s,t);A.constant=(s,t)=>new gs(s,t)});var ks=Mt((F0,yn)=>{T();P();function If(s){return s&&s.__esModule?s:{default:s}}yn.exports=If,yn.exports.__esModule=!0,yn.exports.default=yn.exports});var xs=Mt((G0,gn)=>{T();P();function _a(s,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}function Af(s,t,e){return t&&_a(s.prototype,t),e&&_a(s,e),Object.defineProperty(s,"prototype",{writable:!1}),s}gn.exports=Af,gn.exports.__esModule=!0,gn.exports.default=gn.exports});var Ss=Mt((Y0,mn)=>{T();P();function Bf(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}mn.exports=Bf,mn.exports.__esModule=!0,mn.exports.default=mn.exports});var Ia=Mt((Q0,Xe)=>{T();P();function Go(s,t){return Xe.exports=Go=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Xe.exports.__esModule=!0,Xe.exports.default=Xe.exports,Go(s,t)}Xe.exports=Go,Xe.exports.__esModule=!0,Xe.exports.default=Xe.exports});var _s=Mt((rp,bn)=>{T();P();var Ef=Ia();function Lf(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),t&&Ef(s,t)}bn.exports=Lf,bn.exports.__esModule=!0,bn.exports.default=bn.exports});var Is=Mt((op,Je)=>{T();P();function jo(s){return Je.exports=jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je.exports.__esModule=!0,Je.exports.default=Je.exports,jo(s)}Je.exports=jo,Je.exports.__esModule=!0,Je.exports.default=Je.exports});var Aa=Mt((cp,wn)=>{T();P();function Rf(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}wn.exports=Rf,wn.exports.__esModule=!0,wn.exports.default=wn.exports});var As=Mt((hp,vn)=>{T();P();var Mf=Is().default,Tf=Aa();function Pf(s,t){if(t&&(Mf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tf(s)}vn.exports=Pf,vn.exports.__esModule=!0,vn.exports.default=vn.exports});var Bs=Mt((pp,Qe)=>{T();P();function Zo(s){return Qe.exports=Zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports,Zo(s)}Qe.exports=Zo,Qe.exports.__esModule=!0,Qe.exports.default=Qe.exports});var Xo=Mt((mp,Yo)=>{"use strict";T();P();var Of=Object.prototype.hasOwnProperty,Me="~";function kn(){}Object.create&&(kn.prototype=Object.create(null),new kn().__proto__||(Me=!1));function Cf(s,t,e){this.fn=s,this.context=t,this.once=e||!1}function Ba(s,t,e,r,n){if(typeof e!="function")throw new TypeError("The listener must be a function");var o=new Cf(e,r||s,n),i=Me?Me+t:t;return s._events[i]?s._events[i].fn?s._events[i]=[s._events[i],o]:s._events[i].push(o):(s._events[i]=o,s._eventsCount++),s}function Es(s,t){--s._eventsCount===0?s._events=new kn:delete s._events[t]}function Se(){this._events=new kn,this._eventsCount=0}Se.prototype.eventNames=function(){var t=[],e,r;if(this._eventsCount===0)return t;for(r in e=this._events)Of.call(e,r)&&t.push(Me?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};Se.prototype.listeners=function(t){var e=Me?Me+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,i=new Array(o);n<o;n++)i[n]=r[n].fn;return i};Se.prototype.listenerCount=function(t){var e=Me?Me+t:t,r=this._events[e];return r?r.fn?1:r.length:0};Se.prototype.emit=function(t,e,r,n,o,i){var u=Me?Me+t:t;if(!this._events[u])return!1;var h=this._events[u],p=arguments.length,k,x;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),p){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,n),!0;case 5:return h.fn.call(h.context,e,r,n,o),!0;case 6:return h.fn.call(h.context,e,r,n,o,i),!0}for(x=1,k=new Array(p-1);x<p;x++)k[x-1]=arguments[x];h.fn.apply(h.context,k)}else{var I=h.length,S;for(x=0;x<I;x++)switch(h[x].once&&this.removeListener(t,h[x].fn,void 0,!0),p){case 1:h[x].fn.call(h[x].context);break;case 2:h[x].fn.call(h[x].context,e);break;case 3:h[x].fn.call(h[x].context,e,r);break;case 4:h[x].fn.call(h[x].context,e,r,n);break;default:if(!k)for(S=1,k=new Array(p-1);S<p;S++)k[S-1]=arguments[S];h[x].fn.apply(h[x].context,k)}}return!0};Se.prototype.on=function(t,e,r){return Ba(this,t,e,r,!1)};Se.prototype.once=function(t,e,r){return Ba(this,t,e,r,!0)};Se.prototype.removeListener=function(t,e,r,n){var o=Me?Me+t:t;if(!this._events[o])return this;if(!e)return Es(this,o),this;var i=this._events[o];if(i.fn)i.fn===e&&(!n||i.once)&&(!r||i.context===r)&&Es(this,o);else{for(var u=0,h=[],p=i.length;u<p;u++)(i[u].fn!==e||n&&!i[u].once||r&&i[u].context!==r)&&h.push(i[u]);h.length?this._events[o]=h.length===1?h[0]:h:Es(this,o)}return this};Se.prototype.removeAllListeners=function(t){var e;return t?(e=Me?Me+t:t,this._events[e]&&Es(this,e)):(this._events=new kn,this._eventsCount=0),this};Se.prototype.off=Se.prototype.removeListener;Se.prototype.addListener=Se.prototype.on;Se.prefixed=Me;Se.EventEmitter=Se;typeof Yo<"u"&&(Yo.exports=Se)});var La=Mt(Jo=>{"use strict";T();P();var xn=ks();Object.defineProperty(Jo,"__esModule",{value:!0});Jo.default=Ff;var Nf=xn(Ss()),zf=xn(xs()),Uf=xn(_s()),Kf=xn(As()),Ea=xn(Bs()),Wf=Xo();function qf(s){var t=Hf();return function(){var r=(0,Ea.default)(s),n;if(t){var o=(0,Ea.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Kf.default)(this,n)}}function Hf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Df=function(s){(0,Uf.default)(e,s);var t=qf(e);function e(r,n,o){var i;return(0,Nf.default)(this,e),i=t.call(this),i.socket=new window.WebSocket(r,o),i.socket.onopen=function(){return i.emit("open")},i.socket.onmessage=function(u){return i.emit("message",u.data)},i.socket.onerror=function(u){return i.emit("error",u)},i.socket.onclose=function(u){i.emit("close",u.code,u.reason)},i}return(0,zf.default)(e,[{key:"send",value:function(n,o,i){var u=i||o;try{this.socket.send(n),u()}catch(h){u(h)}}},{key:"close",value:function(n,o){this.socket.close(n,o)}},{key:"addEventListener",value:function(n,o,i){this.socket.addEventListener(n,o,i)}}]),e}(Wf.EventEmitter);function Ff(s,t){return new Df(s,t)}});var Ma=Mt((Sp,tr)=>{T();P();var Vf=Is().default;function Ra(){"use strict";tr.exports=Ra=function(){return s},tr.exports.__esModule=!0,tr.exports.default=tr.exports;var s={},t=Object.prototype,e=t.hasOwnProperty,r=typeof Symbol=="function"?Symbol:{},n=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function u(U,R,D){return Object.defineProperty(U,R,{value:D,enumerable:!0,configurable:!0,writable:!0}),U[R]}try{u({},"")}catch{u=function(D,y,a){return D[y]=a}}function h(U,R,D,y){var a=R&&R.prototype instanceof x?R:x,f=Object.create(a.prototype),l=new Et(y||[]);return f._invoke=function(d,m,v){var _="suspendedStart";return function(g,c){if(_==="executing")throw new Error("Generator is already running");if(_==="completed"){if(g==="throw")throw c;return Ee()}for(v.method=g,v.arg=c;;){var b=v.delegate;if(b){var F=X(b,v);if(F){if(F===k)continue;return F}}if(v.method==="next")v.sent=v._sent=v.arg;else if(v.method==="throw"){if(_==="suspendedStart")throw _="completed",v.arg;v.dispatchException(v.arg)}else v.method==="return"&&v.abrupt("return",v.arg);_="executing";var V=p(d,m,v);if(V.type==="normal"){if(_=v.done?"completed":"suspendedYield",V.arg===k)continue;return{value:V.arg,done:v.done}}V.type==="throw"&&(_="completed",v.method="throw",v.arg=V.arg)}}}(U,D,l),f}function p(U,R,D){try{return{type:"normal",arg:U.call(R,D)}}catch(y){return{type:"throw",arg:y}}}s.wrap=h;var k={};function x(){}function I(){}function S(){}var E={};u(E,n,function(){return this});var B=Object.getPrototypeOf,O=B&&B(B(Tt([])));O&&O!==t&&e.call(O,n)&&(E=O);var N=S.prototype=x.prototype=Object.create(E);function Y(U){["next","throw","return"].forEach(function(R){u(U,R,function(D){return this._invoke(R,D)})})}function H(U,R){function D(a,f,l,d){var m=p(U[a],U,f);if(m.type!=="throw"){var v=m.arg,_=v.value;return _&&Vf(_)=="object"&&e.call(_,"__await")?R.resolve(_.__await).then(function(g){D("next",g,l,d)},function(g){D("throw",g,l,d)}):R.resolve(_).then(function(g){v.value=g,l(v)},function(g){return D("throw",g,l,d)})}d(m.arg)}var y;this._invoke=function(a,f){function l(){return new R(function(d,m){D(a,f,d,m)})}return y=y?y.then(l,l):l()}}function X(U,R){var D=U.iterator[R.method];if(D===void 0){if(R.delegate=null,R.method==="throw"){if(U.iterator.return&&(R.method="return",R.arg=void 0,X(U,R),R.method==="throw"))return k;R.method="throw",R.arg=new TypeError("The iterator does not provide a 'throw' method")}return k}var y=p(D,U.iterator,R.arg);if(y.type==="throw")return R.method="throw",R.arg=y.arg,R.delegate=null,k;var a=y.arg;return a?a.done?(R[U.resultName]=a.value,R.next=U.nextLoc,R.method!=="return"&&(R.method="next",R.arg=void 0),R.delegate=null,k):a:(R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,k)}function gt(U){var R={tryLoc:U[0]};1 in U&&(R.catchLoc=U[1]),2 in U&&(R.finallyLoc=U[2],R.afterLoc=U[3]),this.tryEntries.push(R)}function ot(U){var R=U.completion||{};R.type="normal",delete R.arg,U.completion=R}function Et(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(gt,this),this.reset(!0)}function Tt(U){if(U){var R=U[n];if(R)return R.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var D=-1,y=function a(){for(;++D<U.length;)if(e.call(U,D))return a.value=U[D],a.done=!1,a;return a.value=void 0,a.done=!0,a};return y.next=y}}return{next:Ee}}function Ee(){return{value:void 0,done:!0}}return I.prototype=S,u(N,"constructor",S),u(S,"constructor",I),I.displayName=u(S,i,"GeneratorFunction"),s.isGeneratorFunction=function(U){var R=typeof U=="function"&&U.constructor;return!!R&&(R===I||(R.displayName||R.name)==="GeneratorFunction")},s.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,S):(U.__proto__=S,u(U,i,"GeneratorFunction")),U.prototype=Object.create(N),U},s.awrap=function(U){return{__await:U}},Y(H.prototype),u(H.prototype,o,function(){return this}),s.AsyncIterator=H,s.async=function(U,R,D,y,a){a===void 0&&(a=Promise);var f=new H(h(U,R,D,y),a);return s.isGeneratorFunction(R)?f:f.next().then(function(l){return l.done?l.value:f.next()})},Y(N),u(N,i,"Generator"),u(N,n,function(){return this}),u(N,"toString",function(){return"[object Generator]"}),s.keys=function(U){var R=[];for(var D in U)R.push(D);return R.reverse(),function y(){for(;R.length;){var a=R.pop();if(a in U)return y.value=a,y.done=!1,y}return y.done=!0,y}},s.values=Tt,Et.prototype={constructor:Et,reset:function(R){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(ot),!R)for(var D in this)D.charAt(0)==="t"&&e.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=void 0)},stop:function(){this.done=!0;var R=this.tryEntries[0].completion;if(R.type==="throw")throw R.arg;return this.rval},dispatchException:function(R){if(this.done)throw R;var D=this;function y(v,_){return l.type="throw",l.arg=R,D.next=v,_&&(D.method="next",D.arg=void 0),!!_}for(var a=this.tryEntries.length-1;a>=0;--a){var f=this.tryEntries[a],l=f.completion;if(f.tryLoc==="root")return y("end");if(f.tryLoc<=this.prev){var d=e.call(f,"catchLoc"),m=e.call(f,"finallyLoc");if(d&&m){if(this.prev<f.catchLoc)return y(f.catchLoc,!0);if(this.prev<f.finallyLoc)return y(f.finallyLoc)}else if(d){if(this.prev<f.catchLoc)return y(f.catchLoc,!0)}else{if(!m)throw new Error("try statement without catch or finally");if(this.prev<f.finallyLoc)return y(f.finallyLoc)}}}},abrupt:function(R,D){for(var y=this.tryEntries.length-1;y>=0;--y){var a=this.tryEntries[y];if(a.tryLoc<=this.prev&&e.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var f=a;break}}f&&(R==="break"||R==="continue")&&f.tryLoc<=D&&D<=f.finallyLoc&&(f=null);var l=f?f.completion:{};return l.type=R,l.arg=D,f?(this.method="next",this.next=f.finallyLoc,k):this.complete(l)},complete:function(R,D){if(R.type==="throw")throw R.arg;return R.type==="break"||R.type==="continue"?this.next=R.arg:R.type==="return"?(this.rval=this.arg=R.arg,this.method="return",this.next="end"):R.type==="normal"&&D&&(this.next=D),k},finish:function(R){for(var D=this.tryEntries.length-1;D>=0;--D){var y=this.tryEntries[D];if(y.finallyLoc===R)return this.complete(y.completion,y.afterLoc),ot(y),k}},catch:function(R){for(var D=this.tryEntries.length-1;D>=0;--D){var y=this.tryEntries[D];if(y.tryLoc===R){var a=y.completion;if(a.type==="throw"){var f=a.arg;ot(y)}return f}}throw new Error("illegal catch attempt")},delegateYield:function(R,D,y){return this.delegate={iterator:Tt(R),resultName:D,nextLoc:y},this.method==="next"&&(this.arg=void 0),k}},s}tr.exports=Ra,tr.exports.__esModule=!0,tr.exports.default=tr.exports});var Pa=Mt((Ap,Ta)=>{T();P();var Ls=Ma()();Ta.exports=Ls;try{regeneratorRuntime=Ls}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Ls:Function("r","regeneratorRuntime = r")(Ls)}});var Ca=Mt((Lp,Sn)=>{T();P();function Oa(s,t,e,r,n,o,i){try{var u=s[o](i),h=u.value}catch(p){e(p);return}u.done?t(h):Promise.resolve(h).then(r,n)}function $f(s){return function(){var t=this,e=arguments;return new Promise(function(r,n){var o=s.apply(t,e);function i(h){Oa(o,r,n,i,u,"next",h)}function u(h){Oa(o,r,n,i,u,"throw",h)}i(void 0)})}}Sn.exports=$f,Sn.exports.__esModule=!0,Sn.exports.default=Sn.exports});var za=Mt(Ms=>{"use strict";T();P();var wr=ks();Object.defineProperty(Ms,"__esModule",{value:!0});Ms.default=void 0;var br=wr(Pa()),Rs=wr(Ca()),Gf=wr(Is()),jf=wr(Ss()),Zf=wr(xs()),Yf=wr(_s()),Xf=wr(As()),Na=wr(Bs()),Jf=Xo();function Qf(s){var t=th();return function(){var r=(0,Na.default)(s),n;if(t){var o=(0,Na.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Xf.default)(this,n)}}function th(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var eh=function(s,t){var e={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.indexOf(r)<0&&(e[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(e[r[n]]=s[r[n]]);return e},rh=function(s){(0,Yf.default)(e,s);var t=Qf(e);function e(r){var n,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;(0,jf.default)(this,e);var h=i.autoconnect,p=h===void 0?!0:h,k=i.reconnect,x=k===void 0?!0:k,I=i.reconnect_interval,S=I===void 0?1e3:I,E=i.max_reconnects,B=E===void 0?5:E,O=eh(i,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return n=t.call(this),n.webSocketFactory=r,n.queue={},n.rpc_id=0,n.address=o,n.autoconnect=p,n.ready=!1,n.reconnect=x,n.reconnect_interval=S,n.max_reconnects=B,n.rest_options=O,n.current_reconnects=0,n.generate_request_id=u||function(){return++n.rpc_id},n.autoconnect&&n._connect(n.address,Object.assign({autoconnect:n.autoconnect,reconnect:n.reconnect,reconnect_interval:n.reconnect_interval,max_reconnects:n.max_reconnects},n.rest_options)),n}return(0,Zf.default)(e,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(n,o,i,u){var h=this;return!u&&(0,Gf.default)(i)==="object"&&(u=i,i=null),new Promise(function(p,k){if(!h.ready)return k(new Error("socket not ready"));var x=h.generate_request_id(n,o),I={jsonrpc:"2.0",method:n,params:o||null,id:x};h.socket.send(JSON.stringify(I),u,function(S){if(S)return k(S);h.queue[x]={promise:[p,k]},i&&(h.queue[x].timeout=setTimeout(function(){delete h.queue[x],k(new Error("reply timeout"))},i))})})}},{key:"login",value:function(){var r=(0,Rs.default)(br.default.mark(function o(i){var u;return br.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.call("rpc.login",i);case 2:if(u=p.sent,u){p.next=5;break}throw new Error("authentication failed");case 5:return p.abrupt("return",u);case 6:case"end":return p.stop()}},o,this)}));function n(o){return r.apply(this,arguments)}return n}()},{key:"listMethods",value:function(){var r=(0,Rs.default)(br.default.mark(function o(){return br.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.call("__listMethods");case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},o,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"notify",value:function(n,o){var i=this;return new Promise(function(u,h){if(!i.ready)return h(new Error("socket not ready"));var p={jsonrpc:"2.0",method:n,params:o||null};i.socket.send(JSON.stringify(p),function(k){if(k)return h(k);u()})})}},{key:"subscribe",value:function(){var r=(0,Rs.default)(br.default.mark(function o(i){var u;return br.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return typeof i=="string"&&(i=[i]),p.next=3,this.call("rpc.on",i);case 3:if(u=p.sent,!(typeof i=="string"&&u[i]!=="ok")){p.next=6;break}throw new Error("Failed subscribing to an event '"+i+"' with: "+u[i]);case 6:return p.abrupt("return",u);case 7:case"end":return p.stop()}},o,this)}));function n(o){return r.apply(this,arguments)}return n}()},{key:"unsubscribe",value:function(){var r=(0,Rs.default)(br.default.mark(function o(i){var u;return br.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return typeof i=="string"&&(i=[i]),p.next=3,this.call("rpc.off",i);case 3:if(u=p.sent,!(typeof i=="string"&&u[i]!=="ok")){p.next=6;break}throw new Error("Failed unsubscribing from an event with: "+u);case 6:return p.abrupt("return",u);case 7:case"end":return p.stop()}},o,this)}));function n(o){return r.apply(this,arguments)}return n}()},{key:"close",value:function(n,o){this.socket.close(n||1e3,o)}},{key:"_connect",value:function(n,o){var i=this;this.socket=this.webSocketFactory(n,o),this.socket.addEventListener("open",function(){i.ready=!0,i.emit("open"),i.current_reconnects=0}),this.socket.addEventListener("message",function(u){var h=u.data;h instanceof ArrayBuffer&&(h=Q.Buffer.from(h).toString());try{h=JSON.parse(h)}catch{return}if(h.notification&&i.listeners(h.notification).length){if(!Object.keys(h.params).length)return i.emit(h.notification);var p=[h.notification];if(h.params.constructor===Object)p.push(h.params);else for(var k=0;k<h.params.length;k++)p.push(h.params[k]);return Promise.resolve().then(function(){i.emit.apply(i,p)})}if(!i.queue[h.id])return h.method&&h.params?Promise.resolve().then(function(){i.emit(h.method,h.params)}):void 0;"error"in h=="result"in h&&i.queue[h.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),i.queue[h.id].timeout&&clearTimeout(i.queue[h.id].timeout),h.error?i.queue[h.id].promise[1](h.error):i.queue[h.id].promise[0](h.result),delete i.queue[h.id]}),this.socket.addEventListener("error",function(u){return i.emit("error",u)}),this.socket.addEventListener("close",function(u){var h=u.code,p=u.reason;i.ready&&setTimeout(function(){return i.emit("close",h,p)},0),i.ready=!1,i.socket=void 0,h!==1e3&&(i.current_reconnects++,i.reconnect&&(i.max_reconnects>i.current_reconnects||i.max_reconnects===0)&&setTimeout(function(){return i._connect(n,o)},i.reconnect_interval))})}}]),e}(Jf.EventEmitter);Ms.default=rh});var Ka=Mt(Ts=>{"use strict";T();P();var Mr=ks();Object.defineProperty(Ts,"__esModule",{value:!0});Ts.Client=void 0;var nh=Mr(xs()),sh=Mr(Ss()),oh=Mr(_s()),ih=Mr(As()),Ua=Mr(Bs()),ah=Mr(La()),ch=Mr(za());function uh(s){var t=fh();return function(){var r=(0,Ua.default)(s),n;if(t){var o=(0,Ua.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,ih.default)(this,n)}}function fh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var hh=function(s){(0,oh.default)(e,s);var t=uh(e);function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ws://localhost:8080",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.autoconnect,i=o===void 0?!0:o,u=n.reconnect,h=u===void 0?!0:u,p=n.reconnect_interval,k=p===void 0?1e3:p,x=n.max_reconnects,I=x===void 0?5:x,S=arguments.length>2?arguments[2]:void 0;return(0,sh.default)(this,e),t.call(this,ah.default,r,{autoconnect:i,reconnect:h,reconnect_interval:k,max_reconnects:I},S)}return(0,nh.default)(e)}(ch.default);Ts.Client=hh});function _n(){if(!Ps&&(Ps=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ps))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ps(lh)}var Ps,lh,Qo=Le(()=>{T();P();lh=new Uint8Array(16)});var Wa,qa=Le(()=>{T();P();Wa=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function dh(s){return typeof s=="string"&&Wa.test(s)}var vr,In=Le(()=>{T();P();qa();vr=dh});function ph(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(we[s[t+0]]+we[s[t+1]]+we[s[t+2]]+we[s[t+3]]+"-"+we[s[t+4]]+we[s[t+5]]+"-"+we[s[t+6]]+we[s[t+7]]+"-"+we[s[t+8]]+we[s[t+9]]+"-"+we[s[t+10]]+we[s[t+11]]+we[s[t+12]]+we[s[t+13]]+we[s[t+14]]+we[s[t+15]]).toLowerCase();if(!vr(e))throw TypeError("Stringified UUID is invalid");return e}var we,Os,kr,An=Le(()=>{T();P();In();we=[];for(Os=0;Os<256;++Os)we.push((Os+256).toString(16).substr(1));kr=ph});function yh(s,t,e){var r=t&&e||0,n=t||new Array(16);s=s||{};var o=s.node||Ha,i=s.clockseq!==void 0?s.clockseq:ti;if(o==null||i==null){var u=s.random||(s.rng||_n)();o==null&&(o=Ha=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),i==null&&(i=ti=(u[6]<<8|u[7])&16383)}var h=s.msecs!==void 0?s.msecs:Date.now(),p=s.nsecs!==void 0?s.nsecs:ri+1,k=h-ei+(p-ri)/1e4;if(k<0&&s.clockseq===void 0&&(i=i+1&16383),(k<0||h>ei)&&s.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ei=h,ri=p,ti=i,h+=122192928e5;var x=((h&268435455)*1e4+p)%4294967296;n[r++]=x>>>24&255,n[r++]=x>>>16&255,n[r++]=x>>>8&255,n[r++]=x&255;var I=h/4294967296*1e4&268435455;n[r++]=I>>>8&255,n[r++]=I&255,n[r++]=I>>>24&15|16,n[r++]=I>>>16&255,n[r++]=i>>>8|128,n[r++]=i&255;for(var S=0;S<6;++S)n[r+S]=o[S];return t||kr(n)}var Ha,ti,ei,ri,Da,Fa=Le(()=>{T();P();Qo();An();ei=0,ri=0;Da=yh});function gh(s){if(!vr(s))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(s.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(s.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(s.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(s.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(s.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var Cs,ni=Le(()=>{T();P();In();Cs=gh});function mh(s){s=unescape(encodeURIComponent(s));for(var t=[],e=0;e<s.length;++e)t.push(s.charCodeAt(e));return t}function Ns(s,t,e){function r(n,o,i,u){if(typeof n=="string"&&(n=mh(n)),typeof o=="string"&&(o=Cs(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var h=new Uint8Array(16+n.length);if(h.set(o),h.set(n,o.length),h=e(h),h[6]=h[6]&15|t,h[8]=h[8]&63|128,i){u=u||0;for(var p=0;p<16;++p)i[u+p]=h[p];return i}return kr(h)}try{r.name=s}catch{}return r.DNS=bh,r.URL=wh,r}var bh,wh,si=Le(()=>{T();P();An();ni();bh="6ba7b810-9dad-11d1-80b4-00c04fd430c8",wh="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function vh(s){if(typeof s=="string"){var t=unescape(encodeURIComponent(s));s=new Uint8Array(t.length);for(var e=0;e<t.length;++e)s[e]=t.charCodeAt(e)}return kh(xh(Sh(s),s.length*8))}function kh(s){for(var t=[],e=s.length*32,r="0123456789abcdef",n=0;n<e;n+=8){var o=s[n>>5]>>>n%32&255,i=parseInt(r.charAt(o>>>4&15)+r.charAt(o&15),16);t.push(i)}return t}function Va(s){return(s+64>>>9<<4)+14+1}function xh(s,t){s[t>>5]|=128<<t%32,s[Va(t)-1]=t;for(var e=1732584193,r=-271733879,n=-1732584194,o=271733878,i=0;i<s.length;i+=16){var u=e,h=r,p=n,k=o;e=_e(e,r,n,o,s[i],7,-680876936),o=_e(o,e,r,n,s[i+1],12,-389564586),n=_e(n,o,e,r,s[i+2],17,606105819),r=_e(r,n,o,e,s[i+3],22,-1044525330),e=_e(e,r,n,o,s[i+4],7,-176418897),o=_e(o,e,r,n,s[i+5],12,1200080426),n=_e(n,o,e,r,s[i+6],17,-1473231341),r=_e(r,n,o,e,s[i+7],22,-45705983),e=_e(e,r,n,o,s[i+8],7,1770035416),o=_e(o,e,r,n,s[i+9],12,-1958414417),n=_e(n,o,e,r,s[i+10],17,-42063),r=_e(r,n,o,e,s[i+11],22,-1990404162),e=_e(e,r,n,o,s[i+12],7,1804603682),o=_e(o,e,r,n,s[i+13],12,-40341101),n=_e(n,o,e,r,s[i+14],17,-1502002290),r=_e(r,n,o,e,s[i+15],22,1236535329),e=Ie(e,r,n,o,s[i+1],5,-165796510),o=Ie(o,e,r,n,s[i+6],9,-1069501632),n=Ie(n,o,e,r,s[i+11],14,643717713),r=Ie(r,n,o,e,s[i],20,-373897302),e=Ie(e,r,n,o,s[i+5],5,-701558691),o=Ie(o,e,r,n,s[i+10],9,38016083),n=Ie(n,o,e,r,s[i+15],14,-660478335),r=Ie(r,n,o,e,s[i+4],20,-405537848),e=Ie(e,r,n,o,s[i+9],5,568446438),o=Ie(o,e,r,n,s[i+14],9,-1019803690),n=Ie(n,o,e,r,s[i+3],14,-187363961),r=Ie(r,n,o,e,s[i+8],20,1163531501),e=Ie(e,r,n,o,s[i+13],5,-1444681467),o=Ie(o,e,r,n,s[i+2],9,-51403784),n=Ie(n,o,e,r,s[i+7],14,1735328473),r=Ie(r,n,o,e,s[i+12],20,-1926607734),e=Ae(e,r,n,o,s[i+5],4,-378558),o=Ae(o,e,r,n,s[i+8],11,-2022574463),n=Ae(n,o,e,r,s[i+11],16,1839030562),r=Ae(r,n,o,e,s[i+14],23,-35309556),e=Ae(e,r,n,o,s[i+1],4,-1530992060),o=Ae(o,e,r,n,s[i+4],11,1272893353),n=Ae(n,o,e,r,s[i+7],16,-155497632),r=Ae(r,n,o,e,s[i+10],23,-1094730640),e=Ae(e,r,n,o,s[i+13],4,681279174),o=Ae(o,e,r,n,s[i],11,-358537222),n=Ae(n,o,e,r,s[i+3],16,-722521979),r=Ae(r,n,o,e,s[i+6],23,76029189),e=Ae(e,r,n,o,s[i+9],4,-640364487),o=Ae(o,e,r,n,s[i+12],11,-421815835),n=Ae(n,o,e,r,s[i+15],16,530742520),r=Ae(r,n,o,e,s[i+2],23,-995338651),e=Be(e,r,n,o,s[i],6,-198630844),o=Be(o,e,r,n,s[i+7],10,1126891415),n=Be(n,o,e,r,s[i+14],15,-1416354905),r=Be(r,n,o,e,s[i+5],21,-57434055),e=Be(e,r,n,o,s[i+12],6,1700485571),o=Be(o,e,r,n,s[i+3],10,-1894986606),n=Be(n,o,e,r,s[i+10],15,-1051523),r=Be(r,n,o,e,s[i+1],21,-2054922799),e=Be(e,r,n,o,s[i+8],6,1873313359),o=Be(o,e,r,n,s[i+15],10,-30611744),n=Be(n,o,e,r,s[i+6],15,-1560198380),r=Be(r,n,o,e,s[i+13],21,1309151649),e=Be(e,r,n,o,s[i+4],6,-145523070),o=Be(o,e,r,n,s[i+11],10,-1120210379),n=Be(n,o,e,r,s[i+2],15,718787259),r=Be(r,n,o,e,s[i+9],21,-343485551),e=xr(e,u),r=xr(r,h),n=xr(n,p),o=xr(o,k)}return[e,r,n,o]}function Sh(s){if(s.length===0)return[];for(var t=s.length*8,e=new Uint32Array(Va(t)),r=0;r<t;r+=8)e[r>>5]|=(s[r/8]&255)<<r%32;return e}function xr(s,t){var e=(s&65535)+(t&65535),r=(s>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function _h(s,t){return s<<t|s>>>32-t}function zs(s,t,e,r,n,o){return xr(_h(xr(xr(t,s),xr(r,o)),n),e)}function _e(s,t,e,r,n,o,i){return zs(t&e|~t&r,s,t,n,o,i)}function Ie(s,t,e,r,n,o,i){return zs(t&r|e&~r,s,t,n,o,i)}function Ae(s,t,e,r,n,o,i){return zs(t^e^r,s,t,n,o,i)}function Be(s,t,e,r,n,o,i){return zs(e^(t|~r),s,t,n,o,i)}var $a,Ga=Le(()=>{T();P();$a=vh});var Ih,ja,Za=Le(()=>{T();P();si();Ga();Ih=Ns("v3",48,$a),ja=Ih});function Ah(s,t,e){s=s||{};var r=s.random||(s.rng||_n)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var n=0;n<16;++n)t[e+n]=r[n];return t}return kr(r)}var Ya,Xa=Le(()=>{T();P();Qo();An();Ya=Ah});function Bh(s,t,e,r){switch(s){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function oi(s,t){return s<<t|s>>>32-t}function Eh(s){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof s=="string"){var r=unescape(encodeURIComponent(s));s=[];for(var n=0;n<r.length;++n)s.push(r.charCodeAt(n))}else Array.isArray(s)||(s=Array.prototype.slice.call(s));s.push(128);for(var o=s.length/4+2,i=Math.ceil(o/16),u=new Array(i),h=0;h<i;++h){for(var p=new Uint32Array(16),k=0;k<16;++k)p[k]=s[h*64+k*4]<<24|s[h*64+k*4+1]<<16|s[h*64+k*4+2]<<8|s[h*64+k*4+3];u[h]=p}u[i-1][14]=(s.length-1)*8/Math.pow(2,32),u[i-1][14]=Math.floor(u[i-1][14]),u[i-1][15]=(s.length-1)*8&4294967295;for(var x=0;x<i;++x){for(var I=new Uint32Array(80),S=0;S<16;++S)I[S]=u[x][S];for(var E=16;E<80;++E)I[E]=oi(I[E-3]^I[E-8]^I[E-14]^I[E-16],1);for(var B=e[0],O=e[1],N=e[2],Y=e[3],H=e[4],X=0;X<80;++X){var gt=Math.floor(X/20),ot=oi(B,5)+Bh(gt,O,N,Y)+H+t[gt]+I[X]>>>0;H=Y,Y=N,N=oi(O,30)>>>0,O=B,B=ot}e[0]=e[0]+B>>>0,e[1]=e[1]+O>>>0,e[2]=e[2]+N>>>0,e[3]=e[3]+Y>>>0,e[4]=e[4]+H>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Ja,Qa=Le(()=>{T();P();Ja=Eh});var Lh,tc,ec=Le(()=>{T();P();si();Qa();Lh=Ns("v5",80,Ja),tc=Lh});var rc,nc=Le(()=>{T();P();rc="00000000-0000-0000-0000-000000000000"});function Rh(s){if(!vr(s))throw TypeError("Invalid UUID");return parseInt(s.substr(14,1),16)}var sc,oc=Le(()=>{T();P();In();sc=Rh});var ii={};hu(ii,{NIL:()=>rc,parse:()=>Cs,stringify:()=>kr,v1:()=>Da,v3:()=>ja,v4:()=>Ya,v5:()=>tc,validate:()=>vr,version:()=>sc});var ai=Le(()=>{T();P();Fa();Za();Xa();ec();nc();oc();In();An();ni()});var ac=Mt((Xy,ic)=>{"use strict";T();P();var Mh=(ai(),Ji(ii)).v4,Th=function(s,t,e,r){if(typeof s!="string")throw new TypeError(s+" must be a string");r=r||{};let n=typeof r.version=="number"?r.version:2;if(n!==1&&n!==2)throw new TypeError(n+" must be 1 or 2");let o={method:s};if(n===2&&(o.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");o.params=t}if(typeof e>"u"){let i=typeof r.generator=="function"?r.generator:function(){return Mh()};o.id=i(o,r)}else n===2&&e===null?r.notificationIdNull&&(o.id=null):o.id=e;return o};ic.exports=Th});var uc=Mt((tg,cc)=>{"use strict";T();P();var Ph=(ai(),Ji(ii)).v4,Oh=ac(),Bn=function(s,t){if(!(this instanceof Bn))return new Bn(s,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Ph()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=s};cc.exports=Bn;Bn.prototype.request=function(s,t,e,r){let n=this,o=null,i=Array.isArray(s)&&typeof t=="function";if(this.options.version===1&&i)throw new TypeError("JSON-RPC 1.0 does not support batching");if(i||!i&&s&&typeof s=="object"&&typeof t=="function")r=t,o=s;else{typeof e=="function"&&(r=e,e=void 0);let p=typeof r=="function";try{o=Oh(s,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(k){if(p)return r(k);throw k}if(!p)return o}let h;try{h=JSON.stringify(o,this.options.replacer)}catch(p){return r(p)}return this.callServer(h,function(p,k){n._parseResponse(p,k,r)}),o};Bn.prototype._parseResponse=function(s,t,e){if(s){e(s);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(n){return e(n)}if(e.length===3)if(Array.isArray(r)){let n=function(i){return typeof i.error<"u"},o=function(i){return!n(i)};return e(null,r.filter(n),r.filter(o))}else return e(null,r.error,r.result);e(null,r)}});T();P();lu();T();P();T();P();T();P();function Ao(s){if(!Number.isSafeInteger(s)||s<0)throw new Error(`Wrong positive integer: ${s}`)}function gu(s){if(typeof s!="boolean")throw new Error(`Expected boolean, not ${s}`)}function ea(s,...t){if(!(s instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(s.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${s.length}`)}function mu(s){if(typeof s!="function"||typeof s.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ao(s.outputLen),Ao(s.blockLen)}function bu(s,t=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(t&&s.finished)throw new Error("Hash#digest() has already been called")}function wu(s,t){ea(s);let e=t.outputLen;if(s.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}var vu={number:Ao,bool:gu,bytes:ea,hash:mu,exists:bu,output:wu},ke=vu;T();P();T();P();var ku={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var ra=s=>new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)),Vn=s=>new DataView(s.buffer,s.byteOffset,s.byteLength),qe=(s,t)=>s<<32-t|s>>>t,xu=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!xu)throw new Error("Non little-endian hardware is not supported");var r0=Array.from({length:256},(s,t)=>t.toString(16).padStart(2,"0"));function Su(s){if(typeof s!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof s}`);return new TextEncoder().encode(s)}function ir(s){if(typeof s=="string"&&(s=Su(s)),!(s instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof s})`);return s}var Ze=class{clone(){return this._cloneInto()}};function ar(s){let t=r=>s().update(ir(r)).digest(),e=s();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>s(),t}function na(s){let t=(r,n)=>s(n).update(ir(r)).digest(),e=s({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=r=>s(r),t}function _u(s,t,e,r){if(typeof s.setBigUint64=="function")return s.setBigUint64(t,e,r);let n=BigInt(32),o=BigInt(4294967295),i=Number(e>>n&o),u=Number(e&o),h=r?4:0,p=r?0:4;s.setUint32(t+h,i,r),s.setUint32(t+p,u,r)}var Kr=class extends Ze{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Vn(this.buffer)}update(t){ke.exists(this);let{view:e,buffer:r,blockLen:n}=this;t=ir(t);let o=t.length;for(let i=0;i<o;){let u=Math.min(n-this.pos,o-i);if(u===n){let h=Vn(t);for(;n<=o-i;i+=n)this.process(h,i);continue}r.set(t.subarray(i,i+u),this.pos),this.pos+=u,i+=u,this.pos===n&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ke.exists(this),ke.output(t,this),this.finished=!0;let{buffer:e,view:r,blockLen:n,isLE:o}=this,{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(r,0),i=0);for(let h=i;h<n;h++)e[h]=0;_u(r,n-8,BigInt(this.length*8),o),this.process(r,0);let u=Vn(t);this.get().forEach((h,p)=>u.setUint32(4*p,h,o))}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:r,length:n,finished:o,destroyed:i,pos:u}=this;return t.length=n,t.pos=u,t.finished=o,t.destroyed=i,n%e&&t.buffer.set(r),t}};T();P();var $n=BigInt(4294967295),Bo=BigInt(32);function sa(s,t=!1){return t?{h:Number(s&$n),l:Number(s>>Bo&$n)}:{h:Number(s>>Bo&$n)|0,l:Number(s&$n)|0}}function Iu(s,t=!1){let e=new Uint32Array(s.length),r=new Uint32Array(s.length);for(let n=0;n<s.length;n++){let{h:o,l:i}=sa(s[n],t);[e[n],r[n]]=[o,i]}return[e,r]}var Au=(s,t)=>BigInt(s>>>0)<<Bo|BigInt(t>>>0),Bu=(s,t,e)=>s>>>e,Eu=(s,t,e)=>s<<32-e|t>>>e,Lu=(s,t,e)=>s>>>e|t<<32-e,Ru=(s,t,e)=>s<<32-e|t>>>e,Mu=(s,t,e)=>s<<64-e|t>>>e-32,Tu=(s,t,e)=>s>>>e-32|t<<64-e,Pu=(s,t)=>t,Ou=(s,t)=>s,Cu=(s,t,e)=>s<<e|t>>>32-e,Nu=(s,t,e)=>t<<e|s>>>32-e,zu=(s,t,e)=>t<<e-32|s>>>64-e,Uu=(s,t,e)=>s<<e-32|t>>>64-e;function Ku(s,t,e,r){let n=(t>>>0)+(r>>>0);return{h:s+e+(n/2**32|0)|0,l:n|0}}var Wu=(s,t,e)=>(s>>>0)+(t>>>0)+(e>>>0),qu=(s,t,e,r)=>t+e+r+(s/2**32|0)|0,Hu=(s,t,e,r)=>(s>>>0)+(t>>>0)+(e>>>0)+(r>>>0),Du=(s,t,e,r,n)=>t+e+r+n+(s/2**32|0)|0,Fu=(s,t,e,r,n)=>(s>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Vu=(s,t,e,r,n,o)=>t+e+r+n+o+(s/2**32|0)|0,$u={fromBig:sa,split:Iu,toBig:Au,shrSH:Bu,shrSL:Eu,rotrSH:Lu,rotrSL:Ru,rotrBH:Mu,rotrBL:Tu,rotr32H:Pu,rotr32L:Ou,rotlSH:Cu,rotlSL:Nu,rotlBH:zu,rotlBL:Uu,add:Ku,add3L:Wu,add3H:qu,add4L:Hu,add4H:Du,add5H:Vu,add5L:Fu},tt=$u;var[Gu,ju]=tt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(s=>BigInt(s))),cr=new Uint32Array(80),ur=new Uint32Array(80),rn=class extends Kr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:e,Bh:r,Bl:n,Ch:o,Cl:i,Dh:u,Dl:h,Eh:p,El:k,Fh:x,Fl:I,Gh:S,Gl:E,Hh:B,Hl:O}=this;return[t,e,r,n,o,i,u,h,p,k,x,I,S,E,B,O]}set(t,e,r,n,o,i,u,h,p,k,x,I,S,E,B,O){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=n|0,this.Ch=o|0,this.Cl=i|0,this.Dh=u|0,this.Dl=h|0,this.Eh=p|0,this.El=k|0,this.Fh=x|0,this.Fl=I|0,this.Gh=S|0,this.Gl=E|0,this.Hh=B|0,this.Hl=O|0}process(t,e){for(let H=0;H<16;H++,e+=4)cr[H]=t.getUint32(e),ur[H]=t.getUint32(e+=4);for(let H=16;H<80;H++){let X=cr[H-15]|0,gt=ur[H-15]|0,ot=tt.rotrSH(X,gt,1)^tt.rotrSH(X,gt,8)^tt.shrSH(X,gt,7),Et=tt.rotrSL(X,gt,1)^tt.rotrSL(X,gt,8)^tt.shrSL(X,gt,7),Tt=cr[H-2]|0,Ee=ur[H-2]|0,U=tt.rotrSH(Tt,Ee,19)^tt.rotrBH(Tt,Ee,61)^tt.shrSH(Tt,Ee,6),R=tt.rotrSL(Tt,Ee,19)^tt.rotrBL(Tt,Ee,61)^tt.shrSL(Tt,Ee,6),D=tt.add4L(Et,R,ur[H-7],ur[H-16]),y=tt.add4H(D,ot,U,cr[H-7],cr[H-16]);cr[H]=y|0,ur[H]=D|0}let{Ah:r,Al:n,Bh:o,Bl:i,Ch:u,Cl:h,Dh:p,Dl:k,Eh:x,El:I,Fh:S,Fl:E,Gh:B,Gl:O,Hh:N,Hl:Y}=this;for(let H=0;H<80;H++){let X=tt.rotrSH(x,I,14)^tt.rotrSH(x,I,18)^tt.rotrBH(x,I,41),gt=tt.rotrSL(x,I,14)^tt.rotrSL(x,I,18)^tt.rotrBL(x,I,41),ot=x&S^~x&B,Et=I&E^~I&O,Tt=tt.add5L(Y,gt,Et,ju[H],ur[H]),Ee=tt.add5H(Tt,N,X,ot,Gu[H],cr[H]),U=Tt|0,R=tt.rotrSH(r,n,28)^tt.rotrBH(r,n,34)^tt.rotrBH(r,n,39),D=tt.rotrSL(r,n,28)^tt.rotrBL(r,n,34)^tt.rotrBL(r,n,39),y=r&o^r&u^o&u,a=n&i^n&h^i&h;N=B|0,Y=O|0,B=S|0,O=E|0,S=x|0,E=I|0,{h:x,l:I}=tt.add(p|0,k|0,Ee|0,U|0),p=u|0,k=h|0,u=o|0,h=i|0,o=r|0,i=n|0;let f=tt.add3L(U,D,a);r=tt.add3H(f,Ee,R,y),n=f|0}({h:r,l:n}=tt.add(this.Ah|0,this.Al|0,r|0,n|0)),{h:o,l:i}=tt.add(this.Bh|0,this.Bl|0,o|0,i|0),{h:u,l:h}=tt.add(this.Ch|0,this.Cl|0,u|0,h|0),{h:p,l:k}=tt.add(this.Dh|0,this.Dl|0,p|0,k|0),{h:x,l:I}=tt.add(this.Eh|0,this.El|0,x|0,I|0),{h:S,l:E}=tt.add(this.Fh|0,this.Fl|0,S|0,E|0),{h:B,l:O}=tt.add(this.Gh|0,this.Gl|0,B|0,O|0),{h:N,l:Y}=tt.add(this.Hh|0,this.Hl|0,N|0,Y|0),this.set(r,n,o,i,u,h,p,k,x,I,S,E,B,O,N,Y)}roundClean(){cr.fill(0),ur.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Eo=class extends rn{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Lo=class extends rn{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},oa=ar(()=>new rn),m0=ar(()=>new Eo),b0=ar(()=>new Lo);T();P();var Zu=Fe(ta(),1);var ge=BigInt(0),at=BigInt(1),Wr=BigInt(2),ia=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),At=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:ia,n:ia,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});var fa=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),nn=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),x0=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),Yu=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Xu=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Ju=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Qu=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),it=class{constructor(t,e,r,n){this.x=t,this.y=e,this.z=r,this.t=n}static fromAffine(t){if(!(t instanceof xt))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(xt.ZERO)?it.ZERO:new it(t.x,t.y,at,M(t.x*t.y))}static toAffineBatch(t){let e=rf(t.map(r=>r.z));return t.map((r,n)=>r.toAffine(e[n]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){aa(t);let{x:e,y:r,z:n}=this,{x:o,y:i,z:u}=t,h=M(e*u),p=M(o*n),k=M(r*u),x=M(i*n);return h===p&&k===x}negate(){return new it(M(-this.x),this.y,this.z,M(-this.t))}double(){let{x:t,y:e,z:r}=this,{a:n}=At,o=M(t*t),i=M(e*e),u=M(Wr*M(r*r)),h=M(n*o),p=t+e,k=M(M(p*p)-o-i),x=h+i,I=x-u,S=h-i,E=M(k*I),B=M(x*S),O=M(k*S),N=M(I*x);return new it(E,B,N,O)}add(t){aa(t);let{x:e,y:r,z:n,t:o}=this,{x:i,y:u,z:h,t:p}=t,k=M((r-e)*(u+i)),x=M((r+e)*(u-i)),I=M(x-k);if(I===ge)return this.double();let S=M(n*Wr*p),E=M(o*Wr*h),B=E+S,O=x+k,N=E-S,Y=M(B*I),H=M(O*N),X=M(B*N),gt=M(I*O);return new it(Y,H,gt,X)}subtract(t){return this.add(t.negate())}precomputeWindow(t){let e=1+256/t,r=[],n=this,o=n;for(let i=0;i<e;i++){o=n,r.push(o);for(let u=1;u<2**(t-1);u++)o=o.add(n),r.push(o);n=o.double()}return r}wNAF(t,e){!e&&this.equals(it.BASE)&&(e=xt.BASE);let r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&Po.get(e);n||(n=this.precomputeWindow(r),e&&r!==1&&(n=it.normalizeZ(n),Po.set(e,n)));let o=it.ZERO,i=it.ZERO,u=1+256/r,h=2**(r-1),p=BigInt(2**r-1),k=2**r,x=BigInt(r);for(let I=0;I<u;I++){let S=I*h,E=Number(t&p);if(t>>=x,E>h&&(E-=k,t+=at),E===0){let B=n[S];I%2&&(B=B.negate()),i=i.add(B)}else{let B=n[S+Math.abs(E)-1];E<0&&(B=B.negate()),o=o.add(B)}}return it.normalizeZ([o,i])[0]}multiply(t,e){return this.wNAF(jn(t,At.l),e)}multiplyUnsafe(t){let e=jn(t,At.l,!1),r=it.BASE,n=it.ZERO;if(e===ge)return n;if(this.equals(n)||e===at)return this;if(this.equals(r))return this.wNAF(e);let o=n,i=this;for(;e>ge;)e&at&&(o=o.add(i)),i=i.double(),e>>=at;return o}isSmallOrder(){return this.multiplyUnsafe(At.h).equals(it.ZERO)}isTorsionFree(){return this.multiplyUnsafe(At.l).equals(it.ZERO)}toAffine(t=Yn(this.z)){let{x:e,y:r,z:n}=this,o=M(e*t),i=M(r*t);if(M(n*t)!==at)throw new Error("invZ was invalid");return new xt(o,i)}fromRistrettoBytes(){Mo()}toRistrettoBytes(){Mo()}fromRistrettoHash(){Mo()}};it.BASE=new it(At.Gx,At.Gy,at,M(At.Gx*At.Gy));it.ZERO=new it(ge,at,at,ge);function aa(s){if(!(s instanceof it))throw new TypeError("ExtendedPoint expected")}function Ro(s){if(!(s instanceof Te))throw new TypeError("RistrettoPoint expected")}function Mo(){throw new Error("Legacy method: switch to RistrettoPoint")}var Te=class{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){let{d:e}=At,r=M(nn*t*t),n=M((r+at)*Ju),o=BigInt(-1),i=M((o-e*r)*M(r+e)),{isValid:u,value:h}=Co(n,i),p=M(h*t);hr(p)||(p=M(-p)),u||(h=p),u||(o=r);let k=M(o*(r-at)*Qu-i),x=h*h,I=M((h+h)*i),S=M(k*Yu),E=M(at-x),B=M(at+x);return new it(M(I*B),M(E*S),M(S*B),M(I*E))}static hashToCurve(t){t=lr(t,64);let e=To(t.slice(0,32)),r=this.calcElligatorRistrettoMap(e),n=To(t.slice(32,64)),o=this.calcElligatorRistrettoMap(n);return new Te(r.add(o))}static fromHex(t){t=lr(t,32);let{a:e,d:r}=At,n="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=To(t);if(!sf(on(o),t)||hr(o))throw new Error(n);let i=M(o*o),u=M(at+e*i),h=M(at-e*i),p=M(u*u),k=M(h*h),x=M(e*r*p-k),{isValid:I,value:S}=ua(M(x*k)),E=M(S*h),B=M(S*E*x),O=M((o+o)*E);hr(O)&&(O=M(-O));let N=M(u*B),Y=M(O*N);if(!I||hr(Y)||N===ge)throw new Error(n);return new Te(new it(O,N,at,Y))}toRawBytes(){let{x:t,y:e,z:r,t:n}=this.ep,o=M(M(r+e)*M(r-e)),i=M(t*e),u=M(i*i),{value:h}=ua(M(o*u)),p=M(h*o),k=M(h*i),x=M(p*k*n),I;if(hr(n*x)){let E=M(e*nn),B=M(t*nn);t=E,e=B,I=M(p*Xu)}else I=k;hr(t*x)&&(e=M(-e));let S=M((r-e)*I);return hr(S)&&(S=M(-S)),on(S)}toHex(){return an(this.toRawBytes())}toString(){return this.toHex()}equals(t){Ro(t);let e=this.ep,r=t.ep,n=M(e.x*r.y)===M(e.y*r.x),o=M(e.y*r.y)===M(e.x*r.x);return n||o}add(t){return Ro(t),new Te(this.ep.add(t.ep))}subtract(t){return Ro(t),new Te(this.ep.subtract(t.ep))}multiply(t){return new Te(this.ep.multiply(t))}multiplyUnsafe(t){return new Te(this.ep.multiplyUnsafe(t))}};Te.BASE=new Te(it.BASE);Te.ZERO=new Te(it.ZERO);var Po=new WeakMap,xt=class{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,Po.delete(this)}static fromHex(t,e=!0){let{d:r,P:n}=At;t=lr(t,32);let o=t.slice();o[31]=t[31]&-129;let i=cn(o);if(e&&i>=n)throw new Error("Expected 0 < hex < P");if(!e&&i>=fa)throw new Error("Expected 0 < hex < 2**256");let u=M(i*i),h=M(u-at),p=M(r*u+at),{isValid:k,value:x}=Co(h,p);if(!k)throw new Error("Point.fromHex: invalid y coordinate");let I=(x&at)===at;return(t[31]&128)!==0!==I&&(x=M(-x)),new xt(x,i)}static async fromPrivateKey(t){return(await pa(t)).point}toRawBytes(){let t=on(this.y);return t[31]|=this.x&at?128:0,t}toHex(){return an(this.toRawBytes())}toX25519(){let{y:t}=this,e=M((at+t)*Yn(at-t));return on(e)}isTorsionFree(){return it.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new xt(M(-this.x),this.y)}add(t){return it.fromAffine(this).add(it.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return it.fromAffine(this).multiply(t,this).toAffine()}};xt.BASE=new xt(At.Gx,At.Gy);xt.ZERO=new xt(ge,at);var Lr=class{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){let e=lr(t,64),r=xt.fromHex(e.slice(0,32),!1),n=cn(e.slice(32,64));return new Lr(r,n)}assertValidity(){let{r:t,s:e}=this;if(!(t instanceof xt))throw new Error("Expected Point instance");return jn(e,At.l,!1),this}toRawBytes(){let t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(on(this.s),32),t}toHex(){return an(this.toRawBytes())}};function ca(...s){if(!s.every(r=>r instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(s.length===1)return s[0];let t=s.reduce((r,n)=>r+n.length,0),e=new Uint8Array(t);for(let r=0,n=0;r<s.length;r++){let o=s[r];e.set(o,n),n+=o.length}return e}var tf=Array.from({length:256},(s,t)=>t.toString(16).padStart(2,"0"));function an(s){if(!(s instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let e=0;e<s.length;e++)t+=tf[s[e]];return t}function Oo(s){if(typeof s!="string")throw new TypeError("hexToBytes: expected string, got "+typeof s);if(s.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(s.length/2);for(let e=0;e<t.length;e++){let r=e*2,n=s.slice(r,r+2),o=Number.parseInt(n,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[e]=o}return t}function ha(s){let e=s.toString(16).padStart(64,"0");return Oo(e)}function on(s){return ha(s).reverse()}function hr(s){return(M(s)&at)===at}function cn(s){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+an(Uint8Array.from(s).reverse()))}var ef=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function To(s){return M(cn(s)&ef)}function M(s,t=At.P){let e=s%t;return e>=ge?e:t+e}function Yn(s,t=At.P){if(s===ge||t<=ge)throw new Error(`invert: expected positive integers, got n=${s} mod=${t}`);let e=M(s,t),r=t,n=ge,o=at,i=at,u=ge;for(;e!==ge;){let p=r/e,k=r%e,x=n-i*p,I=o-u*p;r=e,e=k,n=i,o=u,i=x,u=I}if(r!==at)throw new Error("invert: does not exist");return M(n,t)}function rf(s,t=At.P){let e=new Array(s.length),r=s.reduce((o,i,u)=>i===ge?o:(e[u]=o,M(o*i,t)),at),n=Yn(r,t);return s.reduceRight((o,i,u)=>i===ge?o:(e[u]=M(o*e[u],t),M(o*i,t)),n),e}function Ve(s,t){let{P:e}=At,r=s;for(;t-- >ge;)r*=r,r%=e;return r}function nf(s){let{P:t}=At,e=BigInt(5),r=BigInt(10),n=BigInt(20),o=BigInt(40),i=BigInt(80),h=s*s%t*s%t,p=Ve(h,Wr)*h%t,k=Ve(p,at)*s%t,x=Ve(k,e)*k%t,I=Ve(x,r)*x%t,S=Ve(I,n)*I%t,E=Ve(S,o)*S%t,B=Ve(E,i)*E%t,O=Ve(B,i)*E%t,N=Ve(O,r)*x%t;return{pow_p_5_8:Ve(N,Wr)*s%t,b2:h}}function Co(s,t){let e=M(t*t*t),r=M(e*e*t),n=nf(s*r).pow_p_5_8,o=M(s*e*n),i=M(t*o*o),u=o,h=M(o*nn),p=i===s,k=i===M(-s),x=i===M(-s*nn);return p&&(o=u),(k||x)&&(o=h),hr(o)&&(o=M(-o)),{isValid:p||k,value:o}}function ua(s){return Co(at,s)}function Gn(s){return M(cn(s),At.l)}function sf(s,t){if(s.length!==t.length)return!1;for(let e=0;e<s.length;e++)if(s[e]!==t[e])return!1;return!0}function lr(s,t){let e=s instanceof Uint8Array?Uint8Array.from(s):Oo(s);if(typeof t=="number"&&e.length!==t)throw new Error(`Expected ${t} bytes`);return e}function jn(s,t,e=!0){if(!t)throw new TypeError("Specify max value");if(typeof s=="number"&&Number.isSafeInteger(s)&&(s=BigInt(s)),typeof s=="bigint"&&s<t){if(e){if(ge<s)return s}else if(ge<=s)return s}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function of(s){return s[0]&=248,s[31]&=127,s[31]|=64,s}function la(s){if(s=typeof s=="bigint"||typeof s=="number"?ha(jn(s,fa)):lr(s),s.length!==32)throw new Error("Expected 32 bytes");return s}function da(s){let t=of(s.slice(0,32)),e=s.slice(32,64),r=Gn(t),n=xt.BASE.multiply(r),o=n.toRawBytes();return{head:t,prefix:e,scalar:r,point:n,pointBytes:o}}var sn;function Zn(...s){if(typeof sn!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return sn(...s)}async function pa(s){return da(await dr.sha512(la(s)))}function No(s){return da(Zn(la(s)))}function af(s){return No(s).pointBytes}function cf(s,t){s=lr(s);let{prefix:e,scalar:r,pointBytes:n}=No(t),o=Gn(Zn(e,s)),i=xt.BASE.multiply(o),u=Gn(Zn(i.toRawBytes(),n,s)),h=M(o+u*r,At.l);return new Lr(i,h).toRawBytes()}function uf(s,t,e){t=lr(t),e instanceof xt||(e=xt.fromHex(e,!1));let{r,s:n}=s instanceof Lr?s.assertValidity():Lr.fromHex(s),o=it.BASE.multiplyUnsafe(n);return{r,s:n,SB:o,pub:e,msg:t}}function ff(s,t,e,r){let n=Gn(r),o=it.fromAffine(s).multiplyUnsafe(n);return it.fromAffine(t).add(o).subtract(e).multiplyUnsafe(At.h).equals(it.ZERO)}function hf(s,t,e){let{r,SB:n,msg:o,pub:i}=uf(s,t,e),u=Zn(r.toRawBytes(),i.toRawBytes(),o);return ff(i,r,n,u)}var Xn={getExtendedPublicKey:No,getPublicKey:af,sign:cf,verify:hf};xt.BASE._setWindowSize(8);var fr={node:Zu,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},dr={bytesToHex:an,hexToBytes:Oo,concatBytes:ca,getExtendedPublicKey:pa,mod:M,invert:Yn,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:s=>{if(s=lr(s),s.length<40||s.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return M(cn(s),At.l-at)+at},randomBytes:(s=32)=>{if(fr.web)return fr.web.getRandomValues(new Uint8Array(s));if(fr.node){let{randomBytes:t}=fr.node;return new Uint8Array(t(s).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>dr.randomBytes(32),sha512:async(...s)=>{let t=ca(...s);if(fr.web){let e=await fr.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}else{if(fr.node)return Uint8Array.from(fr.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(s=8,t=xt.BASE){let e=t.equals(xt.BASE)?t:new xt(t.x,t.y);return e._setWindowSize(s),e.multiply(Wr),e},sha512Sync:void 0};Object.defineProperties(dr,{sha512Sync:{configurable:!1,get(){return sn},set(s){sn||(sn=s)}}});var Si=Fe(ga()),me=Fe(va());T();P();var gf=(s,t,e)=>s&t^~s&e,mf=(s,t,e)=>s&t^s&e^t&e,bf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),yr=new Uint32Array(64),Uo=class extends Kr{constructor(){super(64,32,8,!1),this.A=pr[0]|0,this.B=pr[1]|0,this.C=pr[2]|0,this.D=pr[3]|0,this.E=pr[4]|0,this.F=pr[5]|0,this.G=pr[6]|0,this.H=pr[7]|0}get(){let{A:t,B:e,C:r,D:n,E:o,F:i,G:u,H:h}=this;return[t,e,r,n,o,i,u,h]}set(t,e,r,n,o,i,u,h){this.A=t|0,this.B=e|0,this.C=r|0,this.D=n|0,this.E=o|0,this.F=i|0,this.G=u|0,this.H=h|0}process(t,e){for(let x=0;x<16;x++,e+=4)yr[x]=t.getUint32(e,!1);for(let x=16;x<64;x++){let I=yr[x-15],S=yr[x-2],E=qe(I,7)^qe(I,18)^I>>>3,B=qe(S,17)^qe(S,19)^S>>>10;yr[x]=B+yr[x-7]+E+yr[x-16]|0}let{A:r,B:n,C:o,D:i,E:u,F:h,G:p,H:k}=this;for(let x=0;x<64;x++){let I=qe(u,6)^qe(u,11)^qe(u,25),S=k+I+gf(u,h,p)+bf[x]+yr[x]|0,B=(qe(r,2)^qe(r,13)^qe(r,22))+mf(r,n,o)|0;k=p,p=h,h=u,u=i+S|0,i=o,o=n,n=r,r=S+B|0}r=r+this.A|0,n=n+this.B|0,o=o+this.C|0,i=i+this.D|0,u=u+this.E|0,h=h+this.F|0,p=p+this.G|0,k=k+this.H|0,this.set(r,n,o,i,u,h,p,k)}roundClean(){yr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Qn=ar(()=>new Uo);var en=Fe(yu()),w=Fe(Ho()),Xc=Fe(Ho()),Fn=Fe(pu());T();P();var Do=class extends TypeError{constructor(t,e){let r,{message:n,...o}=t,{path:i}=t,u=i.length===0?n:"At path: "+i.join(".")+" -- "+n;super(u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var h;return(h=r)!=null?h:r=[t,...e()]}}};function vf(s){return mr(s)&&typeof s[Symbol.iterator]=="function"}function mr(s){return typeof s=="object"&&s!=null}function He(s){return typeof s=="string"?JSON.stringify(s):""+s}function kf(s){let{done:t,value:e}=s.next();return t?void 0:e}function xf(s,t,e,r){if(s===!0)return;s===!1?s={}:typeof s=="string"&&(s={message:s});let{path:n,branch:o}=t,{type:i}=e,{refinement:u,message:h="Expected a value of type `"+i+"`"+(u?" with refinement `"+u+"`":"")+", but received: `"+He(r)+"`"}=s;return{value:r,type:i,refinement:u,key:n[n.length-1],path:n,branch:o,...s,message:h}}function*ka(s,t,e,r){vf(s)||(s=[s]);for(let n of s){let o=xf(n,t,e,r);o&&(yield o)}}function*Fo(s,t,e={}){let{path:r=[],branch:n=[s],coerce:o=!1,mask:i=!1}=e,u={path:r,branch:n};if(o&&(s=t.coercer(s,u),i&&t.type!=="type"&&mr(t.schema)&&mr(s)&&!Array.isArray(s)))for(let p in s)t.schema[p]===void 0&&delete s[p];let h=!0;for(let p of t.validator(s,u))h=!1,yield[p,void 0];for(let[p,k,x]of t.entries(s,u)){let I=Fo(k,x,{path:p===void 0?r:[...r,p],branch:p===void 0?n:[...n,k],coerce:o,mask:i});for(let S of I)S[0]?(h=!1,yield[S[0],void 0]):o&&(k=S[1],p===void 0?s=k:s instanceof Map?s.set(p,k):s instanceof Set?s.add(k):mr(s)&&(s[p]=k))}if(h)for(let p of t.refiner(s,u))h=!1,yield[p,void 0];h&&(yield[void 0,s])}var Ue=class{constructor(t){let{type:e,schema:r,validator:n,refiner:o,coercer:i=h=>h,entries:u=function*(){}}=t;this.type=e,this.schema=r,this.entries=u,this.coercer=i,n?this.validator=(h,p)=>{let k=n(h,p);return ka(k,p,this,h)}:this.validator=()=>[],o?this.refiner=(h,p)=>{let k=o(h,p);return ka(k,p,this,h)}:this.refiner=()=>[]}assert(t){return Vo(t,this)}create(t){return W(t,this)}is(t){return xa(t,this)}mask(t){return Sf(t,this)}validate(t,e={}){return pn(t,this,e)}};function Vo(s,t){let e=pn(s,t);if(e[0])throw e[0]}function W(s,t){let e=pn(s,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function Sf(s,t){let e=pn(s,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function xa(s,t){return!pn(s,t)[0]}function pn(s,t,e={}){let r=Fo(s,t,e),n=kf(r);if(n[0])return[new Do(n[0],function*(){for(let i of r)i[0]&&(yield i[0])}),void 0];{let o=n[1];return[void 0,o]}}function Rr(s,t){return new Ue({type:s,schema:null,validator:t})}function Sa(){return Rr("any",()=>!0)}function $(s){return new Ue({type:"array",schema:s,*entries(t){if(s&&Array.isArray(t))for(let[e,r]of t.entries())yield[e,r,s]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+He(t)}})}function $e(){return Rr("boolean",s=>typeof s=="boolean")}function ws(s){return Rr("instance",t=>t instanceof s||"Expected a `"+s.name+"` instance, but received: "+He(t))}function Bt(s){let t=He(s),e=typeof s;return new Ue({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?s:null,validator(r){return r===s||"Expected the literal `"+t+"`, but received: "+He(r)}})}function _f(){return Rr("never",()=>!1)}function Z(s){return new Ue({...s,validator:(t,e)=>t===null||s.validator(t,e),refiner:(t,e)=>t===null||s.refiner(t,e)})}function L(){return Rr("number",s=>typeof s=="number"&&!isNaN(s)||"Expected a number, but received: "+He(s))}function rt(s){return new Ue({...s,validator:(t,e)=>t===void 0||s.validator(t,e),refiner:(t,e)=>t===void 0||s.refiner(t,e)})}function $o(s,t){return new Ue({type:"record",schema:null,*entries(e){if(mr(e))for(let r in e){let n=e[r];yield[r,r,s],yield[r,n,t]}},validator(e){return mr(e)||"Expected an object, but received: "+He(e)}})}function K(){return Rr("string",s=>typeof s=="string"||"Expected a string, but received: "+He(s))}function vs(s){let t=_f();return new Ue({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){let r=Math.max(s.length,e.length);for(let n=0;n<r;n++)yield[n,e[n],s[n]||t]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+He(e)}})}function C(s){let t=Object.keys(s);return new Ue({type:"type",schema:s,*entries(e){if(mr(e))for(let r of t)yield[r,e[r],s[r]]},validator(e){return mr(e)||"Expected an object, but received: "+He(e)}})}function Re(s){let t=s.map(e=>e.type).join(" | ");return new Ue({type:"union",schema:null,validator(e,r){let n=[];for(let o of s){let[...i]=Fo(e,o,r),[u]=i;if(u[0])for(let[h]of i)h&&n.push(h);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+He(e),...n]}})}function Fr(){return Rr("unknown",()=>!0)}function Vr(s,t,e){return new Ue({...s,coercer:(r,n)=>xa(r,t)?s.coercer(e(r,n),n):s.coercer(r,n)})}var Jc=Fe(Ka()),Qc=Fe(uc());T();P();var[lc,dc,pc]=[[],[],[]],Ch=BigInt(0),En=BigInt(1),Nh=BigInt(2),zh=BigInt(7),Uh=BigInt(256),Kh=BigInt(113);for(let s=0,t=En,e=1,r=0;s<24;s++){[e,r]=[r,(2*e+3*r)%5],lc.push(2*(5*r+e)),dc.push((s+1)*(s+2)/2%64);let n=Ch;for(let o=0;o<7;o++)t=(t<<En^(t>>zh)*Kh)%Uh,t&Nh&&(n^=En<<(En<<BigInt(o))-En);pc.push(n)}var[Wh,qh]=tt.split(pc,!0),fc=(s,t,e)=>e>32?tt.rotlBH(s,t,e):tt.rotlSH(s,t,e),hc=(s,t,e)=>e>32?tt.rotlBL(s,t,e):tt.rotlSL(s,t,e);function Hh(s,t=24){let e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let i=0;i<10;i++)e[i]=s[i]^s[i+10]^s[i+20]^s[i+30]^s[i+40];for(let i=0;i<10;i+=2){let u=(i+8)%10,h=(i+2)%10,p=e[h],k=e[h+1],x=fc(p,k,1)^e[u],I=hc(p,k,1)^e[u+1];for(let S=0;S<50;S+=10)s[i+S]^=x,s[i+S+1]^=I}let n=s[2],o=s[3];for(let i=0;i<24;i++){let u=dc[i],h=fc(n,o,u),p=hc(n,o,u),k=lc[i];n=s[k],o=s[k+1],s[k]=h,s[k+1]=p}for(let i=0;i<50;i+=10){for(let u=0;u<10;u++)e[u]=s[i+u];for(let u=0;u<10;u++)s[i+u]^=~e[(u+2)%10]&e[(u+4)%10]}s[0]^=Wh[r],s[1]^=qh[r]}e.fill(0)}var $r=class extends Ze{constructor(t,e,r,n=!1,o=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=n,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ke.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ra(this.state)}keccak(){Hh(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){ke.exists(this);let{blockLen:e,state:r}=this;t=ir(t);let n=t.length;for(let o=0;o<n;){let i=Math.min(e-this.pos,n-o);for(let u=0;u<i;u++)r[this.pos++]^=t[o++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,(e&128)!==0&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){ke.exists(this,!1),ke.bytes(t),this.finish();let e=this.state,{blockLen:r}=this;for(let n=0,o=t.length;n<o;){this.posOut>=r&&this.keccak();let i=Math.min(r-this.posOut,o-n);t.set(e.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return ke.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ke.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:e,suffix:r,outputLen:n,rounds:o,enableXOF:i}=this;return t||(t=new $r(e,r,n,i,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=n,t.enableXOF=i,t.destroyed=this.destroyed,t}},Sr=(s,t,e)=>ar(()=>new $r(t,s,e)),ig=Sr(6,144,224/8),ag=Sr(6,136,256/8),cg=Sr(6,104,384/8),ug=Sr(6,72,512/8),fg=Sr(1,144,224/8),ci=Sr(1,136,256/8),hg=Sr(1,104,384/8),lg=Sr(1,72,512/8),yc=(s,t,e)=>na((r={})=>new $r(t,s,r.dkLen===void 0?e:r.dkLen,!0)),dg=yc(31,168,128/8),pg=yc(31,136,256/8);T();P();var Us=class extends Ze{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,ke.hash(t);let r=ir(e);if(this.iHash=t.create(),!(this.iHash instanceof Ze))throw new TypeError("Expected instance of class which extends utils.Hash");let n=this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;let o=new Uint8Array(n);o.set(r.length>this.iHash.blockLen?t.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(t){return ke.exists(this),this.iHash.update(t),this}digestInto(t){ke.exists(this),ke.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:r,finished:n,destroyed:o,blockLen:i,outputLen:u}=this;return t=t,t.finished=n,t.destroyed=o,t.blockLen=i,t.outputLen=u,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},ui=(s,t,e)=>new Us(s,t).update(e).digest();ui.create=(s,t)=>new Us(s,t);T();P();var Dh=Fe(ta(),1);var ct=BigInt(0),St=BigInt(1),_r=BigInt(2),Rn=BigInt(3),Fh=BigInt(8),Rt=Object.freeze({a:ct,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:St,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});function gc(s){let{a:t,b:e}=Rt,r=q(s*s),n=q(r*s);return q(n+t*s+e)}var Ks=Rt.a===ct,qs=class extends Error{constructor(t){super(t)}},pt=class{constructor(t,e,r){this.x=t,this.y=e,this.z=r}static fromAffine(t){if(!(t instanceof Lt))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new pt(t.x,t.y,St)}static toAffineBatch(t){let e=Zh(t.map(r=>r.z));return t.map((r,n)=>r.toAffine(e[n]))}static normalizeZ(t){return pt.toAffineBatch(t).map(pt.fromAffine)}equals(t){if(!(t instanceof pt))throw new TypeError("JacobianPoint expected");let{x:e,y:r,z:n}=this,{x:o,y:i,z:u}=t,h=q(n*n),p=q(u*u),k=q(e*p),x=q(o*h),I=q(q(r*u)*p),S=q(q(i*n)*h);return k===x&&I===S}negate(){return new pt(this.x,q(-this.y),this.z)}double(){let{x:t,y:e,z:r}=this,n=q(t*t),o=q(e*e),i=q(o*o),u=t+o,h=q(_r*(q(u*u)-n-i)),p=q(Rn*n),k=q(p*p),x=q(k-_r*h),I=q(p*(h-x)-Fh*i),S=q(_r*e*r);return new pt(x,I,S)}add(t){if(!(t instanceof pt))throw new TypeError("JacobianPoint expected");let{x:e,y:r,z:n}=this,{x:o,y:i,z:u}=t;if(o===ct||i===ct)return this;if(e===ct||r===ct)return t;let h=q(n*n),p=q(u*u),k=q(e*p),x=q(o*h),I=q(q(r*u)*p),S=q(q(i*n)*h),E=q(x-k),B=q(S-I);if(E===ct)return B===ct?this.double():pt.ZERO;let O=q(E*E),N=q(E*O),Y=q(k*O),H=q(B*B-N-_r*Y),X=q(B*(Y-H)-I*N),gt=q(n*u*E);return new pt(H,X,gt)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let e=pt.ZERO;if(typeof t=="bigint"&&t===ct)return e;let r=wc(t);if(r===St)return this;if(!Ks){let x=e,I=this;for(;r>ct;)r&St&&(x=x.add(I)),I=I.double(),r>>=St;return x}let{k1neg:n,k1:o,k2neg:i,k2:u}=kc(r),h=e,p=e,k=this;for(;o>ct||u>ct;)o&St&&(h=h.add(k)),u&St&&(p=p.add(k)),k=k.double(),o>>=St,u>>=St;return n&&(h=h.negate()),i&&(p=p.negate()),p=new pt(q(p.x*Rt.beta),p.y,p.z),h.add(p)}precomputeWindow(t){let e=Ks?128/t+1:256/t+1,r=[],n=this,o=n;for(let i=0;i<e;i++){o=n,r.push(o);for(let u=1;u<2**(t-1);u++)o=o.add(n),r.push(o);n=o.double()}return r}wNAF(t,e){!e&&this.equals(pt.BASE)&&(e=Lt.BASE);let r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&hi.get(e);n||(n=this.precomputeWindow(r),e&&r!==1&&(n=pt.normalizeZ(n),hi.set(e,n)));let o=pt.ZERO,i=pt.ZERO,u=1+(Ks?128/r:256/r),h=2**(r-1),p=BigInt(2**r-1),k=2**r,x=BigInt(r);for(let I=0;I<u;I++){let S=I*h,E=Number(t&p);if(t>>=x,E>h&&(E-=k,t+=St),E===0){let B=n[S];I%2&&(B=B.negate()),i=i.add(B)}else{let B=n[S+Math.abs(E)-1];E<0&&(B=B.negate()),o=o.add(B)}}return{p:o,f:i}}multiply(t,e){let r=wc(t),n,o;if(Ks){let{k1neg:i,k1:u,k2neg:h,k2:p}=kc(r),{p:k,f:x}=this.wNAF(u,e),{p:I,f:S}=this.wNAF(p,e);i&&(k=k.negate()),h&&(I=I.negate()),I=new pt(q(I.x*Rt.beta),I.y,I.z),n=k.add(I),o=x.add(S)}else{let{p:i,f:u}=this.wNAF(r,e);n=i,o=u}return pt.normalizeZ([n,o])[0]}toAffine(t=On(this.z)){let{x:e,y:r,z:n}=this,o=t,i=q(o*o),u=q(i*o),h=q(e*i),p=q(r*u);if(q(n*o)!==St)throw new Error("invZ was invalid");return new Lt(h,p)}};pt.BASE=new pt(Rt.Gx,Rt.Gy,St);pt.ZERO=new pt(ct,St,ct);var hi=new WeakMap,Lt=class{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,hi.delete(this)}hasEvenY(){return this.y%_r===ct}static fromCompressedHex(t){let e=t.length===32,r=er(e?t:t.subarray(1));if(!fi(r))throw new Error("Point is not on curve");let n=gc(r),o=jh(n),i=(o&St)===St;e?i&&(o=q(-o)):(t[0]&1)===1!==i&&(o=q(-o));let u=new Lt(r,o);return u.assertValidity(),u}static fromUncompressedHex(t){let e=er(t.subarray(1,33)),r=er(t.subarray(33,65)),n=new Lt(e,r);return n.assertValidity(),n}static fromHex(t){let e=Tn(t),r=e.length,n=e[0];if(r===32||r===33&&(n===2||n===3))return this.fromCompressedHex(e);if(r===65&&n===4)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r}`)}static fromPrivateKey(t){return Lt.BASE.multiply(Ds(t))}static fromSignature(t,e,r){t=Tn(t);let n=Xh(t),{r:o,s:i}=Qh(e);if(r!==0&&r!==1)throw new Error("Cannot recover signature: invalid recovery bit");let u=r&1?"03":"02",h=Lt.fromHex(u+jr(o)),{n:p}=Rt,k=On(o,p),x=q(-n*k,p),I=q(i*k,p),S=Lt.BASE.multiplyAndAddUnsafe(h,x,I);if(!S)throw new Error("Cannot recover signature: point at infinify");return S.assertValidity(),S}toRawBytes(t=!1){return Tr(this.toHex(t))}toHex(t=!1){let e=jr(this.x);return t?`${this.hasEvenY()?"02":"03"}${e}`:`04${e}${jr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:e,y:r}=this;if(!fi(e)||!fi(r))throw new Error(t);let n=q(r*r),o=gc(e);if(q(n-o)!==ct)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new Lt(this.x,q(-this.y))}double(){return pt.fromAffine(this).double().toAffine()}add(t){return pt.fromAffine(this).add(pt.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return pt.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,r){let n=pt.fromAffine(this),o=e===ct||e===St||this!==Lt.BASE?n.multiplyUnsafe(e):n.multiply(e),i=pt.fromAffine(t).multiplyUnsafe(r),u=o.add(i);return u.equals(pt.ZERO)?void 0:u.toAffine()}};Lt.BASE=new Lt(Rt.Gx,Rt.Gy);Lt.ZERO=new Lt(ct,ct);function mc(s){return Number.parseInt(s[0],16)>=8?"00"+s:s}function bc(s){if(s.length<2||s[0]!==2)throw new Error(`Invalid signature integer tag: ${Yr(s)}`);let t=s[1],e=s.subarray(2,t+2);if(!t||e.length!==t)throw new Error("Invalid signature integer: wrong length");if(e[0]===0&&e[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:er(e),left:s.subarray(t+2)}}function Vh(s){if(s.length<2||s[0]!=48)throw new Error(`Invalid signature tag: ${Yr(s)}`);if(s[1]!==s.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:e}=bc(s.subarray(2)),{data:r,left:n}=bc(e);if(n.length)throw new Error(`Invalid signature: left bytes after parsing: ${Yr(n)}`);return{r:t,s:r}}var je=class{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){let e=t instanceof Uint8Array,r="Signature.fromCompact";if(typeof t!="string"&&!e)throw new TypeError(`${r}: Expected string or Uint8Array`);let n=e?Yr(t):t;if(n.length!==128)throw new Error(`${r}: Expected 64-byte hex`);return new je(Hs(n.slice(0,64)),Hs(n.slice(64,128)))}static fromDER(t){let e=t instanceof Uint8Array;if(typeof t!="string"&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r,s:n}=Vh(e?t:Tr(t));return new je(r,n)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:e}=this;if(!Pn(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Pn(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=Rt.n>>St;return this.s>t}normalizeS(){return this.hasHighS()?new je(this.r,Rt.n-this.s):this}toDERRawBytes(t=!1){return Tr(this.toDERHex(t))}toDERHex(t=!1){let e=mc(Ln(this.s));if(t)return e;let r=mc(Ln(this.r)),n=Ln(r.length/2),o=Ln(e.length/2);return`30${Ln(r.length/2+e.length/2+4)}02${n}${r}02${o}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Tr(this.toCompactHex())}toCompactHex(){return jr(this.r)+jr(this.s)}};function Gr(...s){if(!s.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(s.length===1)return s[0];let t=s.reduce((r,n)=>r+n.length,0),e=new Uint8Array(t);for(let r=0,n=0;r<s.length;r++){let o=s[r];e.set(o,n),n+=o.length}return e}var $h=Array.from({length:256},(s,t)=>t.toString(16).padStart(2,"0"));function Yr(s){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let e=0;e<s.length;e++)t+=$h[s[e]];return t}var Gh=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function jr(s){if(typeof s!="bigint")throw new Error("Expected bigint");if(!(ct<=s&&s<Gh))throw new Error("Expected number < 2^256");return s.toString(16).padStart(64,"0")}function li(s){let t=Tr(jr(s));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function Ln(s){let t=s.toString(16);return t.length&1?`0${t}`:t}function Hs(s){if(typeof s!="string")throw new TypeError("hexToNumber: expected string, got "+typeof s);return BigInt(`0x${s}`)}function Tr(s){if(typeof s!="string")throw new TypeError("hexToBytes: expected string, got "+typeof s);if(s.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+s.length);let t=new Uint8Array(s.length/2);for(let e=0;e<t.length;e++){let r=e*2,n=s.slice(r,r+2),o=Number.parseInt(n,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[e]=o}return t}function er(s){return Hs(Yr(s))}function Tn(s){return s instanceof Uint8Array?Uint8Array.from(s):Tr(s)}function wc(s){if(typeof s=="number"&&Number.isSafeInteger(s)&&s>0)return BigInt(s);if(typeof s=="bigint"&&Pn(s))return s;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function q(s,t=Rt.P){let e=s%t;return e>=ct?e:t+e}function Ke(s,t){let{P:e}=Rt,r=s;for(;t-- >ct;)r*=r,r%=e;return r}function jh(s){let{P:t}=Rt,e=BigInt(6),r=BigInt(11),n=BigInt(22),o=BigInt(23),i=BigInt(44),u=BigInt(88),h=s*s*s%t,p=h*h*s%t,k=Ke(p,Rn)*p%t,x=Ke(k,Rn)*p%t,I=Ke(x,_r)*h%t,S=Ke(I,r)*I%t,E=Ke(S,n)*S%t,B=Ke(E,i)*E%t,O=Ke(B,u)*B%t,N=Ke(O,i)*E%t,Y=Ke(N,Rn)*p%t,H=Ke(Y,o)*S%t,X=Ke(H,e)*h%t;return Ke(X,_r)}function On(s,t=Rt.P){if(s===ct||t<=ct)throw new Error(`invert: expected positive integers, got n=${s} mod=${t}`);let e=q(s,t),r=t,n=ct,o=St,i=St,u=ct;for(;e!==ct;){let p=r/e,k=r%e,x=n-i*p,I=o-u*p;r=e,e=k,n=i,o=u,i=x,u=I}if(r!==St)throw new Error("invert: does not exist");return q(n,t)}function Zh(s,t=Rt.P){let e=new Array(s.length),r=s.reduce((o,i,u)=>i===ct?o:(e[u]=o,q(o*i,t)),St),n=On(r,t);return s.reduceRight((o,i,u)=>i===ct?o:(e[u]=q(o*e[u],t),q(o*i,t)),n),e}var vc=(s,t)=>(s+t/_r)/t,Yh={a1:BigInt("0x3086d221a7d46bcde86c90e49284eb15"),b1:-St*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a2:BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),b2:BigInt("0x3086d221a7d46bcde86c90e49284eb15"),POW_2_128:BigInt("0x100000000000000000000000000000000")};function kc(s){let{n:t}=Rt,{a1:e,b1:r,a2:n,b2:o,POW_2_128:i}=Yh,u=vc(o*s,t),h=vc(-r*s,t),p=q(s-u*e-h*n,t),k=q(-u*r-h*o,t),x=p>i,I=k>i;if(x&&(p=t-p),I&&(k=t-k),p>i||k>i)throw new Error("splitScalarEndo: Endomorphism failed, k="+s);return{k1neg:x,k1:p,k2neg:I,k2:k}}function Xh(s){let{n:t}=Rt,r=s.length*8-256,n=er(s);return r>0&&(n=n>>BigInt(r)),n>=t&&(n-=t),n}var Zr,Mn,di=class{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...t){return Ge.hmacSha256(this.k,...t)}hmacSync(...t){return Mn(this.k,...t)}checkSync(){if(typeof Mn!="function")throw new qs("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),t.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),t.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.checkSync(),this.incr(),this.v=this.hmacSync(this.v),this.v}};function Pn(s){return ct<s&&s<Rt.n}function fi(s){return ct<s&&s<Rt.P}function Jh(s,t,e){let r=er(s);if(!Pn(r))return;let{n}=Rt,o=Lt.BASE.multiply(r),i=q(o.x,n);if(i===ct)return;let u=q(On(r,n)*q(t+e*i,n),n);if(u===ct)return;let h=new je(i,u),p=(o.x===h.r?0:2)|Number(o.y&St);return{sig:h,recovery:p}}function Ds(s){let t;if(typeof s=="bigint")t=s;else if(typeof s=="number"&&Number.isSafeInteger(s)&&s>0)t=BigInt(s);else if(typeof s=="string"){if(s.length!==64)throw new Error("Expected 32 bytes of private key");t=Hs(s)}else if(s instanceof Uint8Array){if(s.length!==32)throw new Error("Expected 32 bytes of private key");t=er(s)}else throw new TypeError("Expected valid private key");if(!Pn(t))throw new Error("Expected private key: 0 < key < n");return t}function Qh(s){if(s instanceof je)return s.assertValidity(),s;try{return je.fromDER(s)}catch{return je.fromCompact(s)}}function xc(s,t=!1){return Lt.fromPrivateKey(s).toRawBytes(t)}function Sc(s){let t=s.length>32?s.slice(0,32):s;return er(t)}function tl(s){let t=Sc(s),e=q(t,Rt.n);return _c(e<ct?t:e)}function _c(s){return li(s)}function el(s,t,e){if(s==null)throw new Error(`sign: expected valid message hash, not "${s}"`);let r=Tn(s),n=Ds(t),o=[_c(n),tl(r)];if(e!=null){e===!0&&(e=Ge.randomBytes(32));let h=Tn(e);if(h.length!==32)throw new Error("sign: Expected 32 bytes of extra data");o.push(h)}let i=Gr(...o),u=Sc(r);return{seed:i,m:u,d:n}}function rl(s,t){let{sig:e,recovery:r}=s,{canonical:n,der:o,recovered:i}=Object.assign({canonical:!0,der:!0},t);n&&e.hasHighS()&&(e=e.normalizeS(),r^=1);let u=o?e.toDERRawBytes():e.toCompactRawBytes();return i?[u,r]:u}function Ic(s,t,e={}){let{seed:r,m:n,d:o}=el(s,t,e.extraEntropy),i,u=new di;for(u.reseedSync(r);!(i=Jh(u.generateSync(),n,o));)u.reseedSync();return rl(i,e)}Lt.BASE._setWindowSize(8);var Ne={node:Dh,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var Ws={},Ge={bytesToHex:Yr,hexToBytes:Tr,concatBytes:Gr,mod:q,invert:On,isValidPrivateKey(s){try{return Ds(s),!0}catch{return!1}},_bigintTo32Bytes:li,_normalizePrivateKey:Ds,hashToPrivateKey:s=>{if(s=Tn(s),s.length<40||s.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");let t=q(er(s),Rt.n-St)+St;return li(t)},randomBytes:(s=32)=>{if(Ne.web)return Ne.web.getRandomValues(new Uint8Array(s));if(Ne.node){let{randomBytes:t}=Ne.node;return Uint8Array.from(t(s))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Ge.hashToPrivateKey(Ge.randomBytes(40)),sha256:async(...s)=>{if(Ne.web){let t=await Ne.web.subtle.digest("SHA-256",Gr(...s));return new Uint8Array(t)}else if(Ne.node){let{createHash:t}=Ne.node,e=t("sha256");return s.forEach(r=>e.update(r)),Uint8Array.from(e.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(s,...t)=>{if(Ne.web){let e=await Ne.web.subtle.importKey("raw",s,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=Gr(...t),n=await Ne.web.subtle.sign("HMAC",e,r);return new Uint8Array(n)}else if(Ne.node){let{createHmac:e}=Ne.node,r=e("sha256",s);return t.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(s,...t)=>{let e=Ws[s];if(e===void 0){let r=await Ge.sha256(Uint8Array.from(s,n=>n.charCodeAt(0)));e=Gr(r,r),Ws[s]=e}return Ge.sha256(e,...t)},taggedHashSync:(s,...t)=>{if(typeof Zr!="function")throw new qs("sha256Sync is undefined, you need to set it");let e=Ws[s];if(e===void 0){let r=Zr(Uint8Array.from(s,n=>n.charCodeAt(0)));e=Gr(r,r),Ws[s]=e}return Zr(e,...t)},precompute(s=8,t=Lt.BASE){let e=t===Lt.BASE?t:new Lt(t.x,t.y);return e._setWindowSize(s),e.multiply(Rn),e}};Object.defineProperties(Ge,{sha256Sync:{configurable:!1,get(){return Zr},set(s){Zr||(Zr=s)}},hmacSha256Sync:{configurable:!1,get(){return Mn},set(s){Mn||(Mn=s)}}});dr.sha512Sync=(...s)=>oa(dr.concatBytes(...s));var sl=dr.randomPrivateKey,Ac=()=>{let s=dr.randomPrivateKey(),t=$s(s),e=new Uint8Array(64);return e.set(s),e.set(t,32),{publicKey:t,secretKey:e}},$s=Xn.getPublicKey;function Bc(s){try{return xt.fromHex(s,!0),!0}catch{return!1}}var Li=(s,t)=>Xn.sign(s,t.slice(0,32)),ol=Xn.verify,nt=s=>J.isBuffer(s)?s:s instanceof Uint8Array?J.from(s.buffer,s.byteOffset,s.byteLength):J.from(s),Gs=class{constructor(t){Object.assign(this,t)}encode(){return J.from((0,en.serialize)(Vs,this))}static decode(t){return(0,en.deserialize)(Vs,this,t)}static decodeUnchecked(t){return(0,en.deserializeUnchecked)(Vs,this,t)}},Ec=class extends Gs{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}},Vs=new Map,il=32,De=32;function al(s){return s._bn!==void 0}var Lc=1,z=class extends Gs{constructor(t){if(super({}),this._bn=void 0,al(t))this._bn=t._bn;else{if(typeof t=="string"){let e=me.default.decode(t);if(e.length!=De)throw new Error("Invalid public key input");this._bn=new Si.default(e)}else this._bn=new Si.default(t);if(this._bn.byteLength()>32)throw new Error("Invalid public key input")}}static unique(){let t=new z(Lc);return Lc+=1,new z(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return me.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){return this.toBuffer()}toBuffer(){let t=this._bn.toArrayLike(J);if(t.length===De)return t;let e=J.alloc(32);return t.copy(e,32-t.length),e}toString(){return this.toBase58()}static async createWithSeed(t,e,r){let n=J.concat([t.toBuffer(),J.from(e),r.toBuffer()]),o=Qn(n);return new z(o)}static createProgramAddressSync(t,e){let r=J.alloc(0);t.forEach(function(o){if(o.length>il)throw new TypeError("Max seed length exceeded");r=J.concat([r,nt(o)])}),r=J.concat([r,e.toBuffer(),J.from("ProgramDerivedAddress")]);let n=Qn(r);if(Bc(n))throw new Error("Invalid seeds, address must fall off the curve");return new z(n)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,n;for(;r!=0;){try{let o=t.concat(J.from([r]));n=this.createProgramAddressSync(o,e)}catch(o){if(o instanceof TypeError)throw o;r--;continue}return[n,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){let e=new z(t);return Bc(e.toBytes())}};z.default=new z("11111111111111111111111111111111");Vs.set(z,{kind:"struct",fields:[["_bn","u256"]]});var Rc=class{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){let e=nt(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=nt(sl()),this._publicKey=nt($s(this._secretKey))}get publicKey(){return new z(this._publicKey)}get secretKey(){return J.concat([this._secretKey,this._publicKey],64)}},Mg=new z("BPFLoader1111111111111111111111111111111111"),Or=1280-40-8,Ri=127,Un=64,js=class extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}};Object.defineProperty(js.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var Zs=class extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Zs.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Xr=class{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){let t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(let e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");let r=new Map;this.keySegments().flat().forEach((o,i)=>{r.set(o.toBase58(),i)});let n=o=>{let i=r.get(o.toBase58());if(i===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return i};return t.map(o=>({programIdIndex:n(o.programId),accountKeyIndexes:o.keys.map(i=>n(i.pubkey)),data:o.data}))}},st=(s="publicKey")=>w.blob(32,s),cl=(s="signature")=>w.blob(64,s),Pr=(s="string")=>{let t=w.struct([w.u32("length"),w.u32("lengthPadding"),w.blob(w.offset(w.u32(),-8),"chars")],s),e=t.decode.bind(t),r=t.encode.bind(t),n=t;return n.decode=(o,i)=>e(o,i).chars.toString(),n.encode=(o,i,u)=>{let h={chars:J.from(o,"utf8")};return r(h,i,u)},n.alloc=o=>w.u32().span+w.u32().span+J.from(o,"utf8").length,n},ul=(s="authorized")=>w.struct([st("staker"),st("withdrawer")],s),fl=(s="lockup")=>w.struct([w.ns64("unixTimestamp"),w.ns64("epoch"),st("custodian")],s),hl=(s="voteInit")=>w.struct([st("nodePubkey"),st("authorizedVoter"),st("authorizedWithdrawer"),w.u8("commission")],s),ll=(s="voteAuthorizeWithSeedArgs")=>w.struct([w.u32("voteAuthorizationType"),st("currentAuthorityDerivedKeyOwnerPubkey"),Pr("currentAuthorityDerivedKeySeed"),st("newAuthorized")],s);function tu(s,t){let e=n=>{if(n.span>=0)return n.span;if(typeof n.alloc=="function")return n.alloc(t[n.property]);if("count"in n&&"elementLayout"in n){let o=t[n.property];if(Array.isArray(o))return o.length*e(n.elementLayout)}else if("fields"in n)return tu({layout:n},t[n.property]);return 0},r=0;return s.layout.fields.forEach(n=>{r+=e(n)}),r}function Oe(s){let t=0,e=0;for(;;){let r=s.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function ze(s,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){s.push(r);break}else r|=128,s.push(r)}}function lt(s,t){if(!s)throw new Error(t||"Assertion failed")}var Jr=class{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){let r=new Map,n=i=>{let u=i.toBase58(),h=r.get(u);return h===void 0&&(h={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(u,h)),h},o=n(e);o.isSigner=!0,o.isWritable=!0;for(let i of t){n(i.programId).isInvoked=!0;for(let u of i.keys){let h=n(u.pubkey);h.isSigner||(h.isSigner=u.isSigner),h.isWritable||(h.isWritable=u.isWritable)}}return new Jr(e,r)}getMessageComponents(){let t=[...this.keyMetaMap.entries()];lt(t.length<=256,"Max static account keys length exceeded");let e=t.filter(([,h])=>h.isSigner&&h.isWritable),r=t.filter(([,h])=>h.isSigner&&!h.isWritable),n=t.filter(([,h])=>!h.isSigner&&h.isWritable),o=t.filter(([,h])=>!h.isSigner&&!h.isWritable),i={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:o.length};{lt(e.length>0,"Expected at least one writable signer key");let[h]=e[0];lt(h===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let u=[...e.map(([h])=>new z(h)),...r.map(([h])=>new z(h)),...n.map(([h])=>new z(h)),...o.map(([h])=>new z(h))];return[i,u]}extractTableLookup(t){let[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,i=>!i.isSigner&&!i.isInvoked&&i.isWritable),[n,o]=this.drainKeysFoundInLookupTable(t.state.addresses,i=>!i.isSigner&&!i.isInvoked&&!i.isWritable);if(!(e.length===0&&n.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:n},{writable:r,readonly:o}]}drainKeysFoundInLookupTable(t,e){let r=new Array,n=new Array;for(let[o,i]of this.keyMetaMap.entries())if(e(i)){let u=new z(o),h=t.findIndex(p=>p.equals(u));h>=0&&(lt(h<256,"Max lookup table index exceeded"),r.push(h),n.push(u),this.keyMetaMap.delete(o))}return[r,n]}},We=class{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new z(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:me.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Xr(this.staticAccountKeys)}static compile(t){let e=Jr.compile(t.instructions,t.payerKey),[r,n]=e.getMessageComponents(),i=new Xr(n).compileInstructions(t.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:me.default.encode(u.data)}));return new We({header:r,accountKeys:n,recentBlockhash:t.recentBlockhash,instructions:i})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){let r=t-e,o=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<o}else{let r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){let t=this.accountKeys.length,e=[];ze(e,t);let r=this.instructions.map(x=>{let{accounts:I,programIdIndex:S}=x,E=Array.from(me.default.decode(x.data)),B=[];ze(B,I.length);let O=[];return ze(O,E.length),{programIdIndex:S,keyIndicesCount:J.from(B),keyIndices:I,dataLength:J.from(O),data:E}}),n=[];ze(n,r.length);let o=J.alloc(Or);J.from(n).copy(o);let i=n.length;r.forEach(x=>{i+=w.struct([w.u8("programIdIndex"),w.blob(x.keyIndicesCount.length,"keyIndicesCount"),w.seq(w.u8("keyIndex"),x.keyIndices.length,"keyIndices"),w.blob(x.dataLength.length,"dataLength"),w.seq(w.u8("userdatum"),x.data.length,"data")]).encode(x,o,i)}),o=o.slice(0,i);let u=w.struct([w.blob(1,"numRequiredSignatures"),w.blob(1,"numReadonlySignedAccounts"),w.blob(1,"numReadonlyUnsignedAccounts"),w.blob(e.length,"keyCount"),w.seq(st("key"),t,"keys"),st("recentBlockhash")]),h={numRequiredSignatures:J.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:J.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:J.from([this.header.numReadonlyUnsignedAccounts]),keyCount:J.from(e),keys:this.accountKeys.map(x=>nt(x.toBytes())),recentBlockhash:me.default.decode(this.recentBlockhash)},p=J.alloc(2048),k=u.encode(h,p);return o.copy(p,k),p.slice(0,k+o.length)}static from(t){let e=[...t],r=e.shift();if(r!==(r&Ri))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let n=e.shift(),o=e.shift(),i=Oe(e),u=[];for(let I=0;I<i;I++){let S=e.slice(0,De);e=e.slice(De),u.push(new z(J.from(S)))}let h=e.slice(0,De);e=e.slice(De);let p=Oe(e),k=[];for(let I=0;I<p;I++){let S=e.shift(),E=Oe(e),B=e.slice(0,E);e=e.slice(E);let O=Oe(e),N=e.slice(0,O),Y=me.default.encode(J.from(N));e=e.slice(O),k.push({programIdIndex:S,accounts:B,data:Y})}let x={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:o},recentBlockhash:me.default.encode(J.from(h)),accountKeys:u,instructions:k};return new We(x)}},Br=class{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(let e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Xr(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){let n=t-r,o=this.addressTableLookups.reduce((i,u)=>i+u.writableIndexes.length,0);return n<o}else if(t>=this.header.numRequiredSignatures){let n=t-e,i=r-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{let n=e-this.header.numReadonlySignedAccounts;return t<n}}resolveAddressTableLookups(t){let e={writable:[],readonly:[]};for(let r of this.addressTableLookups){let n=t.find(o=>o.key.equals(r.accountKey));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(let o of r.writableIndexes)if(o<n.state.addresses.length)e.writable.push(n.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${r.accountKey.toBase58()}`);for(let o of r.readonlyIndexes)if(o<n.state.addresses.length)e.readonly.push(n.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){let e=Jr.compile(t.instructions,t.payerKey),r=new Array,n={writable:new Array,readonly:new Array},o=t.addressLookupTableAccounts||[];for(let k of o){let x=e.extractTableLookup(k);if(x!==void 0){let[I,{writable:S,readonly:E}]=x;r.push(I),n.writable.push(...S),n.readonly.push(...E)}}let[i,u]=e.getMessageComponents(),p=new Xr(u,n).compileInstructions(t.instructions);return new Br({header:i,staticAccountKeys:u,recentBlockhash:t.recentBlockhash,compiledInstructions:p,addressTableLookups:r})}serialize(){let t=Array();ze(t,this.staticAccountKeys.length);let e=this.serializeInstructions(),r=Array();ze(r,this.compiledInstructions.length);let n=this.serializeAddressTableLookups(),o=Array();ze(o,this.addressTableLookups.length);let i=w.struct([w.u8("prefix"),w.struct([w.u8("numRequiredSignatures"),w.u8("numReadonlySignedAccounts"),w.u8("numReadonlyUnsignedAccounts")],"header"),w.blob(t.length,"staticAccountKeysLength"),w.seq(st(),this.staticAccountKeys.length,"staticAccountKeys"),st("recentBlockhash"),w.blob(r.length,"instructionsLength"),w.blob(e.length,"serializedInstructions"),w.blob(o.length,"addressTableLookupsLength"),w.blob(n.length,"serializedAddressTableLookups")]),u=new Uint8Array(Or),h=1<<7,p=i.encode({prefix:h,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(k=>k.toBytes()),recentBlockhash:me.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:n},u);return u.slice(0,p)}serializeInstructions(){let t=0,e=new Uint8Array(Or);for(let r of this.compiledInstructions){let n=Array();ze(n,r.accountKeyIndexes.length);let o=Array();ze(o,r.data.length),t+=w.struct([w.u8("programIdIndex"),w.blob(n.length,"encodedAccountKeyIndexesLength"),w.seq(w.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),w.blob(o.length,"encodedDataLength"),w.blob(r.data.length,"data")]).encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0,e=new Uint8Array(Or);for(let r of this.addressTableLookups){let n=Array();ze(n,r.writableIndexes.length);let o=Array();ze(o,r.readonlyIndexes.length),t+=w.struct([st("accountKey"),w.blob(n.length,"encodedWritableIndexesLength"),w.seq(w.u8(),r.writableIndexes.length,"writableIndexes"),w.blob(o.length,"encodedReadonlyIndexesLength"),w.seq(w.u8(),r.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t],r=e.shift(),n=r&Ri;lt(r!==n,"Expected versioned message but received legacy message");let o=n;lt(o===0,`Expected versioned message with version 0 but found version ${o}`);let i={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},u=[],h=Oe(e);for(let E=0;E<h;E++)u.push(new z(e.splice(0,De)));let p=me.default.encode(e.splice(0,De)),k=Oe(e),x=[];for(let E=0;E<k;E++){let B=e.shift(),O=Oe(e),N=e.splice(0,O),Y=Oe(e),H=new Uint8Array(e.splice(0,Y));x.push({programIdIndex:B,accountKeyIndexes:N,data:H})}let I=Oe(e),S=[];for(let E=0;E<I;E++){let B=new z(e.splice(0,De)),O=Oe(e),N=e.splice(0,O),Y=Oe(e),H=e.splice(0,Y);S.push({accountKey:B,writableIndexes:N,readonlyIndexes:H})}return new Br({header:i,staticAccountKeys:u,recentBlockhash:p,compiledInstructions:x,addressTableLookups:S})}},eu={deserializeMessageVersion(s){let t=s[0],e=t&Ri;return e===t?"legacy":e},deserialize:s=>{let t=eu.deserializeMessageVersion(s);if(t==="legacy")return We.from(s);if(t===0)return Br.deserialize(s);throw new Error(`Transaction message version ${t} deserialization is not supported`)}},Ir;(function(s){s[s.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",s[s.PROCESSED=1]="PROCESSED",s[s.TIMED_OUT=2]="TIMED_OUT"})(Ir||(Ir={}));var dl=J.alloc(Un).fill(0),wt=class{constructor(t){this.keys=void 0,this.programId=void 0,this.data=J.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}},yt=class{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){let{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{let{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new wt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let B=0;B<e.length;B++)if(e[B].programId===void 0)throw new Error(`Transaction instruction index ${B} has undefined program id`);let n=[],o=[];e.forEach(B=>{B.keys.forEach(N=>{o.push({...N})});let O=B.programId.toString();n.includes(O)||n.push(O)}),n.forEach(B=>{o.push({pubkey:new z(B),isSigner:!1,isWritable:!1})});let i=[];o.forEach(B=>{let O=B.pubkey.toString(),N=i.findIndex(Y=>Y.pubkey.toString()===O);N>-1?(i[N].isWritable=i[N].isWritable||B.isWritable,i[N].isSigner=i[N].isSigner||B.isSigner):i.push(B)}),i.sort(function(B,O){return B.isSigner!==O.isSigner?B.isSigner?-1:1:B.isWritable!==O.isWritable?B.isWritable?-1:1:B.pubkey.toBase58().localeCompare(O.pubkey.toBase58())});let u=i.findIndex(B=>B.pubkey.equals(r));if(u>-1){let[B]=i.splice(u,1);B.isSigner=!0,B.isWritable=!0,i.unshift(B)}else i.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(let B of this.signatures){let O=i.findIndex(N=>N.pubkey.equals(B.publicKey));if(O>-1)i[O].isSigner||(i[O].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${B.publicKey.toString()}`)}let h=0,p=0,k=0,x=[],I=[];i.forEach(({pubkey:B,isSigner:O,isWritable:N})=>{O?(x.push(B.toString()),h+=1,N||(p+=1)):(I.push(B.toString()),N||(k+=1))});let S=x.concat(I),E=e.map(B=>{let{data:O,programId:N}=B;return{programIdIndex:S.indexOf(N.toString()),accounts:B.keys.map(Y=>S.indexOf(Y.pubkey.toString())),data:me.default.encode(O)}});return E.forEach(B=>{lt(B.programIdIndex>=0),B.accounts.forEach(O=>lt(O>=0))}),new We({header:{numRequiredSignatures:h,numReadonlySignedAccounts:p,numReadonlyUnsignedAccounts:k},accountKeys:S,recentBlockhash:t,instructions:E})}_compile(){let t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((n,o)=>e[o].equals(n.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");let e=new Set;this.signatures=t.filter(r=>{let n=r.toString();return e.has(n)?!1:(e.add(n),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");let e=new Set,r=[];for(let o of t){let i=o.publicKey.toString();e.has(i)||(e.add(i),r.push(o))}this.signatures=r.map(o=>({signature:null,publicKey:o.publicKey}));let n=this._compile();this._partialSign(n,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");let e=new Set,r=[];for(let o of t){let i=o.publicKey.toString();e.has(i)||(e.add(i),r.push(o))}let n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){let r=t.serialize();e.forEach(n=>{let o=Li(r,n.secretKey);this._addSignature(n.publicKey,nt(o))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){lt(e.length===64);let r=this.signatures.findIndex(n=>t.equals(n.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=J.from(e)}verifySignatures(){return this._verifySignatures(this.serializeMessage(),!0)}_verifySignatures(t,e){for(let{signature:r,publicKey:n}of this.signatures)if(r===null){if(e)return!1}else if(!ol(r,t,n.toBuffer()))return!1;return!0}serialize(t){let{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r&&!this._verifySignatures(n,e))throw new Error("Signature verification failed");return this._serialize(n)}_serialize(t){let{signatures:e}=this,r=[];ze(r,e.length);let n=r.length+e.length*64+t.length,o=J.alloc(n);return lt(e.length<256),J.from(r).copy(o,0),e.forEach(({signature:i},u)=>{i!==null&&(lt(i.length===64,"signature has invalid length"),J.from(i).copy(o,r.length+u*64))}),t.copy(o,r.length+e.length*64),lt(o.length<=Or,`Transaction too large: ${o.length} > ${Or}`),o}get keys(){return lt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return lt(this.instructions.length===1),this.instructions[0].programId}get data(){return lt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t],r=Oe(e),n=[];for(let o=0;o<r;o++){let i=e.slice(0,Un);e=e.slice(Un),n.push(me.default.encode(J.from(i)))}return yt.populate(We.from(e),n)}static populate(t,e=[]){let r=new yt;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((n,o)=>{let i={signature:n==me.default.encode(dl)?null:me.default.decode(n),publicKey:t.accountKeys[o]};r.signatures.push(i)}),t.instructions.forEach(n=>{let o=n.accounts.map(i=>{let u=t.accountKeys[i];return{pubkey:u,isSigner:r.signatures.some(h=>h.publicKey.toString()===u.toString())||t.isAccountSigner(i),isWritable:t.isAccountWritable(i)}});r.instructions.push(new wt({keys:o,programId:t.accountKeys[n.programIdIndex],data:me.default.decode(n.data)}))}),r._message=t,r._json=r.toJSON(),r}},Ys=class{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){let{header:r,compiledInstructions:n,recentBlockhash:o}=t,{numRequiredSignatures:i,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:h}=r,p=i-u;lt(p>0,"Message header is invalid");let k=t.staticAccountKeys.length-h;lt(k>=0,"Message header is invalid");let x=t.getAccountKeys(e),I=x.get(0);if(I===void 0)throw new Error("Failed to decompile message because no account keys were found");let S=[];for(let E of n){let B=[];for(let N of E.accountKeyIndexes){let Y=x.get(N);if(Y===void 0)throw new Error(`Failed to find key for account key index ${N}`);let H=N<i,X;H?X=N<p:N<x.staticAccountKeys.length?X=N-i<k:X=N-x.staticAccountKeys.length<x.accountKeysFromLookups.writable.length,B.push({pubkey:Y,isSigner:N<r.numRequiredSignatures,isWritable:X})}let O=x.get(E.programIdIndex);if(O===void 0)throw new Error(`Failed to find program id for program id index ${E.programIdIndex}`);S.push(new wt({programId:O,data:nt(E.data),keys:B}))}return new Ys({payerKey:I,instructions:S,recentBlockhash:o})}compileToLegacyMessage(){return We.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Br.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}},Xs=class{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)lt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{let r=[];for(let n=0;n<t.header.numRequiredSignatures;n++)r.push(new Uint8Array(Un));this.signatures=r}this.message=t}serialize(){let t=this.message.serialize(),e=Array();ze(e,this.signatures.length);let r=w.struct([w.blob(e.length,"encodedSignaturesLength"),w.seq(cl(),this.signatures.length,"signatures"),w.blob(t.length,"serializedMessage")]),n=new Uint8Array(2048),o=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},n);return n.slice(0,o)}static deserialize(t){let e=[...t],r=[],n=Oe(e);for(let i=0;i<n;i++)r.push(new Uint8Array(e.splice(0,Un)));let o=eu.deserialize(new Uint8Array(e));return new Xs(o,r)}sign(t){let e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let n of t){let o=r.findIndex(i=>i.equals(n.publicKey));lt(o>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[o]=Li(e,n.secretKey)}}addSignature(t,e){lt(e.byteLength===64,"Signature must be 64 bytes long");let n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(t));lt(n>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=e}},rr=new z("SysvarC1ock11111111111111111111111111111111"),Tg=new z("SysvarEpochSchedu1e111111111111111111111111"),Pg=new z("Sysvar1nstructions1111111111111111111111111"),pi=new z("SysvarRecentB1ockHashes11111111111111111111"),Kn=new z("SysvarRent111111111111111111111111111111111"),Og=new z("SysvarRewards111111111111111111111111111111"),Cg=new z("SysvarS1otHashes111111111111111111111111111"),Ng=new z("SysvarS1otHistory11111111111111111111111111"),yi=new z("SysvarStakeHistory1111111111111111111111111");async function gi(s,t,e,r){let n=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},o=await s.sendTransaction(t,e,n),i=t.recentBlockhash!=null&&t.lastValidBlockHeight!=null?(await s.confirmTransaction({signature:o,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value:(await s.confirmTransaction(o,r&&r.commitment)).value;if(i.err)throw new Error(`Transaction ${o} failed (${JSON.stringify(i)})`);return o}function zn(s){return new Promise(t=>setTimeout(t,s))}function ft(s,t){let e=s.layout.span>=0?s.layout.span:tu(s,t),r=J.alloc(e),n=Object.assign({instruction:s.index},t);return s.layout.encode(n,r),r}function bt(s,t){let e;try{e=s.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==s.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${s.index}`);return e}var pl=w.nu64("lamportsPerSignature"),ru=w.struct([w.u32("version"),w.u32("state"),st("authorizedPubkey"),st("nonce"),w.struct([pl],"feeCalculator")]),Mc=ru.span,Wn=class{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){let e=ru.decode(nt(t),0);return new Wn({authorizedPubkey:new z(e.authorizedPubkey),nonce:new z(e.nonce).toString(),feeCalculator:e.feeCalculator})}},yl=s=>{let t=s.decode.bind(s),e=s.encode.bind(s);return{decode:t,encode:e}},gl=s=>t=>{let e=(0,Xc.blob)(s,t),{encode:r,decode:n}=yl(e),o=e;return o.decode=(i,u)=>{let h=n(i,u);return(0,Fn.toBigIntLE)(J.from(h))},o.encode=(i,u,h)=>{let p=(0,Fn.toBufferLE)(i,s);return r(p,u,h)},o},Qr=gl(8),Tc=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=w.u32("instruction").decode(t.data),n;for(let[o,i]of Object.entries(_t))if(i.index==r){n=o;break}if(!n)throw new Error("Instruction type incorrect; not a SystemInstruction");return n}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:e,space:r,programId:n}=bt(_t.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new z(n)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:e}=bt(_t.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e,seed:r,programId:n}=bt(_t.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new z(n)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{space:e}=bt(_t.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:e,seed:r,space:n,programId:o}=bt(_t.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new z(e),seed:r,space:n,programId:new z(o)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{programId:e}=bt(_t.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new z(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:e,seed:r,programId:n}=bt(_t.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new z(e),seed:r,programId:new z(n)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{base:e,seed:r,lamports:n,space:o,programId:i}=bt(_t.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new z(e),seed:r,lamports:n,space:o,programId:new z(i)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{authorized:e}=bt(_t.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new z(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),bt(_t.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:e}=bt(_t.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:e}=bt(_t.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new z(e)}}static checkProgramId(t){if(!t.equals(be.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},_t=Object.freeze({Create:{index:0,layout:w.struct([w.u32("instruction"),w.ns64("lamports"),w.ns64("space"),st("programId")])},Assign:{index:1,layout:w.struct([w.u32("instruction"),st("programId")])},Transfer:{index:2,layout:w.struct([w.u32("instruction"),Qr("lamports")])},CreateWithSeed:{index:3,layout:w.struct([w.u32("instruction"),st("base"),Pr("seed"),w.ns64("lamports"),w.ns64("space"),st("programId")])},AdvanceNonceAccount:{index:4,layout:w.struct([w.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:w.struct([w.u32("instruction"),w.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:w.struct([w.u32("instruction"),st("authorized")])},AuthorizeNonceAccount:{index:7,layout:w.struct([w.u32("instruction"),st("authorized")])},Allocate:{index:8,layout:w.struct([w.u32("instruction"),w.ns64("space")])},AllocateWithSeed:{index:9,layout:w.struct([w.u32("instruction"),st("base"),Pr("seed"),w.ns64("space"),st("programId")])},AssignWithSeed:{index:10,layout:w.struct([w.u32("instruction"),st("base"),Pr("seed"),st("programId")])},TransferWithSeed:{index:11,layout:w.struct([w.u32("instruction"),Qr("lamports"),Pr("seed"),st("programId")])},UpgradeNonceAccount:{index:12,layout:w.struct([w.u32("instruction")])}}),be=class{constructor(){}static createAccount(t){let e=_t.Create,r=ft(e,{lamports:t.lamports,space:t.space,programId:nt(t.programId.toBuffer())});return new wt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){let n=_t.TransferWithSeed;e=ft(n,{lamports:BigInt(t.lamports),seed:t.seed,programId:nt(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{let n=_t.Transfer;e=ft(n,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new wt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){let n=_t.AssignWithSeed;e=ft(n,{base:nt(t.basePubkey.toBuffer()),seed:t.seed,programId:nt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let n=_t.Assign;e=ft(n,{programId:nt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new wt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){let e=_t.CreateWithSeed,r=ft(e,{base:nt(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:nt(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&n.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new wt({keys:n,programId:this.programId,data:r})}static createNonceAccount(t){let e=new yt;"basePubkey"in t&&"seed"in t?e.add(be.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Mc,programId:this.programId})):e.add(be.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Mc,programId:this.programId}));let r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){let e=_t.InitializeNonceAccount,r=ft(e,{authorized:nt(t.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:pi,isSigner:!1,isWritable:!1},{pubkey:Kn,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new wt(n)}static nonceAdvance(t){let e=_t.AdvanceNonceAccount,r=ft(e),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:pi,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new wt(n)}static nonceWithdraw(t){let e=_t.WithdrawNonceAccount,r=ft(e,{lamports:t.lamports});return new wt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:pi,isSigner:!1,isWritable:!1},{pubkey:Kn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){let e=_t.AuthorizeNonceAccount,r=ft(e,{authorized:nt(t.newAuthorizedPubkey.toBuffer())});return new wt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){let n=_t.AllocateWithSeed;e=ft(n,{base:nt(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:nt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let n=_t.Allocate;e=ft(n,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new wt({keys:r,programId:this.programId,data:e})}};be.programId=new z("11111111111111111111111111111111");var ml=Or-300,Er=class{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Er.chunkSize)+1+1)}static async load(t,e,r,n,o){{let x=await t.getMinimumBalanceForRentExemption(o.length),I=await t.getAccountInfo(r.publicKey,"confirmed"),S=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==o.length&&(S=S||new yt,S.add(be.allocate({accountPubkey:r.publicKey,space:o.length}))),I.owner.equals(n)||(S=S||new yt,S.add(be.assign({accountPubkey:r.publicKey,programId:n}))),I.lamports<x&&(S=S||new yt,S.add(be.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:x-I.lamports})))}else S=new yt().add(be.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:x>0?x:1,space:o.length,programId:n}));S!==null&&await gi(t,S,[e,r],{commitment:"confirmed"})}let i=w.struct([w.u32("instruction"),w.u32("offset"),w.u32("bytesLength"),w.u32("bytesLengthPadding"),w.seq(w.u8("byte"),w.offset(w.u32(),-8),"bytes")]),u=Er.chunkSize,h=0,p=o,k=[];for(;p.length>0;){let x=p.slice(0,u),I=J.alloc(u+16);i.encode({instruction:0,offset:h,bytes:x,bytesLength:0,bytesLengthPadding:0},I);let S=new yt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:I});k.push(gi(t,S,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await zn(1e3/4),h+=u,p=p.slice(u)}await Promise.all(k);{let x=w.struct([w.u32("instruction")]),I=J.alloc(x.span);x.encode({instruction:1},I);let S=new yt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Kn,isSigner:!1,isWritable:!1}],programId:n,data:I});await gi(t,S,[e,r],{commitment:"confirmed"})}return!0}};Er.chunkSize=ml;var zg=new z("BPFLoader2111111111111111111111111111111111"),Pc=class{static getMinNumSignatures(t){return Er.getMinNumSignatures(t)}static load(t,e,r,n,o){return Er.load(t,e,r,o,n)}},bl=Object.prototype.toString,wl=Object.keys||function(s){var t=[];for(var e in s)t.push(e);return t};function Nn(s,t){var e,r,n,o,i,u,h;if(s===!0)return"true";if(s===!1)return"false";switch(typeof s){case"object":if(s===null)return null;if(s.toJSON&&typeof s.toJSON=="function")return Nn(s.toJSON(),t);if(h=bl.call(s),h==="[object Array]"){for(n="[",r=s.length-1,e=0;e<r;e++)n+=Nn(s[e],!0)+",";return r>-1&&(n+=Nn(s[e],!0)),n+"]"}else if(h==="[object Object]"){for(o=wl(s).sort(),r=o.length,n="",e=0;e<r;)i=o[e],u=Nn(s[i],!1),u!==void 0&&(n&&(n+=","),n+=JSON.stringify(i)+":"+u),e++;return"{"+n+"}"}else return JSON.stringify(s);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(s);default:return isFinite(s)?s:null}}var vl=function(s){var t=Nn(s,!1);if(t!==void 0)return""+t},kl=vl,Cn=32;function mi(s){let t=0;for(;s>1;)s/=2,t++;return t}function xl(s){return s===0?1:(s--,s|=s>>1,s|=s>>2,s|=s>>4,s|=s>>8,s|=s>>16,s|=s>>32,s+1)}var _i=class{constructor(t,e,r,n,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=o}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){let e=mi(xl(t+Cn+1))-mi(Cn)-1,r=this.getSlotsInEpoch(e),n=t-(r-Cn);return[e,n]}else{let e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),n=this.firstNormalEpoch+r,o=e%this.slotsPerEpoch;return[n,o]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Cn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+mi(Cn)):this.slotsPerEpoch}},Js=class extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}},Ug={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},G=class extends Error{constructor({code:t,message:e,data:r},n){super(n!=null?`${n}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}},Sl=globalThis.fetch,_l=160,Il=64,Al=_l/Il,Bl=1e3/Al;function El(s,t){let e;try{e=s.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==s.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${s.index}`);return e}var Oc=56,Qs=class{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){let t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){let e=El(Ll,t),r=t.length-Oc;lt(r>=0,"lookup table is invalid"),lt(r%32===0,"lookup table is invalid");let n=r/32,{addresses:o}=w.struct([w.seq(st(),n,"addresses")]).decode(t.slice(Oc));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new z(e.authority[0]):void 0,addresses:o.map(i=>new z(i))}}},Ll={index:1,layout:w.struct([w.u32("typeIndex"),Qr("deactivationSlot"),w.nu64("lastExtendedSlot"),w.u8("lastExtendedStartIndex"),w.u8(),w.seq(st(),w.offset(w.u8(),-1),"authority")])},Rl=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Ml(s){let t=s.match(Rl);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${s}\``);let[e,r,n,o]=t,i=s.startsWith("https:")?"wss:":"ws:",u=n==null?null:parseInt(n.slice(1),10),h=u==null?"":`:${u+1}`;return`${i}//${r}${h}${o}`}var bi,pe=Vr(ws(z),K(),s=>new z(s)),nu=vs([K(),Bt("base64")]),Mi=Vr(ws(J),nu,s=>J.from(s[0],"base64")),Tl=30*1e3;function Pl(s){if(/^https?:/.test(s)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return s}function Pt(s){let t,e;if(typeof s=="string")t=s;else if(s){let{commitment:r,...n}=s;t=r,e=n}return{commitment:t,config:e}}function su(s){return Re([C({jsonrpc:Bt("2.0"),id:K(),result:s}),C({jsonrpc:Bt("2.0"),id:K(),error:C({code:Fr(),message:K(),data:rt(Sa())})})])}var Ol=su(Fr());function ut(s){return Vr(su(s),Ol,t=>"error"in t?t:{...t,result:W(t.result,s)})}function ye(s){return ut(C({context:C({slot:L()}),value:s}))}function oo(s){return C({context:C({slot:L()}),value:s})}function wi(s,t){return s===0?new Br({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new z(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:me.default.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new We(t)}var Cl=C({foundation:L(),foundationTerm:L(),initial:L(),taper:L(),terminal:L()}),Nl=ut($(Z(C({epoch:L(),effectiveSlot:L(),amount:L(),postBalance:L()})))),zl=C({epoch:L(),slotIndex:L(),slotsInEpoch:L(),absoluteSlot:L(),blockHeight:rt(L()),transactionCount:rt(L())}),Ul=C({slotsPerEpoch:L(),leaderScheduleSlotOffset:L(),warmup:$e(),firstNormalEpoch:L(),firstNormalSlot:L()}),Kl=$o(K(),$(L())),Ur=Z(Re([C({}),K()])),Wl=C({err:Ur}),ql=Bt("receivedSignature"),Hl=C({"solana-core":K(),"feature-set":rt(L())}),Cc=ye(C({err:Z(Re([C({}),K()])),logs:Z($(K())),accounts:rt(Z($(Z(C({executable:$e(),owner:K(),lamports:L(),data:$(K()),rentEpoch:rt(L())}))))),unitsConsumed:rt(L()),returnData:rt(Z(C({programId:K(),data:vs([K(),Bt("base64")])})))})),Dl=ye(C({byIdentity:$o(K(),$(L())),range:C({firstSlot:L(),lastSlot:L()})}));function Fl(s,t,e,r,n){let o=e||Sl,i;return r&&(i=async(h,p)=>{let k=await new Promise((x,I)=>{try{r(h,p,(S,E)=>x([S,E]))}catch(S){I(S)}});return await o(...k)}),new Qc.default(async(h,p)=>{let x={method:"POST",body:h,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},t||{},Kd)};try{let I=5,S,E=500;for(;i?S=await i(s,x):S=await o(s,x),!(S.status!==429||n===!0||(I-=1,I===0));)console.log(`Server responded with ${S.status} ${S.statusText}.  Retrying after ${E}ms delay...`),await zn(E),E*=2;let B=await S.text();S.ok?p(null,B):p(new Error(`${S.status} ${S.statusText}: ${B}`))}catch(I){I instanceof Error&&p(I)}finally{}},{})}function Vl(s){return(t,e)=>new Promise((r,n)=>{s.request(t,e,(o,i)=>{if(o){n(o);return}r(i)})})}function $l(s){return t=>new Promise((e,r)=>{t.length===0&&e([]);let n=t.map(o=>s.request(o.methodName,o.args));s.request(n,(o,i)=>{if(o){r(o);return}e(i)})})}var Gl=ut(Cl),jl=ut(zl),Zl=ut(Ul),Yl=ut(Kl),Xl=ut(L()),Jl=ye(C({total:L(),circulating:L(),nonCirculating:L(),nonCirculatingAccounts:$(pe)})),Ii=C({amount:K(),uiAmount:Z(L()),decimals:L(),uiAmountString:rt(K())}),Ql=ye($(C({address:pe,amount:K(),uiAmount:Z(L()),decimals:L(),uiAmountString:rt(K())}))),td=ye($(C({pubkey:pe,account:C({executable:$e(),owner:pe,lamports:L(),data:Mi,rentEpoch:L()})}))),Ai=C({program:K(),parsed:Fr(),space:L()}),ed=ye($(C({pubkey:pe,account:C({executable:$e(),owner:pe,lamports:L(),data:Ai,rentEpoch:L()})}))),rd=ye($(C({lamports:L(),address:pe}))),qn=C({executable:$e(),owner:pe,lamports:L(),data:Mi,rentEpoch:L()}),nd=C({pubkey:pe,account:qn}),sd=Vr(Re([ws(J),Ai]),Re([nu,Ai]),s=>Array.isArray(s)?W(s,Mi):s),ou=C({executable:$e(),owner:pe,lamports:L(),data:sd,rentEpoch:L()}),od=C({pubkey:pe,account:ou}),id=C({state:Re([Bt("active"),Bt("inactive"),Bt("activating"),Bt("deactivating")]),active:L(),inactive:L()}),ad=ut($(C({signature:K(),slot:L(),err:Ur,memo:Z(K()),blockTime:rt(Z(L()))}))),cd=ut($(C({signature:K(),slot:L(),err:Ur,memo:Z(K()),blockTime:rt(Z(L()))}))),ud=C({subscription:L(),result:oo(qn)}),fd=C({pubkey:pe,account:qn}),hd=C({subscription:L(),result:oo(fd)}),ld=C({parent:L(),slot:L(),root:L()}),dd=C({subscription:L(),result:ld}),pd=Re([C({type:Re([Bt("firstShredReceived"),Bt("completed"),Bt("optimisticConfirmation"),Bt("root")]),slot:L(),timestamp:L()}),C({type:Bt("createdBank"),parent:L(),slot:L(),timestamp:L()}),C({type:Bt("frozen"),slot:L(),timestamp:L(),stats:C({numTransactionEntries:L(),numSuccessfulTransactions:L(),numFailedTransactions:L(),maxTransactionsPerEntry:L()})}),C({type:Bt("dead"),slot:L(),timestamp:L(),err:K()})]),yd=C({subscription:L(),result:pd}),gd=C({subscription:L(),result:oo(Re([Wl,ql]))}),md=C({subscription:L(),result:L()}),bd=C({pubkey:K(),gossip:Z(K()),tpu:Z(K()),rpc:Z(K()),version:Z(K())}),Nc=C({votePubkey:K(),nodePubkey:K(),activatedStake:L(),epochVoteAccount:$e(),epochCredits:$(vs([L(),L(),L()])),commission:L(),lastVote:L(),rootSlot:Z(L())}),wd=ut(C({current:$(Nc),delinquent:$(Nc)})),vd=Re([Bt("processed"),Bt("confirmed"),Bt("finalized")]),kd=C({slot:L(),confirmations:Z(L()),err:Ur,confirmationStatus:rt(vd)}),xd=ye($(Z(kd))),Sd=ut(L()),iu=C({accountKey:pe,writableIndexes:$(L()),readonlyIndexes:$(L())}),Ti=C({signatures:$(K()),message:C({accountKeys:$(K()),header:C({numRequiredSignatures:L(),numReadonlySignedAccounts:L(),numReadonlyUnsignedAccounts:L()}),instructions:$(C({accounts:$(L()),data:K(),programIdIndex:L()})),recentBlockhash:K(),addressTableLookups:rt($(iu))})}),au=C({parsed:Fr(),program:K(),programId:pe}),cu=C({accounts:$(pe),data:K(),programId:pe}),_d=Re([cu,au]),Id=Re([C({parsed:Fr(),program:K(),programId:K()}),C({accounts:$(K()),data:K(),programId:K()})]),uu=Vr(_d,Id,s=>"accounts"in s?W(s,cu):W(s,au)),Ad=C({signatures:$(K()),message:C({accountKeys:$(C({pubkey:pe,signer:$e(),writable:$e(),source:rt(Re([Bt("transaction"),Bt("lookupTable")]))})),instructions:$(uu),recentBlockhash:K(),addressTableLookups:rt(Z($(iu)))})}),to=C({accountIndex:L(),mint:K(),owner:rt(K()),uiTokenAmount:Ii}),fu=C({writable:$(pe),readonly:$(pe)}),Pi=C({err:Ur,fee:L(),innerInstructions:rt(Z($(C({index:L(),instructions:$(C({accounts:$(L()),data:K(),programIdIndex:L()}))})))),preBalances:$(L()),postBalances:$(L()),logMessages:rt(Z($(K()))),preTokenBalances:rt(Z($(to))),postTokenBalances:rt(Z($(to))),loadedAddresses:rt(fu),computeUnitsConsumed:rt(L())}),Bd=C({err:Ur,fee:L(),innerInstructions:rt(Z($(C({index:L(),instructions:$(uu)})))),preBalances:$(L()),postBalances:$(L()),logMessages:rt(Z($(K()))),preTokenBalances:rt(Z($(to))),postTokenBalances:rt(Z($(to))),loadedAddresses:rt(fu),computeUnitsConsumed:rt(L())}),Oi=Re([Bt(0),Bt("legacy")]),Ed=ut(Z(C({blockhash:K(),previousBlockhash:K(),parentSlot:L(),transactions:$(C({transaction:Ti,meta:Z(Pi),version:rt(Oi)})),rewards:rt($(C({pubkey:K(),lamports:L(),postBalance:Z(L()),rewardType:Z(K())}))),blockTime:Z(L()),blockHeight:Z(L())}))),Ld=ut(Z(C({blockhash:K(),previousBlockhash:K(),parentSlot:L(),transactions:$(C({transaction:Ti,meta:Z(Pi)})),rewards:rt($(C({pubkey:K(),lamports:L(),postBalance:Z(L()),rewardType:Z(K())}))),blockTime:Z(L())}))),zc=ut(Z(C({blockhash:K(),previousBlockhash:K(),parentSlot:L(),signatures:$(K()),blockTime:Z(L())}))),vi=ut(Z(C({slot:L(),meta:Pi,blockTime:rt(Z(L())),transaction:Ti,version:rt(Oi)}))),Fs=ut(Z(C({slot:L(),transaction:Ad,meta:Z(Bd),blockTime:rt(Z(L())),version:rt(Oi)}))),Rd=ye(C({blockhash:K(),feeCalculator:C({lamportsPerSignature:L()})})),Md=ye(C({blockhash:K(),lastValidBlockHeight:L()})),Td=C({slot:L(),numTransactions:L(),numSlots:L(),samplePeriodSecs:L()}),Pd=ut($(Td)),Od=ye(Z(C({feeCalculator:C({lamportsPerSignature:L()})}))),Cd=ut(K()),Nd=ut(K()),zd=C({err:Ur,logs:$(K()),signature:K()}),Ud=C({result:oo(zd),subscription:L()}),Kd={"solana-client":`js/${(bi="0.0.0-development")!==null&&bi!==void 0?bi:"UNKNOWN"}`},Uc=class{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let r,n,o,i,u;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,n=e.httpHeaders,o=e.fetch,i=e.fetchMiddleware,u=e.disableRetryOnRateLimit),this._rpcEndpoint=Pl(t),this._rpcWsEndpoint=r||Ml(t),this._rpcClient=Fl(t,n,o,i,u),this._rpcRequest=Vl(this._rpcClient),this._rpcBatchRequest=$l(this._rpcClient),this._rpcWebSocket=new Jc.Client(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){let{commitment:r,config:n}=Pt(e),o=this._buildArgs([t.toBase58()],r,void 0,n),i=await this._rpcRequest("getBalance",o),u=W(i,ye(L()));if("error"in u)throw new G(u.error,`failed to get balance for ${t.toBase58()}`);return u.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){let e=await this._rpcRequest("getBlockTime",[t]),r=W(e,ut(Z(L())));if("error"in r)throw new G(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){let t=await this._rpcRequest("minimumLedgerSlot",[]),e=W(t,ut(L()));if("error"in e)throw new G(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){let t=await this._rpcRequest("getFirstAvailableBlock",[]),e=W(t,Xl);if("error"in e)throw new G(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};let r=await this._rpcRequest("getSupply",[e]),n=W(r,Jl);if("error"in n)throw new G(n.error,"failed to get supply");return n.result}async getTokenSupply(t,e){let r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenSupply",r),o=W(n,ye(Ii));if("error"in o)throw new G(o.error,"failed to get token supply");return o.result}async getTokenAccountBalance(t,e){let r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenAccountBalance",r),o=W(n,ye(Ii));if("error"in o)throw new G(o.error,"failed to get token account balance");return o.result}async getTokenAccountsByOwner(t,e,r){let{commitment:n,config:o}=Pt(r),i=[t.toBase58()];"mint"in e?i.push({mint:e.mint.toBase58()}):i.push({programId:e.programId.toBase58()});let u=this._buildArgs(i,n,"base64",o),h=await this._rpcRequest("getTokenAccountsByOwner",u),p=W(h,td);if("error"in p)throw new G(p.error,`failed to get token accounts owned by account ${t.toBase58()}`);return p.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});let o=this._buildArgs(n,r,"jsonParsed"),i=await this._rpcRequest("getTokenAccountsByOwner",o),u=W(i,ed);if("error"in u)throw new G(u.error,`failed to get token accounts owned by account ${t.toBase58()}`);return u.result}async getLargestAccounts(t){let e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=await this._rpcRequest("getLargestAccounts",r),o=W(n,rd);if("error"in o)throw new G(o.error,"failed to get largest accounts");return o.result}async getTokenLargestAccounts(t,e){let r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenLargestAccounts",r),o=W(n,Ql);if("error"in o)throw new G(o.error,"failed to get token largest accounts");return o.result}async getAccountInfoAndContext(t,e){let{commitment:r,config:n}=Pt(e),o=this._buildArgs([t.toBase58()],r,"base64",n),i=await this._rpcRequest("getAccountInfo",o),u=W(i,ye(Z(qn)));if("error"in u)throw new G(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getParsedAccountInfo(t,e){let{commitment:r,config:n}=Pt(e),o=this._buildArgs([t.toBase58()],r,"jsonParsed",n),i=await this._rpcRequest("getAccountInfo",o),u=W(i,ye(Z(ou)));if("error"in u)throw new G(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleAccountsInfoAndContext(t,e){let{commitment:r,config:n}=Pt(e),o=t.map(p=>p.toBase58()),i=this._buildArgs([o],r,"base64",n),u=await this._rpcRequest("getMultipleAccounts",i),h=W(u,ye($(Z(qn))));if("error"in h)throw new G(h.error,`failed to get info for accounts ${o}`);return h.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){let{commitment:n,config:o}=Pt(e),i=this._buildArgs([t.toBase58()],n,void 0,{...o,epoch:r!=null?r:o==null?void 0:o.epoch}),u=await this._rpcRequest("getStakeActivation",i),h=W(u,ut(id));if("error"in h)throw new G(h.error,`failed to get Stake Activation ${t.toBase58()}`);return h.result}async getProgramAccounts(t,e){let{commitment:r,config:n}=Pt(e),{encoding:o,...i}=n||{},u=this._buildArgs([t.toBase58()],r,o||"base64",i),h=await this._rpcRequest("getProgramAccounts",u),p=W(h,ut($(nd)));if("error"in p)throw new G(p.error,`failed to get accounts owned by program ${t.toBase58()}`);return p.result}async getParsedProgramAccounts(t,e){let{commitment:r,config:n}=Pt(e),o=this._buildArgs([t.toBase58()],r,"jsonParsed",n),i=await this._rpcRequest("getProgramAccounts",o),u=W(i,ut($(od)));if("error"in u)throw new G(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async confirmTransaction(t,e){let r;typeof t=="string"?r=t:r=t.signature;let n;try{n=me.default.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}lt(n.length===64,"signature has invalid length");let o=e||this.commitment,i,u,h=!1,p=new Promise((I,S)=>{try{u=this.onSignature(r,(E,B)=>{u=void 0;let O={context:B,value:E};h=!0,I({__type:Ir.PROCESSED,response:O})},o)}catch(E){S(E)}}),k=new Promise(I=>{if(typeof t=="string"){let S=this._confirmTransactionInitialTimeout||6e4;switch(o){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{S=this._confirmTransactionInitialTimeout||30*1e3;break}}i=setTimeout(()=>I({__type:Ir.TIMED_OUT,timeoutMs:S}),S)}else{let S=t,E=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let B=await E();if(!h){for(;B<=S.lastValidBlockHeight;)if(await zn(1e3),h||(B=await E(),h))return;I({__type:Ir.BLOCKHEIGHT_EXCEEDED})}})()}}),x;try{let I=await Promise.race([p,k]);switch(I.__type){case Ir.BLOCKHEIGHT_EXCEEDED:throw new js(r);case Ir.PROCESSED:x=I.response;break;case Ir.TIMED_OUT:throw new Zs(r,I.timeoutMs/1e3)}}finally{clearTimeout(i),u&&this.removeSignatureListener(u)}return x}async getClusterNodes(){let t=await this._rpcRequest("getClusterNodes",[]),e=W(t,ut($(bd)));if("error"in e)throw new G(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){let e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),n=W(r,wd);if("error"in n)throw new G(n.error,"failed to get vote accounts");return n.result}async getSlot(t){let{commitment:e,config:r}=Pt(t),n=this._buildArgs([],e,void 0,r),o=await this._rpcRequest("getSlot",n),i=W(o,ut(L()));if("error"in i)throw new G(i.error,"failed to get slot");return i.result}async getSlotLeader(t){let{commitment:e,config:r}=Pt(t),n=this._buildArgs([],e,void 0,r),o=await this._rpcRequest("getSlotLeader",n),i=W(o,ut(K()));if("error"in i)throw new G(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(t,e){let r=[t,e],n=await this._rpcRequest("getSlotLeaders",r),o=W(n,ut($(pe)));if("error"in o)throw new G(o.error,"failed to get slot leaders");return o.result}async getSignatureStatus(t,e){let{context:r,value:n}=await this.getSignatureStatuses([t],e);lt(n.length===1);let o=n[0];return{context:r,value:o}}async getSignatureStatuses(t,e){let r=[t];e&&r.push(e);let n=await this._rpcRequest("getSignatureStatuses",r),o=W(n,xd);if("error"in o)throw new G(o.error,"failed to get signature status");return o.result}async getTransactionCount(t){let{commitment:e,config:r}=Pt(t),n=this._buildArgs([],e,void 0,r),o=await this._rpcRequest("getTransactionCount",n),i=W(o,ut(L()));if("error"in i)throw new G(i.error,"failed to get transaction count");return i.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){let e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),n=W(r,Gl);if("error"in n)throw new G(n.error,"failed to get inflation");return n.result}async getInflationReward(t,e,r){let{commitment:n,config:o}=Pt(r),i=this._buildArgs([t.map(p=>p.toBase58())],n,void 0,{...o,epoch:e!=null?e:o==null?void 0:o.epoch}),u=await this._rpcRequest("getInflationReward",i),h=W(u,Nl);if("error"in h)throw new G(h.error,"failed to get inflation reward");return h.result}async getEpochInfo(t){let{commitment:e,config:r}=Pt(t),n=this._buildArgs([],e,void 0,r),o=await this._rpcRequest("getEpochInfo",n),i=W(o,jl);if("error"in i)throw new G(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){let t=await this._rpcRequest("getEpochSchedule",[]),e=W(t,Zl);if("error"in e)throw new G(e.error,"failed to get epoch schedule");let r=e.result;return new _i(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){let t=await this._rpcRequest("getLeaderSchedule",[]),e=W(t,Yl);if("error"in e)throw new G(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){let r=this._buildArgs([t],e),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),o=W(n,Sd);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(t){let e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),n=W(r,Rd);if("error"in n)throw new G(n.error,"failed to get recent blockhash");return n.result}async getRecentPerformanceSamples(t){let e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=W(e,Pd);if("error"in r)throw new G(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){let r=this._buildArgs([t],e),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),o=W(n,Od);if("error"in o)throw new G(o.error,"failed to get fee calculator");let{context:i,value:u}=o.result;return{context:i,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(t,e){let r=t.serialize().toString("base64"),n=this._buildArgs([r],e),o=await this._rpcRequest("getFeeForMessage",n),i=W(o,ye(Z(L())));if("error"in i)throw new G(i.error,"failed to get slot");if(i.result===null)throw new Error("invalid blockhash");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){let{commitment:e,config:r}=Pt(t),n=this._buildArgs([],e,void 0,r),o=await this._rpcRequest("getLatestBlockhash",n),i=W(o,Md);if("error"in i)throw new G(i.error,"failed to get latest blockhash");return i.result}async getVersion(){let t=await this._rpcRequest("getVersion",[]),e=W(t,ut(Hl));if("error"in e)throw new G(e.error,"failed to get version");return e.result}async getGenesisHash(){let t=await this._rpcRequest("getGenesisHash",[]),e=W(t,ut(K()));if("error"in e)throw new G(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){let{commitment:r,config:n}=Pt(e),o=this._buildArgsAtLeastConfirmed([t],r,void 0,n),i=await this._rpcRequest("getBlock",o),u=W(i,Ed);if("error"in u)throw new G(u.error,"failed to get confirmed block");let h=u.result;return h&&{...h,transactions:h.transactions.map(({transaction:p,meta:k,version:x})=>({meta:k,transaction:{...p,message:wi(x,p.message)},version:x}))}}async getBlockHeight(t){let{commitment:e,config:r}=Pt(t),n=this._buildArgs([],e,void 0,r),o=await this._rpcRequest("getBlockHeight",n),i=W(o,ut(L()));if("error"in i)throw new G(i.error,"failed to get block height information");return i.result}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){let{commitment:u,...h}=t;r=u,e=h}let n=this._buildArgs([],r,"base64",e),o=await this._rpcRequest("getBlockProduction",n),i=W(o,Dl);if("error"in i)throw new G(i.error,"failed to get block production information");return i.result}async getTransaction(t,e){let{commitment:r,config:n}=Pt(e),o=this._buildArgsAtLeastConfirmed([t],r,void 0,n),i=await this._rpcRequest("getTransaction",o),u=W(i,vi);if("error"in u)throw new G(u.error,"failed to get transaction");let h=u.result;return h&&{...h,transaction:{...h.transaction,message:wi(h.version,h.transaction.message)}}}async getParsedTransaction(t,e){let{commitment:r,config:n}=Pt(e),o=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),i=await this._rpcRequest("getTransaction",o),u=W(i,Fs);if("error"in u)throw new G(u.error,"failed to get transaction");return u.result}async getParsedTransactions(t,e){let{commitment:r,config:n}=Pt(e),o=t.map(h=>{let p=this._buildArgsAtLeastConfirmed([h],r,"jsonParsed",n);return{methodName:"getTransaction",args:p}});return(await this._rpcBatchRequest(o)).map(h=>{let p=W(h,Fs);if("error"in p)throw new G(p.error,"failed to get transactions");return p.result})}async getTransactions(t,e){let{commitment:r,config:n}=Pt(e),o=t.map(h=>{let p=this._buildArgsAtLeastConfirmed([h],r,void 0,n);return{methodName:"getTransaction",args:p}});return(await this._rpcBatchRequest(o)).map(h=>{let p=W(h,vi);if("error"in p)throw new G(p.error,"failed to get transactions");let k=p.result;return k&&{...k,transaction:{...k.transaction,message:wi(k.version,k.transaction.message)}}})}async getConfirmedBlock(t,e){let r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedBlock",r),o=W(n,Ld);if("error"in o)throw new G(o.error,"failed to get confirmed block");let i=o.result;if(!i)throw new Error("Confirmed block "+t+" not found");let u={...i,transactions:i.transactions.map(({transaction:h,meta:p})=>{let k=new We(h.message);return{meta:p,transaction:{...h,message:k}}})};return{...u,transactions:u.transactions.map(({transaction:h,meta:p})=>({meta:p,transaction:yt.populate(h.message,h.signatures)}))}}async getBlocks(t,e,r){let n=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),o=await this._rpcRequest("getBlocks",n),i=W(o,ut($(L())));if("error"in i)throw new G(i.error,"failed to get blocks");return i.result}async getBlockSignatures(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),o=W(n,zc);if("error"in o)throw new G(o.error,"failed to get block");let i=o.result;if(!i)throw new Error("Block "+t+" not found");return i}async getConfirmedBlockSignatures(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getConfirmedBlock",r),o=W(n,zc);if("error"in o)throw new G(o.error,"failed to get confirmed block");let i=o.result;if(!i)throw new Error("Confirmed block "+t+" not found");return i}async getConfirmedTransaction(t,e){let r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedTransaction",r),o=W(n,vi);if("error"in o)throw new G(o.error,"failed to get transaction");let i=o.result;if(!i)return i;let u=new We(i.transaction.message),h=i.transaction.signatures;return{...i,transaction:yt.populate(u,h)}}async getParsedConfirmedTransaction(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=await this._rpcRequest("getConfirmedTransaction",r),o=W(n,Fs);if("error"in o)throw new G(o.error,"failed to get confirmed transaction");return o.result}async getParsedConfirmedTransactions(t,e){let r=t.map(i=>{let u=this._buildArgsAtLeastConfirmed([i],e,"jsonParsed");return{methodName:"getConfirmedTransaction",args:u}});return(await this._rpcBatchRequest(r)).map(i=>{let u=W(i,Fs);if("error"in u)throw new G(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(t,e,r){let n={},o=await this.getFirstAvailableBlock();for(;!("until"in n)&&(e--,!(e<=0||e<o));)try{let h=await this.getConfirmedBlockSignatures(e,"finalized");h.signatures.length>0&&(n.until=h.signatures[h.signatures.length-1].toString())}catch(h){if(h instanceof Error&&h.message.includes("skipped"))continue;throw h}let i=await this.getSlot("finalized");for(;!("before"in n)&&(r++,!(r>i));)try{let h=await this.getConfirmedBlockSignatures(r);h.signatures.length>0&&(n.before=h.signatures[h.signatures.length-1].toString())}catch(h){if(h instanceof Error&&h.message.includes("skipped"))continue;throw h}return(await this.getConfirmedSignaturesForAddress2(t,n)).map(h=>h.signature)}async getConfirmedSignaturesForAddress2(t,e,r){let n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),o=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),i=W(o,ad);if("error"in i)throw new G(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(t,e,r){let n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),o=await this._rpcRequest("getSignaturesForAddress",n),i=W(o,cd);if("error"in i)throw new G(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(t,e){let{context:r,value:n}=await this.getAccountInfoAndContext(t,e),o=null;return n!==null&&(o=new Qs({key:t,state:Qs.deserialize(n.data)})),{context:r,value:o}}async getNonceAndContext(t,e){let{context:r,value:n}=await this.getAccountInfoAndContext(t,e),o=null;return n!==null&&(o=Wn.fromAccountData(n.data)),{context:r,value:o}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){let r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),n=W(r,Cd);if("error"in n)throw new G(n.error,`airdrop to ${t.toBase58()} failed`);return n.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await zn(100);let r=Date.now()-this._blockhashInfo.lastFetch>=Tl;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let n=0;n<50;n++){let o=await this.getLatestBlockhash("finalized");if(r!==o.blockhash)return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},o;await zn(Bl/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){let{commitment:e,config:r}=Pt(t),n=this._buildArgs([],e,"base64",r),o=await this._rpcRequest("getStakeMinimumDelegation",n),i=W(o,ye(L()));if("error"in i)throw new G(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(t,e,r){if("message"in t){let B=t.serialize(),O=J.from(B).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");let N=e||{};N.encoding="base64","commitment"in N||(N.commitment=this.commitment);let Y=[O,N],H=await this._rpcRequest("simulateTransaction",Y),X=W(H,Cc);if("error"in X)throw new Error("failed to simulate transaction: "+X.error.message);return X.result}let n;if(t instanceof yt){let E=t;n=new yt,n.feePayer=E.feePayer,n.instructions=t.instructions,n.nonceInfo=E.nonceInfo,n.signatures=E.signatures}else n=yt.populate(t),n._message=n._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");let o=e;if(n.nonceInfo&&o)n.sign(...o);else{let E=this._disableBlockhashCaching;for(;;){let B=await this._blockhashWithExpiryBlockHeight(E);if(n.lastValidBlockHeight=B.lastValidBlockHeight,n.recentBlockhash=B.blockhash,!o)break;if(n.sign(...o),!n.signature)throw new Error("!signature");let O=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(O)&&!this._blockhashInfo.transactionSignatures.includes(O)){this._blockhashInfo.simulatedSignatures.push(O);break}else E=!0}}let i=n._compile(),u=i.serialize(),p=n._serialize(u).toString("base64"),k={encoding:"base64",commitment:this.commitment};if(r){let E=(Array.isArray(r)?r:i.nonProgramIds()).map(B=>B.toBase58());k.accounts={encoding:"base64",addresses:E}}o&&(k.sigVerify=!0);let x=[p,k],I=await this._rpcRequest("simulateTransaction",x),S=W(I,Cc);if("error"in S){let E;if("data"in S.error&&(E=S.error.data.logs,E&&Array.isArray(E))){let B=`
    `,O=B+E.join(B);console.error(S.error.message,O)}throw new Js("failed to simulate transaction: "+S.error.message,E)}return S.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");let i=t.serialize();return await this.sendRawTransaction(i,r)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");let n=e;if(t.nonceInfo)t.sign(...n);else{let i=this._disableBlockhashCaching;for(;;){let u=await this._blockhashWithExpiryBlockHeight(i);if(t.lastValidBlockHeight=u.lastValidBlockHeight,t.recentBlockhash=u.blockhash,t.sign(...n),!t.signature)throw new Error("!signature");let h=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(h))i=!0;else{this._blockhashInfo.transactionSignatures.push(h);break}}}let o=t.serialize();return await this.sendRawTransaction(o,r)}async sendRawTransaction(t,e){let r=nt(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){let r={encoding:"base64"},n=e&&e.skipPreflight,o=e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),n&&(r.skipPreflight=n),o&&(r.preflightCommitment=o);let i=[t,r],u=await this._rpcRequest("sendTransaction",i),h=W(u,Nd);if("error"in h){let p;throw"data"in h.error&&(p=h.error.data.logs),new Js("failed to send transaction: "+h.error.message,p)}return h.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{this._rpcWebSocket.notify("ping").catch(()=>{})},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration++,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._subscriptionsByHash[e]={...r,state:"pending"}})}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{let n=this._subscriptionsByHash[r];if(n!==void 0)switch(n.state){case"pending":case"unsubscribed":if(n.callbacks.size===0){delete this._subscriptionsByHash[r],n.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[n.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{let{args:o,method:i}=n;try{this._subscriptionsByHash[r]={...n,state:"subscribing"};let u=await this._rpcWebSocket.call(i,o);this._subscriptionsByHash[r]={...n,serverSubscriptionId:u,state:"subscribed"},this._subscriptionCallbacksByServerSubscriptionId[u]=n.callbacks,await this._updateSubscriptions()}catch(u){if(u instanceof Error&&console.error(`${i} error for argument`,o,u.message),!e())return;this._subscriptionsByHash[r]={...n,state:"pending"},await this._updateSubscriptions()}})();break;case"subscribed":n.callbacks.size===0&&await(async()=>{let{serverSubscriptionId:o,unsubscribeMethod:i}=n;if(this._subscriptionsAutoDisposedByRpc.has(o))this._subscriptionsAutoDisposedByRpc.delete(o);else{this._subscriptionsByHash[r]={...n,state:"unsubscribing"};try{await this._rpcWebSocket.call(i,[o])}catch(u){if(u instanceof Error&&console.error(`${i} error:`,u.message),!e())return;this._subscriptionsByHash[r]={...n,state:"subscribed"},await this._updateSubscriptions();return}}this._subscriptionsByHash[r]={...n,state:"unsubscribed"},await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){let r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(n=>{try{n(...e)}catch(o){console.error(o)}})}_wsOnAccountNotification(t){let{result:e,subscription:r}=W(t,ud);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){let r=this._nextClientSubscriptionId++,n=kl([t.method,e],!0),o=this._subscriptionsByHash[n];return o===void 0?this._subscriptionsByHash[n]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:o.callbacks.add(t.callback),this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r];let i=this._subscriptionsByHash[n];lt(i!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),i.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){let n=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){let{result:e,subscription:r}=W(t,hd);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,n){let o=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){let n=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){let{result:e,subscription:r}=W(t,Ud);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){let{result:e,subscription:r}=W(t,dd);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){let{result:e,subscription:r}=W(t,yd);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){let r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,n){let o=e||this._commitment;if(o||r||n){let i={};r&&(i.encoding=r),o&&(i.commitment=o),n&&(i=Object.assign(i,n)),t.push(i)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){let o=e||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){let{result:e,subscription:r}=W(t,gd);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){let n=this._buildArgs([t],r||this._commitment||"finalized"),o=this._makeSubscription({callback:(i,u)=>{if(i.type==="status"){e(i.result,u);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return o}onSignatureWithOptions(t,e,r){let{commitment:n,...o}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},i=this._buildArgs([t],n,void 0,o),u=this._makeSubscription({callback:(h,p)=>{e(h,p);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return u}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){let{result:e,subscription:r}=W(t,md);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}},Cr=class{constructor(t){this._keypair=void 0,this._keypair=t!=null?t:Ac()}static generate(){return new Cr(Ac())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");let r=t.slice(32,64);if(!e||!e.skipValidation){let n=t.slice(0,32),o=$s(n);for(let i=0;i<32;i++)if(r[i]!==o[i])throw new Error("provided secretKey is invalid")}return new Cr({publicKey:r,secretKey:t})}static fromSeed(t){let e=$s(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Cr({publicKey:e,secretKey:r})}get publicKey(){return new z(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},Ar=Object.freeze({CreateLookupTable:{index:0,layout:w.struct([w.u32("instruction"),Qr("recentSlot"),w.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:w.struct([w.u32("instruction")])},ExtendLookupTable:{index:2,layout:w.struct([w.u32("instruction"),Qr(),w.seq(st(),w.offset(w.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:w.struct([w.u32("instruction")])},CloseLookupTable:{index:4,layout:w.struct([w.u32("instruction")])}}),Kc=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=w.u32("instruction").decode(t.data),n;for(let[o,i]of Object.entries(Ar))if(i.index==r){n=o;break}if(!n)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return n}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);let{recentSlot:e}=bt(Ar.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);let{addresses:e}=bt(Ar.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new z(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(eo.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},eo=class{constructor(){}static createLookupTable(t){let[e,r]=z.findProgramAddressSync([t.authority.toBuffer(),(0,Fn.toBufferLE)(BigInt(t.recentSlot),8)],this.programId),n=Ar.CreateLookupTable,o=ft(n,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),i=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:be.programId,isSigner:!1,isWritable:!1}];return[new wt({programId:this.programId,keys:i,data:o}),e]}static freezeLookupTable(t){let e=Ar.FreezeLookupTable,r=ft(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new wt({programId:this.programId,keys:n,data:r})}static extendLookupTable(t){let e=Ar.ExtendLookupTable,r=ft(e,{addresses:t.addresses.map(o=>o.toBytes())}),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&n.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:be.programId,isSigner:!1,isWritable:!1}),new wt({programId:this.programId,keys:n,data:r})}static deactivateLookupTable(t){let e=Ar.DeactivateLookupTable,r=ft(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new wt({programId:this.programId,keys:n,data:r})}static closeLookupTable(t){let e=Ar.CloseLookupTable,r=ft(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new wt({programId:this.programId,keys:n,data:r})}};eo.programId=new z("AddressLookupTab1e1111111111111111111111111");var Wc=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=w.u8("instruction").decode(t.data),n;for(let[o,i]of Object.entries(nr))if(i.index==r){n=o;break}if(!n)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return n}static decodeRequestUnits(t){this.checkProgramId(t.programId);let{units:e,additionalFee:r}=bt(nr.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);let{bytes:e}=bt(nr.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);let{units:e}=bt(nr.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);let{microLamports:e}=bt(nr.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(ro.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},nr=Object.freeze({RequestUnits:{index:0,layout:w.struct([w.u8("instruction"),w.u32("units"),w.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:w.struct([w.u8("instruction"),w.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:w.struct([w.u8("instruction"),w.u32("units")])},SetComputeUnitPrice:{index:3,layout:w.struct([w.u8("instruction"),Qr("microLamports")])}}),ro=class{constructor(){}static requestUnits(t){let e=nr.RequestUnits,r=ft(e,t);return new wt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){let e=nr.RequestHeapFrame,r=ft(e,t);return new wt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){let e=nr.SetComputeUnitLimit,r=ft(e,t);return new wt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){let e=nr.SetComputeUnitPrice,r=ft(e,{microLamports:BigInt(t.microLamports)});return new wt({keys:[],programId:this.programId,data:r})}};ro.programId=new z("ComputeBudget111111111111111111111111111111");var qc=64,Hc=32,Dc=64,Fc=w.struct([w.u8("numSignatures"),w.u8("padding"),w.u16("signatureOffset"),w.u16("signatureInstructionIndex"),w.u16("publicKeyOffset"),w.u16("publicKeyInstructionIndex"),w.u16("messageDataOffset"),w.u16("messageDataSize"),w.u16("messageInstructionIndex")]),Hn=class{constructor(){}static createInstructionWithPublicKey(t){let{publicKey:e,message:r,signature:n,instructionIndex:o}=t;lt(e.length===Hc,`Public Key must be ${Hc} bytes but received ${e.length} bytes`),lt(n.length===Dc,`Signature must be ${Dc} bytes but received ${n.length} bytes`);let i=Fc.span,u=i+e.length,h=u+n.length,p=1,k=J.alloc(h+r.length),x=o==null?65535:o;return Fc.encode({numSignatures:p,padding:0,signatureOffset:u,signatureInstructionIndex:x,publicKeyOffset:i,publicKeyInstructionIndex:x,messageDataOffset:h,messageDataSize:r.length,messageInstructionIndex:x},k),k.fill(e,i),k.fill(n,u),k.fill(r,h),new wt({keys:[],programId:Hn.programId,data:k})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:r,instructionIndex:n}=t;lt(e.length===qc,`Private key must be ${qc} bytes but received ${e.length} bytes`);try{let o=Cr.fromSecretKey(e),i=o.publicKey.toBytes(),u=Li(r,o.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:u,instructionIndex:n})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};Hn.programId=new z("Ed25519SigVerify111111111111111111111111111");Ge.hmacSha256Sync=(s,...t)=>{let e=ui.create(Qn,s);return t.forEach(r=>e.update(r)),e.digest()};var Wd=(s,t)=>Ic(s,t,{der:!1,recovered:!0});Ge.isValidPrivateKey;var qd=xc,Vc=32,ki=20,$c=64,Hd=11,xi=w.struct([w.u8("numSignatures"),w.u16("signatureOffset"),w.u8("signatureInstructionIndex"),w.u16("ethAddressOffset"),w.u8("ethAddressInstructionIndex"),w.u16("messageDataOffset"),w.u16("messageDataSize"),w.u8("messageInstructionIndex"),w.blob(20,"ethAddress"),w.blob(64,"signature"),w.u8("recoveryId")]),Nr=class{constructor(){}static publicKeyToEthAddress(t){lt(t.length===$c,`Public key must be ${$c} bytes but received ${t.length} bytes`);try{return J.from(ci(nt(t))).slice(-ki)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){let{publicKey:e,message:r,signature:n,recoveryId:o,instructionIndex:i}=t;return Nr.createInstructionWithEthAddress({ethAddress:Nr.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:o,instructionIndex:i})}static createInstructionWithEthAddress(t){let{ethAddress:e,message:r,signature:n,recoveryId:o,instructionIndex:i=0}=t,u;typeof e=="string"?e.startsWith("0x")?u=J.from(e.substr(2),"hex"):u=J.from(e,"hex"):u=e,lt(u.length===ki,`Address must be ${ki} bytes but received ${u.length} bytes`);let h=1+Hd,p=h,k=h+u.length,x=k+n.length+1,I=1,S=J.alloc(xi.span+r.length);return xi.encode({numSignatures:I,signatureOffset:k,signatureInstructionIndex:i,ethAddressOffset:p,ethAddressInstructionIndex:i,messageDataOffset:x,messageDataSize:r.length,messageInstructionIndex:i,signature:nt(n),ethAddress:nt(u),recoveryId:o},S),S.fill(nt(r),xi.span),new wt({keys:[],programId:Nr.programId,data:S})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:r,instructionIndex:n}=t;lt(e.length===Vc,`Private key must be ${Vc} bytes but received ${e.length} bytes`);try{let o=nt(e),i=qd(o,!1).slice(1),u=J.from(ci(nt(r))),[h,p]=Wd(u,o);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:h,recoveryId:p,instructionIndex:n})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};Nr.programId=new z("KeccakSecp256k11111111111111111111111111111");var Dd=new z("StakeConfig11111111111111111111111111111111"),Bi=class{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}},tn=class{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}};tn.default=new tn(0,0,z.default);var Gc=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=w.u32("instruction").decode(t.data),n;for(let[o,i]of Object.entries(ve))if(i.index==r){n=o;break}if(!n)throw new Error("Instruction type incorrect; not a StakeInstruction");return n}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:e,lockup:r}=bt(ve.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Bi(new z(e.staker),new z(e.withdrawer)),lockup:new tn(r.unixTimestamp,r.epoch,new z(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),bt(ve.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:e,stakeAuthorizationType:r}=bt(ve.Authorize,t.data),n={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new z(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(n.custodianPubkey=t.keys[3].pubkey),n}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:o}=bt(ve.AuthorizeWithSeed,t.data),i={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:n,authorityOwner:new z(o),newAuthorizedPubkey:new z(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(i.custodianPubkey=t.keys[3].pubkey),i}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e}=bt(ve.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),bt(ve.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:e}=bt(ve.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),bt(ve.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Dn.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},ve=Object.freeze({Initialize:{index:0,layout:w.struct([w.u32("instruction"),ul(),fl()])},Authorize:{index:1,layout:w.struct([w.u32("instruction"),st("newAuthorized"),w.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:w.struct([w.u32("instruction")])},Split:{index:3,layout:w.struct([w.u32("instruction"),w.ns64("lamports")])},Withdraw:{index:4,layout:w.struct([w.u32("instruction"),w.ns64("lamports")])},Deactivate:{index:5,layout:w.struct([w.u32("instruction")])},Merge:{index:7,layout:w.struct([w.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:w.struct([w.u32("instruction"),st("newAuthorized"),w.u32("stakeAuthorizationType"),Pr("authoritySeed"),st("authorityOwner")])}}),Kg=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Dn=class{constructor(){}static initialize(t){let{stakePubkey:e,authorized:r,lockup:n}=t,o=n||tn.default,i=ve.Initialize,u=ft(i,{authorized:{staker:nt(r.staker.toBuffer()),withdrawer:nt(r.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:nt(o.custodian.toBuffer())}}),h={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Kn,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new wt(h)}static createAccountWithSeed(t){let e=new yt;e.add(be.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:o}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:o}))}static createAccount(t){let e=new yt;e.add(be.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:o}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:o}))}static delegate(t){let{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,o=ve.Delegate,i=ft(o);return new yt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:rr,isSigner:!1,isWritable:!1},{pubkey:yi,isSigner:!1,isWritable:!1},{pubkey:Dd,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(t){let{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:o,custodianPubkey:i}=t,u=ve.Authorize,h=ft(u,{newAuthorized:nt(n.toBuffer()),stakeAuthorizationType:o.index}),p=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:rr,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return i&&p.push({pubkey:i,isSigner:!1,isWritable:!1}),new yt().add({keys:p,programId:this.programId,data:h})}static authorizeWithSeed(t){let{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:o,newAuthorizedPubkey:i,stakeAuthorizationType:u,custodianPubkey:h}=t,p=ve.AuthorizeWithSeed,k=ft(p,{newAuthorized:nt(i.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:n,authorityOwner:nt(o.toBuffer())}),x=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:rr,isSigner:!1,isWritable:!1}];return h&&x.push({pubkey:h,isSigner:!1,isWritable:!1}),new yt().add({keys:x,programId:this.programId,data:k})}static splitInstruction(t){let{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:o}=t,i=ve.Split,u=ft(i,{lamports:o});return new wt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(t){let e=new yt;return e.add(be.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),e.add(this.splitInstruction(t))}static splitWithSeed(t){let{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,basePubkey:o,seed:i,lamports:u}=t,h=new yt;return h.add(be.allocate({accountPubkey:n,basePubkey:o,seed:i,space:this.space,programId:this.programId})),h.add(this.splitInstruction({stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:u}))}static merge(t){let{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,o=ve.Merge,i=ft(o);return new yt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:rr,isSigner:!1,isWritable:!1},{pubkey:yi,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(t){let{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:o,custodianPubkey:i}=t,u=ve.Withdraw,h=ft(u,{lamports:o}),p=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:rr,isSigner:!1,isWritable:!1},{pubkey:yi,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return i&&p.push({pubkey:i,isSigner:!1,isWritable:!1}),new yt().add({keys:p,programId:this.programId,data:h})}static deactivate(t){let{stakePubkey:e,authorizedPubkey:r}=t,n=ve.Deactivate,o=ft(n);return new yt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:rr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}};Dn.programId=new z("Stake11111111111111111111111111111111111111");Dn.space=200;var Ei=class{constructor(t,e,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=n}},jc=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=w.u32("instruction").decode(t.data),n;for(let[o,i]of Object.entries(sr))if(i.index==r){n=o;break}if(!n)throw new Error("Instruction type incorrect; not a VoteInstruction");return n}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);let{voteInit:e}=bt(sr.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Ei(new z(e.nodePubkey),new z(e.authorizedVoter),new z(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:e,voteAuthorizationType:r}=bt(sr.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new z(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:o}}=bt(sr.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new z(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new z(n),voteAuthorizationType:{index:o},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e}=bt(sr.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(zr.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},sr=Object.freeze({InitializeAccount:{index:0,layout:w.struct([w.u32("instruction"),hl()])},Authorize:{index:1,layout:w.struct([w.u32("instruction"),st("newAuthorized"),w.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:w.struct([w.u32("instruction"),w.ns64("lamports")])},AuthorizeWithSeed:{index:10,layout:w.struct([w.u32("instruction"),ll()])}}),Wg=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),zr=class{constructor(){}static initializeAccount(t){let{votePubkey:e,nodePubkey:r,voteInit:n}=t,o=sr.InitializeAccount,i=ft(o,{voteInit:{nodePubkey:nt(n.nodePubkey.toBuffer()),authorizedVoter:nt(n.authorizedVoter.toBuffer()),authorizedWithdrawer:nt(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),u={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Kn,isSigner:!1,isWritable:!1},{pubkey:rr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new wt(u)}static createAccount(t){let e=new yt;return e.add(be.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){let{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:o}=t,i=sr.Authorize,u=ft(i,{newAuthorized:nt(n.toBuffer()),voteAuthorizationType:o.index}),h=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:rr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new yt().add({keys:h,programId:this.programId,data:u})}static authorizeWithSeed(t){let{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:o,voteAuthorizationType:i,votePubkey:u}=t,h=sr.AuthorizeWithSeed,p=ft(h,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:nt(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:nt(o.toBuffer()),voteAuthorizationType:i.index}}),k=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:rr,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new yt().add({keys:k,programId:this.programId,data:p})}static withdraw(t){let{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:o}=t,i=sr.Withdraw,u=ft(i,{lamports:n}),h=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new yt().add({keys:h,programId:this.programId,data:u})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insuffcient funds.");return zr.withdraw(t)}};zr.programId=new z("Vote111111111111111111111111111111111111111");zr.space=3731;var Fd=new z("Va1idator1nfo111111111111111111111111111111"),Vd=C({name:K(),website:rt(K()),details:rt(K()),keybaseUsername:rt(K())}),no=class{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(Oe(e)!==2)return null;let n=[];for(let o=0;o<2;o++){let i=new z(e.slice(0,De));e=e.slice(De);let u=e.slice(0,1)[0]===1;e=e.slice(1),n.push({publicKey:i,isSigner:u})}if(n[0].publicKey.equals(Fd)&&n[1].isSigner){let o=Pr().decode(J.from(e)),i=JSON.parse(o);return Vo(i,Vd),new no(n[1].publicKey,i)}return null}},qg=new z("Vote111111111111111111111111111111111111111"),$d=w.struct([st("nodePubkey"),st("authorizedWithdrawer"),w.u8("commission"),w.nu64(),w.seq(w.struct([w.nu64("slot"),w.u32("confirmationCount")]),w.offset(w.u32(),-8),"votes"),w.u8("rootSlotValid"),w.nu64("rootSlot"),w.nu64(),w.seq(w.struct([w.nu64("epoch"),st("authorizedVoter")]),w.offset(w.u32(),-8),"authorizedVoters"),w.struct([w.seq(w.struct([st("authorizedPubkey"),w.nu64("epochOfLastAuthorizedSwitch"),w.nu64("targetEpoch")]),32,"buf"),w.nu64("idx"),w.u8("isEmpty")],"priorVoters"),w.nu64(),w.seq(w.struct([w.nu64("epoch"),w.nu64("credits"),w.nu64("prevCredits")]),w.offset(w.u32(),-8),"epochCredits"),w.struct([w.nu64("slot"),w.nu64("timestamp")],"lastTimestamp")]),so=class{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){let r=$d.decode(nt(t),4),n=r.rootSlot;return r.rootSlotValid||(n=null),new so({nodePubkey:new z(r.nodePubkey),authorizedWithdrawer:new z(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:n,authorizedVoters:r.authorizedVoters.map(Gd),priorVoters:jd(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}};function Gd({authorizedVoter:s,epoch:t}){return{epoch:t,authorizedVoter:new z(s)}}function Zc({authorizedPubkey:s,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new z(s),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function jd({buf:s,idx:t,isEmpty:e}){return e?[]:[...s.slice(t+1).map(Zc),...s.slice(0,t).map(Zc)]}var Yc={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Hg(s,t){let e=t===!1?"http":"https";if(!s)return Yc[e].devnet;let r=Yc[e][s];if(!r)throw new Error(`Unknown ${e} cluster: ${s}`);return r}async function Dg(s,t,e,r){let n,o;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")?(n=e,o=r):o=e;let i=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},u=await s.sendRawTransaction(t,i),h=o&&o.commitment,k=(await(n?s.confirmTransaction(n,h):s.confirmTransaction(u,h))).value;if(k.err)throw new Error(`Raw transaction ${u} failed (${JSON.stringify(k)})`);return u}var Fg=1e9;export{Gs as a,Ec as b,Vs as c,il as d,De as e,z as f,Rc as g,Mg as h,Or as i,Ri as j,Un as k,js as l,Zs as m,Xr as n,We as o,Br as p,eu as q,Ir as r,wt as s,yt as t,Ys as u,Xs as v,rr as w,Tg as x,Pg as y,pi as z,Kn as A,Og as B,Cg as C,Ng as D,yi as E,gi as F,pl as G,Mc as H,Wn as I,Tc as J,_t as K,be as L,Er as M,zg as N,Pc as O,_i as P,Js as Q,Ug as R,G as S,Qs as T,Tl as U,Uc as V,Cr as W,Ar as X,Kc as Y,eo as Z,Wc as _,nr as $,ro as aa,Hn as ba,Nr as ca,Dd as da,Bi as ea,tn as fa,Gc as ga,ve as ha,Kg as ia,Dn as ja,Ei as ka,jc as la,Wg as ma,zr as na,Fd as oa,no as pa,qg as qa,so as ra,Hg as sa,Dg as ta,Fg as ua};
/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
/**
 * Support for translating between Uint8Array instances and JavaScript
 * native types.
 *
 * {@link module:Layout~Layout|Layout} is the basis of a class
 * hierarchy that associates property names with sequences of encoded
 * bytes.
 *
 * Layouts are supported for these scalar (numeric) types:
 * * {@link module:Layout~UInt|Unsigned integers in little-endian
 *   format} with {@link module:Layout.u8|8-bit}, {@link
 *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
 *   {@link module:Layout.u32|32-bit}, {@link
 *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
 *   format} with {@link module:Layout.u16be|16-bit}, {@link
 *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
 *   {@link module:Layout.u40be|40-bit}, and {@link
 *   module:Layout.u48be|48-bit} representation ranges;
 * * {@link module:Layout~Int|Signed integers in little-endian
 *   format} with {@link module:Layout.s8|8-bit}, {@link
 *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
 *   {@link module:Layout.s32|32-bit}, {@link
 *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~IntBE|Signed integers in big-endian format}
 *   with {@link module:Layout.s16be|16-bit}, {@link
 *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
 *   {@link module:Layout.s40be|40-bit}, and {@link
 *   module:Layout.s48be|48-bit} representation ranges;
 * * 64-bit integral values that decode to an exact (if magnitude is
 *   less than 2^53) or nearby integral Number in {@link
 *   module:Layout.nu64|unsigned little-endian}, {@link
 *   module:Layout.nu64be|unsigned big-endian}, {@link
 *   module:Layout.ns64|signed little-endian}, and {@link
 *   module:Layout.ns64be|unsigned big-endian} encodings;
 * * 32-bit floating point values with {@link
 *   module:Layout.f32|little-endian} and {@link
 *   module:Layout.f32be|big-endian} representations;
 * * 64-bit floating point values with {@link
 *   module:Layout.f64|little-endian} and {@link
 *   module:Layout.f64be|big-endian} representations;
 * * {@link module:Layout.const|Constants} that take no space in the
 *   encoded expression.
 *
 * and for these aggregate types:
 * * {@link module:Layout.seq|Sequence}s of instances of a {@link
 *   module:Layout~Layout|Layout}, with JavaScript representation as
 *   an Array and constant or data-dependent {@link
 *   module:Layout~Sequence#count|length};
 * * {@link module:Layout.struct|Structure}s that aggregate a
 *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
 *   instances, with JavaScript representation as an Object;
 * * {@link module:Layout.union|Union}s that support multiple {@link
 *   module:Layout~VariantLayout|variant layouts} over a fixed
 *   (padded) or variable (not padded) span of bytes, using an
 *   unsigned integer at the start of the data or a separate {@link
 *   module:Layout.unionLayoutDiscriminator|layout element} to
 *   determine which layout to use when interpreting the buffer
 *   contents;
 * * {@link module:Layout.bits|BitStructure}s that contain a sequence
 *   of individual {@link
 *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
 *   16, 24, or 32-bit unsigned integer starting at the least- or
 *   most-significant bit;
 * * {@link module:Layout.cstr|C strings} of varying length;
 * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
 *   module:Layout~Blob#length|length} raw data.
 *
 * All {@link module:Layout~Layout|Layout} instances are immutable
 * after construction, to prevent internal state from becoming
 * inconsistent.
 *
 * @local Layout
 * @local ExternalLayout
 * @local GreedyCount
 * @local OffsetLayout
 * @local UInt
 * @local UIntBE
 * @local Int
 * @local IntBE
 * @local NearUInt64
 * @local NearUInt64BE
 * @local NearInt64
 * @local NearInt64BE
 * @local Float
 * @local FloatBE
 * @local Double
 * @local DoubleBE
 * @local Sequence
 * @local Structure
 * @local UnionDiscriminator
 * @local UnionLayoutDiscriminator
 * @local Union
 * @local VariantLayout
 * @local BitStructure
 * @local BitField
 * @local Boolean
 * @local Blob
 * @local CString
 * @local Constant
 * @local bindConstructorLayout
 * @module Layout
 * @license MIT
 * @author Peter A. Bigot
 * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
 */

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-P36YR3BB.js.map
