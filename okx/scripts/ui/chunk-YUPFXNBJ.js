import{a as _r}from"./chunk-TEHLR7K7.js";import{a as G}from"./chunk-2N4YHUFI.js";import{a as lr}from"./chunk-NC54FPSJ.js";import{a as ho}from"./chunk-ZGEQVSMJ.js";import{a as Bo}from"./chunk-5OUYE6NE.js";import{a as mr,b as me,l as ur,m as cr,n as pr}from"./chunk-DPVVGFWQ.js";import{b as Po}from"./chunk-67PEY2GN.js";import{a as bo}from"./chunk-JVE4G6JP.js";import{e as ar}from"./chunk-VNHZZRMI.js";import{a as ir}from"./chunk-I2KPNTIF.js";import{a as ae,b as yt}from"./chunk-D6O2GLPR.js";import{a as wo,c as D}from"./chunk-2CPFAAZ7.js";import{a as Eo}from"./chunk-ZG26PGPF.js";import{A as oe,K as er,N as or,O as rr,R as re,S as nr,U as sr,W as ne,X as se,aa as ie,b as Ko,c as qo,d as Qo,e as wt,f as $,g as jo,i as Ot,k as jt,l as tr,q as te,v as Lt,z as ee}from"./chunk-HE77KLJ4.js";import{d as Fo}from"./chunk-73YQ4YAD.js";import{h as No}from"./chunk-YLO74Q7W.js";import{a as So}from"./chunk-E73QHIZ6.js";import{c as Bt,i as Pt}from"./chunk-E2KMZQ6K.js";import{a as Oe}from"./chunk-PGPPXRV7.js";import{c as mo}from"./chunk-JLLMIXPD.js";import{Q as dr,u as fr}from"./chunk-C3KORCEI.js";import{D as Le,E as Ro,F as $o,G as Wo,I as Ho,J as Yo,L as Go,M as zo,N as Vo,O as Xo,P as Zo,Q as Jo,b as Qt,f as Oo,j as Lo,k as Mo,n as ko,q as Do,t as vo,x as Uo}from"./chunk-BTS2GOAC.js";import{c as at,d as Co,e as _t,g as qt,l as go}from"./chunk-2HWABU7H.js";import{F as Ao,j as Io}from"./chunk-MTMZQEHP.js";import{b as vn,l as xo,m as To}from"./chunk-62JDSRZZ.js";import{W as Kt}from"./chunk-R6GCLTW2.js";import{a as ht}from"./chunk-JSAFBAMQ.js";import{b as we}from"./chunk-XEOGXIVD.js";import{a as Nt}from"./chunk-PCGRDRHF.js";import{k as ro,l as no,p as S}from"./chunk-IU3TYIWS.js";import{b as Et,d as fo,j as _o,l as yo,o as bt}from"./chunk-VPBQLZCI.js";import{f as Vt,g as oo,l as Xt}from"./chunk-X2LENRE7.js";import{a as uo,ab as lo,f as co,ma as po}from"./chunk-O4EDZSHP.js";import{k as Zt}from"./chunk-HU3KBV5G.js";import{b as H}from"./chunk-6ZPGW3YM.js";import{d as Wt,f as qe}from"./chunk-S4N75E3H.js";import{P as B,R as Jt,S as ao,Z as q,b as P,j as io}from"./chunk-UXFKODVN.js";import{a as Pe}from"./chunk-TPSXCUGD.js";import{i as so}from"./chunk-RMQJRDTF.js";import{c as h}from"./chunk-2YLR7R2N.js";import{a as zt,b as eo}from"./chunk-MVLY6WUP.js";import{f as Ht,h as Qe}from"./chunk-ZEAKIEIQ.js";import{C as R,D as be,H as vt,Kb as to,Pa as ft,Pb as Gt,Sb as dt,Vb as it,ma as M,q as pt,sb as K,tb as he,ub as st,v as d,xb as Yt,yb as je,zb as Be}from"./chunk-CVJKAN5R.js";import{C as Je,H as Ke,b as Xe,o as Ze,q as lt}from"./chunk-GXQ645QR.js";import{V as J,c as Ne}from"./chunk-C2H3SRET.js";import{a as T}from"./chunk-V4YVDLI4.js";import{f as c,m as n,o as s}from"./chunk-6V2G2Z5W.js";n();s();var yr=c(T());function Un({children:t,...e}){return yr.default.createElement(Ko.Provider,{value:e},t)}var Bs=Un;n();s();var le=c(T());var Ir=c(H());n();s();var xr=c(T());ft();function Rn(t){let e=Po({address:t,coinId:M},2e4);return(0,xr.useMemo)(()=>e.info||{},[e])}var Tr=Rn;n();s();var ue=c(T());it();var Me=(0,ue.createContext)({signInfo:null,currencyId:null,params:{walletId:null,inscriptions:[],from:"",to:"",utxoType:1,txType:null,protocolId:null},feeData:{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{},canTransferAmount:"0"},lifecycle:{beforePostTx:null},onFeeDataChange:()=>{}});function Q(){return(0,ue.useContext)(Me)}function Mt(){let{signInfo:t}=Q();return t}function ce(){let{currencyId:t}=Q();return t}function et(){let{params:t}=Q();return t}function ke(){let{feeData:t}=Q();return t}function pe(){let{onFeeDataChange:t}=Q();return t}function j(){let t=Mt(),{inscriptions:e}=et(),{inscriptionOutput:o}=ke(),i=o||(t==null?void 0:t.inscriptionOutput)||"0";return{inscriptionOutput:i,inscriptionsCount:e.length,total:K(i,e.length)}}function xt(){let{feeData:t}=Q();return{fees:t.revealTxFees,totalFee:(t.revealTxFees||[]).reduce((e,o)=>st(e,o),"0")}}function Tt(){let{feeData:t}=Q();return t.commitTxFee}function X(){let{feeData:{feeSelectedSat:t={}}}=Q(),{type:e}=t,o=Mt(),i;return e===B.CUSTOM?i=t.satBytes:i=o==null?void 0:o[ao[e]],{...t,satBytes:i||(o==null?void 0:o.normal)||0}}function Cr(){let{feeData:t}=Q();return t.canTransferAmount}function gr(){let{lifecycle:t}=Q();return t}function $n({defaultFeeData:t,currencyId:e,params:o,lifecycle:i,children:r}){let{from:a,to:m,...u}=o,l=(0,Ir.useSelector)(Kt),_=Tr(a),[f,x]=(0,le.useState)(t||{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{satBytes:0,type:B.STANDARD},canTransferAmount:"0"}),b=Et((A,g)=>{x(F=>({...F,[A]:g}))});return le.default.createElement(Me.Provider,{value:{signInfo:_,currencyId:e!=null?e:l.currencyId,params:{...u,from:a,to:m||a},lifecycle:i,feeData:f,onFeeDataChange:b}},r)}var De=$n;n();s();n();s();var L=c(T());ft();n();s();var Ct=c(T()),Ar=c(Ne());n();s();var kt={root:"_root_1mbnk_1","send-page-base-container":"_send-page-base-container_1mbnk_7",sendPageBaseContainer:"_send-page-base-container_1mbnk_7","send-page-base-container__header":"_send-page-base-container__header_1mbnk_13",sendPageBaseContainerHeader:"_send-page-base-container__header_1mbnk_13","send-page-base-container__wrapper":"_send-page-base-container__wrapper_1mbnk_16",sendPageBaseContainerWrapper:"_send-page-base-container__wrapper_1mbnk_16","send-page-base-container__inner-wrapper":"_send-page-base-container__inner-wrapper_1mbnk_17",sendPageBaseContainerInnerWrapper:"_send-page-base-container__inner-wrapper_1mbnk_17","send-page-base-container__content":"_send-page-base-container__content_1mbnk_25",sendPageBaseContainerContent:"_send-page-base-container__content_1mbnk_25","send-page-base-container__footer":"_send-page-base-container__footer_1mbnk_30",sendPageBaseContainerFooter:"_send-page-base-container__footer_1mbnk_30"};function Wn({className:t,loading:e,slot:o={},children:i}){let{header:r,footer:a,top:m}=o;return Ct.default.createElement(h.Container,{loading:e,className:(0,Ar.default)(kt.root,t)},Ct.default.createElement(h.Box,{className:kt["send-page-base-container__header"]},r),Ct.default.createElement(h.Box,{className:kt["send-page-base-container__wrapper"]},m,Ct.default.createElement(h.Box,{className:kt["send-page-base-container__inner-wrapper"]},Ct.default.createElement(h.Box,{className:kt["send-page-base-container__content"]},i),Ct.default.createElement(Nt,{offsetBottom:0,placeholder:!0},a))))}var fe=Wn;R();n();s();var Ue=c(T()),br=c(be());n();s();ft();it();var z=c(T());n();s();it();var ve=c(H());var Sr=c(T());var Fr=(t,e)=>{let o=t.coinId,i=No(o),r=(0,ve.useSelector)(Kt),a=(0,ve.useSelector)(({metamask:l})=>l.currencies),m=(0,Sr.useMemo)(()=>e&&(a==null?void 0:a.find(l=>l.currencyId===e))||r,[e]),u=K(i,m==null?void 0:m.usdToThisRate);return bo(to,l=>{let _=no(l,{symbol:t.symbol}),f=ro(K(l,u),{useApproximate:!1,symbol:m.symbol});return`${_}(${f})`})};var Er=({bytes:t,value:e,signInfo:o={},coinId:i,currencyId:r,onChange:a})=>{let m=ho(),u=Zt(),{coin:l,baseCoin:_}=So(i,!0),[f,x]=(0,z.useState)(e==null?void 0:e.customSatBytes),b=Fr(_,r),A=u("extension_wallet_transaction_text_minute");(0,z.useEffect)(()=>{!f&&(o==null?void 0:o.normal)&&x(o==null?void 0:o.normal)},[o]);let g=(0,z.useCallback)(E=>{x(E)},[]),F=(0,z.useCallback)(()=>{a==null||a({customSatBytes:f,type:B.CUSTOM,satBytes:f})},[f]),I=l.localType===vt?u("wallet_extension_transfer_unit_sat_b"):"",N=(0,z.useMemo)(()=>{let{min:E,mempoolMin:y}=o,k=y||E||0;return Yt(f,k)?u("extension_btc_minmum_alert_fee_lowerthan",{feerate:k}):""},[f,o]);return(0,z.useMemo)(()=>[B.SLOW,B.STANDARD,B.FAST,B.CUSTOM].map(E=>{switch(E){case B.SLOW:return{data:{type:B.SLOW,satBytes:o.min,estimatedTime:`${dt(o.maxCost)} ${A}`},unitPrice:`${o.min} ${I}`,totalPrice:b(K(o.min,t),r),type:u(Jt[B.SLOW]),typeKey:B.SLOW,estimatedTime:`${dt(o.maxCost)} ${A}`};case B.STANDARD:return{data:{type:B.STANDARD,satBytes:o.normal,estimatedTime:`${dt(o.normalCost)} ${A}`},unitPrice:`${o.normal} ${I}`,totalPrice:b(K(o.normal,t),r),type:u(Jt[B.STANDARD]),typeKey:B.STANDARD,estimatedTime:`${dt(o.normalCost)} ${A}`};case B.FAST:return{data:{type:B.FAST,satBytes:o.max,estimatedTime:`${dt(o.minCost)} ${A}`},unitPrice:`${o.max} ${I}`,totalPrice:b(K(o.max,t),r),type:u(Jt[B.FAST]),typeKey:B.FAST,estimatedTime:`${dt(o.minCost)} ${A}`};default:return{unitPrice:`${o.max} ${I}`,totalPrice:b(K(f,t),r),estimatedTime:m(o,f),canConfirm:!N,onConfirm:F,components:()=>z.default.createElement(lt.Number,{enableMinus:!1,precision:0,error:N,errorType:lt.TIP_TYPE.always,onChange:g,value:f,size:lt.SIZE.sm,title:I,className:"custom-network-fee__satb"})}}}),[t,o,f])};var Hn=({value:t,coinId:e,bytes:o,signInfo:i,onChange:r,currencyId:a,onClose:m})=>{let u=Er({bytes:o,value:t,coinId:e,onChange:r,signInfo:i,currencyId:a});return Ue.default.createElement(Bo,{feeType:t==null?void 0:t.type,feeDataList:u==null?void 0:u.slice(0,3),onBack:m,custom:(0,br.last)(u),onChange:({data:l})=>{r==null||r(l)}})},Nr=Ue.default.memo(Hn);n();s();var ot=c(T());ft();R();n();s();R();var O=c(T());n();s();var gt={"output-panel":"_output-panel_1mdhy_1",outputPanel:"_output-panel_1mdhy_1","output-panel__content":"_output-panel__content_1mdhy_4",outputPanelContent:"_output-panel__content_1mdhy_4","output-panel__compare":"_output-panel__compare_1mdhy_7",outputPanelCompare:"_output-panel__compare_1mdhy_7","output-panel-slider__content":"_output-panel-slider__content_1mdhy_13",outputPanelSliderContent:"_output-panel-slider__content_1mdhy_13","output-tag":"_output-tag_1mdhy_16",outputTag:"_output-tag_1mdhy_16"};var de=330,_e=1e4,Yn=({coinId:t,visible:e,outputValue:o,currencyId:i,onClose:r,onChange:a})=>{let[m,u]=(0,O.useState)(String(o));(0,O.useEffect)(()=>{u(String(o))},[o]),(0,O.useEffect)(()=>{e&&u(String(o))},[o,e]);let l=Pt(t,m,{currencyId:i,useApproximate:!1});return e?O.default.createElement(h.Portal,{component:h.Container,className:gt["output-panel"]},O.default.createElement(ht,{onBack:r,onClose:r,title:d("wallet_header_title_inscription_sats")}),O.default.createElement(h.Box,{className:gt["output-panel__content"]},O.default.createElement(lt.Number,{precision:0,value:m,max:_e,min:de,size:lt.SIZE.xl,onChange:_=>{u(_)},suffix:O.default.createElement(S.Text,{size:S.SIZE.sm},"sats")}),O.default.createElement(S.Text,{className:gt["output-panel__compare"],type:S.TYPE.secondary,size:S.SIZE.sm},l),O.default.createElement(h.Space,{space:4,direction:h.DIRECTION.vertical},O.default.createElement(Je,{value:m,min:de,max:_e,contentClassName:gt["output-panel-slider__content"],onChange:_=>{u(String(_))}}),O.default.createElement(h.FlexBox,{justify:"space-between"},O.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs},`${de} sats`),O.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs},`${_e} sats`)))),O.default.createElement(Nt.FooterActions,null,O.default.createElement(J,{disabled:!m||!(m!=null&&m.trim()),category:J.CATEGORY.fill,type:J.TYPE.highlight,size:J.SIZE.lg,onClick:()=>{a==null||a(Math.min(Math.max(m,de),_e)),r==null||r()}},d("extension_transactions_btn_confirm")))):null},hr=Yn;var Gn=({txType:t,currencyId:e,inscriptionsCount:o,inscriptionOutput:i,coinId:r=M,totalInscriptionCoinAmount:a,onInscriptionOutputChange:m})=>{let[u,{toggle:l}]=bt(!1),_=pt.gt(a,0)?a:"0",f=Pt(r,_,{currencyId:e,useApproximate:!0}),x=(0,ot.useMemo)(()=>io(t),[t]);return ot.default.createElement(ot.default.Fragment,null,ot.default.createElement(at,{clickable:t===P.RUNES_ETCH?!1:void 0,onClick:()=>{pt.gt(i,0)&&l()},title:d(x)},ot.default.createElement(h.FlexBox,{align:h.ALIGN.center},`${i} sats`,!!o&&o>1&&ot.default.createElement(S.Text,{className:gt["output-tag"]},"x",o),f)),ot.default.createElement(hr,{coinId:r,visible:u,currencyId:e,outputValue:i,onClose:l,onChange:m}))},Br=Gn;n();s();R();var ye=c(T()),zn=({coinId:t,currencyId:e,totalCoinAmount:o})=>{let i=Bt(t),r=Pt(t,o,{currencyId:e,useApproximate:!0});return ye.default.createElement(at,{title:d("extension_wallet_transaction_item_inscribe_totalfee")},ye.default.createElement(S.Text,{inherit:!0,strong:700},ye.default.createElement(S.DisplayAmount,{noStyle:!0,symbol:i==null?void 0:i.symbol,decimals:i==null?void 0:i.decimals},o),r))},Pr=zn;n();s();var Mr=c(T()),kr=c(Pe()),Dr=c(vn());R();n();s();n();s();qe();Qe();eo();ft();var wr=c(be());function Vn({walletId:t,utxoType:e=1,coinId:o=M}={}){let i=qt();return async({from:r,coinAmount:a,serviceCharge:m,feeRate:u})=>{let l=await Wt().getRequestHeaders({walletId:t||i,needSign:!0,currency:"usd"}),_={address:r,coinAmount:a,serviceCharge:m,utxoType:e};(0,wr.isNil)(u);let f={coinId:o,utxoRequests:[_]};try{let{data:x}=await Ht(zt.getBTCUTXO,f,{headers:l});return(x==null?void 0:x[0])||{}}catch(x){return{error:!0,errorResp:x}}}}var xe=Vn;qe();ft();R();it();n();s();var Or=c(T());function Xn(t){let{inscriptionOutput:e}=j(),{satBytes:o}=X(),{walletId:i,from:r,to:a,inscriptions:m,txType:u}=et(),l=cr(t),_=pr();return(0,Or.useCallback)(async f=>{let x={};return u===P.RUNES_ETCH?(x={input:f.map(({txHash:g,vout:F,coinAmount:I})=>({vOut:F,txId:g,amount:I})),address:r,feePerB:o,outValue:e,inscriptions:(m||[]).map(({body:g})=>JSON.parse(g))},await _({walletId:i,address:r,tx:x,txType:u})):(x={commitTxPrevOutputList:f.map(({txHash:A,vout:g,coinAmount:F})=>({vOut:g,txId:A,amount:F})),commitFeeRate:o,revealFeeRate:o,inscriptionDataList:(m||[]).map(({contentType:A,body:g})=>({contentType:A,body:g})),revealOutValue:e,changeAddress:r,toAddr:a},await l({walletId:i,address:r,tx:x,txType:u}))},[r,a,m,e,o])}var Te=Xn;function Zn(){let{walletId:t,from:e,to:o,utxoType:i,inscriptions:r,txType:a,protocolId:m}=et(),u=Mt(),l=ce(),_=ur({address:e,coinId:M,currencyId:l,txType:a,protocolId:m}),f=Te(me.CONFIRM),x=xe({walletId:t,utxoType:i}),{beforePostTx:b}=gr(),{inscriptionOutput:A,total:g}=j(),{totalFee:F}=xt(),I=Tt(),{satBytes:N}=X(),E=async k=>{let{commitTx:w,revealTxs:C,commitAddrs:v,commitTxFee:Z,revealTxFees:Y}=await f(k.utxoList||[]),tt=await Oe(vt,w),nt={signedTx:w,fromAdr:e,serviceCharge:Z,toAdr:o||e,itemId:"commitTx",txHash:tt,txType:a,extJson:JSON.stringify({protocolId:m,broadcastType:1,nftIds:[]})},mt=await Promise.all(C.map(async(ut,ct)=>({signedTx:ut,fromAdr:(v==null?void 0:v[ct])||e,serviceCharge:Y==null?void 0:Y[ct],toAdr:o||e,itemId:`revealTx${ct}`,txHash:await Oe(vt,ut),dependTx:[tt],txType:a,extJson:JSON.stringify({protocolId:m,broadcastType:1,nftIds:[]})})));b&&b(nt,mt);let U=await Wt().getRequestHeaders({walletId:t,needSign:!0,currency:"usd"});return{txIds:await Io({txList:[nt,...mt]},{headers:U}),commitTx:w,revealTxs:C,commitAddrs:v,commitTxFee:Z,revealTxFees:Y,feeRate:parseInt(N,10),size:parseInt(A,10)}},y=async()=>{let k=await x({from:e,coinAmount:st(g,F),serviceCharge:I,feeRate:N}),w=k.utxoList||[];return await _(w,()=>{}),await E(k)};return()=>new Promise((k,w)=>{if(typeof(u==null?void 0:u.txSizeLimit)=="number"&&r.length>u.txSizeLimit){let C=Ze.warn({alignBottom:!1,maskClosable:!1,title:d("wallet_header_dialog_header_reminder"),text:d("wallet_info_dialog_too_much_inscription"),confirmText:d("wallet_btn_dialog_btn_cancel"),cancelText:d("wallet_bot_dialog_btn_continue"),onCancel:async()=>{try{let v=await y();k(v)}catch(v){w(v)}C.destroy()},onConfirm:()=>{w(new Error(ie)),C.destroy()}})}else(async()=>{try{let C=await y();k(C)}catch(C){w(C)}})()})}var Lr=Zn;var Jn=({txId:t,coinId:e,walletId:o,feeError:i,address:r,onConfirm:a,onCancel:m,disabled:u,addressType:l,useTipMessageFillUp:_,onFillUp:f},x)=>{let b=(0,kr.useHistory)(),A=Lr(),g=ar(o,m),F=Et(async()=>{var I,N,E;try{await g();let y=await A();a&&await a(y)}catch(y){if(!((y==null?void 0:y.message)===ie)){let w=((I=y==null?void 0:y.data)==null?void 0:I.msg)||(y==null?void 0:y.msg)||((E=(N=y==null?void 0:y.data)==null?void 0:N.originalError)==null?void 0:E.msg)||d("wallet_home_toast_network_error");Ke.error({title:w})}}},[a]);return(0,Mr.useMemo)(()=>{let I=m?{actionType:D.ACTION_TYPE.CANCEL,onClick:m}:null,N={disabled:u,actionType:D.ACTION_TYPE.CONFIRM,onClick:F};return!i&&[q.BALANCE_INSUFFICIENT,q.FEE_BALANCE_INSUFFICIENT].includes(x)&&(I=I||{actionType:D.ACTION_TYPE.CANCEL,onClick:()=>{b.goBack()}},_?N={actionType:D.ACTION_TYPE.CONFIRM,btnText:d("wallet_extension_mid_textbtn_manage_utxo"),onClick:async()=>{f&&await f();let E=Dr.default.stringify({addressType:l,coinId:e},{skipEmptyString:!0,skipNull:!0}),y=E?`?${E}`:"";b.push(lo+y)}}:N={txId:t,coinId:e,address:r,walletId:o,actionType:D.ACTION_TYPE.FILL_UP}),[I,N]},[m,u,F,i,x,_,b,l,t,e,r,o,f])},vr=Jn;n();s();var Re={"free-tag":"_free-tag_7hgbl_1",freeTag:"_free-tag_7hgbl_1",actions:"_actions_7hgbl_5"};n();s();R();n();s();var Ur=c(T());it();function Rr(){let{totalFee:t}=xt(),{satBytes:e}=X();return Gt(he(t,e),0)}function $r(){let t=Tt(),{satBytes:e}=X();return Gt(he(t,e),0)}function Wr(){let{totalFee:t}=xt(),e=Tt();return(0,Ur.useMemo)(()=>st(t,e),[t,e])}n();s();n();s();var It=c(T());it();function Kn(t){let{disabled:e=!1}=t||{},{walletId:o,from:i,utxoType:r}=et(),[a,m]=(0,It.useState)(!0),[u,l]=(0,It.useState)(!0),[_,f]=(0,It.useState)(null),[x,b]=(0,It.useState)([]),A=xe({walletId:o,utxoType:r}),g=Te(me.CAL_FEE),{satBytes:F}=X(),{total:I}=j(),N=pe(),{totalFee:E}=xt(),y=Tt();return(0,It.useEffect)(()=>{!e&&(async()=>{var w;if(!je(I,0))try{l(!0);let C=await A({from:i,coinAmount:st(I,E),serviceCharge:y,feeRate:F});if(!((w=C==null?void 0:C.utxoList)!=null&&w.length)){f(G.BALANCE_NOT_ENOUGH);return}if(C.error){let Y=C.errorResp.code,tt=G.COMMON_ERROR;[G.BALANCE_NOT_ENOUGH,G.PURE_UTXO_NOT_ENOUGH].includes(Y)&&(tt=Y),f(tt);return}N("canTransferAmount",C.canTransferAmount||"0"),f(null);let{commitTxFee:v,revealTxFees:Z}=await g(C.utxoList);b(C.utxoList),N("commitTxFee",v),N("revealTxFees",Z)}catch{f(G.COMMON_ERROR),N("commitTxFee","0"),N("revealTxFees",[])}finally{m(!1),l(!1)}})()},[i,F,I,E,y,g,e]),{isInitLoading:a,isLoading:u,error:_,utxoList:x}}var Hr=Kn;function qn(t){let{disabled:e=!1}=t||{},o=Wr(),{total:i}=j(),r=Cr(),a=ke(),{isInitLoading:m,isLoading:u,error:l,utxoList:_}=Hr({disabled:e});return{isInitLoading:m,isLoading:u,error:l,canTransferAmount:r,fee:o,inscriptionOutput:i,feeData:a,utxoList:_}}var Ce=qn;var Qn=()=>{let{utxoList:t,fee:e,error:o,canTransferAmount:i,isLoading:r}=Ce(),a=Mt(),m=$r(),u=Rr(),l=pt.add(m,u),_=X(),f=pe();return{bytes:l,signInfo:a,feeError:o,selectedSat:_,feeLoading:r,networkFee:e,canTransferAmount:i,utxoListCount:(t==null?void 0:t.length)||0,onFeeDataChange:f}},Yr=Qn;n();s();var zr=c(T());R();n();s();var jn=[P.BRC20_DEPLOY,P.BRC20_MINT,P.BRC20_INSCRIBE,P.ORDINAL_NFT,P.ORDINAL_TEXT,P.EARN_BRC30_DEPLOY,P.EARN_BRC30_APPLY,P.EARN_BRC30_REDEEM,P.EARN_BRC30_CLAIM,P.BRC30_INSCRIBE,P.RUNES_ETCH];function Gr(t){return jn.indexOf(t)>-1}var ts=({txType:t,feeError:e,isHardware:o,isMpcWallet:i,utxoListCount:r,transferReminder:a})=>(0,zr.useMemo)(()=>Gr(t)?i&&t===P.RUNES_ETCH?{type:yt.TIP_TYPE.COMMON_ERROR,message:d("extension_defi_bot_alert_mpc_not_support")}:o?{type:yt.TIP_TYPE.COMMON_ERROR,message:d("wallet_extension_top_toast_dapp_comingsoon")}:e===G.COMMON_ERROR?{type:yt.TIP_TYPE.FEE_ERROR}:e===G.BALANCE_NOT_ENOUGH?{type:ae.FEE_BALANCE_INSUFFICIENT,message:d("extension_defi_errortip_not_enough_btc")}:e===G.PURE_UTXO_NOT_ENOUGH?{type:ae.BALANCE_INSUFFICIENT,message:d("extension_defi_errortip_not_enough_pure_utxo")}:r>100?{type:ae.BALANCE_INSUFFICIENT}:{message:a}:{type:yt.TIP_TYPE.COMMON_ERROR,message:d("extension_defi_bot_alert_wallet_upgrade")},[t,e,o,i,r,a]),Vr=ts;function es({txId:t,headerProps:e={},slot:o={},confirmButtonProps:i={}}){let{from:r,walletId:a,txType:m}=et(),u=To(a),l=xo(a),[_,{toggle:f}]=bt(!1),x=ce(),A=go()[r],{bytes:g,signInfo:F,feeError:I,selectedSat:N,feeLoading:E,networkFee:y,canTransferAmount:k,utxoListCount:w,onFeeDataChange:C}=Yr(),{title:v,...Z}=e,{inscriptionOutput:Y,inscriptionsCount:tt,total:nt}=j(),mt=(0,L.useMemo)(()=>pt.add(y,nt),[y,nt]),U=Bt(M),{showManageUTXO:$t}=_r(U||{},A,!0),ut=$t&&I!==G.PURE_UTXO_NOT_ENOUGH,{type:ct,message:On}=Vr({txType:m,feeError:I,feeLoading:E,utxoListCount:w,isHardware:u,isMpcWallet:l,canTransferAmount:k,networkFee:y,totalUsedCoinAmount:mt}),Ln=vr({txId:t,walletId:a,coinId:M,addressType:A,disabled:!!ct||!!I||!!E||u||w>100,useTipMessageFillUp:ut,...i},ct),Ve=lr(a),Mn=Et(Ee=>{C("commitTxFee","0"),C("revealTxFees",[]),C("inscriptionOutput",Ee)},[]),{top:kn,footer:Dn}=o;return L.default.createElement(fe,{slot:{header:L.default.createElement(ht,{title:v||d("extension_wallet_header_maintitle_inscribe"),...Z}),footer:Dn||L.default.createElement("div",{className:Re.actions},L.default.createElement(yt,{type:ct||Xe.TYPE.warn,address:r,message:On,coinId:M,walletId:a,fillUpAble:ut}),L.default.createElement(D,{buttonGroup:Ln}))}},kn,L.default.createElement(_t,null,L.default.createElement(at,{title:d("wallet_info_title_inscribe_service_fee")},L.default.createElement(S.Text,{className:Re["free-tag"]},d("wallet_info_tag_inscribe_free_tag"))),L.default.createElement(ir,{coinId:M,loading:E,currencyId:x,networkFee:E&&y==="0"?void 0:y,estimateFailed:!E&&!Number(y),onClick:()=>{f==null||f(),Ve({trade:"brc20",all_confirmation:"network_fee"})}}),L.default.createElement(Br,{txType:m,currencyId:x,inscriptionsCount:tt,inscriptionOutput:Y,totalInscriptionCoinAmount:nt,onInscriptionOutputChange:Mn})),L.default.createElement(_t,null,L.default.createElement(Pr,{coinId:M,currencyId:x,totalCoinAmount:mt})),L.default.createElement(_t,{bordered:!1},L.default.createElement(Co,{address:r,walletId:a,title:d("wallet_extension_network_address_title_walletused"),onCopyCallback:()=>{Ve({trade:"brc20",all_confirmation:"wallet_used_address"})}})),_&&L.default.createElement(Nr,{bytes:g,currencyId:x,value:N,coinId:M,onClose:f,signInfo:F,onChange:Ee=>{C("commitTxFee","0"),C("revealTxFees",[]),C("feeSelectedSat",Ee)}}))}var $e=es;n();s();var Ft=c(T());R();n();s();var Jr=c(T());var Kr=c(H());ft();n();s();var Xr=c(T());function os(){let{coin:t}=$(),e=Ot();return(0,Xr.useMemo)(()=>{if(Vt(t))return[{body:JSON.stringify({p:"brc-20",op:"transfer",tick:t.symbol,amt:e})}];let i=Xt(t);return[{body:JSON.stringify({p:"brc20-s",op:"transfer",tid:i,tick:t.symbol,amt:e})}]},[t.coinId,e])}var Zr=os;function rs({walletId:t,txSource:e,children:o}){let i=Zr(),r=te(),a=jt(),{coin:m}=$(),u=Lt(),l=qt(),f=Vt(m)?P.BRC20_INSCRIBE:P.BRC30_INSCRIBE,x=(0,Kr.useSelector)(fr),b=(g,F)=>{g.coinAmount=a,g.coinId=F?M:m.coinId,g.txSource=e||so.NORMAL},A=(g,F)=>{g&&b(g,!0),Array.isArray(F)&&F.forEach(I=>{b(I,!1)})};return Jr.default.createElement(De,{defaultFeeData:x,currencyId:r,params:{walletId:t||l,from:u,inscriptions:i,utxoType:mr.INSCRIPTION_USE_NFT_UTXO,txType:f,protocolId:m==null?void 0:m.protocolId},lifecycle:{beforePostTx:A}},o)}var ge=rs;n();s();var W=c(T());R();var Dt=c(H()),Cn=c(Ne());var gn=c(be());n();s();it();var ns=()=>{let t=se();return Yt(t,0)&&(t="0"),t},qr=ns;n();s();var jr=c(T()),tn=c(Ne()),en=c(Pe()),on=c(H());n();s();var Qr={root:"_root_ryl3e_1"};function ss({onBack:t,onClose:e,...o}){let i=(0,en.useHistory)(),r=(0,on.useSelector)(Qt),a=()=>{t&&t(),i.goBack()},m=()=>{e&&e(),i.push(r)};return jr.default.createElement(ht,{className:(0,tn.default)(Qr.root,o.className),onClose:m,onBack:a,...o})}var rn=ss;n();s();var We={content:"_content_11o8q_1",totalAmountWrap:"_totalAmountWrap_11o8q_7"};n();s();var At=c(T());R();n();s();var Ut={totalAmount:"_totalAmount_10915_1","totalAmount-content":"_totalAmount-content_10915_7",totalAmountContent:"_totalAmount-content_10915_7","totalAmount-title":"_totalAmount-title_10915_16",totalAmountTitle:"_totalAmount-title_10915_16","totalAmount-amount":"_totalAmount-amount_10915_23",totalAmountAmount:"_totalAmount-amount_10915_23"};n();s();var is=(t,e)=>{let{coin:o}=$(),i=Qo(),r=sr(),a=ne(),m=se(),l={total:r,amount:a,available:m}[t];return`${i(e||l,o,{useApproximate:!1,zero:{decimals:!1}})} ${o.symbol}`},nn=is;function as(t){t||(t=""),typeof t!="string"&&(t=t.toString());let e=t==null?void 0:t.length;return e<=20?"15px":e<=22?"14px":e<=24?"13px":"12px"}function ms({type:t="total",title:e,maxBtnText:o,maxAmount:i,hiddenMaxButton:r,onMax:a,...m}){let{coin:u}=$(),l=nn(t,i);return At.default.createElement(h.FlexBox,{align:h.ALIGN.center,className:Ut.totalAmount,...m},At.default.createElement(we,{size:we.SIZE.lg,src:u==null?void 0:u.image,text:u==null?void 0:u.symbol}),At.default.createElement(h.Box,{className:Ut["totalAmount-content"]},At.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs,className:Ut["totalAmount-title"]},e||d("wallet_extension_send_item_total_amount")),At.default.createElement(S.Text,{ellipsis:{tooltip:!0},className:Ut["totalAmount-amount"],style:{fontSize:as(l)}},l)),!r&&At.default.createElement(J,{category:J.CATEGORY.fill,type:J.TYPE.gray,size:J.SIZE.xs,onClick:a},o||d("wallet_extension_send_text_max")))}var sn=ms;n();s();var fn=c(T()),dn=c(H());n();s();var St=c(T());n();s();var un=c(T());n();s();var rt=c(T());R();n();s();var an={root:"_root_1k6ce_1"};var us=({coin:t={},onVisible:e,receiveOnly:o,address:i,style:r})=>{let[a,{setTrue:m,setFalse:u}]=bt();(0,rt.useEffect)(()=>{e&&e(a)},[a]);let l=t.symbol.length>12?`${t.symbol.slice(0,12)}...`:t.symbol;return rt.default.createElement(rt.default.Fragment,null,rt.default.createElement("div",{className:an.root,onClick:m,style:r},d("wallet_extension_placeorder_textbtn_replenish",{token:l})),rt.default.createElement(Eo,{address:i,visible:a,closeCallback:u,coinId:t.coinId,receiveOnly:o}))},mn=(0,rt.memo)(us);var cn=c(H());function cs(t){let e=(0,cn.useDispatch)(),o=Lt();return un.default.createElement(mn,{address:o,...t,onVisible:r=>{e(Xo(r))}})}var He=cs;var ps=()=>{let t=Zt(),{coin:e}=$(),o=jo();return r=>{let a="";return r.text?a=r.text:r.key&&(a=t(r==null?void 0:r.key,r==null?void 0:r.args)),(r==null?void 0:r.type)===q.BALANCE_INSUFFICIENT?St.default.createElement(St.default.Fragment,null,a," ",St.default.createElement(He,{coin:e,receiveOnly:!0,style:{width:"100%","word-wrap":"break-word"}})):(r==null?void 0:r.type)===q.FEE_BALANCE_INSUFFICIENT?St.default.createElement(St.default.Fragment,null,a," ",St.default.createElement(He,{coin:o,style:{width:"100%","word-wrap":"break-word"}})):a}},pn=ps;n();s();var ln={root:"_root_g697e_1"};function ls({renderError:t}){let e=(0,dn.useSelector)(Lo),o=pn(),i=t||o;if(!e.key)return null;let r=i(e);return fn.default.createElement("div",{className:ln.root},r)}var _n=ls;n();s();var yn=c(Pe()),Ye=c(H());function fs(t){let e=(0,yn.useHistory)(),o=(0,Ye.useSelector)(Qt),i=wt(),{coin:r}=$(),a=(0,Ye.useSelector)(Oo),m=qo();_o(()=>{if(!!t){if(mo(r))e.replace(o||uo);else if(!a){let u={pathname:`${co}/${i}${po}`};m&&(u.search=`?from=${m}`),e.replace(u)}}})}var xn=fs;n();s();R();var ds=({loading:t,disabled:e,onClick:o,...i})=>fo(()=>[{loading:!e&&t,disabled:e,onClick:o,actionType:D.ACTION_TYPE.CONFIRM,btnText:d("wallet_extension_send_btn_continue"),...i}],[e,t,o,i]),_s=({disabled:t,onClick:e,...o})=>{let i=nr(),r=re();return ds({...o,disabled:t||r,onClick:e||i})},Tn=_s;function ys({isGlobalLoading:t,renderError:e,headerProps:o={},confirmButtonProps:i={},inputProps:r={},totalAmountProps:a={},slot:m={},classes:u={},checkEmpty:l=!0,inputAmount:_}){let f=(0,Dt.useDispatch)(),{content:x}=u,{header:b,bottom:A,footer:g}=m,F=(0,W.useRef)(),I=(0,Dt.useSelector)(vo),N=wt(),E=Ot(),y=(0,Dt.useSelector)(Mo),k=(0,Dt.useSelector)(Do),w=te(),C=tr(),v=qr(),Z=(0,W.useRef)(!!E),Y=U=>{f(Go(U))},tt=()=>{f(Le(v)),Y(!0)},nt=a.onMax||tt;xn(l),(0,W.useEffect)(()=>{var U;(0,gn.isNil)(_)||(U=F.current)==null||U.setInputAmount(_.toString())},[_]);let mt=Tn(i);return W.default.createElement(fe,{loading:t,slot:{header:b||W.default.createElement(rn,{title:d("wallet_extension_send_title_send"),...o}),footer:t?null:g||W.default.createElement(D,{buttonGroup:mt})}},W.default.createElement("div",{className:(0,Cn.default)(x,We.content)},W.default.createElement(Fo,{ref:F,...r,autoFocus:!I,coinId:N,maximumMode:C,maximumAmount:C?v:null,initialValue:{value:[E||"0",y||"0"],mode:k,flatCurrencyId:w},onAmountChange:([U,$t],ut)=>{f($o($t)),f(Le(U)),ut&&(Y(!1),Z.current=!0)},onModeChnage:U=>{f(Wo(U))},onFlatChange:U=>{U&&f(zo(U.currencyId))}}),Z.current&&W.default.createElement(_n,{renderError:e}),W.default.createElement(Nt,{offsetBottom:104,className:We.totalAmountWrap},W.default.createElement(sn,{...a,onMax:()=>{nt(),Z.current=!0}})),A))}var In=ys;n();s();var An=c(T());it();var Sn=c(H());function Ge(){let t=ne();return(0,An.useCallback)(e=>Be(e,t)?{key:"extension_wallet_send_text_insufficient_balance",args:{},type:q.COMMON_ERROR}:null,[t])}function xs(){let t=(0,Sn.useDispatch)(),e=er(),o=Ge(),i=[e,o],{runErrorFns:r}=oe(i);ee(r,a=>{t(Ro(a))})}var Fn=xs;n();s();var En=c(H()),Ie=c(T());Qe();eo();function Ts(){let t=(0,En.useDispatch)(),e=Lt(),{coin:o}=$(),[i,r]=(0,Ie.useState)(!0);return(0,Ie.useEffect)(()=>{(async()=>{try{if(!o.coinId)return;let m=await Ht(zt.getPendingBRC20BalanceDetail,{address:e,coinId:o.coinId});m!=null&&m.data&&t(Zo(m.data.availableAmount))}finally{r(!1)}})()},[e,o.coinId]),i}var bn=Ts;n();s();var Rt=c(T());var Nn=c(H());function Cs(){let t=(0,Nn.useDispatch)(),{isInitLoading:e,error:o,fee:i,feeData:r,canTransferAmount:a}=Ce();return(0,Rt.useEffect)(()=>{t(Jo(a))},[a]),(0,Rt.useEffect)(()=>{t(Ho(i))},[i]),(0,Rt.useEffect)(()=>{t(dr(r))},[r]),(0,Rt.useEffect)(()=>{t(Yo(!!o))},[o]),e}var Ae=Cs;function gs({amount:t,onCancel:e,onConfirm:o,slot:i,...r}){let a=re(),m=Ae(),u=bn(),l=(0,Ft.useMemo)(()=>{let _=null;return typeof e=="function"&&(_={actionType:D.ACTION_TYPE.CANCEL,onClick:e}),[_,{actionType:D.ACTION_TYPE.CONFIRM,onClick:o,disabled:a,loading:m,btnText:d("wallet_extension_send_btn_continue")}]},[m,a,e,o]);return Fn(),Ft.default.createElement(In,{...r,inputAmount:t,isGlobalLoading:u,slot:{...i||{},footer:Ft.default.createElement(D,{buttonGroup:l})},checkEmpty:!1,headerProps:{title:d("extension_wallet_header_maintitle_inscribe"),...r.headerProps||{}},totalAmountProps:{...(r==null?void 0:r.totalAmountProps)||{},title:d("extension_defi_bot_textarea_inscribe_balance"),type:"amount"},inputProps:{...r.inputProps||{},disabled:{input:!1,switch:!0}}})}function Is({walletId:t,...e}){return Ft.default.createElement(ge,{walletId:t},Ft.default.createElement(gs,{...e}))}var $l=Is;n();s();var V=c(T());R();var wn=c(H());n();s();var ze=c(T());var Se=c(H());function As(){let t=(0,Se.useSelector)(ko);return(0,ze.useCallback)(()=>t?{key:"extension_wallet_btc_error_notif_insufficient_btc",args:{},type:q.FEE_BALANCE_INSUFFICIENT}:null,[t])}function Ss(){let t=Ge();return(0,ze.useCallback)(e=>{let o=t(e);return o?{...o,highlight:or.AMOUNT}:null},[t])}function Fs(t){let e=(0,Se.useDispatch)(),o=As(),i=rr(),r=Ss(),a=[o,i,r],{runErrorFns:m}=oe(a);ee(m,u=>{e(Vo(u))},t)}var hn=Fs;n();s();var Fe=c(T());R();n();s();var Bn={"preview-json":"_preview-json_1m5oy_1",previewJson:"_preview-json_1m5oy_1"};var Es=({coinId:t,amount:e})=>{let o=Bt(t),{loading:i,data:r}=yo(async()=>{let a={op:"transfer",amount:e,tick:o.symbol};oo(o)&&(a={...a,p:"brc20-s",tid:Xt(o)});let m=await Ao(a);return(m==null?void 0:m.brcJson)||""});return Fe.default.createElement(at,{title:d("extension_wallet_transaction_item_inscribe_preview")},Fe.default.createElement(h.Spin,{loading:i},Fe.default.createElement(S.Text,{className:Bn["preview-json"]},r)))},Pn=Es;function bs({headerProps:t={},onCancel:e,onConfirm:o,walletId:i}){let r=(0,wn.useDispatch)(),a=Ot(),m=wt(),u=jt(),l=Ae(),_=(0,V.useCallback)(async()=>{await r(Uo(!1))},[r]);return hn(l),V.default.createElement($e,{walletId:i,slot:{top:V.default.createElement(V.default.Fragment,null,V.default.createElement(_t,null,V.default.createElement(wo,{summaryList:[{coinId:m,coinAmount:u}],title:d("extension_wallet_transaction_item_inscribe")})),V.default.createElement(_t,null,V.default.createElement(Pn,{coinId:m,amount:a})))},headerProps:t,confirmButtonProps:{onCancel:e,onConfirm:o,onFillUp:_}})}function Ns({txSource:t,walletId:e,...o}){return V.default.createElement(ge,{txSource:t,walletId:e},V.default.createElement(bs,{walletId:e,...o}))}var hf=Ns;export{fe as a,rn as b,He as c,xn as d,ds as e,In as f,Bs as g,xe as h,Nr as i,et as j,$e as k,De as l,$l as m,hf as n};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-YUPFXNBJ.js.map
