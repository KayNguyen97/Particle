import{a as W,b as oe,d as K}from"./chunk-GP2RMO63.js";import{a as $}from"./chunk-WIYPU26K.js";import"./chunk-P4XRBDXP.js";import{e as X,v as R,w as ee,x as ae}from"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import"./chunk-4KY5XQ5E.js";import"./chunk-PX7HII6H.js";import"./chunk-ODS2CEAN.js";import{a as re}from"./chunk-JSAFBAMQ.js";import{b as L}from"./chunk-XEOGXIVD.js";import"./chunk-PCGRDRHF.js";import{p as S}from"./chunk-IU3TYIWS.js";import"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import"./chunk-X2LENRE7.js";import{aa as Z,ca as J,da as Q}from"./chunk-O4EDZSHP.js";import"./chunk-HU3KBV5G.js";import"./chunk-6ZPGW3YM.js";import"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import"./chunk-FLCN6MAI.js";import"./chunk-JIRWXBHS.js";import"./chunk-3TVEFIPW.js";import{f as V}from"./chunk-IMRS4RGO.js";import{a as M}from"./chunk-52GWQSZH.js";import{a as ue}from"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import{h as E}from"./chunk-RMQJRDTF.js";import{c as l}from"./chunk-2YLR7R2N.js";import"./chunk-MVLY6WUP.js";import"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{C as Y,D as q,v as B}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{H as F,u as k}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{P as j,c as U}from"./chunk-C2H3SRET.js";import{a as y}from"./chunk-V4YVDLI4.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import"./chunk-IYYFWVWL.js";import"./chunk-RYNAOZ73.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f as w,m as n,o as m}from"./chunk-6V2G2Z5W.js";n();m();Y();var ge=w(ue()),D=w(y());n();m();var G=w(U());var a=w(y());n();m();var te=w(U()),ne=w(q());var s=w(y());n();m();var O=w(y()),le=w(U());n();m();var A={handler:"_handler_3jcug_1",disabled:"_disabled_3jcug_4",keyring:"_keyring_3jcug_7",wallet:"_wallet_3jcug_11",icon:"_icon_3jcug_16",noHandler:"_noHandler_3jcug_23"};var de=({type:r,canDrag:i,listeners:_,disabled:h,getHandlerRef:x})=>i?O.default.createElement(l.Box,{ref:x,..._,className:(0,le.default)(A.handler,A[r],{[A.disabled]:h})},O.default.createElement(L.IconButton,{className:A.icon,icon:"okx-wallet-plugin-hamburger"})):O.default.createElement(l.Box,{ref:x,..._,className:A.noHandler}),H=de;n();m();var N={item:"_item_1e2ax_1",dragging:"_dragging_1e2ax_8",children:"_children_1e2ax_12",wrapper:"_wrapper_1e2ax_15",wallet:"_wallet_1e2ax_19",canDrag:"_canDrag_1e2ax_22",delete:"_delete_1e2ax_25",avatar:"_avatar_1e2ax_33",name:"_name_1e2ax_37",draw:"_draw_1e2ax_43",text:"_text_1e2ax_46",more:"_more_1e2ax_60"};var fe=({keyringIdentity:r,editIdentityName:i,onDragWalletStart:_,onDragWalletEnd:h,editKeyringIdentities:x})=>{let t=(r==null?void 0:r.walletIdentities)||[],d=(0,s.useCallback)(()=>{_(r.keyringId)},[_,r]),c=(0,s.useCallback)(o=>{let f=(0,ne.cloneDeep)(x),b=f.find(({keyringId:I})=>I===r.keyringId);b.walletIdentities=o,h(f)},[x,r,h]),p=K(),g=(0,s.useMemo)(()=>r.keyringIdentityType!==E.MNEMONIC&&r.keyringIdentityType!==E.MPC,[r]),C=t.length>1;return s.default.createElement(k.Sortable,{uniqueKey:"walletId",itemClassName:N.item,onDragStart:d,itemChildrenClassName:N.children,itemDraggingClassName:N.dragging,itemWrapperClassName:N.wrapper,onDragEnd:c,dataSource:t,withOverlay:!1,renderHandler:({getHandlerRef:o,listeners:f})=>s.default.createElement(H,{type:"wallet",canDrag:C,listeners:f,getHandlerRef:o})},t.map(o=>s.default.createElement(l.FlexBox,{align:l.ALIGN.center,className:(0,te.default)(N.wallet,{[N.canDrag]:C}),key:o.walletId},g?s.default.createElement(l.Box,{className:N.delete},s.default.createElement(L,{className:"okx-wallet-plugin-delete",onClick:()=>p({walletId:o.walletId,keyringType:r.keyringIdentityType})})):null,s.default.createElement($,{size:$.SIZE.sm,className:N.avatar,walletIdentity:o}),s.default.createElement(l.FlexBox,{align:l.ALIGN.center,className:N.name,onClick:()=>{i({type:W.WALLETACCOUNT,identity:o,initialName:o.walletName,otherNames:t.map(({walletName:f,walletId:b})=>o.keyringId===b?"":f).filter(Boolean)})}},s.default.createElement(S.Text,{ellipsis:!0,className:N.text},o.walletName),s.default.createElement(l.Box,{className:N.draw},s.default.createElement(L,{className:"okx-wallet-plugin-draw"}))),s.default.createElement(M,{className:N.more,to:`${Q}?walletId=${o==null?void 0:o.walletId}`},s.default.createElement(L.IconButton,{icon:"okx-wallet-plugin-more"})))))},me=fe;n();m();var u={item:"_item_1chg9_1",children:"_children_1chg9_8",dragging:"_dragging_1chg9_11",wrap:"_wrap_1chg9_15",disabled:"_disabled_1chg9_22",showBottomLine:"_showBottomLine_1chg9_25",keyring:"_keyring_1chg9_35",canDrag:"_canDrag_1chg9_38",delete:"_delete_1chg9_41",name:"_name_1chg9_49",canEdit:"_canEdit_1chg9_53",draw:"_draw_1chg9_56",text:"_text_1chg9_59",more:"_more_1chg9_74"};var xe=({editIdentityName:r,editKeyringIdentities:i,setEditKeyringIdentities:_})=>{let h=K(),x=(0,a.useCallback)(({keyringIdentityType:e})=>e===E.MNEMONIC||e===E.MPC,[]),t=(0,a.useCallback)(({keyringIdentityType:e})=>e===E.MNEMONIC||V(e)||e===E.MPC,[]),[d,c]=(0,a.useState)(""),p=(0,a.useCallback)(({id:e})=>{c(e)},[]),g=(0,a.useCallback)(e=>{c(""),_(e)},[_]),[C,o]=(0,a.useState)(""),f=(0,a.useCallback)(e=>{o(e)},[]),b=(0,a.useCallback)(e=>{o(""),_(e)},[_]),I=i.length>1;return a.default.createElement(k.Sortable,{uniqueKey:"keyringId",itemClassName:u.item,itemChildrenClassName:u.children,itemDraggingClassName:u.dragging,onDragStart:p,onDragEnd:g,dataSource:i,withOverlay:!1,renderHandler:({getHandlerRef:e,listeners:P})=>a.default.createElement(H,{type:"keyring",canDrag:I,listeners:P,disabled:C,getHandlerRef:e})},i.map((e,P)=>a.default.createElement(l.Box,{className:(0,G.default)(u.wrap,{[u.disabled]:C&&C!==e.keyringId,[u.showBottomLine]:P!==i.length-1}),key:e.keyringId},a.default.createElement(l.FlexBox,{align:l.ALIGN.center,className:(0,G.default)(u.keyring,{[u.canDrag]:I})},x(e)?a.default.createElement(l.Box,{className:u.delete},a.default.createElement(L,{icon:"okx-wallet-plugin-delete",onClick:()=>h({keyringId:e.keyringId,keyringType:e.keyringIdentityType})})):null,a.default.createElement(l.FlexBox,{align:l.ALIGN.center,className:(0,G.default)(u.name,{[u.canEdit]:t(e)}),onClick:()=>{t(e)&&r({type:W.WALLET,identity:e,initialName:e.keyringName,otherNames:i.map(({keyringName:_e,keyringId:pe})=>e.keyringId===pe?"":_e).filter(Boolean)})}},a.default.createElement(S.Text,{ellipsis:!0,className:u.text},e.keyringName),t(e)?a.default.createElement(l.Box,{className:u.draw},a.default.createElement(L,{icon:"okx-wallet-plugin-draw"})):null),[E.PRIVATE_KEY].includes(e.keyringIdentityType)?null:a.default.createElement(M,{className:u.more,to:`${J}?keyringId=${e==null?void 0:e.keyringId}`},a.default.createElement(L.IconButton,{icon:"okx-wallet-plugin-more"}))),d===e.keyringId?null:a.default.createElement(me,{keyringIdentity:e,editIdentityName:r,onDragWalletStart:f,onDragWalletEnd:b,editKeyringIdentities:i}))))},se=xe;n();m();var ie=w(q());Y();var v=w(y());var Ne=r=>{let i=oe(),_=R(),h=ee(),x=(0,v.useMemo)(()=>({async[W.WALLET](t,d){let c=t==null?void 0:t.keyringId;if(c)try{await _(c,d),r(p=>p.map(g=>g.keyringId===c?{...g,keyringName:d}:g)),F.success(B("wallet_edit_wallet_toast_renamed_success"))}catch(p){console.log(p)}},async[W.WALLETACCOUNT](t,d){let c=t==null?void 0:t.walletId;if(c)try{await h(c,d),r(p=>p.map(g=>{let o=(g==null?void 0:g.walletIdentities).find(f=>f.walletId===c);return o&&(o.walletName=d),g})),F.success(B("wallet_edit_wallet_toast_renamed_success"))}catch(p){console.log(p)}}}),[h,_,r]);return(0,v.useCallback)(({identity:t,...d})=>{i(d).then(c=>{let{type:p}=d,g=x[p];g&&g(t,c)}).catch(ie.noop)},[x,i])},ce=Ne;n();m();var z={root:"_root_z4n0b_1",headerDone:"_headerDone_z4n0b_1"};var De=()=>{let r=X(),[i,_]=(0,D.useState)(r),h=ce(_),[x,t]=(0,D.useState)(!1),d=f=>{_(f),t(!0)},c=(0,ge.useHistory)(),p=ae(),[g,C]=(0,D.useState)(!1),o=(0,D.useCallback)(async()=>{if(x){C(!0);try{await p(i)}catch(f){console.log(f),F.error({title:B("extension_wallet_toast_sorting_failure")})}}c.push(`${Z}?from=seedVerify`)},[c,p,i,x]);return D.default.createElement(l.Container,{className:z.root},D.default.createElement(re,{backable:!1,bordered:!1},g?D.default.createElement(j.Circle,{size:j.SIZE.md}):D.default.createElement(l.Box,{className:z.headerDone,onClick:o},B("wallet_manage_btn_edit_done"))),D.default.createElement(se,{editIdentityName:h,editKeyringIdentities:i,setEditKeyringIdentities:d}))},ja=De;export{ja as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=WalletEdit-AJ7GF2KO.js.map
