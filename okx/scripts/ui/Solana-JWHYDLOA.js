import{a as de}from"./chunk-UPDAD43L.js";import{a as fe}from"./chunk-KOSLQKT7.js";import{a as ue}from"./chunk-WAZ4Y276.js";import{c as le,d as me}from"./chunk-F6PQB74I.js";import{a as ce}from"./chunk-PZPHBKNA.js";import{a as ae,b as ie}from"./chunk-236QZ4T2.js";import"./chunk-P34A6LS4.js";import{d as oe,g as ne}from"./chunk-OCVOVZC6.js";import"./chunk-6HDV4AIS.js";import"./chunk-HHT2ACSL.js";import{d as re}from"./chunk-IB4K3FN6.js";import"./chunk-NLMSL6KB.js";import"./chunk-NC54FPSJ.js";import"./chunk-TLDPVFFH.js";import"./chunk-DPVVGFWQ.js";import"./chunk-VNHZZRMI.js";import{a as se}from"./chunk-5TSD6WDE.js";import"./chunk-TPBDSGSX.js";import"./chunk-K24OHEUM.js";import"./chunk-I2KPNTIF.js";import"./chunk-MEW6SUUR.js";import"./chunk-D6O2GLPR.js";import"./chunk-2CPFAAZ7.js";import"./chunk-ZG26PGPF.js";import"./chunk-HE77KLJ4.js";import"./chunk-NOZM7AA3.js";import"./chunk-73YQ4YAD.js";import"./chunk-OEVJ7FDO.js";import"./chunk-ATUBFYS2.js";import{a as w}from"./chunk-2N2ADYFP.js";import"./chunk-YLO74Q7W.js";import"./chunk-D54UDGZS.js";import"./chunk-2SGW2RXR.js";import"./chunk-ZXEHJOAD.js";import"./chunk-U3YDJ2W7.js";import"./chunk-VCWU5FEX.js";import"./chunk-KZ77CGYD.js";import"./chunk-RDZIVMHO.js";import"./chunk-E73QHIZ6.js";import{c as O,e as ee}from"./chunk-E2KMZQ6K.js";import"./chunk-JXT6JCNO.js";import"./chunk-AHAXQBXQ.js";import"./chunk-DUZ4ULSN.js";import"./chunk-PGPPXRV7.js";import"./chunk-54GDJWA6.js";import"./chunk-UGYRJNZG.js";import"./chunk-PLVZLQPX.js";import"./chunk-QNVM7T5C.js";import"./chunk-7T7NBYQH.js";import"./chunk-FEET7RP6.js";import"./chunk-MBJ4MFYL.js";import"./chunk-PCY622ND.js";import"./chunk-NS35PZCP.js";import"./chunk-XOD56IFT.js";import"./chunk-BBN3UGKM.js";import"./chunk-5DEIKYJL.js";import"./chunk-QMNAWRVI.js";import"./chunk-D6ZXZUY6.js";import"./chunk-QMF5LKVF.js";import"./chunk-VMACN7YR.js";import"./chunk-IQVVVGEA.js";import"./chunk-P36YR3BB.js";import"./chunk-JWFSXEUV.js";import"./chunk-UVVG5NXG.js";import"./chunk-AGVRLTFZ.js";import"./chunk-QJBKVZVF.js";import"./chunk-YIKS2AYL.js";import"./chunk-BTS2GOAC.js";import"./chunk-2HWABU7H.js";import"./chunk-APEQZGKB.js";import"./chunk-AX4SXHC6.js";import"./chunk-UCS37WXR.js";import"./chunk-DUHXKIBS.js";import"./chunk-QNEJI55N.js";import"./chunk-5W7SRP5N.js";import"./chunk-YVRXETFX.js";import{a as te}from"./chunk-GUWGENNL.js";import"./chunk-WYB2CUAN.js";import"./chunk-B2BOSVTW.js";import"./chunk-GUJXW3GJ.js";import"./chunk-VIS7KIVI.js";import"./chunk-F64VYES3.js";import"./chunk-DHX2X277.js";import"./chunk-67YO4IPY.js";import"./chunk-DLUAVD7X.js";import"./chunk-WRWXCAEZ.js";import"./chunk-OZ6XSJY6.js";import"./chunk-DMJQUOJT.js";import{c as v}from"./chunk-MTMZQEHP.js";import"./chunk-NKTQMEXG.js";import"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import"./chunk-4OTZHHYZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import"./chunk-S3ECGMEP.js";import"./chunk-PX7HII6H.js";import"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import"./chunk-TPEASXIF.js";import"./chunk-JSAFBAMQ.js";import"./chunk-A336VZZF.js";import"./chunk-XEOGXIVD.js";import"./chunk-PCGRDRHF.js";import"./chunk-IU3TYIWS.js";import"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import"./chunk-X2LENRE7.js";import"./chunk-O4EDZSHP.js";import"./chunk-HU3KBV5G.js";import"./chunk-6ZPGW3YM.js";import"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import"./chunk-FLCN6MAI.js";import"./chunk-YMZEQGAL.js";import"./chunk-7E3KY4EN.js";import"./chunk-JIRWXBHS.js";import"./chunk-3TVEFIPW.js";import{U as R,z as _}from"./chunk-UXFKODVN.js";import{e as $}from"./chunk-IMRS4RGO.js";import"./chunk-52GWQSZH.js";import"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import"./chunk-RMQJRDTF.js";import"./chunk-2YLR7R2N.js";import"./chunk-MVLY6WUP.js";import"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{C as j,D as J,Pa as Ee,Vb as U,nb as H,pa as W,q,rb as Ne,ub as z,v as B,zb as X}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{b as Q}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import"./chunk-C2H3SRET.js";import{a as k}from"./chunk-V4YVDLI4.js";import"./chunk-5QFBGARG.js";import"./chunk-AF33U5YO.js";import"./chunk-F2CV7BH6.js";import"./chunk-XRV6EHVP.js";import"./chunk-UXBKFN2U.js";import"./chunk-HCW4K7TR.js";import"./chunk-Z4JATHZR.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import"./chunk-IYYFWVWL.js";import"./chunk-ZRKMRDGI.js";import"./chunk-K2CHCG7Q.js";import"./chunk-3FBBK33H.js";import"./chunk-KTHMEYYS.js";import"./chunk-GT57MMCB.js";import"./chunk-HIGM7FFU.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import"./chunk-RYNAOZ73.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f as L,m as S,o as T}from"./chunk-6V2G2Z5W.js";S();T();var K=L(k());S();T();var G=L(k());j();Ne();S();T();U();var Z=L(J());S();T();var u=L(k());Ee();U();function he({transactions:e,address:t,replace:o,disabled:F,unitLimit:c,signInfo:l}){let[n,x]=(0,u.useState)(0),[a,f]=(0,u.useState)(null),[d,y]=(0,u.useState)(null),[A,p]=(0,u.useState)("0"),[r,i]=(0,u.useState)(!1),s=(a==null?void 0:a.fee)||"0",[E,I]=(0,u.useState)(e),N=ue(),g=O(W),{disabledSignInfo:V=!1,disabledPreExecute:b=!1}=F||{},P=D=>{x(D?m=>m+1:m=>m-1)};return(0,u.useEffect)(()=>{c&&y(c)},[c]),(0,u.useEffect)(()=>{l&&f(l)},[l]),(0,u.useEffect)(()=>{(async function(){if(!V){P(!0);try{let{data:m={}}=await v({coinId:W,address:t}),{info:C={}}=m;f(C),i(!1)}catch{i(!0)}finally{P(!1)}}})()},[t,V]),(0,u.useEffect)(()=>{(async function(){if(!b&&!(!o||!(g!=null&&g.chainId))){P(!0);try{let m=await N({coinId:W,from:t,chainId:g.chainId,simulateTransactionParamList:e.map(({serializedMessage:C})=>({transaction:C,sigVerify:!1,replaceRecentBlockhash:!0}))});y(m)}finally{P(!1)}}})()},[...e,o,t,g==null?void 0:g.chainId,b]),(0,u.useEffect)(()=>{(async function(){if(!(o&&(!a||!d))){P(!0);try{let m=e;o&&(m=await Promise.all(m.map(async Y=>{let{serializedMessage:xe,...Ie}=Y,_e=await me(xe,a.computeUnitPrice,d);return{...Ie,serializedMessage:_e}})));let C=await le(m.map(({serializedMessage:Y})=>Y));p(C),I(m)}finally{P(!1)}}})()},[...e,o,a,d]),{loading:n>0,baseFee:s,priorityFee:A,totalFee:z(s,A),signInfo:a,estimateFailed:r,replacedTransactions:E}}var pe=he;var Le=({unapproved:e,coinId:t,preExecuteResult:o})=>{var N,g;let{address:F}=w(e),{loading:c,preExecuteRet:l}=o,n=(l==null?void 0:l[R.TX_ANALYZE])||{},[x]=n.simulateTransactionResultList||[],{unitGasLimit:a}=x||{},{loading:f,totalFee:d,estimateFailed:y,signInfo:A,replacedTransactions:p}=pe({transactions:((N=e==null?void 0:e.params)==null?void 0:N.message)||[],address:F,replace:!0,unitLimit:a,disabled:{disabledPreExecute:!0}}),r=(A==null?void 0:A.solRent)||"0",i=(g=ee(t,e.walletId))==null?void 0:g.coinAmountInt,s=(0,Z.isNil)(i)||X(i,d)||c,E=(0,Z.isNil)(i)||X(i,z(d,r))||c;return{loading:f,networkFeeProps:{loading:f,networkFee:d,estimateFailed:y,coinId:t},isSufficientGas:s,networkFee:d,estimateFailed:y,isSufficientBalance:E,selfRent:r,replacedTransactions:p}},ge=Le;S();T();var Se=L(J());j();var h=L(k());var Re=({unapproved:e})=>{var A;let t=se(),[o,F]=(0,h.useState)(!1),{host:c}=re(e),l=w(e),[n,x]=(0,h.useState)({}),a=((A=e==null?void 0:e.params)==null?void 0:A.message)||[],f=(0,h.useCallback)(async p=>{let{chainId:r,coinId:i}=p;try{F(!0);let s=await t({checkTypes:[R.TX_ANALYZE,R.KYS],from:l.address,chainId:r,domain:c,coinId:i,bizLine:6,simulateTransactionParamList:a.map(E=>({transaction:E.serializedMessage,sigVerify:!1,replaceRecentBlockhash:!0}))});x(s)}catch(s){console.log(s)}finally{F(!1)}},[c,a.length,t,l.address]),d=(0,h.useMemo)(()=>{let p=(n==null?void 0:n[R.TX_ANALYZE])||{},r=p.simulateTransactionResultList,i=r==null?void 0:r.length;if((0,Se.isArray)(r)&&i>0){if(i===1)return r[0];let s={};if(r.every(I=>!I.result)){s.result=!1,s.msg=B("wallet_extension_transaction_text_thirdparty_contract_failed");let I=r.some(N=>N.addFundsFlag);s.addFundsFlag=I,s.resultCode=I?te:""}else s.result=!0,s.msg="",s.addFundsFlag=!1,s.resultCode="";return s}return p},[n]),y=(0,h.useMemo)(()=>({loading:o,...(n==null?void 0:n[R.KYS])||{}}),[o,n]);return{loading:o,kysRet:y,preExecute:f,verifyGasLimitRet:d,preExecuteRet:n}},Te=Re;var Fe=({unapproved:e})=>{let t=O(H)||{},o=(t==null?void 0:t.coinId)||H,{initialType:F}=w(e),c=Te({unapproved:e,baseCoin:t}),{verifyGasLimitRet:l,kysRet:n,preExecute:x}=c;(0,G.useEffect)(()=>{t!=null&&t.coinId&&x(t)},[t==null?void 0:t.coinId,x]);let{networkFee:a,isSufficientGas:f,networkFeeProps:d,estimateFailed:y,loading:A,isSufficientBalance:p,selfRent:r,replacedTransactions:i}=ge({coinId:o,unapproved:e,preExecuteResult:c}),s=(0,G.useCallback)(()=>!p&&f?{type:Q.TYPE.warn,message:B("walletextension_toast_text_reserve_rent_exempt",{number:q.div(r,10**(t==null?void 0:t.decimals))})}:null,[f,p,r,t==null?void 0:t.decimals]),E=oe({unapproved:e}),I=ne({verifyGasLimitRet:l}),N=ie({baseCoin:t,unapproved:e,estimateFailed:y,isSufficientGas:f,verifyGasLimitRet:l,kysRet:n},{pre:[E,I],post:[s]}),g=ce({coinId:o,feeLoading:A,unapproved:e,estimateFailed:y,isSufficientGas:f,preExecuteRet:c,extParams:{replacedTransactions:i,serviceCharge:a},chainConfirmDisabled:$(F),isSufficientBalance:p});return G.default.createElement(ae,{kysRet:n,baseCoin:t,unapproved:e,tipMessage:N,buttonGroup:g,networkFee:d})};S();T();var Ae=L(k());var ye=({unapproved:e})=>{var F;let t=(F=e.params)==null?void 0:F.message,o=de({unapproved:e});return Ae.default.createElement(fe,{message:t,unapproved:e,tipMessage:o})};var Et=({unapproved:e})=>{switch(e.method){case _.SIGN_TRANSACTION:case _.RPC_SIGN_TRANSACTION:case _.SIGN_AND_SEND_TRANSACTION:case _.RPC_SIGN_AND_SEND_TRANSACTION:case _.SIGN_ALL_TRANSACTIONS:case _.RPC_SIGN_ALL_TRANSACTIONS:return K.default.createElement(Fe,{unapproved:e});case _.SIGN_MESSAGE:case _.RPC_SIGN_MESSAGE:return K.default.createElement(ye,{unapproved:e});default:return""}};export{Et as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Solana-JWHYDLOA.js.map
