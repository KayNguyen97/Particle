import{a as X}from"./chunk-X43FDTPV.js";import{a as er}from"./chunk-ZGEQVSMJ.js";import{a as tr}from"./chunk-5OUYE6NE.js";import{a as ar}from"./chunk-GQOO5OO7.js";import{a as W,f as or}from"./chunk-WIOZQWEG.js";import{a as sr}from"./chunk-67PEY2GN.js";import{a as ir}from"./chunk-MEW6SUUR.js";import{a as rr}from"./chunk-7CB4COOY.js";import{f as Rt,i as tt}from"./chunk-E2KMZQ6K.js";import{a as ze}from"./chunk-DUZ4ULSN.js";import{a as rt}from"./chunk-SI3RW2CS.js";import{b as qt}from"./chunk-DUHXKIBS.js";import{f as Qt,i as Xt}from"./chunk-MTMZQEHP.js";import{w as Kt}from"./chunk-R6GCLTW2.js";import{l as et}from"./chunk-IU3TYIWS.js";import{s as Jt}from"./chunk-VPBQLZCI.js";import{s as Zt}from"./chunk-X2LENRE7.js";import{k as jt}from"./chunk-HU3KBV5G.js";import{b as Ge}from"./chunk-YMZEQGAL.js";import{P as i,U as Fe,W as Ne}from"./chunk-UXFKODVN.js";import{Ab as Yt,Bb as le,C as zt,D as Xr,Db as Ve,Fb as $,Hb as Me,Ib as Re,Nb as $e,Ob as It,Vb as be,q as re,sb as S,ub as E,v as He,vb as Q,wb as ee,xb as V,yb as ie,zb as k}from"./chunk-CVJKAN5R.js";import{b as Xe,q as v}from"./chunk-GXQ645QR.js";import{a as bt,f as Rr}from"./chunk-V4YVDLI4.js";import{f as Ue,m as q,o as J}from"./chunk-6V2G2Z5W.js";q();J();var o=Ue(bt()),pr=Ue(Xr());zt();be();var w=Ue(Rr());q();J();var b=Ue(bt());be();q();J();zt();be();var nr=({gasLimit:s,gasPrice:e,maxPriorityFeePerGas:t,maxFeePerGas:r,baseFeePerGas:m,supportEip1559:P,extFee:u}={})=>{let a="",n="";if(!P)a=S(s,e),n=e;else{let p=E(m,t);n=Math.min(p,r),a=S(s,n)}return{minGasFee:E(a,u),minGasPrice:n}},cr=({gasLimit:s,gasPrice:e,maxPriorityFeePerGas:t,maxFeePerGas:r,supportEip1559:m,extFee:P,gasPriceInfo:u={},gasLimitInfo:a={},gasType:n})=>{let{baseFee:p}=u,{originGasLimit:L}=a;if(n!==i.CUSTOM)return nr({gasLimit:L,gasPrice:e,maxPriorityFeePerGas:t,maxFeePerGas:r,baseFeePerGas:p,supportEip1559:m,extFee:P});let M=Q(r,t),d=Math.min(M,p),T=Math.min(s,L);return nr({gasLimit:T,gasPrice:e,maxPriorityFeePerGas:t,maxFeePerGas:r,baseFeePerGas:d,supportEip1559:m,extFee:P})};function ci(s,e){let{isNetworkFeeLoading:t,gasLimit:r,gasPrice:m,maxFeePerGas:P,maxPriorityFeePerGas:u,supportEip1559:a,gasLimitInfo:n}=s;return!t&&(ie(r,0)||a&&(ie(P,0)||V(u,0))||!a&&ie(m,0)||(n==null?void 0:n.queryGasLimitErrorUseDefault)&&e!==Kt.DEPLOY_CONTRACT)}async function mi(s,e){let{from:t,to:r,data:m,value:P="0"}=e,u={checkTypes:[Fe.VERIFY_GAS_LIMIT],coinId:s,from:t,to:r,amount:P,inputData:m,tokenAddress:r},{data:a=[]}=await Qt(u),n=a==null?void 0:a.find((p={})=>p.checkType===Fe.VERIFY_GAS_LIMIT);return n&&(n==null?void 0:n.result)===!1&&(n==null?void 0:n.resultCode)!=="306001"?n.msg||He("wallet_extension_toast_text_unknown_error"):!1}var ur=()=>e=>It(e,0),lr=({gasPrice:s,gasLimit:e,extFee:t,baseCoin:r={},currencyId:m})=>{let P=E(S(s,e),t),u=Re(P),a=et(u,{symbol:r==null?void 0:r.symbol}),n=tt(r==null?void 0:r.coinId,P,{currencyId:m,useApproximate:!0});return{gasFeeDisplay:`${a}${n}`,gasFee:u}},Ie=({gasPrice:s,gasLimit:e,maxPriorityFeePerGas:t,maxFeePerGas:r,supportEip1559:m,extFee:P,gasPriceInfo:u,gasLimitInfo:a,gasType:n,baseCoin:p={},currencyId:L})=>{let{minGasFee:M,minGasPrice:d}=cr({gasLimit:e,gasPrice:s,maxPriorityFeePerGas:t,maxFeePerGas:r,supportEip1559:m,extFee:P,gasPriceInfo:u,gasLimitInfo:a,gasType:n}),T=Re(M),_=et(T,{symbol:p==null?void 0:p.symbol}),N=tt(p==null?void 0:p.coinId,M,{currencyId:L,useApproximate:!0});return{minGasPrice:d,minGasFee:T,minGasFeeDisplay:`${_}${N}`}},mr=(s={},e={wait:200,disabled:!1,fetchOnce:!1})=>{let{wait:t,disabled:r,fetchOnce:m}=e,{coinId:P,supportEip1559:u,tx:a,needExtFee:n=!1}=s,[p,L]=(0,b.useState)(null),[M,d]=(0,b.useState)({data:"",loading:!1,error:""});return(0,b.useEffect)(()=>{!n||r||d(T=>({...T,loading:!0,error:""}))},[a,n,r]),Jt(()=>{if(!n||r){d(l=>({...l,loading:!1,error:""}));return}if(m===p&&m!==null){d(l=>({...l,loading:!1,error:""}));return}let T=k(a.gasPrice,"0")&&k(a.gasLimit,"0"),_=k(a.maxFeePerGas,"0")&&k(a.maxPriorityFeePerGas,"0")&&k(a.gasLimit,"0");if(!(u?_:T)){d(l=>({...l,loading:!1,error:""}));return}(async()=>{try{let l={...a,value:Ge(a.value),gasLimit:Ge(a.gasLimit)},C=u?{...l,maxFeePerGas:Ge(a.maxFeePerGas),maxPriorityFeePerGas:Ge(a.maxPriorityFeePerGas)}:{...l,gasPrice:Ge(a.gasPrice)},f=Zt(C),A=or(f),z=await Xt({coinId:P},{inputData:A});d(y=>({...y,data:z,loading:!1,error:""}))}catch(l){d(C=>({...C,loading:!1,error:l.error_message||"Network error"}))}finally{m&&L(m)}})()},[P,a,m,n],{wait:t}),M},ei=({commonTx:s,gasPrice:e,priorityFee:t,supportEip1559:r})=>(0,b.useMemo)(()=>r?{...s,maxFeePerGas:e,maxPriorityFeePerGas:t}:{...s,gasPrice:e},[s,e,t,r]),Pr=({coinId:s,from:e,to:t,value:r,inputData:m,gasLimit:P,supportEip1559:u,needExtFee:a,fastGasPrice:n,fastPriorityFee:p,customGasPrice:L,customMaxBaseFee:M,customMaxPriorityFee:d,customGasLimit:T,estimatedL1FeeOptions:_})=>{let N=(0,b.useMemo)(()=>({from:e,to:t,value:r,data:m}),[e,t,r,m]),h=(0,b.useMemo)(()=>({...N,gasLimit:P}),[N,P]),l=ei({commonTx:h,gasPrice:n,priorityFee:p,supportEip1559:u}),C=(0,b.useMemo)(()=>u?{...N,maxFeePerGas:$(E(M,d)),maxPriorityFeePerGas:$(d),gasLimit:T}:{...N,gasPrice:$(L),gasLimit:T},[N,u,L,M,d,T]),f=mr({coinId:s,tx:l,type:"fast",supportEip1559:u,needExtFee:a},_),A=mr({coinId:s,tx:C,type:"custom",supportEip1559:u,needExtFee:a},_);return(0,b.useMemo)(()=>{let z=f.loading||A.loading,y=f.error||A.error,se={[i.SLOW]:f.data,[i.STANDARD]:f.data,[i.FAST]:f.data,[i.CUSTOM]:A.data};return{loading:z,error:y,data:se}},[f,A])};var Pe=s=>(0,pr.isNil)(s)||ie(s,0);function fr({className:s}){return o.default.createElement(Xe,{className:s,desc:He("wallet_extension_transfer_text_higher_than_necessary"),type:Xe.TYPE.warn,closable:!1})}var ti=({isSignInfoLoading:s,signInfo:e,initialGasLimitInfo:t,isGasLimitLoading:r,visible:m,address:P,inputData:u,tokenAddress:a,coinId:n,value:p,initialGasData:L,estimatedL1FeeOptions:M,onBack:d,onClose:T,onGasChange:_,currencyId:N,minimumGasLimit:h,gasReturn:l,onServerDataChange:C,onGasTypeManualChange:f,isMev:A,mevInfo:z})=>{var Ot,kt,Wt,ht,vt,Bt,Ut,Ht,Vt,$t;let y=jt(),se=(0,o.useRef)(!1),[,B]=Rt(n,{withPrice:!0}),ae=er(),xe=ur(),{initialGasType:de=i.STANDARD,initialCustomMaxBaseFee:ye,initialCustomMaxPriorityFee:Te,initialCustomGasPrice:_e,initialCustomGasLimit:Le}=L||{},Ce=Pe(ye)?void 0:Me(ye),st=Pe(Te)?void 0:Me(Te),at=Pe(_e)?void 0:Me(_e),Fr=Pe(Le)?void 0:Le,[ot,Gr]=(0,o.useState)(),[nt,xr]=(0,o.useState)(),[ct,dr]=(0,o.useState)(),[mt,ut]=(0,o.useState)(),[De,lt]=(0,o.useState)(de),[O,Ae]=(0,o.useState)(de),yr=g=>{let{priorityRate:F}=z||{},x=Qe=>S(Qe,F),D=(Qe,Jr)=>{let Qr=ee([0,S(Jr,Q(F,1))]);return E(Qe,Qr)},{supportEip1559:K,max:R,min:ne,normal:ce,fastPriorityFee:me,proposePriorityFee:Je,safePriorityFee:Be}=g,ue={};return K&&F&&(ue.fastPriorityFee=x(me),ue.safePriorityFee=x(Be),ue.proposePriorityFee=x(Je),ue.max=D(R,me),ue.normal=D(ce,Je),ue.min=D(ne,Be)),{...g,...ue}},U=(0,o.useMemo)(()=>{var g,F,x;return A?(F=e==null?void 0:e.info)!=null&&F.gasPrice?yr((x=e==null?void 0:e.info)==null?void 0:x.gasPrice):ze:((g=e==null?void 0:e.info)==null?void 0:g.gasPrice)||ze},[(Ot=e==null?void 0:e.info)==null?void 0:Ot.gasPrice,A]),Tr=(kt=e==null?void 0:e.info)==null?void 0:kt.needExtFee,{min:_r,normal:gr,max:wr,minGasPrice:Sr,supportEip1559:H,suggestBaseFee:Er,safePriorityFee:ge,proposePriorityFee:we,fastPriorityFee:Se}=U,Y=xe(_r),I=xe(gr),Z=xe(wr),G=(0,o.useMemo)(()=>{let g=Yt(t==null?void 0:t.minGasLimit,h)?t==null?void 0:t.minGasLimit:h,F={...t,minGasLimit:g};return V(F==null?void 0:F.gasLimit,F==null?void 0:F.minGasLimit)&&(F.gasLimit=F==null?void 0:F.minGasLimit),F},[t,h]),Pt=`${(G==null?void 0:G.gasLimit)||0}`,j=Fr||Pt,ft=`${(G==null?void 0:G.minGasLimit)||Pt}`,pt=`${(G==null?void 0:G.maxGasLimit)||1500*1e4}`,Mr=W(Y),Ft=W(I),Nr=W(Z),Gt=Me(Sr),Ze=W(Er),Lr=W(Q(Y,ge)),xt=W(Q(I,we)),Cr=W(Q(Z,Se)),Dr=W(ge),dt=W(we),Ar=W(Se),Oe=(0,o.useRef)(),ke=(0,o.useRef)(),We=(0,o.useRef)(),je=(0,o.useRef)(),yt={[i.SLOW]:Mr,[i.STANDARD]:Ft,[i.FAST]:Nr,[i.CUSTOM]:Pe(Oe.current)?Ft:Oe.current},Tt={[i.SLOW]:Lr,[i.STANDARD]:xt,[i.FAST]:Cr,[i.CUSTOM]:Pe(ke.current)?xt:ke.current},_t={[i.SLOW]:Dr,[i.STANDARD]:dt,[i.FAST]:Ar,[i.CUSTOM]:Pe(We.current)?dt:We.current},fe=typeof ct=="string"?ct:at||yt[O],oe=typeof ot=="string"?ot:Ce||Tt[O],pe=typeof nt=="string"?nt:st||_t[O],te=typeof mt=="string"?mt:j,c=Pr({coinId:n,from:P,to:a,value:p,inputData:u,gasLimit:j,supportEip1559:H,needExtFee:Tr,slowGasPrice:Y,safePriorityFee:ge,standardGasPrice:I,proposePriorityFee:we,fastGasPrice:Z,fastPriorityFee:Se,customGasPrice:fe,customMaxBaseFee:oe,customMaxPriorityFee:pe,customGasLimit:te,estimatedL1FeeOptions:{wait:200,...M}}),he=s||r||c.loading,{minGasFeeDisplay:Or,minGasFee:kr,minGasPrice:Wr}=Ie({gasPrice:Y,gasLimit:j,maxPriorityFeePerGas:ge,maxFeePerGas:Y,supportEip1559:H,extFee:(Wt=c==null?void 0:c.data)==null?void 0:Wt[i.SLOW],gasPriceInfo:U,gasLimitInfo:G,gasType:De,baseCoin:B,currencyId:N}),hr=W(Wr),{minGasFeeDisplay:vr,minGasFee:Br,minGasPrice:Ur}=Ie({gasPrice:I,gasLimit:j,maxPriorityFeePerGas:we,maxFeePerGas:I,supportEip1559:H,extFee:(ht=c==null?void 0:c.data)==null?void 0:ht[i.STANDARD],gasPriceInfo:U,gasLimitInfo:G,gasType:De,baseCoin:B,currencyId:N}),Hr=W(Ur),{minGasFeeDisplay:Vr,minGasFee:$r,minGasPrice:br}=Ie({gasPrice:Z,gasLimit:j,maxPriorityFeePerGas:Se,maxFeePerGas:Z,supportEip1559:H,extFee:(vt=c==null?void 0:c.data)==null?void 0:vt[i.FAST],gasPriceInfo:U,gasLimitInfo:G,gasType:De,baseCoin:B,currencyId:N}),zr=W(br),gt=ie(oe,0)?y("extension_wallet_transaction_errortip_basefeelimit"):"",wt=V(oe,Ze)&&k(oe,0)?y("extension_wallet_transaction_errortip_notsuccess",{baseFee:Ze}):"",St=ie(pe,0)?y("extension_wallet_transaction_errortip_priorityfeelimit"):"",Et=V(fe,Gt)?y("wallet_extension_transaction_customize_error_gasprice_mustbe",{minGasPriceGWei:Gt}):"",Mt=V(te,ft)||k(te,pt)?y("wallet_extension_transaction_customize_error_gas_restriction",{minGasLimit:rt(ft,0),maxGasLimit:rt(pt)}):"",Nt=!Mt&&(!H&&!Et||H&&!gt&&!St),Lt=E(oe,pe),ve=$(Ve((H?Lt:fe)||0)),Yr=W(ve),{gasFeeDisplay:Ct}=lr({gasPrice:Ve(ve),gasLimit:Ve(te),extFee:(Bt=c==null?void 0:c.data)==null?void 0:Bt[i.CUSTOM],baseCoin:B,currencyId:N}),Ir=E(S(Y,j),(Ut=c==null?void 0:c.data)==null?void 0:Ut[i.SLOW]),Zr=E(S(I,j),(Ht=c==null?void 0:c.data)==null?void 0:Ht[i.STANDARD]),Dt=E(S(Z,j),(Vt=c==null?void 0:c.data)==null?void 0:Vt[i.FAST]),At=E(S(ve,te),($t=c==null?void 0:c.data)==null?void 0:$t[i.CUSTOM]),Ke=k(At,S(Dt,2)),Ee=[{typeKey:i.SLOW,gasFee:kr,unitPrice:`${re.ceilShort(hr,2)} ${y("extension_wallet_transaction_input_gwei")}`,totalPrice:Or,estimatedTime:ae(U,Y),onClick:()=>(f==null||f(),Ae(i.SLOW))},{typeKey:i.STANDARD,gasFee:Br,unitPrice:`${re.ceilShort(Hr,2)} ${y("extension_wallet_transaction_input_gwei")}`,totalPrice:vr,estimatedTime:ae(U,I),onClick:()=>(f==null||f(),Ae(i.STANDARD))},{typeKey:i.FAST,gasFee:$r,unitPrice:`${re.ceilShort(zr,2)} ${y("extension_wallet_transaction_input_gwei")}`,totalPrice:Vr,estimatedTime:ae(U,Z),onClick:()=>(f==null||f(),Ae(i.FAST))}],jr=(0,o.useMemo)(()=>{var g,F;return l&&(l==null?void 0:l.status)!==ir.empty&&(!((g=l==null?void 0:l.tip)!=null&&g.error)||((F=l==null?void 0:l.tip)==null?void 0:F.key)===qt.exceedGasLimit)?Ee==null?void 0:Ee.map(x=>{var D;return(x==null?void 0:x.typeKey)!==i.CUSTOM&&re.lte(re.mul(x==null?void 0:x.gasFee,B==null?void 0:B.usdPrice),(D=l==null?void 0:l.activity)==null?void 0:D.gas)?{supportGasReturn:!0,...x}:x}):Ee},[l,Ee,B==null?void 0:B.usdPrice]),Kr=ae(U,ve,!Nt),qr={unitPricePrefix:re.ceilShort(Yr,2),unitPriceSuffix:y("extension_wallet_transaction_input_gwei"),totalPrice:Ct?o.default.createElement(rr,{style:{color:Ke?"var(--okd-color-semantic-notice)":null},text:Ct,maxWidth:"120px"}):"",renderWarning:g=>!g&&Ke?o.default.createElement(fr,{className:X.customGasFeeWarningFold}):null,estimatedTime:Kr,onClick:()=>{lt(i.CUSTOM)},canConfirm:Nt,onConfirm:()=>{var R;Ae(i.CUSTOM),f==null||f();let g=$(fe),F=$(Lt),x=$(pe),D=te,K=(R=c==null?void 0:c.data)==null?void 0:R[i.CUSTOM];se.current=!0,_({gasType:i.CUSTOM,maxFeePerGas:F,maxPriorityFeePerGas:x,gasPrice:g,gasLimit:D,isGasLimitLoading:r,isNetworkFeeLoading:he,networkFee:At,supportEip1559:H,gasLimitInfo:G,gasPriceInfo:U,extFee:K,customConfirmed:se.current}),Oe.current=fe,ke.current=oe,We.current=pe,je.current=te}};if((0,o.useEffect)(()=>{lt(O)},[m]),(0,o.useEffect)(()=>{var ne,ce,me;if(O===i.CUSTOM)return;let g,F,x,D,K,R=j;O===i.SLOW?(x=Y,g=Y,F=ge,K=Ir,D=(ne=c==null?void 0:c.data)==null?void 0:ne[i.SLOW]):O===i.STANDARD?(x=I,g=I,F=we,K=Zr,D=(ce=c==null?void 0:c.data)==null?void 0:ce[i.STANDARD]):O===i.FAST&&(x=Z,g=Z,F=Se,K=Dt,D=(me=c==null?void 0:c.data)==null?void 0:me[i.FAST]),_({gasType:O,maxFeePerGas:g,maxPriorityFeePerGas:F,gasPrice:x,gasLimit:R,isGasLimitLoading:r,isNetworkFeeLoading:he,networkFee:K,supportEip1559:H,gasLimitInfo:G,gasPriceInfo:U,extFee:D})},[O,Y,I,Z,G,r,he,_]),(0,o.useEffect)(()=>{var g,F;if(O===i.CUSTOM&&!m){let x=je.current;typeof x=="string"&&V(x,G==null?void 0:G.minGasLimit)&&(x=G==null?void 0:G.minGasLimit,ut(G==null?void 0:G.minGasLimit),je.current=G==null?void 0:G.minGasLimit);let D=$(Oe.current||at||yt[O]),K=$(ke.current||Ce||Tt[O]),R=$(We.current||st||_t[O]),ne=E(K,R),ce=typeof x=="string"?x:j,me=(g=c==null?void 0:c.data)==null?void 0:g[i.CUSTOM],Be=E(S((H?ne:D)||0,ce),(F=c==null?void 0:c.data)==null?void 0:F[i.CUSTOM]);_({gasType:O,maxFeePerGas:ne,maxPriorityFeePerGas:R,gasPrice:D,gasLimit:ce,isGasLimitLoading:r,isNetworkFeeLoading:he,networkFee:Be,supportEip1559:H,gasLimitInfo:G,gasPriceInfo:U,extFee:me,customConfirmed:se.current})}},[G,U,c]),(0,o.useEffect)(()=>{typeof C=="function"&&C({signInfo:e})},[e]),!m)return null;let qe=()=>o.default.createElement("span",{className:X.customGWei},y("extension_wallet_transaction_input_gwei"));return o.default.createElement(tr,{feeType:De,feeDataList:jr,onBack:d,onClose:T,custom:{...qr,components:()=>o.default.createElement(o.default.Fragment,null,H?o.default.createElement(o.default.Fragment,null,o.default.createElement(v.Number,{className:X.customInput,size:v.SIZE.sm,title:o.default.createElement("div",{className:"network-fee--refresh-animation"},y("extension_wallet_transaction_text_maxbase_fee"),o.default.createElement("span",{className:X.customInputSubTitle},y("extension_wallet_transaction_text_current",{number:re.ceilShort(Ze,2)}))),value:oe,error:gt,errorType:v.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:Gr,max:1e7,tips:wt&&o.default.createElement("div",{className:X.maxBaseFeeWarning},wt),suffix:qe()}),o.default.createElement(v.Number,{className:X.customInput,size:v.SIZE.sm,title:y("extension_wallet_transaction_text_priority_fee"),value:pe,error:St,errorType:v.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:xr,max:1e7,suffix:qe()})):o.default.createElement(v.Number,{className:X.customInput,size:v.SIZE.sm,title:o.default.createElement(o.default.Fragment,null,y("wallet_transfer_gasfee_subtitle_gas_price"),o.default.createElement("span",{className:X.customInputSubTitle},y("extension_wallet_transaction_input_gwei"))),value:fe,error:Et,errorType:v.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:dr,max:1e7,suffix:qe()}),o.default.createElement(v.Number,{size:v.SIZE.sm,title:y("wallet_transfer_gasfee_subtitle_custom_gas_limit"),value:te,error:Mt,errorType:v.TIP_TYPE.always,enableMinus:!1,onChange:ut,max:15e6,min:0,precision:0}),Ke&&o.default.createElement(fr,{className:X.customGasFeeWarning}))}})};function it(s){let{coinId:e,address:t,inputData:r,tokenAddress:m,value:P,gasLimitOptions:u,initialGasData:a,onDappGasIllegal:n}=s,[p,L]=(0,o.useState)(a),[M,d]=(0,o.useState)((a==null?void 0:a.initialGasType)!==i.CUSTOM),[T,_]=sr({coinId:e,address:t}),[N,h,l]=ar({address:t,inputData:r,tokenAddress:m,coinId:e,value:P},{wait:200,...u}),C=T||l;return(0,o.useEffect)(()=>{var Te;if(C)return;let f={...a||{}},{initialGasType:A,initialCustomMaxBaseFee:z,initialCustomMaxPriorityFee:y,initialCustomGasPrice:se,initialCustomGasLimit:B}=f,{min:ae,safePriorityFee:xe,supportEip1559:de}=((Te=_==null?void 0:_.info)==null?void 0:Te.gasPrice)||ze,{gasLimit:ye}=N||{};if(A===i.CUSTOM){let _e=V(B,ye);_e&&(f.initialCustomGasLimit=ye);let Le=de&&(V(y,xe)||V(E(z,y),ae)),Ce=!de&&V(se,ae);(_e||Le||Ce)&&(f.initialCustomMaxPriorityFee=null,f.initialCustomMaxBaseFee=null,f.initialCustomGasPrice=null,f.initialGasType=i.STANDARD,n==null||n(!0)),L(f)}d(!0)},[C]),M?o.default.createElement(ti,{...s,initialGasData:p,isSignInfoLoading:T,signInfo:_,initialGasLimitInfo:N,isGasLimitLoading:h,onGasTypeManualChange:()=>{n==null||n(!1)}}):null}it.propTypes={visible:w.default.bool,address:w.default.string,inputData:w.default.string,tokenAddress:w.default.string,coinId:w.default.oneOfType([w.default.string,w.default.number]),value:w.default.string,initialGasData:w.default.shape({initialGasType:w.default.string,initialCustomMaxBaseFee:w.default.string,initialCustomMaxPriorityFee:w.default.string,initialCustomGasPrice:w.default.string,initialCustomGasLimit:w.default.string}),gasLimitOptions:w.default.object,estimatedL1FeeOptions:w.default.object,onBack:w.default.func,onClose:w.default.func,onGasChange:w.default.func,onServerDataChange:w.default.func,minimumGasLimit:w.default.string};it.defaultProps={visible:!1,address:"",inputData:"",tokenAddress:"",coinId:"",value:"0",initialGasData:{initialGasType:i.STANDARD,initialCustomMaxBaseFee:"0",initialCustomMaxPriorityFee:void 0,initialCustomGasPrice:"0",initialCustomGasLimit:"0"},gasLimitOptions:{},estimatedL1FeeOptions:{},onBack:()=>{},onClose:()=>{},onGasChange:()=>{},onServerDataChange:()=>{},minimumGasLimit:"0"};var ji=(0,o.memo)(it);q();J();be();var Ri=(s,e)=>{let t=s.find(r=>(r==null?void 0:r.checkType)===e);return t?!(t!=null&&t.result):!1},es=(s,e,t)=>{let r=s.find(m=>(m==null?void 0:m.checkType)===Fe.OVERWRITTEN)||{};return r.toastType===Ne.FAILED?e():r.toastType===Ne.PENDING?t():s},ts=(s=[])=>{let e={hasFailedTx:!1,hasPendingTx:!1,nonce:0,newNonce:0,originGasPrice:"0",originPriorityFee:"0"},t=s.find(r=>(r==null?void 0:r.checkType)===Fe.OVERWRITTEN)||{};return e.nonce=t.nonce,e.newNonce=t.newNonce,e.originGasPrice=S(t==null?void 0:t.gasPrice,1.1),e.originPriorityFee=S(t==null?void 0:t.originPriorityFee,1.1),t.toastType===Ne.FAILED?e.hasFailedTx=!0:t.toastType===Ne.PENDING&&(e.hasPendingTx=!0),e},rs=(s,e,t)=>{let{userGasInfo:r,serverGasInfo:m,originTxGasInfo:P}=e,{originGasPrice:u,originPriorityFee:a}=P,{supportEip1559:n}=r;if(n){let d=!1,{maxFeePerGas:T,maxPriorityFeePerGas:_}=r,{normal:N,proposePriorityFee:h}=m,l=u,C=a,f=ee([T,N,l]);le(f,T)||(d=!0);let A=ee([_,h,C]),z="0";return le(A,_)||(z=Q(A,_),d=!0),d?t({maxFeePerGas:E(f,z),maxPriorityFeePerGas:A}):s}let{gasPrice:p}=r,{normal:L}=m,M=ee([p,L,u]);return le(M,p)?s:t({gasPrice:M})},is=({userGasInfo:s,serverGasInfo:e,originTxGasInfo:t})=>{let{originGasPrice:r,originPriorityFee:m}=t,{supportEip1559:P}=s;if(P){let p=!1,{maxFeePerGas:L,maxPriorityFeePerGas:M}=s,{normal:d,proposePriorityFee:T}=e,_=r,N=m,h=ee([L,d,_]);le(h,L)||(p=!0);let l=ee([M,T,N]),C="0";if(le(l,M)||(C=Q(l,M),p=!0),p)return{maxFeePerGas:$e(E(h,C),0),maxPriorityFeePerGas:$e(l,0)}}let{gasPrice:u}=s,{normal:a}=e,n=ee([u,a,r]);return le(n,u)?{}:{gasPrice:$e(n,0)}},ss=(s,e,t)=>{let{userGasInfo:r,updateGasInfo:m,baseCoinAmountAvailable:P}=e,{supportEip1559:u,gasLimit:a}=r;if(u){let{maxFeePerGas:p}=m;return k(S(p,a),P)?t():s}let{gasPrice:n}=m;return k(S(n,a),P)?t():s},as=({userGasInfo:s,updateGasInfo:e,baseCoinAmountAvailable:t,L1FEE:r})=>{let{supportEip1559:m,gasLimit:P}=s;if(m){let{maxFeePerGas:a}=e;return!!k(E(S(a,P),r),t)}let{gasPrice:u}=e;return!!k(E(S(u,P),r),t)};q();J();var ms={ON_CHAIN:0,NEW:1},us="UserReject";export{cr as a,ci as b,mi as c,ji as d,Ri as e,es as f,ts as g,rs as h,is as i,ss as j,as as k,ms as l,us as m};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-HR4SA7Z5.js.map
