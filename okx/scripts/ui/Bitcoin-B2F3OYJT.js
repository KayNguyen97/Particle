import{a as Ye}from"./chunk-UPDAD43L.js";import{a as Ue}from"./chunk-WGSAQS5P.js";import{a as Oe}from"./chunk-I4A7V6SN.js";import{a as We}from"./chunk-KQ6VNFYE.js";import{a as Re}from"./chunk-KOSLQKT7.js";import{a as be}from"./chunk-26PWDO73.js";import{g as Fe,j as Le,k as ke,l as Me,m as De,n as ve}from"./chunk-YUPFXNBJ.js";import"./chunk-TEHLR7K7.js";import"./chunk-2N4YHUFI.js";import{a as po,b as uo}from"./chunk-WB3OW5ND.js";import{a as Pe}from"./chunk-OYUD7NPL.js";import"./chunk-VEYNKMNX.js";import{a as co}from"./chunk-5RXQBXEZ.js";import"./chunk-6HDV4AIS.js";import"./chunk-HHT2ACSL.js";import{d as he}from"./chunk-IB4K3FN6.js";import"./chunk-NLMSL6KB.js";import{a as qt}from"./chunk-NC54FPSJ.js";import{a as mo,b as lo}from"./chunk-MHASEPVA.js";import"./chunk-ZGEQVSMJ.js";import"./chunk-5OUYE6NE.js";import{a as Lt,e as so,h as Ne,i as we,j as io,l as ao,o as Se,p as Ae,q as Be}from"./chunk-DPVVGFWQ.js";import"./chunk-67PEY2GN.js";import"./chunk-JVE4G6JP.js";import{b as no,d as Ee}from"./chunk-VNHZZRMI.js";import"./chunk-5TSD6WDE.js";import{a as Ie}from"./chunk-TPBDSGSX.js";import"./chunk-K24OHEUM.js";import{a as Gt}from"./chunk-I2KPNTIF.js";import"./chunk-MEW6SUUR.js";import{b as K}from"./chunk-D6O2GLPR.js";import{a as Wt,b as Do,c as q}from"./chunk-2CPFAAZ7.js";import"./chunk-ZG26PGPF.js";import"./chunk-HE77KLJ4.js";import"./chunk-NOZM7AA3.js";import"./chunk-73YQ4YAD.js";import"./chunk-OEVJ7FDO.js";import"./chunk-ATUBFYS2.js";import"./chunk-2N2ADYFP.js";import"./chunk-YLO74Q7W.js";import{a as Yt}from"./chunk-D54UDGZS.js";import"./chunk-2SGW2RXR.js";import"./chunk-ZXEHJOAD.js";import"./chunk-U3YDJ2W7.js";import"./chunk-VCWU5FEX.js";import"./chunk-KZ77CGYD.js";import"./chunk-RDZIVMHO.js";import"./chunk-E73QHIZ6.js";import{c as St,f as ge}from"./chunk-E2KMZQ6K.js";import"./chunk-JXT6JCNO.js";import"./chunk-AHAXQBXQ.js";import"./chunk-DUZ4ULSN.js";import"./chunk-PGPPXRV7.js";import"./chunk-54GDJWA6.js";import"./chunk-UGYRJNZG.js";import"./chunk-PLVZLQPX.js";import"./chunk-QNVM7T5C.js";import"./chunk-7T7NBYQH.js";import"./chunk-FEET7RP6.js";import"./chunk-MBJ4MFYL.js";import"./chunk-PCY622ND.js";import"./chunk-NS35PZCP.js";import"./chunk-XOD56IFT.js";import"./chunk-BBN3UGKM.js";import{c as ro}from"./chunk-5DEIKYJL.js";import"./chunk-QMNAWRVI.js";import"./chunk-D6ZXZUY6.js";import"./chunk-QMF5LKVF.js";import"./chunk-VMACN7YR.js";import"./chunk-IQVVVGEA.js";import{a as ue}from"./chunk-Y7TCBFVM.js";import"./chunk-JLLMIXPD.js";import"./chunk-C3KORCEI.js";import{b as fe}from"./chunk-D5VZXMFP.js";import"./chunk-XAMN4IIH.js";import"./chunk-BTS2GOAC.js";import"./chunk-DCUBXXOY.js";import{c as Te,d as Ft,e as W}from"./chunk-2HWABU7H.js";import"./chunk-APEQZGKB.js";import"./chunk-2NIR645O.js";import"./chunk-AX4SXHC6.js";import"./chunk-UCS37WXR.js";import"./chunk-DUHXKIBS.js";import{b as tt}from"./chunk-QNEJI55N.js";import{h as _e}from"./chunk-5W7SRP5N.js";import"./chunk-YVRXETFX.js";import{r as X,s as ot}from"./chunk-GUWGENNL.js";import{a as Mo}from"./chunk-WYB2CUAN.js";import"./chunk-B2BOSVTW.js";import"./chunk-GUJXW3GJ.js";import"./chunk-VIS7KIVI.js";import"./chunk-F64VYES3.js";import"./chunk-DHX2X277.js";import{b as Ce}from"./chunk-67YO4IPY.js";import"./chunk-DLUAVD7X.js";import"./chunk-WRWXCAEZ.js";import"./chunk-OZ6XSJY6.js";import"./chunk-DMJQUOJT.js";import{k as ye}from"./chunk-MTMZQEHP.js";import"./chunk-NKTQMEXG.js";import{l as Ot,m as Ut}from"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import"./chunk-4OTZHHYZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import"./chunk-S3ECGMEP.js";import"./chunk-PX7HII6H.js";import"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import"./chunk-TPEASXIF.js";import{a as wt}from"./chunk-JSAFBAMQ.js";import"./chunk-A336VZZF.js";import{b as Q}from"./chunk-XEOGXIVD.js";import{a as Rt}from"./chunk-PCGRDRHF.js";import{a as me,p as M}from"./chunk-IU3TYIWS.js";import{A as xe,a as Br,b as ko,d as eo,l as de,o as Nt}from"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import{b as to,c as oo,e as bo,p as ne,q as se}from"./chunk-X2LENRE7.js";import{a as Et}from"./chunk-O4EDZSHP.js";import"./chunk-HU3KBV5G.js";import{b as Dt}from"./chunk-6ZPGW3YM.js";import{k as Lo,o as Pr}from"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import{d as Ko,f as Nr}from"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import"./chunk-FLCN6MAI.js";import"./chunk-YMZEQGAL.js";import"./chunk-7E3KY4EN.js";import{e as ie,g as ae}from"./chunk-JIRWXBHS.js";import"./chunk-3TVEFIPW.js";import{B as j,P as It,_ as bt,b as F,c as ce,i as pe}from"./chunk-UXFKODVN.js";import"./chunk-IMRS4RGO.js";import"./chunk-52GWQSZH.js";import{a as Fo}from"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import{i as ht,p as vt,t as le}from"./chunk-RMQJRDTF.js";import{c as y}from"./chunk-2YLR7R2N.js";import{a as re,b as Ar}from"./chunk-MVLY6WUP.js";import{c as ee,h as wr}from"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{C as nt,I as Jo,J as Qo,Pa as Bo,Ta as Qt,Vb as Sr,ma as _t,mb as jt,na as te,oa as oe,q as h,rb as Po,sb as ho,v as s}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{G as Zo,H as Vo,N as Ao,O as jo,U as Xo,b as Pt,o as Ho,p as So,y as $o}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{P as zo,V as Vt,c as qo}from"./chunk-C2H3SRET.js";import{a as G}from"./chunk-V4YVDLI4.js";import"./chunk-UXBKFN2U.js";import"./chunk-HCW4K7TR.js";import"./chunk-Z4JATHZR.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import"./chunk-IYYFWVWL.js";import"./chunk-KTHMEYYS.js";import"./chunk-GT57MMCB.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import"./chunk-RYNAOZ73.js";import"./chunk-PR4SLUV4.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f as w,m as a,n as P,o as m}from"./chunk-6V2G2Z5W.js";a();m();var xt=w(G());a();m();var _o=w(G());nt();a();m();var Ge=({unapproved:t})=>_o.default.createElement(y.Container,null,_o.default.createElement(wt,{title:s("wallet_trade_maintitle_transaction_confirm"),backable:!1,closeable:!1}),_o.default.createElement(be,{unapproved:t}));a();m();var E=w(G());nt();Bo();Nr();var qe=w(Dt());var hr=({unapproved:t})=>{let o=_t,e=(0,qe.useDispatch)(),r=t.walletId,i=t.params.transaction.from,n=Ut(r),l=t.params.transaction.amount||2,p=no({coinId:o,address:i}),g=p==null?void 0:p.transferReminder,_=p==null?void 0:p.dummyOutput,[x,I]=(0,E.useState)({level:It.STANDARD,satBytes:p==null?void 0:p.normal}),f=x==null?void 0:x.satBytes;(0,E.useEffect)(()=>{var H;if(!f&&(p==null?void 0:p.normal)&&I({level:It.STANDARD,satBytes:p==null?void 0:p.normal}),f&&(x==null?void 0:x.level)!==It.CUSTOM){let pt=p[(H=mo[x==null?void 0:x.level])==null?void 0:H.satBytes];I({...x,satBytes:pt})}},[p]);let[T,{toggle:c}]=Nt(!1),[A,{set:B}]=Nt(!1),[N,{set:S}]=Nt(!1),[u,D]=(0,E.useState)(),[st,v]=io({coinId:o,walletId:r,address:i,batchDummyNum:l,utxoType:Lt.SPLIT_UTXO}),[U,Z,z]=we({coinId:o,walletId:r,address:i,networkFee:u,utxoType:Lt.SPLIT_UTXO,batchDummyNum:l,coinAmount:h.mul(_,l)},{ready:!!_}),O=(0,E.useMemo)(()=>Z.findIndex(({dummy:H})=>H!==!0),[Z]),V=(0,E.useMemo)(()=>O===-1?[]:Z.slice(O),[O,Z]),it=(0,E.useMemo)(()=>O===-1?0:Math.max(l-O,0),[l,O]),lt=h.gt(it,0),Tt=h.mul(_,it),Ct=Se({coinId:o,fromAddr:i,satBytes:f}),Bt=(0,E.useCallback)(async()=>{try{if(!f)return;B(!0);let H=await Ct({inputs:V,outputs:Array.from({length:it}).map(()=>({address:i,amount:_}))});S(!1),D(H)}catch{S(!0)}finally{B(!1)}},[_,Ct,i,V,it,f,S,B]);(0,E.useEffect)(()=>{Bt()},[Bt]);let R=(0,E.useMemo)(()=>v===void 0||!u?!0:h.gt(v,u),[v,u]),rt=(0,E.useMemo)(()=>n?{type:K.TIP_TYPE.COMMON_ERROR,message:s("wallet_extension_top_toast_dapp_comingsoon")}:N?{type:K.TIP_TYPE.FEE_ERROR}:R?{type:Pt.TYPE.warn,message:g}:{coinId:o,type:K.TIP_TYPE.FEE_BALANCE_INSUFFICIENT},[o,N,n,R,g]),ct=St(o),Mt=Ee({coinId:o,walletId:r,coinAmount:0,fromAddr:i,toAddr:i,localType:ct==null?void 0:ct.localType,networkFee:u,extJson:JSON.stringify({}),txSource:ht.DAPP,txType:F.BTC_SPLIT_UTXO}),yt=ao({coinId:o,txType:F.BTC_SPLIT_UTXO,address:i}),J=Ot(r),[mt,gt]=(0,E.useState)(!1),$t=(0,E.useCallback)(async()=>{await e(X(t.id)),await e(tt()),gt(!1)},[e,t.id]),Zt=(0,E.useCallback)(async()=>{if(lt)try{if(!await Yt({walletId:r,callback:async()=>{await e(X(t.id))}}))return;await yt(V),gt(!0);let{signed:pt,utxos:Kt}=await Ko().splitUtxo({splitAmount:it,inputs:so(V),amount:_,feePerB:x.satBytes},i,r);await Mt(pt);let Eo=Z.filter($=>$.dummy),No=[...so(Eo),...Kt.map($=>({...$,rawTransaction:pt}))];await e(ot(t.id,{utxos:No}))}catch(H){console.log(H)}finally{gt(!1)}else{let H=Z.slice(0,l);await e(ot(t.id,{utxos:so(H)}))}},[l,e,_,Z,i,lt,V,Mt,it,x.satBytes,t.id,yt,r]),Io=(0,E.useMemo)(()=>{let H={actionType:q.ACTION_TYPE.CANCEL,btnText:s("wallet_dapp_connection_btn_reject"),onClick:$t},pt={actionType:q.ACTION_TYPE.CONFIRM,disabled:st||A||U||N||z||!Number(u)||n,onClick:Zt};return R||(pt={coinId:o,walletId:r,address:i,actionType:q.ACTION_TYPE.FILL_UP}),[H,pt]},[o,u,N,A,i,n,R,st,$t,Zt,z,U,r]);return E.default.createElement(y.Container,null,E.default.createElement(wt,{backable:!1,closeable:!1,title:s("wallet_extension_send_title_send")}),E.default.createElement(W,null,E.default.createElement(Wt,{title:s("wallet_extension_send_colored_send"),summaryList:[{coinId:o,coinAmount:Tt}]})),E.default.createElement(W,null,E.default.createElement(Ft,{walletId:r,address:i,title:s("wallet_extension_network_address_title_walletused")},!!v&&E.default.createElement(po,{coinBalance:v,tooltip:s("extension_defi_bot_popuptext_avail_amount")}))),E.default.createElement(W,{bordered:!1},E.default.createElement(Gt,{coinId:o,loading:A,feeError:N,networkFee:u,onClick:c})),E.default.createElement(Rt,{placeholder:!0,offsetBottom:0,borderTop:!0},E.default.createElement(K,{coinId:o,...rt}),E.default.createElement(q,{buttonGroup:Io})),E.default.createElement(lo,{coinId:o,visible:T,signInfo:p,value:x,estimatedFee:u,onChange:I,onToggleVisible:c}),E.default.createElement(uo,{visible:J&&mt}))},ze=hr;a();m();var He=w(G());var $e=({unapproved:t})=>{var r;let o=(r=t.params)==null?void 0:r.message,e=Ye({unapproved:t});return He.default.createElement(Re,{needCheckMpc:!0,message:o,unapproved:t,tipMessage:e})};a();m();var at=w(G()),Ze=w(Dt()),Ve=w(Fo());Po();a();m();var kt={AMOUNT:1,CONFIRM:2};var vo=kt.AMOUNT;function br({unapproved:t}){var D;let{from:o,type:e=F.BRC20_INSCRIBE,tick:r="",tid:i,amount:n,txSource:l=ht.DAPP}=((D=t==null?void 0:t.params)==null?void 0:D.transaction)||{},[p,g]=(0,at.useState)(vo),_=(0,Ze.useDispatch)(),x=(0,Ve.useHistory)(),I=ro({localType:Qt}),f=+(I==null?void 0:I.netWorkId),T=eo(()=>e===F.BRC20_INSCRIBE?{chainId:f,coinType:to,symbol:r}:e===F.BRC30_INSCRIBE?{chainId:f,coinType:oo,address:`btc-brc20s-${i}`}:null,[e,i,r,f]),c=St(void 0,{},T),A=c==null?void 0:c.coinId,B=(0,at.useCallback)(async()=>{await _(X(t.id)),await _(tt()),x.push(Et)},[_,x,t.id]),N=(0,at.useCallback)(()=>{g(kt.CONFIRM),vo=kt.CONFIRM},[]),S=(0,at.useCallback)(async({txIds:st,commitTx:v,revealTxs:U})=>{await _(ot(t.id,{txIds:st,commitTx:v,revealTxs:U})),await _(tt()),x.push(Et)},[_,x,t.id]),u=(0,at.useCallback)(()=>{g(kt.AMOUNT),vo=kt.AMOUNT},[]);return at.default.createElement(Fe,{fromAddress:o,coinId:A},p===kt.AMOUNT?at.default.createElement(De,{amount:n,walletId:t.walletId,onCancel:B,onConfirm:N,headerProps:{closeable:!1,backable:!1}}):at.default.createElement(ve,{txSource:l,onCancel:B,onConfirm:S,walletId:t.walletId,headerProps:{onBack:u,closeable:!1,backable:!0}}))}var je=br;a();m();var d=w(G());Bo();nt();var lr=w(Dt()),cr=w(Fo());a();m();var Y=w(G()),Xe=w(qo());nt();a();m();var et={main:"_main_asg9r_1",title:"_title_asg9r_8",scrollArea:"_scrollArea_asg9r_17",item:"_item_asg9r_22",subTitle:"_subTitle_asg9r_25",content:"_content_asg9r_32",loading:"_loading_asg9r_38",arrow:"_arrow_asg9r_43",icon:"_icon_asg9r_48"};function Fr({psbts:t=[],loading:o,onClick:e}){let r=(0,Y.useCallback)(n=>{e(n)},[e]),i=()=>o?Y.default.createElement("div",{className:et.scrollArea},Y.default.createElement("div",{className:et.loading},Y.default.createElement(zo.Circle,null))):t.length===0?Y.default.createElement($o.State,{className:et.empty}):Y.default.createElement("div",{className:et.scrollArea},(t||[]).map((n,l)=>Y.default.createElement(y.FlexBox,{className:et.item,align:y.ALIGN.center,key:n,onClick:()=>{r(l)}},Y.default.createElement(y.FlexBox,{className:et.content,direction:y.DIRECTION.vertical},Y.default.createElement("div",{className:et.subTitle},s("wallet_extension_asset_transaction_confirmation",{amount:Mo(l+1)})),Y.default.createElement("div",{className:et.content},se(n))),Y.default.createElement("div",{className:et.arrow},Y.default.createElement(Q,{className:(0,Xe.default)("okx-wallet-plugin-arrow-small-right",et.icon)})))));return Y.default.createElement(y.FlexBox,{className:et.main},Y.default.createElement("div",{className:et.title},s("",{number:Mo(t.length)})),i())}var Ke=(0,Y.memo)(Fr);a();m();var Oo=w(G());a();m();function Je(t=[]){if(!Array.isArray(t))throw new Error("assetChange should be an array");return t.map(o=>{let{direction:e,amount:r,usdAmount:i,symbol:n,logo:l}=o;return{operator:e===1?"+":"-",usdValue:i,rawValue:r,asset:{assetType:Ie.NATIVE,amount:r,symbol:n,imageUrl:l}}})}var Lr=({address:t,hexStringList:o=[],chainIndex:e=0},r={})=>{let i=o==null?void 0:o.toString(),n={ready:e!==void 0&&!!(o!=null&&o.length),refreshDeps:[t,i,e],...r},{loading:l,data:p,error:g}=de(async()=>(await ye({address:t,hexStringList:o,chainIndex:e})).data,n);return{loading:l,data:p,error:g}},kr=t=>(0,Oo.useMemo)(()=>!t||!t.length?[]:t.map(o=>{let{assetChange:e=[]}=o;return{status:o.analysisStatus,gasFee:(o==null?void 0:o.gasFee)||0,exploreUrl:o==null?void 0:o.exploreUrl,inputInfo:(o==null?void 0:o.inputInfo)||[],outputInfo:(o==null?void 0:o.outputInfo)||[],assetChange:Je(e)}}),[t]),Mr=(t=[])=>(0,Oo.useMemo)(()=>!t||!t.length?null:t.some(e=>e.status>0)?bt.EXECUTE_ERROR:null,[t]);function Qe(t={},o={}){let{loading:e,data:r,error:i}=Lr(t,o),{utxoAllInfos:n}=r||{},l=kr(n),p=Mr(l);return{loading:e,error:i||p,data:l}}a();m();var C=w(G()),Ht=w(qo());nt();a();m();var zt=w(G());var or=w(Br());nt();a();m();var tr={address:"_address_11ipy_1"};function Uo({children:t,addresses:o=[],exploreUrl:e=""}){let r=o[0],i=ko(()=>{(0,or.default)(r),Zo.success({title:s("wallet_receive_toast_address_copied"),desc:""})},[r]),n=ko(()=>{e&&globalThis.platform.openTab({url:`${e}${r}`})},[r,e]);return o.length>1?t:zt.default.createElement(So.WhiteBoard,{rebirthPopper:!0,popupStyle:{marginLeft:16,marginRight:16,padding:12,borderRadius:8},content:zt.default.createElement(y.FlexBox,{align:y.ALIGN.center,justify:"center"},zt.default.createElement(M.Text,{forceWrap:!0,size:M.SIZE.sm,className:tr.address},r),zt.default.createElement(Q,{size:Q.SIZE.xs,icon:"okds-copy",onClick:i,style:{marginLeft:8}}),zt.default.createElement(Q,{size:Q.SIZE.sm,icon:"okx-wallet-plugin-open-link",onClick:n,style:{marginLeft:8}})),trigger:So.TRIGGER.hover},t)}a();m();function Ro(t){return t===le.XRC_NFT}a();m();var L={content:"_content_1i550_1",none:"_none_1i550_4",title:"_title_1i550_10",input:"_input_1i550_15",utxoContainer:"_utxoContainer_1i550_18",isCurrentAddr:"_isCurrentAddr_1i550_18",signTag:"_signTag_1i550_18",addrContainer:"_addrContainer_1i550_24",address:"_address_1i550_29",amount:"_amount_1i550_38",xrcAssetsContainer:"_xrcAssetsContainer_1i550_50",xrcAssetsTitle:"_xrcAssetsTitle_1i550_56",xrcAssetContainer:"_xrcAssetContainer_1i550_62",logo:"_logo_1i550_65",isNFT:"_isNFT_1i550_72",isNft:"_isNFT_1i550_72",amountText:"_amountText_1i550_75",protocol:"_protocol_1i550_78",moreXRCContainer:"_moreXRCContainer_1i550_85",moreXrcContainer:"_moreXRCContainer_1i550_85",showMoreTitle:"_showMoreTitle_1i550_89",moreAssetsLogos:"_moreAssetsLogos_1i550_95",moreAssetsLogo:"_moreAssetsLogo_1i550_95",expandContainer:"_expandContainer_1i550_106",expandContainer_title:"_expandContainer_title_1i550_110",expandContainerTitle:"_expandContainer_title_1i550_110",expandContainer_leftTotal:"_expandContainer_leftTotal_1i550_116",expandContainerLeftTotal:"_expandContainer_leftTotal_1i550_116",expandContainer_icon:"_expandContainer_icon_1i550_123",expandContainerIcon:"_expandContainer_icon_1i550_123"};var Wo="inputInfo",er="outputInfo",fo={xrcAsset:10,utxo:50},Dr=({coinId:t,data:o={},currentAddr:e})=>{let[r,i]=(0,C.useState)({}),[,n]=ge(t,{withPrice:!0}),l=(0,C.useMemo)(()=>[Wo,er].map(T=>{let c=o[T]||[],A=r[T]||!1;return c.map((B,N)=>{let S=r[`${T}-${N}`]||!1,u=B.xrcAssets||[];return B.xrcToShow=S?u:u.slice(0,fo.xrcAsset),B.moreXRC=u.slice(fo.xrcAsset),B}),{key:T,exploreUrl:o.exploreUrl,allData:c,dataToShow:A?c:c.slice(0,fo.utxo),moreData:c.slice(fo.utxo)}}),[o,r]),p=(0,C.useCallback)((f=[])=>f.reduce((T,{amount:c})=>h.add(T,c),0),[]),g=(0,C.useCallback)(f=>{switch(f){case Wo:return s("wallet_extension_asset_input_inputs_num",{amount:l[0].allData.length});case er:return s("wallet_extension_asset_outputs",{amount:l[1].allData.length});default:return""}},[l]),_=(0,C.useCallback)(f=>{i(T=>({...T,[f]:!0}))},[]),x=f=>{let{protocolType:T}=f||{};return Ro(T)?f.logo||ae:f.logo||ie},I=C.default.memo(({xrcAssets:f=[]})=>C.default.createElement(y.FlexBox,{align:y.ALIGN.center,className:L.moreAssetsLogos},f.slice(0,3).map(T=>C.default.createElement("img",{className:L.moreAssetsLogo,src:T.logo||"",alt:T.symbol}))));return C.default.createElement(co,{copyable:!1,title:s("wallet_extension_asset_btn_transaction_details")},l.map(f=>C.default.createElement("div",{className:(0,Ht.default)(L.content,f.key===Wo?L.input:"",f.dataToShow.length===0?L.none:"")},C.default.createElement("div",{className:(0,Ht.default)(L.title)},g(f.key)),f.dataToShow.map((T,c)=>C.default.createElement(C.default.Fragment,null,C.default.createElement(y.FlexBox,{align:y.ALIGN.center,justify:"space-between",className:(0,Ht.default)(L.utxoContainer,e===T.address[0]?L.isCurrentAddr:"")},C.default.createElement("div",{className:(0,Ht.default)(L.addrContainer)},C.default.createElement(Uo,{addresses:T.address,exploreUrl:f.exploreUrl},C.default.createElement("div",{className:L.address},T.address.length>1?s("wallet_extension_asset_title_multisig"):ne(T.address[0]))),C.default.createElement(Xo,{className:L.signTag,size:Ao.SIZE.sm},s("wallet_extension_asset_tag_sign"))),C.default.createElement("div",{className:L.amount},C.default.createElement(M.DisplayAmount,{noStyle:!0,amount:T.amount,mode:M.CRYPTO,symbol:n==null?void 0:n.symbol,decimals:n==null?void 0:n.decimals}))),T.xrcToShow.length>0&&C.default.createElement("div",{className:L.xrcAssetsContainer},C.default.createElement(M.Text,{size:M.SIZE.xs,className:L.xrcAssetsTitle},s("wallet_extension_asset_include_asset")),T.xrcToShow.map(A=>C.default.createElement(y.FlexBox,{align:y.ALIGN.center,className:L.xrcAssetContainer},C.default.createElement("img",{className:(0,Ht.default)(L.logo,Ro(A.protocolType)?L.isNFT:""),src:x(A),alt:A.symbol}),C.default.createElement(M.Text,{nowrap:!0,size:M.SIZE.xs,ellipsis:{tooltip:!0},className:L.amountText},`${A.amount} ${A.symbol}`),C.default.createElement(jo,{className:L.protocol,size:Ao.SIZE.sm},A.protocolName))),T.moreXRC.length>0&&!r[`${f.key}-${c}`]?C.default.createElement(y.FlexBox,{align:y.ALIGN.center,onClick:()=>{_(`${f.key}-${c}`)},className:L.moreXRCContainer},C.default.createElement(I,{xrcAssets:T.moreXRC}),C.default.createElement("div",{className:L.showMoreTitle},s("wallet_extension_asset_btn_show_num_asset",{amount:h.thousandFormat(T.moreXRC.length)})),C.default.createElement(Q,{icon:"okds-arrow-chevron-down-md",size:Q.SIZE.xs})):null))),f.moreData.length>0&&!r[f.key]?C.default.createElement("div",{className:L.expandContainer,onClick:()=>{_(f.key)}},C.default.createElement(y.FlexBox,{align:y.ALIGN.center,justify:"space-between"},C.default.createElement("div",{className:L.expandContainer_title},s("wallet_extension_asset_more_amount_inputs",{amount:h.thousandFormat(f.moreData.length)})),C.default.createElement(y.FlexBox,null,C.default.createElement("div",{className:L.expandContainer_leftTotal},C.default.createElement(M.DisplayAmount,{noStyle:!0,amount:p(f.moreData),mode:M.CRYPTO,symbol:n==null?void 0:n.symbol,decimals:n==null?void 0:n.decimals})),C.default.createElement(Q,{icon:"okds-arrow-chevron-down-md",size:me.xs,className:L.expandContainer_icon})))):null)))},rr=Dr;a();m();Ar();wr();var xo=w(G()),vr=()=>{let[t,o]=(0,xo.useState)(""),e=async()=>{let{data:r}=await ee(re.getSignPrompt);r.assetReminder?o(r.assetReminder):o(null)};return(0,xo.useEffect)(()=>{e()},[]),{assetReminder:t}},nr=vr;a();m();var sr=w(G());nt();var Or=({onConfirm:t})=>(0,sr.useCallback)(()=>{Ho.warn({title:s("wallet_extension_asset_alertbanner_title_alert"),alignBottom:!1,maskClosable:!1,hideCloseBtn:!0,text:s("wallet_extension_asset_alertbanner_desc_utxo_lost"),confirmBtnProps:{type:Vt.TYPE.outline,size:Vt.SIZE.lg},cancelBtnProps:{type:Vt.TYPE.highlight,size:Vt.SIZE.lg},onConfirm(o){o.destroy(),t()},async onCancel(o){o.destroy()},cancelText:s("commonall_text_btn_cancel"),confirmText:s("wallet_extension_asset_btn_continue")})},[t]),ir=Or;a();m();nt();a();m();var Yo=w(ue());var ar=t=>{try{return Yo.Psbt.fromHex(t).toBase64()}catch{return Yo.Psbt.fromBase64(t),t}};var To=w(ue()),ft={LIST:"list",UNLIST:"unlist",TRADE:"trade",RUNES:"runes"},mr=t=>{var o,e,r,i,n;try{let l=To.Psbt.fromBase64(ar(t)),p=((o=l==null?void 0:l.data)==null?void 0:o.inputs)||[],g=((n=(i=(r=(e=l==null?void 0:l.data)==null?void 0:e.globalMap)==null?void 0:r.unsignedTx)==null?void 0:i.tx)==null?void 0:n.outs)||[],_=[];return p.forEach((x,I)=>{var f,T,c,A,B;if(x.witnessUtxo)_.push({...x,value:x.witnessUtxo.value});else if(x.nonWitnessUtxo){let N=To.Transaction.fromBuffer(x.nonWitnessUtxo),S=((A=(c=(T=(f=l==null?void 0:l.data)==null?void 0:f.globalMap)==null?void 0:T.unsignedTx)==null?void 0:c.tx)==null?void 0:A.ins)||[],u=N.outs[(B=S[I])==null?void 0:B.index],D=u==null?void 0:u.value;_.push({...x,value:D})}}),{inputs:_,outputs:g}}catch{return{inputs:[],outputs:[]}}},At=(t,o=0,e)=>!Array.isArray(t)||e===0?0:t.slice(o,e?o+e:void 0).reduce((r,{value:i})=>h.add(r,i),0);var pr=({unapproved:t})=>{let{psbt:o,psbts:e,type:r,from:i,amount:n=1,psbtOpts:l}=t.params.transaction,{origin:p}=t,g=t.method===j.SIGNPSBTS,_=t==null?void 0:t.walletId,x=t==null?void 0:t.localType,I=_t;x===Jo?I=te:x===Qo&&(I=oe);let f=Ot(_),T=Ut(_),c=qt(_),{loading:A,data:B,error:N}=Qe({address:i,hexStringList:g?e:[o],chainIndex:0}),[S,u]=(0,d.useState)(!1),[D,st]=(0,d.useState)(0),v=(0,d.useMemo)(()=>g&&!S,[g,S]),U=(0,d.useMemo)(()=>B[D]||{},[B,D]),{assetReminder:Z}=nr(),z=r==="list",O=(0,lr.useDispatch)(),V=(0,cr.useHistory)(),it=he(t),{name:lt,icon:Tt,host:Ct}=it,{inputs:Bt,outputs:R}=mr(g?e[D]:o),rt=(0,d.useMemo)(()=>h.sub(At(Bt),At(R)),[Bt,R]),ct=Oe(),Mt=(0,d.useMemo)(()=>{if(r!==ft.TRADE&&r!==ft.RUNES)return null;let $=Number(n);if(r===ft.RUNES){let Jt=At(R,1,$),Er=h.add(At(R,0,1),At(R,R.length-$+1,$-1));return`${h.sub(Er,h.add(Jt,rt))}`}let ut=At(R,$+1,$),wo=At(R,1,$);return`${h.sub(wo,h.add(ut,rt))}`},[n,rt,R,r]),yt=(0,d.useMemo)(()=>f?{type:K.TIP_TYPE.COMMON_ERROR,message:s("extension_wallet_contractual_interaction_wallet_unavailable")}:T?{type:K.TIP_TYPE.COMMON_ERROR,message:s("wallet_extension_top_toast_dapp_comingsoon")}:N?{type:Pt.TYPE.warn,message:s("wallet_extension_asset_alert_trust_network")}:Z&&!(p!=null&&p.includes("okx.com"))?{type:Pt.TYPE.warn,message:Z}:{},[T,f,Z,N,p]),J=(0,d.useCallback)(async()=>{await O(X(t.id)),await O(tt()),V.push(Et)},[O,V,t.id]),mt=(0,d.useCallback)(async()=>{if(!!await Yt({walletId:_,callback:async()=>{await O(X(t.id))}})){try{let ut=await _e(g?e:o,i,_,{localType:x,isPsbts:g},l);await O(ot(t.id,{signedTx:ut}))}catch(ut){await ct({id:t.id,error:(ut==null?void 0:ut.message)||"Error"})}await O(tt()),V.push(Et)}},[V,i,ct,O,g,x,o,l,e,t.id,_]),gt=ir({onConfirm:mt}),$t=(0,d.useMemo)(()=>B.some($=>{let ut=$.inputInfo||[],wo=$.outputInfo||[];return[...ut,...wo].some(Jt=>!!(Jt.xrcAssets&&Jt.xrcAssets.length>1))}),[B]),Zt=(0,d.useCallback)(()=>{if(!$t){mt();return}gt()},[$t,mt,gt]),Io=(0,d.useCallback)($=>{u(!0),st($)},[u]),H=(0,d.useMemo)(()=>[{actionType:q.ACTION_TYPE.CANCEL,btnText:v?s("wallet_extension_asset_btn_cancel_all"):s("wallet_dapp_connection_btn_reject"),onClick:J},{disabled:T||A||yt.type===K.TIP_TYPE.COMMON_ERROR,actionType:q.ACTION_TYPE.CONFIRM,btnText:v?s("wallet_extension_asset_btn_confirm_all"):s("extension_transactions_btn_confirm"),onClick:Zt}],[T,Zt,J,yt,v,A]),pt=(0,d.useMemo)(()=>{switch(r){case ft.LIST:return s("extension_wallet_transfer_maintitle_list");case ft.UNLIST:return s("extension_wallet_transfer_maintitle_cancel_listing");case ft.TRADE:return s("extension_wallet_transfer_maintitle_transaction");default:return s("extension_wallet_transfer_maintitle_transaction")}},[r]),Kt=!z&&(h.gt(U.gasFee,0)||h.gt(rt,0)),Eo=(0,d.useMemo)(()=>!N||N===bt.EXECUTE_ERROR&&U.status!==bt.PSBT_ANALYSIS_FAILED,[N,U]),No=(0,d.useMemo)(()=>N&&N!==bt.EXECUTE_ERROR||(U==null?void 0:U.status)===bt.PSBT_ANALYSIS_FAILED,[N,U]);return d.default.createElement(y.Container,null,d.default.createElement(wt,{title:pt,backable:g&&S,closeable:!1,onBack:()=>{u(!1)}}),v?d.default.createElement("div",null,d.default.createElement(W,null,d.default.createElement(Do,{summaryList:[{title:lt,desc:Ct,icon:{src:Tt}}],title:s("extension_contract_interaction_maintitle_request_from")})),d.default.createElement(Ke,{psbts:e,loading:A,onClick:Io})):null,v?null:d.default.createElement(d.default.Fragment,null,Eo&&d.default.createElement(Pe,{coinId:I,txType:F.TRANS_OUT,loading:A,dappInfo:{name:lt,host:Ct,icon:Tt},analyzeRet:U}),No&&d.default.createElement(W,null,(r===ft.TRADE||r===ft.RUNES)&&d.default.createElement(Wt,{summaryList:[{coinId:I,coinAmount:Mt}],tooltip:s("extension_infor_tooltip_asset_changestips"),title:s("extension_contract_interaction_maintitle_asset_changes")}),d.default.createElement(Do,{summaryList:[{title:lt,desc:Ct,icon:{src:Tt}}],title:s("extension_contract_interaction_maintitle_request_from")})),Kt&&d.default.createElement(W,null,d.default.createElement(Gt,{coinId:I,networkFee:U.gasFee||rt})),d.default.createElement(W,null,d.default.createElement(Ft,{title:s("wallet_extension_network_address_title_walletused"),address:i,walletId:_,onCopyCallback:()=>{c({trade:"approve",all_confirmation:"wallet_used_address"})}})),!Kt&&d.default.createElement(W,null,d.default.createElement(We,{coinId:I})),d.default.createElement(W,null,d.default.createElement(rr,{coinId:I,data:U,currentAddr:i})),d.default.createElement(W,null,d.default.createElement(co,{data:g?e[D]:o,copyable:{hideDesc:!0}}))),S?null:d.default.createElement(Rt,{placeholder:!0,offsetBottom:0,borderTop:!0},d.default.createElement(K,{coinId:_t,...yt}),d.default.createElement(q,{buttonGroup:H})))};a();m();var b=w(G());nt();Po();var ur=w(Dt()),_r=w(Fo());var fr=({unapproved:t})=>{let o=jt,e=t.walletId,r=Ut(e),{memo:i,value:n,memoPos:l,to:p,satBytes:g,from:_,extraParams:x}=t.params.transaction,I=St(o),[f,{toggle:T}]=Nt(!1),[c,A]=(0,b.useState)(g?{level:It.CUSTOM,satBytes:g}:{}),B=c==null?void 0:c.satBytes,N=(0,ur.useDispatch)(),S=(0,_r.useHistory)(),u=no({coinId:o,address:_}),D=u==null?void 0:u.transferReminder;(0,b.useEffect)(()=>{var J;if(!B&&(u==null?void 0:u.normal)&&A({level:It.STANDARD,satBytes:u==null?void 0:u.normal}),B&&(c==null?void 0:c.level)!==It.CUSTOM){let mt=u[(J=mo[c==null?void 0:c.level])==null?void 0:J.satBytes];A({...c,satBytes:mt})}},[u]);let[st,v]=io({coinId:o,walletId:e,address:_,satBytes:B},{}),U=qt(e),[Z,z,O]=Ae({coinId:o,toAddr:p,walletId:e,fromAddr:_,satBytes:B,coinAmount:n,canTransferAmount:v},{}),V=(0,b.useMemo)(()=>v===void 0||z===void 0?!0:h.gte(v,h.add(z,n)),[v,n,z]),it=ao({coinId:o,txType:F.TRANS_OUT,address:_}),lt=Be({memo:i,memoPos:l,coinId:o,toAddr:p,walletId:e,coinAmount:n,fromAddr:_,localType:I==null?void 0:I.localType,dustSize:u==null?void 0:u.minOutput,networkFee:z,satBytes:c.satBytes}),Tt=Ne({coinId:o,walletId:e,satBytes:B,address:_,utxoType:Lt.TRANSFER}),Ct=Ot(e),[Bt,R]=(0,b.useState)(!1),rt=(0,b.useCallback)(async()=>{await N(X(t.id)),await N(tt()),R(!1),S.push(Et)},[N,S,t.id]),ct=(0,b.useCallback)(async()=>{if(!await Yt({walletId:e,callback:async()=>{await N(X(t.id))}}))return;let mt=await Tt(n,z);await it(mt,()=>{rt()}),R(!0);let gt=await lt({utxoList:mt});t.id&&(await N(ot(t.id,{signedTx:gt,coinAmount:n,serviceCharge:z,satPerByte:B,...x})),await N(tt())),R(!1)},[it,n,N,z,x,Tt,rt,B,lt,t.id]),Mt=(0,b.useMemo)(()=>r?{type:K.TIP_TYPE.COMMON_ERROR,message:s("wallet_extension_top_toast_dapp_comingsoon")}:V?O?{type:K.TIP_TYPE.FEE_ERROR}:{type:Pt.TYPE.warn,message:D}:{type:K.TIP_TYPE.FEE_BALANCE_INSUFFICIENT},[O,r,V,D]),yt=(0,b.useMemo)(()=>{let J=[{actionType:q.ACTION_TYPE.CANCEL,btnText:s("wallet_dapp_connection_btn_reject"),onClick:rt}];return V?J=[...J,{disabled:st||Z||O||r||!Number(z),actionType:q.ACTION_TYPE.CONFIRM,onClick:ct}]:J=[...J,{coinId:o,address:_,walletId:e,actionType:q.ACTION_TYPE.FILL_UP}],J},[o,z,O,Z,_,r,V,st,rt,ct,e]);return b.default.createElement(y.Container,null,b.default.createElement(wt,{title:s("wallet_trade_maintitle_transaction_confirm"),backable:!1,closeable:!1}),b.default.createElement(W,null,b.default.createElement(Wt,{title:s("wallet_extension_send_colored_send"),summaryList:[{coinId:jt,coinAmount:n}]})),b.default.createElement(W,null,b.default.createElement(Ft,{walletId:e,address:_,title:s("extension_send_mid_text_from"),onCopyCallback:()=>{U({trade:"send",all_confirmation:"wallet_used_address"})}},!!v&&b.default.createElement(po,{coinBalance:v})),b.default.createElement(Ft,{address:p,title:s("extension_send_mid_text_to"),onCopyCallback:()=>{U({trade:"send",all_confirmation:"to_address"})}})),b.default.createElement(W,{bordered:!1},b.default.createElement(Gt,{coinId:jt,loading:Z,estimateFailed:O,networkFee:z,level:c==null?void 0:c.level,onClick:()=>{T(),U({trade:"send",all_confirmation:"network_fee"})}})),b.default.createElement(Rt,{placeholder:!0,offsetBottom:0,borderTop:!0},b.default.createElement(K,{coinId:jt,...Mt}),b.default.createElement(q,{buttonGroup:yt})),b.default.createElement(lo,{coinId:o,visible:f,signInfo:u,value:c,estimatedFee:z,onChange:A,onToggleVisible:T}),b.default.createElement(uo,{visible:Ct&&Bt}))};a();m();var Xt=w(G());Bo();Sr();Po();a();m();function dr(t){try{return[JSON.parse(t),null]}catch{return[null,new Error("Illegal JSON string")]}}a();m();var yo=w(G());nt();var Tr=w(Dt());a();m();var k=w(G());nt();a();m();var dt={"inscription-preview":"_inscription-preview_yy6vc_1",inscriptionPreview:"_inscription-preview_yy6vc_1","inscription-preview__inner":"_inscription-preview__inner_yy6vc_13",inscriptionPreviewInner:"_inscription-preview__inner_yy6vc_13","inscription-preview-text":"_inscription-preview-text_yy6vc_21",inscriptionPreviewText:"_inscription-preview-text_yy6vc_21","inscription-preview-image":"_inscription-preview-image_yy6vc_26",inscriptionPreviewImage:"_inscription-preview-image_yy6vc_26","inscription-item__content":"_inscription-item__content_yy6vc_30",inscriptionItemContent:"_inscription-item__content_yy6vc_30","inscription-exceedTip":"_inscription-exceedTip_yy6vc_34",inscriptionExceedTip:"_inscription-exceedTip_yy6vc_34","inscription-extend":"_inscription-extend_yy6vc_39",inscriptionExtend:"_inscription-extend_yy6vc_39","inscription-extend__icon":"_inscription-extend__icon_yy6vc_43",inscriptionExtendIcon:"_inscription-extend__icon_yy6vc_43"};var Go=24,Co={TEXT:"text",IMAGE:"image"},Ur=k.default.memo(({type:t,contentType:o,body:e})=>{let[{inscriptionType:r,inscriptionContent:i},n]=xe({inscriptionType:Co.TEXT,inscriptionContent:e});return(0,k.useEffect)(()=>{if(t===F.ORDINAL_NFT||(o==null?void 0:o.startsWith("image/")))try{let l=URL.createObjectURL(new Blob([e]));n({inscriptionType:Co.IMAGE,inscriptionContent:l})}catch{n({inscriptionType:Co.TEXT,inscriptionContent:e})}finally{n({initing:!1})}},[e,o,n,t]),k.default.createElement(y.Box,{className:dt["inscription-preview"]},r===Co.IMAGE?k.default.createElement("img",{alt:"",src:i,className:dt["inscription-preview-image"]}):k.default.createElement(y.Box,{className:dt["inscription-preview__inner"]},k.default.createElement(M.Text,{forceWrap:!0,className:dt["inscription-preview-text"]},i)))}),Rr=({type:t,contentType:o,body:e,rawBody:r})=>{let i=(0,k.useMemo)(()=>{let p=e==null?void 0:e.length;return h.lt(p,1024)?`${p} B`:`${h.floorTruncate(h.div(p,1024),3)} KB`},[e==null?void 0:e.length]),n=t===F.ORDINAL_NFT||(o==null?void 0:o.startsWith("image/")),l=n?r==null?void 0:r.slice(0,200):r;return k.default.createElement(y.FlexBox,null,k.default.createElement(Ur,{type:t,body:e,contentType:o}),k.default.createElement(y.FlexBox,{direction:y.DIRECTION.vertical,className:dt["inscription-item__content"]},k.default.createElement(M.Text,{strong:!0,ellipsis:{tooltip:!n},size:M.SIZE.xs},l),k.default.createElement(M.Text,{size:M.SIZE.xs,type:M.TYPE.secondary},i)))},Wr=({type:t,dataSource:o=[]})=>{let e=(o==null?void 0:o.length)||0,[r,{toggle:i}]=Nt(!1),n=(0,k.useMemo)(()=>r?o==null?void 0:o.slice(0,Go):o==null?void 0:o.slice(0,3),[o,r]),l=(0,k.useMemo)(()=>pe(t),[t]);return k.default.createElement(Te,{space:16,title:s(l,{num:e})},k.default.createElement(Ce,{space:24,renderEmpty:!1,dataSource:n,renderItem:p=>k.default.createElement(Rr,{...p,type:t})}),r&&e>Go&&k.default.createElement(M.Text,{size:M.SIZE.xs,type:M.TYPE.secondary,className:dt["inscription-exceedTip"]},s("wallet_info_dialog_desc_replicate_hide",{num:h.sub(e,Go)})),e>3&&k.default.createElement(y.FlexBox,{justify:"center",className:dt["inscription-extend"],onClick:i},k.default.createElement(Q,{size:Q.SIZE.xs,className:dt["inscription-extend__icon"],icon:r?"okds-arrow-chevron-up-md":"okx-wallet-plugin-add-arrow-chevrons"})))},xr=Wr;function Yr({unapproved:t}){var g;let o=(0,Tr.useDispatch)(),{id:e}=t,{type:r}=((g=t.params)==null?void 0:g.transaction)||{},i=ce[r],n=async()=>{await o(tt()),await o(X(t.id))},l=async _=>{await o(ot(t.id,_)),await o(tt())},{inscriptions:p}=Le();return yo.default.createElement(ke,{txId:e,headerProps:{title:i?s(i):null,closeable:!1,backable:!1},confirmButtonProps:{onCancel:n,onConfirm:l},slot:{top:yo.default.createElement(W,null,yo.default.createElement(xr,{type:r,dataSource:p}))}})}var Cr=Yr;var Gr=[F.BRC20_MINT,F.BRC20_INSCRIBE,F.BRC20_DEPLOY],qr=[F.EARN_BRC30_APPLY,F.EARN_BRC30_REDEEM,F.EARN_BRC30_CLAIM,F.EARN_BRC30_DEPLOY],zr=[F.RUNES_ETCH];function Hr(t){let o=vt.BRC_NFT;return Gr.includes(t)?o=vt.BRC_20:qr.includes(t)?o=vt.BRC_20S:zr.includes(t)&&(o=vt.RUNEMAIN),o}function $r(t,o){return o.map(({contentType:e,body:r})=>{let i=r;try{(t===F.ORDINAL_NFT||typeof t!="number"&&(e==null?void 0:e.startsWith("image/")))&&(i=P.Buffer.from(r,"hex"))}catch{}return{contentType:e,body:i,rawBody:r}})}function Zr({unapproved:t}){var N;let{tick:o,tid:e,type:r,from:i,to:n,txSource:l,inscriptions:p=[],amount:g}=((N=t.params)==null?void 0:N.transaction)||{},_=(0,Xt.useMemo)(()=>$r(r,p),[r,p]),x=ro({localType:Qt}),I=+(x==null?void 0:x.netWorkId),f=eo(()=>{var S;if(r===F.RUNES_ETCH){let[u,D]=dr((S=p[0])==null?void 0:S.body);if(D)return{chainId:I,coinType:bo,symbol:o,address:"btc-runesMain-invalid-inscriptions"};let st=(u==null?void 0:u.id)||"";return{chainId:I,coinType:bo,symbol:o,address:`btc-runesMain-${st}`}}return e?{chainId:I,coinType:oo,address:`btc-brc20s-${e}`}:o?{chainId:I,coinType:to,symbol:o}:null},[e,o,r,I]),T=Hr(r),c=St(void 0,{},f),A=(S,u)=>{let D=0;if(r===F.RUNES_ETCH){S.coinAmount=ho(g,10**(c==null?void 0:c.decimals)),S.coinId=(c==null?void 0:c.coinId)||_t,S.txSource=l||ht.DAPP;return}g&&(c==null?void 0:c.decimals)&&(D=ho(g,10**(c==null?void 0:c.decimals))),S.coinAmount=D,S.coinId=u?_t:(c==null?void 0:c.coinId)||_t,S.txSource=l||ht.DAPP},B=(S,u)=>{S&&A(S,!0),Array.isArray(u)&&u.forEach(D=>{A(D,!1)})};return Xt.default.createElement(Me,{params:{walletId:t.walletId,utxoType:Lt.INSCRIPTION_USE_NFT_UTXO,from:i,to:n,inscriptions:_,txType:r,protocolId:T},lifecycle:{beforePostTx:B}},Xt.default.createElement(Cr,{unapproved:t}))}var yr=Zr;a();m();nt();var go=w(G()),gr=w(Dt());Pr();var Vr=({unapproved:t})=>{let o=(0,gr.useDispatch)(),{targetCoin:e}=t.params||{},r={image:e.logo,decimals:e.decimals,name:e.name,address:e.contractAddress,symbol:e.symbol},i={name:e.blockChain||e.localType},n=qt(),l=(0,go.useMemo)(()=>{let p={actionType:q.ACTION_TYPE.CANCEL,async onClick(){n({all_confirmation:"cancel",trade:"add_token"}),await o(X(t.id)),await Lo(o)},btnText:s("wallet_dapp_connection_btn_reject")},g={actionType:q.ACTION_TYPE.CONFIRM,async onClick(){var _,x;try{n({all_confirmation:"confirm",trade:"add_token"}),await fe(e),await o(ot(t.id)),await Lo(o)}catch(I){Vo.error(((x=(_=I==null?void 0:I.data)==null?void 0:_.originalError)==null?void 0:x.msg)||s("wallet_extenshion_toast_add_failed"))}}};return[p,g]},[n,o,e,t.id]);return go.default.createElement(Ue,{token:r,provider:i,buttonGroup:l})},Ir=Vr;var ul=({unapproved:t})=>{switch(t.method){case j.TRANSFER_NFT:case j.SEND_INSCRIPTION:return xt.default.createElement(Ge,{unapproved:t});case j.SPLITUTXO:return xt.default.createElement(ze,{unapproved:t});case j.INSCRIBE:case j.INSCRIBE_TRANSFER:return xt.default.createElement(je,{unapproved:t});case j.SIGNPSBT:case j.SIGNPSBTS:return xt.default.createElement(pr,{unapproved:t});case j.SIGN_MESSAGE:return xt.default.createElement($e,{unapproved:t});case j.MINT:return xt.default.createElement(yr,{unapproved:t});case j.WATCHASSET:return xt.default.createElement(Ir,{unapproved:t});case j.SEND:case j.SEND_BTC:return xt.default.createElement(fr,{unapproved:t});default:return""}};export{ul as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Bitcoin-B2F3OYJT.js.map
