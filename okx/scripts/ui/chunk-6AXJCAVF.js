import{a as C}from"./chunk-HG2HGCVV.js";import{a as I}from"./chunk-X2HBIQ56.js";import{a as k}from"./chunk-D54UDGZS.js";import{k as w}from"./chunk-HU3KBV5G.js";import{b as O}from"./chunk-6ZPGW3YM.js";import{d as B,f as U}from"./chunk-S4N75E3H.js";import{h as m}from"./chunk-RMQJRDTF.js";import{Eb as d,F as P,Ib as H,Nb as _,Pa as L,Vb as b,sb as p,tb as R,ub as F,vb as G,wb as N,xb as E}from"./chunk-CVJKAN5R.js";import{f as K,m as h,o as x}from"./chunk-6V2G2Z5W.js";h();x();var $=K(O());L();h();x();b();L();U();var ae=(e=[])=>Array.isArray(e)?e.map(t=>{let{symbol:s,name:r}=t;return{...t,chain:s,chainName:r}}).filter(({chainId:t})=>!!t):[],T=e=>parseInt(e,16);var M=1024;function q(e,t){E(e,t)&&(t=e);let s=[];for(let r=G(e,t);E(r,e);r=F(r,M)){let i=G(e,r),n=i<M?i:M,a=F(r,n);s.push({numberOfBlocks:n,endBlockNumber:a})}return s}function X({baseFeePerGas:e,number:t}){return{number:t,baseFeePerGas:e,gasUsedRatio:null,priorityFeesByPercentile:null}}function j({baseFeePerGas:e,number:t,blockIndex:s,gasUsedRatios:r,priorityFeePercentileGroups:i,percentiles:n}){let a=r[s],o=i[s],c=n.reduce((l,u,f)=>{let y=o[f];return{...l,[u]:T(y)}},{});return{number:t,baseFeePerGas:e,gasUsedRatio:a,priorityFeesByPercentile:c}}async function v({web3:e,numberOfBlocks:t,endBlockNumber:s,percentiles:r,includeNextBlock:i}){var o;let n=await e.eth.getFeeHistory(t,s,r),a=T(n.oldestBlock);if(n.baseFeePerGas!==void 0&&n.baseFeePerGas.length>0&&n.gasUsedRatio.length>0&&(n.reward===void 0||n.reward.length>0)){let c=i?n.baseFeePerGas:n.baseFeePerGas.slice(0,t),l=n.gasUsedRatio,u=(o=n.reward)!=null?o:[],f=l.length;return c.map((y,A)=>{let S=T(y),W=F(a,A);return A>=f?X({baseFeePerGas:S,number:W}):j({baseFeePerGas:S,number:W,blockIndex:A,gasUsedRatios:l,priorityFeePercentileGroups:u,percentiles:r})})}return[]}var ce=async({web3:e,numberOfBlocks:t,endBlock:s="latest",percentiles:r=[],includeNextBlock:i=!1})=>{let n=r.length>0?Array.from(new Set(r)).sort((l,u)=>l-u):[],o=q(s,t);return(await Promise.all(o.map(({numberOfBlocks:l,endBlockNumber:u},f)=>f===o.length-1?v({web3:e,numberOfBlocks:l,endBlockNumber:u,percentiles:n,includeNextBlock:i}):v({web3:e,numberOfBlocks:l,endBlockNumber:u,percentiles:n,includeNextBlock:!1})))).reduce((l,u)=>[...l,...u],[])},z=["low","medium","high"],J={low:{percentile:10,baseFeePercentageMultiplier:110,priorityFeePercentageMultiplier:94,minSuggestedMaxPriorityFeePerGas:1e9,estimatedWaitTimes:{minWaitTimeEstimate:15e3,maxWaitTimeEstimate:3e4}},medium:{percentile:20,baseFeePercentageMultiplier:120,priorityFeePercentageMultiplier:97,minSuggestedMaxPriorityFeePerGas:15e8,estimatedWaitTimes:{minWaitTimeEstimate:15e3,maxWaitTimeEstimate:45e3}},high:{percentile:30,baseFeePercentageMultiplier:125,priorityFeePercentageMultiplier:98,minSuggestedMaxPriorityFeePerGas:2e9,estimatedWaitTimes:{minWaitTimeEstimate:15e3,maxWaitTimeEstimate:6e4}}};function Q(e){let t=e.slice().sort((i,n)=>i===n),s=t.length,r=Math.floor((s-1)/2);return t[r]}var Z=(e,t)=>{let s=J[e],r=t[t.length-1].baseFeePerGas,i=R(p(r,s.baseFeePercentageMultiplier),100),n=t.map(u=>{var f;return"priorityFeesByPercentile"in u?(f=u==null?void 0:u.priorityFeesByPercentile)==null?void 0:f[s.percentile]:null}).filter(Boolean),a=Q(n),o=R(p(a,s.priorityFeePercentageMultiplier),100),c=N([o,s.minSuggestedMaxPriorityFeePerGas]),l=F(i,c);return{baseFeePerGas:_(i,0),maxFeePerGas:_(l,0),maxPriorityFeePerGas:_(c,0)}},ue=e=>z.reduce((t,s)=>{let r=Z(s,e),{maxFeePerGas:i}=r;return[...t,{level:s,isSupportEip1559:!0,gasPrice:i,...r}]},[]),le=async(e={})=>(e==null?void 0:e.baseFeePerGas)!==void 0,me=({gasPrice:e,gasLimit:t,price:s,usdToThisRate:r})=>{let i=p(e,t),n=H(i),a=s?p(n,p(s,r)):0;return{networkFee:n,networkFeeInt:i,networkFeeMarket:a}},g="0x";var fe=({to:e,value:t,nonce:s,gasLimit:r,gasPrice:i,maxFeePerGas:n,maxPriorityFeePerGas:a,contractAddress:o,...c})=>({...c,nonce:`${g}${d(s)}`,gasLimit:r&&`${g}${d(r)}`,gasPrice:i&&`${g}${d(i)}`,maxFeePerGas:n&&`${g}${d(n)}`,maxPriorityFeePerGas:a&&`${g}${d(a)}`,value:o?"0x0":`${g}${d(t)}`,to:o||e,data:o?I(e,t):void 0}),Y=(e=[],t,s=P)=>{let r=[];return e.forEach(({keyringName:i,walletIdentities:n,keyringIdentityType:a})=>{a===m.HARDWARE||a===m.PRIVATE_KEY&&!n[0].account[s]||(t?r=r.concat(n.filter(({backupData:o})=>!o||!(o!=null&&o.length)).map(({account:o})=>o[s])):r.push({name:i,options:n.filter(({backupData:o})=>!o||!(o!=null&&o.length)).map(({walletName:o,account:c})=>({name:o,address:c[s]}))}))}),r},Pe=({txAmount:e,networkFee:t,balance:s,baseCoinBalance:r,isBaseCoin:i})=>!(i&&E(s,F(e,t))||!i&&E(r,t)),de=async e=>{let t=await B().getWalletIdByAddress(e,P);return await k({walletId:t})};var D=(e=!1,t=P)=>(0,$.useSelector)(({metamask:r})=>Y(r.keyringIdentities,e,t)),ee=e=>{let t=w(),s=C({network:e});return[{name:t("wallet_extension_addressbook_title_address_book"),options:s}]},Ae=(e=P)=>{let t=D(!1,e),s=ee(e);return[t,[...t,...s]]},Re=()=>{let e=(0,$.useSelector)(({metamask:r})=>r.keyringIdentities),t=!1,s=!1;return e.forEach(({walletIdentities:r,keyringIdentityType:i})=>{var a,o;(![m.HARDWARE,m.PRIVATE_KEY].includes(i)||i===m.PRIVATE_KEY&&((a=r[0])==null?void 0:a.account[P]))&&(s=!0);let n=r==null?void 0:r.length;for(let c=0;c<n;c++)if(i===m.MNEMONIC&&!((o=r[c].backupData)!=null&&o.length)||[m.HARDWARE,m.PRIVATE_KEY,m.MPC].includes(i)){t=!0;break}}),{hasBackUpWallet:t,batchTransferAvailable:s}};export{ae as a,T as b,ce as c,ue as d,le as e,me as f,fe as g,Pe as h,de as i,D as j,Ae as k,Re as l};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-6AXJCAVF.js.map
