import{a as O}from"./chunk-ODS2CEAN.js";import{b as Y}from"./chunk-S3BOQTUM.js";import{b as v,f as N,g as S,o as A}from"./chunk-TPEASXIF.js";import{a as C}from"./chunk-JSAFBAMQ.js";import{a as D}from"./chunk-PCGRDRHF.js";import{b as y}from"./chunk-VPBQLZCI.js";import{b as W,c as H}from"./chunk-ERLETJMZ.js";import{a as k,x as h,z as P}from"./chunk-O4EDZSHP.js";import{b as Z}from"./chunk-6ZPGW3YM.js";import{a as J}from"./chunk-TPSXCUGD.js";import{C as z,v as l}from"./chunk-CVJKAN5R.js";import{H as u,q as g}from"./chunk-GXQ645QR.js";import{V as o}from"./chunk-C2H3SRET.js";import{a as U}from"./chunk-V4YVDLI4.js";import{f as _,m,o as p}from"./chunk-6V2G2Z5W.js";m();p();var r=_(U());var F=_(Z()),M=_(J());z();m();p();var q={markedEditWallet:!1,editKeyringIdentities:[]},Q=W({name:"editWallet",initialState:q,reducers:{setMarkedEditWallet:(i,t)=>{i.markedEditWallet=Boolean(t.payload)},setEditKeyringIdentities:(i,t)=>{i.editKeyringIdentities=JSON.parse(JSON.stringify(t.payload)).map(e=>({...e,id:e.keyringId,walletIdentities:(e.walletIdentities||[]).map(a=>({...a,id:a.walletId}))}))||[]},clearEditKeyringIdentities:i=>{i.editKeyringIdentities=[]},deleteItemInKeyringIdentities:(i,{payload:t})=>{i.editKeyringIdentities=i.editKeyringIdentities.filter(e=>e.keyringId!==t)},deleteItemInWalletIdentities:(i,{payload:t})=>{i.editKeyringIdentities=i.editKeyringIdentities.map(e=>{let a=e.walletIdentities.filter(s=>s.walletId!==t);if(a.length)return{...e,walletIdentities:a}}).filter(e=>Boolean(e))},updateKeyringIdentityNameInSession:(i,{payload:t})=>{i.editKeyringIdentities=i.editKeyringIdentities.map(e=>(e.keyringId===t.keyringId&&(e.keyringName=t.keyringName),e))},updateWalletIdentityNameInSession:(i,{payload:t})=>{i.editKeyringIdentities=i.editKeyringIdentities.map(e=>{let a=e.walletIdentities.map(s=>(s.walletId===t.walletId&&(s.walletName=t.walletName),s));return{...e,walletIdentities:a}})}}}),{actions:V,reducer:X}=Q,te=X;var{setMarkedEditWallet:ie,setEditKeyringIdentities:re,clearEditKeyringIdentities:se,deleteItemInKeyringIdentities:b,deleteItemInWalletIdentities:x,updateKeyringIdentityNameInSession:ae,updateWalletIdentityNameInSession:ne}=V;var I={DELETE_WALLET:"deleteWallet",DELETE_LAST_WALLET:"deleteLastWallet",DELETE_KEYRING_WALLETS:"deleteKeyringWallets"},$=13,we=i=>{let t=(0,M.useHistory)(),{current:{walletId:e,keyringId:a,actionType:s,nextPath:c=k}}=r.default.useRef(O(t==null?void 0:t.location.search.slice(1))),{callback:w}=i,d=(0,F.useDispatch)(),[n,G]=r.default.useState(),[L,T]=r.default.useState(),[B,f]=(0,r.useState)(!1),R=y(({target:{value:E}})=>{G(E),T(void 0)},[]),K=y(async()=>{try{if(f(!0),await A(n)===!0){if(s===I.DELETE_LAST_WALLET){await d(v()),await d(Y()),t.push(P);return}else s===I.DELETE_WALLET?(await d(N(e)),await d(x(e)),u.success(l("wallet_editwallet_toast_delete_wallet_success"))):s===I.DELETE_KEYRING_WALLETS&&(await d(S(e)),await d(b(a)),u.success(l("wallet_editwallet_toast_delete_wallet_success")));if(f(!1),w){w();return}c&&t.replace(c)}}catch{f(!1),T(l("wallet_set_password_errortip_password_wrong"))}},[c,e,n,s]);return r.default.createElement("div",{className:"verify_password_page__wrapper main-container",onKeyDown:E=>{E.keyCode===$&&K()}},r.default.createElement(C,{bordered:!1,closeable:[I.DELETE_WALLET,I.DELETE_KEYRING_WALLETS].includes(s)}),r.default.createElement("div",{className:"verify-password-page"},r.default.createElement("h2",{className:"verify-password-page__header"},l("wallet_set_password_maintitle_enter_password")),r.default.createElement("div",{className:"verify-password-page__input"},r.default.createElement(g.Password,{autoFocus:!0,value:n,autoComplete:"off",onChange:R,size:g.SIZE.xl,error:L,errorType:g.TIP_TYPE.always})),r.default.createElement("div",{onClick:()=>t.push(h),className:"verify-password-page__forget-password"},l("wallet_footer_subtitle_forgot_password")),r.default.createElement(D.FooterActions,null,r.default.createElement(o,{loading:B,onClick:K,size:o.SIZE.lg,type:o.TYPE.highlight,category:o.CATEGORY.fill,disabled:!n||(n==null?void 0:n.length)<6||!!L},l("wallet_set_password_btn_confirm")))))};export{te as a,we as b};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-CRSAGI5R.js.map
