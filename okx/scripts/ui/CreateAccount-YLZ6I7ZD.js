import{a as S,f as W}from"./chunk-A5VEFKCJ.js";import{a as j}from"./chunk-E73QHIZ6.js";import"./chunk-E2KMZQ6K.js";import"./chunk-JXT6JCNO.js";import{a as P}from"./chunk-PLVZLQPX.js";import"./chunk-NS35PZCP.js";import"./chunk-XOD56IFT.js";import"./chunk-BBN3UGKM.js";import"./chunk-5DEIKYJL.js";import"./chunk-QMNAWRVI.js";import"./chunk-D6ZXZUY6.js";import"./chunk-QMF5LKVF.js";import"./chunk-VMACN7YR.js";import"./chunk-MTMZQEHP.js";import"./chunk-NKTQMEXG.js";import"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import"./chunk-S3ECGMEP.js";import"./chunk-PX7HII6H.js";import"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import{a as $}from"./chunk-JSAFBAMQ.js";import"./chunk-A336VZZF.js";import"./chunk-XEOGXIVD.js";import{a as C}from"./chunk-PCGRDRHF.js";import{p as g}from"./chunk-IU3TYIWS.js";import"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import"./chunk-X2LENRE7.js";import{va as b,wa as N}from"./chunk-O4EDZSHP.js";import"./chunk-HU3KBV5G.js";import"./chunk-6ZPGW3YM.js";import"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import"./chunk-FLCN6MAI.js";import"./chunk-7E3KY4EN.js";import"./chunk-JIRWXBHS.js";import"./chunk-3TVEFIPW.js";import"./chunk-UXFKODVN.js";import"./chunk-IMRS4RGO.js";import"./chunk-52GWQSZH.js";import{a as O}from"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import"./chunk-RMQJRDTF.js";import{c as A}from"./chunk-2YLR7R2N.js";import"./chunk-MVLY6WUP.js";import"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{C as T,v as o}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{D as l,q as F}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{V as p}from"./chunk-C2H3SRET.js";import{a as E}from"./chunk-V4YVDLI4.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import"./chunk-IYYFWVWL.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import"./chunk-RYNAOZ73.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f as h,m as c,o as s}from"./chunk-6V2G2Z5W.js";c();s();var t=h(E());T();c();s();var _=h(E()),L=h(O());T();var U=()=>{let a=P(),i=l.useForm(),x=(0,L.useHistory)(),[y,d]=(0,_.useState)(!1),[e,m]=(0,_.useState)({account:a.get("account")||""}),n=Number(a.get("coinId")),{coin:u}=j(n,!1),v=async r=>{try{return await W(r)?Promise.resolve():(i.setErrors({account:o("extension_wallet_create_errortip_error_name")}),Promise.reject())}catch{return i.setErrors({account:o("extension_wallet_create_errortip_error_name")}),Promise.reject()}},z=(0,_.useCallback)(async()=>{d(!0);try{let r={coinId:n,chainId:u==null?void 0:u.chainId,...e};await v(r);let{ownerKey:f,activeKey:M}=await S(r);f&&M?i.setErrors({account:o("extension_wallet_create_errortip_used_username")}):x.push(`${N}?coinId=${n}&account=${e==null?void 0:e.account}&from=${a.get("from")||""}`)}catch(r){console.log(r)}finally{d(!1)}},[u,e]),B=(0,_.useCallback)(r=>{m(r);let{account:f}=r;x.replace(`${b}?account=${f}&coinId=${n}&account=${e==null?void 0:e.account}&from=${a.get("from")||""}`)},[]);return{form:i,values:e,loading:y,onSubmit:z,onValuesChange:B}},V=U;c();s();var k=(a="")=>/^[a-z]{1}[a-z1-5]{11}$/g.test(a);c();s();var w={"wax-create-account-form":"_wax-create-account-form_3yjsy_1",waxCreateAccountForm:"_wax-create-account-form_3yjsy_1","wax-create-account-rules":"_wax-create-account-rules_3yjsy_4",waxCreateAccountRules:"_wax-create-account-rules_3yjsy_4"};var Y=()=>{let{form:a,loading:i,values:x,onSubmit:y,onValuesChange:d}=V();return t.default.createElement(A.Container,{className:w["wax-create-account"]},t.default.createElement($,{closeable:!1,title:o("extension_wallet_header_title_waxaccount_opening")}),t.default.createElement(l,{form:a,initialValues:x,className:w["wax-create-account-form"],onValuesChange:d,onSubmit:y},t.default.createElement(l.Item,{name:"account",validateTrigger:"onChange",rules:[{validator:(e,m)=>m&&!k(m)?Promise.reject(o("extension_wallet_create_errortip_error_name")):Promise.resolve()}],label:o("extension_wallet_create_text_set_account_name")},t.default.createElement(F,{placeholder:o("extension_wallet_create_input_enter_account_name")})),t.default.createElement(l.Item,{shouldUpdate:!0},({getFieldValue:e,getFieldsError:m})=>{let n=m(),u=e("account");return t.default.createElement(C.FooterActions,null,t.default.createElement(p,{loading:i,htmlType:"submit",category:p.CATEGORY.fill,type:p.TYPE.highlight,size:p.SIZE.lg,onClick:y,disabled:!u||(n==null?void 0:n.length)},o("wallet_extension_send_btn_next_step")))})),t.default.createElement(C,{offsetBottom:104,component:A.FlexBox,justify:"center"},t.default.createElement(g.Text,{component:"pre",type:g.TYPE.secondary,size:g.SIZE.xs,className:w["wax-create-account-rules"]},o("extension_wallet_create_input_naming_rules"))))},de=t.default.memo(Y);export{de as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=CreateAccount-YLZ6I7ZD.js.map
