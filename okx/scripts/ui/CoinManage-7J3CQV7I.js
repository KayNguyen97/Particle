import{a as ke}from"./chunk-GYYWRO2I.js";import{a as Ee}from"./chunk-MYEZWV3Q.js";import{a as H,b as Z}from"./chunk-NWQEX4PI.js";import{a as je}from"./chunk-F5GFJNKO.js";import{a as be,b as Te}from"./chunk-E6NTQWKX.js";import"./chunk-A5VEFKCJ.js";import{a as Ie}from"./chunk-P552UEY3.js";import{a as Ne}from"./chunk-TQFQVAHK.js";import"./chunk-3IHK32RH.js";import{a as j}from"./chunk-HI4AQDIG.js";import{a as P}from"./chunk-TYILG3ER.js";import"./chunk-E73QHIZ6.js";import"./chunk-E2KMZQ6K.js";import"./chunk-JXT6JCNO.js";import"./chunk-FEET7RP6.js";import"./chunk-MBJ4MFYL.js";import"./chunk-PCY622ND.js";import"./chunk-NS35PZCP.js";import"./chunk-XOD56IFT.js";import"./chunk-BBN3UGKM.js";import{c as xe}from"./chunk-5DEIKYJL.js";import"./chunk-QMNAWRVI.js";import"./chunk-D6ZXZUY6.js";import"./chunk-QMF5LKVF.js";import"./chunk-VMACN7YR.js";import{j as fe}from"./chunk-PD2BTUUF.js";import"./chunk-YCMOAOGN.js";import{c as ge,d as D}from"./chunk-D5VZXMFP.js";import"./chunk-XAMN4IIH.js";import"./chunk-2HWABU7H.js";import"./chunk-APEQZGKB.js";import"./chunk-DUHXKIBS.js";import"./chunk-QNEJI55N.js";import"./chunk-5W7SRP5N.js";import"./chunk-YVRXETFX.js";import"./chunk-B2BOSVTW.js";import"./chunk-GUJXW3GJ.js";import"./chunk-VIS7KIVI.js";import"./chunk-F64VYES3.js";import"./chunk-DHX2X277.js";import{b as v}from"./chunk-67YO4IPY.js";import"./chunk-DLUAVD7X.js";import"./chunk-WRWXCAEZ.js";import"./chunk-OZ6XSJY6.js";import"./chunk-DMJQUOJT.js";import{M as Se}from"./chunk-MTMZQEHP.js";import"./chunk-NKTQMEXG.js";import{h as Le}from"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import{d as pe}from"./chunk-4OTZHHYZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import"./chunk-S3ECGMEP.js";import"./chunk-PX7HII6H.js";import"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import"./chunk-TPEASXIF.js";import{a as Ae}from"./chunk-JSAFBAMQ.js";import"./chunk-A336VZZF.js";import{b as ue}from"./chunk-XEOGXIVD.js";import{a as we}from"./chunk-PCGRDRHF.js";import{p as g}from"./chunk-IU3TYIWS.js";import{b as W,d as y,r as he,y as ve}from"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import{p as _e,x as le}from"./chunk-X2LENRE7.js";import{G as ye,H as O,a as Ce}from"./chunk-O4EDZSHP.js";import{k as z}from"./chunk-HU3KBV5G.js";import{b as tt}from"./chunk-6ZPGW3YM.js";import"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import"./chunk-FLCN6MAI.js";import"./chunk-7E3KY4EN.js";import"./chunk-JIRWXBHS.js";import"./chunk-3TVEFIPW.js";import"./chunk-UXFKODVN.js";import"./chunk-IMRS4RGO.js";import"./chunk-52GWQSZH.js";import{a as ce}from"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import"./chunk-RMQJRDTF.js";import{c as x}from"./chunk-2YLR7R2N.js";import{a as me,b as et}from"./chunk-MVLY6WUP.js";import{f as de,h as Xe}from"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{C as Q,lb as ae,mb as se,rb as Ve,v as T}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{q as V,y as ie}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{P as ne,c as Qe}from"./chunk-C2H3SRET.js";import{a as S}from"./chunk-V4YVDLI4.js";import"./chunk-UXBKFN2U.js";import"./chunk-HCW4K7TR.js";import"./chunk-Z4JATHZR.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import"./chunk-IYYFWVWL.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import"./chunk-RYNAOZ73.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f,m as r,o as n}from"./chunk-6V2G2Z5W.js";r();n();var d=f(S());var Ye=f(Qe());var $e=f(ce());r();n();var Fe=f(ke()),k=f(S());Q();r();n();var L={"list-title":"_list-title_1q23d_1",listTitle:"_list-title_1q23d_1","empty-box":"_empty-box_1q23d_6",emptyBox:"_empty-box_1q23d_6","search-text":"_search-text_1q23d_10",searchText:"_search-text_1q23d_10","coin-box":"_coin-box_1q23d_13",coinBox:"_coin-box_1q23d_13","icon-add":"_icon-add_1q23d_13",iconAdd:"_icon-add_1q23d_13","icon-remove":"_icon-remove_1q23d_16",iconRemove:"_icon-remove_1q23d_16","icon-not-remove":"_icon-not-remove_1q23d_19",iconNotRemove:"_icon-not-remove_1q23d_19"};var Me=(0,k.forwardRef)(({unAddedLoadingMore:e,renderCoin:o,unAddedLoading:t,unAddedList:a})=>a.length===0?null:k.default.createElement(x.Box,null,k.default.createElement(g.Text,{className:L.listTitle,size:g.SIZE.xs,type:g.TYPE.secondary},T("wallet_manage_crypto_subtitle_popular_crypto")),k.default.createElement(v,{itemKey:"coinId",renderEmpty:!1,renderItem:o,dataSource:a,component:!t&&Fe.default,loadingMore:e,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade"})));r();n();var Be=f(ke()),G=f(S());Q();var qe=({renderCoin:e,list:o})=>G.default.createElement(x.Box,null,G.default.createElement(g.Text,{className:L.listTitle,size:g.SIZE.xs,type:g.TYPE.secondary},T("wallet_manage_crypto_list_added_crypto")),G.default.createElement(v,{itemKey:"coinId",renderEmpty:!1,renderItem:e,dataSource:o,component:Be.default,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade-added"}));r();n();var K=f(S());Ve();Q();var X=({coin:e,deleteAddedCoinAbled:o,onAction:t,isSearchStatus:a})=>{let s="",i="",m=Te(),_=e==null?void 0:e.aggregation;e!=null&&e.added?o?(s="okx-wallet-plugin-take",i="icon-remove"):(s="okx-wallet-plugin-take",i="icon-not-remove"):(s="okx-wallet-plugin-add",i="icon-add");let c=(e==null?void 0:e.baseCoinId)===se&&!!(e!=null&&e.address),w=a&&!_&&!c&&!!(e!=null&&e.address),h=y(()=>m(e),[e==null?void 0:e.coinId,m]);return K.default.createElement(v.Coin,{className:L["coin-box"],hovered:!1,name:(e==null?void 0:e.coinId)===ae?e==null?void 0:e.chainName:e==null?void 0:e.name,icon:e.image,symbol:e.symbol,address:w&&`${T("wallet_manage_crypto_label_contract_address")}: ${_e(e==null?void 0:e.address)}`,tag:_?T("wallet_manage_crypto_labels_crypto_multichain"):e.tokenType},!h&&(e==null?void 0:e.added)?K.default.createElement(be,{coinId:e==null?void 0:e.coinId,from:ye}):K.default.createElement(ue.IconButton,{className:L[i],disabled:(e==null?void 0:e.added)&&!o,onClick:()=>{t(e)},icon:{icon:s}}))};r();n();var N=f(S());var Ue=()=>{let e=P(),o=j(),[t,a]=(0,N.useState)(""),s=he(t,{wait:300}),i=(0,N.useCallback)(l=>{a(l.target.value)},[]),[m,_]=(0,N.useState)(!0);(0,N.useEffect)(()=>{_(!!t)},[t]);let{data:c,loadingMore:w,listRef:h}=Z({symbolLike:s,aggregation:!0,chainIds:o?[Number(o)]:void 0},{reloadDeps:[s],enableEmptyAccountCoins:!0,beforeRequest:()=>{if(!s)return{list:[],pageNo:0,isNoMore:!0}},onFinally(){_(!1)}}),A=y(()=>new Set(e.map(l=>l.aggregation?l.symbol:l.coinId)),[e]),u=y(()=>{var E;return((E=c==null?void 0:c.list)!=null?E:[]).map(C=>(C.added=A.has(C.aggregation?C.symbol:C.coinId),C)).sort((C,I)=>I.added-C.added)},[A,c==null?void 0:c.list]);return{searchListRef:h,search:t,searchCoins:u,searchLoading:m,searchLoadingMore:w,onSearch:i}};r();n();r();n();var ee=f(S());function Y(e,o){let t=(0,ee.useRef)(null),a=(0,ee.useRef)(Date.now());return W((...i)=>{t.current||(e(...i),a.current=Date.now(),t.current=setTimeout(()=>{t.current=null},o))})}r();n();var $=(e,o)=>{if(e.aggregation){let t=o(e.childrenCoin);return{...e,childrenCoin:t}}return e};r();n();Xe();et();function Re(){let e=Le();return W(async o=>{try{let{code:t}=await de(me.registerCustomCoinAddr,{coinAddrRegisterList:[{accountId:e,coinId:o}]},{needSign:!0});return t===0}catch{return!1}})}var ze=()=>{let e=Ne(),o=H(),t=Re();return Y(async a=>{let s=le(a),i;if(s){if(i=await Se(a),!i)return}else i=a;i=$(i,o),a.added?D(i):await t(i.coinId)&&(e(i),ge(i))},500)};r();n();var q=f(S());var De=(e=[],o)=>{var I;let t=j(),a=Ie(),s=y(()=>new Set(e.map(b=>b.aggregation?b.symbol:b.coinId)),[e]),i=y(()=>Array.from(new Set(Ee(e).map(b=>b.coinId))),[e]),{data:m,loading:_,loadingMore:c,listRef:w,reload:h}=Z({aggregation:!0,chainIds:t?[Number(t)]:void 0,excludeCoinIds:i},{enable:!a,reloadDeps:[t],enableEmptyAccountCoins:!0}),A=ve(s.size),u=s.size<A;(0,q.useEffect)(()=>{!o&&u&&h()},[u,s.size,o]);let l=(I=y(()=>{var R,M;return(M=(R=m==null?void 0:m.list)==null?void 0:R.filter(B=>!s.has(B.aggregation?B.symbol:B.coinId)))!=null?M:[]},[m==null?void 0:m.list,e]))!=null?I:[],[E,C]=(0,q.useState)(!0);return(0,q.useEffect)(()=>{_||C(!1)},[_]),{unAddedList:l,unAddedListRef:w,unAddedLoading:E,unAddedLoadingMore:c}};r();n();var Oe=()=>{let e=P(),o=j();return y(()=>fe(e,o).map(s=>({...s,added:!0})),[e])},We=()=>{let e=H();return Y(o=>{let t=$(o,e);D(t)},500)};r();n();var Pe=f(tt());var He=()=>{var h,A;let{currentNetworkUniqueId:e}=(0,Pe.useSelector)(pe),o=xe({netWorkId:e?String(e):void 0}),{data:t,loading:a,run:s}=je(),i=t==null?void 0:t.supportNetworkList,m=a&&!((h=t==null?void 0:t.supportNetworkList)!=null&&h.length),_=!!i&&i.length>0,c="";if(e!==""){let u=o==null?void 0:o.coinId;c=((A=(i||[]).find(l=>l.coinId===u))==null?void 0:A.name)||""}let w=`${O}?network=${c}`;return{supportCustomCoin:_,customCryptoPath:w,customCoinLoading:m,reloadCustomNetworkData:s}};r();n();var te=f(S());r();n();var Ze=f(ce());var U=f(S());var Ge=({search:e})=>{let o=(0,Ze.useHistory)(),t=z();return U.default.createElement(ie.State,{className:L["empty-box"],title:U.default.createElement(U.default.Fragment,null,U.default.createElement(g.Text,{wrap:!0,size:g.SIZE.sm,align:g.ALIGN.center,className:L["search-text"]},e),t("wallet_search_text_search_no_results")),buttonText:t("wallet_manage_crypto_text_add_custom_crypto"),onButtonClick:()=>{o.push(O)}})};var Ke=({loadingMore:e,searchCoins:o,renderCoin:t,search:a})=>te.default.createElement(v,{itemKey:"coinId",dataSource:o,renderItem:t,loadingMore:e,renderEmpty:()=>te.default.createElement(Ge,{search:a})});r();n();var F={"wallet-coin__manage":"_wallet-coin__manage_javif_1",walletCoinManage:"_wallet-coin__manage_javif_1","wallet-coin__manage__search":"_wallet-coin__manage__search_javif_4",walletCoinManageSearch:"_wallet-coin__manage__search_javif_4","wallet-coin__manage__spin":"_wallet-coin__manage__spin_javif_8",walletCoinManageSpin:"_wallet-coin__manage__spin_javif_8","wallet-coin__manage__spin__hidden":"_wallet-coin__manage__spin__hidden_javif_11",walletCoinManageSpinHidden:"_wallet-coin__manage__spin__hidden_javif_11","wallet-coin__manage__spin__auto":"_wallet-coin__manage__spin__auto_javif_14",walletCoinManageSpinAuto:"_wallet-coin__manage__spin__auto_javif_14","wallet-coin__manage__spin__custom":"_wallet-coin__manage__spin__custom_javif_17",walletCoinManageSpinCustom:"_wallet-coin__manage__spin__custom_javif_17","wallet-coin__manage__tag__title":"_wallet-coin__manage__tag__title_javif_21",walletCoinManageTagTitle:"_wallet-coin__manage__tag__title_javif_21","fade-enter":"_fade-enter_javif_25",fadeEnter:"_fade-enter_javif_25","fade-added-enter":"_fade-added-enter_javif_26",fadeAddedEnter:"_fade-added-enter_javif_26","fade-enter-active":"_fade-enter-active_javif_30",fadeEnterActive:"_fade-enter-active_javif_30","fade-added-enter-active":"_fade-added-enter-active_javif_31",fadeAddedEnterActive:"_fade-added-enter-active_javif_31",fade:"_fade_javif_25","fade-added":"_fade-added_javif_26",fadeAdded:"_fade-added_javif_26","fade-leave-active":"_fade-leave-active_javif_41",fadeLeaveActive:"_fade-leave-active_javif_41","fade-added-leave-active":"_fade-added-leave-active_javif_42",fadeAddedLeaveActive:"_fade-added-leave-active_javif_42"};var ot=()=>{let e=(0,$e.useHistory)(),o=z(),{customCryptoPath:t,supportCustomCoin:a,customCoinLoading:s,reloadCustomNetworkData:i}=He(),{searchListRef:m,search:_,searchCoins:c,onSearch:w,searchLoading:h,searchLoadingMore:A}=Ue(),u=!!_,l=Oe(),{unAddedList:E,unAddedListRef:C,unAddedLoading:I,unAddedLoadingMore:b}=De(l,u),R=We(),M=(l==null?void 0:l.length)>1,B=ze();(0,d.useEffect)(()=>{i()},[]);let Je=J=>d.default.createElement(X,{isSearchStatus:u,coin:J,onAction:R,deleteAddedCoinAbled:M}),oe=J=>d.default.createElement(X,{isSearchStatus:u,coin:J,deleteAddedCoinAbled:M,onAction:B}),re=_?h:I;return d.default.createElement(x.Container,{className:"wallet-coin__manage"},d.default.createElement(we,{offsetTop:0},d.default.createElement(Ae,{sticky:!1,closeable:!1,onBack:()=>{e.push(Ce)},title:o("wallet_manage_crypto_maintitle_manage_crypto")}),a&&d.default.createElement(x.Box,{className:F["wallet-coin__manage__search"]},d.default.createElement(V.Search,{value:_,size:V.SIZE.md,placeholder:o("wallet_manage_crypto_placeholder_search_coin"),onChange:w}))),d.default.createElement(x.Spin,{ref:u?m:C,className:(0,Ye.default)(F["wallet-coin__manage__spin"],re?F["wallet-coin__manage__spin__hidden"]:F["wallet-coin__manage__spin__auto"]),loading:re,size:ne.SIZE.lg},!u&&!!a&&d.default.createElement(x.Spin,{loading:s&&!I},d.default.createElement(v.Cell,{className:F["wallet-coin__manage__spin__custom"],isLink:!0,to:t,title:o("wallet_manage_crypto_text_custom_crypto")})),u&&d.default.createElement(Ke,{itemKey:"coinId",searchCoins:c,search:_,renderCoin:oe,loadingMore:A}),!u&&d.default.createElement(qe,{list:l,renderCoin:Je}),!u&&d.default.createElement(Me,{unAddedList:E,unAddedLoading:I,unAddedLoadingMore:b,renderCoin:oe})))},Sr=d.default.memo(ot);export{Sr as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=CoinManage-7J3CQV7I.js.map
