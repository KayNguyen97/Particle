import{a as Ts,c as hs,d as dc,e as An}from"./chunk-E7LWIYAX.js";import{a as uc}from"./chunk-F73PGHJD.js";import{a as gt}from"./chunk-IRW6W6VZ.js";import{a as cc}from"./chunk-DGBNQO62.js";import{a as fn,b as pn,c as or,d as ac,e as mc,f as H,g as No,h as Cn,i as fc,m as pc,n as lc}from"./chunk-YUPFXNBJ.js";import{a as gn}from"./chunk-TEHLR7K7.js";import{a as ln}from"./chunk-HDBJAEKO.js";import"./chunk-2N4YHUFI.js";import{a as Nm}from"./chunk-5SDFP3VE.js";import{a as vt,b as vm}from"./chunk-6K5ISA27.js";import{a as Dm}from"./chunk-WAZ4Y276.js";import{a as Lm,b as Mm}from"./chunk-WB3OW5ND.js";import{a as bm,c as km}from"./chunk-T4PHD5ZN.js";import{a as wm,b as en}from"./chunk-E5AYNHUH.js";import"./chunk-MIPXVBPR.js";import{a as ym}from"./chunk-CAHNM26J.js";import{a as Pm,b as tn}from"./chunk-HX3FTBPA.js";import{a as Em}from"./chunk-NC54FPSJ.js";import"./chunk-IKPPHICM.js";import{b as Bm}from"./chunk-TLDPVFFH.js";import{a as ya,d as _a,m as xm}from"./chunk-HR4SA7Z5.js";import"./chunk-X43FDTPV.js";import{a as _m,b as Fm}from"./chunk-MHASEPVA.js";import"./chunk-ZGEQVSMJ.js";import"./chunk-5OUYE6NE.js";import"./chunk-GQOO5OO7.js";import"./chunk-WIOZQWEG.js";import{a as at,b as Qr,d as Cm,f as Im,h as Sm,i as Tm,j as As,l as jr,p as on,r as hm}from"./chunk-DPVVGFWQ.js";import{b as xa}from"./chunk-67PEY2GN.js";import{b as Ft,c as wo}from"./chunk-JVE4G6JP.js";import{a as Xr,b as lm,c as be,d as gm,e as Am}from"./chunk-VNHZZRMI.js";import{a as dm,c as fm,d as pm}from"./chunk-5TSD6WDE.js";import"./chunk-TPBDSGSX.js";import"./chunk-K24OHEUM.js";import{a as io}from"./chunk-H5KDYYS6.js";import{a as cm}from"./chunk-I2KPNTIF.js";import{b as ha}from"./chunk-MEW6SUUR.js";import{a as Ee,b as gs}from"./chunk-D6O2GLPR.js";import{a as ba,c as Bo}from"./chunk-2CPFAAZ7.js";import{a as Ur}from"./chunk-ZG26PGPF.js";import{$ as eo,A as _e,B as Nt,F as $a,G as Ya,H as st,I as Ja,J as Xa,K as Qa,L as ja,M as Y,N as $t,O as om,P as tm,Q as J,S as em,T as nm,V as sm,X as it,Y as Fe,Z as Yr,_ as im,a as Wa,aa as Jr,ba as am,ca as mm,d as zr,e as bt,f as T,g as kt,h as B,i as xe,j as Va,k as W,l as wt,m as G,n as Ga,o as Ha,p as qr,q as Ho,r as Bt,s as Ka,t as Zr,u as za,v as F,w as qa,x as Za,y as ye,z as $r}from"./chunk-HE77KLJ4.js";import"./chunk-NOZM7AA3.js";import{b as Ta}from"./chunk-73YQ4YAD.js";import"./chunk-OEVJ7FDO.js";import"./chunk-ATUBFYS2.js";import{b as Fa,d as Pa,e as Ea}from"./chunk-HG2HGCVV.js";import{a as ke}from"./chunk-X2HBIQ56.js";import{n as rm}from"./chunk-YLO74Q7W.js";import{a as Pe}from"./chunk-D54UDGZS.js";import"./chunk-2SGW2RXR.js";import"./chunk-ZXEHJOAD.js";import"./chunk-U3YDJ2W7.js";import"./chunk-VCWU5FEX.js";import"./chunk-KZ77CGYD.js";import{a as ls}from"./chunk-7CB4COOY.js";import"./chunk-RDZIVMHO.js";import{a as Rr}from"./chunk-E73QHIZ6.js";import{c as yt,e as Te,f as Mr,i as Ia}from"./chunk-E2KMZQ6K.js";import{a as Ca}from"./chunk-JXT6JCNO.js";import{a as um}from"./chunk-AHAXQBXQ.js";import"./chunk-DUZ4ULSN.js";import{a as xo}from"./chunk-PGPPXRV7.js";import"./chunk-54GDJWA6.js";import"./chunk-UGYRJNZG.js";import{a as _t}from"./chunk-PLVZLQPX.js";import"./chunk-QNVM7T5C.js";import"./chunk-7T7NBYQH.js";import"./chunk-FEET7RP6.js";import{e as Or}from"./chunk-MBJ4MFYL.js";import{c as Sa}from"./chunk-PCY622ND.js";import"./chunk-NS35PZCP.js";import"./chunk-XOD56IFT.js";import"./chunk-BBN3UGKM.js";import{a as Lr}from"./chunk-5DEIKYJL.js";import"./chunk-QMNAWRVI.js";import"./chunk-D6ZXZUY6.js";import"./chunk-QMF5LKVF.js";import"./chunk-VMACN7YR.js";import"./chunk-IQVVVGEA.js";import{a as Br}from"./chunk-D4LPLMJ4.js";import"./chunk-PGY6IZUS.js";import{b as Zo}from"./chunk-AXKCDQTS.js";import"./chunk-JWFSXEUV.js";import{c as Wi,e as Vi,f as Gi,g as Hi,h as Ki}from"./chunk-PD2BTUUF.js";import"./chunk-YCMOAOGN.js";import"./chunk-JLLMIXPD.js";import"./chunk-UVVG5NXG.js";import{A as $m,B as Ym,C as Lt,D as Jm,E as Xm,F as Qm,G as jm,H as oc,I as tc,J as je,K as ec,L as Is,M as Ss,N as rc,O as nc,P as $o,R as cn,S as sc,T as un,U as ic,V as dn,W as Le,b as Rm,c as we,d as Om,e as Um,f as Wm,g as Vm,h as rn,i as Be,j as Ne,k as Gm,l as Dt,m as Cs,n as Hm,o as Km,p as zm,q as qm,r as Ko,s as Zm,t as nn,v as ve,w as sn,x as an,y as De,z as mn}from"./chunk-C3KORCEI.js";import"./chunk-EXUJ54CX.js";import{A as Ma,B as Hr,C as Qe,D as Ra,E as Oa,H as Et,I as M,J as U,K as yo,N as Ua,P as nt,Q as he,R as Kr,b as et,c as ka,f as j,g as Wr,h as Vr,k as wa,l as Ba,m as rt,p as Pt,q as Na,s as va,w as Da,x as Gr,z as La}from"./chunk-BTS2GOAC.js";import{c as Xe,d as fs,e as tt,g as Ie,h as na,n as sa}from"./chunk-2HWABU7H.js";import"./chunk-APEQZGKB.js";import{n as to}from"./chunk-P2BTSOJO.js";import"./chunk-SI3RW2CS.js";import"./chunk-AX4SXHC6.js";import"./chunk-UCS37WXR.js";import{d as Mi,e as Ri}from"./chunk-DUHXKIBS.js";import"./chunk-QNEJI55N.js";import{d as zi,e as qi,f as Zi,g as $i}from"./chunk-5W7SRP5N.js";import"./chunk-YVRXETFX.js";import"./chunk-GUWGENNL.js";import"./chunk-WYB2CUAN.js";import"./chunk-B2BOSVTW.js";import"./chunk-GUJXW3GJ.js";import"./chunk-VIS7KIVI.js";import"./chunk-F64VYES3.js";import"./chunk-DHX2X277.js";import{b as ps}from"./chunk-67YO4IPY.js";import"./chunk-DLUAVD7X.js";import"./chunk-WRWXCAEZ.js";import"./chunk-OZ6XSJY6.js";import"./chunk-DMJQUOJT.js";import{A as ga,c as Se,d as xt,e as aa,m as ma,n as ca,q as ua,r as da,s as fa,u as pa,z as la}from"./chunk-MTMZQEHP.js";import{a as Aa}from"./chunk-NKTQMEXG.js";import{b as Ol,f as ea,h as ot,i as ra,l as Ce}from"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import"./chunk-4OTZHHYZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import{M as Wo,c as kr}from"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import"./chunk-S3ECGMEP.js";import"./chunk-PX7HII6H.js";import{b as bi}from"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import"./chunk-TPEASXIF.js";import{a as ia}from"./chunk-JSAFBAMQ.js";import"./chunk-A336VZZF.js";import{b as ue}from"./chunk-XEOGXIVD.js";import"./chunk-PCGRDRHF.js";import{l as Je,p as ko}from"./chunk-IU3TYIWS.js";import{A as ji,C as oa,D as ta,b as ro,d as ge,j as Ae,n as Ji,o as lo,q as Go,r as Xi,s as Qi,t as Zt,y as ht}from"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import{f as Pr,l as Fi,p as ms,s as Ei}from"./chunk-X2LENRE7.js";import{a as Nr,ab as Yi,f as Vo,ma as vr,na as Dr,oa as le}from"./chunk-O4EDZSHP.js";import{k as mo}from"./chunk-HU3KBV5G.js";import{b as E}from"./chunk-6ZPGW3YM.js";import"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import{d as X,f as Eo}from"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import"./chunk-FLCN6MAI.js";import{a as pe,b as Tt}from"./chunk-YMZEQGAL.js";import"./chunk-7E3KY4EN.js";import{e as Er}from"./chunk-JIRWXBHS.js";import{a as Ml}from"./chunk-3TVEFIPW.js";import{P as pt,S as Di,U as qt,V as Li,Y as lt,Z as oo,b as Uo,d as Ni,m as vi,n as cs,q as us,r as St,s as ds,t as de,u as fe,v as wr}from"./chunk-UXFKODVN.js";import{c as Oi,f as Ui}from"./chunk-IMRS4RGO.js";import{a as ki}from"./chunk-52GWQSZH.js";import{a as ho}from"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import{d as br,h as wi,i as jo,p as v,r as Bi}from"./chunk-RMQJRDTF.js";import{c as po}from"./chunk-2YLR7R2N.js";import{a as Oo,b as ce}from"./chunk-MVLY6WUP.js";import{c as hi,f as Qo,h as me}from"./chunk-ZEAKIEIQ.js";import{a as Pi,b as Ye}from"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{Bb as Fr,C as fo,D as Xo,Da as mi,Ea as ci,Ga as ui,H as xr,Ha as di,Ia as fi,Ja as pi,K as ei,Ka as li,L as ri,La as gi,Pa as ao,Pb as xi,Q as ni,R as si,Ra as Ai,S as ii,Va as Ci,Vb as To,_ as ai,aa as yr,ab as is,ic as yi,jb as Ii,kc as _i,ma as Kt,nb as Si,nc as Ll,ob as _r,pb as Ti,q as O,rb as zt,sb as bo,tb as So,ub as Co,v as L,vb as ft,xb as Ro,yb as as,zb as It}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{E as Tr,H as hr,b as js,e as Sr,o as oi,q as Ht,r as ti}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{J as Ir,P as ae,V as Gt,c as ie}from"./chunk-C2H3SRET.js";import{a as _}from"./chunk-V4YVDLI4.js";import{a as Rl}from"./chunk-I5ORFFYN.js";import"./chunk-AMJPJAQW.js";import"./chunk-XRV6EHVP.js";import"./chunk-UXBKFN2U.js";import"./chunk-HCW4K7TR.js";import"./chunk-Z4JATHZR.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import{b as Dl}from"./chunk-IYYFWVWL.js";import"./chunk-ZRKMRDGI.js";import"./chunk-K2CHCG7Q.js";import"./chunk-3FBBK33H.js";import"./chunk-KTHMEYYS.js";import"./chunk-GT57MMCB.js";import"./chunk-HIGM7FFU.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import"./chunk-RYNAOZ73.js";import"./chunk-PR4SLUV4.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f,m as r,n as g,o as n}from"./chunk-6V2G2Z5W.js";r();n();var qo=f(_()),Wt=f(ho()),Nl=f(Xo());r();n();var Me=f(_()),In=f(E()),gc=f(ho());var Ul=()=>{let o=(0,gc.useHistory)(),t=(0,In.useDispatch)(),e=(0,In.useSelector)(ka),s=(0,Me.useRef)(e);return s.current=e,(0,Me.useEffect)(()=>{var m;let{fromPage:a}=((m=o.location)==null?void 0:m.state)||{};return a&&t(Da(a)),t(Gr(!0)),()=>{s.current&&(t(Kr()),t(dn()))}},[]),null},Ac=(0,Me.memo)(Ul);r();n();r();n();zt();r();n();var hc=f(_());r();n();var Rt=f(_());fo();r();n();r();n();var Mt=f(_());function Wl({loading:o,tag:t,customRender:e,focus:s,noMargin:a,noPadding:m,onChange:i,onRef:c,...d}){let A=mo(),l=(0,Mt.useRef)(null);return(0,Mt.useLayoutEffect)(()=>{var u;s&&((u=l.current)==null||u.focus())},[]),Mt.default.createElement(gt.Row,{noMargin:a,noPadding:m},Mt.default.createElement(Ht.TextArea,{placeholder:A("wallet_extension_transaction_placeholder_input_address"),errorType:Ht.TIP_TYPE.always,size:Ht.SIZE.xl,autoResize:!0,...d,onRef:u=>{l.current=u,c&&c(u)},onChange:u=>{i&&i(u.target.value)},customRender:({inputComponent:u})=>{let p=Mt.default.createElement(gt.InputCustomRender,{inputComponent:u,loading:o,tag:t});return e?e({inputComponent:u,customInputComponent:p}):p}}))}var xs=Wl;r();n();var go=f(_()),Yt=f(E()),tr=f(Xo()),Ic=f(ie());fo();r();n();var Cc={selected:"_selected_1fq8b_1"};function Vl({value:o,network:t}){let e=(0,Yt.useDispatch)(),s=(0,Yt.useSelector)(et),[a,m]=(0,go.useState)(!1),[i,c]=(0,go.useState)({}),[d,A]=(0,go.useState)(""),l=Ea(()=>{A(ln.TYPE.ADD),c({address:o,network:t}),m(!0)}),u=(C={})=>{m(!1),c({}),A(""),C.name&&e(Qe({name:C.name,type:cs.ADDRESS_BOOK}))},p=C=>{m(!1),setTimeout(()=>{A(ln.TYPE.EDIT),c({...C,network:t}),m(!0)})};return go.default.createElement(go.default.Fragment,null,go.default.createElement(gt.InputBottomBar,{title:L("wallet_extension_send_errortip_not_in_address_book"),buttonTitle:L("wallet_extension_send_anchor_add_now"),buttonClick:l}),a&&go.default.createElement(ln,{type:d,data:i,onClose:u,onChangeToEdit:p,onBackToHome:()=>s}))}function Gl({visible:o,options:t,onSelect:e,onChange:s}){let a=(0,Yt.useDispatch)();if(!o)return null;let m=({walletId:i,address:c,name:d,type:A,group:l,addressType:u})=>{if(e(),s(c),d){let p=l?`${l} - ${d}`:d;a(Qe({name:p,type:A,extra:{walletId:i,group:l,name:d,addressType:u}}))}};return go.default.createElement(gt.SelectAddress,{options:t,onSelect:m})}function Hl(o,t,e){let s=(e==null?void 0:e.matchAddress)||((a,m)=>(0,tr.toLower)(m.address).includes((0,tr.toLower)(a))||m.name&&(0,tr.toLower)(m.name).includes((0,tr.toLower)(a)));return(0,go.useMemo)(()=>{if(!(o!=null&&o.length))return[];if(!t)return o;let a=[];return o.forEach(({group:m,list:i})=>{let c=[];i.forEach(d=>{s(t,d)&&c.push(d)}),c.length&&a.push({group:m,list:c})}),a},[o,t])}function Kl({value:o,error:t,onChange:e,isCheckingError:s,extraProps:a,onBlur:m,onFocus:i,...c}){let d=(0,Yt.useDispatch)(),A=bt(),{coin:l}=T(),{localType:u}=l,p=(0,Yt.useSelector)(Vr),C=F(),{filterAddress:S,disableRequestDomain:I}=a||{},h=!o,x=!!o&&!t&&!(p!=null&&p.name)&&!s,y=Pa(u,C),P=(0,go.useMemo)(()=>S?S(y):y,[y,S]),[b,k]=(0,go.useState)((!o||!!t)&&!x&&(P==null?void 0:P.length)>0),w=Hl(P,o,a),Q=Fa(u),q=R=>{e(R);let $=Q(R),no=Boolean(R&&$);d(Qe(no?$:null))},{loading:V,abort:D}=Wa({domainInputValue:o,coinId:A},({address:R,domain:$})=>{d(Hr({key:"",args:{}})),e(R),d(Qe({name:$,type:cs.ENS}))},I),Z=Xi(!!V||!!c.loading||!!s,{wait:200});return ta(()=>{s||(!!o&&!t&&w.length===0?k(!1):!!t&&(w==null?void 0:w.length)>0&&k(!0))},[o,t,s,w==null?void 0:w.length],{wait:100}),go.default.createElement("div",{className:(0,Ic.default)({[Cc.selected]:b})},go.default.createElement(gt.Row,{noMargin:b},go.default.createElement(xs,{...c,noMargin:!0,noPadding:!0,loading:Z,tag:p==null?void 0:p.name,focus:h,value:o,error:!Z&&t,onChange:q,onBlur:R=>{o&&!t&&setTimeout(()=>{k(!1)},100),m&&m(R)},onFocus:R=>{(w==null?void 0:w.length)>0&&k(!0),i&&i(R)}}),x&&go.default.createElement(Vl,{network:u,value:o})),go.default.createElement(Gl,{visible:b,extraProps:a,value:o,options:w,onSelect:()=>{D(),k(!1)},onChange:e}))}var ys=Kl;r();n();var Sn=f(_()),er=f(E());fo();function zl({Component:o=ys,loading:t=!1,extraProps:e,errorFns:s={fns:[],override:!1}}){let a=(0,er.useDispatch)(),m=(0,er.useSelector)(j),i=(0,er.useSelector)(Wr),c=Xa(),{isCheckingError:d,runErrorFns:A}=_e(c,s),l=p=>{A(p,C=>{a(Hr(C))})},u=p=>{l(p),a(Ma(p))};return(0,Sn.useEffect)(()=>{a(La(d))},[d]),Sn.default.createElement(o,{value:m,onChange:u,loading:t,isCheckingError:d,error:i!=null&&i.key?L(i==null?void 0:i.key,i==null?void 0:i.args):null,extraProps:e||{}})}var _s=zl;r();n();var Sc={content:"_content_12kl2_1"};function ql({headerProps:o={},addressProps:t={},confirmButtonProps:e={}}){let s=Za(),a=qa(),m=ye(),i=(0,Rt.useMemo)(()=>{let{disabled:c,loading:d,onClick:A,...l}=e||{},u=c||s;return[{disabled:u,btnText:L("wallet_extension_send_btn_next_step"),actionType:Bo.ACTION_TYPE.CONFIRM,loading:!u&&(d||a),onClick:A||m,...l}]},[e,s,a,m]);return Rt.default.createElement(fn,{slot:{header:Rt.default.createElement(pn,{...o,title:L("wallet_extension_send_title_recipient_address")}),footer:Rt.default.createElement(Bo,{buttonGroup:i})}},Rt.default.createElement("div",{className:Sc.content},Rt.default.createElement(_s,{...t})))}var K=ql;r();n();var Zl=()=>{let{coin:o}=T();return ro(async t=>{try{if(!o||o.baseCoinId===0)return null;let{register:e}=await Aa({address:t,contractAddress:o.address});return e?null:{key:"wallet_extension_note_address_not_register",args:{token:o.symbol}}}catch{return null}})},Tc=()=>[Zl()];var $l=()=>{let o=Tc();return hc.default.createElement(K,{addressProps:{errorFns:o}})},xc=$l;r();n();var Pc=f(_());r();n();var yc=f(_()),_c=f(E());var Yl=()=>{let[o,{setFalse:t}]=lo(!0),{coin:e}=T(),s=F(),a=(0,_c.useDispatch)(),{coinId:m}=e;return(0,yc.useEffect)(()=>{m&&s&&(async()=>{try{let c={coinId:m,address:s},d={fromAddr:s},{maxGasAmount:A,gasUnitPrice:l,fee:u}=await pa(c,d);a(M(u)),a($m({maxGasAmount:A,gasUnitPrice:l})),a(U(!1))}catch{a(U(!0))}finally{t()}})()},[m,s]),o},Fc=Yl;function Jl(){let o=Fc();return Y(),Pc.default.createElement(H,{confirmButtonProps:{loading:o}})}var Ec=Jl;r();n();var Rc=f(_());r();n();var Io=f(_());fo();r();n();var bc=f(_()),kc=f(E());To();function wc(){let o=(0,kc.useDispatch)(),t=wt(),e=it();(0,bc.useEffect)(()=>{if(t){let s=e;Ro(s,0)&&(s="0"),o(Ra(s))}},[t,e])}var rr=f(E());r();n();var Fs=f(E()),Xl=()=>{var d;let o=wt(),t=T(),e=(0,Fs.useSelector)(Na),s=Ho(),a=(d=t==null?void 0:t.coin)==null?void 0:d.coinId,m=W(),i=Ia(a,m,{currencyId:s,formatted:!1}),c=(0,Fs.useSelector)(wa);return ge(()=>{let A=0,l=0;return e===Ta?(o?l=i:l=c,A=void 0):(A=m,l=void 0),[{currencyId:s,coinAmount:A,currencyAmount:l,coinId:a}]},[e,s,a,o,i,c,m])},Bc=Xl;r();n();var Ps={};r();n();var Nc=f(_());var Ql=({loading:o,chainName:t,feeLevel:e,onClick:s,...a},m)=>{let i=G(),c=Bt(),d=Ho(),A=Ha(),l=qr(),u=vt(),p=s?()=>{s(),m({trade:"send",network:t,all_confirmation:"network_fee"})}:void 0,C=(0,Nc.useMemo)(()=>{var S;return e!==void 0?e:(S=pt)==null?void 0:S.STANDARD},[e]);return{gasReturn:u,currencyId:d,networkFee:A&&i==="0"?void 0:i,loading:o||A,level:C,coinId:c,estimateFailed:!!l,onClick:p,...a}},vc=Ql;r();n();var Dc=f(ho()),jl=({disabled:o,onSubmit:t,feeLoading:e,loading:s,onClick:a,networkFee:m,renderActions:i,...c},d)=>{let A=(0,Dc.useHistory)(),l=kt(),{coin:u}=T(),p=F(),{loading:C,onClick:S}=mm(t),I=am();return ge(()=>{if(i&&typeof i=="function"){let x=i(d);if(x)return x}if([oo.BALANCE_INSUFFICIENT,oo.FEE_BALANCE_INSUFFICIENT].includes(d)){let x=d===oo.BALANCE_INSUFFICIENT?u==null?void 0:u.coinId:l==null?void 0:l.coinId;return[{actionType:Bo.ACTION_TYPE.CANCEL,onClick:()=>{A.goBack()}},{coinId:x,address:p,actionType:Bo.ACTION_TYPE.FILL_UP}]}let h={};return[lt.DEFRAUD,lt.SIMILAR].includes(d)&&(h={type:Gt.TYPE.red}),[{loading:s||C,disabled:o||I||e,actionType:Bo.ACTION_TYPE.CONFIRM,onClick:a||S,...h,...c}]},[e,s,u==null?void 0:u.coinId,I,S,o,d,l==null?void 0:l.coinId,p,C,a,c])},Lc=jl;function og({loading:o,headerProps:t={},networkFeeProps:e={},confirmButtonProps:s={},slot:a={},checkEmpty:m=!0,addressType:i,renderMessage:c,defaultMessage:d,canTransferAmount:A,blockAddressInfo:l={}}){var N;let u=(0,rr.useSelector)(j),p=(0,rr.useSelector)(Vr),C=Ie(),S=Em(C),I=(0,rr.useSelector)(va),h=(0,rr.useSelector)(Om),x=F(),y=Bc(),{coin:P,baseCoin:b}=T(),k=vc({...e,chainName:P==null?void 0:P.chainName},S),{loading:w,estimateFailed:Q}=k,q=k==null?void 0:k.gasReturn,V=(N=q==null?void 0:q.activity)==null?void 0:N.errorCode,{fee:D,footer:Z,top:R,beforeFee:$,bottom:no}=a;ac(m),wc(),(0,Io.useEffect)(()=>{V===0&&bi({wallet_address:x,chain_id:b.chainId,transaction_type:"transfer"})},[V]);let co=Lc({...s,feeLoading:w},(I==null?void 0:I.type)||h);return Io.default.createElement(fn,{loading:o,className:Ps.root,slot:{top:R,header:Io.default.createElement(pn,{...t,title:L("wallet_extension_send_title_send")}),footer:Z||Io.default.createElement(Io.default.Fragment,null,Io.default.createElement(gs,{address:u,coinId:P==null?void 0:P.coinId,type:(I==null?void 0:I.type)||h||Q&&gs.TIP_TYPE.FEE_ERROR||js.TYPE.warn,renderMessage:c,message:(I==null?void 0:I.text)||!!(I!=null&&I.key)&&L(I.key,I==null?void 0:I.args)||!Q&&d,blockAddressInfo:l}),Io.default.createElement(Bo,{buttonGroup:co}))}},Io.default.createElement("div",{className:Ps.content},Io.default.createElement(tt,null,Io.default.createElement(ba,{summaryList:y,title:L("wallet_extension_send_colored_send")})),Io.default.createElement(tt,null,Io.default.createElement(fs,{address:x,addressType:i,title:L("extension_send_mid_text_from"),walletId:C,onCopyCallback:()=>{S({trade:"send",network:P==null?void 0:P.chainName,all_confirmation:"wallet_used_address"})}},!!A&&Io.default.createElement(Lm,{coinBalance:A})),Io.default.createElement(fs,{tags:p!=null&&p.name?[p==null?void 0:p.name]:null,address:u,title:L("extension_send_mid_text_to"),onCopyCallback:()=>{S({trade:"send",all_confirmation:"to_address",network:P==null?void 0:P.chainName})}})),$,D||Io.default.createElement(tt,null,Io.default.createElement(cm,{...k})),no))}var z=og;r();n();var Es=f(E());Eo();zt();To();var Mc=()=>{let o=io(),{coin:t}=T(),e=F(),s=eo(),a=(0,Es.useSelector)(j),m=(0,Es.useSelector)(Rm),{gasUnitPrice:i,maxGasAmount:c}=m;return Ft(async()=>await xt({address:e,coinId:t.coinId},{fromAddr:e,toAddr:a}),async(C={})=>{let{info:S={}}=C,{sequenceNumber:I,chainId:h,expirationTimestampSecs:x,tyArg:y}=S,P={sequenceNumber:I,chainId:h,maxGasAmount:c,gasUnitPrice:i,expirationTimestampSecs:x},b={recipientAddress:a,amount:s},k={base:{...P}};t.baseCoinId===0?(k.type=ds.TRANSFER,k.data={...b}):(k.type=ds.TOKEN_TRANSFER,k.data={...b,tyArg:y});let w=await X().signTransaction(k,e,is);return{signInfo:C,signedTx:w}},async({signInfo:C,signedTx:S})=>{let{info:I={}}=C,{sequenceNumber:h}=I,x={nonce:h},y=await xo(is,S),P={signedTx:S,coinAmount:s,coinId:t.coinId,fromAdr:e,toAdr:a,serviceCharge:bo(i,c),extJson:JSON.stringify(x),txHash:y};return await o(P)},C=>(to({tx_id:C}),C))};function tg(){let o=Mc(),t=async()=>{await o()};return J(),Rc.default.createElement(z,{confirmButtonProps:{onSubmit:t}})}var Oc=tg;var eg={match:o=>o===Ti,pages:{AddressPage:xc,AmountPage:Ec,ConfirmPage:Oc}},Uc=eg;r();n();r();n();var Gc=f(_());r();n();var rg=()=>{let{initialType:o}=na();return async t=>{let{isValid:e}=await $a(t);return e&&Oi(o)?{key:"wallet_extensions_hardware_alert_taproot_unsupported",args:{}}:null}},ng=()=>[rg()],Wc=ng;r();n();ao();var nr=f(_()),Vc=f(ho()),sg=()=>{let{coinId:o}=(0,Vc.useParams)(),t=yt(o),e=t==null?void 0:t.protocolId,s=Object.values(v),a=ea(),m=a.filter(({keyringIdentityType:u})=>Ui(u)),i=a.filter(({keyringIdentityType:u})=>u===wi.MPC),c=(u,p)=>!u.some(({walletIdentities:C})=>C.some(({addressType:S={}})=>{let I=S[xr];return I?I.some(({address:h})=>p.address===h):!1})),d=(0,nr.useCallback)(u=>s.includes(e)?c(m,u):!0,[m,e,s]),A=(0,nr.useCallback)(u=>[v.BRC_20,v.BRC_20S].includes(e)?!0:s.includes(e)?c(i,u):!0,[i,e,s]),l=(0,nr.useCallback)((u=[])=>u.filter(p=>d(p)&&A(p)),[d,A]);return(0,nr.useCallback)(u=>u.map(p=>({...p,list:l(p==null?void 0:p.list)})).filter(p=>{var C;return(C=p==null?void 0:p.list)==null?void 0:C.length}),[l])},Tn=sg;var ig=()=>{let o=Wc(),t=Tn();return Gc.default.createElement(K,{addressProps:{errorFns:o,extraProps:{filterAddress:t}}})},Hc=ig;r();n();var Jt=f(_());fo();ao();r();n();var vo=f(_());fo();var ag=({addressType:o,showManageUTXO:t,NFTAmountDisplay:e,isCheckFinished:s})=>{let a=kt(),{coin:m,baseCoin:i}=T(),c=(0,vo.useCallback)(d=>{let A="";return d.key&&(A=L(d==null?void 0:d.key,d==null?void 0:d.args)),(d==null?void 0:d.type)===oo.BALANCE_INSUFFICIENT?(t&&(A=L("wallet_extension_mid_text_btc_insufficient",{value:e})),vo.default.createElement(vo.default.Fragment,null,A," ",vo.default.createElement(po.Box,{className:Ts.wrap},t&&vo.default.createElement(hs,{addressType:o,coinId:i==null?void 0:i.coinId}),vo.default.createElement(or,{coin:m,receiveOnly:!0})))):(d==null?void 0:d.type)===oo.FEE_BALANCE_INSUFFICIENT?(t&&(A=L("wallet_extension_mid_text_btc_insufficient",{value:e})),vo.default.createElement(vo.default.Fragment,null,A," ",vo.default.createElement(po.Box,{className:Ts.wrap},t&&vo.default.createElement(hs,{addressType:o,coinId:i==null?void 0:i.coinId}),vo.default.createElement(or,{coin:a})))):A},[e,o,i==null?void 0:i.coinId,m,a,t]);return s?c:null},Kc=ag;r();n();var Do=f(_()),sr=f(E());r();n();var zc=f(Xo()),cg=()=>{let o=(0,sr.useDispatch)(),t=(0,sr.useSelector)(Vm),e=(0,Do.useCallback)(s=>{o(Qm({selectedNetworkFeeLevel:s}))},[]);return[t==null?void 0:t.selectedNetworkFeeLevel,e]},ug=()=>{let o=bt(),t=(0,sr.useDispatch)(),e=F(),s=B(),a=ot(),m=yt(o),i=m==null?void 0:m.protocolId,c=Im(i),d=(m==null?void 0:m.baseCoinId)||o,A=Or(e,a,m==null?void 0:m.localType),l=xe(),u=G(),p=W(),C=Zr(),S=it(),I=Ka(),h=lm({protocolId:i,address:e,coinId:d}),{inscriptionOutput:x,minOutput:y}=h||{},[P,b]=cg(),k=P==null?void 0:P.satBytes;(0,Do.useEffect)(()=>{var uo;if(!k&&(h==null?void 0:h.normal)&&b({level:pt.STANDARD,satBytes:h==null?void 0:h.normal}),k&&(P==null?void 0:P.level)!==pt.CUSTOM){let Ze=h[(uo=_m[P==null?void 0:P.level])==null?void 0:uo.satBytes];b({...P,satBytes:Ze})}},[h]);let w=Te(o,void 0,{addressType:A}),Q=(0,Do.useMemo)(()=>o===22?546:c?i===v.SRC_20?x||790:"0":p,[o,c,p,i,x]),q=(0,Do.useMemo)(()=>{var uo;if((m==null?void 0:m.address)&&[v.RUNES,v.ARC_20,v.RUNEMAIN].includes(i))return(0,zc.last)((uo=m==null?void 0:m.address)==null?void 0:uo.split("-"))},[m==null?void 0:m.address,i]),[,V]=Tm({coinId:o,walletId:a,protocolId:i,tick:q,address:e,coinAmount:p,utxoType:at.BRC20_CONVERTIBLE},{ready:m&&c&&i!==v.SRC_20}),D=(0,Do.useMemo)(()=>!c||v.SRC_20===i||!(V!=null&&V.length)?null:v.RUNES===i?[{address:s,amount:y,data:{id:q,amount:p}}]:v.RUNEMAIN===i?[{address:s,amount:y,data:{id:q,amount:p}}]:[{address:s,amount:Number(p),...Cm(V[0],i)}],[q,c,y,i,p,s,V]),Z=(0,Do.useMemo)(()=>{if(V!=null&&V.length)return V.map(({txHash:uo,vout:Ze})=>`${uo}-${Ze}`)},[V]),R=(0,Do.useMemo)(()=>!(!m||!k||i&&c&&i!==v.SRC_20&&!(V!=null&&V.length)),[m,c,i,k,V==null?void 0:V.length]),$=(0,Do.useMemo)(()=>{if(c&&i===v.SRC_20)return{body:JSON.stringify({p:"src-20",op:"transfer",tick:m==null?void 0:m.name,amt:l})}},[m==null?void 0:m.name,c,i,l]),no=(0,Do.useMemo)(()=>i===v.SRC_20?{protocolId:i,utxoType:at.BRC20_CONVERTIBLE}:{utxoType:at.TRANSFER,needFilteredUtxo:[v.RUNES,v.ARC_20,v.RUNEMAIN].includes(i)?Z:void 0},[Z,i]),[co,N]=As({coinId:o,walletId:a,satBytes:k,address:e},{onSuccess:uo=>{t(o!==22&&!c?nt(uo):nt(w==null?void 0:w.coinAmountInt)),t(he(uo))}}),[Po,Mo]=As({coinId:o,walletId:a,protocolId:i,tick:q,address:e,coinAmount:"0",utxoType:at.BRC20_CONVERTIBLE},{ready:[v.RUNES,v.ARC_20,v.RUNEMAIN].includes(i),onSuccess:uo=>{t(nt(uo))}}),[Vt,Js,Ar]=on({coinId:o,toAddr:s,walletId:a,fromAddr:e,satBytes:k,inputs:V,outputs:D,networkFee:u,revealOutValue:x,coinAmount:Q,utxoParams:no,inscriptionData:$,canTransferAmount:o===22||c?C:I,...o===22?{omni:{coinType:31,amount:p}}:{}},{ready:R,onSuccess:uo=>{t(M(uo)),t(U(!1))},onError:uo=>{t(U(uo))}}),Cr=(0,Do.useMemo)(()=>[v.RUNES,v.ARC_20,v.RUNEMAIN].includes(i)?N===void 0||Mo===void 0:N===void 0,[N,i,Mo]);return{coin:m,toAddr:s,coinId:o,walletId:a,signInfo:h,feeError:Ar,fromAddr:e,protocolId:i,baseCoinId:d,feeLoading:Vt,addressType:A,sendAmountInt:p,networkFeeInt:u,transferInputs:V,transferOutputs:D,isXrc20Token:c,utxoParams:no,initLoading:Cr,mergedCoinAmount:Q,src20InscriptionData:$,sendCoinAvailableAmount:S,availableSendCoinAmountInt:I,availableFeeCoinAmountInt:C,selectedNetworkFeeLevel:P,setSelectedNetworkFeeLevel:b,loading:co||Vt||Po}},hn=ug;r();n();var qc=f(_());fo();var Zc=o=>{let t=bt(),e=yt(t),s=(e==null?void 0:e.baseCoinId)===0,m=(e==null?void 0:e.protocolId)===v.ARC_20,i=O.div(o,10**(e==null?void 0:e.decimals)),c=it(),d=O.mul(i,2);return(0,qc.useCallback)(A=>{if(!o)return null;if(m){if(O.lte(c,d)&&A!==c)return{key:"extension_defi_errortip_fail_meet_dust_limit",args:{amount:c,token:e==null?void 0:e.symbol},type:oo.COMMON_ERROR};if(O.gt(c,d)&&O.lt(O.sub(c,A),i))return{key:"extension_defi_errortip_fail_546more",args:{num1:o,token:e==null?void 0:e.symbol,num2:O.sub(c,o)},type:oo.COMMON_ERROR}}return(s||m)&&O.lt(A,i)?{key:"wallet_extension_send_transfer_at_least",args:{amount:`${i} ${e==null?void 0:e.symbol}`},type:oo.COMMON_ERROR}:null},[o,e==null?void 0:e.symbol,d,m,s,i,c])},$c=o=>{let t=Zc(o);Y([t])},Yc=o=>{let t=Zc(o);J([t])};r();n();var Jc={"amount-page__available_balance__icon":"_amount-page__available_balance__icon_69wv8_1",amountPageAvailableBalanceIcon:"_amount-page__available_balance__icon_69wv8_1"};function dg(){var u;let{coin:o,coinId:t,signInfo:e,initLoading:s,addressType:a}=hn();$c(e==null?void 0:e.minOutput);let m=(u=br[o==null?void 0:o.localType])==null?void 0:u[a],{showManageUTXO:i,NFTAmountDisplay:c,isCheckFinished:d}=gn(o,m,!0),A=Kc({showManageUTXO:i,NFTAmountDisplay:c,isCheckFinished:d,addressType:m}),l=(0,Jt.useMemo)(()=>t===Kt?"extension_defi_bot_popuptext_current_balance_coverage":(o==null?void 0:o.protocolId)===v.SRC_20?"extension_defi_tooltip_text_balance_udpate":(o==null?void 0:o.protocolId)===v.ARC_20?"extension_defi_tooltip_text_utxo_exclude":(o==null?void 0:o.protocolId)===v.RUNEMAIN?"extension_defi_hover_text_avail_balance":null,[o==null?void 0:o.protocolId,t]);return Jt.default.createElement(H,{isGlobalLoading:s,renderError:A,totalAmountProps:{type:"amount",title:Jt.default.createElement(Jt.default.Fragment,null,L("extension_defi_text_available_balance"),!!l&&Jt.default.createElement(ue,{size:ue.SIZE.xxs,tooltip:L(l),icon:"okx-wallet-plugin-information-circle",className:Jc["amount-page__available_balance__icon"]}))}})}var Xc=dg;r();n();var Lo=f(_());var su=f(ho()),iu=f(E());ao();r();n();var Re=f(_());fo();r();n();var Qc={"fillup-enter":"_fillup-enter_117qj_1",fillupEnter:"_fillup-enter_117qj_1"};var fg=(o,t,e)=>{let[s,a]=Mr(o),m=(s==null?void 0:s.baseCoinId)===0;return(0,Re.useCallback)(i=>{if(!t)return null;let c=null;return i===Ee.BALANCE_INSUFFICIENT&&(c=L("wallet_transfer_errortip_insufficient_balance",{chainSymbol:s==null?void 0:s.symbol})),i===Ee.FEE_BALANCE_INSUFFICIENT&&(c=L(m?"wallet_extension_popup_adjust_add":"wallet_extension_popup_insufficient_network_fee",{token:a==null?void 0:a.symbol,symbol:a==null?void 0:a.symbol})),c?Re.default.createElement(Re.default.Fragment,null,c,Re.default.createElement(ko.Text,{inherit:!0,className:Qc["fillup-enter"],onClick:e},L("wallet_extension_placeorder_textbtn_replenish",{token:a.symbol}))):null},[a.symbol,s==null?void 0:s.symbol,m,e,t])},jc=fg;r();n();var ou=f(_()),tu=f(ho()),eu=f(Ol());var ru=f(E());fo();var pg=({addressType:o,showManageUTXO:t,loading:e,baseCoinId:s})=>{let a=(0,tu.useHistory)(),m=(0,ru.useDispatch)();return(0,ou.useCallback)(i=>t&&(i===Ee.BALANCE_INSUFFICIENT||i===Ee.FEE_BALANCE_INSUFFICIENT)?[{actionType:Bo.ACTION_TYPE.CANCEL,onClick:()=>{a.goBack()}},{onClick:async()=>{await m(Gr(!1));let c=eu.default.stringify({addressType:o,coinId:s},{skipEmptyString:!0,skipNull:!0}),d=c?`?${c}`:"";a.push(Yi+d)},actionType:Bo.ACTION_TYPE.CONFIRM,btnText:L("wallet_extension_mid_textbtn_manage_utxo")}]:null,[o,m,a,e,t])},nu=pg;var lg=546;function gg(){var Xs;let o=(0,su.useHistory)(),[t,{toggle:e}]=lo(!1),{coin:s,coinId:a,toAddr:m,loading:i,walletId:c,fromAddr:d,signInfo:A,utxoParams:l,protocolId:u,baseCoinId:p,feeLoading:C,addressType:S,isXrc20Token:I,networkFeeInt:h,sendAmountInt:x,transferInputs:y,transferOutputs:P,mergedCoinAmount:b,availableSendCoinAmountInt:k,selectedNetworkFeeLevel:w,setSelectedNetworkFeeLevel:Q,src20InscriptionData:q}=hn(),V=Ho(),D=(0,iu.useSelector)(et),Z=(Xs=br[s==null?void 0:s.localType])==null?void 0:Xs[S],{showManageUTXO:R}=gn(s,Z,!0),[$,{toggle:no}]=lo(!1);Yc(A==null?void 0:A.minOutput,a);let co=Ce(c),[N,Po]=(0,Lo.useState)(!1),Mo=ro(()=>{no()},[]),Vt=jc(a,R,Mo),Js=nu({addressType:Z,showManageUTXO:R,loading:i,baseCoinId:p}),Ar=Sm({coinId:a,walletId:c,address:d,utxoType:at.TRANSFER,satBytes:w==null?void 0:w.satBytes,...l}),Cr=hm({coinId:a,toAddr:m,walletId:c,fromAddr:d,protocolId:u,networkFee:h,localType:s==null?void 0:s.localType,outputs:P,inscriptionData:q,dustSize:I||A==null?void 0:A.minOutput,satBytes:w==null?void 0:w.satBytes,coinAmount:a===22?lg:x,...a===22?{omni:{coinType:31,amount:x}}:{},extraPublishParams:{coinAmount:x,txType:I?Uo.BRC20_SEND:Uo.TRANS_OUT}}),uo=jr({coinId:a,currencyId:V,txType:I?Uo.BRC20_SEND:Uo.TRANS_OUT,protocolId:u,address:d}),Ze=(0,Lo.useCallback)(async()=>{if(await Pe()){let $e=[];$e=await Ar(b,h),$e=[...y||[],...$e],await uo($e,()=>{o.goBack()}),Po(!0);let Qs=await Cr({utxoList:$e});return o.push(D),to({tx_id:Qs}),Qs}return Po(!1),Promise.reject()},[Ar,b,h,y,uo,Cr,o,D]),vl=(0,Lo.useMemo)(()=>[v.RUNES,v.ARC_20,v.RUNEMAIN].includes(u)&&!(y!=null&&y.length)?!0:i,[i,u,y==null?void 0:y.length]);return Lo.default.createElement(Lo.default.Fragment,null,Lo.default.createElement(z,{addressType:S,confirmButtonProps:{disabled:vl,renderActions:Js,onSubmit:Ze},networkFeeProps:{onClick:e,loading:C,feeLevel:w==null?void 0:w.level},renderMessage:Vt,defaultMessage:p===Kt&&(A==null?void 0:A.transferReminder),canTransferAmount:a===Kt&&k}),Lo.default.createElement(Ur,{walletId:c,address:d,visible:$,closeCallback:no,coinId:p,receiveOnly:!0}),Lo.default.createElement(Fm,{visible:t,coinId:p,signInfo:A,currencyId:V,estimatedFee:h,value:w,onChange:Q,onToggleVisible:e}),Lo.default.createElement(Mm,{visible:co&&N}))}var au=gg;r();n();var mu=f(_());function Ag({children:o}){let e=_t().get("from");return mu.default.createElement(No,{fromAddress:e},o)}var cu=Ag;var Cg={match:o=>Vi(o),Container:cu,pages:{AddressPage:Hc,AmountPage:Xc,ConfirmPage:au}},uu=Cg;r();n();r();n();var pu=f(_());r();n();var du=f(Xo());ao();var Ig=()=>{let o=st(),t=Hi(),e=Lr({factionType:yr});return[o,async s=>(await Promise.all(t.map(i=>{let c=kr(e,i);return Nt(s,i,c)}))).some(du.identity)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}]},fu=Ig;var Sg=()=>{let o=fu();return pu.default.createElement(K,{addressProps:{errorFns:{fns:o,override:!0}}})},lu=Sg;r();n();var Cu=f(_());r();n();var gu=f(E());To();Eo();r();n();var xn=f(_());ao();function bs(){let{baseCoin:o}=T(),t=B(),[e,s]=(0,xn.useState)(!1),a=Lr({factionType:yr});return(0,xn.useEffect)(()=>{(async()=>{let i=kr(a,o.coinId),c=await Nt(t,o==null?void 0:o.coinId,i);s(!c)})()},[o,t]),e}var Tg=async({memo:o,fromAddress:t,toAddress:e,amountInt:s,isIBCTransfer:a,baseCoin:m,signInfo:i,isMPC:c})=>{let{chainId:d,sequence:A,accountNumber:l,feeDemon:u,demon:p,sourceChannel:C,normal:S,gasLimit:I}=i,h={chainId:d,sequence:A,accountNumber:l,feeDemon:u,feeAmount:bo(S,I),gasLimit:I,memo:o,fake:c},x={fromAddress:t,toAddress:e,demon:p,amount:s},y={};if(a){let b=Co(Math.round(Date.now()/1e3),300);y={...h,type:de.IBC_TRANSFER,data:{...x,sourcePort:"transfer",sourceChannel:C,ibcTimeoutTimestamp:b}}}else y={...h,type:de.TRANSFER,data:{...x}};return await X().signTransaction(y,t,m.localType)},hg=()=>{let o=(0,gu.useDispatch)(),[t,{setFalse:e}]=lo(!0),{coin:s}=T(),{coinId:a}=s,m=F(),i=B(),c=eo(),d=bs(),A=Ce();return Qi(()=>{a&&i&&c!=="0"&&(async()=>{try{let u=await la({coinId:a,from:m,to:i}),p=await Tg({memo:"",fromAddress:m,toAddress:i,amountInt:c,isIBCTransfer:d,baseCoin:s,signInfo:u,isMPC:A}),C=await ga({coinId:a,from:m,inputData:p}),S=Math.ceil(bo(u.normal,C));o(M(S)),o(un({inputData:p,signInfo:u,gasLimit:C,isIBCTransfer:d})),o(U(!1))}catch{o(U(!0))}finally{e()}})()},[a,m,i,c,d]),t},Au=hg;function xg(){let o=Au();return Y(),Cu.default.createElement(H,{confirmButtonProps:{loading:o}})}var Iu=xg;r();n();var Yo=f(_());var _n=f(E());r();n();var Ot=f(_());fo();r();n();var ir={"memo-input":"_memo-input_lyg1e_1",memoInput:"_memo-input_lyg1e_1","memo-input-box":"_memo-input-box_lyg1e_1",memoInputBox:"_memo-input-box_lyg1e_1","memo-input-core":"_memo-input-core_lyg1e_4",memoInputCore:"_memo-input-core_lyg1e_4","memo-title__link":"_memo-title__link_lyg1e_7",memoTitleLink:"_memo-title__link_lyg1e_7"};var yg=({value:o,onChange:t,placeholder:e})=>{let s=um();return Ot.default.createElement(tt,{bordered:!1},Ot.default.createElement(Xe,{title:Ot.default.createElement(ki,{href:s==null?void 0:s.sendMemoInput,className:ir["memo-title__link"]},Ot.default.createElement(ko.Text,{inherit:!0},L("wallet_extension_title_memo_optional")))},Ot.default.createElement(Ht.TextArea,{placeholder:e||L("wallet_extension_input_memoinfro"),size:Ht.SIZE.xl,autoResize:!0,value:o,onChange:t,maxLength:256,className:ir["memo-input"],inputClassName:ir["memo-input-core"],innerClassName:ir["memo-input-box"]})))},Oe=(0,Ot.memo)(yg);r();n();var yn=f(E());To();Eo();var _g=o=>{let{coin:t,baseCoin:e}=T(),s=F(),a=eo(),m=(0,yn.useSelector)(j),i=(0,yn.useSelector)(rt),{gasLimit:c,signInfo:d,isIBCTransfer:A,gasPrice:l}=(0,yn.useSelector)(an),u=io();return wo(async()=>{if(!await Pe())throw new Error("mpc error")},async()=>{let{chainId:h,sequence:x,accountNumber:y,feeDemon:P,demon:b,sourceChannel:k}=d,w={chainId:h,sequence:x,accountNumber:y,feeDemon:P,feeAmount:i,gasLimit:c,memo:o},Q={fromAddress:s,toAddress:m,demon:b,amount:a},q={};if(A){let D=Co(Math.round(Date.now()/1e3),300);q={...w,type:de.IBC_TRANSFER,data:{...Q,sourcePort:"transfer",sourceChannel:k,ibcTimeoutTimestamp:D}}}else q={...w,type:de.TRANSFER,data:{...Q}};return await X().signTransaction(q,s,e.localType)},async h=>{let x={memo:o,gasPrice:l,gasLimit:c},y=await xo(t.localType,h),P={signedTx:h,coinAmount:a,coinId:t.coinId,fromAdr:s,toAdr:m,serviceCharge:i,extJson:JSON.stringify(x),txHash:y};return await u(P)},h=>(to({tx_id:h}),h))},Su=_g;r();n();function ks({coinId:o,feeInfo:t,callback:e}){let s=qr();return{coinId:o,level:t.gasType,loading:!s&&t.initLoading,networkFee:!s&&t.initLoading?void 0:t.gasFee,estimateFailed:s||t.error,onClick:()=>{e()}}}function Fg(){let o=(0,_n.useDispatch)(),[t,e]=(0,Yo.useState)({}),[s,{toggle:a}]=Ji(!1),{coin:m}=T(),{coinId:i}=m,c=F(),d=B(),A=eo(),l=(0,_n.useSelector)(an),u=ks({coinId:i,feeInfo:t,callback:a}),[p,C]=(0,Yo.useState)(""),S=Su(p),I=async()=>{await S()},h=y=>{C(y.target.value)},x=y=>{e(y),o(M(y.gasFee)),o(U(u.estimateFailed)),o(un({...l,gasLimit:y.gasAmount,gasPrice:y.gasPriceStep}))};return J(),Yo.default.createElement(Yo.default.Fragment,null,Yo.default.createElement(z,{confirmButtonProps:{onSubmit:I},slot:{bottom:Yo.default.createElement(Yo.default.Fragment,null,Yo.default.createElement(Oe,{value:p,onChange:h}),Yo.default.createElement(cc,{visible:s,coinId:String(i),address:c,inputData:l.inputData,to:d,value:A,onBack:a,onClose:a,onChange:x}))},networkFeeProps:u}))}var Tu=Fg;var Pg={match:o=>Gi(o),pages:{AddressPage:lu,AmountPage:Iu,ConfirmPage:Tu}},hu=Pg;r();n();r();n();var bu=f(_());r();n();var Eg=()=>{let{baseCoin:o}=T();return ro(async t=>{let e=Zo(t,o.localType);return await Nt(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},bg=()=>{let o=st(),t=Eg();return[o,t]},xu=bg;r();n();var Pu=f(E());r();n();ao();var kg=()=>{let o=dm(),t=pm(),e=fm();return async({coinId:a,from:m,to:i,amount:c,inputData:d,localType:A})=>{let l=[qt.SAFE_ADDRESS,qt.CONTRACT_ADDRESS];A===ri&&l.push(qt.TRON_PERMISSTION);let u=await o({checkTypes:l,coinId:a,from:m,to:i,amount:c,txType:Li.TRANSFER,inputData:d||"0x"}),{result:p,msg:C}=u[qt.TRON_PERMISSTION]||{},S=u[qt.SAFE_ADDRESS],I={...S,...u[qt.CONTRACT_ADDRESS],tronPermission:{msg:C,wrongPermission:!p},address:i};return await e({...S,...S==null?void 0:S.blackAddressWarning}),await t(I),I}},Fn=kg;r();n();var _u=f(_()),Fu=f(E());r();n();var yu=({contractAddress:o,toAddress:t,amount:e})=>{try{let s=`data:application/vnd.facet.tx+json;rule=esip6,{"op":"call","data":{"to":"${o}","function":"transfer","args":{"to":"${t}","amount":"${e}"}}}`;return g.Buffer.from(s).toString("hex")}catch{return""}};var wg=()=>{let{coin:o}=T(),t=Zo(B(),o.localType),e=eo(),s=(0,Fu.useSelector)(Be),{info:a}=s||{},{isFacet:m,facetContractAddress:i}=a||{};return(0,_u.useMemo)(()=>!o.address||!Ya(t)?"":m?yu({contractAddress:i,toAddress:t,amount:e}):ke(t,e),[o,t,e,m,i])},Ue=wg;var Bg=()=>{let o=(0,Pu.useDispatch)(),[t,{setTrue:e,setFalse:s}]=lo(!1),{coin:a}=T(),m=F(),i=B(),c=W(),d=Ue(),{coinId:A}=a,l=ye(),u=Fn();return{onClick:async()=>{try{e();let C=await u({coinId:A,from:m,to:i,amount:c,inputData:d}),{isDefraud:S,isSimilar:I,blackAddressWarning:h}=C;S?(o(Lt(lt.DEFRAUD)),o(Le(h))):I?(o(Lt(lt.SIMILAR)),o(Le(h))):o(Lt("")),l()}catch(C){console.log(C)}finally{s()}},loading:t}},Eu=Bg;var Ng=()=>{let o=xu(),{onClick:t,loading:e}=Eu();return bu.default.createElement(K,{addressProps:{errorFns:{fns:o,override:!0}},confirmButtonProps:{onClick:t,loading:e}})},ku=Ng;r();n();var ws=f(_()),vu=f(Xo());r();n();var wu=f(_()),Bu=f(E());function vg(){let o=(0,Bu.useDispatch)(),{coin:t}=T();(0,wu.useEffect)(()=>{t.systemToken&&o(Et(t.coinId))},[t.coinId])}var Nu=vg;var Dg=()=>{let o=xe(),e=!!Va().key||(0,vu.isNil)(o)||o==="",s=em(),a=mc({disabled:e,onClick:s});return Y(),Nu(),ws.default.createElement(H,{slot:{footer:ws.default.createElement(Bo,{buttonGroup:a})}})},Du=Dg;r();n();var Ns=f(_());var vs=f(E());r();n();var Pn=f(E());var Lg=()=>{let o=(0,Pn.useDispatch)(),t=G(),e=(0,Pn.useSelector)(Ne),{gasLimit:s,gasPrice:a,maxPriorityFeePerGas:m,maxFeePerGas:i,supportEip1559:c,extFee:d,gasPriceInfo:A,gasLimitInfo:l,gasType:u}=e,{minGasFee:p}=ya({gasLimit:s,gasPrice:a,maxPriorityFeePerGas:m,maxFeePerGas:i,supportEip1559:c,extFee:d,gasPriceInfo:A,gasLimitInfo:l,gasType:u});return{feeLevel:u,networkFee:p,maxNetworkFee:t,onClick:()=>{o(je(!0))}}},Lu=Lg;r();n();var Mu=f(E());var Mg=()=>{let o=(0,Mu.useSelector)(Ne),{coin:t}=T(),e=eo(),s=F(),a=B();return{fetchParams:{coinId:t.coinId,from:s,to:a,amount:e,gasPrice:o.gasPrice},userGasInfo:o,baseCoinAmountUse:t.baseCoinId===0?e:"0"}},Ru=Mg;r();n();var ar=f(E());Eo();zt();To();Ll();r();n();var Ou=f(_());var Rg=()=>(0,Ou.useCallback)(o=>{try{typeof o=="string"&&!!o&&to({tx_id:o})}catch(t){console.log(t)}},[]),En=Rg;var Og=()=>{let o=(0,ar.useDispatch)(),{coin:t}=T(),e=sm(),s=Yr(),a=W(),m=wt(),i=F(),c=B(),d=Zo(i,t.localType),A=Zo(c,t.localType),l=Ie(),{activityId:u,activity:p,status:C,tip:S}=vt(),I=Ue(),h=(0,ar.useSelector)(Dt),x=(0,ar.useSelector)(Be),{info:y}=x||{},P=En(),b=(D,Z)=>{let{userGasInfo:R}=Z,{updateGasInfo:$}=D;return $?{...$,gasLimit:R.gasLimit,supportEip1559:R.supportEip1559,networkFee:R.networkFee}:{...R}},k=D=>{let Z=D.supportEip1559?D.maxFeePerGas:D.gasPrice,R=(D==null?void 0:D.networkFee)||bo(Z,D.gasLimit),$=ft(s,R);if(Ro($,0))return[!1,a];if(t.baseCoinId===0)return m?[It($,0),$]:[as(a,$),a];let no=e;t.systemToken&&(no=ft(no,R));let co=m?no:a;return[as(co,no),co]},w=({updateData:D,finallyGasInfo:Z,publishAmountInt:R})=>{var Mo;let{nonce:$}=D,no=R,co=(Mo=Ii(t.localType))==null?void 0:Mo.realChainIdHex,N={from:d,gasLimit:Tt(Z.gasLimit),nonce:Tt($),chainId:co};return Z.supportEip1559?(N.maxFeePerGas=Tt(Z.maxFeePerGas),N.maxPriorityFeePerGas=Tt(Z.maxPriorityFeePerGas),N.type=vi.FEE_MARKET):N.gasPrice=Tt(Z.gasPrice),y!=null&&y.isFacet?(N.value="0",N.to=y==null?void 0:y.facetBlackHoleAddress,N.data=I):t.address?(N.value="0",N.to=Zo(t.address,t.localType),N.data=I):(N.value=Tt(no),N.to=A,h&&(N.data=h)),Ei(N)},Q=({txParams:D,publishAmountInt:Z})=>{let R={...D};return t.systemToken&&(R.value=yi(Tt(Z))),R.walletId=l,R},q=({txParams:D,publishAmountInt:Z,dataForCheck:R={}})=>{let{userGasInfo:$={}}=R,no=pe(D.value),co=pe(D.gasLimit),N=pe($.supportEip1559?D.maxFeePerGas:D.gasPrice),Po={...D,value:no,from:i,to:c,gas:co,gasPrice:N,priorityFee:pe($.supportEip1559?D.maxPriorityFeePerGas:0),nonce:pe(D.nonce),repeatTxType:Ni.CONFIRMING,oldTxHash:"",gasType:$==null?void 0:$.gasType};return{coinId:t.coinId,coinAmount:Z,fromAdr:i,toAdr:c,serviceCharge:bo(co,N),extJson:JSON.stringify(Po),txSource:jo.NORMAL,inputData:D.data?D.data:"",activityId:u}};return async(D,Z={})=>{let R=b(D,Z),[$,no]=k(R);if(!$)throw new Error("balance check error");let co=w({updateData:D,finallyGasInfo:R,publishAmountInt:no}),N=Q({txParams:co,publishAmountInt:no}),Po=q({txParams:co,publishAmountInt:no,dataForCheck:Z});_i({activityId:u,activity:p,status:C,tip:S,walletId:l,address:d}),await o(zi({txParams:N,walletId:l}));let Mo=await X().signAndPublishTransferTransaction({signParams:N,from:co.from,baseChain:Ai,publishParams:Po});P(Mo)}},Uu=Og;r();n();var Bs=f(_()),bn=f(E());r();n();var We={wrapper:"_wrapper_17089_1",root:"_root_17089_4",titleClass:"_titleClass_17089_7",headerClassName:"_headerClassName_17089_10",contentClassName:"_contentClassName_17089_13"};function Ug({errorMsg:o}){let t=(0,bn.useDispatch)(),{coin:e}=T(),s=(0,bn.useSelector)(Dt),a=m=>{t(ec(m))};return e.baseCoinId!==0?null:Bs.default.createElement(tt,{className:We.wrapper},Bs.default.createElement(Pm,{className:We.root,titleClass:We.titleClass,headerClassName:We.headerClassName,contentClassName:We.contentClassName,value:s,onChange:a,error:o,autoResize:!0}))}var Wu=Ug;var Wg=()=>{let o=Lu(),t=Ru(),e=za(),s=ym(),a=Uu(),{clear:m}=vt(),i=(0,vs.useSelector)(Dt),c=tn(i),d=async()=>{var l;try{let u=await s({...t.fetchParams,userGasInfo:t.userGasInfo,baseCoinAmountUse:t.baseCoinAmountUse,whetherCheckRepeat:!0,onRepeatCancel:e});await a(u,t)}catch(u){if((u==null?void 0:u.message)===xm)throw new Error(Jr);{let p=(l=u==null?void 0:u.data)==null?void 0:l.originalError;throw Ri(p==null?void 0:p.code)&&m?(m(),p):u}}},A=(0,vs.useSelector)(mn);return J(),Ns.default.createElement(z,{slot:{beforeFee:Ns.default.createElement(Wu,{errorMsg:c})},networkFeeProps:o,confirmButtonProps:{disabled:!!c,onSubmit:d},blockAddressInfo:A})},Vu=Wg;r();n();var zo=f(_()),Ut=f(E()),Ku=f(ho());r();n();var Gu=f(E());function Vg(){let{coin:o}=T(),t=F(),e=Ga(),s=(0,Gu.useSelector)(Ne);return ha({txType:Mi.transfer,coinId:o.coinId,fromAddress:t,unavailable:s.gasType===pt.CUSTOM,fee:e})}var Hu=Vg;var Gg=(0,zo.memo)(()=>{let o=(0,Ut.useDispatch)(),t=(0,Ku.useHistory)(),e=(0,zo.useRef)(!1),s=(0,zo.useRef)(!1),a=(0,Ut.useSelector)(Pt),m=(0,Ut.useSelector)(Gm),i=(0,Ut.useSelector)(et),{coin:c}=T(),d=F(),A=B(),l=Zo(d,c.localType),u=Zo(A,c.localType),p=Ue(),C=(0,Ut.useSelector)(Dt),S=c.baseCoinId===0?C:p,I=W(),h=Ho(),x=(0,Ut.useSelector)(Be),{info:y}=x||{},{isFacet:P,facetBlackHoleAddress:b}=y||{},{disabled:k,fetchOnce:w}=(0,zo.useMemo)(()=>{let N=null,Po=c.baseCoinId===0&&tn(C);return a&&(c.baseCoinId!==0||!Po)&&(N=+new Date),{disabled:Po,fetchOnce:N}},[c.baseCoinId,C,a]),Q=vt(),q=(0,zo.useMemo)(()=>P?b:c.baseCoinId===0?u:c.address,[c.baseCoinId,c.address,u,P,b]),V=()=>{e.current||s.current?o(U(!0)):o(U(!1))},D=ro(N=>{o(oc((N==null?void 0:N.signInfo)||{}))}),Z=ro(N=>{var Vt;o(tc(N)),o(yo(N==null?void 0:N.isNetworkFeeLoading));let Po=N.supportEip1559?N.maxFeePerGas:N.gasPrice,Mo=N.networkFee;Po==="0"?s.current=!0:s.current=!1,(Vt=N==null?void 0:N.gasLimitInfo)!=null&&Vt.queryGasLimitErrorUseDefault?e.current=!0:e.current=!1,o(M(Mo)),V()}),R=()=>{o(je(!1))},$=()=>{o(je(!1)),t.push(i||Nr)},no=()=>{e.current=!1},co=()=>{e.current=!0};return zo.default.createElement(_a,{currencyId:h,visible:m,coinId:c.coinId,address:l,inputData:S,tokenAddress:q,value:c.address?"0":I,gasLimitOptions:{fetchOnce:w,disabled:k,onFetchSuccess:no,onFetchError:co},estimatedL1FeeOptions:{fetchOnce:w,disabled:k},onBack:R,onClose:$,onServerDataChange:D,onGasChange:Z,gasReturn:Q})}),Hg=({children:o})=>{let t=Hu();return zo.default.createElement(vm,{gasReturn:t},o,zo.default.createElement(Gg,null))},zu=Hg;var Kg={match:o=>Wi(o),Container:zu,pages:{AddressPage:ku,AmountPage:Du,ConfirmPage:Vu}},qu=Kg;r();n();zt();r();n();var od=f(_());r();n();var Zu=f(_()),$u=f(E());To();var zg=()=>{let o=(0,$u.useDispatch)(),[t,{setFalse:e,setTrue:s}]=lo(!0),a=Dm(),{coin:m,baseCoin:i}=T(),c=F(),d=B(),{coinId:A}=m;return(0,Zu.useEffect)(()=>{A&&c&&d&&(async()=>{try{s();let{data:u}=await Se({coinId:A,address:c},{fromAddr:c,toAddr:d}),p=await a({coinId:A,from:c,chainId:i.chainId}),{info:C}=u,{fee:S,rent:I,solRent:h,computeUnitPrice:x,feelimit:y}=C;if(S){let{priorityFee:P,priorityGasPrice:b,priorityGasLimit:k}=Bm(y,x,p);o(M(Co(S,P))),o(U(!1)),o(Ss({computeUnitPrice:b||"",computeUnitLimit:k||""}))}else o(M("0")),o(U(!0));o(Is({selfRent:h||"",toRent:I||""}))}catch{o(M("0")),o(U(!0)),o(Is({selfRent:"",toRent:""})),o(Ss({computeUnitPrice:"",computeUnitLimit:""}))}finally{e()}})()},[A,c,d]),t},Yu=zg;r();n();var mr=f(_()),kn=f(E());To();var Ju=()=>{let{selfRent:o,toRent:t}=(0,kn.useSelector)(Cs),{coin:e}=T(),s=it();return(0,mr.useCallback)(a=>{if(e.baseCoinId!==0)return null;let m=So(t,10**e.decimals);if(Ro(a,m))return{key:"walletextension_toast_text_minimum_rent_fee",args:{number:m},type:oo.COMMON_ERROR};let i=ft(s,a),c=So(o,10**e.decimals);return Ro(i,c)&&It(i,"0")?{key:"walletextension_toast_text_reserve_rent_exempt",args:{number:c},type:oo.COMMON_ERROR}:null},[s,t,o])},Xu=()=>{let{selfRent:o,toRent:t}=(0,kn.useSelector)(Cs),{coin:e,baseCoin:s}=T(),a=(0,kn.useSelector)(rt),m=Yr();return(0,mr.useCallback)(()=>{if(e.baseCoinId===0)return null;let i=Co(a,o);return Ro(m,i)?{key:"walletextension_toast_text_insufficient_balance_initiate_transaction",args:{token:s.symbol,number:So(i,10**s.decimals)},type:oo.COMMON_ERROR}:Ro(m,Co(i,t))?{key:"walletextension_toast_text_reserve_rent_exempt",args:{number:So(Co(i,t),10**s.decimals)},type:oo.COMMON_ERROR}:null},[m,a,o])},Qu=()=>{let o=Ju(),t=Xu();Y([o,t])},qg=()=>{let o=Ju();return(0,mr.useCallback)(t=>{let e=o(t);return e?{...e,highlight:$t.AMOUNT}:null},[o])},Zg=()=>{let o=Xu();return(0,mr.useCallback)(t=>{let e=o(t);return e?{...e,highlight:$t.AMOUNT}:null},[o])},ju=()=>{let o=qg(),t=Zg();J([o,t])};function $g(){let o=Yu();return Qu(),od.default.createElement(H,{confirmButtonProps:{loading:o}})}var td=$g;r();n();var rd=f(_());r();n();var Xt=f(E());ao();var Yg=()=>{let o=io(),{coin:t}=T(),e=F(),s=(0,Xt.useSelector)(Wo),a=(0,Xt.useSelector)(j),m=eo(),i=(0,Xt.useSelector)(rt),c=(0,Xt.useDispatch)(),{computeUnitPrice:d,computeUnitLimit:A}=(0,Xt.useSelector)(Hm),{coinId:l}=t,u=async()=>await ma({coinId:l,address:e},{fromAddr:e,toAddr:a}),p=async()=>{if(t.baseCoinId===0||!a)return{haveTokenAccountAddress:!1,tokenAccountAddress:""};let y={coinId:l,address:a},{data:P={}}=await ca(y),{legal:b,tokenAccountAddress:k}=P;return{haveTokenAccountAddress:b,tokenAccountAddress:k}};return wo(async()=>{let[y,{haveTokenAccountAddress:P,tokenAccountAddress:b}]=await Promise.all([u(),p()]);return{recentBlockHash:y,haveTokenAccountAddress:P,tokenAccountAddress:b}},async(y={})=>{let{recentBlockHash:P,haveTokenAccountAddress:b}=y,k={from:e,to:a,amount:m,blockHash:P,payer:e,computeUnitPrice:d,computeUnitLimit:A},w={};return t.baseCoinId===0?w={...k,type:us.TRANSFER}:w={...k,type:us.TOKEN_TRANSFER,createAssociatedAddress:!b,mint:t.address},t.protocolType===Bi.SPL_TOKEN_2022&&(w.token2022=!0,w.decimal=t.decimals),await c(Zi(w,e,s))},async y=>{let P=await xo(ei,y),b={signedTx:y,coinAmount:m,coinId:t.coinId,fromAdr:e,toAdr:a,serviceCharge:i,txHash:P};return await o(b)},y=>(to({tx_id:y}),y))},ed=Yg;function Jg(){let o=ed(),t=async()=>{await o()};return ju(),rd.default.createElement(z,{confirmButtonProps:{onSubmit:t}})}var nd=Jg;var Xg={match:o=>o===Si,pages:{AddressPage:K,AmountPage:td,ConfirmPage:nd}},sd=Xg;r();n();zt();r();n();var dd=f(_());r();n();var id=f(_()),ad=f(E());zt();var Qg=()=>{let[o,{setFalse:t}]=lo(!0),{coin:e}=T(),s=F(),a=(0,ad.useDispatch)(),{coinId:m}=e;return(0,id.useEffect)(()=>{(async()=>{if(Number(m)!==_r){let d=await ua({coinId:m,address:s});a(Ym(d))}t()})()},[m,s]),o},md=Qg;r();n();var cd=f(E());r();n();var Bn=f(_()),wn=f(E());var jg=()=>{let o=(0,wn.useSelector)(we),t=(0,wn.useSelector)(j),e=W(),s=(0,wn.useSelector)(Wr),a=!t||!!s.key,[m,i]=(0,Bn.useState)("");return(0,Bn.useEffect)(()=>{(async()=>{if(!a)try{let d=await Br(t);i(o?ke(d,e):"")}catch(d){console.log(d)}})()},[o,a,t,e]),m},Nn=jg;var oA=()=>{let o=(0,cd.useDispatch)(),[t,{setTrue:e,setFalse:s}]=lo(!1),{coin:a}=T(),m=F(),i=B(),c=W(),d=Nn(),{coinId:A,localType:l}=a,u=ye(),p=Fn();return{onClick:async()=>{try{e();let S=await p({coinId:A,from:m,to:i,amount:c,inputData:d,localType:l}),{isDefraud:I,isSimilar:h,tronPermission:x,blackAddressWarning:y}=S;x&&x.wrongPermission?o(Xm({wrongPermission:x.wrongPermission,msg:x.msg})):I?(o(Lt(lt.DEFRAUD)),o(Le(y))):h?(o(Lt(lt.SIMILAR)),o(Le(y))):o(Lt("")),u()}catch(S){console.log(S)}finally{s()}},loading:t}},ud=oA;var tA=()=>{let o=md(),{onClick:t,loading:e}=ud();return dd.default.createElement(K,{confirmButtonProps:{onClick:t,loading:e||o}})},fd=tA;r();n();var ld=f(_());r();n();var Ds=f(_()),cr=f(E());var eA=()=>{let[o,{setTrue:t,setFalse:e}]=lo(!1),s=(0,cr.useDispatch)(),a=B(),m=(0,cr.useSelector)(we),i=(0,cr.useSelector)(Pt),c=W(),d=ht(c),A=Sa(),{coin:l}=T(),u=Nn(),{coinId:p}=l,C=async()=>{let I=m?"0":c,h={coinId:p,address:A},x={fromAddr:A,value:I,toAddr:a,inputData:u};try{let y=await fa(h,x);s(M(y)),s(U(!1))}catch{s(U(!0))}finally{e()}},{run:S}=Go(C,{wait:500});return(0,Ds.useEffect)(()=>{i&&(t(),S())},[i]),(0,Ds.useEffect)(()=>{i&&c!==d||(t(),S())},[c,u,i]),o},pd=eA;var rA=()=>{let o=pd();return Y(),ld.default.createElement(H,{confirmButtonProps:{loading:o}})},gd=rA;r();n();var Td=f(_());var hd=f(E());r();n();var Ad=f(E());var Cd=f(_());function nA(o,t){return(0,Cd.useCallback)(()=>o?{text:t,type:oo.COMMON_ERROR}:null,[o,t])}function Ls(){let o=(0,Ad.useSelector)(Um),t=nA(o.wrongPermission,o.msg);J([t])}r();n();var Qt=f(E()),Id=f(Ml());zt();var sA=()=>{let o=io(),{coin:t}=T(),e=F(),s=(0,Qt.useSelector)(j),a=(0,Qt.useSelector)(rt),m=(0,Qt.useSelector)(we),i=W(),c=(0,Qt.useDispatch)(),d=(0,Qt.useSelector)(Wo);return wo(async()=>{if(!await Pe())throw new Error("mpc error")},async()=>{let S=m?"0":i,I=await Br(s),h=m?ke(I,i):"",x={coinId:t.coinId,address:e};return await da(x,{fromAddr:e,toAddr:s,value:S,inputData:h})},async(S={})=>{let{info:I={}}=S,{timestamp:h,expiration:x,ref_block_bytes:y,ref_block_hash:P,feelimit:b,contractAddress:k,asset:w}=I,Q={fromAddress:e,toAddress:s,amount:i,timestamp:h,expiration:x,refBlockBytes:y,refBlockHash:P},q={};return t.baseCoinId===0?q={type:St.TRANSFER,data:Q}:m?q={type:St.TOKEN_TRANSFER,data:{...Q,feeLimit:b,contractAddress:k}}:q={type:St.ASSET_TRANSFER,data:{...Q,assetName:(0,Id.bufferToHex)(g.Buffer.from(w))}},await c($i(q,e,d))},async S=>{let I=await xo(Ci,S),h={signedTx:S,coinAmount:i,coinId:t.coinId,fromAdr:e,toAdr:s,serviceCharge:a,txHash:I};return await o(h)},S=>(to({tx_id:S}),S))},Sd=sA;function iA(){let o=Sd(),t=async()=>{await o()},e=(0,hd.useSelector)(mn);return Ls(),Td.default.createElement(z,{confirmButtonProps:{onSubmit:t},blockAddressInfo:e})}var xd=iA;var aA={match:o=>o===_r,pages:{AddressPage:fd,AmountPage:gd,ConfirmPage:xd}},yd=aA;r();n();r();n();var Mn=f(_());r();n();var Pd=f(_());var Ln=f(E());var Ed=f(Xo());r();n();var _d=f(ho());var Fd=f(E());function mA(){let{coinId:o}=(0,_d.useParams)(),t=F(),e=(0,Fd.useSelector)(j);return ro(async()=>{let m=await Se({coinId:o,address:t},{fromAddr:t,toAddr:e,value:"0"});return m==null?void 0:m.data})}var vn=mA;r();n();To();function cA(){let o=Ca();return(t,e,s)=>{let a=e||0,m=It(s,0)?So(a,s):"0",i=o[t];return xi(bo(m,10**(i.decimals||0)),0)}}var Dn=cA;function uA(){let o=(0,Ln.useDispatch)(),[t,e]=(0,Pd.useState)(!1),s=(0,Ln.useSelector)(Ba),a=vn(),m=rm(),i=Dn();return Ae(()=>{e(!0),(async()=>{var d;try{let A=await a(),l=(A==null?void 0:A.info)||{},u={};if(s!==-1)u=((l==null?void 0:l.coinFeeList)||[]).find(({coinId:C})=>C===s);else{let C=(0,Ed.sortBy)((l==null?void 0:l.coinFeeList)||[],S=>m(S.coinId).currencyAmount||0);C&&(u=C.pop())}let p=i(u==null?void 0:u.coinId,(d=l==null?void 0:l.methodFeeList)==null?void 0:d.transfer,u==null?void 0:u.rate);o(Et(u==null?void 0:u.coinId)),o(M(p)),o(Jm(l))}finally{e(!1)}})()}),t}var bd=uA;function dA(){let o=bd();return Y(),Mn.default.createElement(H,{confirmButtonProps:{loading:o}})}function fA(){let{coin:o}=T();return Mn.default.createElement(No,{fixed:!!o.vdecimalNum},Mn.default.createElement(dA,null))}var kd=fA;r();n();var jt=f(_());r();n();var wd=f(E());Eo();ao();function pA(){let o=io(),{coin:t}=T(),e=F(),s=(0,wd.useSelector)(j),a=G(),m=Bt(),i=eo(),c=vn(),{coin:d}=Rr(m,!1);return Ft(c,async(u={})=>{let{info:p={}}=u,{chainId:C,accountId:S,nonce:I,tokenId:h,coinFeeList:x=[]}=p,y=x.find(({coinId:k})=>k===m)||{},P={type:St.TRANSFER,accountId:parseInt(S,10),nonce:I,from:e,chainId:C,to:s,tokenId:parseInt(h,10),tokenSymbol:t.symbol,decimals:t.decimals,feeTokenId:parseInt(y.tokenId,10),feeTokenSymbol:d.symbol,feeDecimals:d.decimals,fee:a,amounts:i};return await X().signTransaction(P,e,ni)},async u=>{var y;let{signature:p,tx:C}=u||{},{txHash:S,...I}=C||{},h={txSource:jo.NORMAL,signedTx:JSON.stringify({fastProcessing:null,signature:p,tx:I}),fromAdr:e,coinAmount:i,coinId:t.coinId,toAdr:s,serviceCharge:(y=u==null?void 0:u.tx)==null?void 0:y.fee,txHash:S,extJson:JSON.stringify({serviceChargeCoinId:m})};return await o(h)})}var Bd=pA;r();n();var Fo=f(_()),Nd=f(ie());fo();var Rn=f(E());r();n();var Ve={"select-networkFee":"_select-networkFee_ct2da_1",selectNetworkFee:"_select-networkFee_ct2da_1","select-networkFee-content":"_select-networkFee-content_ct2da_4",selectNetworkFeeContent:"_select-networkFee-content_ct2da_4","select-networkFee-title":"_select-networkFee-title_ct2da_7",selectNetworkFeeTitle:"_select-networkFee-title_ct2da_7","select-networkFee-card-content":"_select-networkFee-card-content_ct2da_13",selectNetworkFeeCardContent:"_select-networkFee-card-content_ct2da_13","select-networkFee-card-content-disable":"_select-networkFee-card-content-disable_ct2da_16",selectNetworkFeeCardContentDisable:"_select-networkFee-card-content-disable_ct2da_16"};var lA=({coinId:o,feeCoinAmountInt:t,selectedCoinId:e,onSelect:s,setSupplyGas:a,...m})=>{let i=Te(o),c=i==null?void 0:i.coinAmountInt,d=O.gte(c,t);return Fo.default.createElement(ps.Card,{hovered:d,onClick:()=>{d&&(s==null||s({coinId:o,feeCoinAmountInt:t}))},selected:o===e},Fo.default.createElement(po.Space,{space:12,className:(0,Nd.default)(Ve["select-networkFee-card-content"],{[Ve["select-networkFee-card-content-disable"]]:!d})},Fo.default.createElement(ue,{size:ue.SIZE.lg,src:i==null?void 0:i.image,text:i==null?void 0:i.text}),Fo.default.createElement(po.Space,{space:2,direction:po.DIRECTION.vertical,...m},Fo.default.createElement(ko.Text,{strong:!0},i==null?void 0:i.symbol),Fo.default.createElement(ko.Text,{size:ko.SIZE.xs,type:ko.TYPE.secondary},d?L("developer_mode_send_text_balanceprice",{balance:Je(c,{decimals:i==null?void 0:i.decimals,useApproximate:!1})}):L("wallet_extension_placeorder_tooltips_insufficient",{token:i==null?void 0:i.symbol})))),!d&&Fo.default.createElement(Gt,{category:Gt.CATEGORY.fill,type:Gt.TYPE.gray,size:Gt.SIZE.xxs,onClick:A=>{A==null||A.stopPropagation(),a({supplyGasVisible:!0,supplyGasCoinId:o})}},L("extension_send_btn_fill_up_token",{token:i==null?void 0:i.symbol})))},gA=({visible:o,onToggle:t})=>{var h;let e=Bt(),s=(0,Rn.useDispatch)(),a=F(),m=Ie(),i=Dn(),[{supplyGasVisible:c,supplyGasCoinId:d},A]=ji({supplyGasVisible:!1,supplyGasCoinId:null}),l=(0,Rn.useSelector)(Wm),u=(l==null?void 0:l.coinFeeList)||[],p=(h=l==null?void 0:l.methodFeeList)==null?void 0:h.transfer,C=ge(()=>u.map(({rate:x,coinId:y})=>{let P=i(y,p,x);return{coinId:y,feeCoinAmountInt:P}}),[u,p]),S=({coinId:x,feeCoinAmountInt:y})=>{t==null||t(),s(Et(x)),s(M(y))},I=({coinId:x,feeCoinAmountInt:y})=>Fo.default.createElement(lA,{coinId:x,selectedCoinId:e,feeCoinAmountInt:y,onSelect:S,setSupplyGas:A});return o?Fo.default.createElement(po.Portal,{component:po.Container,className:Ve["select-networkFee"]},Fo.default.createElement(ia,{onBack:t,onClose:t,title:L("wallet_transfer_subtitle_network_fee")}),Fo.default.createElement(po.Box,{className:Ve["select-networkFee-content"]},Fo.default.createElement(ko.Text,{className:Ve["select-networkFee-title"]},L("wallet_extension_send_alert_choose_token")),Fo.default.createElement(ps,{space:16,dataSource:C,renderItem:I})),Fo.default.createElement(Ur,{walletId:m,address:a,visible:c,closeCallback:()=>{A({supplyGasVisible:!1})},coinId:d,receiveOnly:!0})):null},vd=gA;function AA(){let[o,{toggle:t}]=lo(!1),e=Bd(),s=async()=>{await e()};return J(),jt.default.createElement(jt.default.Fragment,null,jt.default.createElement(z,{networkFeeProps:{onClick:t,feeLevel:!1},confirmButtonProps:{onSubmit:s}}),jt.default.createElement(vd,{visible:o,onToggle:t}))}function CA(){let{coin:o}=T();return jt.default.createElement(No,{fixed:!!o.vdecimalNum},jt.default.createElement(AA,null))}var Dd=CA;var IA={match:o=>Ki(o),pages:{AddressPage:K,AmountPage:kd,ConfirmPage:Dd}},Ld=IA;r();n();ao();r();n();var Un=f(_());r();n();var Md=f(_());var On=f(E());function SA(){let o=(0,On.useDispatch)(),{coin:t}=T(),e=F(),s=(0,On.useSelector)(j),a=Nm(),[m,i]=(0,Md.useState)(!1);return Ae(()=>{i(!0),(async()=>{let d={coinId:t.coinId,address:e},A={fromAddr:e,toAddr:s,value:"0"};try{let l=await a("Transfer",d,A);if(l){let{info:u,feeCoin:p,fee:C}=l;o(rc({info:u,feeCoin:p})),o(Et(p.coinId)),o(M(C))}}finally{i(!1)}})()}),m}var Rd=SA;r();n();var Od=f(_());fo();To();function Ms(){let{coin:o}=T();return(0,Od.useCallback)(async t=>{let{ZksyncWallet:e}=await Ye(),s=bo(t,10**o.decimals),a=await e.getCloseAmounts(s);return Fr(a,s)?null:{key:"wallet_extenshion_max_amount_no_large_than",args:{amount:O.showFloorTruncation(So(a,10**o.decimals),o.decimals,!1),symbol:o.symbol},type:oo.COMMON_ERROR}},[])}function TA(){let t=[Ms()];Y(t)}var Ud=TA;function hA(){let o=Rd();return Ud(),Un.default.createElement(H,{confirmButtonProps:{loading:o}})}function xA(){let{coin:o}=T();return Un.default.createElement(No,{fixed:!!o.vdecimalNum},Un.default.createElement(hA,null))}var Wd=xA;r();n();var Wn=f(_());r();n();var Rs=f(E());Eo();ao();function yA(){let o=io(),{coin:t}=T(),e=F(),s=(0,Rs.useSelector)(j),a=G(),m=Bt(),i=W(),c=(0,Rs.useSelector)(Km),d=async()=>{let{info:l,feeCoin:u}=c||{},{accountId:p,nonce:C}=l||{},S={type:St.TRANSFER,from:e,to:s,accountId:parseInt(p,10),tokenId:parseInt(u==null?void 0:u.tokenId,10),tokenSymbol:u==null?void 0:u.originSymbol,amounts:i,fees:a,decimals:t.decimals,nonce:parseInt(C,10)};return await X().signTransaction(S,e,si)},A=async l=>{if(l!=null&&l.code)throw new Error(Jr);let{signature:u,tx:p}=l||{},{txHash:C,...S}=p||{},I={txSource:jo.NORMAL,signedTx:JSON.stringify({signature:u,tx:S}),fromAdr:e,serviceCharge:p==null?void 0:p.fee,toAdr:p==null?void 0:p.to,coinAmount:i,coinId:t.coinId,txHash:C,extJson:JSON.stringify({serviceChargeCoinId:m})};return await o(I)};return async()=>{let l=await d();return A(l)}}var Vd=yA;r();n();var Gd=f(_());function _A(){let o=Ms();return(0,Gd.useCallback)(async t=>{let e=await o(t);return e?{...e,highlight:$t.AMOUNT}:null},[o])}function FA(){let t=[_A()];J(t)}var Hd=FA;function PA(){let o=Vd(),t=async()=>o();return Hd(),Wn.default.createElement(z,{confirmButtonProps:{onSubmit:t}})}function EA(){let{coin:o}=T();return Wn.default.createElement(No,{fixed:!!o.vdecimalNum},Wn.default.createElement(PA,null))}var Kd=EA;var bA={match:o=>o===mi,pages:{AddressPage:K,AmountPage:Wd,ConfirmPage:Kd}},zd=bA;r();n();ao();r();n();var $d=f(_());r();n();var oe=f(_()),Gn=f(E());r();n();function kA(){let{coin:o}=T(),t=F();return async({value:e,to:s,signInfo:a})=>{let{gasPrice:m,inputCoins:i=[],tokenInputCoins:c=[],budget:d}=a||{},A=i.map((p={})=>{let{digest:C,version:S,objectId:I}=p;return{digest:C,version:S,objectId:I}}),l=new km;if(l.setGasPrice(m),l.setGasPayment(A||[]),l.setSender(t),d&&l.setGasBudget(d),o.baseCoinId===0){let p=l.splitCoins(l.gas,[l.pure(e)]);l.transferObjects([p],l.pure(s))}else if(c.length>1){let p=c.slice(1).map(I=>l.object(I.objectId)),C=l.object(c[0].objectId);l.mergeCoins(C,p);let S=l.splitCoins(C,[l.pure(e)]);l.transferObjects([S],l.pure(s))}else{let p=l.splitCoins(l.object(c[0].objectId),[l.pure(e)]);l.transferObjects([p],l.pure(s))}let u=bm(await l.build({provider:uc}));return{tx:l,txBytes:u}}}var Vn=kA;r();n();function wA(){let{coin:o}=T(),t=F(),e=o.coinId;return async({to:s,value:a})=>(await xt({address:t,coinId:e},{fromAddr:t,toAddr:s,value:a})).info||{}}var qd=wA;function Zd(){let o=(0,Gn.useDispatch)(),t=(0,Gn.useSelector)(Pt),{coin:e}=T(),s=F(),a=W(),m=B(),{coinId:i}=e,[c,d]=(0,oe.useState)(!1),A=(0,oe.useRef)(0),l=qd(),u=Vn(),p=ht(a),{run:C}=Go(async()=>{var S,I,h;A.current++;try{o(U(!1));let x={value:a,to:m},y=await l(x),P=await u({...x,signInfo:y}),b=((h=(I=(S=P==null?void 0:P.tx)==null?void 0:S.blockData)==null?void 0:I.gasConfig)==null?void 0:h.budget)||"0";o(nc(y)),o(M(b))}catch{o(U(!0))}finally{A.current--,A.current===0&&d(!1)}},{wait:300});return(0,oe.useEffect)(()=>{t&&(d(!0),C())},[t]),(0,oe.useEffect)(()=>{t&&a!==p||(d(!0),C())},[i,s,m,a,t]),c}function BA(){let o=Zd();return Y(),$d.default.createElement(H,{confirmButtonProps:{loading:o}})}var Yd=BA;r();n();var Xd=f(_());r();n();var Os=f(E());Eo();ao();var Jd=()=>{let o=io(),{coin:t}=T(),e=F(),s=eo(),a=(0,Os.useSelector)(j),m=(0,Os.useSelector)(zm),i=G(),c=Vn();return Ft(async()=>await c({value:s,to:a,signInfo:{...m||{},budget:i}}),async({tx:C,txBytes:S})=>{let I={type:"raw",data:S},h=await X().signTransaction(I,e,ii);return{tx:C,txBytes:S,signedTx:h}},async({tx:C,txBytes:S,signedTx:I}={})=>{var b,k;let{signature:h,hash:x}=I||{},y={signedTx:{request_type:"WaitForEffectsCert",tx_bytes:S,signatures:[h]},coinAmount:s,coinId:t.coinId,fromAdr:e,toAdr:a,serviceCharge:((k=(b=C==null?void 0:C.blockData)==null?void 0:b.gasConfig)==null?void 0:k.budget)||"0",txHash:x};return await o(y)},C=>(to({tx_id:C}),C))};function NA(){let o=Jd(),t=async()=>{await o()};return J(),Xd.default.createElement(z,{confirmButtonProps:{onSubmit:t}})}var Qd=NA;var vA={match:o=>o===ci,pages:{AddressPage:K,AmountPage:Yd,ConfirmPage:Qd}},jd=vA;r();n();ao();r();n();var tf=f(_()),Hn=f(ho());r();n();r();n();var mt={SEND:"send",INSCRIBE:"inscribe"};function ct(){return _t().get("type")||mt.SEND}r();n();function DA(){let o=st(),t=Ja();return[o,t]}var of=DA;function LA(){let{coinId:o}=(0,Hn.useParams)(),t=F(),e=(0,Hn.useHistory)(),s=ct(),a=of(),m=Tn();return tf.default.createElement(K,{addressProps:{errorFns:{fns:a,override:!0},extraProps:{filterAddress:m}},confirmButtonProps:{onClick:()=>{e.push(`${Vo}/${o}${le}?type=${s}&from=${t}`)}}})}var ef=LA;r();n();var Rf=f(_());r();n();var ee=f(_()),vf=f(ho());To();var Zn=f(E());r();n();var rf=f(_());function MA(){let o=F(),{coin:t}=T();(0,rf.useEffect)(()=>{dc({coinId:t.coinId,address:o})},[t.coinId,o])}var nf=MA;r();n();var At=f(_());var df=f(E());r();n();var cf=f(_());r();n();var sf={root:"_root_1h21o_1"};r();n();var af=f(ho());var mf=f(E());function RA(){let o=(0,mf.useDispatch)(),t=(0,af.useHistory)(),{coin:e}=T(),s=F();return()=>{o(dn()),o(Kr()),t.push(`${Vo}/${e.coinId}${vr}?type=${mt.INSCRIBE}&from=${s}`)}}var Kn=RA;function OA(){let o=mo(),t=Kn();return cf.default.createElement("span",{className:sf.root,onClick:t},o("extension_wallet_send_link_inscribing"))}var uf=OA;function UA(o){let{coin:t}=T();return(0,At.useCallback)(()=>o.length===0?{key:"extension_wallet_send_text_noresults_crypto",args:{crypto:t.symbol},type:"inscribe"}:null,[o])}function ff(){let o=mo(),t=kt();return e=>{let s="";return e.key&&(s=o(e==null?void 0:e.key,e==null?void 0:e.args)),(e==null?void 0:e.type)===oo.FEE_BALANCE_INSUFFICIENT?At.default.createElement(At.default.Fragment,null,s," ",At.default.createElement(or,{coin:t})):(e==null?void 0:e.type)==="inscribe"?At.default.createElement(At.default.Fragment,null,s," ",At.default.createElement(uf,null)):s}}function WA(o,t){let e=(0,df.useDispatch)(),s=Qa(),a=UA(t),m=[s,a],{runErrorFns:i}=_e(m);$r(i,c=>{e(Oa(c))},o)}var pf=WA;r();n();var so=f(_()),Cf=f(ie());r();n();var Jo=f(_()),Us=f(ie());r();n();var VA="md",GA="lg",lf=o=>{let{className:t,size:e,disabled:s,checked:a,coinImage:m,coinAmountText:i,inscriptionId:c,onChange:d}=o,A=mo(),l=`inscription-select-container-${e}`,u=s?"inscription-select-disabled":null;return Jo.default.createElement("div",{className:(0,Us.default)("inscription-select-container",l),onClick:d},s?Jo.default.createElement("div",{className:"inscription-select-confirm"},A("extension_wallet_send_tag_confirming")):null,Jo.default.createElement("div",{className:(0,Us.default)("inscription-select",u,t)},s?null:Jo.default.createElement("div",{className:"inscription-select-radio-container"},Jo.default.createElement(ti.Circle,{checked:a})),Jo.default.createElement("div",{className:"inscription-select-coin"},Jo.default.createElement(Tr,{className:"inscription-select-coin-image",src:m,errorImg:Er,width:14,height:14}),Jo.default.createElement(ls,{text:i,tooltipProps:{className:"inscription-select-coin-text-tooltip"}})),Jo.default.createElement("div",{className:"inscription-select-id"},Jo.default.createElement(ls,{text:c,tooltipProps:{className:"inscription-select-id-tooltip"}}))))};lf.size={md:VA,lg:GA};var Ge=lf;var If=f(E());r();n();var Ao=f(_());fo();r();n();var Ct={header:"_header_144xr_1",amount:"_amount_144xr_7",logo:"_logo_144xr_13",max:"_max_144xr_18",scrollContent:"_scrollContent_144xr_26",content:"_content_144xr_31",cell:"_cell_144xr_38",loading:"_loading_144xr_41"};r();n();var Ws=f(ie());var ur=f(_());r();n();var zn={inscribe:"_inscribe_1om9x_1",inscribeInner:"_inscribeInner_1om9x_7",inscribeText:"_inscribeText_1om9x_11"};var HA="md",KA="lg";function gf({size:o,onClick:t}){let e=mo();return ur.default.createElement("div",{className:(0,Ws.default)(zn.inscribe,`inscribe-transfer-${o}`),onClick:t},ur.default.createElement("div",{className:zn.inscribeInner},ur.default.createElement(Ir,{className:"okx-wallet-plugin-plus"}),ur.default.createElement("div",{className:(0,Ws.default)(zn.inscribeText,"inscribe-transfer-text")},e("extension_wallet_send_link_inscribing"))))}gf.size={md:HA,lg:KA};var He=gf;function zA(){let{coin:o}=T(),{transferableBalanceDisplay:t}=An(o);return Ao.default.createElement("div",{className:Ct.header},Ao.default.createElement("div",{className:Ct.amount},Ao.default.createElement(Tr,{className:Ct.logo,src:o.image,errorImg:Er,width:20,height:20}),t))}function qA({loading:o,list:t,visible:e,onClose:s,value:a,onSelected:m,onTransfer:i,request:c}){let{coin:d}=T(),[A,l]=(0,Ao.useState)({}),{run:u}=oa(p=>{o||p.target.scrollHeight-p.target.scrollTop-p.target.offsetHeight<=150&&c&&c()},{wait:300});return(0,Ao.useEffect)(()=>{e&&l(a)},[e]),Ao.default.createElement(oi,{isFull:!0,topContent:Ao.default.createElement(zA,{list:t,value:A,onMax:p=>{l(t.reduce((C,S)=>({...C,[S.inscriptionId]:!p}),{}))}}),footer:Ao.default.createElement(gt.ConfirmButton,{onClick:()=>{m(A)}},L("wallet_set_password_btn_confirm")),noMargin:!0,noContentPadding:!0,visible:e,onClose:s,renderContent:()=>Ao.default.createElement("div",{className:Ct.scrollContent,onScroll:u},Ao.default.createElement("div",{className:Ct.content},Ao.default.createElement("div",{className:Ct.cell},Ao.default.createElement(He,{size:He.size.lg,onClick:i})),t.map((p,C)=>Ao.default.createElement("div",{className:Ct.cell},Ao.default.createElement(Ge,{key:C,size:Ge.size.lg,coinImage:d.image,coinAmountText:`${p.tokenAmount} ${p.tick}`,inscriptionId:p.inscriptionId,checked:A[p.inscriptionId],onChange:()=>{l(S=>({...S,[p.inscriptionId]:!S[p.inscriptionId]}))}})))),o&&Ao.default.createElement("div",{className:Ct.loading},Ao.default.createElement(ae.Circle,{size:ae.SIZE.sm})))})}var Af=qA;r();n();var te={root:"_root_ol77b_1",title:"_title_ol77b_6",arrow:"_arrow_ol77b_14",content:"_content_ol77b_17",cell:"_cell_ol77b_22"};function ZA({onTransfer:o,loading:t,list:e,request:s,onSelected:a},m){let i=mo(),{coin:c}=T(),[d,A]=(0,so.useState)(!1),l=(0,If.useSelector)(Ko),[u,p]=(0,so.useState)(l.reduce((I,h)=>({...I,[h.inscriptionId]:!0}),{})),{selected:C,showed:S}=(0,so.useMemo)(()=>{let I=e.filter(x=>!!u[x.inscriptionId]),h=e.filter(x=>!u[x.inscriptionId]);return{selected:I,unselected:h,showed:[...I.map(x=>({...x,checked:!0})),...h].slice(0,2)}},[e,u]);return(0,so.useEffect)(()=>{a(C)},[C]),(0,so.useImperativeHandle)(m,()=>({onMax:()=>{p(e.reduce((I,h)=>({...I,[h.inscriptionId]:!0}),{}))}})),so.default.createElement(so.default.Fragment,null,so.default.createElement("div",{className:te.root,onClick:()=>{A(!0)}},so.default.createElement("div",{className:te.title},i("extension_wallet_send_text_select_transferable"),so.default.createElement(Ir,{className:(0,Cf.default)(te.arrow,"okds-arrow-chevron-right-centered-md")})),so.default.createElement("div",{className:te.content},so.default.createElement("div",{className:te.cell},so.default.createElement(He,{size:He.size.md,onClick:I=>{I.stopPropagation(),o()}})),S.map((I,h)=>so.default.createElement("div",{className:te.cell},so.default.createElement(Ge,{key:h,coinImage:c.image,size:Ge.size.md,coinAmountText:`${I.tokenAmount} ${I.tick}`,inscriptionId:I.inscriptionId,checked:I.checked,onChange:x=>{h===0&&(x.stopPropagation(),p(y=>({...y,[I.inscriptionId]:!y[I.inscriptionId]})))}}))))),so.default.createElement(Af,{visible:d,value:u,loading:t,list:e,request:s,onSelected:I=>{p(I),A(!1)},onClose:()=>{A(!1)},onTransfer:o}))}var Sf=(0,so.forwardRef)(ZA);r();n();var Ke=f(_());Eo();me();ce();var Tf=f(E());To();function $A(){let{coin:o,baseCoin:t}=T(),e=F(),s=(0,Tf.useSelector)(Wo),[a,m]=(0,Ke.useState)({from:1,size:10}),i=Pr(o);return async()=>{var C;let c=await X().getRequestHeaders({walletId:s,needSign:!0,currency:"usd"}),d;if(i)d={utxoType:at.BRC20_CONVERTIBLE,address:e,tick:o.symbol,protocolId:v.BRC_20};else{let S=Fi(o);d={utxoType:at.BRC20S_CONVERTIBLE,address:e,tid:S,protocolId:v.BRC_20S}}let A={coinId:t.coinId,utxoRequests:[{...d,...a}]},{data:l}=await Qo(Oo.getBTCUTXO,A,{headers:c}),u=(((C=l==null?void 0:l[0])==null?void 0:C.utxoList)||[]).map(S=>({...S,tokenAmountInt:S.tokenAmount,tokenAmount:So(S.tokenAmount,10**o.decimals)})),p=u.length===a.size;return p&&m(S=>({...S,from:S.from+1})),{list:u,more:p}}}function YA(){let o=(0,Ke.useRef)(!0),[t,e]=(0,Ke.useState)(!0),[s,a]=(0,Ke.useState)([]),m=$A(),i=async()=>{if(!!o.current){e(!0);try{let{more:c,list:d}=await m();a(A=>[...A,...d]),o.current=c}finally{e(!1)}}};return Ae(()=>{i()}),{list:s,loading:t,request:i}}var hf=YA;r();n();var _f=f(_()),Ff=f(E());r();n();var dr=f(_());To();var xf=f(E());var JA=255,XA=()=>JA;function Vs(){let{baseCoin:o}=T(),t=F();return xa({address:t,coinId:o.coinId},2e4).info||{}}function QA(o,t){let e=XA(),s=o||(t==null?void 0:t.normal)||"0",[a,m]=(0,dr.useState)("0");return(0,dr.useEffect)(()=>{if(e&&s){let i=bo(e,s);m(i)}},[e,s]),{fee:a,satBytes:s,bytes:e}}function jA(o){let t=(0,xf.useDispatch)(),e=Vs(),s=QA(o,e);return(0,dr.useEffect)(()=>{t($o({name:"signInfo",value:e}))},[e]),{...s,signInfo:e}}var yf=jA;function oC(){let o=(0,Ff.useDispatch)(),{fee:t}=yf();(0,_f.useEffect)(()=>{o(M(t))},[t])}var Pf=oC;r();n();var Gs={loading:"_loading_61tc4_1",content:"_content_61tc4_6"};r();n();var wf=f(_());var Bf=f(E());r();n();var qn=f(_());var bf=f(E());r();n();var Ef=f(E());function tC(){let{selectedSat:o,signInfo:t}=(0,Ef.useSelector)(nn),e;return o.type===pt.CUSTOM?e=o.satBytes:e=t==null?void 0:t[Di[o.type]],e||0}var ut=tC;function eC(){let[o,t]=(0,qn.useState)(!0),e=(0,bf.useDispatch)(),s=F(),a=Cn(),m=ut();return(0,qn.useEffect)(()=>{(async()=>{let c;try{c=(await a({from:s,coinAmount:0,serviceCharge:0,feeRate:m})).canTransferAmount||"0"}catch{c="0"}t(!1),e(he(c))})()},[s,m]),o}var kf=eC;function rC(){let o=(0,Bf.useDispatch)(),{coin:t}=T(),{transferableBalance:e}=An(t),s=kf();return(0,wf.useEffect)(()=>{o(nt(e))},[e]),s}var Nf=rC;function nC(){let o=mo(),t=(0,vf.useHistory)(),e=(0,Zn.useDispatch)(),{coin:s}=T(),a=(0,Zn.useSelector)(Ko),m=Kn(),i=ff(),c=ct(),d=F(),A=(0,ee.useMemo)(()=>a.reduce((h,{tokenAmount:x})=>Co(h,x),0),[a]),{loading:l,list:u,request:p}=hf(),C=Nf(),S=u.length>0,I=l||C;return Pf(),pf(I,u),nf(),u.length===0&&I?ee.default.createElement("div",{className:Gs.loading},ee.default.createElement(ae.Circle,{size:ae.SIZE.xl})):ee.default.createElement(H,{checkEmpty:!1,inputAmount:A,renderError:i,classes:{content:S?Gs.content:""},slot:{bottom:S?ee.default.createElement(Sf,{loading:I,list:u,request:p,onSelected:h=>{e($o({name:"brc20UtxoList",value:h}))},onTransfer:m}):null},inputProps:{disabled:!0},confirmButtonProps:{disabled:a.length===0,onClick:()=>{t.push(`${Vo}/${s.coinId}${Dr}?type=${c}&from=${d}`)}},totalAmountProps:{type:"amount",title:o("extension_wallet_send_text_transfer_available"),hiddenMaxButton:!0}})}var Df=nC;r();n();var Lf=f(_()),$n=f(ho());function sC(){let{coinId:o}=(0,$n.useParams)(),t=(0,$n.useHistory)(),e=ct(),s=F();return Lf.default.createElement(pc,{onConfirm:()=>{t.push(`${Vo}/${o}${le}?type=${e}&from=${s}`)}})}var Mf=sC;var iC={[mt.SEND]:Df,[mt.INSCRIBE]:Mf};function aC(){let o=ct(),t=iC[o];return t?Rf.default.createElement(t,null):null}var Of=aC;r();n();var rp=f(_());r();n();var _o=f(_());r();n();var fr=f(_());r();n();var dt=f(_()),Uf=f(ie());fo();r();n();var re={utxoTextWrap:"_utxoTextWrap_s2w3l_1",utxoText:"_utxoText_s2w3l_1",utxoTextSymbol:"_utxoTextSymbol_s2w3l_14",utxoTextAmount:"_utxoTextAmount_s2w3l_17",badge:"_badge_s2w3l_21"};var mC=(o={})=>{let{address:t,isNeedToSign:e,coinAmount:s,symbol:a}=o;return dt.default.createElement(po.FlexBox,{justify:"space-between",align:po.ALIGN.center,className:re.utxoTextWrap},dt.default.createElement(po.FlexBox,{align:po.ALIGN.center},dt.default.createElement(ko.Text,{className:re.utxoText,ellipsis:{tooltip:!0}},t),e&&dt.default.createElement(Sr,{className:re.badge,color:Sr.COLOR.green,type:Sr.TYPE.rect},L("extension_wallet_transaction_label_signature"))),dt.default.createElement(po.FlexBox,{align:po.ALIGN.center,className:(0,Uf.default)(re.utxoText,re.utxoTextAmount)},dt.default.createElement(ko.Text,{inherit:!0,strong:!0,ellipsis:{tooltip:!0}},s),dt.default.createElement(ko.Text,{inherit:!0,strong:!0,className:re.utxoTextSymbol},a)))},Wf=(0,dt.memo)(mC);r();n();var Vf={utxosBlock:"_utxosBlock_ooh7h_1",utxoBorder:"_utxoBorder_ooh7h_6"};var cC=({utxos:o})=>fr.default.createElement(po.Box,{className:Vf.utxosBlock},o.map((t={},e)=>{let{address:s,coinAmount:a,isNeedToSign:m,symbol:i}=t;return fr.default.createElement(Wf,{key:e,address:s,coinAmount:a,isNeedToSign:m,symbol:i})})),Hs=(0,fr.memo)(cC);var ne=f(E());var Qf=f(ho());To();r();n();var Gf={network:"_network_1zgil_1",data:"_data_1zgil_6",dataTitle:"_dataTitle_1zgil_12"};r();n();var Hf=f(_()),pr=f(E());function Kf(){let o=(0,pr.useDispatch)(),t=Vs();(0,Hf.useEffect)(()=>{o($o({name:"signInfo",value:t}))},[t])}function zf(){let o=bt(),t=(0,pr.useDispatch)(),e=F(),s=B(),a=ot(),m=ut(),i=(0,pr.useSelector)(Ko),[c,d,A]=on({coinId:o,toAddr:s,walletId:a,fromAddr:e,satBytes:m,coinAmount:"0",utxoParams:{satBytes:m},inputs:i},{onSuccess:(l,u)=>{t(M(l)),t($o({name:"feeUtxoList",value:u||[]}))}});return{feeLoading:c,fee:d,feeError:A}}r();n();r();n();Eo();me();ce();var Yn=async({walletId:o,signedTx:t,coinId:e,coinAmount:s,fromAdr:a,toAdr:m,serviceCharge:i,txHash:c,walletType:d,txType:A,extJson:l})=>{let u=Oo.postTx,p=await X().getRequestHeaders({walletId:o,needSign:!0,currency:"usd"}),C={};e==1&&(C.btcSpeedUpInfo=JSON.stringify({sequence:1}));let{data:S}=await Qo(u,{signedTx:t,coinId:e,coinAmount:s,fromAdr:a,toAdr:m,serviceCharge:i,txSource:jo.NORMAL,txHash:c,accountId:o,walletType:d,...C,extJson:l,txType:A},{headers:p});return S};var lr=f(E()),$f=f(Xo());r();n();var Ks=f(E());ao();var qf=f(_());function uC(o){let t=(0,Ks.useSelector)(Wo),e=F(),s=(0,Ks.useSelector)(Ko),a=ut(),m=B(),i=Ce(t);return(0,qf.useCallback)(async c=>{if(!c.length)return null;let d={address:e,feePerB:a,inputs:[...s.map(({txHash:l,vout:u,coinAmount:p})=>({vOut:u,txId:l,amount:p})),...c.map(({txHash:l,vout:u,coinAmount:p})=>({vOut:u,txId:l,amount:p}))],outputs:[...s.map(({coinAmount:l})=>({amount:l,address:m}))]};return await qi(d,e,xr,t,{fake:o===Qr.CAL_FEE&&i})},[s,a])}var Zf=uC;function dC(){let o=(0,lr.useDispatch)(),{coin:t}=T(),e=(0,lr.useSelector)(Ko),s=F(),a=B(),m=G(),i=W(),c=(0,lr.useSelector)(Wo),d=sa(c),A=Ho(),l=Pr(t),u=l?Uo.BRC20_SEND:Uo.BRC30_SEND,p=Zf(Qr.CONFIRM),C=Cn(),S=ut(),I=jr({address:s,coinId:t.coinId,currencyId:A,txType:u,protocolId:l?v.BRC_20:v.BRC_20S}),h=Am(c),x=async P=>{try{await h();let b=await p(P.utxoList||[]),k=await xo(t.localType,b),w=d==null?void 0:d.serverWalletType,Q={txSource:jo.NORMAL,toAdr:a,coinId:t.coinId,txHash:k,signedTx:b,walletId:c,serviceCharge:m,fromAdr:s,coinAmount:i,walletType:w,txType:l?Uo.BRC20_SEND:Uo.BRC30_SEND,extJson:JSON.stringify({nftIds:e.reduce((V,D)=>[...V,...(D.nftLocaltionVOs||[]).map(({nftId:Z})=>Z)],[])})},q=await Yn(Q);to({tx_id:q})}catch(b){b!=null&&b.error_message&&hr.error(b==null?void 0:b.error_message)}};return async()=>{let P=await C({from:s,coinAmount:0,serviceCharge:m,feeRate:S}),b=P.utxoList||[];return o($o({name:"feeUtxoList",value:b||[]})),await I([...e||[],...b||[]],$f.noop),await x(P)}}var Yf=dC;r();n();var Jf=f(E());function fC(){let o=(0,Jf.useDispatch)(),e=[om()],{runErrorFns:s}=_e(e);$r(s,a=>{o(Ua(a))})}var Xf=fC;function pC(){let o=mo(),t=zr(),e=F(),s=B(),a=G(),m=(0,ne.useSelector)(Ko),i=(0,ne.useSelector)(qm),{baseCoin:c}=T(),d=(u,p)=>u.map(({coinAmount:C})=>{let S=So(C,10**c.decimals);return{address:ms(p),coinAmount:t(S,c,{useApproximate:!1}),symbol:c.symbol}}),A=(0,_o.useMemo)(()=>d([...m,...i],e),[m,i]),l=(0,_o.useMemo)(()=>{let u=d(m,s),p=i.reduce((C,{coinAmount:S})=>Co(C,S),"0");if(It(p,a)){let C=So(ft(p,a),10**c.decimals);u.push({address:ms(e),coinAmount:t(C,c,{useApproximate:!1}),symbol:c.symbol})}return u},[m,i,a]);return _o.default.createElement(tt,{space:32},_o.default.createElement(Xe,{title:o("extension_wallet_transaction_text_input")},_o.default.createElement(Hs,{utxos:A})),_o.default.createElement(Xe,{title:o("extension_wallet_transaction_text_output")},_o.default.createElement(Hs,{utxos:l})))}function lC(){let o=(0,ne.useDispatch)(),[t,e]=(0,_o.useState)(!1),{coinId:s}=(0,Qf.useParams)(),a=Ho(),m=(0,ne.useSelector)(Zm),i=Yf(),{signInfo:c}=(0,ne.useSelector)(nn),d=Zr(),A=ut(),{feeLoading:l,fee:u,feeError:p}=zf(),C=So(u,A),S=h=>{o($o({name:"selectedSat",value:h}))};Kf(),Xf();let I=c==null?void 0:c.transferReminder;return _o.default.createElement(_o.default.Fragment,null,_o.default.createElement(z,{classes:{network:Gf.network},slot:{bottom:_o.default.createElement(pC,null)},defaultMessage:I,networkFeeProps:{loading:l,estimateFailed:p,feeLevel:m.type,onClick:()=>{e(!0)}},confirmButtonProps:{onSubmit:i},canTransferAmount:d}),t&&_o.default.createElement(fc,{currencyId:a,bytes:C,value:m,coinId:s,signInfo:c,onChange:S,onClose:()=>{e(!1)}}))}var jf=lC;r();n();var Jn=f(_()),op=f(ho());var tp=f(E());To();function gC(){let o=(0,op.useHistory)(),t=(0,tp.useSelector)(et),e=xe();return(0,Jn.useEffect)(()=>{Fr(e,"0")&&o.go(-1)},[e]),Jn.default.createElement(lc,{onConfirm:()=>{o.push(t||Nr)}})}var ep=gC;var AC={[mt.SEND]:jf,[mt.INSCRIBE]:ep};function CC(){let o=ct(),t=AC[o];return t?rp.default.createElement(t,null):null}var np=CC;r();n();var sp=f(_());function IC({children:o}){let e=_t().get("from");return sp.default.createElement(No,{fromAddress:e},o)}var ip=IC;var SC={match:(o,t,e)=>o===Kt&&[v.BRC_20,v.BRC_20S].includes(e),Container:ip,pages:{AddressPage:Of,AmountPage:ef,ConfirmPage:np}},ap=SC;r();n();ao();r();n();r();n();var zs=f(_()),gr=f(E()),up=f(Xo());r();n();var mp=f(Dl()),TC=async({coin:o,fromAddress:t,toAddress:e,value:s,memo:a="",signInfo:m={}})=>{let{getRawTransaction:i}=await Pi(),c={};if(o.baseCoinId===0)c={data:{type:fe.TRANSFER,data:{to:e,amount:s,memo:a}}};else{let{info:A={}}=m,{contractAddress:l,contractName:u,tokenName:p}=A;c={data:{type:fe.TOKEN_TRANSFER,data:{from:t,to:e,memo:a,contract:l,contractName:u,functionName:wr.TRANSFER,tokenName:p,amount:s}}}}return await i(mp.Currency.Stx,c)},cp=async({coin:o,fromAddress:t,toAddress:e,value:s,memo:a="",signInfo:m={}})=>{let i=await TC({coin:o,fromAddress:t,toAddress:e,value:s,memo:a,signInfo:m}),c=await wm({coinId:o.coinId,fromAddress:t,value:s,inputData:i});return(c==null?void 0:c.gasLimit)||"0"};var hC=()=>{let o=(0,gr.useDispatch)(),t=F(),e=B(),s=(0,gr.useSelector)(Pt),a=W(),m=ht(a),{coin:i,baseCoin:c}=T(),{signInfo:d,memo:A}=(0,gr.useSelector)(ve),l=async()=>{try{o(U(!1));let p;i.baseCoinId!==0&&(0,up.isEmpty)(d)?(p=await en({coinId:i.coinId,fromAddress:t,toAddress:e,value:a}),o(cn({name:"signInfo",value:p}))):p=d;let C=await cp({coin:i,baseCoin:c,fromAddress:t,toAddress:e,value:a,signInfo:p,memo:A});o(M(C))}catch{o(U(!0))}finally{o(yo(!1))}},{run:u}=Go(l,{wait:500});(0,zs.useEffect)(()=>{s&&(o(yo(!0)),u())},[s]),(0,zs.useEffect)(()=>{s&&a!==m||(o(yo(!0)),u())},[a,e,s,A])},dp=hC;var xC=({children:o})=>(dp(),o),fp=xC;r();n();var pp=f(_());var yC=()=>(Y(),pp.default.createElement(H,null)),lp=yC;r();n();var qs=f(_()),Qn=f(E());r();n();var Xn=f(E());var _C=()=>{let o=io(),{coin:t,baseCoin:e}=T(),s=F(),a=(0,Xn.useSelector)(j),m=W(),i=(0,Xn.useSelector)(rt),{memo:c}=(0,Xn.useSelector)(ve),d=be({fromAddr:s,localType:e.localType}),A=async()=>await en({coinId:t.coinId,fromAddress:s,toAddress:a,value:m}),l=x=>{let{info:y}=x,{nonce:P}=y;return{type:fe.TRANSFER,data:{to:a,amount:m,nonce:P,fee:i,memo:c}}},u=x=>{let{info:y}=x,{nonce:P,contractAddress:b,contractName:k,tokenName:w}=y;return{type:fe.TOKEN_TRANSFER,data:{from:s,to:a,amount:m,nonce:P,fee:i,memo:c,contract:b,contractName:k,functionName:wr.TRANSFER,tokenName:w}}};return wo(A,x=>t.baseCoinId===0?l(x):u(x),async x=>{let{data:y}=x,{nonce:P}=y,{txId:b,txSerializedHexString:k}=await d({params:x,needCapture:!0});return{txId:b,txSerializedHexString:k,nonce:P}},async({txId:x,txSerializedHexString:y,nonce:P})=>{let b={nonce:P},k=JSON.stringify(b),w={signedTx:y,coinAmount:m,coinId:t.coinId,fromAdr:s,toAdr:a,serviceCharge:i,txHash:x,memo:c,extJson:k};return await o(w)},x=>(to({tx_id:x}),x))},gp=_C;var Ap=34,FC=()=>{let o=(0,Qn.useDispatch)(),t=mo(),{memo:e}=(0,Qn.useSelector)(ve),s=gp(),a=m=>{let i=m.target.value;new TextEncoder().encode(i).length<=Ap&&o(cn({name:"memo",value:m.target.value}))};return J(),qs.default.createElement(z,{confirmButtonProps:{onSubmit:s},slot:{bottom:qs.default.createElement(Oe,{value:e,placeholder:t("extension_wallet_transaction_input_entermemo_max",{num:Ap}),onChange:a})}})},Cp=FC;var PC={match:o=>o===ui,Container:fp,pages:{AddressPage:K,AmountPage:lp,ConfirmPage:Cp}},Ip=PC;r();n();ao();r();n();var Tp=f(_());r();n();me();ce();var EC=()=>{let{baseCoin:o}=T();return ro(async t=>{var a;let e={account:t,coinId:o.coinId},s;try{s=await hi(Oo.queryAccountExist,e)}catch(m){console.log(m)}return(a=s==null?void 0:s.data)!=null&&a.account?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})};function bC(){let o=st(),t=EC();return[o,t]}var Sp=bC;var kC=()=>{let o=Sp();return Tp.default.createElement(K,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},hp=kC;r();n();var xp=f(_());function wC(){return Y(),xp.default.createElement(H,null)}var yp=wC;r();n();var se=f(_());r();n();var _p=f(E());Eo();var BC=o=>{let{coin:t,baseCoin:e}=T(),s=F(),a=(0,_p.useSelector)(j),m=eo(),i=io();return Ft(async()=>await xt({coinId:t.coinId,address:s},{fromAddr:s,toAddr:a}),async p=>{let{info:C}=p,{chainid:S,compression:I,refBlockNumber:h,refBlockId:x,refBlockTimestamp:y,expireSeconds:P,precision:b,symbol:k,contract:w}=C,Q={type:0,from:s,to:a,amount:m,memo:o,precision:b,symbol:k,contract:w,common:{chainId:S,compression:I,refBlockNumber:h,refBlockId:x,refBlockTimestamp:y,expireSeconds:P}};return await X().signTransaction(Q,s,e.localType)},async p=>{let C={memo:o},S=await xo(t.localType,p),I={signedTx:p,coinAmount:m,coinId:t.coinId,fromAdr:s,toAdr:a,serviceCharge:"0",extJson:JSON.stringify(C),txHash:S};return await i(I)},p=>(to({tx_id:p}),p))},Fp=BC;var Pp=256;function NC(){let o=mo(),[t,e]=(0,se.useState)(""),s=Fp(t),a=async()=>{await s()},m=i=>{let c=i.target.value;new TextEncoder().encode(c).length<=Pp&&e(i.target.value)};return J(),se.default.createElement(z,{slot:{fee:se.default.createElement(se.default.Fragment,null),bottom:se.default.createElement(Oe,{value:t,placeholder:o("extension_wallet_transaction_input_entermemo_max",{num:Pp}),onChange:m})},confirmButtonProps:{onSubmit:a}})}var Ep=NC;var vC={match:o=>o===di,pages:{AddressPage:hp,AmountPage:yp,ConfirmPage:Ep}},bp=vC;r();n();ao();r();n();r();n();var Zs=f(_()),jn=f(E()),kp=f(Xo());Eo();var DC=({fromAddress:o,toAddress:t,amountInputValueInt:e,sendCoinBalanceInt:s,feeInt:a,coin:m,isMax:i})=>{let c=(0,jn.useDispatch)(),{signInfo:d}=(0,jn.useSelector)(sn),A=ht(e),l=async()=>{let I=await xt({coinId:m.coinId,address:o},{fromAddr:o,toAddr:t});return c(sc({name:"signInfo",value:I})),I},u=async I=>{var y,P;let h={type:"transfer",nonce:(y=I==null?void 0:I.info)==null?void 0:y.nonce,maxFee:a||"0",transferData:{contractAddress:(P=I==null?void 0:I.info)==null?void 0:P.contractAddress,from:o,to:t,amount:e}},x=await X().signTransaction(h,o,m.localType);return x==null?void 0:x.signature},p=async I=>{let{data:h}=await aa({coinId:m.coinId,address:o,inputData:I});if(h!=null&&h.queryGasLimitErrorUseDefault)throw new Error("fetch maxFee error");return h==null?void 0:h.gasLimit},C=async()=>{try{let I;(0,kp.isEmpty)(d)?I=await l():I=d;let h=await u(I),x=await p(h);c(M(x)),c(U(!1))}catch{c(U(!0))}finally{c(yo(!1))}},{run:S}=Go(C,{wait:500});(0,Zs.useEffect)(()=>{i&&(c(yo(!0)),S())},[i,s]),(0,Zs.useEffect)(()=>{i&&e!==A||(c(yo(!0)),S())},[t,e,i])},wp=DC;var LC=({children:o})=>{let t=F(),e=B(),s=W(),a=nm(),m=G(),{coin:i}=T(),c=wt();return wp({fromAddress:t,toAddress:e,amountInputValueInt:s,sendCoinBalanceInt:a,feeInt:m,coin:i,isMax:c}),o},Bp=LC;r();n();var Np=f(_());var MC=()=>(Y(),Np.default.createElement(H,null)),vp=MC;r();n();var Lp=f(_()),Mp=f(E());r();n();Eo();var RC=({coin:o,baseCoin:t,fromAddress:e,toAddress:s,amountInt:a,feeInt:m,nonce:i,contractAddress:c})=>{let d=io();return wo(async()=>{let C={type:"transfer",nonce:i,maxFee:m,transferData:{contractAddress:c,from:e,to:s,amount:a}},{txId:S,signature:I}=await X().signTransaction(C,e,t.localType);return{txId:S,signature:I}},async({txId:C,signature:S})=>{let I={serviceChargeCoinId:t.coinId,nonce:i},h=JSON.stringify(I),x={signedTx:S,coinAmount:a,coinId:o.coinId,fromAdr:e,toAdr:s,serviceCharge:m,txType:Uo.TRANS_OUT,txHash:C,extJson:h};return await d(x)},C=>(to({tx_id:C}),C))},Dp=RC;var OC=()=>{var d,A;let o=F(),t=B(),e=eo(),s=G(),{coin:a,baseCoin:m}=T(),{signInfo:i}=(0,Mp.useSelector)(sn),c=Dp({coin:a,baseCoin:m,fromAddress:o,toAddress:t,amountInt:e,feeInt:s,nonce:(d=i==null?void 0:i.info)==null?void 0:d.nonce,contractAddress:(A=i==null?void 0:i.info)==null?void 0:A.contractAddress});return J(),Lp.default.createElement(z,{confirmButtonProps:{onSubmit:c}})},Rp=OC;var UC={match:o=>o===fi,Container:Bp,pages:{AddressPage:K,AmountPage:vp,ConfirmPage:Rp}},Op=UC;r();n();ao();r();n();var $p=f(_());var es=f(E());fo();r();n();var Gp=f(_());r();n();fo();var ze=f(Xo());var Up=(o,t)=>{let[e,s]=o==null?void 0:o.split("-");return[{policyId:e,assets:[{amount:t,assetName:s}]}]},WC=(o,t)=>(0,ze.uniq)((0,ze.map)([...o,...t],"assetName")).map(s=>{let a=o.find(i=>(i==null?void 0:i.assetName)===s),m=t.find(i=>(i==null?void 0:i.assetName)===s);return{assetName:s,amount:O.add((a==null?void 0:a.amount)||0,(m==null?void 0:m.amount)||0)}}),VC=o=>{let t=o.reduce((s,a)=>{let{multiAsset:m}=a;return m!=null&&m.length?[...s,...m]:s},[]),e=[];return t.forEach(s=>{let{policyId:a,assets:m}=s,i=(0,ze.findIndex)(e,{policyId:a});if(i!==-1){let{assets:c}=e[i];e[i]={policyId:a,assets:WC(m,c)}}else e=[...e,s]}),e},Wp=async({toAddr:o,utxoList:t,baseCoinId:e,sendAmountInt:s,contractAddress:a})=>{let{AdaWallet:m}=await Ye(),i;return e===0&&(t==null?void 0:t.some(({multiAsset:c})=>!!(c!=null&&c.length)))?i=VC(t):e!==0&&(i=Up(a,s)),m.minAda(o,i)},Vp=async o=>{let{AdaWallet:t}=await Ye();return t.minFee(o)},GC="999999999",HC="transfer",os=({toAddr:o,utxoList:t,fromAddr:e,sendAmount:s,baseCoinId:a,contractAddress:m,minTransferAmountInt:i})=>{let c={address:o,inputs:t,ttl:GC,type:HC,changeAddress:e};return a===0?c={...c,amount:s}:c={...c,amount:i,multiAsset:Up(m,s)},c};var KC=({utxoList:o,toAddr:t,fromAddr:e,coinId:s,sendAmount:a,minTransferAmountInt:m},i)=>{let c=yt(s),[d,A]=(0,Gp.useState)("0");return Zt(()=>{(async()=>{if(!(o!=null&&o.length))return;let l=os({toAddr:t,fromAddr:e,utxoList:o,contractAddress:c==null?void 0:c.address,baseCoinId:c==null?void 0:c.baseCoinId,sendAmount:a,minTransferAmountInt:m});try{let u=await Vp({data:l});i==null||i(u),A(u)}catch(u){console.log(u)}})()},[c,t,e,a,m,o]),d},Hp=KC;r();n();var zp=f(_());r();n();me();ce();Eo();fo();r();n();var Kp=f(ho());var zC=()=>{let{coinId:o}=(0,Kp.useParams)(),t=F(),e=ot(),[s,a]=Mr(o);return{address:t,walletId:e,coin:s||{},coinId:Number(o),baseCoin:a||{},baseCoinId:s==null?void 0:s.baseCoinId}},qe=zC;var qC=()=>{let o=Fe(),{coin:t,coinId:e,walletId:s,address:a}=qe(),m=t==null?void 0:t.baseCoinId;return ro(async(i,c,d)=>{let A=await X().getRequestHeaders({walletId:s,needSign:!0,currency:"usd"}),l=c,u=i,p=O.add(O.add(m===0?i:d,c),d);m===0&&O.gte(p,o)&&(u=o,l="0"),m!==0&&(l=O.add(c,O.add(d,d)));let C={coinId:e,address:a,fee:l,amount:u},{data:S}=await Qo(Oo.getSpecialUtxoList,C,{headers:A});return S},[e,s,a,m,o])},ts=qC;var ZC=(o,t,e)=>{let[s,a]=(0,zp.useState)([]),m=ts();return Zt(()=>{(async()=>{let i=await m(o,t,e);a(i)})()},[o,t,e,m]),s},qp=ZC;r();n();fo();var $C=o=>{let t=T(),{coin:{symbol:e,baseCoinId:s,decimals:a}}=t,m=O.div(o,10**a);return ro(i=>s===0&&O.gt(m,0)&&O.lt(i,m)?{key:"wallet_extension_send_transfer_at_least",args:{amount:Je(m,{symbol:e})},type:oo.COMMON_ERROR}:null,[m,e,s])},YC=o=>{let t=kt(),{coin:e}=T(),s=G(),a=Fe(),{baseCoinId:m}=e;return ro(i=>{let c=O.mul(i,10**(e==null?void 0:e.decimals)),d,A;m===0?(A=O.add(O.add(c,s),o),d=O.add(c,s)):(A=O.add(O.add(s,o),o),d=O.add(s,o));let l=O.sub(a,d);return l!=="0"&&O.lt(l,o)?{key:"extension_wallet_cardano_text_token_atleast",args:{amount:Je(A,{decimals:t==null?void 0:t.decimals})},type:oo.COMMON_ERROR}:null},[m,s,a,t==null?void 0:t.decimals,e==null?void 0:e.decimals])},JC=o=>{let t=$C(o),e=YC(o);Y([t,e])},Zp=JC;function XC(){let o=(0,es.useDispatch)(),t=G(),e=(0,es.useSelector)(rn),s=e==null?void 0:e.minTransferInt,a=W(),m=B(),i=Fe(),{coin:c,coinId:d,baseCoinId:A,address:l}=qe(),u=qp(a,t,s);return Zt(()=>{(async()=>{let p=await Wp({contractAddress:c==null?void 0:c.address,baseCoinId:A,utxoList:u,toAddr:m,sendAmountInt:a});o(jm({minTransferInt:p}))})()},[u,A,m,a,c==null?void 0:c.address]),Zt(()=>{A===0&&(u==null?void 0:u.some(({multiAsset:p})=>!!(p!=null&&p.length)))&&o(nt(O.sub(i,s)))},[u,i,s]),Zp(s),Hp({coinId:d,toAddr:m,utxoList:u,fromAddr:l,minTransferAmountInt:s,sendAmount:a},p=>{o(M(p))}),$p.default.createElement(H,null)}var Yp=XC;r();n();var Qp=f(_());r();n();var Jp=f(ho()),$s=f(E());fo();var QC=()=>{let o=(0,Jp.useHistory)(),t=(0,$s.useSelector)(et),e=(0,$s.useSelector)(rn),s=e==null?void 0:e.minTransferInt,{coin:a,coinId:m,address:i,walletId:c}=qe(),d=ra(c),A=W(),l=B(),u=G(),p=ts(),C=be({fromAddr:i,walletId:c,localType:a==null?void 0:a.localType});return ro(async()=>{try{let I=await p(A,u,s),h=os({toAddr:l,fromAddr:i,utxoList:I,minTransferAmountInt:s,sendAmount:A,baseCoinId:a==null?void 0:a.baseCoinId,contractAddress:a==null?void 0:a.address}),x=await C({params:h}),y=await xo(a==null?void 0:a.localType,x),P={coinId:m,txHash:y,signedTx:x,walletId:c,toAdr:l,serviceCharge:u,fromAdr:i,coinAmount:A,walletType:d==null?void 0:d.serverWalletType},b=await Yn(P);to({tx_id:b}),o.push(t)}catch(I){hr.error((I==null?void 0:I.error_message)||L("wallet_home_toast_network_error"))}},[a,A,l,s,u,d==null?void 0:d.serverWalletType,p])},Xp=QC;function jC(){let o=Xp();return J(),Qp.default.createElement(z,{confirmButtonProps:{onSubmit:o}})}var jp=jC;var oI={match:o=>o===pi,pages:{AmountPage:Yp,ConfirmPage:jp,AddressPage:K}},ol=oI;r();n();ao();r();n();r();n();var rs=f(_()),tl=f(E());var tI=()=>{let o=(0,tl.useDispatch)(),{coin:t}=T(),e=F(),s=(0,rs.useCallback)(async()=>{var m;try{let{data:i={}}=await Se({coinId:t.coinId,address:e});(m=i==null?void 0:i.info)!=null&&m.normal?o(M(i.info.normal)):o(U(!0))}catch{o(U(!0))}finally{o(yo(!1))}},[o,e,t.coinId]),{run:a}=Go(s,{wait:500});(0,rs.useEffect)(()=>{o(yo(!0)),a()},[e,t.coinId,a,o])},el=tI;var eI=({children:o})=>(el(),o),rl=eI;r();n();var nl=f(_());var rI=()=>(Y(),nl.default.createElement(H,null)),sl=rI;r();n();var ml=f(_());r();n();var il=f(E());ce();me();Eo();var nI=()=>{let o=io(),{coin:t}=T(),e=F(),s=eo(),a=G(),m=(0,il.useSelector)(Wo),i=B();return wo(async()=>{let C=await X().getRequestHeaders({walletId:m,needSign:!0,currency:"usd"}),S={coinId:t.coinId,address:e,amount:s,fee:a,accountId:m},{data:I=[]}=await Qo(Oo.getSpecialUtxoList,S,{headers:C});return I},(C=[])=>({inputs:C.map((x={})=>({txId:x.txId,vOut:x.index,address:x.address,amount:x.amount})),outputs:[{address:i,amount:s}],address:e,fee:a}),async C=>await X().signTransaction(C,e,t.localType),async C=>{let S=await xo(t.localType,C),I={signedTx:C,coinAmount:s,coinId:t.coinId,fromAdr:e,toAdr:i,serviceCharge:a,txHash:S};return await o(I)},C=>(to({tx_id:C}),C))},al=nI;var sI=()=>{let o=al();return J(),ml.default.createElement(z,{confirmButtonProps:{onSubmit:o}})},cl=sI;var iI={match:o=>o===li,Container:rl,pages:{AddressPage:K,AmountPage:sl,ConfirmPage:cl}},ul=iI;r();n();ao();r();n();var dl=f(_());var aI=({children:o})=>{let e=_t().get("from");return dl.default.createElement(No,{fromAddress:e},o)},fl=aI;r();n();var Il=f(_());r();n();ce();me();var mI=()=>{let{baseCoin:o}=T();return ro(async t=>{let e={address:t,coinId:o.coinId};try{let{data:a}=await Qo(Oo.postCheckAddress,e);if(a!=null&&a.res)return null}catch(a){console.log(a)}return await Nt(t,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},pl=()=>{let o=st(),t=mI();return[o,t]};r();n();var ns=f(_()),ll=f(E());To();var cI=()=>{let o=(0,ll.useDispatch)(),{coin:t}=T(),e=F(),s=B(),a=Xr(),m=(0,ns.useCallback)(async()=>{try{let c=await a({coinId:t.coinId,address:e,fromAddr:e,toAddr:s});o(ic({name:"signInfo",value:c}));let d=[],{fee:A,depositMinAmount:l,minTransferTokenValue:u,depositGasFee:p,toAddressCheck:C}=c;t.baseCoinId===0?d.push(A):C===0?d.push(A,u,l,p):d.push(A,u);let S=d.reduce((I,h)=>Co(I,h),0);o(M(S))}catch{o(U(!0))}finally{o(yo(!1))}},[o,a,t.coinId,t.baseCoinId,e,s]),{run:i}=Go(m,{wait:500});(0,ns.useEffect)(()=>{o(yo(!0)),o(U(!1)),i()},[o,m,i])},gl=cI;r();n();var Al=f(_()),ss=f(E());To();ao();var uI=()=>{let o=(0,ss.useDispatch)(),{coin:t,baseCoin:e}=T(),{baseCoinId:s}=t,a=F(),m=ot(),i=Or(a,m,ai),c=Te(e.coinId,m,{addressType:i}),d=c==null?void 0:c.coinAmountInt,A=(0,ss.useSelector)(De),l=A==null?void 0:A.signInfo,u=l==null?void 0:l.storageUsedAmount;(0,Al.useEffect)(()=>{if(!d||!u)return;let p=ft(d,u);o(s===0?nt(p):he(p))},[o,s,u,d])},Cl=uI;var dI=()=>{gl(),Cl();let o=pl();return Il.default.createElement(K,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},Sl=dI;r();n();var _l=f(_());r();n();var Tl=f(E());To();var hl=()=>{let o=it(),t=im(),e=(0,Tl.useSelector)(De),{coin:s,baseCoin:a}=T(),m=G(),i=zr();return ro(c=>{var u;let d=Co((u=e==null?void 0:e.signInfo)==null?void 0:u.storageUsedAmount,m),A=So(d,10**a.decimals);return(s.baseCoinId===0?Ro(o,c):Ro(t,"0"))?{key:"wallet_extension_transfer_tip_continue_using_address",args:{num:i(A,a,{useApproximate:!1,isFee:!0})},type:oo.FEE_BALANCE_INSUFFICIENT}:null})},xl=()=>{let o=ja(),t=hl();Y({fns:[o,t],override:!0})},fI=()=>{let o=hl();return ro(t=>{let e=o(t);return e?{...e,highlight:$t.AMOUNT}:null})},yl=()=>{let o=tm(),t=fI();J({fns:[o,t],override:!0})};var pI=()=>(xl(),_l.default.createElement(H,{totalAmountProps:{type:"amount"}})),Fl=pI;r();n();var bl=f(_());r();n();var Pl=f(E()),Ys=f(Rl());var lI=()=>{let{coin:o}=T(),t=F(),e=B(),s=eo(),a=G(),m=ot(),i=(0,Pl.useSelector)(De),c=Xr(),d=En(),A=be({fromAddr:t,localType:o.localType,walletId:m}),l=gm({coinId:o.coinId,coinAmount:s,fromAddr:t,toAddr:e,localType:o.localType,networkFee:a,walletId:m}),u=async()=>await c({coinId:o.coinId,address:t,fromAddr:t,toAddr:e}),p=h=>{let{blockHash:x,nonce:y}=h;return{from:t,blockHash:x,type:Ys.NearTypes.TransferNear,nonce:y,receiverId:e,amount:s}},C=h=>{let{blockHash:x,nonce:y}=h,{signInfo:P}=i,{toAddressCheck:b,minTransferTokenValue:k,depositGasFee:w,fee:Q,depositMinAmount:q}=P;return{from:t,blockHash:x,type:Ys.NearTypes.TransferToken,nonce:y,receiverId:e,amount:s,contract:o.address,depositGas:w,transferGas:Q,depositValue:q,minTransferTokenValue:k,shouldDeposit:Boolean(b===0)}};return wo(u,h=>o.baseCoinId===0?{params:p(h)}:{params:C(h)},A,l,d)},El=lI;var gI=()=>{let o=El();return yl(),bl.default.createElement(z,{confirmButtonProps:{onSubmit:o}})},kl=gI;var AI={match:o=>o===gi,Container:fl,pages:{AddressPage:Sl,AmountPage:Fl,ConfirmPage:kl}},wl=AI;var CI=[ap,Uc,uu,hu,qu,sd,yd,Ld,zd,jd,Ip,bp,Op,ol,ul,wl],Bl=CI;var II=({coinId:o,protocolId:t,baseCoinId:e})=>{let s=Bl.find(({match:d})=>d(e,o,t))||{},{Container:a=({children:d})=>qo.default.createElement(qo.default.Fragment,null,d)}=s,{AddressPage:m,AmountPage:i,ConfirmPage:c}=s.pages||{};return(0,Nl.isEmpty)(s)?null:qo.default.createElement(a,null,qo.default.createElement(Wt.Switch,null,qo.default.createElement(Wt.Route,{exact:!0,path:`${Vo}/:coinId?${vr}`,component:m}),qo.default.createElement(Wt.Route,{exact:!0,path:`${Vo}/:coinId?${Dr}`,component:i}),qo.default.createElement(Wt.Route,{exact:!0,path:`${Vo}/:coinId?${le}`,component:c})),qo.default.createElement(Ac,null))},SI=(0,qo.memo)(II),TI=()=>{let{coinId:o}=(0,Wt.useParams)(),{coin:t,baseCoin:e}=Rr(o,!0);return qo.default.createElement(SI,{coinId:t.coinId,baseCoinId:e.coinId,protocolId:t==null?void 0:t.protocolId})},EK=TI;export{EK as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=SendPageContainer-NPWRS2BT.js.map
