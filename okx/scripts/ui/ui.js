import{G as us,H as fs,M as cs,a as ls}from"./chunk-BEUQTIXQ.js";import{F as ds}from"./chunk-LJ5PRGMW.js";import{e as ps}from"./chunk-FCQXV5DP.js";import{a as hs}from"./chunk-VPS6QSE6.js";import{k as ss}from"./chunk-KI55A4OZ.js";import{a as os,y as as}from"./chunk-3HKLXQEP.js";import{a as Ht}from"./chunk-SEQNVA6V.js";import{a as rt}from"./chunk-5OUCZQSW.js";import{a as Dr}from"./chunk-C3KORCEI.js";import{a as ka}from"./chunk-QWA3DFD5.js";import{a as is}from"./chunk-46EWNNLH.js";import{c as Hn}from"./chunk-YTINGM2Q.js";import{a as Bf,b as qf,c as Hf}from"./chunk-AGVRLTFZ.js";import{a as jf}from"./chunk-QJBKVZVF.js";import{a as Ma}from"./chunk-YIKS2AYL.js";import"./chunk-EXUJ54CX.js";import{e as lo}from"./chunk-D5VZXMFP.js";import"./chunk-XAMN4IIH.js";import{a as Ir}from"./chunk-BTS2GOAC.js";import{c as es}from"./chunk-E6QSM6KZ.js";import{e as Qa}from"./chunk-7CGGT32T.js";import"./chunk-6L6L7B7D.js";import"./chunk-UVKTLEHJ.js";import"./chunk-3FXJS34C.js";import{a as ts}from"./chunk-DCUBXXOY.js";import{a as oe}from"./chunk-3QK7FEQ5.js";import{a as qa}from"./chunk-QLH3KLV3.js";import{b as Za,c as Ja}from"./chunk-P4XRBDXP.js";import{a as Ft,b as Pa,c as we,d as tt,e as La,f as Ra}from"./chunk-573GFXXJ.js";import{h as Ba}from"./chunk-2HWABU7H.js";import"./chunk-APEQZGKB.js";import{a as fi}from"./chunk-P2BTSOJO.js";import{n as Xa}from"./chunk-3T5SDSKD.js";import"./chunk-2NIR645O.js";import"./chunk-SI3RW2CS.js";import{i as ns}from"./chunk-4EWRAZMR.js";import"./chunk-NGDV3PTC.js";import{a as rs}from"./chunk-MFPHQZ6G.js";import{a as J}from"./chunk-AX4SXHC6.js";import{a as Va}from"./chunk-UCS37WXR.js";import"./chunk-DUHXKIBS.js";import"./chunk-QNEJI55N.js";import"./chunk-5W7SRP5N.js";import"./chunk-YVRXETFX.js";import{p as za}from"./chunk-GUWGENNL.js";import{a as ja}from"./chunk-WYB2CUAN.js";import"./chunk-B2BOSVTW.js";import"./chunk-GUJXW3GJ.js";import"./chunk-VIS7KIVI.js";import"./chunk-F64VYES3.js";import{a as Zi}from"./chunk-DHX2X277.js";import{b as nt}from"./chunk-67YO4IPY.js";import"./chunk-DLUAVD7X.js";import"./chunk-WRWXCAEZ.js";import{a as $a,i as Ya}from"./chunk-OZ6XSJY6.js";import{c as Ga,n as Ka}from"./chunk-DMJQUOJT.js";import"./chunk-MTMZQEHP.js";import"./chunk-NKTQMEXG.js";import"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import{a as ao}from"./chunk-4OTZHHYZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import{aa as zi,o as Vi}from"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import{b as $i,c as Yi}from"./chunk-S3ECGMEP.js";import{a as kt,b as Re}from"./chunk-PX7HII6H.js";import{a as ci}from"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import{a as Ha,b as Fa}from"./chunk-CRSAGI5R.js";import"./chunk-ODS2CEAN.js";import"./chunk-S3BOQTUM.js";import{r as so}from"./chunk-TPEASXIF.js";import"./chunk-JSAFBAMQ.js";import"./chunk-A336VZZF.js";import{b as Y}from"./chunk-XEOGXIVD.js";import"./chunk-PCGRDRHF.js";import"./chunk-IU3TYIWS.js";import{B as Wa,k as Ua}from"./chunk-VPBQLZCI.js";import{a as Ki,b as We,c as Or}from"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import{w as Ue}from"./chunk-X2LENRE7.js";import{$ as Zo,$a as Ta,A as To,B as xo,C as Co,D as Ao,E as Oo,F as Io,G as Do,H as No,I as Mo,J as ko,K as Po,L as Lo,M as Ro,Ma as wa,N as Uo,O as Wo,P as Bo,Q as qo,R as jo,Ra as ya,S as Ho,T as Fo,U as Go,Ua as ba,V as Ko,Va as va,W as $o,Wa as jt,X as Yo,Y as Vo,Z as zo,Za as Sa,_ as Xo,_a as Ea,a as xe,aa as Jo,ab as xa,b as uo,ba as Qo,bb as Ca,c as Bt,ca as ea,cb as Aa,d as fo,da as ta,db as Oa,e as qt,ea as ra,eb as Ia,f as co,fa as na,fb as Da,g as po,ga as ia,gb as Na,h as ho,ha as oa,i as mo,ia as aa,ja as sa,k as go,ka as la,l as _o,la as ua,m as wo,pa as fa,ra as ca,sa as da,ta as pa,u as yo,ua as ha,v as bo,va as ma,w as vo,wa as ga,x as So,xa as _a,y as Eo,z as Be}from"./chunk-O4EDZSHP.js";import{b as Hi,d as Fi,i as xr,j as Cr}from"./chunk-HU3KBV5G.js";import{a as Tr,b as et}from"./chunk-6ZPGW3YM.js";import{a as Ut,b as ui,c as Uf,g as ro,h as no,l as io,o as oo}from"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import{a as Kn}from"./chunk-D7KW4FFX.js";import{A as Mi,B as ki,V as Pi,W as Li,X as Ri,a as di,b as pi,c as hi,ca as Ui,d as mi,e as gi,f as _i,g as wi,ga as Wi,h as yi,ha as Bi,ia as qi,ja as ji,k as bi,la as Wf,n as vi,o as Si,p as Ei,q as Ti,r as xi,s as Ci,t as Ai,u as Oi,w as Ii,x as Di,z as Ni}from"./chunk-RAXGEVRQ.js";import{b as Jn,d as Se,f as Nt}from"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import{b as Wt,d as Ji,f as Qi,g as eo,i as to}from"./chunk-FLCN6MAI.js";import"./chunk-YMZEQGAL.js";import"./chunk-7E3KY4EN.js";import"./chunk-JIRWXBHS.js";import"./chunk-3TVEFIPW.js";import"./chunk-UXFKODVN.js";import{b as Xi}from"./chunk-IMRS4RGO.js";import"./chunk-52GWQSZH.js";import{a as Te}from"./chunk-TPSXCUGD.js";import{a as Gi}from"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import"./chunk-RMQJRDTF.js";import{c as Ar}from"./chunk-2YLR7R2N.js";import{a as Rt,b as li}from"./chunk-MVLY6WUP.js";import{a as ni,c as Mt,g as ii,h as br}from"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import{a as Pf,b as Lf}from"./chunk-DQTCC3FF.js";import{a as Qn,b as ei,d as ti,e as ri,f as Qe,g as yr}from"./chunk-O5LVHMPV.js";import{$b as ai,C as Dt,D as mr,Wb as Pt,Zb as vr,_b as oi,a as K,b as Me,c as ie,d as ke,e as hr,ec as Sr,f as Pe,fc as Lt,gc as Rf,h as jn,hc as Ee,mc as si,nc as Er,q as $n,v as _e,y as G}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{G as $,H as Zn,I as Je,a as Vn,b as zn,f as _r,j as Xn,n as kf,o as fe,r as wr,y as Ze}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{V as Xe,c as Yn,w as gr}from"./chunk-C2H3SRET.js";import{a as W,f as Le}from"./chunk-V4YVDLI4.js";import"./chunk-UXBKFN2U.js";import"./chunk-HCW4K7TR.js";import"./chunk-Z4JATHZR.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import{a as ze}from"./chunk-IYYFWVWL.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import{c as Ot,d as ae,e as se,n as It,o as Gn}from"./chunk-RYNAOZ73.js";import"./chunk-PR4SLUV4.js";import"./chunk-Q34CQJXG.js";import{d as Fn}from"./chunk-GKHVFCKF.js";import{c as C,f as y,h as ve,l as process,m as s,n as c,o as l}from"./chunk-6V2G2Z5W.js";var it=C((Um,Nr)=>{"use strict";s();l();typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Nr.exports={nextTick:Ff}:Nr.exports=process;function Ff(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,u;switch(i){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(o=new Array(i-1),u=0;u<o.length;)o[u++]=arguments[u];return process.nextTick(function(){e.apply(null,o)})}}});var gs=C((qm,ms)=>{s();l();var Gf={}.toString;ms.exports=Array.isArray||function(e){return Gf.call(e)=="[object Array]"}});var Mr=C((Fm,_s)=>{s();l();_s.exports=Ot().EventEmitter});var ot=C((kr,ys)=>{s();l();var Gt=Fn(),ce=Gt.Buffer;function ws(e,t){for(var r in e)t[r]=e[r]}ce.from&&ce.alloc&&ce.allocUnsafe&&ce.allocUnsafeSlow?ys.exports=Gt:(ws(Gt,kr),kr.Buffer=qe);function qe(e,t,r){return ce(e,t,r)}ws(ce,qe);qe.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return ce(e,t,r)};qe.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=ce(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};qe.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return ce(e)};qe.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Gt.SlowBuffer(e)}});var vs=C((Vm,Pr)=>{"use strict";s();l();function Kf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var bs=ot().Buffer,at=It();function $f(e,t,r){e.copy(t,r)}Pr.exports=function(){function e(){Kf(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},e.prototype.concat=function(r){if(this.length===0)return bs.alloc(0);if(this.length===1)return this.head.data;for(var n=bs.allocUnsafe(r>>>0),i=this.head,o=0;i;)$f(i.data,n,o),o+=i.data.length,i=i.next;return n},e}();at&&at.inspect&&at.inspect.custom&&(Pr.exports.prototype[at.inspect.custom]=function(){var e=at.inspect({length:this.length});return this.constructor.name+" "+e})});var Lr=C((Zm,Ts)=>{"use strict";s();l();var Ss=it();function Yf(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&Ss.nextTick(Es,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!t&&o?(Ss.nextTick(Es,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(o)}),this)}function Vf(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Es(e,t){e.emit("error",t)}Ts.exports={destroy:Yf,undestroy:Vf}});var Ur=C((eg,Ms)=>{"use strict";s();l();var Ce=it();Ms.exports=L;function Cs(e){var t=this;this.next=null,this.entry=null,this.finish=function(){dc(t,e)}}var zf=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:Ce.nextTick,je;L.WritableState=lt;var As=Object.create(ae());As.inherits=se();var Xf={deprecate:Gn()},Os=Mr(),$t=ot().Buffer,Zf=globalThis.Uint8Array||function(){};function Jf(e){return $t.from(e)}function Qf(e){return $t.isBuffer(e)||e instanceof Zf}var Is=Lr();As.inherits(L,Os);function ec(){}function lt(e,t){je=je||Ae(),e=e||{};var r=t instanceof je;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=e.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=e.decodeStrings===!1;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(f){sc(t,f)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Cs(this)}lt.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(lt.prototype,"buffer",{get:Xf.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Kt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Kt=Function.prototype[Symbol.hasInstance],Object.defineProperty(L,Symbol.hasInstance,{value:function(e){return Kt.call(this,e)?!0:this!==L?!1:e&&e._writableState instanceof lt}})):Kt=function(e){return e instanceof this};function L(e){if(je=je||Ae(),!Kt.call(L,this)&&!(this instanceof je))return new L(e);this._writableState=new lt(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Os.call(this)}L.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function tc(e,t){var r=new Error("write after end");e.emit("error",r),Ce.nextTick(t,r)}function rc(e,t,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),Ce.nextTick(n,o),i=!1),i}L.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&Qf(e);return o&&!$t.isBuffer(e)&&(e=Jf(e)),typeof t=="function"&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=ec),n.ended?tc(this,r):(o||rc(this,n,e,r))&&(n.pendingcb++,i=ic(this,n,o,e,t,r)),i};L.prototype.cork=function(){var e=this._writableState;e.corked++};L.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Ds(this,e))};L.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function nc(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=$t.from(t,r)),t}Object.defineProperty(L.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ic(e,t,r,n,i,o){if(!r){var u=nc(t,n,i);n!==u&&(r=!0,i="buffer",n=u)}var f=t.objectMode?1:n.length;t.length+=f;var _=t.length<t.highWaterMark;if(_||(t.needDrain=!0),t.writing||t.corked){var w=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},w?w.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Rr(e,t,!1,f,n,i,o);return _}function Rr(e,t,r,n,i,o,u){t.writelen=n,t.writecb=u,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function oc(e,t,r,n,i){--t.pendingcb,r?(Ce.nextTick(i,n),Ce.nextTick(st,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),st(e,t))}function ac(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function sc(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(ac(r),t)oc(e,r,n,t,i);else{var o=Ns(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Ds(e,r),n?zf(xs,e,r,o,i):xs(e,r,o,i)}}function xs(e,t,r,n){r||lc(e,t),t.pendingcb--,n(),st(e,t)}function lc(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Ds(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var u=0,f=!0;r;)i[u]=r,r.isBuf||(f=!1),r=r.next,u+=1;i.allBuffers=f,Rr(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new Cs(t),t.bufferedRequestCount=0}else{for(;r;){var _=r.chunk,w=r.encoding,b=r.callback,S=t.objectMode?1:_.length;if(Rr(e,t,!1,S,_,w,b),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}L.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};L.prototype._writev=null;L.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&cc(this,n,r)};function Ns(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function uc(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),st(e,t)})}function fc(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,Ce.nextTick(uc,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function st(e,t){var r=Ns(t);return r&&(fc(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function cc(e,t,r){t.ending=!0,st(e,t),r&&(t.finished?Ce.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function dc(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(L.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});L.prototype.destroy=Is.destroy;L.prototype._undestroy=Is.undestroy;L.prototype._destroy=function(e,t){this.end(),t(e)}});var Ae=C((ng,Rs)=>{"use strict";s();l();var ks=it(),pc=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};Rs.exports=de;var Ps=Object.create(ae());Ps.inherits=se();var Ls=qr(),Br=Ur();Ps.inherits(de,Ls);for(Wr=pc(Br.prototype),Yt=0;Yt<Wr.length;Yt++)Vt=Wr[Yt],de.prototype[Vt]||(de.prototype[Vt]=Br.prototype[Vt]);var Wr,Vt,Yt;function de(e){if(!(this instanceof de))return new de(e);Ls.call(this,e),Br.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",hc)}Object.defineProperty(de.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function hc(){this.allowHalfOpen||this._writableState.ended||ks.nextTick(mc,this)}function mc(e){e.end()}Object.defineProperty(de.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});de.prototype._destroy=function(e,t){this.push(null),this.end(),ks.nextTick(t,e)}});var Fr=C(Ws=>{"use strict";s();l();var Hr=ot().Buffer,Us=Hr.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function gc(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function _c(e){var t=gc(e);if(typeof t!="string"&&(Hr.isEncoding===Us||!Us(e)))throw new Error("Unknown encoding: "+e);return t||e}Ws.StringDecoder=ut;function ut(e){this.encoding=_c(e);var t;switch(this.encoding){case"utf16le":this.text=Ec,this.end=Tc,t=4;break;case"utf8":this.fillLast=bc,t=4;break;case"base64":this.text=xc,this.end=Cc,t=3;break;default:this.write=Ac,this.end=Oc;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Hr.allocUnsafe(t)}ut.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};ut.prototype.end=Sc;ut.prototype.text=vc;ut.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function jr(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function wc(e,t,r){var n=t.length-1;if(n<r)return 0;var i=jr(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=jr(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=jr(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function yc(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function bc(e){var t=this.lastTotal-this.lastNeed,r=yc(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function vc(e,t){var r=wc(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function Sc(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function Ec(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Tc(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function xc(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Cc(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Ac(e){return e.toString(this.encoding)}function Oc(e){return e&&e.length?this.write(e):""}});var qr=C((fg,Xs)=>{"use strict";s();l();var Fe=it();Xs.exports=N;var Ic=gs(),ft;N.ReadableState=Ks;var ug=Ot().EventEmitter,Hs=function(e,t){return e.listeners(t).length},Vr=Mr(),ct=ot().Buffer,Dc=globalThis.Uint8Array||function(){};function Nc(e){return ct.from(e)}function Mc(e){return ct.isBuffer(e)||e instanceof Dc}var Fs=Object.create(ae());Fs.inherits=se();var Gr=It(),T=void 0;Gr&&Gr.debuglog?T=Gr.debuglog("stream"):T=function(){};var kc=vs(),Gs=Lr(),He;Fs.inherits(N,Vr);var Kr=["error","close","destroy","pause","resume"];function Pc(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Ic(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function Ks(e,t){ft=ft||Ae(),e=e||{};var r=t instanceof ft;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=e.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new kc,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(He||(He=Fr().StringDecoder),this.decoder=new He(e.encoding),this.encoding=e.encoding)}function N(e){if(ft=ft||Ae(),!(this instanceof N))return new N(e);this._readableState=new Ks(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Vr.call(this)}Object.defineProperty(N.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});N.prototype.destroy=Gs.destroy;N.prototype._undestroy=Gs.undestroy;N.prototype._destroy=function(e,t){this.push(null),t(e)};N.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=ct.from(e,t),t=""),n=!0),$s(this,e,t,!1,n)};N.prototype.unshift=function(e){return $s(this,e,null,!0,!1)};function $s(e,t,r,n,i){var o=e._readableState;if(t===null)o.reading=!1,Wc(e,o);else{var u;i||(u=Lc(o,t)),u?e.emit("error",u):o.objectMode||t&&t.length>0?(typeof t!="string"&&!o.objectMode&&Object.getPrototypeOf(t)!==ct.prototype&&(t=Nc(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):$r(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||t.length!==0?$r(e,o,t,!1):Ys(e,o)):$r(e,o,t,!1))):n||(o.reading=!1)}return Rc(o)}function $r(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&zt(e)),Ys(e,t)}function Lc(e,t){var r;return!Mc(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function Rc(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}N.prototype.isPaused=function(){return this._readableState.flowing===!1};N.prototype.setEncoding=function(e){return He||(He=Fr().StringDecoder),this._readableState.decoder=new He(e),this._readableState.encoding=e,this};var Bs=8388608;function Uc(e){return e>=Bs?e=Bs:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function qs(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Uc(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}N.prototype.read=function(e){T("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return T("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Yr(this):zt(this),null;if(e=qs(e,t),e===0&&t.ended)return t.length===0&&Yr(this),null;var n=t.needReadable;T("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,T("length less than watermark",n)),t.ended||t.reading?(n=!1,T("reading or ended",n)):n&&(T("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=qs(r,t)));var i;return e>0?i=Vs(e,t):i=null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Yr(this)),i!==null&&this.emit("data",i),i};function Wc(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,zt(e)}}function zt(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(T("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Fe.nextTick(js,e):js(e))}function js(e){T("emit readable"),e.emit("readable"),zr(e)}function Ys(e,t){t.readingMore||(t.readingMore=!0,Fe.nextTick(Bc,e,t))}function Bc(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(T("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}N.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};N.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,T("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,o=i?f:h;n.endEmitted?Fe.nextTick(o):r.once("end",o),e.on("unpipe",u);function u(m,v){T("onunpipe"),m===r&&v&&v.hasUnpiped===!1&&(v.hasUnpiped=!0,b())}function f(){T("onend"),e.end()}var _=qc(r);e.on("drain",_);var w=!1;function b(){T("cleanup"),e.removeListener("close",A),e.removeListener("finish",d),e.removeListener("drain",_),e.removeListener("error",p),e.removeListener("unpipe",u),r.removeListener("end",f),r.removeListener("end",h),r.removeListener("data",E),w=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&_()}var S=!1;r.on("data",E);function E(m){T("ondata"),S=!1;var v=e.write(m);v===!1&&!S&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&zs(n.pipes,e)!==-1)&&!w&&(T("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,S=!0),r.pause())}function p(m){T("onerror",m),h(),e.removeListener("error",p),Hs(e,"error")===0&&e.emit("error",m)}Pc(e,"error",p);function A(){e.removeListener("finish",d),h()}e.once("close",A);function d(){T("onfinish"),e.removeListener("close",A),h()}e.once("finish",d);function h(){T("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(T("pipe resume"),r.resume()),e};function qc(e){return function(){var t=e._readableState;T("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&Hs(e,"data")&&(t.flowing=!0,zr(e))}}N.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var u=zs(t.pipes,e);return u===-1?this:(t.pipes.splice(u,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};N.prototype.on=function(e,t){var r=Vr.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&zt(this):Fe.nextTick(jc,this))}return r};N.prototype.addListener=N.prototype.on;function jc(e){T("readable nexttick read 0"),e.read(0)}N.prototype.resume=function(){var e=this._readableState;return e.flowing||(T("resume"),e.flowing=!0,Hc(this,e)),this};function Hc(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Fe.nextTick(Fc,e,t))}function Fc(e,t){t.reading||(T("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),zr(e),t.flowing&&!t.reading&&e.read(0)}N.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function zr(e){var t=e._readableState;for(T("flow",t.flowing);t.flowing&&e.read()!==null;);}N.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(T("wrapped end"),r.decoder&&!r.ended){var u=r.decoder.end();u&&u.length&&t.push(u)}t.push(null)}),e.on("data",function(u){if(T("wrapped data"),r.decoder&&(u=r.decoder.write(u)),!(r.objectMode&&u==null)&&!(!r.objectMode&&(!u||!u.length))){var f=t.push(u);f||(n=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(u){return function(){return e[u].apply(e,arguments)}}(i));for(var o=0;o<Kr.length;o++)e.on(Kr[o],this.emit.bind(this,Kr[o]));return this._read=function(u){T("wrapped _read",u),n&&(n=!1,e.resume())},this};Object.defineProperty(N.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});N._fromList=Vs;function Vs(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=Gc(e,t.buffer,t.decoder),r}function Gc(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?Kc(e,t):$c(e,t),n}function Kc(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,u=e>o.length?o.length:e;if(u===o.length?i+=o:i+=o.slice(0,e),e-=u,e===0){u===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(u));break}++n}return t.length-=n,i}function $c(e,t){var r=ct.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,u=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,u),e-=u,e===0){u===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(u));break}++i}return t.length-=i,r}function Yr(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Fe.nextTick(Yc,t,e))}function Yc(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function zs(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var Xr=C((pg,Qs)=>{"use strict";s();l();Qs.exports=pe;var Xt=Ae(),Js=Object.create(ae());Js.inherits=se();Js.inherits(pe,Xt);function Vc(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function pe(e){if(!(this instanceof pe))return new pe(e);Xt.call(this,e),this._transformState={afterTransform:Vc.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",zc)}function zc(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){Zs(e,t,r)}):Zs(this,null,null)}pe.prototype.push=function(e,t){return this._transformState.needTransform=!1,Xt.prototype.push.call(this,e,t)};pe.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};pe.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};pe.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};pe.prototype._destroy=function(e,t){var r=this;Xt.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function Zs(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var nl=C((gg,rl)=>{"use strict";s();l();rl.exports=dt;var el=Xr(),tl=Object.create(ae());tl.inherits=se();tl.inherits(dt,el);function dt(e){if(!(this instanceof dt))return new dt(e);el.call(this,e)}dt.prototype._transform=function(e,t,r){r(null,e)}});var ol=C((le,il)=>{s();l();le=il.exports=qr();le.Stream=le;le.Readable=le;le.Writable=Ur();le.Duplex=Ae();le.Transform=Xr();le.PassThrough=nl()});var sl=C((vg,Qr)=>{s();l();var al=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);al?(Zr=new Uint8Array(16),Qr.exports=function(){return al(Zr),Zr}):(Jr=new Array(16),Qr.exports=function(){for(var t=0,r;t<16;t++)(t&3)===0&&(r=Math.random()*4294967296),Jr[t]=r>>>((t&3)<<3)&255;return Jr});var Zr,Jr});var fl=C((Tg,ul)=>{s();l();var ll=[];for(pt=0;pt<256;++pt)ll[pt]=(pt+256).toString(16).substr(1);var pt;function Xc(e,t){var r=t||0,n=ll;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}ul.exports=Xc});var dl=C((Ag,cl)=>{s();l();var Zc=sl(),Jc=fl();function Qc(e,t,r){var n=t&&r||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||Zc)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t)for(var o=0;o<16;++o)t[n+o]=i[o];return t||Jc(i)}cl.exports=Qc});var ml=C((Dg,hl)=>{s();l();var pl=ol().Duplex,ed=It().inherits,td=dl();hl.exports=ye;ed(ye,pl);function ye(){pl.call(this,{objectMode:!0}),this._payloads={}}ye.prototype.send=function(e){throw new Error('StreamProvider - does not support synchronous RPC calls. called: "'+e.method+'"')};ye.prototype.sendAsync=function(e,t){let r=e.id,n=td();if(e.id=n,Array.isArray(e)&&e.length===0)return t(null,[]);this._payloads[n]=[t,r],this.push(e)};ye.prototype.isConnected=function(){return!0};ye.prototype._onResponse=function(e){let t=e.id,r=this._payloads[t];if(!r)throw new Error(`StreamProvider - Unknown response id for response: ${e}`);delete this._payloads[t];let n=r[0];e.id=r[1],setTimeout(function(){n(null,e)})};ye.prototype._read=rd;ye.prototype._write=function(e,t,r){this._onResponse(e),r()};function rd(){}});var yt=C((vE,vn)=>{"use strict";s();l();!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?vn.exports=gh:vn.exports=process.nextTick;function gh(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,u;switch(i){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(o=new Array(i-1),u=0;u<o.length;)o[u++]=arguments[u];return process.nextTick(function(){e.apply(null,o)})}}});var Cu=C((TE,xu)=>{s();l();var _h={}.toString;xu.exports=Array.isArray||function(e){return _h.call(e)=="[object Array]"}});var Sn=C((AE,Au)=>{s();l();Au.exports=Ot().EventEmitter});var bt=C((En,Iu)=>{s();l();var sr=Fn(),he=sr.Buffer;function Ou(e,t){for(var r in e)t[r]=e[r]}he.from&&he.alloc&&he.allocUnsafe&&he.allocUnsafeSlow?Iu.exports=sr:(Ou(sr,En),En.Buffer=Ke);function Ke(e,t,r){return he(e,t,r)}Ou(he,Ke);Ke.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return he(e,t,r)};Ke.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=he(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Ke.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return he(e)};Ke.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return sr.SlowBuffer(e)}});var Mu=C((ME,Nu)=>{"use strict";s();l();function wh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Du=bt().Buffer;function yh(e,t,r){e.copy(t,r)}Nu.exports=function(){function e(){wh(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},e.prototype.concat=function(r){if(this.length===0)return Du.alloc(0);if(this.length===1)return this.head.data;for(var n=Du.allocUnsafe(r>>>0),i=this.head,o=0;i;)yh(i.data,n,o),o+=i.data.length,i=i.next;return n},e}()});var Tn=C((LE,Lu)=>{"use strict";s();l();var ku=yt();function bh(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;if(n||i){t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&ku(Pu,this,e);return}this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!t&&o?(ku(Pu,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(o)})}function vh(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Pu(e,t){e.emit("error",t)}Lu.exports={destroy:bh,undestroy:vh}});var Cn=C((WE,Fu)=>{"use strict";s();l();var De=yt();Fu.exports=B;function Uu(e){var t=this;this.next=null,this.entry=null,this.finish=function(){Bh(t,e)}}var Sh=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:De,$e;B.WritableState=St;var Wu=ae();Wu.inherits=se();var Eh={deprecate:Gn()},Bu=Sn(),ur=bt().Buffer,Th=globalThis.Uint8Array||function(){};function xh(e){return ur.from(e)}function Ch(e){return ur.isBuffer(e)||e instanceof Th}var qu=Tn();Wu.inherits(B,Bu);function Ah(){}function St(e,t){$e=$e||Ne(),e=e||{},this.objectMode=!!e.objectMode,t instanceof $e&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(o){Ph(t,o)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Uu(this)}St.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(St.prototype,"buffer",{get:Eh.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var lr;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(lr=Function.prototype[Symbol.hasInstance],Object.defineProperty(B,Symbol.hasInstance,{value:function(e){return lr.call(this,e)?!0:e&&e._writableState instanceof St}})):lr=function(e){return e instanceof this};function B(e){if($e=$e||Ne(),!lr.call(B,this)&&!(this instanceof $e))return new B(e);this._writableState=new St(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Bu.call(this)}B.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Oh(e,t){var r=new Error("write after end");e.emit("error",r),De(t,r)}function Ih(e,t,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),De(n,o),i=!1),i}B.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=Ch(e)&&!n.objectMode;return o&&!ur.isBuffer(e)&&(e=xh(e)),typeof t=="function"&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=Ah),n.ended?Oh(this,r):(o||Ih(this,n,e,r))&&(n.pendingcb++,i=Nh(this,n,o,e,t,r)),i};B.prototype.cork=function(){var e=this._writableState;e.corked++};B.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&ju(this,e))};B.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function Dh(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=ur.from(t,r)),t}function Nh(e,t,r,n,i,o){if(!r){var u=Dh(t,n,i);n!==u&&(r=!0,i="buffer",n=u)}var f=t.objectMode?1:n.length;t.length+=f;var _=t.length<t.highWaterMark;if(_||(t.needDrain=!0),t.writing||t.corked){var w=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},w?w.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else xn(e,t,!1,f,n,i,o);return _}function xn(e,t,r,n,i,o,u){t.writelen=n,t.writecb=u,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function Mh(e,t,r,n,i){--t.pendingcb,r?(De(i,n),De(vt,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),vt(e,t))}function kh(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Ph(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(kh(r),t)Mh(e,r,n,t,i);else{var o=Hu(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&ju(e,r),n?Sh(Ru,e,r,o,i):Ru(e,r,o,i)}}function Ru(e,t,r,n){r||Lh(e,t),t.pendingcb--,n(),vt(e,t)}function Lh(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function ju(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var u=0,f=!0;r;)i[u]=r,r.isBuf||(f=!1),r=r.next,u+=1;i.allBuffers=f,xn(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new Uu(t)}else{for(;r;){var _=r.chunk,w=r.encoding,b=r.callback,S=t.objectMode?1:_.length;if(xn(e,t,!1,S,_,w,b),r=r.next,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}B.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};B.prototype._writev=null;B.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&Wh(this,n,r)};function Hu(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Rh(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),vt(e,t)})}function Uh(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,De(Rh,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function vt(e,t){var r=Hu(t);return r&&(Uh(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function Wh(e,t,r){t.ending=!0,vt(e,t),r&&(t.finished?De(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function Bh(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(B.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});B.prototype.destroy=qu.destroy;B.prototype._undestroy=qu.undestroy;B.prototype._destroy=function(e,t){this.end(),t(e)}});var Ne=C((jE,Vu)=>{"use strict";s();l();var Ku=yt(),qh=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};Vu.exports=be;var $u=ae();$u.inherits=se();var Yu=On(),An=Cn();$u.inherits(be,Yu);var Gu=qh(An.prototype);for(fr=0;fr<Gu.length;fr++)cr=Gu[fr],be.prototype[cr]||(be.prototype[cr]=An.prototype[cr]);var cr,fr;function be(e){if(!(this instanceof be))return new be(e);Yu.call(this,e),An.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",jh)}function jh(){this.allowHalfOpen||this._writableState.ended||Ku(Hh,this)}function Hh(e){e.end()}Object.defineProperty(be.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});be.prototype._destroy=function(e,t){this.push(null),this.end(),Ku(t,e)}});var Nn=C(Xu=>{"use strict";s();l();var Dn=bt().Buffer,zu=Dn.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Fh(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function Gh(e){var t=Fh(e);if(typeof t!="string"&&(Dn.isEncoding===zu||!zu(e)))throw new Error("Unknown encoding: "+e);return t||e}Xu.StringDecoder=Et;function Et(e){this.encoding=Gh(e);var t;switch(this.encoding){case"utf16le":this.text=Xh,this.end=Zh,t=4;break;case"utf8":this.fillLast=Yh,t=4;break;case"base64":this.text=Jh,this.end=Qh,t=3;break;default:this.write=em,this.end=tm;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Dn.allocUnsafe(t)}Et.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};Et.prototype.end=zh;Et.prototype.text=Vh;Et.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function In(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:-1}function Kh(e,t,r){var n=t.length-1;if(n<r)return 0;var i=In(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r?0:(i=In(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r?0:(i=In(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function $h(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD".repeat(r);if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD".repeat(r+1);if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD".repeat(r+2)}}function Yh(e){var t=this.lastTotal-this.lastNeed,r=$h(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function Vh(e,t){var r=Kh(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function zh(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD".repeat(this.lastTotal-this.lastNeed):t}function Xh(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Zh(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Jh(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Qh(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function em(e){return e.toString(this.encoding)}function tm(e){return e&&e.length?this.write(e):""}});var On=C((VE,uf)=>{"use strict";s();l();var Ve=yt();uf.exports=M;var rm=Cu(),Tt;M.ReadableState=nf;var YE=Ot().EventEmitter,ef=function(e,t){return e.listeners(t).length},Rn=Sn(),xt=bt().Buffer,nm=globalThis.Uint8Array||function(){};function im(e){return xt.from(e)}function om(e){return xt.isBuffer(e)||e instanceof nm}var tf=ae();tf.inherits=se();var Mn=It(),x=void 0;Mn&&Mn.debuglog?x=Mn.debuglog("stream"):x=function(){};var am=Mu(),rf=Tn(),Ye;tf.inherits(M,Rn);var kn=["error","close","destroy","pause","resume"];function sm(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):rm(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function nf(e,t){Tt=Tt||Ne(),e=e||{},this.objectMode=!!e.objectMode,t instanceof Tt&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new am,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Ye||(Ye=Nn().StringDecoder),this.decoder=new Ye(e.encoding),this.encoding=e.encoding)}function M(e){if(Tt=Tt||Ne(),!(this instanceof M))return new M(e);this._readableState=new nf(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Rn.call(this)}Object.defineProperty(M.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});M.prototype.destroy=rf.destroy;M.prototype._undestroy=rf.undestroy;M.prototype._destroy=function(e,t){this.push(null),t(e)};M.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=xt.from(e,t),t=""),n=!0),of(this,e,t,!1,n)};M.prototype.unshift=function(e){return of(this,e,null,!0,!1)};function of(e,t,r,n,i){var o=e._readableState;if(t===null)o.reading=!1,cm(e,o);else{var u;i||(u=lm(o,t)),u?e.emit("error",u):o.objectMode||t&&t.length>0?(typeof t!="string"&&!o.objectMode&&Object.getPrototypeOf(t)!==xt.prototype&&(t=im(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):Pn(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||t.length!==0?Pn(e,o,t,!1):af(e,o)):Pn(e,o,t,!1))):n||(o.reading=!1)}return um(o)}function Pn(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&dr(e)),af(e,t)}function lm(e,t){var r;return!om(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function um(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}M.prototype.isPaused=function(){return this._readableState.flowing===!1};M.prototype.setEncoding=function(e){return Ye||(Ye=Nn().StringDecoder),this._readableState.decoder=new Ye(e),this._readableState.encoding=e,this};var Zu=8388608;function fm(e){return e>=Zu?e=Zu:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Ju(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=fm(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}M.prototype.read=function(e){x("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return x("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Ln(this):dr(this),null;if(e=Ju(e,t),e===0&&t.ended)return t.length===0&&Ln(this),null;var n=t.needReadable;x("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,x("length less than watermark",n)),t.ended||t.reading?(n=!1,x("reading or ended",n)):n&&(x("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Ju(r,t)));var i;return e>0?i=sf(e,t):i=null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Ln(this)),i!==null&&this.emit("data",i),i};function cm(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,dr(e)}}function dr(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(x("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Ve(Qu,e):Qu(e))}function Qu(e){x("emit readable"),e.emit("readable"),Un(e)}function af(e,t){t.readingMore||(t.readingMore=!0,Ve(dm,e,t))}function dm(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(x("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}M.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};M.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,x("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,o=i?f:h;n.endEmitted?Ve(o):r.once("end",o),e.on("unpipe",u);function u(m,v){x("onunpipe"),m===r&&v&&v.hasUnpiped===!1&&(v.hasUnpiped=!0,b())}function f(){x("onend"),e.end()}var _=pm(r);e.on("drain",_);var w=!1;function b(){x("cleanup"),e.removeListener("close",A),e.removeListener("finish",d),e.removeListener("drain",_),e.removeListener("error",p),e.removeListener("unpipe",u),r.removeListener("end",f),r.removeListener("end",h),r.removeListener("data",E),w=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&_()}var S=!1;r.on("data",E);function E(m){x("ondata"),S=!1;var v=e.write(m);v===!1&&!S&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&lf(n.pipes,e)!==-1)&&!w&&(x("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,S=!0),r.pause())}function p(m){x("onerror",m),h(),e.removeListener("error",p),ef(e,"error")===0&&e.emit("error",m)}sm(e,"error",p);function A(){e.removeListener("finish",d),h()}e.once("close",A);function d(){x("onfinish"),e.removeListener("close",A),h()}e.once("finish",d);function h(){x("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(x("pipe resume"),r.resume()),e};function pm(e){return function(){var t=e._readableState;x("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&ef(e,"data")&&(t.flowing=!0,Un(e))}}M.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var u=lf(t.pipes,e);return u===-1?this:(t.pipes.splice(u,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};M.prototype.on=function(e,t){var r=Rn.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&dr(this):Ve(hm,this))}return r};M.prototype.addListener=M.prototype.on;function hm(e){x("readable nexttick read 0"),e.read(0)}M.prototype.resume=function(){var e=this._readableState;return e.flowing||(x("resume"),e.flowing=!0,mm(this,e)),this};function mm(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Ve(gm,e,t))}function gm(e,t){t.reading||(x("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Un(e),t.flowing&&!t.reading&&e.read(0)}M.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Un(e){var t=e._readableState;for(x("flow",t.flowing);t.flowing&&e.read()!==null;);}M.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(x("wrapped end"),t.decoder&&!t.ended){var u=t.decoder.end();u&&u.length&&n.push(u)}n.push(null)}),e.on("data",function(u){if(x("wrapped data"),t.decoder&&(u=t.decoder.write(u)),!(t.objectMode&&u==null)&&!(!t.objectMode&&(!u||!u.length))){var f=n.push(u);f||(r=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(u){return function(){return e[u].apply(e,arguments)}}(i));for(var o=0;o<kn.length;o++)e.on(kn[o],n.emit.bind(n,kn[o]));return n._read=function(u){x("wrapped _read",u),r&&(r=!1,e.resume())},n};M._fromList=sf;function sf(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=_m(e,t.buffer,t.decoder),r}function _m(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?wm(e,t):ym(e,t),n}function wm(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,u=e>o.length?o.length:e;if(u===o.length?i+=o:i+=o.slice(0,e),e-=u,e===0){u===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(u));break}++n}return t.length-=n,i}function ym(e,t){var r=xt.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,u=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,u),e-=u,e===0){u===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(u));break}++i}return t.length-=i,r}function Ln(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Ve(bm,t,e))}function bm(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function lf(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var Wn=C((ZE,df)=>{"use strict";s();l();df.exports=me;var pr=Ne(),cf=ae();cf.inherits=se();cf.inherits(me,pr);function vm(e){this.afterTransform=function(t,r){return Sm(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Sm(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,r!=null&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function me(e){if(!(this instanceof me))return new me(e);pr.call(this,e),this._transformState=new vm(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r,n){ff(t,r,n)}):ff(t)})}me.prototype.push=function(e,t){return this._transformState.needTransform=!1,pr.prototype.push.call(this,e,t)};me.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};me.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};me.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};me.prototype._destroy=function(e,t){var r=this;pr.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function ff(e,t,r){if(t)return e.emit("error",t);r!=null&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var gf=C((eT,mf)=>{"use strict";s();l();mf.exports=Ct;var pf=Wn(),hf=ae();hf.inherits=se();hf.inherits(Ct,pf);function Ct(e){if(!(this instanceof Ct))return new Ct(e);pf.call(this,e)}Ct.prototype._transform=function(e,t,r){r(null,e)}});var wf=C((ue,_f)=>{s();l();ue=_f.exports=On();ue.Stream=ue;ue.Readable=ue;ue.Writable=Cn();ue.Duplex=Ne();ue.Transform=Wn();ue.PassThrough=gf()});s();l();s();l();Me();globalThis.setupSentry=async()=>await Hn();globalThis.setupSentry();globalThis.sentry=K;globalThis.Sentry=K;s();l();(function(e){typeof define=="function"&&define.amd?define(e):e()})(function(){"use strict";function e(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function t(d,h){for(var m=0;m<h.length;m++){var v=h[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(d,v.key,v)}}function r(d,h,m){return h&&t(d.prototype,h),m&&t(d,m),d}function n(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),h&&o(d,h)}function i(d){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},i(d)}function o(d,h){return o=Object.setPrototypeOf||function(v,P){return v.__proto__=P,v},o(d,h)}function u(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function f(d,h){return h&&(typeof h=="object"||typeof h=="function")?h:u(d)}function _(d,h){for(;!Object.prototype.hasOwnProperty.call(d,h)&&(d=i(d),d!==null););return d}function w(d,h,m){return typeof Reflect<"u"&&Reflect.get?w=Reflect.get:w=function(P,F,z){var k=_(P,F);if(!!k){var I=Object.getOwnPropertyDescriptor(k,F);return I.get?I.get.call(z):I.value}},w(d,h,m||d)}var b=function(){function d(){e(this,d),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return r(d,[{key:"addEventListener",value:function(m,v){m in this.listeners||(this.listeners[m]=[]),this.listeners[m].push(v)}},{key:"removeEventListener",value:function(m,v){if(m in this.listeners){for(var P=this.listeners[m],F=0,z=P.length;F<z;F++)if(P[F]===v){P.splice(F,1);return}}}},{key:"dispatchEvent",value:function(m){var v=this;if(m.type in this.listeners){for(var P=function(H){setTimeout(function(){return H.call(v,m)})},F=this.listeners[m.type],z=0,k=F.length;z<k;z++)P(F[z]);return!m.defaultPrevented}}}]),d}(),S=function(d){n(h,d);function h(){var m;return e(this,h),m=f(this,i(h).call(this)),m.listeners||b.call(u(m)),Object.defineProperty(u(m),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(u(m),"onabort",{value:null,writable:!0,configurable:!0}),m}return r(h,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(v){v.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,v)),w(i(h.prototype),"dispatchEvent",this).call(this,v)}}]),h}(b),E=function(){function d(){e(this,d),Object.defineProperty(this,"signal",{value:new S,writable:!0,configurable:!0})}return r(d,[{key:"abort",value:function(){var m;try{m=new Event("abort")}catch{typeof document<"u"?document.createEvent?(m=document.createEvent("Event"),m.initEvent("abort",!1,!1)):(m=document.createEventObject(),m.type="abort"):m={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(m)}},{key:"toString",value:function(){return"[object AbortController]"}}]),d}();typeof Symbol<"u"&&Symbol.toStringTag&&(E.prototype[Symbol.toStringTag]="AbortController",S.prototype[Symbol.toStringTag]="AbortSignal");function p(d){return d.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof d.Request=="function"&&!d.Request.prototype.hasOwnProperty("signal")||!d.AbortController}function A(d){typeof d=="function"&&(d={fetch:d});var h=d,m=h.fetch,v=h.Request,P=v===void 0?m.Request:v,F=h.AbortController,z=h.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,k=z===void 0?!1:z;if(!p({fetch:m,Request:P,AbortController:F,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:k}))return{fetch:m,Request:I};var I=P;(I&&!I.prototype.hasOwnProperty("signal")||k)&&(I=function(ne,U){var Z;U&&U.signal&&(Z=U.signal,delete U.signal);var ge=new P(ne,U);return Z&&Object.defineProperty(ge,"signal",{writable:!1,enumerable:!1,configurable:!0,value:Z}),ge},I.prototype=P.prototype);var H=m,re=function(ne,U){var Z=I&&I.prototype.isPrototypeOf(ne)?ne.signal:U?U.signal:void 0;if(Z){var ge;try{ge=new DOMException("Aborted","AbortError")}catch{ge=new Error("Aborted"),ge.name="AbortError"}if(Z.aborted)return Promise.reject(ge);var Df=new Promise(function(Nf,Mf){Z.addEventListener("abort",function(){return Mf(ge)},{once:!0})});return U&&U.signal&&delete U.signal,Promise.race([Df,H(ne,U)])}return H(ne,U)};return{fetch:re,Request:I}}(function(d){if(!!p(d)){if(!d.fetch){console.warn("fetch() is not available, cannot install abortcontroller-polyfill");return}var h=A(d),m=h.fetch,v=h.Request;d.fetch=m,d.Request=v,Object.defineProperty(d,"AbortController",{writable:!0,enumerable:!1,configurable:!0,value:E}),Object.defineProperty(d,"AbortSignal",{writable:!0,enumerable:!1,configurable:!0,value:S})}})(typeof self<"u"?self:globalThis)});var qn=y(ze()),Af=y(ml()),Of=y(Kn());s();l();s();l();Dt();var vu=y(Kn()),Su=y(mr());var Eu=y(W()),Tu=y(kf());jn();Nt();yr();br();s();l();async function gl(e){return Re.permissions_log.query(e)}Uf();s();l();Me();var _l=!1;function nd(e,t){_l=!0;try{K.captureEvent({message:`selectedWalletError: ${e}`,contexts:{report:{info:JSON.stringify({...t,selectedWallet:typeof e>"u"?"undefined":e})}},exception:{values:[{type:"BIZ_ERROR_selectedWalletError",value:e}]},level:"error"})}catch{}}function wl(e){if(!e||_l||!e.isUnlocked||!e.completedOnboarding)return;let{selectedWallet:t,keyringIdentities:r,wallets:n}=e,i=!1,o=[],u=[],f;if(typeof t!="string"||!t)i=!0;else{r&&Array.isArray(r)&&(o=r.reduce((w,b)=>{var S;return w.push(...((S=b==null?void 0:b.walletIdentities)!=null?S:[]).map(E=>E.walletId)),w},[])),n&&Array.isArray(n)&&(u=n.map(w=>w.walletId)),o.sort(),u.sort();let _=Math.max(o.length,u.length);for(let w=0;w<_;w++)if(o[w]!==u[w]){i=!0;break}!i&&(o.findIndex(w=>w===t)===-1||u.findIndex(w=>w===t)===-1)&&(i=!0)}i&&(f=(r!=null?r:[]).map(_=>{var w;return{initialType:_.initialType,walletIdentities:((w=_.walletIdentities)!=null?w:[]).map(b=>{var S;return{walletId:b.walletId,account:b.account,initialType:b.initialType,accountsMap:Object.keys((S=b.accountsMap)!=null?S:{}).reduce((E,p)=>{var d;let A=(d=b.accountsMap[p])!=null?d:{};return E[p]=Object.keys(A).reduce((h,m)=>{var v,P;return h[m]={address:(v=A[m])==null?void 0:v.address,addressType:(P=A[m])==null?void 0:P.addressType},h},{}),E},{})}})}}),nd(t,{wallets:(n!=null?n:[]).map(_=>({initialType:_.initialType,walletId:_.walletId,addressType:_.addressType,segwitAddressType:_.segwitAddressType})),keyringIdentities:f}))}s();l();var te=y(W()),ru=y(Le()),hn=y(et()),nu=y(Te());Me();s();l();s();l();var q=y(W()),en=y(Le());var yl=y(ze()),bl=y(Yn());Nt();Er();Sr();br();li();Rf();var ht=class extends q.PureComponent{constructor(){super(...arguments);ve(this,"state",{downloadUrl:!1})}renderErrorDetail(r){return q.default.createElement("li",null,q.default.createElement("p",null,r))}renderErrorStack(r,n){return q.default.createElement("li",null,q.default.createElement("span",null,r),q.default.createElement("pre",{className:"error-page__stack"},n))}componentDidMount(){Mt(Rt.getExtensionVersion).then(({data:r})=>{let n=Lt(),i=yl.default.runtime.getManifest().version;if(n===oi&&r.edge!==i){this.setState({downloadUrl:"https://microsoftedge.microsoft.com/addons/detail/pbpjkcldjiffchgbbndmhojiacbgflha"});return}r.chrome!==i&&this.setState({downloadUrl:"https://chrome.google.com/webstore/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge?hl=zh-CN"})}).catch(r=>{console.log(r)})}render(){let{error:r}=this.props,{t:n}=this.context,{downloadUrl:i}=this.state,o=Ee()===Pt,u=n(o?"wallet_home_subtitle_errortip_error_popup_message":"wallet_home_subtitle_errortip_errorpage_message"),f=Xn(),_=Ze.State.getImgMap(f),w=`${Gi()}${_[Ze.State.TYPE.systemError]}`;return q.default.createElement("section",{className:"error-page"},q.default.createElement("div",{className:"error-page__header"},n("wallet_home_maintitle_errortip_error_page_title"),window.location.hash&&q.default.createElement(Y,{className:"okx-wallet-plugin-close error-page__right",onClick:async()=>{await Se().clearDappData(),window.location.href=window.location.pathname}})),q.default.createElement("section",{className:"error-page__details"},q.default.createElement(Ze.State,{type:Ze.State.TYPE.systemError,title:i?n("extension_wallet_mid_text_update_latest_version"):u,imgSrc:w,renderButton:()=>q.default.createElement(Xe,{category:Xe.CATEGORY.fill,type:Xe.TYPE.primary,size:Xe.SIZE.s,onClick:()=>{globalThis.platform.openTab({url:i})}},n("extension_wallet_mid_btn_goto_store")," ")}),q.default.createElement(Vn,{className:"error-page__accordion",titleClass:"error-page__accordion-title",customHeaderIcon:b=>q.default.createElement(Y,{icon:"okds-arrow-chevron-down-md",size:Y.SIZE.xs,className:(0,bl.default)("error-page__icon",{"okui-accordion-header-icon-expanded":b})}),title:n("wallet_home_subtitle_errortip_errordetail"),onToggle:b=>{this.setState({expand:b})}}),this.state.expand?q.default.createElement("ul",{className:"error-page__list"},r.message?this.renderErrorDetail(n("wallet_home_subtitle_errortip_errormessage",{errorMessage:r.message})):null,r.code?this.renderErrorDetail(n("wallet_home_subtitle_errortip_errorcode",{errorCode:r.code})):null,r.name?this.renderErrorDetail(n("wallet_home_subtitle_errortip_errorname",{errorName:r.name})):null,r.stack?this.renderErrorStack(n("wallet_home_subtitle_errortip_error_stack"),r.stack):null):null))}};ht.contextTypes={t:en.default.func.isRequired};ht.propTypes={error:en.default.object.isRequired};var tn=ht;s();l();s();l();var Ql=y(et()),eu=y(Te()),tu=y(Tr());oo();s();l();var id={mostRecentOverviewPage:xe},od="history",ad=We({name:od,initialState:id,reducers:{pageChanged:(e,t)=>{let r=t.payload;(r===xe||r.startsWith(qt))&&(e.mostRecentOverviewPage=r)}}}),{actions:sd,reducer:ld}=ad,vl=ld;var{pageChanged:Sl}=sd;s();l();var Jl=y(Yn()),Q=y(Le()),a=y(W()),ee=y(Te());s();l();var xl=y(W()),j=y(Le()),ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fd=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},cd=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),dd=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},pd=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t},rn=(typeof window>"u"||typeof window>"u"?"undefined":ud(window))==="object",hd=rn?document:{},md=["mousemove","keydown","wheel","DOMMouseScroll","mouseWheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove"],nn=function(e){function t(r){fd(this,t);var n=pd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));if(n.state={idle:!1,oldDate:+new Date,lastActive:+new Date,remaining:null,pageX:null,pageY:null},n.tId=null,n._handleEvent=function(i){var o=n.state,u=o.remaining,f=o.pageX,_=o.pageY,w=o.idle,b=n.props,S=b.timeout,E=b.onAction,p=b.debounce,A=b.throttle,d=b.stopOnIdle;if(p>0?n.debouncedAction(i):A>0?n.throttledAction(i):E(i),!u){if(i.type==="mousemove"&&(i.pageX===f&&i.pageY===_||i.pageX===void 0&&i.pageY===void 0||n.getElapsedTime()<200))return;clearTimeout(n.tId),n.tId=null,w&&!d&&n.toggleIdleState(i),n.setState({lastActive:+new Date,pageX:i.pageX,pageY:i.pageY}),w&&d||(n.tId=setTimeout(n.toggleIdleState,S))}},r.debounce>0&&r.throttle>0)throw new Error("onAction can either be throttled or debounced (not both)");return r.debounce>0&&(n.debouncedAction=El(r.onAction,r.debounce)),r.throttle>0&&(n.throttledAction=Tl(r.onAction,r.throttle)),r.startOnMount||(n.state.idle=!0),n.toggleIdleState=n._toggleIdleState.bind(n),n.reset=n._reset.bind(n),n.pause=n._pause.bind(n),n.resume=n._resume.bind(n),n.getRemainingTime=n._getRemainingTime.bind(n),n.getElapsedTime=n._getElapsedTime.bind(n),n.getLastActiveTime=n._getLastActiveTime.bind(n),n.isIdle=n._isIdle.bind(n),n}return dd(t,xl.Component),cd(t,[{key:"componentWillMount",value:function(){this._bindEvents()}},{key:"componentDidMount",value:function(){this.props.startOnMount&&this.reset()}},{key:"componentDidUpdate",value:function(r){r.debounce!==this.props.debounce&&(this.debouncedAction=El(this.props.onAction,this.props.debounce)),r.throttle!==this.props.throttle&&(this.throttledAction=Tl(this.props.onAction,this.props.throttle))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.tId),this._unbindEvents()}},{key:"render",value:function(){return this.props.children||null}},{key:"_bindEvents",value:function(){var r=this;if(rn){var n=this.state.eventsBound,i=this.props,o=i.element,u=i.events,f=i.passive,_=i.capture;n||(u.forEach(function(w){o.addEventListener(w,r._handleEvent,{capture:_,passive:f})}),this.setState({eventsBound:!0}))}}},{key:"_unbindEvents",value:function(){var r=this;if(rn){var n=this.props,i=n.element,o=n.events,u=n.passive,f=n.capture;this.state.eventsBound&&(o.forEach(function(_){i.removeEventListener(_,r._handleEvent,{capture:f,passive:u})}),this.setState({eventsBound:!1}))}}},{key:"_toggleIdleState",value:function(r){var n=this,i=this.state.idle,o=this.props,u=o.onActive,f=o.onIdle,_=o.stopOnIdle;this.setState({idle:!i},function(){i?_||(n._bindEvents(),u(r)):(_&&(clearTimeout(n.tId),n.tId=null,n._unbindEvents()),f(r))})}},{key:"_reset",value:function(){clearTimeout(this.tId),this.tId=null,this._bindEvents(),this.setState({idle:!1,oldDate:+new Date,lastActive:this.state.oldDate,remaining:null});var r=this.props.timeout;this.tId=setTimeout(this.toggleIdleState,r)}},{key:"_pause",value:function(){this.state.remaining===null&&(this._unbindEvents(),clearTimeout(this.tId),this.tId=null,this.setState({remaining:this.getRemainingTime()}))}},{key:"_resume",value:function(){var r=this.state,n=r.remaining,i=r.idle;n!==null&&(this._bindEvents(),i||(this.setState({remaining:null}),this.tId=setTimeout(this.toggleIdleState,n)))}},{key:"_getRemainingTime",value:function(){var r=this.state,n=r.remaining,i=r.idle,o=r.lastActive;if(i)return 0;if(n!==null)return n;var u=this.props.timeout-(+new Date-o);return u<0&&(u=0),u}},{key:"_getElapsedTime",value:function(){var r=this.state.oldDate;return+new Date-r}},{key:"_getLastActiveTime",value:function(){return this.state.lastActive}},{key:"_isIdle",value:function(){return this.state.idle}}]),t}();function El(e,t){var r=void 0;return function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];r&&clearTimeout(r),r=setTimeout(function(){e.apply(void 0,i),r=null},t)}}function Tl(e,t){var r=0;return function(){var n=new Date().getTime();if(!(n-r<t))return r=n,e.apply(void 0,arguments)}}nn.propTypes={timeout:j.default.number,events:j.default.arrayOf(j.default.string),onIdle:j.default.func,onActive:j.default.func,onAction:j.default.func,debounce:j.default.number,throttle:j.default.number,element:j.default.oneOfType([j.default.object,j.default.element]),startOnMount:j.default.bool,stopOnIdle:j.default.bool,passive:j.default.bool,capture:j.default.bool},nn.defaultProps={timeout:12e5,element:hd,events:md,onIdle:function(){},onActive:function(){},onAction:function(){},debounce:0,throttle:0,startOnMount:!0,stopOnIdle:!1,capture:!0,passive:!0};var Cl=nn;jn();br();li();s();l();var on=y(W()),Al=y(et()),Zt=y(Te());function mt(e){return(0,Al.useSelector)(r=>{var n;return(n=r==null?void 0:r.metamask)==null?void 0:n.completedOnboarding})?on.default.createElement(Zt.Redirect,{to:{pathname:xe}}):on.default.createElement(Zt.Route,{...e})}s();l();var Qt=y(W());yr();s();l();s();l();var Ol=e=>{let t=J("allowShowComponent",{...oe,componentName:e,location:window.location.href});return t==null?void 0:t.data};var an=y(W()),Jt=({children:e,componentName:t})=>Ol(t)?an.default.createElement(an.default.Fragment,null,e):null;s();l();var sn={noRadius:"_noRadius_e5d59_1",scale:"_scale_e5d59_15"};var Il=()=>Qt.default.createElement(Jt,{componentName:"EnvAlert"},Qt.default.createElement(zn,{className:sn.noRadius,type:"warn",showIcon:!1,title:Qt.default.createElement("div",{className:sn.scale},`${process.env.ASSETS_BUILD_TYPE}-${process.env.COMMIT_HASH}, API: ${ei()} WSS: ${ri()} STATIC: ${Qe()}`),closable:!1}));s();l();s();l();var Kl=y(et());s();l();var D=y(W());Dt();var un=y(Le()),Oe=y(Te());s();l();var Dl=(e,t)=>{if(t&&t.includes("{")&&!t.includes("first")){let n=/\{(.+?)\}/gi,i={};return t.match(n).forEach((o,u)=>{let f=o.replace("{","").replace("}","");i[`${f}`]=e[u]}),i}let r=["first","second","third","fourth"];return e.filter((n,i)=>i in r).reduce((n,i,o)=>(n[r[o]]=i,n),{})};s();l();var Nl=[];Me();s();l();var Ml=y(W());yr();var kl=()=>{let e=J("staticDomain");(0,Ml.useEffect)(()=>{window.okGlobal||(window.okGlobal={}),e?(window.okGlobal.cdnBaseUrl=`https://${Qe()}`,window.okGlobal.cdnDomainMap=e.data):(window.okGlobal.cdnBaseUrl=`https://${Qe()}`,window.okGlobal.cdnDomainMap={default:"https://static.okx.com",CN:"https://static.coinall.ltd",RU:"https://static.okx.cab",ID:"https://static.okx.cab"})},[e])};s();l();var Pl=()=>{let e=J("lockPage",{...oe,location:window.location.href});return e?e.data:null};s();l();var Ll=y(W());var Rl=()=>{let e=J("resetExtension",{...oe,location:window.location.href});return(0,Ll.useMemo)(()=>{var r;if(e){if(!((r=e.data)!=null&&r.needReload))return!1;let n=window.localStorage.getItem("extensionReload");return!n||n!=(e==null?void 0:e.data.time)?e.data.time:!1}return!1},[e])};s();l();var Ul=y(W());var Wl=()=>{let e=J("versionExtensionUpdate",{...oe,location:window.location.href});return(0,Ul.useMemo)(()=>{var r,n,i;if(e){if(!((r=e.data)!=null&&r.needUpdate))return!1;let o=window.localStorage.getItem("versionExtensionUpdate");if(o&&o===(e==null?void 0:e.data.version)&&!((n=e.data)!=null&&n.repeat))return!1;if(oe.version!==e.data.version)return{version:e==null?void 0:e.data.version,repeat:(i=e.data)==null?void 0:i.repeat}}return!1},[e])};var fn=y(ze());s();l();var Bl=y(W());hr();var ql=()=>{let e=J("changeLocalStorage",{...oe,location:window.location.href});(0,Bl.useEffect)(()=>{var t,r;if(e){(t=e==null?void 0:e.data)!=null&&t.windowLocalStorage&&Object.keys(e==null?void 0:e.data.windowLocalStorage).forEach(i=>{var o;window.localStorage.setItem(i,(o=e==null?void 0:e.data)==null?void 0:o.windowLocalStorage[i])});let n=new ke;(r=e==null?void 0:e.data)!=null&&r.localStorage&&Object.keys(e==null?void 0:e.data.localStorage).forEach(i=>{var o;i==="data"||i==="apiDomain"||i==="envApiDomain"||i==="staticDomain"||n.set({[i]:(o=e==null?void 0:e.data)==null?void 0:o.localStorage[i]})})}},[e])};s();l();var gt=y(W());Dt();var gd=20,er=[];function jl(){let e=we("dex-across-order-info");(0,gt.useEffect)(()=>{if(!(e!=null&&e.data))return;let{dexData:t,type:r}=e.data,{status:n,type:i,orderId:o,fromAmount:u,fromTokenSymbol:f,toAmount:_,toTokenSymbol:w,solanaToast:b,exploreUrl:S,fromChildOrder:E={}}=t,p=null;if(i==="gasStation"){if(n==="0"?p={type:"success",titleKey:"swaptrade_extension_feedback_toast_transaction_submitted",id:`toast-${o}-${n}`}:n==="-1"?p={type:"error",titleKey:"swaptrade_extension_feedback_toast_fillup_gas_failed",titleParams:{nativeToken:w},id:`toast-${o}-${n}`}:n==="1"&&(p={type:"success",titleKey:"swaptrade_extension_feedback_toast_swapped_successfully",titleParams:{payValue:u,paySymbol:f,receiveValue:ja(_,{fixed:6,wipeTailZero:!0}),receiveSymbol:w},id:`toast-${o}-${n}`}),!p)return;$[p.type]({title:_e(p.titleKey,p.titleParams),key:p.id})}if(r==="1"&&t&&i==="approve"){if(n==="1"?p={type:"success",titleKey:"swaptrade_extension_notif_desc_token_approved",titleParams:{tokenSymbol:f},url:S,id:`toast-${n}-${o}`}:n==="-1"?p={type:"error",titleKey:"swaptrade_extension_notif_desc_token_not_approved",titleParams:{tokenSymbol:f},url:S,id:`toast-${n}-${o}`}:b==="1"&&(p={type:"success",titleKey:"swaptrade_extension_notif_desc_transaction_submit",id:`toast-${b}`}),!p)return;$[p.type]({title:_e(p.titleKey,p.titleParams),key:p.id,desc:p.url?gt.default.createElement(rt,{url:p.url,urlText:_e("wallet_transfer_notif_view_on_explorer")}):null})}if((r==="1"||r==="3")&&t&&i!=="approve"&&i!=="register"&&i!=="gasStation"){let A=`${o}_${n}`;if(er.includes(A))return;let d=()=>{er.unshift(A),er=er.slice(0,gd)},h=(E==null?void 0:E.receiveTokenStatus)!=="3";if(n==="0"&&(E==null?void 0:E.status)=="0"?(d(),p={type:"success",titleKey:"swaptrade_extension_notif_desc_transaction_submit",id:`toast-${n}-${o}`}):n==="1"&&h?(d(),p={type:"success",titleKey:"swaptrade_extension_notif_desc_swap_info",titleParams:{fromTokenAmount:u,fromTokenSymbol:f,toTokenAmount:_,toTokenSymbol:w},url:S,id:`toast-${n}-${o}`}):n==="-1"&&h?(d(),p={type:"error",titleKey:"swaptrade_extension_notif_desc_swap_fail",url:S,id:`toast-${n}-${o}`}):n==="-2"&&h&&(d(),p={type:"success",titleKey:"swaptrade_extension_notif_desc_swap_canceled",url:S,id:`toast-${n}-${o}`}),!p)return;$[p.type]({title:_e(p.titleKey,p.titleParams),key:p.id,desc:p.url?gt.default.createElement(rt,{url:p.url,urlText:_e("wallet_transfer_notif_view_on_explorer")}):null})}},[e])}s();l();var Hl=y(W());Dt();function Fl(){let e=we("wallet-nft");(0,Hl.useEffect)(()=>{!e||$.success({title:_e("wallet_transfer_notif_nft_transaction_success"),key:"toast8"})},[e])}s();l();var _t=y(W()),Gl=y(Te());function ln(e){let[t,r]=(0,_t.useState)(!1);return t?_t.default.createElement(Gl.Route,{...e}):_t.default.createElement(Fa,{callback:()=>{r(!0)}})}s();l();var Ge={link:"_link_1p29i_1",updateCotainer:"_updateCotainer_1p29i_9",centerImage:"_centerImage_1p29i_12",titleUpdate:"_titleUpdate_1p29i_21",textUpdate:"_textUpdate_1p29i_25",updateMb32:"_updateMb32_1p29i_30"};function _d({walletId:e,keyringIdentities:t}){let r;return t.find(n=>(r=n.walletIdentities.find(i=>i.walletId===e),r)),r?[...new Set(Object.values(r.account))]:[]}function tr(e){let{isUnlocked:t,completedOnboarding:r,selectedWallet:n,keyringIdentities:i,guard:o}=e,u=we("login"),f=we("wallet-tx-status-toast"),_=Pa("wallet-tx-status-toast"),w=we("nft-operate"),b=(0,Oe.useHistory)(),[S,E]=(0,D.useState)(null),p=Ba();(0,D.useEffect)(()=>{if(p){let{initialType:k}=p,{path:I}=e;if(Zi()&&Xi(k)&&!Nl.includes(I)){let{location:H}=e||{},{pathname:re,search:X=""}=H||{};setTimeout(()=>{globalThis.platform.openExtensionInPopup(re+X||"")},200)}}},[p==null?void 0:p.initialType]);let A=Pl(),d=Rl(),h=Wl();kl(),ql(),(0,D.useEffect)(()=>{d&&fe.warn({alignBottom:!1,title:G("wallet_extension_home_popup_title_update_now"),text:G("wallet_extension_home_popup_text_update_now"),confirmText:G("wallet_extension_home_popup_btn_update"),maskClosable:!1,onConfirm:()=>{window.localStorage.setItem("extensionReload",d),fn.default.runtime.reload()}})},[d]);let[m,v]=(0,D.useState)(!1),[P]=(0,D.useState)(fn.default.runtime.getManifest().version),F=qa(),z=eo({dark:"/cdn/assets/imgs/246/F624BDAD9E2C018D.png",light:"/cdn/assets/imgs/246/234578340DAE2A80.png"});return(0,D.useEffect)(()=>{P!==h.version&&!m&&h&&fe.action({mobileWidth:"77.777%",noTopRadius:!1,alignBottom:!1,hideCloseBtn:!0,children:D.default.createElement("div",{className:Ge.updateMb32},D.default.createElement("div",{className:Ge.centerImage},D.default.createElement("img",{src:z,alt:"update"})),D.default.createElement("div",{className:Ge.titleUpdate},G("wallet_extension_home_popup_title_update_available")),D.default.createElement("div",{className:Ge.textUpdate},G("wallet_extension_home_popup_text_update_available")),D.default.createElement(_r,{size:_r.SIZE.sm,className:Ge.link,onClick:()=>{globalThis.platform.openTab({url:`https://${F}/help/how-do-i-update-my-okx-wallet-extension-on-google-chrome`})}},G("wallet_extension_home_popup_link_update_available"))),confirmText:G("wallet_extension_home_popup_text_ok"),maskClosable:!1,onConfirm:k=>{h.repeat?v(!0):window.localStorage.setItem("versionExtensionUpdate",h.version),k.destroy()}})},[m,h,P]),(0,D.useEffect)(()=>{A&&fe.warn({alignBottom:!1,maskClosable:!1,title:G("wallet_extension_clearcache_modaltitle_step_locked"),text:G("wallet_extension_clearcache_modaldesc_step_locked"),confirmText:G("wallet_extension_btn_general_gotit"),onConfirm:k=>{k.destroy(),b.go(-1)}})},[A]),(0,D.useEffect)(()=>{if(t&&r&&_==="CONNECTED"){S&&Array.isArray(S)&&Ft.sendChannel({op:"logout",args:S});let I=_d({walletId:n,keyringIdentities:i}).map(H=>({token:H}));Ft.sendChannel({op:"login",args:I}),E(I)}},[t,r,n,_]),(0,D.useEffect)(()=>{if(w){let{scene:k,status:I}=w.data;k===21&&I===2&&$.success({title:G("extension_home_toast_receivecompleted")})}},[w]),(0,D.useEffect)(()=>{if(u){let k=Object.keys(tt).map(I=>({channel:tt[I]}));Ft.sendChannel({op:"subscribe",args:k})}},[u]),(0,D.useEffect)(()=>{let I=b.location.pathname.match(jt);if(f&&!I){let{data:H}=f,{pushToastCode:re,pushToastParams:X=[],txStatus:ne,url:U}=H,Z;re===20||re===21?Z={amount:X[0],crypto:X[1]}:re===23?Z={num:X[0],symbol:X[1]}:Z=Dl(X),$[La[ne]]({title:G(Ra[re],Z),desc:U?D.default.createElement(rt,{url:U,urlText:G("wallet_transfer_notif_view_on_explorer")}):null})}},[f]),(0,D.useEffect)(()=>{let k=new PerformanceObserver(I=>{var re,X,ne;let H={};I.getEntries().forEach(U=>{H[U.name]=U.startTime}),performance.memory&&(H.memory={totalJSHeapSize:(re=performance.memory)==null?void 0:re.totalJSHeapSize,usedJSHeapSize:(X=performance.memory)==null?void 0:X.usedJSHeapSize,jsHeapSizeLimit:(ne=performance.memory)==null?void 0:ne.jsHeapSizeLimit}),H["first-contentful-paint"]>1e3&&K.captureEvent({message:`PERFORMANCE_WARN_1s ${b.location.pathname}`,contexts:{report:{info:JSON.stringify(H)}},exception:{values:[{type:`PERFORMANCE_WARN_1s ${b.location.pathname}`,value:"Performance Data"}]},level:"info"})});return k.observe({type:"paint",buffered:!0}),()=>{k.disconnect()}},[b.location.pathname]),jl(),Fl(),t?r?o?D.default.createElement(ln,{...e}):D.default.createElement(Oe.Route,{...e}):D.default.createElement(Oe.Redirect,{to:{pathname:Be}}):D.default.createElement(Oe.Redirect,{to:{pathname:Bt}})}tr.propTypes={isUnlocked:un.default.bool.isRequired,completedOnboarding:un.default.bool.isRequired};var wd=e=>{let{metamask:{isUnlocked:t,completedOnboarding:r,selectedWallet:n,keyringIdentities:i}}=e;return{selectedWallet:n,keyringIdentities:i,isUnlocked:t,completedOnboarding:r}},g=(0,Kl.connect)(wd)(tr);s();l();s();l();var Yl=y(et());s();l();var cn=y(W()),$l=y(Le()),rr=y(Te());function nr(e){return e.completedOnboarding?cn.default.createElement(rr.Route,{...e}):cn.default.createElement(rr.Redirect,{to:{pathname:Be}})}nr.propTypes={completedOnboarding:$l.default.bool};var yd=e=>{let{metamask:{completedOnboarding:t}}=e;return{completedOnboarding:t}},ir=(0,Yl.connect)(yd)(nr);s();l();var O=y(W());hr();var V=y(Pf());s();l();var dn={"wallet-helper":"_wallet-helper_16jpw_1",walletHelper:"_wallet-helper_16jpw_1","wallet-helper-enter":"_wallet-helper-enter_16jpw_11",walletHelperEnter:"_wallet-helper-enter_16jpw_11"};var Vl=new ke,bd=[{label:V.default.development_environment,value:"http://kong-proxy.dev-okex.svc.dev.local:8443/"},{label:V.default.pre_environment,value:"https://beta.okex.org"},{label:V.default.prod_environment,value:"https://wallet.okex.org"}],vd=[{label:V.default.normalMode,value:"normalMode"},{label:V.default.keyMode,value:"keyMode"},{label:V.default.multilingualMode,value:"multilingualMode"}],Sd=()=>{let{width:e}=Wa(document.querySelector("body")),[t,r]=(0,O.useState)("https://beta.okex.org");(0,O.useEffect)(()=>{(async()=>{let{envApiDomain:p}=await Vl.get("envApiDomain");p&&r(p)})()},[]);let n=()=>{window.location.reload()},i=window.localStorage,o=i.getItem("languageKeyMode")||"normalMode",u=(0,O.useCallback)(p=>{p==="normalMode"?(i.removeItem("languageKeyMode"),Ue(!1)):p==="keyMode"?(i.setItem("languageKeyMode",p),Ue(!0)):(i.setItem("languageKeyMode",p),Ue(!1)),n()},[o]),f=Ua(),_=()=>{let p=Ji()===Wt.LIGHT?Wt.DARK:Wt.LIGHT;Qi(p),f()},w=i.getItem("speedUp")||!1,[b,S]=(0,O.useState)(w);(0,O.useEffect)(()=>{S(w)},[w]);let E=(0,O.useCallback)(()=>{w?(i.removeItem("speedUp"),S(!1)):(i.setItem("speedUp",!0),S(!0)),chrome.runtime.reload()},[w]);return O.default.createElement(Jt,{componentName:"walletHelper"},O.default.createElement(Ar.Box,{className:dn["wallet-helper"]},O.default.createElement(Je,{description:O.default.createElement(Ar.Space,{space:"8px"},O.default.createElement(Y.IconButton,{icon:"okx-wallet-plugin-slow",tooltip:V.default.select_language_mode,onClick:()=>{fe.show({alignBottom:!1,noContentPadding:!0,hideCloseBtn:!0,maskClosable:!0,children:O.default.createElement(nt,{dataSource:vd,renderItem:({label:p,value:A})=>O.default.createElement(nt.Cell,{title:p,onClick:()=>{u(A)}},o===A&&O.default.createElement(wr.Circle,{checked:!0}))})})}}),O.default.createElement(Y.IconButton,{icon:"okx-wallet-plugin-fast",tooltip:`${V.default.current_api_environment}${t}`,onClick:()=>{fe.show({alignBottom:!1,noContentPadding:!0,hideCloseBtn:!0,maskClosable:!0,children:O.default.createElement(nt,{dataSource:bd,renderItem:({label:p,value:A})=>O.default.createElement(nt.Cell,{title:p,onClick:async()=>{await Vl.set({envApiDomain:A}),n()}},t===A&&O.default.createElement(wr.Circle,{checked:!0}))})})}}),O.default.createElement(Y.IconButton,{icon:"okx-wallet-plugin-swap",tooltip:V.default.switchRtl,onClick:()=>{let A=document.documentElement.getAttribute("dir");Ht(A==="rtl"?void 0:"rtl")}}),e>360&&O.default.createElement(Y.IconButton,{icon:"okx-wallet-plugin-switch",tooltip:V.default.fullscreenMode,onClick:()=>{let p=document.querySelector("#app");["notification","popup"].includes(p.className)?p.className="fullscreen":p.className="popup"}}),O.default.createElement(Y.IconButton,{style:{color:b?"orange":"unset"},icon:"okx-wallet-plugin-coin-quick-withdraw",tooltip:V.default.accelerateSetInterval,onClick:E}),O.default.createElement(Y.IconButton,{icon:"okx-wallet-plugin-swap-1",tooltip:V.default.theme,onClick:()=>{_()}})),trigger:Je.TRIGGER.click,placement:document.documentElement.getAttribute("dir")==="rtl"?Je.DIRECTION.topLeft:Je.DIRECTION.topRight,autoHeight:{marginBottom:50},smartMode:!1},O.default.createElement(Y,{bordered:!0,size:Y.SIZE.lg,className:dn["wallet-helper-enter"],icon:"okx-wallet-plugin-wrenches"}))))},zl=Sd;$.config({duration:3,top:10,left:16,right:16,maxCount:3,placement:$.DIRECTION.top,isInline:!0});var Ed=(0,a.lazy)(()=>import("./dex-CD2VQFM2.js")),Td=(0,a.lazy)(()=>import("./new-home-page-4B6XBJ46.js")),xd=(0,a.lazy)(()=>import("./wallet-aggregate-H5LCKRON.js")),Cd=(0,a.lazy)(()=>import("./homepage-EDQKMRSK.js")),Ad=(0,a.lazy)(()=>import("./ConnectHardware-ON2RSHH5.js")),Xl=(0,a.lazy)(()=>import("./ImportSeedPhraseAndPrivateKey-2UYP3NC4.js")),Zl=(0,a.lazy)(()=>import("./WalletMnemonicBackup-GWEH7NEY.js")),Od=(0,a.lazy)(()=>import("./WalletMnemonicBackupLandingPage-M3QQVGEF.js")),Id=(0,a.lazy)(()=>import("./WalletList-CK3LRA6I.js")),Dd=(0,a.lazy)(()=>import("./WalletEdit-AJ7GF2KO.js")),Nd=(0,a.lazy)(()=>import("./WalletBackUp-YHQTM7GJ.js")),Md=(0,a.lazy)(()=>import("./WalletAccountAddress-LBAPUK5F.js")),kd=(0,a.lazy)(()=>import("./WalletAccountPrivateKey-JXZETIF2.js")),Pd=(0,a.lazy)(()=>import("./WalletMnemonicAndPrivateKey-NXFUCBC4.js")),Ld=(0,a.lazy)(()=>import("./LedgerNetworkManage-7QWN37YK.js")),Rd=(0,a.lazy)(()=>import("./WalletDetail-Q7QQSUSY.js")),Ud=(0,a.lazy)(()=>import("./WalletAccountDetail-YURFT2SZ.js")),Wd=(0,a.lazy)(()=>import("./CreatePassword-SRXCR5PD.js")),Bd=(0,a.lazy)(()=>import("./VerifyPassword-76TG224L.js")),qd=(0,a.lazy)(()=>import("./Onboard-M33MCUWN.js")),jd=(0,a.lazy)(()=>import("./InitialCreate-Z2CBSMJE.js")),Hd=(0,a.lazy)(()=>import("./InitialImport-Q3IM5XJ5.js")),Fd=(0,a.lazy)(()=>import("./wallet-add-page-BMES35MO.js")),Gd=(0,a.lazy)(()=>import("./walletAddImport-OGMOGCQQ.js")),Kd=(0,a.lazy)(()=>import("./Login-BTMJVWVR.js")),$d=(0,a.lazy)(()=>import("./Import-IU2Q2ZCC.js")),Yd=(0,a.lazy)(()=>import("./show-supported-chains-3CIUOOXK.js")),Vd=(0,a.lazy)(()=>import("./Unlock-3NI7NVAJ.js")),zd=(0,a.lazy)(()=>import("./Receive-DMT5IBBA.js")),Xd=(0,a.lazy)(()=>import("./Lock-LS4GEBZI.js")),Zd=(0,a.lazy)(()=>import("./ForgetPassword-G4FLDVJD.js")),Jd=(0,a.lazy)(()=>import("./ResetPassword-CD7TKA57.js")),Qd=(0,a.lazy)(()=>import("./select-network-36RYFUWK.js")),ep=(0,a.lazy)(()=>import("./select-coin-2G6DBG75.js")),tp=(0,a.lazy)(()=>import("./SelectNetwork-5CYU4XY2.js")),rp=(0,a.lazy)(()=>import("./SelectProtocol-TUU4U2P3.js")),np=(0,a.lazy)(()=>import("./SendNft-HYLRWMES.js")),ip=(0,a.lazy)(()=>import("./SendPageContainer-NPWRS2BT.js")),op=(0,a.lazy)(()=>import("./CoinManage-7J3CQV7I.js")),ap=(0,a.lazy)(()=>import("./CustomCrypto-QEPK35U2.js")),sp=(0,a.lazy)(()=>import("./Setting-6EO3JZFG.js")),lp=(0,a.lazy)(()=>import("./Preference-CHOMPLR7.js")),up=(0,a.lazy)(()=>import("./WalletSafely-6TF6E3MS.js")),fp=(0,a.lazy)(()=>import("./SafetyLevel-DEN4P2ZP.js")),cp=(0,a.lazy)(()=>import("./DefaultWallet-5UGUU3F3.js")),dp=(0,a.lazy)(()=>import("./SwitchRandomPassword-GJXCBSLT.js")),pp=(0,a.lazy)(()=>import("./AboutWallet-7YAYOHAQ.js")),hp=(0,a.lazy)(()=>import("./WalletHistory-NBRRGM3J.js")),mp=(0,a.lazy)(()=>import("./Selector-ADIYUCUU.js")),gp=(0,a.lazy)(()=>import("./RpcMode-Y7FH2UCL.js")),_p=(0,a.lazy)(()=>import("./DappEntry-J5LXVMIB.js")),wp=(0,a.lazy)(()=>import("./NetworkManagement-UQSM4PID.js")),yp=(0,a.lazy)(()=>import("./Form-YN7SKPAL.js")),bp=(0,a.lazy)(()=>import("./DAppNetworkList-OQOJSQ5M.js")),vp=(0,a.lazy)(()=>import("./PermissionsConnect-QTLQVOT3.js")),Sp=(0,a.lazy)(()=>import("./Detail-B2NS634S.js")),Ep=(0,a.lazy)(()=>import("./NftFilter-JE7P37QB.js")),Tp=(0,a.lazy)(()=>import("./DAppNetworkManage-FWJYNYPK.js")),xp=(0,a.lazy)(()=>import("./CoinDetail-ECRCVT2R.js")),Cp=(0,a.lazy)(()=>import("./address-4JTLHHQC.js")),Ap=(0,a.lazy)(()=>import("./Aptos-72LEWR66.js")),Op=(0,a.lazy)(()=>import("./ZKSpace-EOYHX4PT.js")),Ip=(0,a.lazy)(()=>import("./ZKSyncLite-RDHOQOG4.js")),Dp=(0,a.lazy)(()=>import("./Starknet-57HAG5V7.js")),Np=(0,a.lazy)(()=>import("./CreateAccount-YLZ6I7ZD.js")),Mp=(0,a.lazy)(()=>import("./ConfirmPay-AAZ6ZWWN.js")),kp=(0,a.lazy)(()=>import("./Swap-S3VYTOKQ.js")),Pp=(0,a.lazy)(()=>import("./SelectCoin-QVOXQXD5.js")),Lp=(0,a.lazy)(()=>import("./rpc-mode-3HRONTI7.js")),Rp=(0,a.lazy)(()=>import("./BatchTransfer-6FLKOTDN.js")),Up=(0,a.lazy)(()=>import("./Bitcoin-B2F3OYJT.js")),Wp=(0,a.lazy)(()=>import("./BatchAddAccount-DWZCTGIM.js")),Bp=(0,a.lazy)(()=>import("./Edit-5T4V5O4N.js")),qp=(0,a.lazy)(()=>import("./Confirm-HTUSDNYQ.js")),jp=(0,a.lazy)(()=>import("./ManageUtxo-5CDIE75W.js")),Hp=(0,a.lazy)(()=>import("./CoinInfo-EX56UTLA.js")),Fp=(0,a.lazy)(()=>import("./DownloadAddresses-EE64HMMY.js")),Gp=(0,a.lazy)(()=>import("./GasTracker-G7SZKI5K.js")),Kp=(0,a.lazy)(()=>import("./Advanced-NFA5NFUG.js")),Ie=class extends a.Component{UNSAFE_componentWillMount(){let{currentCurrency:t,pageChanged:r,setCurrentCurrencyToUSD:n,history:i}=this.props,o=this.context.t;t||n(),i.listen((u,f)=>{f==="PUSH"&&r(u.pathname)}),Mt(Rt.getCheckCountryLimit).then(u=>{try{let{data:{web3:{limit:f,displayCountryName:_}}}=u;f&&fe.warn({maskClosable:!1,renderFooter:()=>a.default.createElement("div",null),alignBottom:!1,title:o("wallet_extension_login_title_access_restricted"),text:o("wallet_extension_login_toast_unavailable_inyourregion",{area:_})})}catch{$.error({title:o("wallet_home_toast_network_error")})}}).catch(()=>{})}componentDidMount(){to();let{textDirection:t}=this.props;Ht(t)}renderRoutes(){let{autoLockTimeLimit:t,setLastActiveTime:r}=this.props,n=a.default.createElement(a.Suspense,null,a.default.createElement(ee.Switch,null,a.default.createElement(ee.Route,{path:wo,component:Ad}),a.default.createElement(g,{path:zo,component:Xl,exact:!0}),a.default.createElement(ee.Route,{path:ba,component:Bp,exact:!0}),a.default.createElement(ee.Route,{path:va,component:qp,exact:!0}),a.default.createElement(g,{path:oa,guard:!0,component:Zl,exact:!0}),a.default.createElement(g,{path:aa,component:Zl,exact:!0}),a.default.createElement(g,{path:sa,component:Od,exact:!0}),a.default.createElement(g,{path:Jo,component:Id,exact:!0}),a.default.createElement(g,{path:Qo,component:Dd,exact:!0}),a.default.createElement(g,{path:ko,component:Nd,exact:!0}),a.default.createElement(g,{path:ia,guard:!0,component:Pd,exact:!0}),a.default.createElement(ee.Route,{path:Co,component:Wd,exact:!0}),a.default.createElement(g,{path:Ao,component:Bd}),a.default.createElement(mt,{path:Oo,component:Xl,exact:!0}),a.default.createElement(ee.Route,{path:`${Io}/:type`,component:Yd}),a.default.createElement(g,{path:ea,component:Rd}),a.default.createElement(g,{path:la,component:Ld}),a.default.createElement(g,{path:ta,component:Ud}),a.default.createElement(g,{path:ra,component:Md}),a.default.createElement(g,{path:na,guard:!0,component:kd}),a.default.createElement(ee.Route,{path:Ta,component:xd}),a.default.createElement(g,{path:vo,component:zd,exact:!0}),a.default.createElement(ee.Route,{path:fo,component:Xd,exact:!0}),a.default.createElement(mt,{path:Be,component:qd}),a.default.createElement(mt,{path:xo,component:jd,exact:!0}),a.default.createElement(mt,{path:To,component:Hd,exact:!0}),a.default.createElement(g,{path:Xo,component:Fd,exact:!0}),a.default.createElement(g,{path:Zo,component:Gd,exact:!0}),a.default.createElement(ee.Route,{path:Ca,component:Kd,exact:!0}),a.default.createElement(ee.Route,{path:Aa,component:$d,exact:!0}),a.default.createElement(ir,{path:Bt,exact:!0,component:Vd}),a.default.createElement(ir,{path:So,component:Zd}),a.default.createElement(g,{path:Eo,component:Jd}),a.default.createElement(g,{path:_a,component:Lp}),a.default.createElement(g,{path:wa,component:Rp}),a.default.createElement(g,{path:ya,component:Wp}),a.default.createElement(g,{path:_o,component:rp}),a.default.createElement(g,{path:go,component:tp}),a.default.createElement(g,{path:Vo,component:Qd}),a.default.createElement(g,{path:Yo,component:ep}),a.default.createElement(g,{path:`${po}/:nftPath`,component:np,exact:!0}),a.default.createElement(g,{path:`${co}/:coinId?`,component:ip}),a.default.createElement(g,{path:Do,component:op}),a.default.createElement(g,{path:No,component:ap}),a.default.createElement(g,{path:Mo,component:sp}),a.default.createElement(g,{path:Po,component:lp}),a.default.createElement(g,{path:Lo,component:up}),a.default.createElement(g,{path:Ro,component:fp}),a.default.createElement(g,{path:Uo,component:cp}),a.default.createElement(g,{path:qo,component:dp}),a.default.createElement(g,{path:Wo,component:pp}),a.default.createElement(g,{path:ua,component:hp,exact:!0}),a.default.createElement(g,{path:Bo,component:mp}),a.default.createElement(g,{path:jo,component:gp}),a.default.createElement(g,{path:Ko,component:_p}),a.default.createElement(g,{path:Fo,component:wp}),a.default.createElement(g,{path:Go,component:yp}),a.default.createElement(g,{path:Ho,component:bp}),a.default.createElement(g,{path:`${ho}/:id`,component:vp}),a.default.createElement(g,{path:`${yo}`,component:Sp,exact:!0}),a.default.createElement(g,{path:bo,component:Ep,exact:!0}),a.default.createElement(g,{path:`${mo}`,component:Tp}),a.default.createElement(g,{path:qt,component:xp,exact:!0}),a.default.createElement(g,{path:Oa,component:Hp}),a.default.createElement(g,{path:Ia,component:Fp}),a.default.createElement(g,{path:fa,component:Cp}),a.default.createElement(g,{path:ca,component:Ap}),a.default.createElement(g,{path:Sa,component:kp}),a.default.createElement(g,{path:Ea,component:Pp}),a.default.createElement(g,{path:da,component:Op}),a.default.createElement(g,{path:pa,component:Ip}),a.default.createElement(g,{path:ha,component:Dp}),a.default.createElement(g,{path:ma,component:Np}),a.default.createElement(g,{path:ga,component:Mp}),a.default.createElement(g,{path:$o,component:Up}),a.default.createElement(g,{path:uo,component:Cd}),a.default.createElement(g,{path:jt},a.default.createElement(a.Suspense,{fallback:a.default.createElement(Ma,null)},a.default.createElement(Ed,null))),a.default.createElement(g,{path:xa,component:jp}),a.default.createElement(g,{path:Da,component:Gp}),a.default.createElement(g,{path:Na,component:Kp}),a.default.createElement(g,{path:xe,component:Td})));return t>0?a.default.createElement(Cl,{onAction:r,throttle:1e3},n):n}render(){let{isLoading:t,isMouseUser:r,browserEnvironment:n}=this.props,{os:i,browser:o}=n||{},u=process.env.ASSETS_BUILD_TYPE===Pe.DEV||process.env.ASSETS_BUILD_TYPE===Pe.DAILY;return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:(0,Jl.default)("app-content",{[`os-${i}`]:i,[`browser-${o}`]:o,"mouse-user-styles":r})},a.default.createElement(Il,null),a.default.createElement("div",{className:"main-container-wrapper"},t&&a.default.createElement(ka,null),this.renderRoutes())),!!u&&a.default.createElement(zl,null))}};Ie.propTypes={currentCurrency:Q.default.string.isRequired,setCurrentCurrencyToUSD:Q.default.func.isRequired,isLoading:Q.default.bool.isRequired,textDirection:Q.default.string.isRequired,setLastActiveTime:Q.default.func.isRequired,history:Q.default.object.isRequired,isMouseUser:Q.default.bool.isRequired,autoLockTimeLimit:Q.default.number.isRequired,pageChanged:Q.default.func.isRequired,browserEnvironment:Q.default.object.isRequired};Ie.contextTypes={t:Q.default.func};function $p(e){var i;let{appState:t}=e,{isLoading:r}=t,{autoLockTimeLimit:n=0}=zi(e);return{textDirection:e.metamask.textDirection||"ltr",isLoading:r,currentCurrency:(i=e.metamask.selectedCurrency)==null?void 0:i.isoCode,isMouseUser:e.appState.isMouseUser,autoLockTimeLimit:n,browserEnvironment:e.metamask.browserEnvironment}}function Yp(e){return{setCurrentCurrencyToUSD:()=>e(lo("usd")),setLastActiveTime:()=>e(io()),pageChanged:t=>e(Sl(t))}}var pn=(0,tu.compose)(eu.withRouter,(0,Ql.connect)($p,Yp))(Ie);s();l();var or=class extends te.PureComponent{constructor(){super(...arguments);ve(this,"state",{})}static getDerivedStateFromError(r){return{error:r}}componentDidCatch(r){K.captureException(r)}render(){let{error:r}=this.state,{store:n}=this.props;return r?te.default.createElement(hn.Provider,{store:n},te.default.createElement(xr,null,te.default.createElement(Cr,null,te.default.createElement(tn,{error:r})))):te.default.createElement(hn.Provider,{store:n},te.default.createElement(nu.HashRouter,{hashType:"noslash"},te.default.createElement(xr,null,te.default.createElement(Cr,null,te.default.createElement(pn,null)))))}};or.propTypes={store:ru.default.object.isRequired};var iu=or;oo();s();l();var ar=y(Tr());s();l();Nt();Me();var Vp=We({name:"coins",initialState:{coinsMap:{},ready:!1},reducers:{updateCoinsMap(e,t){e.coinsMap=t.payload,e.ready=!0}}}),{actions:zp,reducer:Xp}=Vp,{updateCoinsMap:Zp}=zp;var ou=()=>async e=>{Re.common_coins.liveQuery().subscribe(async(t,r)=>{if(r)K.captureEvent({message:"STORE_WARN_indexeddb_error",exception:{values:[{type:"STORE_WARN_indexeddb_error",value:`subscribe coins error, ${kt(r)}`}]},level:"error"}),Se().fallbackAllCoinsMap();else{t.sort((i,o)=>i.rank-o.rank);let n=t.reduce((i,o)=>(i[String(o.coinId)]=o,i),{});e(Zp(n))}})},au=Xp;s();l();Nt();Me();var Jp=We({name:"balanceSlice",initialState:{balanceMap:{}},reducers:{setBalance:(e,t)=>{e.balanceMap=t.payload}}}),{actions:Qp,reducer:eh}=Jp;function su(e){K.captureEvent({message:"STORE_WARN_indexeddb_error",exception:{values:[{type:"STORE_WARN_indexeddb_error",value:e}]},level:"error"})}var lu=()=>async e=>{Re.balance.liveQuery().subscribe((t,r)=>{var n;if(r)su(`subscribe balance error, ${kt(r)}`),Se().fallbackBalancesData();else{if(!t||((n=t.filter)==null?void 0:n.call(t,o=>!o).length)>0){su(`subscribe balance null, ${JSON.stringify(t)}`),Se().fallbackBalancesData();return}let i=t.reduce((o,u)=>(o[u.walletId]=u,o),{});e(Qp.setBalance(i))}})},uu=eh;s();l();var gu=y(Tr());s();l();var th="metamask/send/OPEN_TO_DROPDOWN",rh="metamask/send/CLOSE_TO_DROPDOWN",nh="metamask/send/UPDATE_SEND_ERRORS",ih="metamask/send/RESET_SEND_STATE",oh="metamask/send/SHOW_GAS_BUTTON_GROUP",ah="metamask/send/HIDE_GAS_BUTTON_GROUP",fu={toDropdownOpen:!1,gasButtonGroupShown:!0,errors:{}};function mn(e=fu,t){switch(t.type){case th:return{...e,toDropdownOpen:!0};case rh:return{...e,toDropdownOpen:!1};case nh:return{...e,errors:{...e.errors,...t.value}};case oh:return{...e,gasButtonGroupShown:!0};case ah:return{...e,gasButtonGroupShown:!1};case ih:return{...fu};default:return e}}s();l();Wf();function gn(e={},t){let r={shouldClose:!1,menuOpen:!1,modal:{open:!1,modalState:{name:null,props:{}},previousModalState:{name:null}},sidebar:{isOpen:!1,transitionName:"",type:"",props:{}},alertOpen:!1,alertMessage:null,qrCodeData:null,networkDropdownOpen:!1,accountDetail:{subview:"transactions"},isLoading:!1,warning:null,buyView:{},isMouseUser:!1,defaultHdPaths:{trezor:"m/44'/60'/0'/0",ledger:"m/44'/60'/0'/0/0"},requestAccountTabs:{},currentWindowTab:{},homePageScrollTop:0,showSupportedChainsFlag:!1,...e};switch(t.type){case wi:return{...r,networkDropdownOpen:!0};case yi:return{...r,networkDropdownOpen:!1};case pi:return{...r,sidebar:{...t.value,isOpen:!0}};case hi:return{...r,sidebar:{...r.sidebar,isOpen:!1}};case mi:return{...r,alertOpen:!0,alertMessage:t.value};case gi:return{...r,alertOpen:!1,alertMessage:null};case _i:return{...r,qrCodeData:t.value};case Ni:return{...r,accountDetail:{}};case bi:return{...r,forgottenPassword:t.value};case Ii:return{...r,warning:null};case Ei:return{...r,warning:null};case di:return{...r,accountDetail:{subview:"transactions",accountExport:"none",privateKey:""},warning:null};case Ci:return{...r,forgottenPassword:r.forgottenPassword?!r.forgottenPassword:null,accountDetail:{subview:"transactions",accountExport:"none",privateKey:""}};case Ai:return{...r,isLoading:!1,warning:null,scrollToBottom:!1,forgottenPassword:!1};case Oi:return{...r,txId:t.id,warning:null,isLoading:!1};case Mi:return t.value.unconfirmedActionsCount>0?{...r,txId:null,warning:null}:{...r,shouldClose:!0,warning:null,txId:null,accountDetail:{subview:"transactions"}};case ki:return{...r};case vi:return{...r,warning:t.value||"Incorrect password. Try again."};case Si:return{...r,warning:""};case Pi:{let{device:n,path:i}=t.value,o={...r.defaultHdPaths};return o[n]=i,{...r,defaultHdPaths:o}}case Li:return{...r,isLoading:!0,loadingMessage:t.value};case Ri:return{...r,isLoading:!1};case Ti:return{...r,warning:t.value,isLoading:!1};case xi:return{...r,warning:void 0};case Di:return{...r,accountDetail:{subview:"export",accountExport:"completed",privateKey:t.value}};case Ui:return{...r,isMouseUser:t.value};case Wi:return{...r,requestAccountTabs:t.value};case Bi:return{...r,currentWindowTab:t.value};case qi:return{...r,homePageScrollTop:t.value};case ji:return{...r,showSupportedChainsFlag:t.value};default:return r}}s();l();var du=y(mr()),sh="metamask/gas/BASIC_GAS_ESTIMATE_LOADING_FINISHED",lh="metamask/gas/BASIC_GAS_ESTIMATE_LOADING_STARTED",uh="metamask/gas/RESET_CUSTOM_DATA",fh="metamask/gas/SET_BASIC_GAS_ESTIMATE_DATA",ch="metamask/gas/SET_CUSTOM_GAS_LIMIT",dh="metamask/gas/SET_CUSTOM_GAS_PRICE",cu={customData:{price:null,limit:null},basicEstimates:{safeLow:null,average:null,fast:null},basicEstimateIsLoading:!0};function _n(e=cu,t){switch(t.type){case lh:return{...e,basicEstimateIsLoading:!0};case sh:return{...e,basicEstimateIsLoading:!1};case fh:return{...e,basicEstimates:t.value};case dh:return{...e,customData:{...e.customData,price:t.value}};case ch:return{...e,customData:{...e.customData,limit:t.value}};case uh:return{...e,customData:(0,du.cloneDeep)(cu.customData)};default:return e}}s();l();s();l();s();l();var pu={[os]:as};s();l();var hu={[Ga]:Ka,[$a]:Ya,[ls]:us,[fs]:cs};var mu={...pu,...hu};var _u=(0,gu.combineReducers)({activeTab:e=>e===void 0?null:e,metamask:Fi,appState:gn,history:vl,send:mn,nftSend:ts,newDapp:za,confirmTransaction:Va,gas:_n,localeMessages:Hi,importAccount:rs,coinDetail:es,txHistory:Qa,balanceSlice:uu,networksSlice:Yi,animateCollect:is,editWallet:Ha,coins:au,Nft:Xa,addressBookState:ss,batchTransfer:ds,batchAddAccount:ps,batchImportPrivateKey:ns,commonSend:Ir,walletConfig:ao,businessSend:Dr,wallet:Ja,...mu});function wn(e){return(0,ar.createStore)(_u,e,(0,ar.applyMiddleware)(Ki))}var wu=()=>e=>{e($i()),e(ou()),e(lu()),e(Za())};var yn=y(Lf());s();l();if((process.env.ASSETS_BUILD_TYPE==="dev"||process.env.ASSETS_BUILD_TYPE==="daily"||process.env.ASSETS_BUILD_TYPE==="prepub")&&localStorage.getItem("speedUp")){let t=window.setInterval;window.setInterval=function(r,n,...i){let o=n>=1e3?n/100:n;return t(r,o,...i)}}s();l();var yu=y(mr());hr();var bu=async()=>{try{let e=new ke,{data:t}=await e.get("data");return{authMap:(0,yu.get)(t,"AuthController.authMap",{})}}catch{return{}}};Zn.config({top:16});$n.config({returnString:!0,isConvertToZero:!0,exponentialAt:[-40,40]});gr.setConfig({Dialog:{maskClosable:!0,getContainer:()=>document.querySelector(".main-container-wrapper")},Drawer:{getContainer:()=>document.querySelector(".main-container-wrapper")},[gr.componentNames.Select]:{bottomSafeSpace:0}});if(process.env.ASSETS_BUILD_TYPE===Pe.DEV||process.env.ASSETS_BUILD_TYPE===Pe.DAILY){let e=window.localStorage.getItem("languageKeyMode");Ue(e==="keyMode")}vu.default.setLevel(process.env.ASSETS_BUILD_TYPE==="dev"||process.env.ASSETS_BUILD_TYPE==="daily"?"debug":"warn");function ph(e){window.getCleanAppState=function(){let t=(0,Su.clone)(e.getState());return t.version=globalThis.platform.getVersion(),t.browser=window.navigator.userAgent,t}}var hh=async()=>Promise.allSettled([fi(),ci()]);async function mh({metamaskState:e},t,r){await ti.setUrlFromLocalAsync(),await Qn.setUrlFromLocalAsync(),await hh();let n={},i={},o={};if(e.currentLocale){let E=await Promise.allSettled([Ut(e.currentLocale),Ut(e.currentLocale,yn.LOCALE_TYPE.okd),Ut(e.currentLocale,yn.LOCALE_TYPE.dex)]);n=E[0].value,i=E[1].value,o=E[2].value}let f={...{activeTab:r.activeTab,metamask:e,appState:{},localeMessages:{current:n,okdCurrent:i,dexCurrent:o}}},_=wn(f),w=Vi(e.unapprovedTxs,e.unapprovedMsgs,e.unapprovedPersonalMsgs,e.unapprovedDecryptMsgs,e.unapprovedEncryptionPublicKeyMsgs,e.unapprovedTypedMessages,e.network,e.provider.chainId);return w.length>0&&_.dispatch(so({id:w[0].id})),t.onNotification(E=>{switch(E.method){case"sendUpdate":{let p=E.params[0];setTimeout(()=>{wl(p)},300),_.dispatch(ro(p))}break;case"sendPartialUpdate":{let p=E.params[0];_.dispatch(no(p))}break;default:throw new Error(`Internal JSON-RPC Notification Not Handled:

 ${JSON.stringify(E)}`)}}),_.dispatch(wu()),(0,Tu.createRoot)(r.container).render(Eu.default.createElement(iu,{store:_})),e.currentLocale&&ui(e.currentLocale),_}function bn(e,t){let{backgroundConnection:r}=e;Jn(r),ni(r.refreshHttpDNS),r.getStateByDomain((n,i)=>{if(n){t(n);return}let{currentLocale:o}=i;ii(o),mh({metamaskState:i},r,e).then(u=>{ph(u),t(null,u)}).catch(()=>{})})}window.logStateString=async function(e){let t=window.getCleanAppState();try{let r=await globalThis.platform.getPlatformInfo();t.platform=r;try{t.permissionsLog=await gl()}catch{t.permissionsLog=[]}let n=await bu();Object.keys(n).forEach(o=>{t[o]=n[o]});let i=JSON.stringify(t,null,2);e(null,i)}catch(r){e(r)}};Sr();s();l();var R=y(ze());Sr();Er();var wt=class{reload(){R.default.runtime.reload()}openTab(t){return new Promise((r,n)=>{R.default.tabs.create(t).then(i=>{let o=ie();return o?n(o):r(i)}).catch(i=>{n(i)})})}openWindow(t){return new Promise((r,n)=>{R.default.windows.create(t).then(i=>{let o=ie();return o?n(o):(this.lastOkPopupId=i.id,r(i))}).catch(i=>{n(i)})})}closeWindow(t){return new Promise((r,n)=>{R.default.windows.remove(t).then(()=>{let i=ie();return i?n(i):r()}).catch(i=>{n(i)})})}focusLastOkPopup(){this.lastOkPopupId&&this.getAllWindows().then(t=>{t.some(r=>r.id===this.lastOkPopupId)?this.focusWindow(this.lastOkPopupId):this.lastOkPopupId=""}).catch(()=>{})}async focusCurrentWindow(){let t=await this.currentTab(),r=t==null?void 0:t.windowId;await this.focusWindow(r)}focusWindow(t){return new Promise((r,n)=>{R.default.windows.update(t,{focused:!0}).then(()=>{let i=ie();return i?n(i):r()}).catch(i=>{n(i)})})}updateWindowPosition(t,r,n){return new Promise((i,o)=>{R.default.windows.update(t,{left:r,top:n}).then(()=>{let u=ie();return u?o(u):i()}).catch(u=>{o(u)})})}getLastFocusedWindow(t){return new Promise((r,n)=>{R.default.windows.getLastFocused(t).then(i=>{let o=ie();return o?n(o):r(i)}).catch(i=>{n(i)})})}closeCurrentWindow(){var t,r;return(r=(t=R.default)==null?void 0:t.windows)!=null&&r.getCurrent?R.default.windows.getCurrent().then(n=>R.default.windows.remove(n.id)):Promise.resolve()}getVersion(){return R.default.runtime.getManifest().version}openExtensionInBrowser(t=null,r=null){let n=R.default.runtime.getURL("home.html");r&&(n+=`?${r}`),t&&(n+=`#${t}`),this.openTab({url:n}),Ee()!==vr&&window.close()}async openExtensionInPopup(t=null,r=null){let n=R.default.runtime.getURL("home.html");r&&(n+=`?${r}`),t&&(n+=`#${t}`);let{screenX:i,screenY:o,outerWidth:u}=window,f=Math.max(o,0),_=Math.max(i+(u-360),0);if(!i){let b=await this.getLastFocusedWindow();f=b.top,_=b.left+(b.width-360)}let w=await si();this.openWindow({url:n,type:"popup",width:(w==null?void 0:w.width)||360,height:700,top:f,left:_}),Ee()!==vr&&window.close()}getPlatformInfo(){return new Promise((t,r)=>{try{R.default.runtime.getPlatformInfo().then(n=>{t(n)}).catch(n=>{r(n)})}catch(n){r(n)}})}getAllWindows(){return new Promise((t,r)=>{R.default.windows.getAll().then(n=>{let i=ie();return i?r(i):t(n)}).catch(n=>{r(n)})})}getActiveTabs(){return new Promise((t,r)=>{R.default.tabs.query({active:!0}).then(n=>{let i=ie();return i?r(i):t(n)}).catch(n=>{r(n)})})}currentTab(){return new Promise((t,r)=>{R.default.tabs.getCurrent().then(n=>{let i=ie();i?r(i):t(n)}).catch(n=>{r(n)})})}closeTab(t){return new Promise((r,n)=>{R.default.tabs.remove(t).then(()=>{let i=ie();i?n(i):r()}).catch(i=>{n(i)})})}getCpuInfoName(){return new Promise((t,r)=>{try{R.default.system.cpu.getInfo(n=>{t(n.modelName)})}catch(n){r(n)}})}};s();l();var yf=y(ze()),bf=y(wf());var At=class extends bf.Duplex{constructor(r){super({objectMode:!0});ve(this,"onMessage",r=>{if(c.Buffer.isBuffer(r)){let n=c.Buffer.from(r);this.push(n)}else this.push(r)});ve(this,"onDisconnect",()=>{let{lastError:r}=yf.default.runtime;r&&typeof this.opts.port=="function"?this.init():this.destroy()});this.opts={port:r},this.init()}init(){this.removePortListener(),this.port=typeof this.opts.port=="function"?this.opts.port():this.opts.port,this.port.onMessage.addListener(this.onMessage),this.port.onDisconnect.addListener(this.onDisconnect)}removePortListener(){this.port&&(this.port.onMessage.removeListener(this.onMessage),this.port.onDisconnect.removeListener(this.onDisconnect))}_read(){}_write(r,n,i){try{if(c.Buffer.isBuffer(r)){let o=r.toJSON();o._isBuffer=!0,this.port.postMessage(o)}else this.port.postMessage(r)}catch{return i(new Error("PortDuplexStream - disconnected"))}return i()}};s();l();var vf=y(Hf()),Sf=y(Bf());function Ef(e){let t=new vf.default;return(0,Sf.default)(e,t,e,r=>{r&&console.error(r)}),t}Er();s();l();var Tf=y(qf()),xf=y(jf());var Bn=class{constructor(t){this.connectionStream=t,this.notificationChannel=new xf.default,this.requests=new Map,this.connectionStream.on("data",this.handleResponse.bind(this)),this.connectionStream.on("end",this.close.bind(this))}onNotification(t){this.notificationChannel.addListener("notification",r=>{t(r)})}close(){this.notificationChannel.removeAllListeners()}handleResponse(t){let{id:r,result:n,error:i,method:o,params:u}=t,f=this.requests.get(r);if(!(o&&u&&r)){if(o&&u&&!r){this.notificationChannel.emit("notification",t);return}if(!!f){if(i){let _=new Tf.EthereumRpcError(i.code,i.message,i.data);_.stack=i.stack,this.requests.delete(r),f(_);return}this.requests.delete(r),typeof f=="function"&&f(null,n)}}}},Em=e=>{let t=new Bn(e);return new Proxy(t,{get:(r,n)=>r[n]?r[n]:(...i)=>{let o=i[i.length-1],u=i.slice(0,-1),f=hs();r.requests.set(f,o),r.connectionStream.write({jsonrpc:"2.0",method:n,params:u,id:f})}})},Cf=Em;s();l();var Tm=["popup.html","notification.html","home.html"];navigator.userAgent.includes("Android")&&Tm.forEach(e=>{location.href.includes(e)&&(location.href=location.href.replace(e,"fullscreen.html"))});function xm(e){let t=new Af.default;t.pipe(e).pipe(t),e.on("error",console.error.bind(console)),t.on("error",console.error.bind(console)),globalThis.providerStream=t}function Cm(e,t){let r=Cf(e);t(null,r)}function Am(e,t){let r=Ef(e);Cm(r.createStream("controller"),t),xm(r.createStream("provider"))}function Om(e,t,r,n){Am(r,(i,o)=>{if(i){n(i);return}bn({activeTab:e,container:t,backgroundConnection:o},n)})}async function Im(e){return new Promise(t=>{if(e!==Pt){t({});return}qn.default.tabs.query({active:!0,currentWindow:!0}).then(r=>{let[n]=r,{id:i,title:o,url:u}=n,{origin:f,protocol:_}=u?new URL(u):{};if(!f||f==="null"){t({});return}t({id:i,title:o,origin:f,protocol:_,url:u})}).catch(r=>{console.error(r)})})}async function Dm(e,t){let r=await Im(e);Lt()===ai&&(r.origin="https://www.okx.com");let n=document.getElementById("app");Om(r,n,t,i=>{if(i)throw i})}async function If(){globalThis.platform=new wt;let e=Ee(),t=qn.default.runtime.connect({name:e}),r=new At(t);r.once("end",If),Dm(e,r)}If().catch(Of.default.error);

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ui.js.map
