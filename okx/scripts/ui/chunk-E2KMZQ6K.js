import{a as H}from"./chunk-JXT6JCNO.js";import{a as pe,c as G,d as ye}from"./chunk-NS35PZCP.js";import{a as X}from"./chunk-BBN3UGKM.js";import{c as z,d as V,j as le,l as Ce}from"./chunk-QMNAWRVI.js";import{f as fe}from"./chunk-D6ZXZUY6.js";import{b as Ke}from"./chunk-VMACN7YR.js";import{G as de,K as me,L as I,M as _,a as qe}from"./chunk-MTMZQEHP.js";import{h as U}from"./chunk-62JDSRZZ.js";import{j as ue}from"./chunk-R6GCLTW2.js";import{k as q}from"./chunk-IU3TYIWS.js";import{b as v,d as g,e as L,g as je,l as E,m as ae}from"./chunk-VPBQLZCI.js";import{ba as Ie,ca as Qe}from"./chunk-X2LENRE7.js";import{b as K}from"./chunk-6ZPGW3YM.js";import{d as ce}from"./chunk-RMQJRDTF.js";import{C as oe,D as Re,Ma as se,Pa as Oe,Vb as Le,q as N,sb as ie,t as j}from"./chunk-CVJKAN5R.js";import{a as te}from"./chunk-V4YVDLI4.js";import{c as D,f as B,m as l,o as C}from"./chunk-6V2G2Z5W.js";var be=D((lr,he)=>{l();C();var Ue=fe(),ze=Ie(),Ve=Qe();function _e(e){return function(r,t,o){var n=Object(r);if(!ze(r)){var i=Ue(t,3);r=Ve(r),t=function(s){return i(n[s],s,n)}}var c=e(r,t,o);return c>-1?n[i?r[c]:c]:void 0}}he.exports=_e});var xe=D((dr,ge)=>{l();C();var Ge=je(),Pe=1/0,He=17976931348623157e292;function Xe(e){if(!e)return e===0?e:0;if(e=Ge(e),e===Pe||e===-Pe){var r=e<0?-1:1;return r*He}return e===e?e:0}ge.exports=Xe});var Ne=D((hr,Te)=>{l();C();var Ye=xe();function Je(e){var r=Ye(e),t=r%1;return r===r?t?r-t:r:0}Te.exports=Je});var Fe=D((gr,Ae)=>{l();C();var Ze=Ke(),$e=fe(),ke=Ne(),er=Math.max;function rr(e,r,t){var o=e==null?0:e.length;if(!o)return-1;var n=t==null?0:ke(t);return n<0&&(n=er(o+n,0)),Ze(e,$e(r,3),n)}Ae.exports=rr});var Se=D((Nr,Be)=>{l();C();var nr=be(),tr=Fe(),or=nr(tr);Be.exports=or});l();C();var Q=B(K());var Z=B(Se()),$=B(qe());oe();Oe();var w=B(te());l();C();var we=B(K());function Y(){return(0,we.useSelector)(ue)}var De=B(Re());l();C();var ve=B(K());var We=B(te());Le();var J=()=>{let{coinToUSDRate:e,coinToCurrencyRate:r,selectedCurrency:t,coinPriceChangePercent24h:o}=(0,ve.useSelector)(({metamask:n={}})=>({coinToUSDRate:n==null?void 0:n.coinToUSDRate,coinToCurrencyRate:n==null?void 0:n.coinToCurrencyRate,selectedCurrency:n==null?void 0:n.selectedCurrency,coinPriceChangePercent24h:n==null?void 0:n.coinPriceChangePercent24h}));return g(()=>{let n={},{symbol:i}=t;return Object.keys(e).forEach(c=>{n[c]={currencySymbol:i,usdPrice:e[c],currencyPrice:r==null?void 0:r[c],priceChangePercent24h:o==null?void 0:o[c]}}),n},[e,r,t])},Me=e=>{let r=J(),t=ye(),{data:o,run:n}=E(I,{manual:!0,ready:!0,retryCount:3,staleTime:36e5,cacheTime:864e5});return(0,We.useEffect)(()=>{!r[e]&&de(e)&&n(+e)},[r,e]),g(()=>{let i=r[e];if(i)return i;if(o&&t){let{currencyAmount:c,priceChangePercent24h:s}=o;return{currencySymbol:t.symbol,usdPrice:c,currencyPrice:ie(c,t.usdToThisRate),priceChangePercent24h:s}}return null},[r,e,t,o])};var R=(e={})=>{let r=H(),t=G(),o=Y(),n=J(),i=(0,Q.useSelector)(({metamask:f})=>f==null?void 0:f.coinPriceChangePercent24h),c=L(r),s=L(n),u=L(i),{withPrice:h=!1,withPriceChangePercent24h:a=!1}=e||{},[x,p]=(0,w.useState)(void 0),{runAsync:b}=E(_,{manual:!0,cacheKey:x,retryCount:3,staleTime:36e5,cacheTime:864e5});return(0,w.useCallback)(async(f,y)=>{var d,F,M,S,k,ee,re;let m;if(f===0||!o||Number.isNaN(f))return null;if(typeof f<"u")m=(d=c==null?void 0:c.current)==null?void 0:d[f];else if(y){let P=Object.values(r);if(y.aggregation&&y.symbol)return t[y.symbol]?{...t[y.symbol][0],childrenCoin:t[y.symbol]}:null;if(V(y)){let O=j(P,y);O.length>0&&(m=O[0])}}if(!m&&f!==0){let P;typeof f<"u"&&!Number.isNaN(f)?P={coinId:f}:y&&(P=!(0,$.default)(y)&&me(y)?y:null),P&&(p(z(P)),m=await b(P))}if(!m)return null;let T;if((h||a)&&!((F=s==null?void 0:s.current)!=null&&F[f])&&(T=await I(m.coinId)),h){let{currencySymbol:P,usdPrice:ne,currencyPrice:O}=(k=(S=(M=s==null?void 0:s.current)==null?void 0:M[f])!=null?S:T)!=null?k:{};m={...m,currencySymbol:P,usdPrice:ne,currencyPrice:O}}if(a){let P=(re=(ee=u==null?void 0:u.current)==null?void 0:ee[f])!=null?re:T==null?void 0:T.priceChangePercent24h;m={...m,priceChangePercent24h:P}}return m},[h,a,r,t,b,o])},W=(e,r={},t)=>{let o=G(),n=H(),i=Y(),{withPrice:c,withPriceChangePercent24h:s}=r,u=pe(t),h=[e,n,o,u,i],a=[],x=g(()=>{let d;if(e===0||!i||Number.isNaN(e))return null;if(typeof e<"u")d=n==null?void 0:n[e];else if(u){let F=Object.values(n);if(u.aggregation&&u.symbol)return o[u.symbol]?{...o[u.symbol][0],childrenCoin:o[u.symbol]}:null;if(V(u)){let S=j(F,u);S.length>0&&(d=S[0])}}return d||null},h),p=!!x,b=g(()=>{let d;if(!(p||e===0)&&(typeof e<"u"&&!Number.isNaN(e)?d={coinId:e}:d=(0,$.default)(u)?null:u,d))return z(d)},[e,u,p]),{data:f,run:y}=E(_,{manual:!0,ready:!0,cacheKey:b,retryCount:3,staleTime:36e5,cacheTime:864e5});(0,w.useEffect)(()=>{!p&&i&&!!b&&y(typeof e<"u"?{coinId:e}:u)},[p,i,b,e,u]);let m=x||f,T=Me(c||s?m==null?void 0:m.coinId:null);return a.push(m,T),g(()=>{if(!m)return null;let d=m;if(c&&T){let{currencySymbol:F,usdPrice:M,currencyPrice:S}=T;d={...d,currencySymbol:F,usdPrice:M,currencyPrice:S}}if(s){let{priceChangePercent24h:F}=T;d={...d,priceChangePercent24h:F}}return d},a)};var sr=e=>{let r=R(e),t=U(),o=(0,Q.useSelector)(le);return v(async(n,i)=>{let c=await r(n);if(!c)return null;let s=i||t,{coins:u}=(o==null?void 0:o[s])||{coins:[]},{coinAmountInt:h="0"}=(0,Z.default)(u,a=>(a==null?void 0:a.coinId)===n)||{};return{...c,coinAmountInt:h,coinAmount:N.div(h,10**(c==null?void 0:c.decimals))}},[o,t,r])},ir=(e,r,t)=>{let{addressType:o,key:n}=t||{},i=W(e,t,n?{key:n}:void 0),c=U(),s=r||c,u=(0,Q.useSelector)(p=>Ce(p,s)),h=g(()=>(0,Z.default)(u,p=>{var f;let b;if(n?b=p.key===n:b=p.coinId===e,o){let y=(f=ce[i==null?void 0:i.localType])==null?void 0:f[o];b=b&&y===(p==null?void 0:p.addressType)}return b}),[u,s,e,o,n]),{coinAmountInt:a,currencyAmount:x}=h||{};return g(()=>i?{...i,coinAmountInt:a,currencyAmount:x,coinAmount:(0,De.isNil)(a)?void 0:N.div(a,10**(i==null?void 0:i.decimals))}:null,[i,a])},cr=(e,r)=>{let t=W(e,r),o=W(t==null?void 0:t.baseCoinId,r);return[t,o||t]},Ee=e=>{let r=R(e);return v(async t=>{let o=await r(t),n=await r(o==null?void 0:o.baseCoinId);return[o,n||o]},[r])};var ur=(e={})=>{let r=Ee(e);return v(async t=>{let[,o]=await r(t),n=o==null?void 0:o.coinId;return se.indexOf(n)!==-1},[r])},kr=(e,r={})=>{let t=ur(r),[o,n]=(0,w.useState)(!1);return ae(async()=>{let i=await t(e);n(i)},[t]),o};l();C();l();C();oe();var ar=(e={})=>{let{currencyId:r,formatted:t=!0,useApproximate:o}=e||{},n=X(r),{symbol:i,usdToThisRate:c}=n,s=R({withPrice:!0});return v(async(u,h)=>{let a=await s(u),x=N.div(h,10**(a==null?void 0:a.decimals)),p=N.mul(a==null?void 0:a.usdPrice,c),b=N.mul(x,p);return t?q(b,{useApproximate:o,symbol:i}):b},[i,t,s,c,o])},fr=(e,r,t={})=>{let{currencyId:o,formatted:n=!0,useApproximate:i,useMinPrecision:c=!0}=t||{},s=W(e,{withPrice:!0}),{usdToThisRate:u,symbol:h}=X(o);return g(()=>{if(!s||!(s!=null&&s.usdPrice))return null;let a=c?N.div(r,10**(s==null?void 0:s.decimals)):r,x=N.mul(s==null?void 0:s.usdPrice,u),p=N.mul(a,x);return n?q(p,{useApproximate:i,symbol:h}):p},[h,n,u,r,i,s==null?void 0:s.usdPrice,s==null?void 0:s.decimals])};export{Y as a,R as b,W as c,sr as d,ir as e,cr as f,kr as g,ar as h,fr as i};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-E2KMZQ6K.js.map
