import{a as Ct,b as Tt,d as St,e as Nt}from"./chunk-ROGKJGAC.js";import{d as O}from"./chunk-KCIDY7KH.js";import{a as wt}from"./chunk-E4KPSSWK.js";import"./chunk-QIUJDVIV.js";import"./chunk-HDBJAEKO.js";import"./chunk-2N4YHUFI.js";import"./chunk-IKPPHICM.js";import"./chunk-GQOO5OO7.js";import"./chunk-WIOZQWEG.js";import"./chunk-DPVVGFWQ.js";import"./chunk-67PEY2GN.js";import"./chunk-JVE4G6JP.js";import"./chunk-VNHZZRMI.js";import"./chunk-5TSD6WDE.js";import"./chunk-TPBDSGSX.js";import"./chunk-K24OHEUM.js";import"./chunk-HE77KLJ4.js";import"./chunk-NOZM7AA3.js";import"./chunk-ATUBFYS2.js";import"./chunk-S2GTSTCF.js";import"./chunk-AJZPYKQF.js";import"./chunk-HG2HGCVV.js";import"./chunk-X2HBIQ56.js";import"./chunk-TYILG3ER.js";import"./chunk-YLO74Q7W.js";import"./chunk-D54UDGZS.js";import"./chunk-2SGW2RXR.js";import"./chunk-ZXEHJOAD.js";import"./chunk-U3YDJ2W7.js";import"./chunk-VCWU5FEX.js";import"./chunk-KZ77CGYD.js";import{a as Dt}from"./chunk-DDRVOIUN.js";import"./chunk-YM6UXGIC.js";import"./chunk-7CB4COOY.js";import"./chunk-RDZIVMHO.js";import"./chunk-E73QHIZ6.js";import{c as A}from"./chunk-E2KMZQ6K.js";import"./chunk-JXT6JCNO.js";import"./chunk-AHAXQBXQ.js";import"./chunk-PGPPXRV7.js";import"./chunk-54GDJWA6.js";import"./chunk-UGYRJNZG.js";import"./chunk-PCY622ND.js";import"./chunk-NS35PZCP.js";import"./chunk-XOD56IFT.js";import"./chunk-BBN3UGKM.js";import"./chunk-5DEIKYJL.js";import"./chunk-QMNAWRVI.js";import"./chunk-D6ZXZUY6.js";import"./chunk-QMF5LKVF.js";import"./chunk-VMACN7YR.js";import"./chunk-PGY6IZUS.js";import"./chunk-AXKCDQTS.js";import"./chunk-JWFSXEUV.js";import"./chunk-PD2BTUUF.js";import"./chunk-YCMOAOGN.js";import"./chunk-JLLMIXPD.js";import{a as ft}from"./chunk-QWA3DFD5.js";import"./chunk-EXUJ54CX.js";import"./chunk-D5VZXMFP.js";import"./chunk-XAMN4IIH.js";import"./chunk-BTS2GOAC.js";import{a as V,c as xt,d as $,f as gt,g as k,h as Y,i as yt,l as j,m as Z,n as J,o as _t,p as Lt,q as K,r as Q,s as H}from"./chunk-7CGGT32T.js";import{a as ht}from"./chunk-6L6L7B7D.js";import"./chunk-UVKTLEHJ.js";import"./chunk-3FXJS34C.js";import"./chunk-QLH3KLV3.js";import"./chunk-573GFXXJ.js";import"./chunk-2HWABU7H.js";import"./chunk-APEQZGKB.js";import"./chunk-AX4SXHC6.js";import"./chunk-DUHXKIBS.js";import"./chunk-QNEJI55N.js";import"./chunk-5W7SRP5N.js";import"./chunk-YVRXETFX.js";import"./chunk-WYB2CUAN.js";import"./chunk-B2BOSVTW.js";import"./chunk-GUJXW3GJ.js";import"./chunk-VIS7KIVI.js";import"./chunk-F64VYES3.js";import"./chunk-DHX2X277.js";import"./chunk-WRWXCAEZ.js";import{B as dt}from"./chunk-MTMZQEHP.js";import"./chunk-NKTQMEXG.js";import"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import"./chunk-4OTZHHYZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import"./chunk-S3ECGMEP.js";import"./chunk-PX7HII6H.js";import"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import"./chunk-TPEASXIF.js";import{a as pt}from"./chunk-JSAFBAMQ.js";import"./chunk-A336VZZF.js";import"./chunk-XEOGXIVD.js";import"./chunk-PCGRDRHF.js";import{p as w}from"./chunk-IU3TYIWS.js";import{p as ct,q as ut}from"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import"./chunk-X2LENRE7.js";import"./chunk-O4EDZSHP.js";import{f as lt,k as at}from"./chunk-HU3KBV5G.js";import{b as E}from"./chunk-6ZPGW3YM.js";import"./chunk-ZKDHZDUE.js";import{h as mt,m as qt}from"./chunk-4UESFVD2.js";import"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import"./chunk-FLCN6MAI.js";import"./chunk-YMZEQGAL.js";import"./chunk-7E3KY4EN.js";import"./chunk-JIRWXBHS.js";import"./chunk-3TVEFIPW.js";import{a as B}from"./chunk-UXFKODVN.js";import"./chunk-IMRS4RGO.js";import"./chunk-52GWQSZH.js";import{a as Wt}from"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import"./chunk-RMQJRDTF.js";import{c as y}from"./chunk-2YLR7R2N.js";import"./chunk-MVLY6WUP.js";import"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{C as v,r as ot,v as T}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{A as nt,B as U,o as st,w as it}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{J as rt,c as Gt}from"./chunk-C2H3SRET.js";import{a as _}from"./chunk-V4YVDLI4.js";import"./chunk-UXBKFN2U.js";import"./chunk-HCW4K7TR.js";import"./chunk-Z4JATHZR.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import"./chunk-IYYFWVWL.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import"./chunk-RYNAOZ73.js";import"./chunk-PR4SLUV4.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f as m,m as s,o as i}from"./chunk-6V2G2Z5W.js";s();i();var f=m(_());var At=m(Wt()),z=m(E());s();i();var G=m(_()),Ft=m(E());qt();var zt=()=>{let t=(0,Ft.useDispatch)();return(0,G.useEffect)(()=>()=>{t(mt()),t(_t()),t(K())},[]),null},It=(0,G.memo)(zt);s();i();var c=m(_()),D=m(E());var Ut=()=>{let t=(0,D.useDispatch)(),[e,o]=(0,c.useState)(),r=(0,D.useSelector)(k),n=(0,D.useSelector)(gt),u=(0,D.useSelector)(lt),a=(0,D.useSelector)(yt),l=(0,D.useSelector)(Y),[g,x]=(0,c.useState)(null),{run:p}=ut(()=>{t(Q({...l}))},{wait:200}),P=(0,c.useCallback)(()=>{t(Q({...l},{scrollLoad:!0}))},[r]);Nt({scrollContainer:g},p),Dt(g,P,150);let[C,N]=(0,c.useMemo)(()=>Ct(n,u),[n,u]);return c.default.createElement(c.default.Fragment,null,c.default.createElement(St.HistoryList,{completedList:N,pendingList:C,isLoading:a,onClick:o,onRepeat:p,onContainer:x}),c.default.createElement(Tt,{params:e,onRefresh:p,onClose:()=>{o(null)}}))},Et=(0,c.memo)(Ut);s();i();var h=m(_()),I=m(E());v();s();i();var X={root:"_root_1jnow_1",left:"_left_1jnow_10"};s();i();var M=m(_());v();s();i();var W={root:"_root_tcl1w_1",filter:"_filter_tcl1w_13"};s();i();var L=m(_());var Bt=m(Gt());v();var Zt={tooltip:"wallet_extension_history_tooltip_autoblocked_risky"},Vt="hasReadTxHistoryFilterEntryTooltip",Jt=()=>{var t;try{return(t=localStorage.getItem(Vt))!=null?t:!1}catch{return!0}},Qt=()=>{try{localStorage.setItem(Vt,!0)}catch(t){console.error(t)}};function Xt({onClick:t}){let e=(0,L.useRef)();(0,L.useEffect)(()=>{Jt()||(e.current.setVisible(!0),Qt())},[]);let o=n=>{e.current=n},r=(0,L.useRef)();return ct(()=>{e.current.setVisible(!1)},r),L.default.createElement(U,{popupRef:o,placement:U.DIRECTION.bottomRight,title:T(Zt.tooltip)},L.default.createElement(y.Box,{ref:r},L.default.createElement(rt,{onClick:t,className:(0,Bt.default)("okds-filter",W.filter)})))}var kt=Xt;s();i();var F=m(_());v();s();i();var R={root:"_root_1g0pb_1",textBox:"_textBox_1g0pb_7",text:"_text_1g0pb_7"};s();i();var q=m(_());function te({onChange:t,reject:e}){let[o,r]=(0,q.useState)(e);return(0,q.useEffect)(()=>{r(e)},[e]),{currentReject:o,onChangeReject:u=>a=>{let l=e,g={...l,[u]:a};r(g),xt(u,a).then(x=>{x?(r(g),t==null||t(g)):r(l)}).catch(()=>{r(l)})}}}var jt=te;var Ht={hideValuelessNftTittle:"wallet_extension_history_toggle_block_risky",hideValuelessNftSubtitle:"wallet_extension_history_toggle_risky_invalid_only"},ee=t=>{let{currentReject:e,onChangeReject:o}=jt(t);return F.default.createElement(y.Box,{className:R.root},F.default.createElement(y.Box,{className:R.textBox},F.default.createElement(w.Text,{warp:!0,strong:!0,size:w.SIZE.md,className:R.text},T(Ht.hideValuelessNftTittle)),F.default.createElement(w.Text,{warp:!0,size:w.SIZE.xs,className:R.text,type:w.TYPE.secondary},T(Ht.hideValuelessNftSubtitle))),F.default.createElement(nt,{onChange:o(V.hideValuelessNft),checked:e==null?void 0:e[V.hideValuelessNft]}))},Ot=ee;s();i();var b=m(_()),Rt=m(E());function oe(){let t=(0,Rt.useDispatch)(),[e,o]=(0,b.useState)({[V.hideValuelessNft]:!1}),[r,n]=(0,b.useState)(!1),u=()=>$().then(x=>{o(x)}).catch(()=>{});(0,b.useEffect)(()=>{u()},[]);let a=()=>{n(!0)},l=()=>{n(!1)};return{reject:e,onChangeShowValueLess:x=>{o(x),t(H({})),setTimeout(()=>{l()},200)},openDialog:a,closeDialog:l,showRejectDialog:r}}var bt=oe;function re(){let{reject:t,onChangeShowValueLess:e,openDialog:o,closeDialog:r,showRejectDialog:n}=bt();return M.default.createElement(y.Box,{className:W.root},M.default.createElement(kt,{onClick:o}),M.default.createElement(st,{title:T("wallet_extension_history_title_filter"),visible:n,onClose:r,onCancel:r,alignBottom:!0,noMargin:!0},M.default.createElement(Ot,{onChange:e,reject:t})))}var Mt=re;s();i();var S="2009-01-12";var Pt=t=>{if(typeof t=="object"&&t instanceof Date){let e=t.getFullYear(),o=t.getMonth()+1,r=t.getDate();return o<10&&(o=`0${o}`),r<10&&(r=`0${r}`),`${e}-${o}-${r}`}return t},se=(t,e)=>new Date(t)<=new Date(e);function ie(){let t=(0,I.useDispatch)(),e=(0,I.useSelector)(k);return h.default.createElement(wt,{align:it.DIRECTION.left,value:e.mainCoinId,onChange:o=>{t(H({mainCoinId:o}))}})}function ne(){let t=(0,I.useDispatch)(),e=(0,I.useSelector)(k),[o,r]=h.default.useState(!1),n=h.default.useRef(o),u=A(e.mainCoinId),a=(u==null?void 0:u.supportFullHistory)||e.mainCoinId==="";return(0,h.useEffect)(()=>{a&&t(j({dates:[S,e.dates[1]]}))},[]),(0,h.useEffect)(()=>{var x,p;let l=Pt(e.dates[0]),g=Pt(ot.subtract(3,"M"));!a&&n.current&&se(l,g)&&t(j({dates:[(p=(x=ht())==null?void 0:x.stringDates)==null?void 0:p[0],e.dates[1]]})),a&&!n.current&&l===g&&t(j({dates:[S,e.dates[1]]})),a?(r(S),n.current=S):(r(""),n.current=!1)},[a,e.mainCoinId]),h.default.createElement(O.DateRangeSelection,{dates:e.dates,mainCoinId:e.mainCoinId,customMinDate:o,setDate:l=>{t(j({dates:l}))},onChange:l=>{t(H({dates:l}))}})}function le(){return h.default.createElement(y.Box,{className:X.root},h.default.createElement(y.Box,{className:X.left},h.default.createElement(ie,null),h.default.createElement(ne,null)),h.default.createElement(Mt,null))}var vt=le;s();i();var ae=()=>{let t=at(),e=(0,At.useHistory)(),o=(0,z.useDispatch)(),r=(0,z.useSelector)(Y),[n,u]=(0,f.useState)(!0),a=A(r.mainCoinId),l=(a==null?void 0:a.supportFullHistory)||r.mainCoinId==="";return(0,f.useEffect)(()=>{let x=[(async()=>{var C,N;let p=(C=await $())!=null?C:{};return await dt({...r,startDate:l?new Date(`${S} 00:00:00`).getTime():r.startDate,hideValuelessNft:(N=p==null?void 0:p.hideValuelessNft)!=null?N:!0,status:[B.PENDING,B.CONFIRMING,B.ERROR,B.SUCCESS]})})()];Promise.all(x).then(([p])=>{let P=(tt,$t)=>{var et;let Yt=tt.length,Kt=$t?(et=tt[Yt-1])==null?void 0:et.rowId:"";o(Lt(Kt)),o(J(!1))},C=p.content||[],N=p.hasViewMore;o(Z(C)),P(C,N)}).catch(()=>{o(Z([])),o(J(!1))}).finally(()=>{u(!1)})},[]),f.default.createElement(O.PageContainer,{className:"tx-history__container"},f.default.createElement(pt,{sticky:!1,className:"tx-history__navigator",title:t("wallet_extension_header_text_history"),onBack:()=>{e.goBack(),o(K())},closeable:!1,bordered:!1}),n?f.default.createElement(ft,null):f.default.createElement(f.default.Fragment,null,f.default.createElement(O.FilterContainer,null,f.default.createElement(vt,null)),f.default.createElement(Et,null)),f.default.createElement(It,null))},mr=(0,f.memo)(ae);export{mr as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=WalletHistory-NBRRGM3J.js.map
