import{b as N}from"./chunk-PCY622ND.js";import{b as R}from"./chunk-EXUJ54CX.js";import{f as _}from"./chunk-DMJQUOJT.js";import{b as O}from"./chunk-VPBQLZCI.js";import{b as y}from"./chunk-6ZPGW3YM.js";import{a as h}from"./chunk-YMZEQGAL.js";import{Ab as E,C as g,D as w,Vb as $,r as m,yb as D,zb as C}from"./chunk-CVJKAN5R.js";import{a as S}from"./chunk-V4YVDLI4.js";import{f,m as a,o as d}from"./chunk-6V2G2Z5W.js";a();d();var u={UNAPPROVED:"unapproved",APPROVED:"approved",REJECTED:"rejected",SIGNED:"signed",SUBMITTED:"submitted",FAILED:"failed",DROPPED:"dropped",SUCCEED:"succeed",PENDING:"pending"},i={TRANS_OUT:1,AUTHORIZATION:2,CONTRACT_CALL:3,CANCEL_AUTHORIZATION:4,CONTRACT_DEPLOY:5},b={[i.TRANS_OUT]:"wallet_extension_history_list_send",[i.CONTRACT_CALL]:"wallet_extension_history_list_contract_interaction",[i.AUTHORIZATION]:"wallet_extension_history_list_approval",[i.CANCEL_AUTHORIZATION]:"wallet_extension_history_list_revoke_approval",[i.CONTRACT_DEPLOY]:"developer_mode_history_title_contract_eployment"};a();d();var l=f(S()),T=f(y());var c=f(w());g();$();function H(){return(0,T.useSelector)(t=>t.metamask.rpcEvmTransactions||{},T.shallowEqual)}function A(t){let n=H(),s=N(),r=(0,T.useSelector)(_)||{};return(0,l.useMemo)(()=>Object.values(n).filter(o=>{if(!o.txParams)return!1;let{from:e,chainId:p}=o.txParams;return s===e&&p===r.chainId&&t(o)}),[n,s,r.chainId])}function Q(){return A(t=>t.status===u.FAILED||t.status===u.SUCCEED)}function U(t){let[n,s]=t,r=+n,o=+m.add(1,"d",new Date(s));return e=>E(e,r)&&D(e,o)}function I(t={}){let{dates:n}=t,s=A(r=>r.status===u.FAILED||r.status===u.SUCCEED||r.status===u.DROPPED);return(0,l.useMemo)(()=>{let r=s;if(n){let o=U(n);r=r.filter(({finishTime:e})=>o(e))}return r.sort((o,e)=>e.finishTime-o.finishTime).map(o=>({...o,isShowPending:!1}))},[s,n])}function x(t={}){let n=A(r=>r.status===u.PENDING),{dates:s}=t;return(0,l.useMemo)(()=>{let r=(0,c.sortBy)(n,[o=>R(o.txParams.nonce)]).map((o,e)=>({...o,isShowPending:e===0}));if(s){let o=U(s);r=r.filter(({sendTime:e})=>o(e))}return r},[n,s])}function P(){let t=x(),n=I();return(0,l.useMemo)(()=>[...t,...n],[t,n])}function X(t){let n=P();return(0,l.useMemo)(()=>t?n.find(({id:s})=>t===s):null,[t,n])}function tt({tokenAddress:t}){let n=x(),s=I();return(0,l.useMemo)(()=>[...n,...s].filter(({type:r,txParams:o,extraParams:e})=>{if(r===i.TRANS_OUT)return!t&&!(e!=null&&e.tokenAddress)||(0,c.toLower)(t)===(0,c.toLower)(e==null?void 0:e.tokenAddress);if(r===i.AUTHORIZATION||r===i.CANCEL_AUTHORIZATION)return(0,c.toLower)(t)===(0,c.toLower)(e==null?void 0:e.tokenAddress);if(r===i.CONTRACT_CALL){let{value:p}=o||{};return!t&&C(h(p),0)}return!1}),[n,s,t])}var Z=(t,n,s)=>{let{protocol:r,host:o,pathname:e,search:p,hash:L}=new URL(t),v=e.endsWith("/")?`${e}${n}/${s}`:`${e}/${n}/${s}`;return new URL(`${r}//${o}${v}${p}${L}`).toString()};function et(){let t=(0,T.useSelector)(_);return O(n=>t!=null&&t.explorerUrl?Z(t==null?void 0:t.explorerUrl,"tx",n):null)}export{u as a,i as b,b as c,Q as d,I as e,x as f,P as g,X as h,tt as i,Z as j,et as k};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-NNLKCRJB.js.map
