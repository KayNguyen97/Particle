import{a as wt}from"./chunk-F5GFJNKO.js";import{a as Ft}from"./chunk-TQFQVAHK.js";import"./chunk-3IHK32RH.js";import{a as Et}from"./chunk-TYILG3ER.js";import{a as V}from"./chunk-PLVZLQPX.js";import"./chunk-FEET7RP6.js";import"./chunk-MBJ4MFYL.js";import"./chunk-PCY622ND.js";import"./chunk-NS35PZCP.js";import"./chunk-XOD56IFT.js";import"./chunk-BBN3UGKM.js";import"./chunk-QMNAWRVI.js";import"./chunk-D6ZXZUY6.js";import"./chunk-QMF5LKVF.js";import"./chunk-VMACN7YR.js";import{a as Ct,b as at}from"./chunk-D5VZXMFP.js";import"./chunk-XAMN4IIH.js";import"./chunk-2HWABU7H.js";import"./chunk-APEQZGKB.js";import"./chunk-DUHXKIBS.js";import"./chunk-QNEJI55N.js";import"./chunk-5W7SRP5N.js";import"./chunk-YVRXETFX.js";import"./chunk-B2BOSVTW.js";import"./chunk-GUJXW3GJ.js";import"./chunk-VIS7KIVI.js";import"./chunk-F64VYES3.js";import"./chunk-DHX2X277.js";import"./chunk-OZ6XSJY6.js";import"./chunk-DMJQUOJT.js";import"./chunk-NKTQMEXG.js";import"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import"./chunk-4OTZHHYZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import"./chunk-S3ECGMEP.js";import"./chunk-PX7HII6H.js";import"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import"./chunk-TPEASXIF.js";import{a as At}from"./chunk-JSAFBAMQ.js";import"./chunk-A336VZZF.js";import"./chunk-XEOGXIVD.js";import{a as St}from"./chunk-PCGRDRHF.js";import"./chunk-IU3TYIWS.js";import{o as vt,q as j}from"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import"./chunk-X2LENRE7.js";import{G as Tt,a as It,k as xt,l as bt}from"./chunk-O4EDZSHP.js";import"./chunk-HU3KBV5G.js";import"./chunk-6ZPGW3YM.js";import"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import"./chunk-FLCN6MAI.js";import"./chunk-7E3KY4EN.js";import"./chunk-JIRWXBHS.js";import"./chunk-3TVEFIPW.js";import"./chunk-UXFKODVN.js";import"./chunk-IMRS4RGO.js";import"./chunk-52GWQSZH.js";import{a as nt}from"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import"./chunk-RMQJRDTF.js";import{c as yt}from"./chunk-2YLR7R2N.js";import"./chunk-MVLY6WUP.js";import"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{C as B,H as _t,Ha as w,Ja as gt,Pa as K,da as ft,ma as ht,mb as q,pb as rt,rb as et,v as n}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{B as Q,H as $,q as v,r as pt}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{J as Z,P as dt,V as k,c as Yt}from"./chunk-C2H3SRET.js";import{a as F}from"./chunk-V4YVDLI4.js";import"./chunk-UXBKFN2U.js";import"./chunk-HCW4K7TR.js";import"./chunk-Z4JATHZR.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import"./chunk-IYYFWVWL.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import"./chunk-RYNAOZ73.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f as C,m as i,o as s}from"./chunk-6V2G2Z5W.js";i();s();var a=C(F()),qt=C(nt());B();i();s();et();K();var it={[w]:{title:"wallet_extension_create_input_title_contract_token_symbol",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"},[q]:{title:"extension_wallet_customcoin_text_currency_symbol",error:"extension_wallet_customcoin_errortip_crypto_notfound",placeholderName:"extension_defi_placeholder_enter_token_name",placeholderId:"extension_defi_placeholder_enter_token_id",placeholder:"extension_defi_placeholder_enter_token_id_name"},[gt]:{title:"extension_wallet_cardano_text_fingerprint",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"},default:{title:"wallet_transaction_history_subtitle_contract_address",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"}};i();s();var P=C(F()),J=C(nt());B();var Pt=C(Yt());var Zt=(t,o)=>{let r=t==="protocol"?bt:xt;if(o){let e=new URLSearchParams(o).toString();return`${r}?${e}`}return r},Qt=({selectedInfo:t,category:o})=>{let r=(0,J.useHistory)(),e=(0,J.useLocation)(),_=new URLSearchParams(e.search);return P.default.createElement("div",{className:"chain-select",onClick:()=>{let u={...Object.fromEntries(_.entries()),pageType:"customCrypto"};r.push(Zt(o,u))}},P.default.createElement("div",{className:"chain-select-title"},o==="protocol"?n("extension_defi_info_title_protocol"):n("wallet_custom_crypto_subtitle_select_network")),P.default.createElement("div",{className:"chain-select-box"},o==="protocol"?null:P.default.createElement("img",{className:"chain-select-icon",src:(t==null?void 0:t.imageUrl)||(t==null?void 0:t.logo),alt:"chain"}),P.default.createElement("div",{className:"chain-select-name"},t==null?void 0:t.name),P.default.createElement(Z,{className:(0,Pt.default)("okds-arrow-chevron-right-centered-md","chain-select-arrow")})))},X=Qt;i();s();var st=C(F());var $t=({currentAddress:t,addressInputTitle:o,errorText:r,placeHolderText:e,addressIsInvalid:_,updateCustomCoin:u})=>st.default.createElement("div",{className:"contract-address-box"},st.default.createElement(v.TextArea,{autoResize:!0,value:t,title:o,size:v.SIZE.xl,error:_&&r,errorType:v.TIP_TYPE.always,placeholder:e,onChange:f=>{u(f.target.value)}})),Ot=$t;i();s();var S=C(F());B();K();var Kt=({customCoin:t})=>{let o=(r,e)=>t.localType===_t?null:S.default.createElement("div",{className:"crypto-base-info"},S.default.createElement("div",{className:"crypto-base-info-title"},r),S.default.createElement("input",{disabled:!0,className:"crypto-base-info-box",value:e.toString()}));return S.default.createElement(S.default.Fragment,null,(t==null?void 0:t.symbol)&&S.default.createElement(S.default.Fragment,null,o(n("wallet_manage_crypto_subtitle_custom_crpto_symbol"),t.symbol),o(n("wallet_manage_crypto_custom_coin_subtitle_decimals"),t.decimals)))},Mt=Kt;i();s();B();et();var Bt=C(nt());i();s();function jt(t,o){if(t.key&&o.key)return t.key===o.key;if(t.coinId&&o.coinId)return t.coinId===o.coinId;let r=t.address||t.contractAddress,e=o.address||o.contractAddress;return r&&e?r.toLowerCase()===e.toLowerCase()&&t.localType===o.localType:!1}function ct(t,o){for(let r=0;r<o.length;r++){let e=o[r];if(jt(e,t)||e.childrenCoin&&ct(t,e.childrenCoin))return!0}return!1}function mt(t,o,r){let e=(0,Bt.useHistory)(),[_,{setTrue:u,setFalse:f}]=vt(),b=Et(),m=Ft(),d=async y=>{o.coinId===rt&&await m({...t,baseCoinId:rt,address:t.contractAddress},async()=>{y||await at(t)},f)},{run:c}=j(async()=>{u();let y=ct(t,b);if(await d(y),y){$.error(n("wallet_manage_crypto_errortip_crypto_added")),f();return}try{await at({...t,protocolId:r}),$.success(n("wallet_manage_crypto_toast_custom_crypto_success")),e.push(It)}catch{$.error(n("wallet_extenshion_toast_add_failed"))}finally{f()}},{wait:100});return{isSubmitting:_,submitAction:c}}i();s();var A=C(F());K();var Vt=(t,o,r,e,_,u)=>{let[f,b]=(0,A.useState)({}),[m,d]=(0,A.useState)(!1),[c,y]=(0,A.useState)(""),[h,p]=(0,A.useState)(!0),[D,l]=(0,A.useState)(""),[T,E]=(0,A.useState)(!1),[H,z]=(0,A.useState)(!1),R=I=>`facet_${I}`,{run:tt}=j(async({addr:I,accountName:N,protocolId:ot})=>{var W,L,G;z(!1);let g;try{g=await Ct({contractAddress:r?R(I):I,chainInfo:t,account:N,isFacet:r,...(t==null?void 0:t.coinId)===ht?{protocolId:ot}:{}})}catch(M){g={},((G=(L=(W=M==null?void 0:M.data)==null?void 0:W.originalError)==null?void 0:L.data)==null?void 0:G.code)==="ERR_NETWORK"&&z(!0)}if(I===o){if(b(g),t.coinId===w&&!(g!=null&&g.accountValid)){d(!0),y(g.msg),p(!0);return}else if(!D&&(t==null?void 0:t.coinId)===w){E(!1),p(!0);return}d(!1),y(""),I&&(g==null?void 0:g.symbol)?(E(!1),p(!1)):I?(E(!0),p(!0)):(E(!1),p(!0))}},{wait:500});return{customCoin:f,accountIsInvalid:m,accountErrorMessage:c,stateOnLock:h,account:D,addressIsInvalid:T,setAccount:l,updateCustomCoin:()=>{b({}),p(!0),tt({addr:e.current,accountName:_.current,protocolId:u==null?void 0:u.protocolId})},networkError:H}},Ut=Vt;i();s();var O=C(F());B();K();et();i();s();var U=C(F());B();var Jt=({isFacet:t,onToggle:o})=>U.default.createElement("div",{className:"chain-select-isfacet"},U.default.createElement("div",{className:"chain-select-isfacet-left"},U.default.createElement(pt,{checked:t,onChange:r=>{let e=r.target.checked;o(e)}}),n("wallet_extension_manage_text_facet_mode"),U.default.createElement(Q,{title:n("wallet_extension_manage_tooltips_facet_mode"),placement:Q.DIRECTION.top,trigger:Q.TRIGGER.hover},U.default.createElement(Z,{className:"okds-information-circle chain-select-isfacet-icon"})))),Lt=Jt;var Xt=({selectedNetwork:t,account:o,accountIsInvalid:r,accountErrorMessage:e,setAccount:_,updateCustomCoin:u,accountRef:f,setProtocol:b,protocol:m,protocolList:d,isFacet:c,setIsFacet:y})=>{let h=V(),p=Number(h.get("protocolId"));return(0,O.useEffect)(()=>{let l=null;if(t.coinId!==q){b("");return}if(p&&(d==null?void 0:d.length)&&(l=d.find(T=>T.protocolId===p)),!l&&d.length>0&&(l=d[0]),l){let T={...l,name:l.protocolName};b(T)}},[d,t]),{renderCustomForm:()=>(t==null?void 0:t.coinId)===w?O.default.createElement("div",{className:"contract-address-box"},O.default.createElement(v.TextArea,{autoResize:!0,value:o,title:n("wallet_extension_create_input_title_contract_account_name"),size:v.SIZE.xl,error:r&&e,errorType:v.TIP_TYPE.always,placeholder:n("wallet_extension_create_input_title_contract_token_symbol"),onChange:l=>{_(l.target.value),f.current=l.target.value,u()}})):(t==null?void 0:t.coinId)===ft?O.default.createElement(Lt,{isFacet:c,onToggle:l=>{y(l),u()}}):(t==null?void 0:t.coinId)===q&&m?O.default.createElement(X,{selectedInfo:m,category:"protocol"}):null}},kt=Xt;i();s();var Rt="Ethereum",to=()=>{let t=(0,qt.useHistory)(),o=a.default.useRef(""),r=a.default.useRef(""),e=a.default.useRef(""),[_,u]=(0,a.useState)(!1),[f,b]=(0,a.useState)(""),[m,d]=(0,a.useState)(""),[c,y]=(0,a.useState)({imageUrl:"",name:""}),{data:{supportNetworkList:h,protocolList:p}={}}=wt(),l=V().get("network"),{title:T,error:E,placeholder:H,placeholderName:z,placeholderId:R}=it[c==null?void 0:c.coinId]||it.default,tt=(0,a.useMemo)(()=>n(T),[T]),lt=(0,a.useMemo)(()=>(c==null?void 0:c.coinId)===1&&(m==null?void 0:m.searchType)?m.searchType===1?n(z):n(R):n(H),[H,m]),{customCoin:I,accountIsInvalid:N,accountErrorMessage:ot,stateOnLock:g,account:W,addressIsInvalid:L,setAccount:G,updateCustomCoin:M,networkError:ut}=Ut(c,f,_,e,o,m),Dt=(0,a.useMemo)(()=>ut?n("developer_mode_manage_errortip_network_error"):n(E),[E,ut]),{renderCustomForm:Ht}=kt({selectedNetwork:c,account:W,accountIsInvalid:N,accountErrorMessage:ot,setAccount:G,updateCustomCoin:M,accountRef:o,protocolRef:r,setProtocol:d,protocol:m,protocolList:p,isFacet:_,setIsFacet:u}),{isSubmitting:zt,submitAction:Nt}=mt(I,c,m.protocolId);return(0,a.useEffect)(()=>{async function Y(){if(h.length>0){let Wt=l||Rt;y(h.filter(Gt=>Gt.name===Wt)[0]||h[0])}}Y()},[h]),a.default.createElement("div",{className:"custom-crypto-page main-container"},a.default.createElement(At,{title:n("wallet_manage_crypto_maintitle_custom_crypto"),onBack:()=>{t.push(Tt)}}),a.default.createElement(yt.Spin,{loading:!(h!=null&&h.length)||!(p!=null&&p.length),size:dt.SIZE.lg},a.default.createElement("div",{className:"custom-crypto--body"},a.default.createElement(X,{selectedInfo:c}),Ht(),a.default.createElement(Ot,{updateCustomCoin:Y=>{e.current=Y,b(Y),M()},currentAddress:f,addressInputTitle:tt,errorText:Dt,placeHolderText:lt,addressIsInvalid:L}),a.default.createElement(Mt,{customCoin:I})),a.default.createElement(St.FooterActions,null,a.default.createElement(k,{onClick:Nt,size:k.SIZE.lg,type:k.TYPE.highlight,category:k.CATEGORY.fill,loading:zt,disabled:L||g||N},n("wallet_set_password_btn_confirm")))))},Sr=to;export{Sr as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=CustomCrypto-QEPK35U2.js.map
