import{a as Lr,b as vr,c as Rr,d as Br,e as Te,f as Pr,g as Hr,h as Vr,i as Rt}from"./chunk-CL2DMDLG.js";import"./chunk-OG2MGBYR.js";import"./chunk-6AXJCAVF.js";import"./chunk-5ZZIKR7L.js";import"./chunk-YOZOX6GO.js";import"./chunk-S4WP5LDP.js";import{a as Fr}from"./chunk-U3UPRMNJ.js";import"./chunk-DTVL7EQX.js";import{a as Gr,b as Ur,c as Kr,d as Jr,e as Qr}from"./chunk-IQSILUGK.js";import{a as he,b as Ar,c as Ne,d as $r}from"./chunk-DCZKBMNP.js";import{a as Sr}from"./chunk-CPWFRAFM.js";import"./chunk-UXA3OASR.js";import"./chunk-LEU7ZZNB.js";import{a as en,c as on,d as rn}from"./chunk-F3PODZED.js";import{a as Ie}from"./chunk-CFYC6Z35.js";import{a as Dr}from"./chunk-UOE3CUM7.js";import{a as nn,b as sn}from"./chunk-2LZ7PSBI.js";import{a as Xr}from"./chunk-S2GTSTCF.js";import{a as tn}from"./chunk-AJZPYKQF.js";import{a as jr,b as qr}from"./chunk-E6NTQWKX.js";import"./chunk-A5VEFKCJ.js";import{a as Or}from"./chunk-P552UEY3.js";import{a as Zr}from"./chunk-TQFQVAHK.js";import{a as Yr}from"./chunk-3IHK32RH.js";import"./chunk-33SB5WSN.js";import"./chunk-GDJJKMDU.js";import"./chunk-IWWNTYBF.js";import{a as Mr}from"./chunk-S6BDCAXK.js";import"./chunk-R4VMIVHR.js";import{a as Wr}from"./chunk-MJKT3ZH2.js";import"./chunk-HI4AQDIG.js";import"./chunk-WIYPU26K.js";import"./chunk-2N2ADYFP.js";import"./chunk-HG2HGCVV.js";import"./chunk-X2HBIQ56.js";import"./chunk-TYILG3ER.js";import"./chunk-YLO74Q7W.js";import"./chunk-D54UDGZS.js";import"./chunk-2SGW2RXR.js";import"./chunk-ZXEHJOAD.js";import"./chunk-U3YDJ2W7.js";import{a as ur}from"./chunk-VCWU5FEX.js";import"./chunk-KZ77CGYD.js";import{b as wr}from"./chunk-4CQUZEFM.js";import{a as Nt}from"./chunk-YM6UXGIC.js";import{a as _e}from"./chunk-7CB4COOY.js";import"./chunk-RDZIVMHO.js";import{a as cr}from"./chunk-E73QHIZ6.js";import"./chunk-E2KMZQ6K.js";import"./chunk-JXT6JCNO.js";import{a as ge}from"./chunk-AHAXQBXQ.js";import"./chunk-54GDJWA6.js";import"./chunk-UGYRJNZG.js";import"./chunk-FEET7RP6.js";import{a as pr}from"./chunk-MBJ4MFYL.js";import"./chunk-PCY622ND.js";import"./chunk-NS35PZCP.js";import{a as ir}from"./chunk-XOD56IFT.js";import{d as mr}from"./chunk-BBN3UGKM.js";import{a as ar,c as lr}from"./chunk-5DEIKYJL.js";import{g as nr}from"./chunk-QMNAWRVI.js";import"./chunk-D6ZXZUY6.js";import"./chunk-QMF5LKVF.js";import"./chunk-VMACN7YR.js";import{a as pe}from"./chunk-PD2BTUUF.js";import"./chunk-YCMOAOGN.js";import{b as zr}from"./chunk-E6QSM6KZ.js";import{l as ye}from"./chunk-7CGGT32T.js";import"./chunk-6L6L7B7D.js";import"./chunk-UVKTLEHJ.js";import"./chunk-3FXJS34C.js";import"./chunk-DCUBXXOY.js";import"./chunk-3QK7FEQ5.js";import{a as or}from"./chunk-QLH3KLV3.js";import"./chunk-P4XRBDXP.js";import{c as vt}from"./chunk-573GFXXJ.js";import{g as tr,k as er}from"./chunk-2HWABU7H.js";import"./chunk-APEQZGKB.js";import{k as wo}from"./chunk-P2BTSOJO.js";import{b as _r,d as ct,e as gr,g as hr,h as Tr,i as Nr,j as yr,k as Ir,l as xr,m as St,o as Er,p as kr,q as br,r as Cr}from"./chunk-3T5SDSKD.js";import"./chunk-2NIR645O.js";import{b as mt}from"./chunk-SI3RW2CS.js";import"./chunk-AX4SXHC6.js";import{j as dr,n as fr}from"./chunk-GUWGENNL.js";import"./chunk-WYB2CUAN.js";import{c as Wo}from"./chunk-B2BOSVTW.js";import"./chunk-GUJXW3GJ.js";import{g as Do}from"./chunk-VIS7KIVI.js";import"./chunk-DHX2X277.js";import{b as eo}from"./chunk-67YO4IPY.js";import"./chunk-DLUAVD7X.js";import"./chunk-WRWXCAEZ.js";import"./chunk-OZ6XSJY6.js";import"./chunk-DMJQUOJT.js";import{w as sr}from"./chunk-MTMZQEHP.js";import"./chunk-NKTQMEXG.js";import{f as Jo,h as S,i as Ot,k as Qo}from"./chunk-62JDSRZZ.js";import"./chunk-FF7XOOGZ.js";import{d as $o}from"./chunk-4OTZHHYZ.js";import"./chunk-HQT4AKFZ.js";import"./chunk-JUIB44FD.js";import{M as Oo,P as So,U as Ro,Z as Bo,da as me}from"./chunk-R6GCLTW2.js";import"./chunk-4KY5XQ5E.js";import"./chunk-S3ECGMEP.js";import"./chunk-PX7HII6H.js";import{F as ae,y as Xe}from"./chunk-UEO7AURD.js";import"./chunk-DXFO7P35.js";import{b as te}from"./chunk-ODS2CEAN.js";import{a as Vo}from"./chunk-TPEASXIF.js";import"./chunk-A336VZZF.js";import{b as tt}from"./chunk-XEOGXIVD.js";import{a as rr}from"./chunk-PCGRDRHF.js";import{k as vo,p as U}from"./chunk-IU3TYIWS.js";import{b as fe,j as qo,l as ue,q as zo,u as Zo,x as Xo}from"./chunk-VPBQLZCI.js";import"./chunk-ERLETJMZ.js";import"./chunk-FRDOFRM7.js";import{p as Ao,u as Lo,v as Fo}from"./chunk-X2LENRE7.js";import{G as Qe,X as to,Ya as Yo,aa as Ko,bb as jo,e as Jt,i as Go,la as de,u as Qt,v as Uo}from"./chunk-O4EDZSHP.js";import{k as q}from"./chunk-HU3KBV5G.js";import{b as P}from"./chunk-6ZPGW3YM.js";import{d as Ho,o as di}from"./chunk-ZKDHZDUE.js";import"./chunk-4UESFVD2.js";import"./chunk-D7KW4FFX.js";import"./chunk-RAXGEVRQ.js";import{d as B,f as Ft}from"./chunk-S4N75E3H.js";import"./chunk-7MX3OHNE.js";import"./chunk-2BSLA752.js";import{g as ce}from"./chunk-FLCN6MAI.js";import"./chunk-YMZEQGAL.js";import"./chunk-7E3KY4EN.js";import{k as Je}from"./chunk-JIRWXBHS.js";import"./chunk-3TVEFIPW.js";import"./chunk-UXFKODVN.js";import{a as Po,e as Mo}from"./chunk-IMRS4RGO.js";import"./chunk-52GWQSZH.js";import{a as lt}from"./chunk-TPSXCUGD.js";import"./chunk-XKG5DY6K.js";import"./chunk-6PGLMYAE.js";import{h as le}from"./chunk-RMQJRDTF.js";import{c as g}from"./chunk-2YLR7R2N.js";import{a as M,b as Tt}from"./chunk-MVLY6WUP.js";import{c as ie,f as j,h as ht}from"./chunk-ZEAKIEIQ.js";import"./chunk-5KSDRGLW.js";import"./chunk-DQTCC3FF.js";import"./chunk-O5LVHMPV.js";import{$ as Io,C as H,D as ho,F as Yt,H as gt,N as yo,Pa as bt,Ra as jt,Ta as qt,Ua as zt,Vb as mi,Xb as bo,a as _o,ab as Zt,b as ai,cb as Xt,ec as ci,hc as Co,ma as xo,mb as Eo,nc as pi,q as go,rb as Ze,sb as ko,v as h}from"./chunk-CVJKAN5R.js";import"./chunk-A5Y2KVNP.js";import{B as Ut,E as Lt,G as rt,H as ze,K as kt,M as Kt,b as xt,d as To,h as qe,m as No,o as Et,p as se,y as R}from"./chunk-GXQ645QR.js";import"./chunk-DQ2NYVYI.js";import{J as G,P as Q,V as O,c as Gt}from"./chunk-C2H3SRET.js";import{a as I,f as li}from"./chunk-V4YVDLI4.js";import"./chunk-TW6D7CWA.js";import"./chunk-3T5D6KAV.js";import"./chunk-MAWXDEJZ.js";import"./chunk-Z37GURZ6.js";import"./chunk-IYYFWVWL.js";import"./chunk-CLSYGH6A.js";import"./chunk-DHRSDA7N.js";import"./chunk-RYNAOZ73.js";import"./chunk-PR4SLUV4.js";import"./chunk-Q34CQJXG.js";import"./chunk-GKHVFCKF.js";import{f,m as e,o}from"./chunk-6V2G2Z5W.js";e();o();var k=f(I());H();var Gs=f(lt()),Dt=f(P());ci();pi();di();e();o();var Bt=f(I());H();e();o();var xe={root:"_root_h6iyb_1",animation:"_animation_h6iyb_14",text:"_text_h6iyb_17"};var fi=()=>{let[t,s]=(0,Bt.useState)(!1),r=ce({dark:"/static/images/dapp/connected-success-dark.json",light:"/static/images/dapp/connected-success-light.json"});return Bt.default.createElement("div",{className:xe.root},Bt.default.createElement(To,{className:xe.animation,path:r,loop:!1,onDataReady:()=>{s(!0)}}),t?Bt.default.createElement("span",{className:xe.text},h("wallet_home_foot_dapp_connceted")):null)},an=fi;e();o();var z=f(I());Ft();var dn=f(P());e();o();var oo=(r=>(r.ERR_NETWORK="ERR_NETWORK",r.ERR_SERVER_LIMIT="ERR_SERVER_LIMIT",r))(oo||{});e();o();var ln=f(I());ai();var mn=()=>(0,ln.useCallback)(t=>{try{let s=t===A.CREATE_FAIL_FROM_SERVER_ERROR?"Server":"Local";_o.captureException(`CreateWalletToServerInHomePage-${s}`)}catch(s){console.log(s)}},[]);e();o();Ft();Tt();ht();var Ee=f(I()),cn=f(P()),pn=()=>{let t=Jo({keyringType:le.MPC}),{isNeedSyncMpcIndex:s}=(0,cn.useSelector)(n=>n==null?void 0:n.metamask),r=(0,Ee.useCallback)(async()=>{Promise.all(t.map(n=>{var a;let i=(n==null?void 0:n.mpcId)||"",l=((a=n==null?void 0:n.walletIdentities)==null?void 0:a.length)-1;return j(M.syncMpcwallet,{mpcId:i,deriveIndex:l})})).then(n=>{B().setIsNeedSyncMpcIndex(!1)}).catch(n=>{console.log("syncMpcWallet error:")})},[t==null?void 0:t.length]);(0,Ee.useEffect)(()=>{(t==null?void 0:t.length)&&s&&r()},[t==null?void 0:t.length,r,s])};var fn=(i=>(i.CREATE_FAIL_FROM_NETWORK_ERROR="CREATE_FAIL_FROM_NETWORK_ERROR",i.CREATE_FAIL_FROM_SERVER_ERROR="CREATE_FAIL_FROM_SERVER_ERROR",i.CREATE_FAIL_FROM_SERVER_LIMIT="CREATE_FAIL_FROM_SERVER_LIMIT",i.PENDING="PENDING",i))(fn||{}),A={...fn,...oo},un=()=>{let t=S();pn();let{needSyncMap:s={},createdMap:r={}}=(0,dn.useSelector)(({metamask:x})=>x),n=Boolean(r[t]),i=Boolean(s[t]),l=mn(),a=Or(),[c,p]=(0,z.useState)(!n||i||a?A.PENDING:""),[u,m]=(0,z.useState)(""),_=(0,z.useCallback)(async()=>{try{await Vo({isAllWallets:!1})}catch(x){p(x==null?void 0:x.message);return}p("")},[]),T=(0,z.useCallback)(async()=>{let x=await B().getWalletTypeCreated(t);p(A.PENDING);try{await B().createWalletToServer({walletId:t,walletType:x,noticeBackend:!0})}catch(N){switch(N==null?void 0:N.message){case"ERR_NETWORK":p(A.CREATE_FAIL_FROM_NETWORK_ERROR),l();break;case"ERR_SERVER_LIMIT":p(A.CREATE_FAIL_FROM_SERVER_LIMIT),l(A.CREATE_FAIL_FROM_SERVER_LIMIT);break;default:p(A.CREATE_FAIL_FROM_SERVER_ERROR),m(N==null?void 0:N.message);break}}},[l,t]),E=(0,z.useCallback)(async()=>{try{await B().syncWalletToServer(t)}catch{console.log("sync wallet error")}},[t]),y=(0,z.useCallback)(async()=>{n?i&&await E():await T()},[T,n,i,E]);return(0,z.useEffect)(()=>{(async()=>n&&!i&&(await _(),await B().getAccountKeys()))()},[_,n,i]),(0,z.useEffect)(()=>{y()},[y]),(0,z.useEffect)(()=>{!a&&n&&!i&&p("")},[a,n,i]),[{errorType:c,errorMsg:u},{createWalletToServer:T}]};e();o();e();o();var ke="home-page-root-element-id";e();o();var pt=f(I());var gn=f(lt());var ee=f(P());bt();e();o();var _n=[{text:"wallet_home_btn_send",icon:"okx-wallet-plugin-up",type:"SEND"},{text:"wallet_home_btn_receive",icon:"okx-wallet-plugin-down",type:"RECEIVE"},{text:"wallet_extension_homepage_feature_name_swap",icon:"okx-wallet-plugin-swap-2",type:"DEX",disabledText:""},{text:"wallet_extension_header_text_history",icon:"okx-wallet-plugin-history-1",type:"HISTORY"},{text:"wallet_extension_home_text_toolkit",icon:"okx-wallet-plugin-toolkit",type:"MORE"}];var hn=()=>{let t=(0,ee.useSelector)(me),s=he(),r=(0,gn.useHistory)(),n=(0,ee.useDispatch)(),i=Mr(),l=lr({networkId:i!=null&&i.id?String(i==null?void 0:i.id):void 0}),a=l==null?void 0:l.coinId,{baseCoin:c={}}=cr(a,!0),p=Ur(c,"",Gr.home),u=(0,ee.useSelector)(Ro),m=(0,pt.useMemo)(()=>{let{initialType:v,accountMap:V}=u;if(Po(v)){let J=Object.keys(V);return![gt,Yt].some(it=>J.includes(it))}return!1},[u]),_=(0,pt.useCallback)(()=>{t?s():r.push(`${to}?type=${Je.RECEIVE}`)},[r,t,s]),T=(0,pt.useCallback)(()=>{c!=null&&c.coinId&&n(ye({mainCoinId:c==null?void 0:c.coinId})),r.push(de)},[c==null?void 0:c.coinId,n,r]),{hasNewFeature:E}=Br(),y=(0,pt.useCallback)(()=>{r.push(Go)},[r]),x=(0,pt.useCallback)(()=>{r.push(`${to}?type=${Je.SEND}`)},[r]),N=Te(ae),b=(0,pt.useCallback)(v=>{switch(v.type){case"SEND":{N({homepage:"send"}),x();break}case"RECEIVE":{N({homepage:"receive"}),_();break}case"DEX":{N({homepage:"trade"}),p();break}case"HISTORY":{N({homepage:"history"}),T();break}case"DAPP_CONNECT":{y();break}default:break}},[_,p,T,y,x]),et=(0,pt.useMemo)(()=>_n.map(v=>v.type==="DEX"?{...v,disabled:m}:v.type==="MORE"?{...v,hasNewFeature:E}:v),[m,E]);return{clickHandle:b,iconOptions:et}};e();o();var Nn=f(P()),be=f(I());bt();e();o();var Tn=f(ho());function ro(){let t=Ot(),s=t.account.mainnet,r=(0,Tn.uniq)(Object.values(t.account));return s&&t.keyringIdentityType===le.PRIVATE_KEY&&r.length===1&&r[0]===s}var yn=()=>{var u,m,_;let t=Ot(),s=ro(),{currentNetworkUniqueId:r}=Nt(),{addresses:n=[],hotAddresses:i=[]}=(0,Nn.useSelector)(Wo),l=(0,be.useCallback)(T=>s?T.chainId===Number(Io):r===""?!0:T.chainId===Number(r),[r,s]),{filterAddress:a,filterHotAddress:c}=(0,be.useMemo)(()=>({filterAddress:n.filter(l),filterHotAddress:i.filter(l)}),[n,l,i]),p=a.length===1;return{filterAddress:a,filterHotAddress:c,address:p?(u=a[0])==null?void 0:u.address:"",chainName:p?(m=a[0])==null?void 0:m.chainName:"",titleLeft:t==null?void 0:t.keyringName,titleRight:p?t==null?void 0:t.walletName:"",subTitle:p?Ao((_=a[0])==null?void 0:_.address):t==null?void 0:t.walletName,isEVMPKAccount:s}};e();o();var ut=f(I()),gs=f(P());e();o();var Ct=f(I());H();var we=f(P());e();o();var Ce={homeTabs:"_homeTabs_o2bwr_1",homeTab:"_homeTab_o2bwr_1",active:"_active_o2bwr_13"};var In=({aptosNftOffers:t})=>{let s=(0,we.useSelector)(St),r=(0,we.useDispatch)(),n=Te(ae),i=(0,Ct.useMemo)(()=>[h("wallet_extension_nft_tab_coins"),Ct.default.createElement("div",null,h("wallet_extension_nft_tab_nfts"),t.length>0&&Ct.default.createElement("span",{className:"new-home-nft-aptos-notify"})),h("wallet_extension_tab_defi")],[t]);return Ct.default.createElement(Kt,{noLine:!0,className:Ce.homeTabs,activeId:s,size:Kt.SIZE.lg,color:Kt.COLOR.grey,paneSpacing:0,onChange:l=>{let a;switch(l){case 1:a="crypto";break;case 2:a="nfts";break;case 3:a="defi";break;default:break}n({homepage:a}),r(Er.setActiveId({id:l}))}},i.map((l,a)=>Ct.default.createElement(Kt.TabPane,{className:`${Ce.homeTab} ${+s===a+1?Ce.active:""}`,tab:l,key:a,id:a+1})))};e();o();var xn={main:"_main_bbmgq_1"};e();o();var D=f(I());H();var Ln=f(lt());e();o();var Ae=f(P());var En=f(lt());var kn=()=>{let t=Zr(),{currentNetworkUniqueId:s}=(0,Ae.useSelector)($o),r=(0,Ae.useSelector)(nr),n=(0,En.useHistory)(),i=(0,Ae.useSelector)(zr),l=S(),a=i==null?void 0:i[l];return{jumpCoinDetailPage:async p=>{await t(p);let u="";if(p.aggregation)if(s===""&&(a==null?void 0:a[p.symbol]))u=a[p.symbol];else{let m=s!==""?p.childrenCoin.find(E=>E.chainId===Number(s)):null,_=(m==null?void 0:m.coinId)||"",T=te({aggregation:!0,coinSymbol:p.symbol,coinId:_});u=`${Jt}${T}`}else if(Lo(p))if(a!=null&&a[`${p.symbol}-${p.coinId}`])u=a[`${p.symbol}-${p.coinId}`];else{let m=te({btcAggregation:!0,coinSymbol:p.symbol,coinId:p.coinId,addressType:""});u=`${Jt}${m}`}else if(Fo(p))if(a!=null&&a[`${p.symbol}-${p.coinId}`])u=a[`${p.symbol}-${p.coinId}`];else{let m=te({nearAggregation:!0,coinSymbol:p.symbol,coinId:p.coinId,addressType:""});u=`${Jt}${m}`}else{let m=te({coinId:p.coinId});u=`${Jt}${m}`}u&&n.push(u)},coinToCurrencyRate:r}};e();o();var Pt={button:"_button_blxw2_1",showButton:"_showButton_blxw2_5",coinList:"_coinList_blxw2_13",icon:"_icon_blxw2_16",empty:"_empty_blxw2_20"};e();o();var nt=f(I());var wn=f(lt());ht();Tt();bt();H();e();o();var bn={root:"_root_qmbez_1",alert:"_alert_qmbez_4"};function _i(){var m;let[t,s]=(0,nt.useState)(!1),[r,n]=(0,nt.useState)({}),i=(0,wn.useHistory)(),l=pr(Yt),a=vt("dex-across-order-info"),{currentNetworkUniqueId:c}=Nt(),p=ar({localType:Yt})||[],u=Number(c)===((m=p==null?void 0:p[0])==null?void 0:m.realChainId)||c==="";return(0,nt.useEffect)(()=>{(()=>{var T;j(M.postPendingFacetOrder,{userWalletAddresses:l,chainId:((T=p==null?void 0:p[0])==null?void 0:T.realChainId)||1}).then(E=>{var y;if(((y=E.data)==null?void 0:y.length)>0){if(u)s(!0);else{s(!1);return}let x=E.data.filter(N=>Number(N.status)===11&&Number(N.specialOrderType)===3);(x==null?void 0:x.length)>0?(n({orderId:x[0].orderId,toAmount:x[0].toAmount,toTokenSymbol:x[0].toTokenSymbol}),s(!0)):(n(""),s(!1))}else n({}),s(!1)}).catch(E=>{console.log("err",E),n({}),s(!1)})})()},[a,c,u]),t?nt.default.createElement(g.Box,{className:bn.root},nt.default.createElement(xt,{desc:nt.default.createElement("div",null,h("swaptrade_extension_reminder_desc_pending_withdrawal",{token:r==null?void 0:r.toTokenSymbol,amount:r==null?void 0:r.toAmount}),nt.default.createElement(xt.Link,{onClick:_=>{_.preventDefault(),i.push(`${Yo}/${r==null?void 0:r.orderId}`)}},h("swaptrade_extension_cell_btn_confirm_withdrawal"))),type:xt.TYPE.info,onClose:()=>{s(!1)}})):null}var An=_i;var gi=190,no=({scrollTop:t,hiddenAssets:s,backupHeight:r})=>{let n=Xr(),{jumpCoinDetailPage:i,coinToCurrencyRate:l}=kn(),a=Kr(),{fetch:c}=Qr();Yr(c,{cacheKey:Jr,staleTime:1e3*60*10});let p=qr(),u=(0,Ln.useHistory)(),m=(0,D.useMemo)(()=>n.length>8&&t>gi,[n.length,t]),{paddingBottom:_,buttonPaddingBottom:T,absoluteBottom:E}=Rt({isButtonAbsolute:m,backupHeight:r});return n.length===0?D.default.createElement("div",{style:{paddingBottom:_+r}},D.default.createElement(R.State,{className:Pt.empty,type:R.State.TYPE.noRecord,title:h("extension_wallet_home_text_no_added_currencies"),buttonText:h("extension_wallet_home_btn_add_now"),onButtonClick:()=>{u.push(Qe)}})):D.default.createElement("div",null,D.default.createElement("div",{style:{paddingBottom:_},className:Pt.coinList},D.default.createElement(An,null),D.default.createElement(eo,{renderEmpty:!1,dataSource:n,renderItem:y=>{var _t;let{image:x,symbol:N,coinAmount:b,currencyAmount:et,coinId:v}=y,V=p(y),J=(l==null?void 0:l[v])||"0",it=(_t=a==null?void 0:a[v])!=null?_t:void 0;return D.default.createElement(eo.Coin,{icon:x,price:J,pricePercent:it,symbol:N,hidden:s,balance:V?b:void 0,market:V?et:void 0,onClick:async()=>{V&&await i(y)}},!V&&D.default.createElement(jr,{coinId:y==null?void 0:y.coinId}))}})),D.default.createElement("div",{className:`${m?Pt.showButton:""} ${Pt.button}`,style:{bottom:E,paddingBottom:T}},D.default.createElement(O,{circle:!0,category:O.CATEGORY.outline,type:O.TYPE.secondary,size:O.SIZE.md,onClick:()=>{u.push(Qe)}},D.default.createElement(G,{className:`okx-wallet-plugin-edit-wallet ${Pt.icon}`}),h("wallet_home_btn_manage_crypto"))))};e();o();var C=f(I());e();o();var W=f(I());var Jn=f(lt());e();o();var L=f(I());var Oe=f(Gt());e();o();var oe=f(I());var Fn=f(Gt()),hi=({item:t,index:s})=>{let[r,n]=(0,oe.useState)(!1),i=s%2>1?Ut.DIRECTION.top:Ut.DIRECTION.topRight;return oe.default.createElement(Ut,{show:r,title:t.collectionName,trigger:Ut.TRIGGER_TYPES.hover,placement:i},oe.default.createElement("span",{onMouseOver:()=>{let l=t.isIdentification?127:144;document.querySelector(`.ok-nft--collection-name-hidden-${t.id}`).clientWidth>l&&n(!0)},onMouseLeave:()=>{n(!1)},className:(0,Fn.default)("ok-nft--collection-name",{"ok-nft--collection-identification-name":t.isIdentification})},t.collectionName||t.projectName))},vn=hi;e();o();var st=f(I());var Zn=f(Gt());e();o();H();e();o();var On=f(P());function Ti(){let t=S(),s=(0,On.useDispatch)();return(r,n)=>{let{hideManualHidden:i}=gr(t),l={id:r,walletId:t,newData:{hiddenStatus:n?ct.SHOW:ct.MANUAL}};s(i&&!n?Cr(l):br(l))}}var Sn=Ti;var qn=f(I());e();o();e();o();Tt();ht();var Rn=(t,s="")=>j(M.checkHasHiddenNFT,{address:t,chain:s});e();o();var Ni=ir(Tr,kr),Bn=Ni;function yi(t){var p;let{currentNetworkUniqueId:s}=Nt(),r=Dr(),[n,i]=Bn(),{loading:l,runAsync:a,run:c}=ue(()=>{let u=r(s).join(",");return u?Rn(u,`${s}`).then(m=>{var T;let _=!!((T=m==null?void 0:m.data)!=null&&T.ownedHiddenNft);return i(_),_}).catch(()=>(i(!1),!1)):(i(!1),Promise.resolve(!1))},{manual:(p=t==null?void 0:t.manual)!=null?p:!0,refreshDeps:[s],onSuccess:u=>{var m;(m=t==null?void 0:t.onChecked)==null||m.call(t,u)},onError:()=>{}});return{hasHiddenNFT:n,loading:l,checkAsync:a,check:c,setHasHiddenNft:i}}var Le=yi;e();o();function Ii(t,s){return t.includes(s)}var Pn=Ii;bt();e();o();var Fe={SHOW:0,HIDE:1};e();o();var ve={hide:{button:"extension_wallet_filter_btn_hide",error:"extension_wallet_notif_text_hide_unsuccess",success:"extension_wallet_notif_text_hide_success"},show:{button:"extension_wallet_filter_btn_unhide",error:"extension_wallet_notif_text_unhide_unsuccess",success:"extension_wallet_notif_text_unhide_success"},transfer:"extension_wallet_filter_btn_transfer"};e();o();e();o();Tt();ht();e();o();var Mn={expired:4001,illegal:4002,parsingFailed:4003};var Hn=t=>j(M.changeNFTVisibility,t),Dn=t=>{var r,n;let s=(n=(r=t==null?void 0:t.data)==null?void 0:r.addressTokenErrorMap)!=null?n:{};return Object.values(s).some(i=>Object.values(Mn).includes(i))};e();o();var so="nftToken",Wn=(t,s)=>{var r;try{let n=(r=localStorage.getItem(so))!=null?r:"{}",i=JSON.parse(n);return localStorage.setItem(so,JSON.stringify({...i,[t]:s})),!0}catch{return!1}},$n=t=>{var s;try{let r=localStorage.getItem(so);if(!r)return;let n=(s=JSON.parse(r))!=null?s:{};return n==null?void 0:n[t]}catch{return}};e();o();Ft();bt();e();o();Tt();ht();var Vn=t=>ie(M.getNFTSignData,{address:t});e();o();Tt();ht();Ze();var Gn={[jt]:1,[zt]:2,[Zt]:2,[Xt]:4,[qt]:5},Un=t=>j(M.loginNFT,t);e();o();Ze();var Kn={[jt]:jt,[qt]:qt,[Xt]:Xt,[zt]:zt,[Zt]:Zt};var xi=t=>Object.values(Kn).includes(t),Yn=async(t,s,r)=>{var m,_,T;let n=pe(s);if(!xi(n))return;let i=await Vn(t),l=(m=i==null?void 0:i.data)==null?void 0:m.signData,a=(_=i==null?void 0:i.data)==null?void 0:_.nonce;if(!l||!a)return;let c=await B().signMessageSilent({from:t,data:l,nonce:a},n,r);if(!c)return;let p={address:t,signature:c,algorithmCode:Gn[n]};if([gt,yo].includes(n)){let E=await B().getPublicKey(t,n,r);p.publicKey=E}let u=await Un(p);return(T=u==null?void 0:u.data)==null?void 0:T.token};var jn={LOGIN_ERROR:"LOGIN_ERROR",TOKEN_ERROR:"TOKEN_ERROR"},Ei=async({address:t,baseCoinId:s,useNewToken:r,walletId:n})=>{let i=$n(t);if(!r&&i)return i;try{let l=await Yn(t,s,n);if(!l)throw new Error(jn.LOGIN_ERROR);return Wn(t,l),l}catch{throw new Error(jn.LOGIN_ERROR)}},io=0,ki=3,ao=async(t,s,r=!1)=>{let{addresses:n,nftId:i,type:l,walletId:a}=s,c=[];for(let u of n){let m=await Ei({address:u,baseCoinId:t,useNewToken:r,walletId:a});c.push(m)}let p=n.reduce((u,m,_)=>(u[m]=c[_],u),{});try{await Hn({nftId:i,type:l,addressTokenMap:p}),io=0}catch(u){if(Dn(u)){if(io++,io>ki)throw u;await ao(t,s,!0)}else throw u}};function bi(t){let{id:s,baseCoinId:r,onSuccess:n,hiddenStatus:i}=t,l=!Pn([ct.AUTO,ct.MANUAL],i),a=S(),c=Qo(),p=Sn(),{check:u}=Le(),m=l?ve.hide:ve.show,_=ue(ao,{onError:()=>{ze.error(h(m.error))},onSuccess:(y,[,{nftId:x,type:N}])=>{ze.success(h(m.success)),p(x,N===Fe.SHOW),u(),n==null||n()},manual:!0}),T=()=>{var et,v,V;if(_.loading)return;let y=c(a),x=pe(r),N=(et=y==null?void 0:y.account)==null?void 0:et[x],b=Object.values((V=(v=y==null?void 0:y.addressType)==null?void 0:v.bitcoin)!=null?V:{}).map(J=>J==null?void 0:J.address).filter(Boolean);_.run(r,{addresses:x===gt?b:[N],type:l?Fe.HIDE:Fe.SHOW,nftId:s,walletId:a})},E=h(m.button);return{key:"visibility",loading:_.loading,text:E,onClick:T,icon:l?"okx-wallet-plugin-hide":"okx-wallet-plugin-show"}}function Ci(t){let{ownerAddress:s,chainId:r,tokenId:n,contractAddress:i}=t,{loading:l,getNFTInfo:a}=en({looker:s,chainId:`${r}`,tokenId:`${n}`,contractAddress:i}),c=q(),p=on(),u=async()=>{let _=await a();if(!!_){if((_==null?void 0:_.chainName)==="Solana"&&(_==null?void 0:_.sale)){let T=Et.tip({alignBottom:!1,title:c("extension_wallet_detail_title_transfer_faild"),children:c("extension_wallet_detail_text_transfer_faild"),confirmText:c("wallet_extension_btn_general_ok"),onConfirm:()=>{T.destroy()}});return}p(_)}},m=h(ve.transfer);return{key:"transfer",loading:l,text:m,onClick:u,icon:"okx-wallet-plugin-transfer"}}function wi(){let t=(0,qn.useRef)(null),s=()=>{var r;(r=t.current)==null||r.setVisible(!1)};return Zo("scroll",s,{target:document.getElementById(ke)}),{popupRef:t,closePopup:s}}function Ai(t){let{popupRef:s,closePopup:r}=wi(),{baseCoinId:n,id:i,hiddenStatus:l,ownerAddress:a,chainId:c,contractAddress:p,tokenId:u,transfer:m=!0,visible:_=!0}=t,T=bi({onSuccess:r,baseCoinId:n,id:i,hiddenStatus:l}),E=Ci({ownerAddress:a,chainId:c,tokenId:u,contractAddress:p}),y=[];return m&&y.push(E),_&&y.push(T),{popupRef:s,actions:y}}var zn=Ai;e();o();var wt={root:"_root_eofou_1",popup:"_popup_eofou_6",item:"_item_eofou_13",iconBox:"_iconBox_eofou_22",loader:"_loader_eofou_30",icon:"_icon_eofou_22"};function Li(t){let{popupRef:s,actions:r}=zn(t);return st.default.createElement(g.Box,{className:wt.root},st.default.createElement(se,{content:st.default.createElement(g.Box,{className:wt.popup},r.map(n=>st.default.createElement(g.Box,{className:wt.item,onClick:n.onClick,key:n.key},st.default.createElement(g.Box,{className:wt.iconBox},n.loading?st.default.createElement(Q,{size:Q.SIZE.sm,className:wt.loader}):st.default.createElement(G,{className:(0,Zn.default)(n.icon,wt.icon)})),st.default.createElement(U.Text,{size:U.SIZE.sm},n.text)))),trigger:se.TRIGGER.click,placement:se.DIRECTION.topRight,ref:s},st.default.createElement(G,{className:"okds-more"})))}var Xn=Li;e();o();var dt={clickable:"_clickable_1hwto_1",priceTitle:"_priceTitle_1hwto_4",priceContent:"_priceContent_1hwto_12",priceValue:"_priceValue_1hwto_22",chainImage:"_chainImage_1hwto_27",priceAmount:"_priceAmount_1hwto_32",price:"_price_1hwto_4",noResultImageBox:"_noResultImageBox_1hwto_39",collectionName:"_collectionName_1hwto_43"};var Fi=()=>{let t=Ot();return Mo(t==null?void 0:t.initialType)},Se=t=>{let s=Fi(),{inImage:r}=t.slot||{},n=mt(t.salePrice)||mt(t.lastPrice)||mt(t.bestOfferPrice),i=q(),l=i("wallet_extension_nft_detail_text_price"),a="New";t.salePrice?l=i("wallet_extension_nft_detail_text_price"):t.lastPrice?l=i("wallet_extension_nft_detail_text_last"):t.bestOfferPrice&&(l=i("wallet_extension_nft_detail_text_best_offer"));let c=!s&&!(t!=null&&t.needClaim),p=[ct.AUTO,ct.MANUAL].includes(t==null?void 0:t.hiddenStatus),u=p&&L.default.createElement("div",{className:"ok-nft--is-hide"},L.default.createElement(G,{className:(0,Oe.default)("okx-wallet-plugin-hide","ok-nft--is-hide-icon")})),m=ce({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return L.default.createElement("div",{className:"ok-nft--main-item"},L.default.createElement("div",{className:dt.clickable,onClick:t.onClick},L.default.createElement("div",{className:"ok-nft--image-box"},L.default.createElement(tn,{startStatus:t.activeId===2,src:t.image||t.resourceUrl,alt:"",classnames:(0,Oe.default)("ok-nft--image",p&&"ok-nft--image-box-hide"),backupImage:m}),t.isNew&&L.default.createElement("div",{className:"ok-nft--is-new"},a),r?r(u):u),L.default.createElement("div",null,L.default.createElement("div",{className:"ok-nft--collections"},L.default.createElement(vn,{item:t}),L.default.createElement("div",{className:(0,Oe.default)(`ok-nft--collection-name-hidden-${t.id}`,dt.collectionName)},t.collectionName),t.isIdentification&&L.default.createElement(Lt,{alt:"",src:"/static/images/nft/nft-isidentification.svg",className:"ok-nft--flag-image"}),L.default.createElement(Lt,{alt:"",src:t.chainIcon,className:"ok-nft--chain-image"})),L.default.createElement("div",{className:"ok-nft--name"},t.name))),L.default.createElement("div",{className:dt.price},L.default.createElement("div",{className:dt.priceTitle},l),L.default.createElement("div",{className:dt.priceContent},L.default.createElement("div",{className:dt.priceValue},(n==null?void 0:n.currencyUrl)&&L.default.createElement(Lt,{alt:"",src:`${n==null?void 0:n.currencyUrl}`,className:dt.chainImage}),L.default.createElement("div",{className:dt.priceAmount},(n==null?void 0:n.priceDisplay)||"--")),c&&L.default.createElement(Xn,{id:t.id,hiddenStatus:t.hiddenStatus,baseCoinId:t.baseCoinId,ownerAddress:t.ownerAddress,chainId:t.chain,contractAddress:t.contractAddress,tokenId:t.tokenId,...t.actionsProps||{}}))))};var Qn=({data:t=[],accountAddress:s})=>{let[r,n]=(0,W.useState)(!1),i=(0,Jn.useHistory)(),l=q(),a=l("extension_home_aptos_nft_card_receivenum",{num:W.default.createElement("span",{key:"language",className:"new-home-page-aptos-notify"},t.length)});return W.default.createElement(W.default.Fragment,null,W.default.createElement(Et.Action,{windowStyle:{borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},onClose:()=>{n(!1)},visible:r,title:W.default.createElement("span",{className:"new-home-page-aptos-title"},l("extension_aptos_nft_title_receiveallowed")),windowClass:"new-home-page-aptos-claim"},W.default.createElement("div",{className:"ok-nft--main-list"},t.map(c=>(c.coverUrl?c.image=c.coverUrl:c.resourceType===1&&(c.image=c.resourceUrl),c.lastPrice=mt(c.lastPrice),c.bestOffer=mt(c.bestOffer),c.sale=mt(c.sale),c.floorPriceDetail=mt(c.floorPriceDetail),W.default.createElement(Se,{...c,key:c.tokenId,activeId:2,needClaim:!0,onClick:()=>{i.push({search:`chainId=${c.chain}&contractAddress=${c.contractAddress}&tokenId=${encodeURIComponent(c.tokenId)}&claim=true&offerAddress=${c.offerAddress}&looker=${s}&accountAddress=${s}`,pathname:`${Qt}`})}}))))),W.default.createElement("div",{className:"new-home-page-aptos-box"},W.default.createElement(Lt,{alt:"",width:32,height:32,className:"new-home-page-aptos-image",src:t[0].coverUrl||t[0].resourceUrl}),W.default.createElement("div",{className:"new-home-page-aptos-text"},a),W.default.createElement("span",{className:"new-home-page-aptos-get",onClick:()=>{t.length>1?n(!0):i.push({search:`chainId=${t[0].chain}&contractAddress=${t[0].contractAddress}&tokenId=${encodeURIComponent(t[0].tokenId)}&claim=true&offerAddress=${t[0].offerAddress}&looker=${s}&accountAddress=${s}`,pathname:`${Qt}`})}},l("extension_home_aptos_nft_card_receivenow"))))};e();o();var Mt=f(I()),lo=f(li());var es=f(P());var os=f(lt());bt();e();o();var K={INIT:"init",FILTER:"filter"};e();o();var Re=f(I());var vi=({type:t=K.INIT,hideButton:s=!1})=>{let r=ge(),{resetHideUnverifiedCollection:n}=Ie(),i=q(),{resetFilterInfo:l}=Wr(),a=(0,Re.useCallback)(()=>{n(),l()},[l,n]),c={[K.INIT]:i("wallet_extension_nft_tab_nfts_desc"),[K.FILTER]:i("wallet_extension_nft_text_no_items_found")},p={[K.INIT]:i("wallet_extension_nft_tab_nfts_btn_explorenfts"),[K.FILTER]:i("wallet_extension_nft_btn_back_to_items")},u={[K.INIT]:R.State.TYPE.noResult,[K.FILTER]:R.State.TYPE.noRecord};return Re.default.createElement(R.State,{title:c[t],type:u[t],buttonText:s?null:p[t],onButtonClick:s?void 0:()=>{if(t===K.INIT){globalThis.platform.openTab({url:r==null?void 0:r.nftMarketPlace});return}a()}})},ts=vi;var mo=({list:t,filterStatus:s,hasNFTFilter:r=!1})=>{let n=(0,es.useSelector)(St),i=(0,os.useHistory)(),{currentWalletSetting:l}=Ie(),{hideNoValue:a,hideManualHidden:c}=l,p=a||c;if(t.length>0)return Mt.default.createElement("div",{className:"ok-nft--main-list"},t.map(m=>{var x;let{nftStatusInfo:_}=m,T=((x=_==null?void 0:_.data)==null?void 0:x.nftStatus)==="1",y=(m==null?void 0:m.baseCoinId)===xo&&!!m.inscriptionIdProtocol?m.inscriptionIdProtocol:m==null?void 0:m.tokenId;return Mt.default.createElement(Se,{key:m.id,...m,tokenId:y,activeId:n,onClick:()=>{i.push({search:`looker=${m.ownerAddress}&chainId=${m.chain}&contractAddress=${m.contractAddress}&tokenId=${encodeURIComponent(y)}`,pathname:`${Qt}`})},actionsProps:{transfer:!T},slot:{inImage:N=>{var b;return T?Mt.default.createElement(rn,{className:"ok-nft-loading-status",tooltip:!0,count:(b=_.data)==null?void 0:b.txCount}):N}}})}));let u=s&&!p?K.FILTER:K.INIT;return Mt.default.createElement("div",{className:"ok-nft--main-no-nft"},Mt.default.createElement(ts,{hideButton:u===K.INIT&&r,type:u}))};mo.propTypes={list:lo.default.array,filterStatus:lo.default.bool};mo.defaultProps={list:[],filterStatus:!1};var rs=mo;var re=f(P()),Pe=f(Gt());H();var as=f(lt());e();o();var Be={showButton:"_showButton_tk4qq_1",loadingButton:"_loadingButton_tk4qq_11",loader:"_loader_tk4qq_16"};e();o();var po=f(I());H();e();o();var ns=f(ho()),Oi="read_hidden_nft_tips_walletIds";function Si(t){let{hasHiddenNFT:s=!1}=t,r=S(),[n,i]=Xo(Oi,{defaultValue:[]});return{showTips:!(r&&(n==null?void 0:n.includes(r)))&&s,onRead:()=>{!r||i((0,ns.uniq)(n==null?void 0:n.concat(r)))}}}var ss=Si;e();o();var co={root:"_root_1f2hq_1",alert:"_alert_1f2hq_4"};function Ri(t){let{showTips:s,onRead:r}=ss(t);return s?po.default.createElement(g.Box,{className:co.root},po.default.createElement(xt,{desc:h("extension_wallet_filter_notif_filterhide"),type:xt.TYPE.warn,onClose:r,className:co.alert})):null}var is=Ri;var Bi=256,ls=({aptosNftOffers:t,aptosAddress:s,scrollTop:r,backupHeight:n})=>{let i=tr(),l=(0,re.useSelector)(Ir),a=(0,re.useSelector)(yr),c=(0,re.useSelector)(xr),p=(0,C.useRef)(null),u=Ne(),m=(0,as.useHistory)(),{list:_,total:T,pageNo:E}=(0,re.useSelector)(Nr),{hasHiddenNFT:y}=Le({manual:!1}),x=!!i&&hr(i,_r.hideUnverifiedCollection),N=Object.keys(c).some(Vt=>c[Vt].length!==0)||x,b=N||y&&_.length<=2;(0,C.useEffect)(()=>{!a&&r>268*Math.ceil(_.length/2)+240-600&&T>_.length&&u({pageNo:E+1})},[r,a,_.length,T,E,u]);let et=(0,C.useMemo)(()=>a&&_.length>0&&r>480,[a,_.length,r]),v=h("wallet_extension_nft_popup_title_filter"),V=h("extension_wallet_filter_textbtn_filter",{number:go.thousandFormat(T)}),J=b?V:v,it=(0,C.useMemo)(()=>b||r>Bi,[b,r]),{paddingBottom:_t,buttonPaddingBottom:Wt,absoluteBottom:at}=Rt({isButtonAbsolute:it,backupHeight:n}),$t=(0,C.useMemo)(()=>_.length===0&&!b?Wt:_t,[Wt,b,_.length,_t]);return l?C.default.createElement("div",{className:(0,Pe.default)("ok-home--error-parent"),style:{paddingBottom:$t}},C.default.createElement(R.State,{type:R.State.TYPE.noNetwork,title:h("wallet_extension_nft_text_loading_failed"),buttonText:h("wallet_extension_nft_btn_refresh"),onButtonClick:()=>{a||u({pageNo:1})}})):a&&_.length===0?C.default.createElement("div",{className:(0,Pe.default)("ok-home--loading-parent")},C.default.createElement(Q,{size:Q.SIZE.xl})):C.default.createElement(C.default.Fragment,null,C.default.createElement("div",{ref:p,style:{paddingBottom:$t}},t.length>0&&C.default.createElement(Qn,{data:t,accountAddress:s}),C.default.createElement(is,{hasHiddenNFT:y}),C.default.createElement(rs,{filterStatus:N,list:_,hasNFTFilter:b})),et?C.default.createElement(rr,{className:Be.loadingButton,offsetBottom:at},C.default.createElement("div",{className:"ok-home-page--nft-loading"},C.default.createElement(Q,{size:Q.SIZE.lg,className:Be.loader}))):C.default.createElement("div",{className:(0,Pe.default)(`${it?Be.showButton:""}`,"ok-home-bottom-panel--nft","ok-home-bottom-panel__disabled"),style:{bottom:at,paddingBottom:Wt}},C.default.createElement(O,{icon:"okx-wallet-plugin-filter",type:O.TYPE.secondary,category:b?O.CATEGORY.fill:O.CATEGORY.outline,iconType:O.ICON_POSITION.leading,className:"home-button-nft sticky",onClick:()=>{m.push(Uo)}},J)))};e();o();var Me=f(I());var ms=f(P());var cs=()=>{let[t,s]=(0,Me.useState)([]),r=vt("nft-operate"),n=S(),i=(0,ms.useSelector)(a=>{var c,p;return((p=(c=So(a)[n])==null?void 0:c.account)==null?void 0:p.aptos)||""}),l=Ne();return $r(),(0,Me.useEffect)(()=>{var a;(!r||r.data.status===2)&&i&&sr(i).then(c=>{s(c.list)}),((a=r==null?void 0:r.data)==null?void 0:a.status)===2&&setTimeout(()=>{l()},3e3)},[r,l]),{aptosNftOffers:t,aptosAddress:i,fetchNftListData:l}};e();o();var $e=f(I());e();o();var w=f(I());mi();var ds=f(P());Ft();e();o();var ps=f(P());var He=()=>{let t=S();return(0,ps.useSelector)(({metamask:s})=>{var r;return((r=s==null?void 0:s.defiLists)==null?void 0:r[t])||[]})};var De="BTC",Pi=({hidden:t,isWalletCreated:s})=>{let r=q(),n=S(),{currentNetworkUniqueId:i}=Nt(),l=He(),a=(0,w.useMemo)(()=>l.filter(N=>N.network!==De),[l]),{defiLoading:c,selectedCurrency:p,defiLoadErr:u}=(0,ds.useSelector)(N=>{let{metamask:b}=N;return{defiLoading:b.defiLoading,defiLoadErr:b.defiLoadErr,selectedCurrency:b.selectedCurrency}}),m=()=>{B().fetchDefiList()};(0,w.useEffect)(()=>{s&&m()},[n,s]);let _=()=>w.default.createElement("div",{className:"new-home__defi-loader"},w.default.createElement(Q,{size:Q.SIZE.lg})),T=(0,w.useMemo)(()=>{let N=a||[];return i!==""?N.filter(b=>b.chainId===+i):N},[a,i]),E=(0,w.useMemo)(()=>w.default.createElement("div",{className:"new-home__defi-list"},T.map(N=>w.default.createElement("div",{key:N.id,className:"new-home__defi-list-item",onClick:()=>{!N.web||globalThis.platform.openTab({url:N.web})}},w.default.createElement("img",{src:N.logo,alt:"logo",className:"new-home__defi-list-item-logo"}),w.default.createElement("div",{className:"new-home__defi-list-item-detail"},w.default.createElement("div",{className:"new-home__defi-list-item-detail-platform"},w.default.createElement(_e,{maxWidth:"162px",text:N.platform}),w.default.createElement(G,{className:"okx-wallet-plugin-open-link new-home__defi-list-item-detail-platform-icon"})),w.default.createElement("div",{className:"new-home__defi-list-item-detail-networkNew"},w.default.createElement(_e,{maxWidth:"192px",text:N.networkNew}))),w.default.createElement("div",{className:"new-home__defi-list-item-price"},w.default.createElement(_e,{className:"new-home__defi-list-item-price-text",text:t?"***":`${vo(ko(N.balance,p.usdToThisRate),{useApproximate:!1,symbol:p.symbol})}`}))))),[T,p,t]),y=()=>w.default.createElement(R.State,{className:"new-home__defi-empty",type:R.State.TYPE.noResult,title:r("wallet_extension_text_enjoy_massive_defi"),buttonText:r("wallet_extension_btn_explore_dapps"),onButtonClick:()=>{globalThis.platform.openTab({url:r("extension_btn_link_okxweb3yield")})}}),x=()=>w.default.createElement(R.State,{type:R.State.TYPE.noNetwork,className:"new-home__defi-error",title:r("wallet_extension_nft_text_loading_failed"),buttonText:r("wallet_extension_nft_btn_refresh"),onButtonClick:()=>{m()}});return u?x():a?w.default.createElement(w.default.Fragment,null,!!T.length&&E,!T.length&&(c?_():y())):_()},fs=Pi;e();o();var ft=f(I());H();e();o();var We={main:"_main_sdwvr_1",tip:"_tip_sdwvr_8",icon:"_icon_sdwvr_14"};var us=()=>{let t=He(),s=(0,ft.useMemo)(()=>t.some(i=>i.network===De),[t]),r=(0,ft.useMemo)(()=>{var i;return(i=t.find(l=>l.network===De))==null?void 0:i.defiUrl},[t]),n=(0,ft.useCallback)(()=>{r&&globalThis.open(r)},[r]);return s?ft.default.createElement(g.FlexBox,{className:We.main,onClick:n,align:g.ALIGN.center},ft.default.createElement("div",{className:We.tip},h("extension_defi_mid_textbtn_position_details")),ft.default.createElement(G,{className:`okx-wallet-plugin-arrow-small-right ${We.icon}`})):null};var _s=({hiddenAssets:t,backupHeight:s,isWalletCreated:r})=>{let{buttonPaddingBottom:n}=Rt({backupHeight:s});return $e.default.createElement("div",{style:{paddingBottom:n}},$e.default.createElement(us,null),$e.default.createElement(fs,{hidden:t,isWalletCreated:r}))};var hs=({scrollTop:t,hiddenAssets:s,backupHeight:r,isWalletCreated:n})=>{let i=(0,gs.useSelector)(St),{aptosNftOffers:l,aptosAddress:a}=cs(),c=(0,ut.useMemo)(()=>{switch(i){case 1:return ut.default.createElement(no,{scrollTop:t,hiddenAssets:s,backupHeight:r});case 2:return ut.default.createElement(ls,{scrollTop:t,aptosNftOffers:l,aptosAddress:a,backupHeight:r});case 3:return ut.default.createElement(_s,{hiddenAssets:s,backupHeight:r,isWalletCreated:n});default:return ut.default.createElement(no,{scrollTop:t,hiddenAssets:s,backupHeight:r})}},[i,a,l,r,s,t,n]);return ut.default.createElement("div",{className:xn.main},ut.default.createElement(In,{aptosNftOffers:l}),c)};e();o();H();var $=f(I());e();o();var Ts={btn:"_btn_l5kiz_1"};e();o();var fo=f(I());Ft();var Ns=({walletIds:t})=>{let s=(0,fo.useCallback)(async()=>await B().fetchApprovalRisk({accountIds:t}),[t]),r=(0,fo.useCallback)(async()=>{await B().setApprovalRiskRemindLater()},[]);return{fetchApprovalRisk:s,remindLater:r}};var ys=({walletId:t})=>{let[s,r]=$.default.useState(!1),n=ge(),i=or(),l=(0,$.useMemo)(()=>({walletIds:[t]}),[t]),{fetchApprovalRisk:a,remindLater:c}=Ns(l);(0,$.useEffect)(()=>{(async()=>{let{approvalProjectList:m}=await a();(m==null?void 0:m.length)>0&&r(!0)})()},[a]);let p=(0,$.useCallback)(()=>{r(!1),Xe({go_to_website:!1}),c()},[c]),u=(0,$.useCallback)(()=>{let m=n.web3||`https://${i}/web3`;globalThis.open(m),r(!1),Xe({go_to_website:!0})},[i,n.web3]);return $.default.createElement(Et.Prompt,{visible:s,title:h("wallet_extension_risk_modaltitle_risk_warning"),text:h("wallet_extension_risk_modalsubtitle_risk_warning"),infoType:Et.Prompt.INFO_TYPE.warn,hideCloseBtn:!0,alignBottom:!1,footer:$.default.createElement($.default.Fragment,null,$.default.createElement(O,{category:O.CATEGORY.fill,type:O.TYPE.highlight,size:O.SIZE.lg,block:!0,onClick:u},h("wallet_extension_risk_btn_official_website")),$.default.createElement(O,{category:O.CATEGORY.outline,type:O.TYPE.default,size:O.SIZE.lg,className:Ts.btn,block:!0,onClick:p},h("wallet_extension_risk_btn_remind_later")))})};e();o();var yt=f(I());H();e();o();var At={iconAniWrapper:"_iconAniWrapper_piy3e_20",iconItem:"_iconItem_piy3e_29",text:"_text_piy3e_35",moveOutAnimation:"_moveOutAnimation_piy3e_38",moveOut:"_moveOut_piy3e_38",moveInAnimation:"_moveInAnimation_piy3e_42",moveIn:"_moveIn_piy3e_42",iconTitle:"_iconTitle_piy3e_54"};var Is=({width:t})=>yt.default.createElement(g.FlexBox,{align:g.ALIGN.center,direction:g.DIRECTION.vertical,style:{width:t}},yt.default.createElement(g.Box,{className:At.iconAniWrapper},yt.default.createElement(g.FlexBox,{align:g.ALIGN.center,justify:g.ALIGN.center,className:`${At.iconItem} ${At.moveInAnimation}`},yt.default.createElement(tt,{className:"okx-wallet-plugin-toolkit"})),yt.default.createElement(g.FlexBox,{align:g.ALIGN.center,justify:g.ALIGN.center,direction:g.DIRECTION.vertical,className:`${At.iconItem} ${At.moveOutAnimation}`},yt.default.createElement(tt,{className:"okx-wallet-plugin-swap-for-gas"}))),yt.default.createElement(U.Text,{className:At.iconTitle,ellipsis:!0,size:U.SIZE.xs},h("wallet_extension_home_text_toolkit")));e();o();var Ve=f(I());e();o();var xs={content:"_content_o6jn4_1",wrapper:"_wrapper_o6jn4_9",img:"_img_o6jn4_12",title:"_title_o6jn4_16",text:"_text_o6jn4_19"};e();o();var X=f(I());e();o();var Z={skeletonWrapper:"_skeletonWrapper_k76ne_1",tab:"_tab_k76ne_5",tokenList:"_tokenList_k76ne_10",token:"_token_k76ne_10",logo:"_logo_k76ne_18",symbol:"_symbol_k76ne_23",chain:"_chain_k76ne_28",middle:"_middle_k76ne_32",number:"_number_k76ne_35",currency:"_currency_k76ne_40"};var Mi=()=>X.default.createElement(g.FlexBox,{direction:g.DIRECTION.vertical,align:g.ALIGN.unset,className:Z.skeletonWrapper},X.default.createElement(kt.Input,{active:!0,className:Z.tab}),X.default.createElement(g.FlexBox,{direction:g.DIRECTION.vertical,justify:"space-around",className:Z.tokenList},Array(5).fill("").map((t,s)=>X.default.createElement(g.FlexBox,{className:Z.token,align:g.ALIGN.center,key:s},X.default.createElement(kt.Avatar,{active:!0,className:Z.logo}),X.default.createElement(g.FlexBox,{direction:g.DIRECTION.vertical,className:Z.middle},X.default.createElement(kt.Input,{active:!0,className:Z.symbol}),X.default.createElement(kt.Input,{active:!0,className:Z.chain})),X.default.createElement(g.FlexBox,{direction:g.DIRECTION.vertical,align:g.ALIGN.end,className:Z.right},X.default.createElement(kt.Input,{active:!0,className:Z.number}),X.default.createElement(kt.Input,{active:!0,className:Z.currency})))))),Es=Mi;e();o();var bs=f(I());H();e();o();var ks={wrapper:"_wrapper_16oot_1"};var Cs=({tryAgain:t})=>bs.default.createElement(R.State,{title:h("wallet_extension_home_title_network_unavailable"),type:R.State.TYPE.noNetwork,description:h("wallet_extension_home_text_check_network_error"),buttonText:h("wallet_extension_home_btn_try_again"),onButtonClick:()=>{t&&t()},className:ks.wrapper});var ws=({errorType:t,tryAgain:s})=>{let r=t===A.CREATE_FAIL_FROM_NETWORK_ERROR||t===A.CREATE_FAIL_FROM_SERVER_ERROR;if(!r&&t!==A.PENDING)return null;let n=()=>{switch(t){case A.CREATE_FAIL_FROM_NETWORK_ERROR:case A.CREATE_FAIL_FROM_SERVER_ERROR:return Ve.default.createElement(Cs,{tryAgain:s});case A.PENDING:return Ve.default.createElement(Es,null);default:return null}};return Ve.default.createElement(g.FlexBox,{align:g.ALIGN.center,justify:r?g.ALIGN.center:g.ALIGN.unset,direction:g.DIRECTION.vertical,className:xs.content},n())};e();o();H();var Ht=f(I()),vs=f(P());e();o();var Ls=f(I());H();e();o();var As={blue:"_blue_1j2vu_1"};var Fs=()=>{let t=nn();return Ls.default.createElement("span",{className:As.blue,onClick:()=>{sn(t)}},h("wallet_extension_home_notification_btn_switch_servers"))};var Os=()=>{let t=S(),{createdMap:s={}}=(0,vs.useSelector)(({metamask:a})=>a),r=Boolean(s[t]),n=(0,Ht.useCallback)((a=5)=>{rt.error({key:"networkError",title:h("wallet_extension_toast_asset_error_try_again"),duration:a,placement:rt.DIRECTION.top,desc:Ht.default.createElement(Fs,null)})},[]),i=(0,Ht.useCallback)((a=5)=>{rt.error({key:"serverLimitError",title:h("wallet_extension_home_notif_network_high_traffic"),duration:a,placement:rt.DIRECTION.top})},[]),l=(0,Ht.useCallback)((a,c=5)=>{rt.error({key:"customAlert",title:a,duration:c,placement:rt.DIRECTION.top})},[]);return{isWalletCreated:r,networkAlert:n,serverLimitAlert:i,customAlert:l}};e();o();var F=f(I());ht();Tt();e();o();var It={main:"_main_1l98r_1",banner:"_banner_1l98r_7",left:"_left_1l98r_11",title:"_title_1l98r_15",icon:"_icon_1l98r_18",buttonIndex:"_buttonIndex_1l98r_23",switch:"_switch_1l98r_28"};e();o();var uo=f(I());e();o();var Ge={main:"_main_1li3n_1",line:"_line_1li3n_5",dot:"_dot_1li3n_11"};var Ss=({total:t,activeIndex:s,className:r})=>uo.default.createElement(g.FlexBox,{align:g.ALIGN.center,className:`${Ge.main} ${r}`},Array(t).fill("").map((n,i)=>uo.default.createElement("div",{className:s===i?Ge.line:Ge.dot})));e();o();var Ue=f(I());e();o();var ne={main:"_main_15yv0_1",icon:"_icon_15yv0_1",left:"_left_15yv0_9"};var Rs=({handlePrev:t,handleNext:s,className:r})=>Ue.default.createElement(g.FlexBox,{align:g.ALIGN.center,className:`${ne.main} ${r}`},Ue.default.createElement(tt,{size:tt.SIZE.xxs,onClick:t,icon:"okx-wallet-plugin-left",className:`${ne.icon} ${ne.left} `}),Ue.default.createElement(tt,{size:tt.SIZE.xxs,onClick:s,icon:"okx-wallet-plugin-right",className:ne.icon}));var Bs=()=>{let[t,s]=(0,F.useState)([]),[r,n]=(0,F.useState)(0),[i,l]=(0,F.useState)(!1),a=F.default.useRef(null),c=(0,F.useMemo)(()=>t.length,[t]),p=(0,F.useCallback)(m=>{globalThis.open(m)},[]),u=No();return(0,F.useEffect)(()=>{(async()=>{let{data:m=[]}=await ie(M.getBannerConfig);s(m.map(_=>({..._,img:u==="dark"?_.nightLogo:_.dayLogo})))})()},[u]),t.length===0?null:F.default.createElement(g.FlexBox,{className:It.main,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1)},F.default.createElement(qe,{touchSwitch:t.length>1,autoplay:t.length>1?5e3:!1,ref:a,loop:t.length>1,navigation:!1,showIndicators:!1,onChange:m=>{n(m)}},t.map((m,_)=>F.default.createElement(qe.Slide,null,F.default.createElement(g.FlexBox,{align:t.length===1?g.ALIGN.center:g.ALIGN.start,onClick:()=>p(m.url),className:It.banner},F.default.createElement("div",{className:It.left},F.default.createElement(U.Text,{ellipsis:{rows:2},size:U.SIZE.sm,strong:500,className:It.title},t[_].title)),F.default.createElement(tt,{type:tt.TYPE.image,className:It.icon,src:t[_].img}))))),t.length>1&&F.default.createElement("div",null,i?F.default.createElement(Rs,{className:It.switch,handlePrev:()=>{var m;return(m=a.current)==null?void 0:m.prev()},handleNext:()=>{var m;return(m=a.current)==null?void 0:m.next()}}):F.default.createElement(Ss,{total:c,activeIndex:r,className:It.buttonIndex})))};e();o();var Y=f(I()),Ds=f(Gt());var Ws=f(lt());var $s=f(P());Ze();e();o();var Ps=f(I());bt();Tt();ht();Ft();var Ms=f(P());var Hs=()=>{let t=er(gt),s=(0,Ps.useMemo)(()=>(t==null?void 0:t.map(i=>i.address))||[],[t]),r=(0,Ms.useSelector)(Oo);return fe(async()=>{try{let i=await B().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),{data:l=[]}=await j(M.getBtcPendingTx,{txPendingCountReqList:[{addressList:s,chainId:0}]},{headers:i});return l[0]}catch{return{}}})};e();o();var Ke={main:"_main_12oim_1",dot:"_dot_12oim_7",title:"_title_12oim_16",icon:"_icon_12oim_20"};var Vs=()=>{let[t,s]=(0,Y.useState)({}),r=q(),n=(0,Ws.useHistory)(),i=(0,$s.useDispatch)(),l=Hs(),a=fe(async()=>{let m=await l();s(m)});(0,Y.useEffect)(()=>{a()},[]);let c=vt("wallet-notice");(0,Y.useEffect)(()=>{c&&a()},[c,a]);let p=(0,Y.useMemo)(()=>!t||typeof(t==null?void 0:t.pendingCount)!="number"?"":t!=null&&t.hasMoreCount?r("extension_defi_mid_notif_btc_over100_receive",{minAmt:"100"}):(t==null?void 0:t.pendingCount)&&(t==null?void 0:t.pendingCount)>0?r("extension_defi_mid_notif_btc100_receive",{extension_defi_mid_notif_btc100_receive:t==null?void 0:t.pendingCount,maxAmt:t==null?void 0:t.pendingCount}):"",[t,r]),u=()=>{i(ye({mainCoinId:Eo})),n.push(`${de}?filterByChain=${0}`)};return!t||typeof(t==null?void 0:t.pendingCount)!="number"||(t==null?void 0:t.pendingCount)===0?null:Y.default.createElement(g.FlexBox,{className:Ke.main,align:"center",justify:"space-between",onClick:u},Y.default.createElement(g.FlexBox,{align:"center"},Y.default.createElement("div",{className:Ke.dot}),Y.default.createElement(U.Text,{type:U.TYPE.default,size:U.SIZE.xs},p)),Y.default.createElement(G,{className:(0,Ds.default)("okx-wallet-plugin-right",Ke.icon)}))};var Hi=()=>{let{totalUnapprovedCount:t,firstPermissionsRequestId:s}=(0,Dt.useSelector)(ot=>{let si=Bo(ot),je=Do(ot),ii=je&&je.metadata?je.metadata.id:null;return{totalUnapprovedCount:si,firstPermissionsRequestId:ii}}),{isWalletCreated:r,networkAlert:n,serverLimitAlert:i,customAlert:l}=Os(),c=Co()===bo,p=S(),{walletAsset:u,platformAsset:m,nftBalance:_}=(0,Dt.useSelector)(wr),T=he(),[{errorType:E,errorMsg:y},{createWalletToServer:x}]=un(),N=Lr(),[b,et]=mr(),v=(0,k.useRef)(null),[V,J]=(0,k.useState)(0),{isNeedShowDisconnectUpgrade:it,setDisconnectUpgrade:_t}=Fr(),Wt=(0,k.useCallback)(()=>{it&&(rt.success({title:h("wallet_extension_card_subtitle_disconnect_update")}),_t())},[it,_t]),at=(0,Dt.useSelector)(me),$t=(0,k.useRef)(null),Vt=(0,Gs.useHistory)(),[Us,Ks]=(0,k.useState)(0),{clickHandle:Ys,iconOptions:js}=hn();(0,k.useEffect)(()=>{switch(E){case A.CREATE_FAIL_FROM_NETWORK_ERROR:case A.ERR_NETWORK:n();break;case A.CREATE_FAIL_FROM_SERVER_LIMIT:case A.ERR_SERVER_LIMIT:i();break;case A.CREATE_FAIL_FROM_SERVER_ERROR:l(y);break;default:break}},[l,y,E,n,i]),(0,k.useEffect)(()=>{m!=="--"&&wo({wallet_id:p,coin_balance:m,nft_balance:_})},[p,m,_]);let Ye=(0,Dt.useSelector)(fr),qs=(0,Dt.useSelector)(dr);(0,k.useEffect)(()=>{c&&t===0?!Ye&&!qs&&globalThis.platform.closeCurrentWindow():s&&at&&T({text:h("wallet_dapp_conncetion_alert_backup_wallet")},s)},[at,Ye,s,Vt,c,t]),qo(()=>{Ho()});let{run:zs}=zo(()=>{var ot;Ks(((ot=$t.current)==null?void 0:ot.scrollTop)||0)},{wait:50,maxWait:50}),{titleLeft:Zs,titleRight:Xs,subTitle:Js,address:Qs,chainName:ti,filterAddress:ei,filterHotAddress:oi,isEVMPKAccount:ri}=yn(),ni=async()=>{E!==A.PENDING&&(rt.destroyAll(),await x())};return(0,k.useLayoutEffect)(()=>{var ot;v.current&&at&&r&&J(((ot=v.current)==null?void 0:ot.clientHeight)||0)},[at,r]),k.default.createElement("div",{id:ke,className:"ok-home-page main-container",ref:$t,onScroll:()=>{zs()}},k.default.createElement(Hr,{titleLeft:Zs,titleRight:Xs,subTitle:Js,address:Qs,chainName:ti,filterAddress:ei,filterHotAddress:oi,isNotBackupWallet:at,isEVMPKAccount:ri}),k.default.createElement(Vr,{balance:u,hiddenAssets:b,onToggleHiddenAssets:et}),k.default.createElement(Pr,{clickHandle:Ys,iconOptions:js,customMore:ot=>k.default.createElement(Is,{width:ot})}),k.default.createElement(Vs,null),k.default.createElement(Bs,null),k.default.createElement(hs,{scrollTop:Us,hiddenAssets:b,backupHeight:at?V+24:0,isWalletCreated:r}),r&&k.default.createElement("div",{ref:v},k.default.createElement(Ar,{offsetBottom:24})),k.default.createElement(vr,{disconnectCallback:Wt}),Ye&&k.default.createElement(an,null),r&&k.default.createElement(Rr,{showBackup:()=>{T({text:h("wallet_dapp_conncetion_alert_backup_wallet")},s)}}),N&&k.default.createElement(Sr,{actionMap:{["RECOVER"]:()=>{Vt.push(`${jo}?action=${ur.RECOVER}&walletId=${p}`)},["SWITCH_WALLET"]:()=>{Vt.push(`${Ko}?fromHome=1`)}}}),k.default.createElement(ys,{walletId:p}),k.default.createElement(ws,{tryAgain:ni,errorType:E}))},AT=Hi;export{AT as default};
//! dapp处理完请求均需要关闭首页， 插件内部唤起不需要关闭首页

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=homepage-EDQKMRSK.js.map
