import{a as ce}from"./chunk-5OUYE6NE.js";import{a as ue}from"./chunk-7CB4COOY.js";import{a as N}from"./chunk-E73QHIZ6.js";import{i as pe}from"./chunk-E2KMZQ6K.js";import{A as me,z as ie}from"./chunk-MTMZQEHP.js";import{W as ae}from"./chunk-R6GCLTW2.js";import{l as k}from"./chunk-IU3TYIWS.js";import{b as ne,t as L}from"./chunk-VPBQLZCI.js";import{b as Ie}from"./chunk-6ZPGW3YM.js";import{P as u}from"./chunk-UXFKODVN.js";import{Ab as oe,C as Q,D as R,Vb as re,q as H,sb as ee,v as A,xb as te,yb as se}from"./chunk-CVJKAN5R.js";import{q as F}from"./chunk-GXQ645QR.js";import{a as _}from"./chunk-V4YVDLI4.js";import{f as y,m as n,o as i}from"./chunk-6V2G2Z5W.js";n();i();var m=y(_());Q();var de=y(R());re();n();i();var le=y(_());n();i();Q();var h=y(R());re();var V=e=>(0,h.isNil)(e)||(0,h.lte)(e,0),D=(e,t)=>String(Math.ceil(ee(e,t))),d=(e,t)=>oe(e,1)?`${H.ceilShort(e||0,0,!1,0,!1)} ${t}`:k(e||0,{symbol:t});var be={initLoading:!0,loading:!1,error:!1,denom:"",gasAmount:"0",gasPriceStep:{slow:"0",fast:"0",standard:"0"},gasFee:{slow:"0",fast:"0",standard:"0"}},U=0,_e=7e3;function O({coinId:e,address:t,value:s="0",inputData:p="",to:r=""}){let[c,a]=(0,le.useState)(be);async function g(){try{if(!e||!t)return;a(w=>({...w,loading:!0,error:!1}));let[f,l]=await Promise.all([ie({coinId:e,from:t,value:s!=null?s:"0",to:r!=null?r:""}),me({coinId:e,from:t,value:s!=null?s:"0",inputData:p})]),{min:P,normal:G,max:S,feeDemon:o}=f,v={denom:o,gasAmount:l,gasPriceStep:{slow:P,fast:S,standard:G},gasFee:{slow:D(P,l),fast:D(S,l),standard:D(G,l)},error:!1,initLoading:!1,loading:!1};a(v)}catch{a(l=>({...l,error:!0,initLoading:!1,loading:!1}))}}return L(()=>(clearInterval(U),g(),U=setInterval(g,_e),()=>{clearInterval(U)}),[r,s,p]),c}n();i();var ge=y(Ie());function E({coinId:e,symbol:t,decimals:s,currencyId:p,fee:r}){let c=k(r,{symbol:t,decimals:s}),a=pe(e,r,{currencyId:p,useApproximate:!0,useMinPrecision:!0,formatted:!0});return`${c} ${a}`}function $({coinId:e,fee:t}){let{baseCoin:s}=N(Number(e),!0),p=(0,ge.useSelector)(ae),{currencyId:r}=p,{symbol:c,decimals:a}=s,g=E({coinId:e,symbol:c,decimals:a,currencyId:r,fee:t.slow}),f=E({coinId:e,symbol:c,decimals:a,currencyId:r,fee:t.fast}),l=E({coinId:e,symbol:c,decimals:a,currencyId:r,fee:t.standard}),P=E({coinId:e,symbol:c,decimals:a,currencyId:r,fee:t.custom});return{slow:g,fast:f,standard:l,custom:P}}n();i();var fe=y(_());function z({feeInfo:e,feeDisplay:t,onClick:s}){return(0,fe.useMemo)(()=>[{typeKey:u.SLOW,gasFee:e.gasFee.slow,unitPrice:d(e.gasPriceStep.slow,e.denom),totalPrice:t.slow,estimatedTime:"",onClick:()=>{s({gasType:u.SLOW,gasPriceStep:e.gasPriceStep.slow,gasAmount:e.gasAmount,gasFee:e.gasFee.slow})}},{typeKey:u.STANDARD,gasFee:e.gasFee.standard,unitPrice:d(e.gasPriceStep.standard,e.denom),totalPrice:t.standard,estimatedTime:"",onClick:()=>{s({gasType:u.STANDARD,gasPriceStep:e.gasPriceStep.standard,gasAmount:e.gasAmount,gasFee:e.gasFee.standard})}},{typeKey:u.FAST,gasFee:e.gasFee.fast,unitPrice:d(e.gasPriceStep.fast,e.denom),totalPrice:t.fast,estimatedTime:"",onClick:()=>{s({gasType:u.FAST,gasPriceStep:e.gasPriceStep.fast,gasAmount:e.gasAmount,gasFee:e.gasFee.fast})}}],[e])}n();i();var M=y(_());function K({feeInfo:e,feeDisplay:t,customGasPriceStep:s,customGasAmount:p,customGasFee:r,canConfirm:c,onClick:a,onConfirm:g}){return(0,M.useMemo)(()=>({unitPrice:d(s,e.denom),totalPrice:M.default.createElement(ue,{text:t.custom,maxWidth:"160px",className:void 0,style:void 0}),estimatedTime:"",onClick:a,canConfirm:c,onConfirm:()=>{g({gasType:u.CUSTOM,gasPriceStep:s,gasAmount:p,gasFee:r})}}),[s,p])}n();i();var W={customGasPriceStep:"_customGasPriceStep_1drur_1",customGasPriceStepDenom:"_customGasPriceStepDenom_1drur_4"};function ke({coinId:e,address:t,to:s,inputData:p,visible:r,gasType:c=u.STANDARD,gasPriceStep:a,gasAmount:g,onConfirm:f,onBack:l,onClose:P,onChange:G}){let{baseCoin:S}=N(Number(e),!0),o=O({coinId:e,address:t,to:s,inputData:p}),[v,w]=(0,m.useState)(c),[x,ye]=(0,m.useState)(c),[B,Fe]=(0,m.useState)(),Pe=(V(a)?void 0:a)||o.gasPriceStep.standard,I=typeof B=="string"?B:Pe,[J,Se]=(0,m.useState)(),Te=(V(g)?void 0:g)||o.gasAmount,b=typeof J=="string"?J:Te,X=te(I,o.gasPriceStep.slow)?A("wallet_extension_cosmos_alert_morethan",{num:d(o.gasPriceStep.slow,o.denom)}):"",Y=se(b,0)?A("wallet_extension_cosmos_alert_limitmorethan"):"",Ce=!X&&!Y,Z=D(I,b),j=$({coinId:e,fee:{...o.gasFee,custom:Z}}),q=ne(({gasType:T,gasAmount:xe,gasPriceStep:Ae,gasFee:we})=>{w(T),ye(T),G({gasType:T,gasPriceStep:Ae,gasAmount:xe,gasFee:we,denom:o.denom,loading:!1,error:!1,initLoading:!1}),f&&f()}),De=z({feeInfo:o,feeDisplay:j,onClick:q}),Ge=K({feeInfo:o,feeDisplay:j,customGasPriceStep:I,customGasAmount:b,customGasFee:Z,canConfirm:Ce,onClick:()=>{w(u.CUSTOM)},onConfirm:q});return L(()=>{x!==u.CUSTOM&&G({gasType:x,gasAmount:o.gasAmount,gasPriceStep:o.gasPriceStep[x],gasFee:o.gasFee[x],denom:o.denom,loading:o.loading,error:o.error,initLoading:o.initLoading})},[x,o,s,p]),r?m.default.createElement(ce,{feeType:v,feeDataList:De,onBack:l,onClose:P,onChange:de.noop,custom:{...Ge,components:()=>{var T;return m.default.createElement(m.default.Fragment,null,m.default.createElement(F.Number,{className:W.customGasPriceStep,size:F.SIZE.sm,title:m.default.createElement(m.default.Fragment,null,A("wallet_extension_cosmos_title_gasfee")),value:I,onChange:Fe,errorType:F.TIP_TYPE.always,error:X,enableMinus:!1,min:0,precision:(T=S==null?void 0:S.decimals)!=null?T:6,suffix:m.default.createElement("span",{className:W.customGasPriceStepDenom},o.denom)}),m.default.createElement(F.Number,{size:F.SIZE.sm,title:A("wallet_extension_cosmos_title_gasamount"),value:b,onChange:Se,errorType:F.TIP_TYPE.always,error:Y,enableMinus:!1,min:0,precision:0}))}}}):null}export{ke as a};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-DGBNQO62.js.map
