import{e as we,f as Ee,h as ye,j as Fe,l as B}from"./chunk-HR4SA7Z5.js";import{c as Q,e as X}from"./chunk-WIOZQWEG.js";import{a as F,b as r}from"./chunk-JVE4G6JP.js";import{d as P,j as Ne}from"./chunk-YLO74Q7W.js";import{a as be}from"./chunk-E73QHIZ6.js";import{b as ve,f as Ie}from"./chunk-MTMZQEHP.js";import{o as y}from"./chunk-VPBQLZCI.js";import{k as h}from"./chunk-HU3KBV5G.js";import{U as b}from"./chunk-UXFKODVN.js";import{C as ht,D as _t,Vb as Ct,sb as K,v as Te,vb as De}from"./chunk-CVJKAN5R.js";import{G as Ge,o as x}from"./chunk-GXQ645QR.js";import{V as a}from"./chunk-C2H3SRET.js";import{a as k,f as gt}from"./chunk-V4YVDLI4.js";import{f as d,m as o,o as n}from"./chunk-6V2G2Z5W.js";o();n();var c=d(k());var s=d(gt()),re=d(_t());ht();Ct();o();n();o();n();var $=d(k());o();n();var T=d(k());var kt=({title:l,text:m,...p})=>T.default.createElement(x.Prompt,{className:"tx-check-dialog",hideCloseBtn:!0,alignBottom:!1,titleCenter:!1,infoType:null,renderContent:e=>T.default.createElement(e,null,T.default.createElement("div",{className:"tx-check-dialog__content"},T.default.createElement("div",{className:"tx-check-dialog__content-title"},l),T.default.createElement("div",{className:"tx-check-dialog__content-text"},m))),cancelBtnProps:{category:a.CATEGORY.outline,size:a.SIZE.lg},confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},...p}),S=T.default.memo(kt);var xt=({visible:l,onConfirm:m,onCancel:p})=>{let e=h();return $.default.createElement(S,{visible:l,title:e("wallet_extension_transaction_popup_failed_transaction"),text:e("wallet_extension_transaction_popup_replace_failed_transaction"),confirmText:e("wallet_extension_transaction_popup_btn_replace"),cancelText:e("wallet_extension_transaction_popup_btn_skip"),onConfirm:m,onCancel:p})},ee=$.default.memo(xt);o();n();var te=d(k());var Pt=({visible:l,onConfirm:m,onCancel:p})=>{let e=h();return te.default.createElement(S,{visible:l,title:e("wallet_extension_transaction_popup_pending_transaction"),text:e("wallet_extension_transaction_popup_replace_pending_transaction"),confirmText:e("wallet_extension_transaction_popup_btn_replace"),cancelText:e("wallet_extension_transaction_popup_btn_continue_wait"),onConfirm:m,onCancel:p,hideCloseBtn:!0})},oe=te.default.memo(Pt);o();n();var ae=d(k());o();n();var ne=d(k());var Tt=({...l})=>ne.default.createElement(x.Prompt,{alignBottom:!1,hideCloseBtn:!0,infoType:x.Prompt.INFO_TYPE.warn,confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},cancelBtnProps:{category:a.CATEGORY.outline,size:a.SIZE.lg},...l}),Be=ne.default.memo(Tt);var Gt=({visible:l,onConfirm:m,onCancel:p})=>{let e=h();return ae.default.createElement(Be,{visible:l,title:e("wallet_extension_popup_repeat_order"),confirmText:e("wallet_extension_popup_repeat_order_btn_continue"),cancelText:p?e("wallet_extension_popup_repeat_order_btn_viewhistory"):null,text:e("wallet_extension_popup_repeat_order_desc"),onConfirm:m,onCancel:p||(()=>{})})},ie=ae.default.memo(Gt);o();n();var i=d(k());function Dt({visible:l,onConfirm:m,onCancel:p,data:e}){let g=h(),{userGasInfo:U,updateGasInfo:Y,baseCoin:A}=e,{gasPrice:z,maxFeePerGas:W}=Y,{supportEip1559:R,gasLimit:G,gasPrice:Z,maxFeePerGas:H}=U,O=R?H:Z,D=Q(O,G,A),V=X(O,G),v=R?W:z,j=Q(v,G,A),N=X(v,G);return i.default.createElement(x.Prompt,{visible:l,className:"ethereum-check-gas-dialog",alignBottom:!1,titleCenter:!1,infoType:null,onConfirm:m,onClose:p,confirmText:g("extension_toast_btn_confirmgasfee"),confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},renderContent:w=>i.default.createElement(w,null,i.default.createElement("div",{className:"ethereum-check-gas-dialog__title"},g("extension_toast_title_transaction_replace")),i.default.createElement("div",{className:"ethereum-check-gas-dialog__subtitle"},g("extension_toast_subtitle_gasincrease")),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee-title"},g("extension_toast_title_current_transaction")),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee"},i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__fee-detail"},D),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__gas-detail"},V)),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee-title"},g("extension_toast_title_gasprice")),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee"},i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__fee-detail--speed"},j),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__gas-detail"},N)))})}var se=(0,i.memo)(Dt);var ce=({children:l,btnProps:m,dataForCheck:p,whetherCheckRepeat:e,whetherCheckGas:g,onFailedCancel:U,onFailedConfirm:Y,onPendingCancel:A,onPendingConfirm:z,onRepeatCancel:W,onRepeatConfirm:R,onGasReplaceCancel:G,onGasReplaceConfirm:Z,onClick:H,beforeClick:O,afterClick:D})=>{let{fetchParams:V,userGasInfo:v,baseCoinAmountUse:j}=p,N=(0,c.useRef)([]),w=(0,c.useRef)(B.NEW),le=(0,c.useRef)({}),C=(0,c.useRef)({}),pe=(0,c.useRef)(!1),[Ae,{setTrue:Re,setFalse:me}]=y(!1),[Oe,{setTrue:Se,setFalse:fe}]=y(!1),[Ue,{setTrue:Ye,setFalse:ue}]=y(!1),[ze,{setTrue:We,setFalse:de}]=y(!1),{coinId:L,from:he,to:Ze,amount:He,gasPrice:Ve}=V,{baseCoin:_e}=be(L,!0),{coinAmountInt:je}=Ne(_e.coinId),Le=async()=>{var I;let t={checkTypes:[b.REPEAT,b.OVERWRITTEN],coinId:L,from:he,to:Ze,amount:He,gasPrice:Ve},[{data:f=[]},{data:u}]=await Promise.all([Ie(t),ve({coinId:L,address:he})]);N.current=f;let J=((I=u==null?void 0:u.info)==null?void 0:I.gasPrice)||{};return le.current=J,f},E=()=>N.current,Me=()=>le.current,ge=()=>C.current,qe=()=>{let f=E().find(I=>(I==null?void 0:I.checkType)===b.OVERWRITTEN)||{},{gasPrice:u,priorityFee:J}=f;return{originGasPrice:K(u,1.1),originPriorityFee:K(J,1.1)}},Je=()=>{w.current=B.ON_CHAIN},Ke=()=>{w.current=B.NEW},Qe=t=>(C.current={...C.current,...t},C.current),Xe=()=>{pe.current=!0},$e=()=>{Ge.error({title:Te("extension_toast_text_insufficient_balance")})},M=r(()=>{let t={nonce:0,updateGasInfo:null},f=N.current.find(u=>(u==null?void 0:u.checkType)===b.OVERWRITTEN)||{};return w.current===B.NEW?t.nonce=f.newNonce:t.nonce=f.nonce,pe.current&&(C.current.gasPrice||C.current.maxFeePerGas)&&(t.updateGasInfo=C.current),t},H),et=F(Re,P),tt=F(Se,P),ot=t=>Ee(t,et,tt),nt=F(Qe,We,P),Ce=g?t=>ye(t,{userGasInfo:v,serverGasInfo:Me(),originTxGasInfo:qe()},nt):re.identity,at=F($e,D,P),it=t=>{let f=De(je,j);return Fe(t,{userGasInfo:v,updateGasInfo:ge(),baseCoinAmountAvailable:f},at)},ke=e?t=>(we(t,b.REPEAT)&&(Ye(),P()),t):re.identity,xe=r(E,ke,M),q=r(Je,xe),Pe=r(Ke,xe),st=r(U,me,Pe),rt=r(Y,me,E,Ce,q),ct=r(A,fe,Pe),lt=r(z,fe,E,Ce,q),pt=r(W,ue,D),mt=r(R,ue,M),ft=r(G,de,D,P),ut=r(Xe,Z,de,E,it,q),dt=r(O,Le,ot,ke,M,D);return c.default.createElement(c.default.Fragment,null,c.default.createElement(a,{category:a.CATEGORY.fill,type:a.TYPE.highlight,size:a.SIZE.lg,block:!0,...m,onClick:dt},l),c.default.createElement(ee,{visible:Ae,onCancel:st,onConfirm:rt}),c.default.createElement(oe,{visible:Oe,onCancel:ct,onConfirm:lt}),c.default.createElement(ie,{visible:Ue,onCancel:pt,onConfirm:mt}),c.default.createElement(se,{visible:ze,onCancel:ft,onConfirm:ut,data:{baseCoin:_e,userGasInfo:v,updateGasInfo:ge()}}))},vt=ce;ce.propTypes={children:s.default.node,btnProps:s.default.object,dataForCheck:s.default.object,whetherCheckRepeat:s.default.bool,whetherCheckGas:s.default.bool,onFailedCancel:s.default.func,onFailedConfirm:s.default.func,onPendingCancel:s.default.func,onPendingConfirm:s.default.func,onRepeatCancel:s.default.func,onRepeatConfirm:s.default.func,onClick:s.default.func,beforeClick:s.default.func,afterClick:s.default.func};ce.defaultProps={children:null,btnProps:{},dataForCheck:{},whetherCheckRepeat:!1,whetherCheckGas:!0,onFailedCancel:()=>{},onFailedConfirm:()=>{},onPendingCancel:()=>{},onPendingConfirm:()=>{},onRepeatCancel:()=>{},onRepeatConfirm:()=>{},onClick:()=>{},beforeClick:()=>{},afterClick:()=>{}};o();n();export{vt as a};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-FLAY3RSM.js.map
