import{b as jt}from"./chunk-OCHHKHZZ.js";import{c as Qt}from"./chunk-JQQNTNIX.js";import{a as Ft,m as dt,p as ut,r as lt}from"./chunk-6PGLMYAE.js";import{a as xt}from"./chunk-RMQJRDTF.js";import{a as Dt,b as tn}from"./chunk-MVLY6WUP.js";import{f as Bt,h as en}from"./chunk-ZEAKIEIQ.js";import{C as Ji,F as Lt,Pa as Xi,Ra as Te,Ta as Ct,rb as Zi,v as yt}from"./chunk-CVJKAN5R.js";import{H as Mt}from"./chunk-GXQ645QR.js";import{b as J}from"./chunk-V4YVDLI4.js";import{c as Ut}from"./chunk-RYNAOZ73.js";import{c as u,f as wt,m as i,n as c,o as n}from"./chunk-6V2G2Z5W.js";var Re=u(U=>{"use strict";i();n();Object.defineProperty(U,"__esModule",{value:!0});U.LIBUSB_ERROR_MESSAGE=U.serializeError=U.TypedError=U.TrezorError=U.ERROR_CODES=void 0;U.ERROR_CODES={Init_NotInitialized:"TrezorConnect not initialized",Init_AlreadyInitialized:"TrezorConnect has been already initialized",Init_IframeBlocked:"Iframe blocked",Init_IframeTimeout:"Iframe timeout",Init_ManifestMissing:"Manifest not set. Read more at https://github.com/trezor/trezor-suite/blob/develop/docs/packages/connect/index.md",Popup_ConnectionMissing:"Unable to establish connection with iframe",Transport_Missing:"Transport is missing",Transport_InvalidProtobuf:"",Method_InvalidPackage:"This package is not suitable to work with browser. Use @trezor/connect-web package instead",Method_InvalidParameter:"",Method_NotAllowed:"Method not allowed for this configuration",Method_PermissionsNotGranted:"Permissions not granted",Method_Cancel:"Cancelled",Method_Interrupted:"Popup closed",Method_UnknownCoin:"Coin not found",Method_AddressNotMatch:"Addresses do not match",Method_FirmwareUpdate_DownloadFailed:"Failed to download firmware binary",Method_Discovery_BundleException:"",Method_Override:"override",Method_NoResponse:"Call resolved without response",Backend_NotSupported:"BlockchainLink settings not found in coins.json",Backend_WorkerMissing:"",Backend_Disconnected:"Backend disconnected",Backend_Invalid:"Invalid backend",Backend_Error:"",Runtime:"",Device_NotFound:"Device not found",Device_InitializeFailed:"",Device_FwException:"",Device_ModeException:"",Device_Disconnected:"Device disconnected",Device_UsedElsewhere:"Device is used in another window",Device_InvalidState:"Passphrase is incorrect",Device_CallInProgress:"Device call in progress"};var Ie=class extends Error{constructor(t,r){super(r),this.code=t,this.message=r}};U.TrezorError=Ie;var rn=(e,t)=>new Ie(e,t||U.ERROR_CODES[e]);U.TypedError=rn;var on=e=>e&&e.error instanceof Error?{error:e.error.message,code:e.error.code}:e;U.serializeError=on;U.LIBUSB_ERROR_MESSAGE="LIBUSB_ERROR"});var zt=u(oe=>{"use strict";i();n();Object.defineProperty(oe,"__esModule",{value:!0});oe.MODULES=oe.TYPES=void 0;oe.TYPES={bitcoin:"Bitcoin",ethereum:"Ethereum",eos:"Eos",nem:"NEM",stellar:"Stellar",cardano:"Cardano",ripple:"Ripple",tezos:"Tezos",binance:"Binance",solana:"Solana"};oe.MODULES=["binance","cardano","eos","ethereum","nem","ripple","solana","stellar","tezos"]});var Gt=u(ie=>{"use strict";i();n();Object.defineProperty(ie,"__esModule",{value:!0});ie.NETWORK_IDS=ie.PROTOCOL_MAGICS=void 0;var kt;(function(e){e[e.mainnet=764824073]="mainnet",e[e.testnet_preprod=1]="testnet_preprod",e[e.testnet_preview=2]="testnet_preview",e[e.testnet_legacy=1097911063]="testnet_legacy"})(kt||(ie.PROTOCOL_MAGICS=kt={}));var qt;(function(e){e[e.mainnet=1]="mainnet",e[e.testnet=0]="testnet"})(qt||(ie.NETWORK_IDS=qt={}))});var Kt=u(G=>{"use strict";i();n();Object.defineProperty(G,"__esModule",{value:!0});G.TxVersion=G.TxType=G.Networks=void 0;var Vt;(function(e){e[e.mainnet=104]="mainnet",e[e.testnet=152]="testnet",e[e.mijin=96]="mijin"})(Vt||(G.Networks=Vt={}));var Wt;(function(e){e[e.TRANSFER=257]="TRANSFER",e[e.COSIGNING=258]="COSIGNING",e[e.IMPORTANCE_TRANSFER=2049]="IMPORTANCE_TRANSFER",e[e.AGGREGATE_MODIFICATION=4097]="AGGREGATE_MODIFICATION",e[e.MULTISIG_SIGNATURE=4098]="MULTISIG_SIGNATURE",e[e.MULTISIG=4100]="MULTISIG",e[e.PROVISION_NAMESPACE=8193]="PROVISION_NAMESPACE",e[e.MOSAIC_CREATION=16385]="MOSAIC_CREATION",e[e.SUPPLY_CHANGE=16386]="SUPPLY_CHANGE"})(Wt||(G.TxType=Wt={}));var Ht;(function(e){e[e.mainnet=1744830464]="mainnet",e[e.testnet=-1744830464]="testnet",e[e.mijin=1610612736]="mijin"})(Ht||(G.TxVersion=Ht={}))});var pt=u(d=>{"use strict";i();n();Object.defineProperty(d,"__esModule",{value:!0});d.TezosBallotType=d.TezosContractType=d.StellarSignerType=d.StellarMemoType=d.StellarAssetType=d.NEMImportanceTransferMode=d.NEMModificationType=d.NEMSupplyChangeType=d.NEMMosaicLevy=d.MoneroNetworkType=d.Enum_WordRequestType=d.RecoveryDeviceType=d.SdProtectOperationType=d.Enum_Capability=d.Enum_HomescreenFormat=d.Enum_SafetyCheckLevel=d.Enum_BackupType=d.EthereumDataType=d.EthereumDefinitionType=d.DebugPhysicalButton=d.DebugButton=d.Enum_PinMatrixRequestType=d.Enum_ButtonRequestType=d.FailureType=d.CardanoTxWitnessType=d.CardanoTxSigningMode=d.CardanoCVoteRegistrationFormat=d.CardanoTxAuxiliaryDataSupplementType=d.CardanoPoolRelayType=d.CardanoCertificateType=d.CardanoTxOutputSerializationFormat=d.CardanoNativeScriptHashDisplayFormat=d.CardanoNativeScriptType=d.CardanoAddressType=d.CardanoDerivationType=d.Enum_RequestType=d.AmountUnit=d.DecredStakingSpendType=d.Enum_OutputScriptType=d.Enum_InputScriptType=d.BinanceTimeInForce=d.BinanceOrderSide=d.BinanceOrderType=d.DeviceModelInternal=void 0;var Yt;(function(e){e.T1B1="T1B1",e.T2T1="T2T1",e.T2B1="T2B1"})(Yt||(d.DeviceModelInternal=Yt={}));var $t;(function(e){e[e.OT_UNKNOWN=0]="OT_UNKNOWN",e[e.MARKET=1]="MARKET",e[e.LIMIT=2]="LIMIT",e[e.OT_RESERVED=3]="OT_RESERVED"})($t||(d.BinanceOrderType=$t={}));var Jt;(function(e){e[e.SIDE_UNKNOWN=0]="SIDE_UNKNOWN",e[e.BUY=1]="BUY",e[e.SELL=2]="SELL"})(Jt||(d.BinanceOrderSide=Jt={}));var Xt;(function(e){e[e.TIF_UNKNOWN=0]="TIF_UNKNOWN",e[e.GTE=1]="GTE",e[e.TIF_RESERVED=2]="TIF_RESERVED",e[e.IOC=3]="IOC"})(Xt||(d.BinanceTimeInForce=Xt={}));var Zt;(function(e){e[e.SPENDADDRESS=0]="SPENDADDRESS",e[e.SPENDMULTISIG=1]="SPENDMULTISIG",e[e.EXTERNAL=2]="EXTERNAL",e[e.SPENDWITNESS=3]="SPENDWITNESS",e[e.SPENDP2SHWITNESS=4]="SPENDP2SHWITNESS",e[e.SPENDTAPROOT=5]="SPENDTAPROOT"})(Zt||(d.Enum_InputScriptType=Zt={}));var er;(function(e){e[e.PAYTOADDRESS=0]="PAYTOADDRESS",e[e.PAYTOSCRIPTHASH=1]="PAYTOSCRIPTHASH",e[e.PAYTOMULTISIG=2]="PAYTOMULTISIG",e[e.PAYTOOPRETURN=3]="PAYTOOPRETURN",e[e.PAYTOWITNESS=4]="PAYTOWITNESS",e[e.PAYTOP2SHWITNESS=5]="PAYTOP2SHWITNESS",e[e.PAYTOTAPROOT=6]="PAYTOTAPROOT"})(er||(d.Enum_OutputScriptType=er={}));var tr;(function(e){e[e.SSGen=0]="SSGen",e[e.SSRTX=1]="SSRTX"})(tr||(d.DecredStakingSpendType=tr={}));var rr;(function(e){e[e.BITCOIN=0]="BITCOIN",e[e.MILLIBITCOIN=1]="MILLIBITCOIN",e[e.MICROBITCOIN=2]="MICROBITCOIN",e[e.SATOSHI=3]="SATOSHI"})(rr||(d.AmountUnit=rr={}));var or;(function(e){e[e.TXINPUT=0]="TXINPUT",e[e.TXOUTPUT=1]="TXOUTPUT",e[e.TXMETA=2]="TXMETA",e[e.TXFINISHED=3]="TXFINISHED",e[e.TXEXTRADATA=4]="TXEXTRADATA",e[e.TXORIGINPUT=5]="TXORIGINPUT",e[e.TXORIGOUTPUT=6]="TXORIGOUTPUT",e[e.TXPAYMENTREQ=7]="TXPAYMENTREQ"})(or||(d.Enum_RequestType=or={}));var ir;(function(e){e[e.LEDGER=0]="LEDGER",e[e.ICARUS=1]="ICARUS",e[e.ICARUS_TREZOR=2]="ICARUS_TREZOR"})(ir||(d.CardanoDerivationType=ir={}));var nr;(function(e){e[e.BASE=0]="BASE",e[e.BASE_SCRIPT_KEY=1]="BASE_SCRIPT_KEY",e[e.BASE_KEY_SCRIPT=2]="BASE_KEY_SCRIPT",e[e.BASE_SCRIPT_SCRIPT=3]="BASE_SCRIPT_SCRIPT",e[e.POINTER=4]="POINTER",e[e.POINTER_SCRIPT=5]="POINTER_SCRIPT",e[e.ENTERPRISE=6]="ENTERPRISE",e[e.ENTERPRISE_SCRIPT=7]="ENTERPRISE_SCRIPT",e[e.BYRON=8]="BYRON",e[e.REWARD=14]="REWARD",e[e.REWARD_SCRIPT=15]="REWARD_SCRIPT"})(nr||(d.CardanoAddressType=nr={}));var sr;(function(e){e[e.PUB_KEY=0]="PUB_KEY",e[e.ALL=1]="ALL",e[e.ANY=2]="ANY",e[e.N_OF_K=3]="N_OF_K",e[e.INVALID_BEFORE=4]="INVALID_BEFORE",e[e.INVALID_HEREAFTER=5]="INVALID_HEREAFTER"})(sr||(d.CardanoNativeScriptType=sr={}));var ar;(function(e){e[e.HIDE=0]="HIDE",e[e.BECH32=1]="BECH32",e[e.POLICY_ID=2]="POLICY_ID"})(ar||(d.CardanoNativeScriptHashDisplayFormat=ar={}));var cr;(function(e){e[e.ARRAY_LEGACY=0]="ARRAY_LEGACY",e[e.MAP_BABBAGE=1]="MAP_BABBAGE"})(cr||(d.CardanoTxOutputSerializationFormat=cr={}));var dr;(function(e){e[e.STAKE_REGISTRATION=0]="STAKE_REGISTRATION",e[e.STAKE_DEREGISTRATION=1]="STAKE_DEREGISTRATION",e[e.STAKE_DELEGATION=2]="STAKE_DELEGATION",e[e.STAKE_POOL_REGISTRATION=3]="STAKE_POOL_REGISTRATION"})(dr||(d.CardanoCertificateType=dr={}));var ur;(function(e){e[e.SINGLE_HOST_IP=0]="SINGLE_HOST_IP",e[e.SINGLE_HOST_NAME=1]="SINGLE_HOST_NAME",e[e.MULTIPLE_HOST_NAME=2]="MULTIPLE_HOST_NAME"})(ur||(d.CardanoPoolRelayType=ur={}));var lr;(function(e){e[e.NONE=0]="NONE",e[e.CVOTE_REGISTRATION_SIGNATURE=1]="CVOTE_REGISTRATION_SIGNATURE"})(lr||(d.CardanoTxAuxiliaryDataSupplementType=lr={}));var pr;(function(e){e[e.CIP15=0]="CIP15",e[e.CIP36=1]="CIP36"})(pr||(d.CardanoCVoteRegistrationFormat=pr={}));var _r;(function(e){e[e.ORDINARY_TRANSACTION=0]="ORDINARY_TRANSACTION",e[e.POOL_REGISTRATION_AS_OWNER=1]="POOL_REGISTRATION_AS_OWNER",e[e.MULTISIG_TRANSACTION=2]="MULTISIG_TRANSACTION",e[e.PLUTUS_TRANSACTION=3]="PLUTUS_TRANSACTION"})(_r||(d.CardanoTxSigningMode=_r={}));var fr;(function(e){e[e.BYRON_WITNESS=0]="BYRON_WITNESS",e[e.SHELLEY_WITNESS=1]="SHELLEY_WITNESS"})(fr||(d.CardanoTxWitnessType=fr={}));var Er;(function(e){e[e.Failure_UnexpectedMessage=1]="Failure_UnexpectedMessage",e[e.Failure_ButtonExpected=2]="Failure_ButtonExpected",e[e.Failure_DataError=3]="Failure_DataError",e[e.Failure_ActionCancelled=4]="Failure_ActionCancelled",e[e.Failure_PinExpected=5]="Failure_PinExpected",e[e.Failure_PinCancelled=6]="Failure_PinCancelled",e[e.Failure_PinInvalid=7]="Failure_PinInvalid",e[e.Failure_InvalidSignature=8]="Failure_InvalidSignature",e[e.Failure_ProcessError=9]="Failure_ProcessError",e[e.Failure_NotEnoughFunds=10]="Failure_NotEnoughFunds",e[e.Failure_NotInitialized=11]="Failure_NotInitialized",e[e.Failure_PinMismatch=12]="Failure_PinMismatch",e[e.Failure_WipeCodeMismatch=13]="Failure_WipeCodeMismatch",e[e.Failure_InvalidSession=14]="Failure_InvalidSession",e[e.Failure_FirmwareError=99]="Failure_FirmwareError"})(Er||(d.FailureType=Er={}));var hr;(function(e){e[e.ButtonRequest_Other=1]="ButtonRequest_Other",e[e.ButtonRequest_FeeOverThreshold=2]="ButtonRequest_FeeOverThreshold",e[e.ButtonRequest_ConfirmOutput=3]="ButtonRequest_ConfirmOutput",e[e.ButtonRequest_ResetDevice=4]="ButtonRequest_ResetDevice",e[e.ButtonRequest_ConfirmWord=5]="ButtonRequest_ConfirmWord",e[e.ButtonRequest_WipeDevice=6]="ButtonRequest_WipeDevice",e[e.ButtonRequest_ProtectCall=7]="ButtonRequest_ProtectCall",e[e.ButtonRequest_SignTx=8]="ButtonRequest_SignTx",e[e.ButtonRequest_FirmwareCheck=9]="ButtonRequest_FirmwareCheck",e[e.ButtonRequest_Address=10]="ButtonRequest_Address",e[e.ButtonRequest_PublicKey=11]="ButtonRequest_PublicKey",e[e.ButtonRequest_MnemonicWordCount=12]="ButtonRequest_MnemonicWordCount",e[e.ButtonRequest_MnemonicInput=13]="ButtonRequest_MnemonicInput",e[e._Deprecated_ButtonRequest_PassphraseType=14]="_Deprecated_ButtonRequest_PassphraseType",e[e.ButtonRequest_UnknownDerivationPath=15]="ButtonRequest_UnknownDerivationPath",e[e.ButtonRequest_RecoveryHomepage=16]="ButtonRequest_RecoveryHomepage",e[e.ButtonRequest_Success=17]="ButtonRequest_Success",e[e.ButtonRequest_Warning=18]="ButtonRequest_Warning",e[e.ButtonRequest_PassphraseEntry=19]="ButtonRequest_PassphraseEntry",e[e.ButtonRequest_PinEntry=20]="ButtonRequest_PinEntry"})(hr||(d.Enum_ButtonRequestType=hr={}));var mr;(function(e){e[e.PinMatrixRequestType_Current=1]="PinMatrixRequestType_Current",e[e.PinMatrixRequestType_NewFirst=2]="PinMatrixRequestType_NewFirst",e[e.PinMatrixRequestType_NewSecond=3]="PinMatrixRequestType_NewSecond",e[e.PinMatrixRequestType_WipeCodeFirst=4]="PinMatrixRequestType_WipeCodeFirst",e[e.PinMatrixRequestType_WipeCodeSecond=5]="PinMatrixRequestType_WipeCodeSecond"})(mr||(d.Enum_PinMatrixRequestType=mr={}));var gr;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.INFO=2]="INFO"})(gr||(d.DebugButton=gr={}));var br;(function(e){e[e.LEFT_BTN=0]="LEFT_BTN",e[e.MIDDLE_BTN=1]="MIDDLE_BTN",e[e.RIGHT_BTN=2]="RIGHT_BTN"})(br||(d.DebugPhysicalButton=br={}));var Sr;(function(e){e[e.NETWORK=0]="NETWORK",e[e.TOKEN=1]="TOKEN"})(Sr||(d.EthereumDefinitionType=Sr={}));var vr;(function(e){e[e.UINT=1]="UINT",e[e.INT=2]="INT",e[e.BYTES=3]="BYTES",e[e.STRING=4]="STRING",e[e.BOOL=5]="BOOL",e[e.ADDRESS=6]="ADDRESS",e[e.ARRAY=7]="ARRAY",e[e.STRUCT=8]="STRUCT"})(vr||(d.EthereumDataType=vr={}));var Or;(function(e){e[e.Bip39=0]="Bip39",e[e.Slip39_Basic=1]="Slip39_Basic",e[e.Slip39_Advanced=2]="Slip39_Advanced"})(Or||(d.Enum_BackupType=Or={}));var Tr;(function(e){e[e.Strict=0]="Strict",e[e.PromptAlways=1]="PromptAlways",e[e.PromptTemporarily=2]="PromptTemporarily"})(Tr||(d.Enum_SafetyCheckLevel=Tr={}));var Ir;(function(e){e[e.Toif=1]="Toif",e[e.Jpeg=2]="Jpeg",e[e.ToiG=3]="ToiG"})(Ir||(d.Enum_HomescreenFormat=Ir={}));var Rr;(function(e){e[e.Capability_Bitcoin=1]="Capability_Bitcoin",e[e.Capability_Bitcoin_like=2]="Capability_Bitcoin_like",e[e.Capability_Binance=3]="Capability_Binance",e[e.Capability_Cardano=4]="Capability_Cardano",e[e.Capability_Crypto=5]="Capability_Crypto",e[e.Capability_EOS=6]="Capability_EOS",e[e.Capability_Ethereum=7]="Capability_Ethereum",e[e.Capability_Lisk=8]="Capability_Lisk",e[e.Capability_Monero=9]="Capability_Monero",e[e.Capability_NEM=10]="Capability_NEM",e[e.Capability_Ripple=11]="Capability_Ripple",e[e.Capability_Stellar=12]="Capability_Stellar",e[e.Capability_Tezos=13]="Capability_Tezos",e[e.Capability_U2F=14]="Capability_U2F",e[e.Capability_Shamir=15]="Capability_Shamir",e[e.Capability_ShamirGroups=16]="Capability_ShamirGroups",e[e.Capability_PassphraseEntry=17]="Capability_PassphraseEntry",e[e.Capability_Solana=18]="Capability_Solana"})(Rr||(d.Enum_Capability=Rr={}));var Pr;(function(e){e[e.DISABLE=0]="DISABLE",e[e.ENABLE=1]="ENABLE",e[e.REFRESH=2]="REFRESH"})(Pr||(d.SdProtectOperationType=Pr={}));var Nr;(function(e){e[e.RecoveryDeviceType_ScrambledWords=0]="RecoveryDeviceType_ScrambledWords",e[e.RecoveryDeviceType_Matrix=1]="RecoveryDeviceType_Matrix"})(Nr||(d.RecoveryDeviceType=Nr={}));var Ar;(function(e){e[e.WordRequestType_Plain=0]="WordRequestType_Plain",e[e.WordRequestType_Matrix9=1]="WordRequestType_Matrix9",e[e.WordRequestType_Matrix6=2]="WordRequestType_Matrix6"})(Ar||(d.Enum_WordRequestType=Ar={}));var wr;(function(e){e[e.MAINNET=0]="MAINNET",e[e.TESTNET=1]="TESTNET",e[e.STAGENET=2]="STAGENET",e[e.FAKECHAIN=3]="FAKECHAIN"})(wr||(d.MoneroNetworkType=wr={}));var Ur;(function(e){e[e.MosaicLevy_Absolute=1]="MosaicLevy_Absolute",e[e.MosaicLevy_Percentile=2]="MosaicLevy_Percentile"})(Ur||(d.NEMMosaicLevy=Ur={}));var yr;(function(e){e[e.SupplyChange_Increase=1]="SupplyChange_Increase",e[e.SupplyChange_Decrease=2]="SupplyChange_Decrease"})(yr||(d.NEMSupplyChangeType=yr={}));var Mr;(function(e){e[e.CosignatoryModification_Add=1]="CosignatoryModification_Add",e[e.CosignatoryModification_Delete=2]="CosignatoryModification_Delete"})(Mr||(d.NEMModificationType=Mr={}));var Lr;(function(e){e[e.ImportanceTransfer_Activate=1]="ImportanceTransfer_Activate",e[e.ImportanceTransfer_Deactivate=2]="ImportanceTransfer_Deactivate"})(Lr||(d.NEMImportanceTransferMode=Lr={}));var Cr;(function(e){e[e.NATIVE=0]="NATIVE",e[e.ALPHANUM4=1]="ALPHANUM4",e[e.ALPHANUM12=2]="ALPHANUM12"})(Cr||(d.StellarAssetType=Cr={}));var Br;(function(e){e[e.NONE=0]="NONE",e[e.TEXT=1]="TEXT",e[e.ID=2]="ID",e[e.HASH=3]="HASH",e[e.RETURN=4]="RETURN"})(Br||(d.StellarMemoType=Br={}));var Dr;(function(e){e[e.ACCOUNT=0]="ACCOUNT",e[e.PRE_AUTH=1]="PRE_AUTH",e[e.HASH=2]="HASH"})(Dr||(d.StellarSignerType=Dr={}));var xr;(function(e){e[e.Implicit=0]="Implicit",e[e.Originated=1]="Originated"})(xr||(d.TezosContractType=xr={}));var Fr;(function(e){e[e.Yay=0]="Yay",e[e.Nay=1]="Nay",e[e.Pass=2]="Pass"})(Fr||(d.TezosBallotType=Fr={}))});var Qr=u(y=>{"use strict";i();n();Object.defineProperty(y,"__esModule",{value:!0});y.PROTO=y.NEM=y.CARDANO=y.NETWORK=y.ERRORS=void 0;var ge=J();y.ERRORS=ge.__importStar(Re());y.NETWORK=ge.__importStar(zt());y.CARDANO=ge.__importStar(Gt());y.NEM=ge.__importStar(Kt());y.PROTO=ge.__importStar(pt())});var ne=u(j=>{"use strict";i();n();Object.defineProperty(j,"__esModule",{value:!0});j.createUiMessage=j.UI_REQUEST=j.UI_EVENT=void 0;j.UI_EVENT="UI_EVENT";j.UI_REQUEST={TRANSPORT:"ui-no_transport",BOOTLOADER:"ui-device_bootloader_mode",NOT_IN_BOOTLOADER:"ui-device_not_in_bootloader_mode",REQUIRE_MODE:"ui-device_require_mode",INITIALIZE:"ui-device_not_initialized",SEEDLESS:"ui-device_seedless",FIRMWARE_OLD:"ui-device_firmware_old",FIRMWARE_OUTDATED:"ui-device_firmware_outdated",FIRMWARE_NOT_SUPPORTED:"ui-device_firmware_unsupported",FIRMWARE_NOT_COMPATIBLE:"ui-device_firmware_not_compatible",FIRMWARE_NOT_INSTALLED:"ui-device_firmware_not_installed",FIRMWARE_PROGRESS:"ui-firmware-progress",DEVICE_NEEDS_BACKUP:"ui-device_needs_backup",REQUEST_UI_WINDOW:"ui-request_window",CLOSE_UI_WINDOW:"ui-close_window",REQUEST_PERMISSION:"ui-request_permission",REQUEST_CONFIRMATION:"ui-request_confirmation",REQUEST_PIN:"ui-request_pin",INVALID_PIN:"ui-invalid_pin",REQUEST_PASSPHRASE:"ui-request_passphrase",REQUEST_PASSPHRASE_ON_DEVICE:"ui-request_passphrase_on_device",INVALID_PASSPHRASE:"ui-invalid_passphrase",CONNECT:"ui-connect",LOADING:"ui-loading",SET_OPERATION:"ui-set_operation",SELECT_DEVICE:"ui-select_device",SELECT_ACCOUNT:"ui-select_account",SELECT_FEE:"ui-select_fee",UPDATE_CUSTOM_FEE:"ui-update_custom_fee",INSUFFICIENT_FUNDS:"ui-insufficient_funds",REQUEST_BUTTON:"ui-button",REQUEST_WORD:"ui-request_word",LOGIN_CHALLENGE_REQUEST:"ui-login_challenge_request",BUNDLE_PROGRESS:"ui-bundle_progress",ADDRESS_VALIDATION:"ui-address_validation",IFRAME_FAILURE:"ui-iframe_failure"};var nn=(e,t)=>({event:j.UI_EVENT,type:e,payload:t});j.createUiMessage=nn});var _t=u(se=>{"use strict";i();n();Object.defineProperty(se,"__esModule",{value:!0});se.createUiResponse=se.UI_RESPONSE=void 0;var sn=ne();se.UI_RESPONSE={RECEIVE_PERMISSION:"ui-receive_permission",RECEIVE_CONFIRMATION:"ui-receive_confirmation",RECEIVE_PIN:"ui-receive_pin",RECEIVE_PASSPHRASE:"ui-receive_passphrase",RECEIVE_DEVICE:"ui-receive_device",RECEIVE_ACCOUNT:"ui-receive_account",RECEIVE_FEE:"ui-receive_fee",RECEIVE_WORD:"ui-receive_word",INVALID_PASSPHRASE_ACTION:"ui-invalid_passphrase_action",CHANGE_SETTINGS:"ui-change_settings",LOGIN_CHALLENGE_RESPONSE:"ui-login_challenge_response"};var an=(e,t)=>({event:sn.UI_EVENT,type:e,payload:t});se.createUiResponse=an});var jr=u(z=>{"use strict";i();n();Object.defineProperty(z,"__esModule",{value:!0});z.createBlockchainMessage=z.BLOCKCHAIN=z.BLOCKCHAIN_EVENT=void 0;z.BLOCKCHAIN_EVENT="BLOCKCHAIN_EVENT";z.BLOCKCHAIN={CONNECT:"blockchain-connect",ERROR:"blockchain-error",BLOCK:"blockchain-block",NOTIFICATION:"blockchain-notification",FIAT_RATES_UPDATE:"fiat-rates-update"};var cn=(e,t)=>({event:z.BLOCKCHAIN_EVENT,type:e,payload:t});z.createBlockchainMessage=cn});var zr=u(V=>{"use strict";i();n();Object.defineProperty(V,"__esModule",{value:!0});V.createResponseMessage=V.RESPONSE_EVENT=void 0;var dn=Re();V.RESPONSE_EVENT="RESPONSE_EVENT";var un=(e,t,r)=>({event:V.RESPONSE_EVENT,type:V.RESPONSE_EVENT,id:e,success:t,payload:t?r:(0,dn.serializeError)(r)});V.createResponseMessage=un});var kr=u(W=>{"use strict";i();n();Object.defineProperty(W,"__esModule",{value:!0});W.createErrorMessage=W.parseMessage=W.CORE_EVENT=void 0;W.CORE_EVENT="CORE_EVENT";var ln=e=>{let t={event:e.event,type:e.type,payload:e.payload};return typeof e.id=="number"&&(t.id=e.id),typeof e.success=="boolean"&&(t.success=e.success),t};W.parseMessage=ln;var pn=e=>({success:!1,payload:{error:e.message,code:e.code}});W.createErrorMessage=pn});var qr=u(k=>{"use strict";i();n();Object.defineProperty(k,"__esModule",{value:!0});k.createDeviceMessage=k.DEVICE=k.DEVICE_EVENT=void 0;k.DEVICE_EVENT="DEVICE_EVENT";k.DEVICE={CONNECT:"device-connect",CONNECT_UNACQUIRED:"device-connect_unacquired",DISCONNECT:"device-disconnect",CHANGED:"device-changed",ACQUIRE:"device-acquire",RELEASE:"device-release",ACQUIRED:"device-acquired",RELEASED:"device-released",USED_ELSEWHERE:"device-used_elsewhere",LOADING:"device-loading",BUTTON:"button",PIN:"pin",PASSPHRASE:"passphrase",PASSPHRASE_ON_DEVICE:"passphrase_on_device",WORD:"word"};var _n=(e,t)=>({event:k.DEVICE_EVENT,type:e,payload:t});k.createDeviceMessage=_n});var Gr=u(ae=>{"use strict";i();n();Object.defineProperty(ae,"__esModule",{value:!0});ae.createIFrameMessage=ae.IFRAME=void 0;var fn=ne();ae.IFRAME={BOOTSTRAP:"iframe-bootstrap",LOADED:"iframe-loaded",INIT:"iframe-init",ERROR:"iframe-error",CALL:"iframe-call",LOG:"iframe-log"};var En=(e,t)=>({event:fn.UI_EVENT,type:e,payload:t});ae.createIFrameMessage=En});var Vr=u(ce=>{"use strict";i();n();Object.defineProperty(ce,"__esModule",{value:!0});ce.createPopupMessage=ce.POPUP=void 0;var hn=ne();ce.POPUP={BOOTSTRAP:"popup-bootstrap",LOADED:"popup-loaded",CORE_LOADED:"popup-core-loaded",INIT:"popup-init",ERROR:"popup-error",EXTENSION_USB_PERMISSIONS:"open-usb-permissions",HANDSHAKE:"popup-handshake",CLOSED:"popup-closed",CANCEL_POPUP_REQUEST:"ui-cancel-popup-request",CLOSE_WINDOW:"window.close",ANALYTICS_RESPONSE:"popup-analytics-response",CONTENT_SCRIPT_LOADED:"popup-content-script-loaded",METHOD_INFO:"popup-method-info"};var mn=(e,t)=>({event:hn.UI_EVENT,type:e,payload:t});ce.createPopupMessage=mn});var ft=u(R=>{"use strict";i();n();Object.defineProperty(R,"__esModule",{value:!0});R.TRANSPORT=R.ACTION_TIMEOUT=R.TREZOR_USB_DESCRIPTORS=R.T1_HID_VENDOR=R.ENDPOINT_ID=R.INTERFACE_ID=R.CONFIGURATION_ID=void 0;R.CONFIGURATION_ID=1;R.INTERFACE_ID=0;R.ENDPOINT_ID=1;R.T1_HID_VENDOR=21324;R.TREZOR_USB_DESCRIPTORS=[{vendorId:21324,productId:1},{vendorId:4617,productId:21440},{vendorId:4617,productId:21441}];R.ACTION_TIMEOUT=1e4;R.TRANSPORT={START:"transport-start",ERROR:"transport-error",UPDATE:"transport-update",DISABLE_WEBUSB:"transport-disable_webusb",REQUEST_DEVICE:"transport-request_device"}});var Wr=u(q=>{"use strict";i();n();Object.defineProperty(q,"__esModule",{value:!0});q.createTransportMessage=q.TRANSPORT_EVENT=q.TRANSPORT=void 0;var gn=Re(),bn=ft();Object.defineProperty(q,"TRANSPORT",{enumerable:!0,get:function(){return bn.TRANSPORT}});q.TRANSPORT_EVENT="TRANSPORT_EVENT";var Sn=(e,t)=>({event:q.TRANSPORT_EVENT,type:e,payload:"error"in t?(0,gn.serializeError)(t):t});q.createTransportMessage=Sn});var Kr=u(Hr=>{"use strict";i();n();Object.defineProperty(Hr,"__esModule",{value:!0})});var Et=u(A=>{"use strict";i();n();Object.defineProperty(A,"__esModule",{value:!0});A.UI=void 0;var B=J(),vn=ne(),On=_t();B.__exportStar(jr(),A);B.__exportStar(zr(),A);B.__exportStar(kr(),A);B.__exportStar(qr(),A);B.__exportStar(Gr(),A);B.__exportStar(Vr(),A);B.__exportStar(Wr(),A);B.__exportStar(Kr(),A);B.__exportStar(ne(),A);B.__exportStar(_t(),A);A.UI={...vn.UI_REQUEST,...On.UI_RESPONSE}});var $r=u(Yr=>{"use strict";i();n();Object.defineProperty(Yr,"__esModule",{value:!0})});var Xr=u(Jr=>{"use strict";i();n();Object.defineProperty(Jr,"__esModule",{value:!0})});var eo=u(Zr=>{"use strict";i();n();Object.defineProperty(Zr,"__esModule",{value:!0})});var ro=u(de=>{"use strict";i();n();Object.defineProperty(de,"__esModule",{value:!0});de.DeviceModelInternal=de.FirmwareType=void 0;var to;(function(e){e.BitcoinOnly="bitcoin-only",e.Regular="regular"})(to||(de.FirmwareType=to={}));var Tn=pt();Object.defineProperty(de,"DeviceModelInternal",{enumerable:!0,get:function(){return Tn.DeviceModelInternal}})});var io=u(oo=>{"use strict";i();n();Object.defineProperty(oo,"__esModule",{value:!0})});var so=u(no=>{"use strict";i();n();Object.defineProperty(no,"__esModule",{value:!0})});var co=u(ao=>{"use strict";i();n();Object.defineProperty(ao,"__esModule",{value:!0})});var lo=u(uo=>{"use strict";i();n();Object.defineProperty(uo,"__esModule",{value:!0})});var _o=u(po=>{"use strict";i();n();Object.defineProperty(po,"__esModule",{value:!0})});var Eo=u(fo=>{"use strict";i();n();Object.defineProperty(fo,"__esModule",{value:!0})});var mo=u(ho=>{"use strict";i();n();Object.defineProperty(ho,"__esModule",{value:!0})});var bo=u(go=>{"use strict";i();n();Object.defineProperty(go,"__esModule",{value:!0})});var vo=u(So=>{"use strict";i();n();Object.defineProperty(So,"__esModule",{value:!0})});var To=u(Oo=>{"use strict";i();n();Object.defineProperty(Oo,"__esModule",{value:!0})});var Ro=u(Io=>{"use strict";i();n();Object.defineProperty(Io,"__esModule",{value:!0})});var No=u(Po=>{"use strict";i();n();Object.defineProperty(Po,"__esModule",{value:!0})});var wo=u(Ao=>{"use strict";i();n();Object.defineProperty(Ao,"__esModule",{value:!0})});var Uo=u(T=>{"use strict";i();n();Object.defineProperty(T,"__esModule",{value:!0});var I=J();I.__exportStar($r(),T);I.__exportStar(Xr(),T);I.__exportStar(eo(),T);I.__exportStar(ro(),T);I.__exportStar(io(),T);I.__exportStar(so(),T);I.__exportStar(co(),T);I.__exportStar(lo(),T);I.__exportStar(_o(),T);I.__exportStar(Eo(),T);I.__exportStar(mo(),T);I.__exportStar(bo(),T);I.__exportStar(vo(),T);I.__exportStar(To(),T);I.__exportStar(Ro(),T);I.__exportStar(No(),T);I.__exportStar(wo(),T)});var yo=u(X=>{"use strict";i();n();Object.defineProperty(X,"__esModule",{value:!0});X.DEFAULT_DOMAIN=X.VERSION=void 0;X.VERSION="9.1.6";var In=X.VERSION.split(".").map(e=>parseInt(e,10));X.DEFAULT_DOMAIN=`https://connect.trezor.io/${In[0]}/`});var Mo=u(D=>{"use strict";i();n();Object.defineProperty(D,"__esModule",{value:!0});D.parseConnectSettings=D.corsValidator=D.DEFAULT_PRIORITY=void 0;var ue=yo();D.DEFAULT_PRIORITY=2;var Rn={configSrc:"./data/config.json",version:ue.VERSION,debug:!1,priority:D.DEFAULT_PRIORITY,trustedHost:!0,connectSrc:ue.DEFAULT_DOMAIN,iframeSrc:`${ue.DEFAULT_DOMAIN}iframe.html`,popup:!1,popupSrc:`${ue.DEFAULT_DOMAIN}popup.html`,webusbSrc:`${ue.DEFAULT_DOMAIN}webusb.html`,transports:void 0,pendingTransportEvent:!0,env:"node",lazyLoad:!1,timestamp:new Date().getTime(),interactionTimeout:600,sharedLogger:!0},Pn=e=>{if(!!e&&typeof e.email=="string"&&typeof e.appUrl=="string")return{email:e.email,appUrl:e.appUrl}},Nn=e=>{if(typeof e=="string"&&(e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*trezor\.io\//)||e.match(/^https?:\/\/localhost:[58][0-9]{3}\//)||e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*sldev\.cz\//)||e.match(/^https?:\/\/([A-Za-z0-9\-_]+\.)*trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad\.onion\//)))return e};D.corsValidator=Nn;var An=(e={})=>{var t;let r={...Rn};"debug"in e&&(typeof e.debug=="boolean"?r.debug=e.debug:typeof e.debug=="string"&&(r.debug=e.debug==="true")),e.trustedHost===!1&&(r.trustedHost=e.trustedHost),typeof e.connectSrc=="string"&&((t=e.connectSrc)===null||t===void 0?void 0:t.startsWith("http"))?r.connectSrc=(0,D.corsValidator)(e.connectSrc):r.trustedHost&&(r.connectSrc=e.connectSrc);let o=r.connectSrc||ue.DEFAULT_DOMAIN;return r.iframeSrc=`${o}iframe.html`,r.popupSrc=`${o}popup.html`,r.webusbSrc=`${o}webusb.html`,typeof e.transportReconnect=="boolean"&&(r.transportReconnect=e.transportReconnect),typeof e.webusb=="boolean"&&(r.webusb=e.webusb),Array.isArray(e.transports)&&(r.transports=e.transports),typeof e.popup=="boolean"&&(r.popup=e.popup),typeof e.lazyLoad=="boolean"&&(r.lazyLoad=e.lazyLoad),typeof e.pendingTransportEvent=="boolean"&&(r.pendingTransportEvent=e.pendingTransportEvent),typeof e.extension=="string"&&(r.extension=e.extension),typeof e.env=="string"&&(r.env=e.env),typeof e.timestamp=="number"&&(r.timestamp=e.timestamp),typeof e.interactionTimeout=="number"&&(r.interactionTimeout=e.interactionTimeout),typeof e.manifest=="object"&&(r.manifest=Pn(e.manifest)),typeof e.sharedLogger=="boolean"&&(r.sharedLogger=e.sharedLogger),r};D.parseConnectSettings=An});var le=u(Z=>{"use strict";i();n();Object.defineProperty(Z,"__esModule",{value:!0});Z.parseConnectSettings=void 0;var ht=J();ht.__exportStar(Qr(),Z);ht.__exportStar(Et(),Z);ht.__exportStar(Uo(),Z);var wn=Mo();Object.defineProperty(Z,"parseConnectSettings",{enumerable:!0,get:function(){return wn.parseConnectSettings}})});var Lo=u(Pe=>{"use strict";i();n();Object.defineProperty(Pe,"__esModule",{value:!0});Pe.factory=void 0;var H=Et(),Un=({eventEmitter:e,manifest:t,init:r,call:o,requestLogin:a,uiResponse:p,renderWebUSBButton:_,disableWebUSB:h,requestWebUSBDevice:M,cancel:L,dispose:S})=>({manifest:t,init:r,getSettings:()=>o({method:"getSettings"}),on:(s,Q)=>{e.on(s,Q)},off:(s,Q)=>{e.removeListener(s,Q)},removeAllListeners:s=>{typeof s=="string"?e.removeAllListeners(s):e.removeAllListeners()},uiResponse:p,blockchainGetAccountBalanceHistory:s=>o({...s,method:"blockchainGetAccountBalanceHistory"}),blockchainGetCurrentFiatRates:s=>o({...s,method:"blockchainGetCurrentFiatRates"}),blockchainGetFiatRatesForTimestamps:s=>o({...s,method:"blockchainGetFiatRatesForTimestamps"}),blockchainDisconnect:s=>o({...s,method:"blockchainDisconnect"}),blockchainEstimateFee:s=>o({...s,method:"blockchainEstimateFee"}),blockchainGetTransactions:s=>o({...s,method:"blockchainGetTransactions"}),blockchainSetCustomBackend:s=>o({...s,method:"blockchainSetCustomBackend"}),blockchainSubscribe:s=>o({...s,method:"blockchainSubscribe"}),blockchainSubscribeFiatRates:s=>o({...s,method:"blockchainSubscribeFiatRates"}),blockchainUnsubscribe:s=>o({...s,method:"blockchainUnsubscribe"}),blockchainUnsubscribeFiatRates:s=>o({...s,method:"blockchainUnsubscribeFiatRates"}),requestLogin:s=>a(s),cardanoGetAddress:s=>o({...s,method:"cardanoGetAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),cardanoGetNativeScriptHash:s=>o({...s,method:"cardanoGetNativeScriptHash"}),cardanoGetPublicKey:s=>o({...s,method:"cardanoGetPublicKey"}),cardanoSignTransaction:s=>o({...s,method:"cardanoSignTransaction"}),cardanoComposeTransaction:s=>o({...s,method:"cardanoComposeTransaction"}),cipherKeyValue:s=>o({...s,method:"cipherKeyValue"}),composeTransaction:s=>o({...s,method:"composeTransaction"}),ethereumGetAddress:s=>o({...s,method:"ethereumGetAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),ethereumGetPublicKey:s=>o({...s,method:"ethereumGetPublicKey"}),ethereumSignMessage:s=>o({...s,method:"ethereumSignMessage"}),ethereumSignTransaction:s=>o({...s,method:"ethereumSignTransaction"}),ethereumSignTypedData:s=>o({...s,method:"ethereumSignTypedData"}),ethereumVerifyMessage:s=>o({...s,method:"ethereumVerifyMessage"}),getAccountDescriptor:s=>o({...s,method:"getAccountDescriptor"}),getAccountInfo:s=>o({...s,method:"getAccountInfo"}),getAddress:s=>o({...s,method:"getAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),getDeviceState:s=>o({...s,method:"getDeviceState"}),getFeatures:s=>o({...s,method:"getFeatures"}),getFirmwareHash:s=>o({...s,method:"getFirmwareHash"}),getOwnershipId:s=>o({...s,method:"getOwnershipId"}),getOwnershipProof:s=>o({...s,method:"getOwnershipProof"}),getPublicKey:s=>o({...s,method:"getPublicKey"}),nemGetAddress:s=>o({...s,method:"nemGetAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),nemSignTransaction:s=>o({...s,method:"nemSignTransaction"}),pushTransaction:s=>o({...s,method:"pushTransaction"}),rippleGetAddress:s=>o({...s,method:"rippleGetAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),rippleSignTransaction:s=>o({...s,method:"rippleSignTransaction"}),signMessage:s=>o({...s,method:"signMessage"}),signTransaction:s=>o({...s,method:"signTransaction"}),solanaGetPublicKey:s=>o({...s,method:"solanaGetPublicKey"}),solanaGetAddress:s=>o({...s,method:"solanaGetAddress"}),solanaSignTransaction:s=>o({...s,method:"solanaSignTransaction"}),stellarGetAddress:s=>o({...s,method:"stellarGetAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),stellarSignTransaction:s=>o({...s,method:"stellarSignTransaction"}),tezosGetAddress:s=>o({...s,method:"tezosGetAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),tezosGetPublicKey:s=>o({...s,method:"tezosGetPublicKey"}),tezosSignTransaction:s=>o({...s,method:"tezosSignTransaction"}),unlockPath:s=>o({...s,method:"unlockPath"}),eosGetPublicKey:s=>o({...s,method:"eosGetPublicKey"}),eosSignTransaction:s=>o({...s,method:"eosSignTransaction"}),binanceGetAddress:s=>o({...s,method:"binanceGetAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),binanceGetPublicKey:s=>o({...s,method:"binanceGetPublicKey"}),binanceSignTransaction:s=>o({...s,method:"binanceSignTransaction"}),verifyMessage:s=>o({...s,method:"verifyMessage"}),resetDevice:s=>o({...s,method:"resetDevice"}),wipeDevice:s=>o({...s,method:"wipeDevice"}),checkFirmwareAuthenticity:s=>o({...s,method:"checkFirmwareAuthenticity"}),applyFlags:s=>o({...s,method:"applyFlags"}),applySettings:s=>o({...s,method:"applySettings"}),authenticateDevice:s=>o({...s,method:"authenticateDevice"}),authorizeCoinjoin:s=>o({...s,method:"authorizeCoinjoin"}),cancelCoinjoinAuthorization:s=>o({...s,method:"cancelCoinjoinAuthorization"}),showDeviceTutorial:s=>o({...s,method:"showDeviceTutorial"}),backupDevice:s=>o({...s,method:"backupDevice"}),changePin:s=>o({...s,method:"changePin"}),firmwareUpdate:s=>o({...s,method:"firmwareUpdate"}),recoveryDevice:s=>o({...s,method:"recoveryDevice"}),getCoinInfo:s=>o({...s,method:"getCoinInfo"}),rebootToBootloader:s=>o({...s,method:"rebootToBootloader"}),setBusy:s=>o({...s,method:"setBusy"}),setProxy:s=>o({...s,method:"setProxy"}),dispose:S,cancel:L,renderWebUSBButton:_,disableWebUSB:h,requestWebUSBDevice:M});Pe.factory=Un});var mt=u(w=>{"use strict";i();n();Object.defineProperty(w,"__esModule",{value:!0});w.getLog=w.enableLogByPrefix=w.enableLog=w.setLogWriter=w.initLog=w.Log=void 0;var be="#bada55",Co="#20abd8",Bo="#f4a744",yn="#fbd948",Do={"@trezor/connect":`color: ${Co}; background: #000;`,"@trezor/connect-web":`color: ${Co}; background: #000;`,IFrame:`color: ${Bo}; background: #000;`,Core:`color: ${Bo}; background: #000;`,DeviceList:`color: ${be}; background: #000;`,Device:`color: ${be}; background: #000;`,DeviceCommands:`color: ${be}; background: #000;`,"@trezor/transport":`color: ${be}; background: #000;`,InteractionTimeout:`color: ${be}; background: #000;`,"@trezor/connect-popup":`color: ${yn}; background: #000;`},Mn=100,Ne=class{constructor(t,r,o){this.prefix=t,this.enabled=r,this.messages=[],this.css=typeof window<"u"&&Do[t]?Do[t]:"",o&&(this.logWriter=o)}addMessage(t,r,...o){let a={level:t,prefix:r,css:this.css,message:o,timestamp:Date.now()};if(this.messages.push(a),this.logWriter)try{this.logWriter.add(a)}catch(p){console.error("There was an error adding log message",p,a)}this.messages.length>Mn&&this.messages.shift()}setWriter(t){this.logWriter=t}log(...t){this.addMessage("log",this.prefix,...t),this.enabled&&console.log(`%c${this.prefix}`,this.css,...t)}error(...t){this.addMessage("error",this.prefix,...t),this.enabled&&console.error(`%c${this.prefix}`,this.css,...t)}warn(...t){this.addMessage("warn",this.prefix,...t),this.enabled&&console.warn(`%c${this.prefix}`,this.css,...t)}debug(...t){this.addMessage("debug",this.prefix,...t),this.enabled&&(this.css?console.log(`%c${this.prefix}`,this.css,...t):console.log(this.prefix,...t))}};w.Log=Ne;var x={},ee,Ln=(e,t,r)=>{let o=r||ee,a=new Ne(e,!!t,o);return x[e]=a,a};w.initLog=Ln;var Cn=e=>{Object.keys(x).forEach(t=>{if(ee=e(),ee){x[t].setWriter(ee);let{messages:r}=x[t];r.forEach(o=>{ee==null||ee.add(o)})}})};w.setLogWriter=Cn;var Bn=e=>{Object.keys(x).forEach(t=>{x[t].enabled=!!e})};w.enableLog=Bn;var Dn=(e,t)=>{x[e]&&(x[e].enabled=t)};w.enableLogByPrefix=Dn;var xn=()=>{let e=[];return Object.keys(x).forEach(t=>{e=e.concat(x[t].messages)}),e.sort((t,r)=>t.timestamp-r.timestamp),e};w.getLog=xn});var xo=u(Ae=>{"use strict";i();n();Object.defineProperty(Ae,"__esModule",{value:!0});Ae.config=void 0;var Fn=ft();Ae.config={webusb:Fn.TREZOR_USB_DESCRIPTORS,whitelist:[{origin:"chrome-extension://imloifkgjagghnncjkhggdhalmcnfklk",priority:1},{origin:"chrome-extension://niebkpllfhmpfbffbfifagfgoamhpflf",priority:1},{origin:"file://",priority:2},{origin:"trezor.io",priority:0},{origin:"sldev.cz",priority:0},{origin:"localhost",priority:0},{origin:"trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad.onion",priority:0}],management:[{origin:"trezor.io"},{origin:"sldev.cz"},{origin:"localhost"}],knownHosts:[{origin:"imloifkgjagghnncjkhggdhalmcnfklk",label:"Trezor Password Manager (Develop)",icon:""},{origin:"niebkpllfhmpfbffbfifagfgoamhpflf",label:"Trezor Password Manager",icon:""},{origin:"mnpfhpndmjholfdlhpkjfmjkgppmodaf",label:"MetaMask",icon:""},{origin:"webextension@metamask.io",label:"MetaMask",icon:""},{origin:"nkbihfbeogaeaoehlefnkodbefgpgknn",label:"MetaMask",icon:""},{origin:"file://",label:" ",icon:""}],onionDomains:{"trezor.io":"trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad.onion"},assets:[{name:"coins",url:"./data/coins.json"},{name:"coinsEth",url:"./data/coins-eth.json"},{name:"bridge",url:"./data/bridge/releases.json"},{name:"firmware-t1b1",url:"./data/firmware/t1b1/releases.json"},{name:"firmware-t2t1",url:"./data/firmware/t2t1/releases.json"},{name:"firmware-t2b1",url:"./data/firmware/t2b1/releases.json"}],messages:"./data/messages/messages.json",supportedBrowsers:{chrome:{version:59,download:"https://www.google.com/chrome/",update:"https://support.google.com/chrome/answer/95414"},chromium:{version:59,download:"https://www.chromium.org/",update:"https://www.chromium.org/"},electron:{version:0,download:"https://www.electronjs.org/",update:"https://www.electronjs.org/"},firefox:{version:54,download:"https://www.mozilla.org/en-US/firefox/new/",update:"https://support.mozilla.org/en-US/kb/update-firefox-latest-version"}},supportedFirmware:[{coin:["xrp","txrp"],methods:["getAccountInfo"],min:{T1B1:"0",T2T1:"2.1.0"},max:void 0,comment:["Since firmware 2.1.0 there is a new protobuf field 'destination_tag' in RippleSignTx"]},{coin:["bnb"],min:{T1B1:"1.9.0",T2T1:"2.3.0"},comment:["There were protobuf backwards incompatible changes with introduction of 1.9.0/2.3.0 firmwares"]},{coin:["eth","tsep","tgor"],min:{T1B1:"1.8.0",T2T1:"2.1.0"},comment:["There were protobuf backwards incompatible changes."]},{methods:["rippleGetAddress","rippleSignTransaction"],min:{T1B1:"0",T2T1:"2.1.0"},comment:["Since firmware 2.1.0 there is a new protobuf field 'destination_tag' in RippleSignTx"]},{methods:["cardanoGetAddress","cardanoGetPublicKey"],min:{T1B1:"0",T2T1:"2.3.2"},comment:["Shelley fork support since firmware 2.3.2"]},{methods:["cardanoSignTransaction"],min:{T1B1:"0",T2T1:"2.4.2"},comment:["Non-streamed signing no longer supported"]},{methods:["cardanoGetNativeScriptHash"],min:{T1B1:"0",T2T1:"2.4.3"},comment:["Cardano GetNativeScriptHash call added in 2.4.3"]},{methods:["tezosSignTransaction"],min:{T1B1:"0",T2T1:"2.1.8"},comment:["Since 2.1.8 there are new protobuf fields in tezos transaction (Babylon fork)"]},{methods:["stellarSignTransaction"],min:{T1B1:"1.9.0",T2T1:"2.3.0"},comment:["There were protobuf backwards incompatible changes with introduction of 1.9.0/2.3.0 firmwares"]},{capabilities:["replaceTransaction","amountUnit"],min:{T1B1:"1.9.4",T2T1:"2.3.5"},comment:["new sign tx process since 1.9.4/2.3.5"]},{capabilities:["decreaseOutput"],min:{T1B1:"1.10.0",T2T1:"2.4.0"},comment:["allow reduce output in RBF transaction since 1.10.0/2.4.0"]},{capabilities:["eip1559"],min:{T1B1:"1.10.4",T2T1:"2.4.2"},comment:["new eth transaction pricing mechanism (EIP1559) since 1.10.4/2.4.2"]},{capabilities:["taproot","signMessageNoScriptType"],min:{T1B1:"1.10.4",T2T1:"2.4.3"},comment:["new btc accounts taproot since 1.10.4/2.4.3 (BTC + TEST only)","SignMessage with no_script_type support"]},{coin:["dcr","tdcr"],methods:["signTransaction"],min:{T1B1:"1.10.1",T2T1:"2.4.0"},comment:[""]},{methods:["ethereumSignTypedData"],min:{T1B1:"1.10.5",T2T1:"2.4.3"},comment:["EIP-712 typed signing support added in 1.10.5/2.4.3"]},{capabilities:["eip712-domain-only"],min:{T1B1:"1.10.6",T2T1:"2.4.4"},comment:["EIP-712 domain-only signing, when primaryType=EIP712Domain"]},{capabilities:["coinjoin"],methods:["authorizeCoinjoin","cancelCoinjoinAuthorization","getOwnershipId","getOwnershipProof","setBusy","unlockPath"],min:{T1B1:"1.12.1",T2T1:"2.5.3"}},{methods:["showDeviceTutorial","authenticateDevice"],min:{T1B1:"0",T2T1:"0",T2B1:"2.6.1"},comment:["Only on T2B1"]},{methods:["rebootToBootloader"],min:{T1B1:"1.11.0",T2T1:"2.6.0"}},{methods:["getFirmwareHash"],min:{T1B1:"1.11.1",T2T1:"2.5.1"}},{methods:["solanaGetPublicKey","solanaGetAddress","solanaSignTransaction"],min:{T1B1:"0",T2T1:"2.7.0",T2B1:"2.7.0"}}]}});var Fo=u(we=>{"use strict";i();n();Object.defineProperty(we,"__esModule",{value:!0});we.arrayDistinct=void 0;var Qn=(e,t,r)=>r.indexOf(e)===t;we.arrayDistinct=Qn});var gt=u(Ue=>{"use strict";i();n();Object.defineProperty(Ue,"__esModule",{value:!0});Ue.arrayPartition=void 0;var jn=(e,t)=>e.reduce(([r,o],a)=>t(a)?[[...r,a],o]:[r,[...o,a]],[[],[]]);Ue.arrayPartition=jn});var Qo=u(ye=>{"use strict";i();n();Object.defineProperty(ye,"__esModule",{value:!0});ye.arrayShuffle=void 0;var zn=e=>{let t=e.slice();for(let r=t.length-1;r>0;r--){let o=Math.floor(Math.random()*(r+1));[t[r],t[o]]=[t[o],t[r]]}return t};ye.arrayShuffle=zn});var zo=u(Me=>{"use strict";i();n();Object.defineProperty(Me,"__esModule",{value:!0});Me.arrayToDictionary=void 0;var jo=e=>!!["string","number"].includes(typeof e),kn=(e,t,r)=>r?e.reduce((o,a)=>{var p;let _=t(a);return jo(_)?Object.assign(Object.assign({},o),{[_]:[...(p=o[_])!==null&&p!==void 0?p:[],a]}):o},{}):e.reduce((o,a)=>{let p=t(a);return jo(p)?Object.assign(Object.assign({},o),{[p]:a}):o},{});Me.arrayToDictionary=kn});var ko=u(pe=>{"use strict";i();n();Object.defineProperty(pe,"__esModule",{value:!0});pe.getChunkSize=pe.reverseBuffer=void 0;var qn=e=>{if(e.length<1)return e;let t=c.Buffer.alloc(e.length),r=t.length-1;for(let o=0;o<t.length/2;o++)t[o]=e[r],t[r]=e[o],r--;return t};pe.reverseBuffer=qn;var Gn=e=>{let t=c.Buffer.allocUnsafe(1);return t.writeUInt8(e),t};pe.getChunkSize=Gn});var Go=u(Le=>{"use strict";i();n();Object.defineProperty(Le,"__esModule",{value:!0});Le.bytesToHumanReadable=void 0;var qo=["B","KB","MB","GB","TB"],Vn=e=>{let t=Math.abs(e),r=0;for(;t>=1024||r>=qo.length;)t/=1024,r++;return`${t.toFixed(1)} ${qo[r]}`};Le.bytesToHumanReadable=Vn});var Vo=u(Ce=>{"use strict";i();n();Object.defineProperty(Ce,"__esModule",{value:!0});Ce.capitalizeFirstLetter=void 0;var Wn=e=>e.charAt(0).toUpperCase()+e.slice(1);Ce.capitalizeFirstLetter=Wn});var Wo=u(Be=>{"use strict";i();n();Object.defineProperty(Be,"__esModule",{value:!0});Be.cloneObject=void 0;var Hn=e=>{let t=JSON.stringify(e);return t===void 0?e:JSON.parse(t)};Be.cloneObject=Hn});var Ho=u(De=>{"use strict";i();n();Object.defineProperty(De,"__esModule",{value:!0});De.countBytesInString=void 0;var Kn=e=>encodeURI(e).split(/%..|./).length-1;De.countBytesInString=Kn});var Ko=u(xe=>{"use strict";i();n();Object.defineProperty(xe,"__esModule",{value:!0});xe.createCooldown=void 0;var Yn=e=>{let t=0;return()=>{let r=Date.now();return r-t>=e?(t=r,!0):!1}};xe.createCooldown=Yn});var Yo=u(Fe=>{"use strict";i();n();Object.defineProperty(Fe,"__esModule",{value:!0});Fe.createDeferred=void 0;var $n=e=>{let t=()=>{},r=()=>{},o=new Promise((a,p)=>{t=a,r=p});return{id:e,resolve:t,reject:r,promise:o}};Fe.createDeferred=$n});var $o=u(Qe=>{"use strict";i();n();Object.defineProperty(Qe,"__esModule",{value:!0});Qe.createTimeoutPromise=void 0;var Jn=e=>new Promise(t=>setTimeout(t,e));Qe.createTimeoutPromise=Jn});var Jo=u(_e=>{"use strict";i();n();Object.defineProperty(_e,"__esModule",{value:!0});_e.getValueByKey=_e.getKeyByValue=void 0;function Xn(e,t){return e&&Object.keys(e).find(r=>e[r]===t)}_e.getKeyByValue=Xn;function Zn(e,t){let r=e&&Object.keys(e).find(o=>o===t);return r&&e[r]}_e.getValueByKey=Zn});var Xo=u(je=>{"use strict";i();n();Object.defineProperty(je,"__esModule",{value:!0});je.getNumberFromPixelString=void 0;var es=e=>parseInt(e.replace("px",""),10);je.getNumberFromPixelString=es});var Zo=u(ze=>{"use strict";i();n();Object.defineProperty(ze,"__esModule",{value:!0});ze.getRandomNumberInRange=void 0;var ts=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;ze.getRandomNumberInRange=ts});var ei=u(ke=>{"use strict";i();n();Object.defineProperty(ke,"__esModule",{value:!0});ke.getSynchronize=void 0;var rs=()=>{let e;return t=>{let r=(e!=null?e:Promise.resolve()).catch(()=>{}).then(t).finally(()=>{e===r&&(e=void 0)});return e=r,e}};ke.getSynchronize=rs});var ti=u(qe=>{"use strict";i();n();Object.defineProperty(qe,"__esModule",{value:!0});qe.getWeakRandomId=void 0;var os=e=>{let t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let o=0;o<e;o++)t+=r.charAt(Math.floor(Math.random()*r.length));return t};qe.getWeakRandomId=os});var ri=u(Ge=>{"use strict";i();n();Object.defineProperty(Ge,"__esModule",{value:!0});Ge.hasUppercaseLetter=void 0;var is=new RegExp("^(.*[A-Z].*)$"),ns=e=>is.test(e);Ge.hasUppercaseLetter=ns});var oi=u(Ve=>{"use strict";i();n();Object.defineProperty(Ve,"__esModule",{value:!0});Ve.isAscii=void 0;function ss(e){return e?/^[\x00-\x7F]*$/.test(e):!0}Ve.isAscii=ss});var ii=u(We=>{"use strict";i();n();Object.defineProperty(We,"__esModule",{value:!0});We.isHex=void 0;var as=e=>/^(0x|0X)?[0-9A-Fa-f]+$/g.test(e);We.isHex=as});var ni=u(He=>{"use strict";i();n();Object.defineProperty(He,"__esModule",{value:!0});He.isNotUndefined=void 0;var cs=e=>typeof e<"u";He.isNotUndefined=cs});var si=u(Ke=>{"use strict";i();n();Object.defineProperty(Ke,"__esModule",{value:!0});Ke.isUrl=void 0;var ds=/^(http|ws)s?:\/\/[a-z0-9]([a-z0-9.-]+)?(:[0-9]{1,5})?((\/)?(([a-z0-9-_])+(\/)?)+)$/i,us=e=>ds.test(e);Ke.isUrl=us});var di=u(C=>{"use strict";i();n();Object.defineProperty(C,"__esModule",{value:!0});C.mergeDeepObject=void 0;var ai=e=>{if(typeof e=="object"&&e!==null){if(typeof Object.getPrototypeOf=="function"){let t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}return Object.prototype.toString.call(e)==="[object Object]"}return!1},ls=(...e)=>e.reduce((t,r)=>{if(Array.isArray(r))throw new TypeError("Arguments provided to ts-deepmerge must be objects, not arrays.");return Object.keys(r).forEach(o=>{["__proto__","constructor","prototype"].includes(o)||(Array.isArray(t[o])&&Array.isArray(r[o])?t[o]=C.mergeDeepObject.options.mergeArrays?Array.from(new Set(t[o].concat(r[o]))):r[o]:ai(t[o])&&ai(r[o])?t[o]=(0,C.mergeDeepObject)(t[o],r[o]):t[o]=r[o])}),t},{});C.mergeDeepObject=ls;var ci={mergeArrays:!0};C.mergeDeepObject.options=ci;C.mergeDeepObject.withOptions=(e,...t)=>{C.mergeDeepObject.options=Object.assign({mergeArrays:!0},e);let r=(0,C.mergeDeepObject)(...t);return C.mergeDeepObject.options=ci,r}});var ui=u(fe=>{"use strict";i();n();var ps=fe&&fe.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(r[o[a]]=e[o[a]]);return r};Object.defineProperty(fe,"__esModule",{value:!0});fe.objectPartition=void 0;var _s=(e,t)=>t.reduce(([r,o],a)=>{let p=o,_=a,h=p[_],M=ps(p,[typeof _=="symbol"?_:_+""]);return typeof h<"u"?[Object.assign(Object.assign({},r),{[a]:h}),M]:[r,o]},[{},e]);fe.objectPartition=_s});var li=u(Ye=>{"use strict";i();n();Object.defineProperty(Ye,"__esModule",{value:!0});Ye.parseElectrumUrl=void 0;var fs=/^(?:([a-zA-Z0-9.-]+)|\[([a-f0-9:]+)\]):([0-9]{1,5}):([ts])$/,Es=e=>{var t;let r=e.match(fs);if(!!r)return{host:(t=r[1])!==null&&t!==void 0?t:r[2],port:Number.parseInt(r[3],10),protocol:r[4]}};Ye.parseElectrumUrl=Es});var pi=u($e=>{"use strict";i();n();Object.defineProperty($e,"__esModule",{value:!0});$e.parseHostname=void 0;var hs=/^([a-z0-9.+-]+:\/\/)?([a-z0-9.-]+)([:/][^:/]+)*\/?$/i,ms=e=>{var t,r;return(r=(t=e.match(hs))===null||t===void 0?void 0:t[2])===null||r===void 0?void 0:r.toLowerCase()};$e.parseHostname=ms});var _i=u(Ee=>{"use strict";i();n();var gs=Ee&&Ee.__awaiter||function(e,t,r,o){function a(p){return p instanceof r?p:new r(function(_){_(p)})}return new(r||(r=Promise))(function(p,_){function h(S){try{L(o.next(S))}catch(P){_(P)}}function M(S){try{L(o.throw(S))}catch(P){_(P)}}function L(S){S.done?p(S.value):a(S.value).then(h,M)}L((o=o.apply(e,t||[])).next())})};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.promiseAllSequence=void 0;var bs=e=>gs(void 0,void 0,void 0,function*(){let t=[];for(let r=0;r<e.length;++r){let o=yield e[r]();t.push(o)}return t});Ee.promiseAllSequence=bs});var fi=u(te=>{"use strict";i();n();Object.defineProperty(te,"__esModule",{value:!0});te.redactUserPathFromString=te.startOfUserPathRegex=void 0;te.startOfUserPathRegex=/([/\\][Uu]sers[/\\]{1,4})([^"^'^[^\]^/^\\]*)/g;var Ss=e=>e.replace(te.startOfUserPathRegex,"$1[*]");te.redactUserPathFromString=Ss});var bi=u(he=>{"use strict";i();n();var bt=he&&he.__awaiter||function(e,t,r,o){function a(p){return p instanceof r?p:new r(function(_){_(p)})}return new(r||(r=Promise))(function(p,_){function h(S){try{L(o.next(S))}catch(P){_(P)}}function M(S){try{L(o.throw(S))}catch(P){_(P)}}function L(S){S.done?p(S.value):a(S.value).then(h,M)}L((o=o.apply(e,t||[])).next())})};Object.defineProperty(he,"__esModule",{value:!0});he.scheduleAction=void 0;var Ei=e=>Array.isArray(e),hi=()=>new Error("Aborted by signal"),vs=()=>new Error("Aborted by deadline"),Os=()=>new Error("Aborted by timeout"),mi=(e,t)=>new Promise((r,o)=>{if(t.aborted)return o();if(e===void 0)return r();let a=setTimeout(r,e),p=()=>{clearTimeout(a),t.removeEventListener("abort",p),o()};t.addEventListener("abort",p)}),gi=(e,t,r)=>new Promise((o,a)=>{if(r.aborted)return a();let p=e!==void 0?setTimeout(()=>a(t()),e):void 0,_=()=>{clearTimeout(p),r.removeEventListener("abort",_),a()};r.addEventListener("abort",_)}),Ts=(e,t)=>new Promise((r,o)=>{if(t.aborted)return o();if(e!=null&&e.aborted)return o(hi());let a=()=>o(hi());e==null||e.addEventListener("abort",a);let p=()=>{e==null||e.removeEventListener("abort",a),t.removeEventListener("abort",p),o()};t.addEventListener("abort",p)}),Is=(e,t)=>bt(void 0,void 0,void 0,function*(){let r=new AbortController,o=()=>r.abort();t.aborted&&o(),t.addEventListener("abort",o);try{return yield new Promise(a=>a(e(r.signal)))}finally{t.removeEventListener("abort",o)}}),Rs=(e,t,r,o)=>bt(void 0,void 0,void 0,function*(){for(let a=0;a<e-1&&!o.aborted;a++){let p=new AbortController,_=()=>p.abort();o.addEventListener("abort",_);try{return yield t(a,p.signal)}catch{_(),yield r(a)}finally{o.removeEventListener("abort",_)}}return o.aborted?Promise.reject():t(e-1,o)}),Ps=(e,t)=>bt(void 0,void 0,void 0,function*(){let{signal:r,delay:o,attempts:a,timeout:p,deadline:_,gap:h}=t,M=_&&_-Date.now(),L=Ei(a)?a.length:a!=null?a:_?1/0:1,S=new AbortController,P=S.signal,s=Ei(a)?Q=>a[Q]:()=>({timeout:p,gap:h});try{return yield Promise.race([Ts(r,P),gi(M,vs,P),mi(o,P).then(()=>Rs(L,(Q,me)=>Promise.race([gi(s(Q).timeout,Os,P),Is(e,me)]),Q=>{var me;return mi((me=s(Q).gap)!==null&&me!==void 0?me:0,P)},P))])}finally{S.abort()}});he.scheduleAction=Ps});var Si=u(Je=>{"use strict";i();n();Object.defineProperty(Je,"__esModule",{value:!0});Je.throwError=void 0;var Ns=e=>{throw new Error(e)};Je.throwError=Ns});var vi=u(Xe=>{"use strict";i();n();Object.defineProperty(Xe,"__esModule",{value:!0});Xe.truncateMiddle=void 0;var As=(e,t,r)=>{if(e.length<=t+r)return e;let o=e.substring(0,t),a=e.substring(e.length-r,e.length);return`${o}\u2026${a}`};Xe.truncateMiddle=As});var Oi=u(Ze=>{"use strict";i();n();Object.defineProperty(Ze,"__esModule",{value:!0});Ze.topologicalSort=void 0;var ws=gt(),Us=(e,t,r)=>{let o=[],a=_=>(0,ws.arrayPartition)(_,h=>!_.some(M=>t(M,h))),p=e;for(;p.length;){let[_,h]=a(p);if(!_.length)throw new Error("Cycle detected");o.push(...r?_.sort(r):_),p=h}return o};Ze.topologicalSort=Us});var Ti=u(et=>{"use strict";i();n();Object.defineProperty(et,"__esModule",{value:!0});et.urlToOnion=void 0;var ys=(e,t)=>{var r;let[,o,a,p,_]=(r=e.match(/^(http|ws)s?:\/\/([^:/]+\.)?([^/.]+\.[^/.]+)(\/.*)?$/i))!==null&&r!==void 0?r:[];if(!(!p||!t[p]))return`${o}://${a!=null?a:""}${t[p]}${_!=null?_:""}`};et.urlToOnion=ys});var Ni=u(N=>{"use strict";i();n();Object.defineProperty(N,"__esModule",{value:!0});N.normalizeVersion=N.isNewerOrEqual=N.isEqual=N.isNewer=N.isVersionArray=void 0;var Ms=e=>{if(!Array.isArray(e)||e.length!==3)return!1;for(let t=0;t<e.length;t++){let r=e[t];if(typeof r!="number"||r<0)return!1}return!0};N.isVersionArray=Ms;var Ii=e=>({major:e[0],minor:e[1],patch:e[2]}),Ri=e=>{let t=e.split(".").map(r=>Number(r));if(!(0,N.isVersionArray)(t))throw new Error(`version string is in wrong format: ${e}`);return t},Pi=e=>`${e[0]}.${e[1]}.${e[2]}`,Ls=(e,t)=>{let r=Ii(typeof e=="string"?Ri(e):e),o=Ii(typeof t=="string"?Ri(t):t);return r.major-o.major!==0?r.major>o.major:r.minor-o.minor!==0?r.minor>o.minor:r.patch-o.patch!==0?r.patch>o.patch:!1};N.isNewer=Ls;var Cs=(e,t)=>{let r=typeof e=="string"?e:Pi(e),o=typeof t=="string"?t:Pi(t);return r===o};N.isEqual=Cs;var Bs=(e,t)=>(0,N.isNewer)(e,t)||(0,N.isEqual)(e,t);N.isNewerOrEqual=Bs;var Ds=e=>e.replace(/\b0+(\d)/g,"$1");N.normalizeVersion=Ds});var Ai=u(K=>{"use strict";i();n();Object.defineProperty(K,"__esModule",{value:!0});K.inDoubleQuotes=K.inSingleQuotes=K.inHTML=void 0;var xs=/</g,Fs=/'/g,Qs=/"/g,js=e=>e.replace(xs,"&lt;");K.inHTML=js;var zs=e=>e.replace(Fs,"&#39;");K.inSingleQuotes=zs;var ks=e=>e.replace(Qs,"&quot;");K.inDoubleQuotes=ks});var wi=u(tt=>{"use strict";i();n();Object.defineProperty(tt,"__esModule",{value:!0});tt.getLocaleSeparators=void 0;var qs=e=>{var t,r;let a=new Intl.NumberFormat(e).formatToParts(10000.1),p=(t=a.find(({type:h})=>h==="decimal"))===null||t===void 0?void 0:t.value,_=(r=a.find(({type:h})=>h==="group"))===null||r===void 0?void 0:r.value;return{decimalSeparator:p,thousandsSeparator:_}};tt.getLocaleSeparators=qs});var Ui=u(rt=>{"use strict";i();n();Object.defineProperty(rt,"__esModule",{value:!0});rt.addDashesToSpaces=void 0;var Gs=e=>e.replace(/\s+/g,"-");rt.addDashesToSpaces=Gs});var it=u(f=>{"use strict";i();n();var yi=f&&f.__createBinding||(Object.create?function(e,t,r,o){o===void 0&&(o=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,a)}:function(e,t,r,o){o===void 0&&(o=r),e[o]=t[r]}),Vs=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),m=f&&f.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&yi(t,e,r)},ot=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&yi(t,e,r);return Vs(t,e),t};Object.defineProperty(f,"__esModule",{value:!0});f.xssFilters=f.versionUtils=f.enumUtils=f.bufferUtils=void 0;m(Fo(),f);m(gt(),f);m(Qo(),f);m(zo(),f);f.bufferUtils=ot(ko());m(Go(),f);m(Vo(),f);m(Wo(),f);m(Ho(),f);m(Ko(),f);m(Yo(),f);m($o(),f);f.enumUtils=ot(Jo());m(Xo(),f);m(Zo(),f);m(ei(),f);m(ti(),f);m(ri(),f);m(oi(),f);m(ii(),f);m(ni(),f);m(si(),f);m(di(),f);m(ui(),f);m(li(),f);m(pi(),f);m(_i(),f);m(fi(),f);m(bi(),f);m(Si(),f);m(vi(),f);m(Oi(),f);m(Ti(),f);f.versionUtils=ot(Ni());f.xssFilters=ot(Ai());m(wi(),f);m(Ui(),f)});var St=u(Y=>{"use strict";i();n();Object.defineProperty(Y,"__esModule",{value:!0});Y.getOnionDomain=Y.getHost=Y.getOrigin=void 0;var Mi=it(),Ws=e=>{var t;if(typeof e!="string")return"unknown";if(e.indexOf("file://")===0)return"file://";let[r]=(t=e.match(/^https?:\/\/[^/]+/))!==null&&t!==void 0?t:[];return r!=null?r:"unknown"};Y.getOrigin=Ws;var Hs=e=>{var t;if(typeof e!="string")return;let[,,r]=(t=e.match(/^(https?):\/\/([^:/]+)?/i))!==null&&t!==void 0?t:[];if(r){let o=r.split(".");return o.length>2?o.slice(o.length-2,o.length).join("."):r}};Y.getHost=Hs;var Ks=(e,t)=>{var r;return Array.isArray(e)?e.map(o=>{var a;return(a=(0,Mi.urlToOnion)(o,t))!==null&&a!==void 0?a:o}):typeof e=="string"&&(r=(0,Mi.urlToOnion)(e,t))!==null&&r!==void 0?r:e};Y.getOnionDomain=Ks});var Li=u(vt=>{"use strict";i();n();Object.defineProperty(vt,"__esModule",{value:!0});var Ys='.trezorconnect-container{position:fixed!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-ms-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important;z-index:10000!important;width:100%!important;height:100%!important;top:0!important;left:0!important;background:rgba(0,0,0,.35)!important;overflow:auto!important;padding:20px!important;margin:0!important}.trezorconnect-container .trezorconnect-window{position:relative!important;display:block!important;width:370px!important;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif!important;margin:auto!important;border-radius:3px!important;background-color:#fff!important;text-align:center!important;overflow:hidden!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head{text-align:left;padding:12px 24px!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-logo{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close{cursor:pointer!important;height:24px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close svg{fill:#757575;-webkit-transition:fill .3s ease-in-out!important;transition:fill .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close:hover svg{fill:#494949}.trezorconnect-container .trezorconnect-window .trezorconnect-body{padding:24px 24px 32px!important;background:#FBFBFB!important;border-top:1px solid #EBEBEB}.trezorconnect-container .trezorconnect-window .trezorconnect-body h3{color:#505050!important;font-size:16px!important;font-weight:500!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body p{margin:8px 0 24px!important;font-weight:400!important;color:#A9A9A9!important;font-size:12px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button{width:100%!important;padding:12px 24px!important;margin:0!important;border-radius:3px!important;font-size:14px!important;font-weight:300!important;cursor:pointer!important;background:#01B757!important;color:#fff!important;border:0!important;-webkit-transition:background-color .3s ease-in-out!important;transition:background-color .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:hover{background-color:#00AB51!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:active{background-color:#009546!important}/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0IiwiJHN0ZGluIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNBLHlCQUNJLFNBQUEsZ0JBQ0EsUUFBQSxzQkFDQSxRQUFBLHVCQUNBLFFBQUEsc0JBRUEsUUFBQSxlQUNBLG1CQUFBLG1CQUNBLHNCQUFBLGlCQUNBLHVCQUFBLGlCQUNBLG1CQUFBLGlCQUNBLGVBQUEsaUJBRUEsa0JBQUEsaUJBQ0Esb0JBQUEsaUJBQ0EsZUFBQSxpQkNmTSxZQUFhLGlCREFyQixRQUFTLGdCQWtCSCxNQUFBLGVBQ0EsT0FBQSxlQUNBLElBQUEsWUFDQSxLQUFBLFlBQ0EsV0FBQSwwQkFDQSxTQUFBLGVBQ0EsUUFBQSxlQUNBLE9BQUEsWUNkUiwrQ0RYRSxTQUFVLG1CQTZCQSxRQUFBLGdCQUNBLE1BQUEsZ0JBQ0EsWUFBQSxjQUFBLG1CQUFBLFdBQUEsT0FBQSxpQkFBQSxNQUFBLHFCQUNBLE9BQUEsZUNmVixjQUFlLGNEakJmLGlCQWlCRSxlQWtCWSxXQUFBLGlCQ2ZkLFNBQVUsaUJEbUJJLG1FQUNBLFdBQUEsS0NoQmQsUUFBUyxLQUFLLGVEeEJkLFFBQVMsc0JBMENTLFFBQUEsdUJBQ0EsUUFBQSxzQkNmbEIsUUFBUyxlRGlCSyxrQkE1QlosaUJBOEJvQixvQkFBQSxpQkNoQmxCLGVBQWdCLGlCRC9CWixZQWlCTixpQkFzQ1EsdUZBQ0EsaUJBQUEsRUNwQlYsYUFBYyxFRHBDVixTQUFVLEVBMkRBLEtBQUEsRUFFQSx3RkNwQmQsT0FBUSxrQkR6Q1IsT0FBUSxlQWlFTSw0RkFDQSxLQUFBLFFBQ0EsbUJBQUEsS0FBQSxJQUFBLHNCQ3BCZCxXQUFZLEtBQUssSUFBSyxzQkR3QlIsa0dBQ0EsS0FBQSxRQUVBLG1FQUNBLFFBQUEsS0FBQSxLQUFBLGVBQ0EsV0FBQSxrQkFDQSxXQUFBLElBQUEsTUFBQSxRQUVBLHNFQUNBLE1BQUEsa0JBQ0EsVUFBQSxlQ3JCZCxZQUFhLGNEd0JLLHFFQ3JCbEIsT0FBUSxJQUFJLEVBQUksZUR3QkYsWUFBQSxjQUNJLE1BQUEsa0JDdEJsQixVQUFXLGVBRWIsMEVBQ0UsTUFBTyxlQUNQLFFBQVMsS0FBSyxlQUNkLE9BQVEsWUFDUixjQUFlLGNBQ2YsVUFBVyxlQUNYLFlBQWEsY0FDYixPQUFRLGtCQUNSLFdBQVksa0JBQ1osTUFBTyxlQUNQLE9BQVEsWUFDUixtQkFBb0IsaUJBQWlCLElBQUssc0JBQzFDLFdBQVksaUJBQWlCLElBQUssc0JBRXBDLGdGQUNFLGlCQUFrQixrQkFFcEIsaUZBQ0UsaUJBQWtCIn0= */';vt.default=Ys});var Bi=u(l=>{"use strict";i();n();Object.defineProperty(l,"__esModule",{value:!0});l.initIframeLogger=l.clearTimeout=l.postMessage=l.init=l.dispose=l.messagePromises=l.error=l.timeout=l.initPromise=l.origin=l.instance=void 0;var $s=J(),Ot=it(),$=le(),Js=St(),Xs=mt(),Ci=$s.__importDefault(Li());l.initPromise=(0,Ot.createDeferred)();l.timeout=0;var nt=0;l.messagePromises={};var Zs=()=>{if(l.instance&&l.instance.parentNode)try{l.instance.parentNode.removeChild(l.instance)}catch{}l.instance=null,l.timeout=0};l.dispose=Zs;var ea=()=>{window.clearTimeout(l.timeout),l.error=$.ERRORS.TypedError("Init_IframeBlocked"),(0,l.dispose)(),l.initPromise.reject(l.error)},ta=()=>{if(!l.instance)throw $.ERRORS.TypedError("Init_IframeBlocked");let e=l.instance.ownerDocument,t=e.head||e.getElementsByTagName("head")[0],r=document.createElement("style");r.setAttribute("type","text/css"),r.setAttribute("id","TrezorConnectStylesheet"),r.styleSheet?(r.styleSheet.cssText=Ci.default,t.appendChild(r)):(r.appendChild(document.createTextNode(Ci.default)),t.append(r))},ra=async e=>{l.initPromise=(0,Ot.createDeferred)();let t=document.getElementById("trezorconnect");t?l.instance=t:(l.instance=document.createElement("iframe"),l.instance.frameBorder="0",l.instance.width="0px",l.instance.height="0px",l.instance.style.position="absolute",l.instance.style.display="none",l.instance.style.border="0px",l.instance.style.width="0px",l.instance.style.height="0px",l.instance.id="trezorconnect");let r;if(e.env==="web"){let a=e.manifest?JSON.stringify(e.manifest):"undefined",p=`version=${e.version}&manifest=${encodeURIComponent(btoa(JSON.stringify(a)))}`;r=`${e.iframeSrc}?${p}`}else r=e.iframeSrc;l.instance.setAttribute("src",r),e.webusb&&console.warn('webusb option is deprecated. use `transports: ["WebUsbTransport"] instead`'),navigator.usb&&l.instance.setAttribute("allow","usb"),l.origin=(0,Js.getOrigin)(l.instance.src),l.timeout=window.setTimeout(()=>{l.initPromise.reject($.ERRORS.TypedError("Init_IframeTimeout"))},1e4);let o=()=>{var a,p;if(!l.instance){l.initPromise.reject($.ERRORS.TypedError("Init_IframeBlocked"));return}try{let h=(a=l.instance.contentWindow)===null||a===void 0?void 0:a.location.origin;if(!h||h==="null"){ea();return}}catch{}let _;typeof chrome<"u"&&chrome.runtime&&typeof chrome.runtime.onConnect<"u"&&(chrome.runtime.onConnect.addListener(()=>{}),_=chrome.runtime.id),(p=l.instance.contentWindow)===null||p===void 0||p.postMessage({type:$.IFRAME.INIT,payload:{settings:e,extension:_}},l.origin),l.instance.onload=null};l.instance.attachEvent?l.instance.attachEvent("onload",o):l.instance.onload=o,document.body&&(document.body.appendChild(l.instance),ta());try{await l.initPromise.promise}catch(a){throw l.instance&&(l.instance.parentNode&&l.instance.parentNode.removeChild(l.instance),l.instance=null),a}finally{window.clearTimeout(l.timeout),l.timeout=0}};l.init=ra;var oa=(e,t=!0)=>{var r,o;if(!l.instance)throw $.ERRORS.TypedError("Init_IframeBlocked");if(t){nt++,e.id=nt,l.messagePromises[nt]=(0,Ot.createDeferred)();let{promise:a}=l.messagePromises[nt];return(r=l.instance.contentWindow)===null||r===void 0||r.postMessage(e,l.origin),a}return(o=l.instance.contentWindow)===null||o===void 0||o.postMessage(e,l.origin),null};l.postMessage=oa;var ia=()=>{window.clearTimeout(l.timeout)};l.clearTimeout=ia;var na=()=>{let e=()=>({add:t=>{(0,l.postMessage)({event:$.UI_EVENT,type:$.IFRAME.LOG,payload:t})}});(0,Xs.setLogWriter)(e)};l.initIframeLogger=na});var Di=u(st=>{"use strict";i();n();Object.defineProperty(st,"__esModule",{value:!0});st.showPopupRequest=void 0;var Tt="TrezorConnectInteractionLayer",sa=`
    <div class="trezorconnect-container" id="${Tt}">
        <div class="trezorconnect-window">
            <div class="trezorconnect-head">
                <svg class="trezorconnect-logo" x="0px" y="0px" viewBox="0 0 163.7 41.9" width="78px" height="20px" preserveAspectRatio="xMinYMin meet">
                    <polygon points="101.1,12.8 118.2,12.8 118.2,17.3 108.9,29.9 118.2,29.9 118.2,35.2 101.1,35.2 101.1,30.7 110.4,18.1 101.1,18.1"/>
                    <path d="M158.8,26.9c2.1-0.8,4.3-2.9,4.3-6.6c0-4.5-3.1-7.4-7.7-7.4h-10.5v22.3h5.8v-7.5h2.2l4.1,7.5h6.7L158.8,26.9z M154.7,22.5 h-4V18h4c1.5,0,2.5,0.9,2.5,2.2C157.2,21.6,156.2,22.5,154.7,22.5z"/>
                    <path d="M130.8,12.5c-6.8,0-11.6,4.9-11.6,11.5s4.9,11.5,11.6,11.5s11.7-4.9,11.7-11.5S137.6,12.5,130.8,12.5z M130.8,30.3 c-3.4,0-5.7-2.6-5.7-6.3c0-3.8,2.3-6.3,5.7-6.3c3.4,0,5.8,2.6,5.8,6.3C136.6,27.7,134.2,30.3,130.8,30.3z"/>
                    <polygon points="82.1,12.8 98.3,12.8 98.3,18 87.9,18 87.9,21.3 98,21.3 98,26.4 87.9,26.4 87.9,30 98.3,30 98.3,35.2 82.1,35.2 "/>
                    <path d="M24.6,9.7C24.6,4.4,20,0,14.4,0S4.2,4.4,4.2,9.7v3.1H0v22.3h0l14.4,6.7l14.4-6.7h0V12.9h-4.2V9.7z M9.4,9.7 c0-2.5,2.2-4.5,5-4.5s5,2,5,4.5v3.1H9.4V9.7z M23,31.5l-8.6,4l-8.6-4V18.1H23V31.5z"/>
                    <path d="M79.4,20.3c0-4.5-3.1-7.4-7.7-7.4H61.2v22.3H67v-7.5h2.2l4.1,7.5H80l-4.9-8.3C77.2,26.1,79.4,24,79.4,20.3z M71,22.5h-4V18 h4c1.5,0,2.5,0.9,2.5,2.2C73.5,21.6,72.5,22.5,71,22.5z"/>
                    <polygon points="40.5,12.8 58.6,12.8 58.6,18.1 52.4,18.1 52.4,35.2 46.6,35.2 46.6,18.1 40.5,18.1 "/>
                </svg>
                <div class="trezorconnect-close">
                    <svg x="0px" y="0px" viewBox="24 24 60 60" width="24px" height="24px" preserveAspectRatio="xMinYMin meet">
                        <polygon class="st0" points="40,67.9 42.1,70 55,57.1 67.9,70 70,67.9 57.1,55 70,42.1 67.9,40 55,52.9 42.1,40 40,42.1 52.9,55 "/>
                    </svg>
                </div>
            </div>
            <div class="trezorconnect-body">
                <h3>Popup was blocked</h3>
                <p>Please click to "Continue" to open popup manually</p>
                <button class="trezorconnect-open">Continue</button>
            </div>
        </div>
    </div>
`,aa=(e,t)=>{};st.showPopupRequest=aa});var ji=u(at=>{"use strict";i();n();Object.defineProperty(at,"__esModule",{value:!0});at.PopupManager=void 0;var ca=J(),da=ca.__importDefault(Ut()),xi=it(),b=le(),Fi=St(),Qi=Di(),ua=850,la=500,pa=3e3,It=class extends da.default{constructor(t){super(),this.locked=!1,this.requestTimeout=0,this.closeInterval=0,this.extensionTabId=0,this.settings=t,this.origin=(0,Fi.getOrigin)(t.popupSrc),this.handleMessage=this.handleMessage.bind(this),this.iframeHandshake=(0,xi.createDeferred)(b.IFRAME.LOADED),this.settings.env==="webextension"&&(this.handleExtensionConnect=this.handleExtensionConnect.bind(this),this.handleExtensionMessage=this.handleExtensionMessage.bind(this),chrome.runtime.onConnect.addListener(this.handleExtensionConnect)),window.addEventListener("message",this.handleMessage,!1)}request(){if(this.locked){this.popupWindow&&(this.settings.env==="webextension"?chrome.tabs.update(this.popupWindow.id,{active:!0}):this.popupWindow.focus());return}this.popupWindow&&!this.locked&&this.close();let t=this.open.bind(this);this.locked=!0;let r=this.settings.env==="webextension"?1:ua;this.requestTimeout=window.setTimeout(()=>{this.requestTimeout=0,t()},r)}unlock(){this.locked=!1}open(){let t=this.settings.popupSrc;this.popupPromise=(0,xi.createDeferred)(b.POPUP.LOADED),this.openWrapper(t),this.closeInterval=window.setInterval(()=>{!this.popupWindow||(this.settings.env==="webextension"?chrome.tabs.get(this.popupWindow.id,r=>{r||(this.emit(b.POPUP.CLOSED),this.clear())}):this.popupWindow.closed&&(this.clear(),this.emit(b.POPUP.CLOSED)))},la),this.openTimeout=setTimeout(()=>{this.clear(),(0,Qi.showPopupRequest)(this.open.bind(this),()=>{this.emit(b.POPUP.CLOSED)})},pa)}openWrapper(t){this.settings.env==="webextension"?chrome.windows.getCurrent(r=>{r.type!=="normal"?chrome.windows.create({url:t},o=>{chrome.tabs.query({windowId:o==null?void 0:o.id,active:!0},a=>{this.popupWindow=a[0]})}):chrome.tabs.query({currentWindow:!0,active:!0},o=>{this.extensionTabId=o[0].id,chrome.tabs.create({url:t,index:o[0].index+1},a=>{this.popupWindow=a})})}):this.settings.env==="electron"?this.popupWindow=window.open(t,"modal"):(this.popupWindow=window.open("","_blank"),this.popupWindow&&(this.popupWindow.location.href=t))}handleExtensionConnect(t){var r,o;t.name==="trezor-connect"&&(!this.popupWindow||this.popupWindow&&this.popupWindow.id!==((o=(r=t.sender)===null||r===void 0?void 0:r.tab)===null||o===void 0?void 0:o.id)||(this.openTimeout&&clearTimeout(this.openTimeout),this.extensionPort=t,this.extensionPort.onMessage.addListener(this.handleExtensionMessage)))}handleExtensionMessage(t){if(!this.extensionPort)return;let r=this.extensionPort,{data:o}=t;if(!(!o||typeof o!="object"))if(o.type===b.POPUP.ERROR){let a=o.payload&&typeof o.payload.error=="string"?o.payload.error:null;this.emit(b.POPUP.CLOSED,a?`Popup error: ${a}`:null),this.clear()}else o.type===b.POPUP.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then(a=>{r.postMessage({type:b.POPUP.INIT,payload:Object.assign(Object.assign({},a),{settings:this.settings})})})):o.type===b.POPUP.EXTENSION_USB_PERMISSIONS?chrome.tabs.query({currentWindow:!0,active:!0},a=>{chrome.tabs.create({url:"trezor-usb-permissions.html",index:a[0].index+1},p=>{})}):o.type===b.POPUP.CLOSE_WINDOW&&this.clear()}handleMessage(t){let{data:r}=t;if(!((0,Fi.getOrigin)(t.origin)!==this.origin||!r||typeof r!="object"))if(r.type===b.IFRAME.LOADED)this.iframeHandshake.resolve(r.payload);else if(r.type===b.POPUP.BOOTSTRAP)this.openTimeout&&clearTimeout(this.openTimeout);else if(r.type===b.POPUP.ERROR&&this.popupWindow){let o=r.payload&&typeof r.payload.error=="string"?r.payload.error:null;this.emit(b.POPUP.CLOSED,o?`Popup error: ${o}`:null),this.clear()}else r.type===b.POPUP.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then(o=>{this.popupWindow.postMessage({type:b.POPUP.INIT,payload:Object.assign(Object.assign({},o),{settings:this.settings})},this.origin)})):(r.type===b.POPUP.CANCEL_POPUP_REQUEST||r.type===b.UI.CLOSE_UI_WINDOW)&&this.clear(!1)}clear(t=!0){this.locked=!1,this.popupPromise=void 0,this.requestTimeout&&(window.clearTimeout(this.requestTimeout),this.requestTimeout=0),this.openTimeout&&(clearTimeout(this.openTimeout),this.openTimeout=void 0),this.closeInterval&&(window.clearInterval(this.closeInterval),this.closeInterval=0),this.extensionPort&&(this.extensionPort.disconnect(),this.extensionPort=void 0),t&&this.extensionTabId&&(chrome.tabs.update(this.extensionTabId,{active:!0}),this.extensionTabId=0)}close(){if(!!this.popupWindow){if(this.settings.env==="webextension"){let t=chrome.runtime.lastError;chrome.tabs.remove(this.popupWindow.id,()=>{t=chrome.runtime.lastError});return}this.popupWindow.close(),this.popupWindow=null}}async postMessage(t){if(!this.popupWindow&&t.type!==b.UI.REQUEST_UI_WINDOW&&this.openTimeout){this.clear(),(0,Qi.showPopupRequest)(this.open.bind(this),()=>{this.emit(b.POPUP.CLOSED)});return}this.popupPromise&&await this.popupPromise.promise,this.popupWindow&&this.popupWindow.postMessage(t,this.origin)}};at.PopupManager=It});var zi=u(Rt=>{"use strict";i();n();Object.defineProperty(Rt,"__esModule",{value:!0});var _a=(e="",t)=>{let r=e||".trezor-webusb-button",o=document.querySelectorAll(r),a=`${t}?${Date.now()}`;o.forEach(p=>{if(p.getElementsByTagName("iframe").length<1){let _=p.getBoundingClientRect(),h=document.createElement("iframe");h.frameBorder="0",h.width=`${Math.round(_.width)}px`,h.height=`${Math.round(_.height)}px`,h.style.position="absolute",h.style.top="0px",h.style.left="0px",h.style.zIndex="1",h.setAttribute("allow","usb"),h.setAttribute("scrolling","no"),h.src=a,p.append(h)}})};Rt.default=_a});var ki=u(re=>{"use strict";i();n();Object.defineProperty(re,"__esModule",{value:!0});re.parseConnectSettings=re.getEnv=void 0;var fa=le(),Ea=()=>{var e;if(typeof chrome<"u"&&typeof((e=chrome.runtime)===null||e===void 0?void 0:e.onConnect)<"u")return"webextension";if(typeof navigator<"u"){if(typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative")return"react-native";if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)return"electron"}return"web"};re.getEnv=Ea;var ha=(e,t)=>{let r=new URLSearchParams(e),o={};return Array.from(r.entries()).forEach(([p,_])=>{t.includes(p)&&(o[p]=decodeURIComponent(_))}),o},ma=(e={})=>{var t;let r=Object.assign({popup:!0},e),o;if(typeof window<"u"?o=window.__TREZOR_CONNECT_SRC:typeof globalThis<"u"&&(o=globalThis.__TREZOR_CONNECT_SRC),typeof o=="string"&&(r.connectSrc=o,r.debug=!0),typeof window<"u"&&typeof((t=window.location)===null||t===void 0?void 0:t.search)=="string"){let a=ha(window.location.search,["trezor-connect-src"]);a["trezor-connect-src"]&&(r.debug=!0,r.connectSrc=a["trezor-connect-src"])}return typeof e.env!="string"&&(r.env=(0,re.getEnv)()),(0,fa.parseConnectSettings)(r)};re.parseConnectSettings=ma});var Nt=u(ct=>{"use strict";i();n();Object.defineProperty(ct,"__esModule",{value:!0});var ve=J(),ga=ve.__importDefault(Ut()),E=le(),ba=Lo(),Sa=mt(),va=xo(),g=ve.__importStar(Bi()),Oa=ve.__importStar(ji()),Ta=ve.__importDefault(zi()),Oe=ki(),F=new ga.default,Se=(0,Sa.initLog)("@trezor/connect-web"),O=(0,Oe.parseConnectSettings)(),v,qi=()=>{let e=new Oa.PopupManager(O);return e.on(E.POPUP.CLOSED,t=>{g.postMessage({type:E.POPUP.CLOSED,payload:t?{error:t}:null},!1)}),e},Ia=e=>{O=(0,Oe.parseConnectSettings)(Object.assign(Object.assign({},O),{manifest:e}))},Gi=()=>(F.removeAllListeners(),g.dispose(),O=(0,Oe.parseConnectSettings)(),v&&v.close(),Promise.resolve(void 0)),Ra=e=>{v&&v.emit(E.POPUP.CLOSED,e)},Pa=e=>{if(e.origin!==g.origin)return;let t=(0,E.parseMessage)(e.data),r=t.id||0;switch(Se.log("handleMessage",t),t.event){case E.RESPONSE_EVENT:g.messagePromises[r]?(g.messagePromises[r].resolve({id:r,success:t.success,payload:t.payload}),delete g.messagePromises[r]):Se.warn(`Unknown message id ${r}`);break;case E.DEVICE_EVENT:F.emit(t.event,t),F.emit(t.type,t.payload);break;case E.TRANSPORT_EVENT:F.emit(t.event,t),F.emit(t.type,t.payload);break;case E.BLOCKCHAIN_EVENT:F.emit(t.event,t),F.emit(t.type,t.payload);break;case E.UI_EVENT:if(t.type===E.IFRAME.BOOTSTRAP){g.clearTimeout();break}t.type===E.IFRAME.LOADED&&g.initPromise.resolve(),t.type===E.IFRAME.ERROR&&g.initPromise.reject(t.payload.error),F.emit(t.event,t),F.emit(t.type,t.payload);break;default:Se.log("Undefined message",t.event,e.data)}},Vi=async(e={})=>{var t;if(g.instance)throw E.ERRORS.TypedError("Init_AlreadyInitialized");if(O=(0,Oe.parseConnectSettings)(Object.assign(Object.assign({},O),e)),!O.manifest)throw E.ERRORS.TypedError("Init_ManifestMissing");if(!((t=O.transports)===null||t===void 0)&&t.length||(O.transports=["BridgeTransport","WebUsbTransport"]),O.lazyLoad){O.lazyLoad=!1;return}v||(v=qi()),Se.enabled=!!O.debug,window.addEventListener("message",Pa),window.addEventListener("unload",Gi),await g.init(O),O.sharedLogger!==!1&&g.initIframeLogger()},Pt=async e=>{if(!g.instance&&!g.timeout){if(O=(0,Oe.parseConnectSettings)(O),!O.manifest)return(0,E.createErrorMessage)(E.ERRORS.TypedError("Init_ManifestMissing"));v||(v=qi()),v.request();try{await Vi(O)}catch(t){return v&&(["Init_IframeBlocked","Init_IframeTimeout"].includes(t.code)?v.postMessage((0,E.createUiMessage)(E.UI.IFRAME_FAILURE)):v.clear()),(0,E.createErrorMessage)(t)}}if(g.timeout)return(0,E.createErrorMessage)(E.ERRORS.TypedError("Init_ManifestMissing"));if(g.error)return(0,E.createErrorMessage)(g.error);O.popup&&v&&v.request();try{let t=await g.postMessage({type:E.IFRAME.CALL,payload:e});return t?(!t.success&&t.payload.code!=="Device_CallInProgress"&&v&&v.unlock(),t):(v&&v.unlock(),(0,E.createErrorMessage)(E.ERRORS.TypedError("Method_NoResponse")))}catch(t){return Se.error("__call error",t),v&&v.clear(),(0,E.createErrorMessage)(t)}},Na=e=>{if(!g.instance)throw E.ERRORS.TypedError("Init_NotInitialized");let{type:t,payload:r}=e;g.postMessage({event:E.UI_EVENT,type:t,payload:r})},Aa=e=>{(0,Ta.default)(e,O.webusbSrc)},wa=async e=>{if(typeof e.callback=="function"){let{callback:t}=e,r=async a=>{let{data:p}=a;if(p&&p.type===E.UI.LOGIN_CHALLENGE_REQUEST)try{let _=await t();g.postMessage({event:E.UI_EVENT,type:E.UI.LOGIN_CHALLENGE_RESPONSE,payload:_})}catch(_){g.postMessage({event:E.UI_EVENT,type:E.UI.LOGIN_CHALLENGE_RESPONSE,payload:_.message})}};window.addEventListener("message",r,!1);let o=await Pt(Object.assign(Object.assign({method:"requestLogin"},e),{asyncChallenge:!0,callback:null}));return window.removeEventListener("message",r),o}return Pt(Object.assign({method:"requestLogin"},e))},Ua=()=>{if(!g.instance)throw E.ERRORS.TypedError("Init_NotInitialized");g.postMessage({event:E.UI_EVENT,type:E.TRANSPORT.DISABLE_WEBUSB})},ya=async()=>{try{await window.navigator.usb.requestDevice({filters:va.config.webusb}),g.postMessage({event:E.UI_EVENT,type:E.TRANSPORT.REQUEST_DEVICE})}catch{}},Ma=(0,ba.factory)({eventEmitter:F,manifest:Ia,init:Vi,call:Pt,requestLogin:wa,uiResponse:Na,renderWebUSBButton:Aa,disableWebUSB:Ua,requestWebUSBDevice:ya,cancel:Ra,dispose:Gi});ct.default=Ma;ve.__exportStar(le(),ct)});i();n();Ji();var $i=wt(Nt());i();n();var Wi=wt(Nt());var Hi=async()=>{let{success:e,payload:t}=await Wi.default.ethereumGetPublicKey({path:ut,showOnTrezor:!1});if(e)return[{extendedPublicKey:t==null?void 0:t.xpub,path:ut}];throw t};i();n();tn();en();Xi();var Ki=async e=>{try{let t=e.map(a=>({evm:[a[Lt].address]})),{data:r}=await Bt(Dt.getAssetFromChain,t),o=r.reduce((a,p)=>{let{evm:_}=p;return Qt(a,_),a},{});return e.map(a=>{let{mainnet:p}=a;return{...a,balance:o[p.address]||0}})}catch{return e}};i();n();Zi();var La=jt(lt.bip44,"0/"),Ca=async(e,t,r)=>{t[Te]={},await La(e,t,r),t[Te]=t[Te][lt.bip44]},Ba=async({index:e,keys:t})=>{let r={index:e,addressType:{[Ct]:xt.SEGWIT_NESTED_49}};return await Ca(e,r,t),r},Yi=Ba;var At=class{constructor(){this.initSDK(),this.keys=[]}initSDK(){$i.default.init({lazyLoad:!0,manifest:{email:"support@metamask.io",appUrl:"https://metamask.io"}})}async getXpub(){let t=await Hi();this.keys.push(...t)}async getAccounts({page:t}){this.keys.length||await this.getXpub();let r=[];for(let a=t*dt;a<(t+1)*dt;a++){let p=await Yi({index:a,keys:this.keys});r.push(p)}return await Ki(r)}throwTxCancelTip(){throw Mt.error({title:yt("wallet_extension_header_toast_transaction_canceled")}),new Error(Ft)}},e_=At;export{Nt as a,e_ as b};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-4THBRLBC.js.map
