import{a as xe,b as we,c as ke}from"./chunk-NOZM7AA3.js";import{c as Z}from"./chunk-HG2HGCVV.js";import{a as ge}from"./chunk-UGYRJNZG.js";import{a as F}from"./chunk-5DEIKYJL.js";import{c as fe}from"./chunk-4KY5XQ5E.js";import{a as _e}from"./chunk-JSAFBAMQ.js";import{a as pe}from"./chunk-PCGRDRHF.js";import{q as H,r as me}from"./chunk-VPBQLZCI.js";import{k as P}from"./chunk-HU3KBV5G.js";import{a as Fe}from"./chunk-TPSXCUGD.js";import{c as K}from"./chunk-2YLR7R2N.js";import{a as ce,b as He}from"./chunk-MVLY6WUP.js";import{c as le,h as ze}from"./chunk-ZEAKIEIQ.js";import{a as ue}from"./chunk-5KSDRGLW.js";import{C as ne,D as M,Ha as ie,Pa as Ye,bb as de,rb as Me,v as h}from"./chunk-CVJKAN5R.js";import{G as V,o as ae,q as T}from"./chunk-GXQ645QR.js";import{P as q,V as z,c as Ve}from"./chunk-C2H3SRET.js";import{a as y,f as Pe}from"./chunk-V4YVDLI4.js";import{b as Oe}from"./chunk-IYYFWVWL.js";import{f as x,m as p,o as _}from"./chunk-6V2G2Z5W.js";p();_();var w=x(y()),Be=x(M());p();_();var O=x(y()),be=x(Fe());var Ze=({type:r,addressId:n,addressInputValue:t,nameInputValue:i,networkSelectList:d,onClose:l,onDelete:g,onBackToHome:c})=>{let e=P(),s=(0,be.useHistory)(),a=(0,O.useRef)(!1),o=r===A.TYPE.EDIT,f=e(o?"wallet_extension_editaddress_title_edit_address":"wallet_extension_addaddress_title_add_address"),u=e(o?"wallet_extension_editaddress_modal_detele_address":"wallet_extension_addaddress_modal_cancel_adding"),m=e(o?"wallet_extension_editaddress_btn_detele":"wallet_extension_addaddress_btn_yes"),k=e(o?"wallet_extension_editaddress_btn_cancel":"wallet_extension_addaddress_btn_no"),b=t||i||d.length,L=()=>{let Y=c&&c();s.push(Y||"")},C=()=>{let Y=ae.warn({title:u,alignBottom:!1,cancelText:k,confirmText:m,onCancel:()=>{Y.destroy(),a.current=!1},onConfirm:async()=>{o?(await ke(n),V.success({title:e("wallet_extension_addressbook_toast_address_deleted")}),g&&g(),l()):a.current?L():l()}})};return O.default.createElement(O.default.Fragment,null,O.default.createElement(_e,{onBack:()=>{!o&&b?C():l()},title:f,onClose:()=>{o?C():b?(a.current=!0,C()):L()},closeable:o?{style:{color:"var(--okd-color-semantic-negative)"},icon:"okx-wallet-plugin-trash"}:!0}))},Ee=Ze;p();_();var B=x(y());ne();var he=x(M());function X({nameInputValue:r,nameInputError:n,setNameInputValue:t,setNameInputError:i}){let d=(0,B.useRef)(),l=(0,B.useRef)(!1),g=n&&l.current?n:"",{run:c}=H(()=>{l.current=!0;let s="";(0,he.size)(r)>20&&(s=h("wallet_extension_addaddress_errortip_maximum_20")),i(s)},{wait:50}),e=s=>{c(),t(s.target.value)};return(0,B.useEffect)(()=>{d.current.focus()},[]),B.default.createElement(T,{className:"address-edit-dialog__name-input",placeholder:h("wallet_extension_addaddress_input_enter_name_limit"),label:h("wallet_extension_addaddress_subtitle_name"),value:r,error:g,errorType:T.TIP_TYPE.always,size:T.SIZE.xl,onChange:e,maxLength:30,onRef:s=>{d.current=s}})}p();_();var E=x(y());ne();function U({type:r,addressData:n,addressInputValue:t,addressInputError:i,setAddressInputValue:d,setAddressInputError:l,onChangeToEdit:g,validNetworks:c,isLoading:e,isBetterLoading:s}){let{id:a,address:o}=n,f=r===A.TYPE.EDIT,u=Z(t),m=!!(u!=null&&u.id)&&(!f||(u==null?void 0:u.id)!==a),k=(0,E.useRef)(!1),b=i&&k.current?i:"",{run:L}=H(async()=>{let N="";t&&c&&!c.length&&(N=h("wallet_extension_addaddress_errortip_wrong_address")),m&&(N=h("wallet_extension_addaddress_errortip_address_exists")),k.current=!0,l(N)},{wait:50}),C=N=>{d(N.target.value)},D=()=>{g(u)};return(0,E.useEffect)(()=>{L()},[c]),E.default.createElement(E.default.Fragment,null,E.default.createElement(T.TextArea,{className:"address-edit-dialog__address-input",placeholder:h("wallet_extension_addaddress_input_enter_address"),disabled:!f&&o,label:h("wallet_extension_addaddress_subtitle_address"),value:t,error:!e&&!!b,errorType:T.TIP_TYPE.always,size:T.SIZE.xl,suffix:s&&E.default.createElement(q.Circle,{size:q.SIZE.sm}),onChange:C,autoResize:!0}),b&&E.default.createElement("div",{className:"address-edit-dialog__address-input__error"},b,m&&E.default.createElement("span",{className:"address-edit-dialog__address-input__error-action",onClick:D},h("wallet_extension_addaddress_anchor_go_to_edit"))))}p();_();var S=x(y()),Ce=x(M());p();_();var v=x(y()),G=x(Pe()),J=x(Ve()),Ie=x(M());p();_();var Q=({className:r="",options:n=[],onChange:t=()=>{}})=>{let[i,d]=(0,v.useState)({}),[l,g]=(0,v.useState)({});(0,v.useEffect)(()=>{let e={},s={};for(let a=0;a<n.length;a++){let o=n[a];o.active&&(e[o.value]=o),o.disabled&&(s[o.value]=o)}d(e),g(s)},[n]);let c=e=>{if(e.disabled)return;let s=e.value,a=(0,Ie.cloneDeep)(i);i[s]?(delete a[s],d(a)):(a[s]=e,d(a));let o=Object.values(a);t&&t(o)};return v.default.createElement("div",{className:(0,J.default)("ok-button-checkbox",r)},n.map((e,s)=>v.default.createElement("div",{className:(0,J.default)("ok-button-checkbox__item",{"ok-button-checkbox__item--active":!!i[e.value],"ok-button-checkbox__item--disabled":!!l[e.value]}),onClick:()=>{c(e)},key:s},e.image&&v.default.createElement("img",{className:"ok-button-checkbox__item-icon",src:e.image,alt:e.label}),v.default.createElement("span",{className:"ok-button-checkbox__item-text"},e.label))))};Q.propTypes={className:G.default.string,options:G.default.array,onChange:G.default.func};Q.defaultProps={className:"",options:[],onChange:()=>{}};var ve=Q;Me();var Ge=[de];function $({network:r,networkSelectList:n,setNetworkSelectList:t,setHasSelect:i,disabled:d,validNetworks:l}){let g=P(),c=ge(),[e,s]=(0,S.useState)([]),a=f=>{if(!f.length){t([]);return}let u=f.map(m=>m.value);t(u)},o=F();return(0,S.useLayoutEffect)(()=>{let f=o.filter(({coinType:u,localType:m})=>!Ge.includes(m)&&(l==null?void 0:l.includes(u))).map(({chainName:u,localType:m})=>{let k=(0,Ce.get)(c.find(b=>b.localType===m),"image");return{disabled:r===m,active:n.includes(m),label:u,value:m,image:k}});s(f),i(f.some(u=>u.active))},[l,n,o]),d||!e.length?null:S.default.createElement("div",{className:"address-edit-dialog__network-select"},S.default.createElement("div",{className:"address-edit-dialog__network-select__title"},g("wallet_extension_addressbook_title_select_networks")),S.default.createElement(ve,{options:e,onChange:a}))}p();_();var ye=x(y());function R({type:r,addressId:n,nameInputValue:t,addressInputValue:i,networkSelectList:d,addressInputError:l,nameInputError:g,hasSelect:c,onClose:e}){let s=P(),a=r===A.TYPE.EDIT,o=t===""||i===""||l!==""||g!==""||!c||d.length===0,f=async u=>{u.stopPropagation();let m={address:i,name:t,networks:d};if(a)await we(n,m),V.success({title:s("wallet_extension_editaddress_toast_edit_saved")}),e(m);else try{await xe(m),V.success({title:s("wallet_extension_addressbook_toast_address_added")}),e(m)}catch(k){(k==null?void 0:k.message)===fe&&V.error({title:s("wallet_extension_addressbook_toast_address_limit_reached")})}};return ye.default.createElement(z,{className:"address-edit-dialog__save",disabled:o,category:z.CATEGORY.fill,type:z.TYPE.highlight,size:z.SIZE.lg,onClick:f,block:!0},s("wallet_set_password_btn_confirm"))}p();_();var j=x(y());p();_();var Ne=x(Oe());var W=x(y());var ee=x(M());ze();He();Ye();var Ae={[Ne.Currency.WAX]:async r=>{var i;if(!r)return!1;let n={account:r,coinId:ie},t;try{t=await le(ce.queryAccountExist,n)}catch{(0,ee.noop)()}return!!((i=t==null?void 0:t.data)!=null&&i.account)},default:async(r,n,t)=>{let{validAddress:i}=await ue(),{isValid:d}=await i(n.valueOf(),{address:r,hrp:t});return d}};function We(){let[r,n]=(0,W.useState)(0),t=(0,W.useRef)(0),i=F(),d=r>0,l=me(d,{wait:200});return{isLoading:d,isBetterLoading:l,validAddress:(c,e)=>{(async()=>{let a=++t.current,o=[];n(f=>f+1);try{await Promise.all(i.map(async({coinType:f,cosmosPrefix:u})=>{try{await(Ae[f]||Ae.default)(c,f,u)&&o.push(Number(f))}catch{(0,ee.noop)()}}))}finally{a===t.current&&(n(0),e(o))}})()}}}var Te=We;function je(r){let[n,t]=(0,j.useState)(null),{isLoading:i,isBetterLoading:d,validAddress:l}=Te();return(0,j.useEffect)(()=>{if(!r){t(null);return}l(r,g=>{t(g)})},[r]),{validNetworks:n,isBetterLoading:d,isLoading:i}}var Se=je;p();_();function A({type:r,data:n,onClose:t,onDelete:i,onBackToHome:d,onChangeToEdit:l}){let{id:g,address:c,network:e}=n,s=Z(c),[a,o]=(0,w.useState)(""),[f,u]=(0,w.useState)(""),[m,k]=(0,w.useState)(""),[b,L]=(0,w.useState)(""),[C,D]=(0,w.useState)([]),[N,Y]=(0,w.useState)(!0),{isLoading:Le,isBetterLoading:te,validNetworks:oe}=Se(a);return(0,w.useEffect)(()=>{if(r===A.TYPE.EDIT&&s){let{name:De,networks:se}=s,re=se;e&&(re=(0,Be.uniq)([...se,e])),k(De),o(c),D(re)}else c&&o(c),e&&D([e])},[r,c,e]),w.default.createElement(K.Portal,{component:K.Container,className:"address-edit-dialog"},w.default.createElement(Ee,{type:r,addressId:g,address:c,addressInputValue:a,nameInputValue:m,networkSelectList:C,onClose:t,onDelete:i,onBackToHome:d}),w.default.createElement("div",{className:"address-edit-dialog__body"},w.default.createElement(X,{nameInputValue:m,nameInputError:b,setNameInputValue:k,setNameInputError:L}),w.default.createElement(U,{type:r,addressData:n,addressInputValue:a,addressInputError:f,setAddressInputError:u,setAddressInputValue:o,onChangeToEdit:l,validNetworks:oe,isLoading:Le,isBetterLoading:te}),w.default.createElement($,{network:e,networkSelectList:C,setNetworkSelectList:D,setHasSelect:Y,validNetworks:oe,disabled:!a||f||te})),w.default.createElement(pe.FooterActions,null,w.default.createElement(R,{type:r,addressId:g,nameInputValue:m,addressInputValue:a,networkSelectList:C,addressInputError:f,nameInputError:b,hasSelect:N,onClose:t})))}A.TYPE={EDIT:"edit",ADD:"add"};export{A as a};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-HDBJAEKO.js.map
