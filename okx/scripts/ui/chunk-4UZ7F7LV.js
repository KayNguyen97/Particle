import{a as N1,b as $4,c as X4,d as Y4,e as Z4,f as J4,g as Q4,h as e6}from"./chunk-ZRKMRDGI.js";import{a as C1,b as V4}from"./chunk-KTHMEYYS.js";import{a as G4}from"./chunk-HIGM7FFU.js";import{A as W4,B as H1,C as z4,F as k1,e as cl,p as M1,q as j4,u as D4,x as K4,z as F4}from"./chunk-RYNAOZ73.js";import{d as Cu}from"./chunk-GKHVFCKF.js";import{c as K,g as B1,m as E,n as m,o as P}from"./chunk-6V2G2Z5W.js";var In=K(Is=>{"use strict";E();P();Object.defineProperty(Is,"__esModule",{value:!0});Is.testnet=Is.regtest=Is.bitcoin=void 0;Is.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};Is.regtest={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};Is.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var ul=K(Os=>{"use strict";E();P();Object.defineProperty(Os,"__esModule",{value:!0});Os.encode=Os.decode=Os.check=void 0;function t6(e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return!1;let t=e[3];if(t===0||5+t>=e.length||e[4+t]!==2)return!1;let r=e[5+t];return!(r===0||6+t+r!==e.length||e[4]&128||t>1&&e[4]===0&&!(e[5]&128)||e[t+6]&128||r>1&&e[t+6]===0&&!(e[t+7]&128))}Os.check=t6;function r6(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(e[0]!==48)throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(e[2]!==2)throw new Error("Expected DER integer");let t=e[3];if(t===0)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(e[4+t]!==2)throw new Error("Expected DER integer (2)");let r=e[5+t];if(r===0)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(e[4]&128)throw new Error("R value is negative");if(t>1&&e[4]===0&&!(e[5]&128))throw new Error("R value excessively padded");if(e[t+6]&128)throw new Error("S value is negative");if(r>1&&e[t+6]===0&&!(e[t+7]&128))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}}Os.decode=r6;function n6(e,t){let r=e.length,n=t.length;if(r===0)throw new Error("R length is zero");if(n===0)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(e[0]&128)throw new Error("R value is negative");if(t[0]&128)throw new Error("S value is negative");if(r>1&&e[0]===0&&!(e[1]&128))throw new Error("R value excessively padded");if(n>1&&t[0]===0&&!(t[1]&128))throw new Error("S value excessively padded");let i=m.Buffer.allocUnsafe(6+r+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+r]=2,i[5+r]=t.length,t.copy(i,6+r),i}Os.encode=n6});var Oo=K(da=>{"use strict";E();P();Object.defineProperty(da,"__esModule",{value:!0});da.REVERSE_OPS=da.OPS=void 0;var fl={OP_FALSE:0,OP_0:0,OP_DATA_1:1,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};da.OPS=fl;var q1={};da.REVERSE_OPS=q1;for(let e of Object.keys(fl)){let t=fl[e];q1[t]=e}});var U1=K(Ms=>{"use strict";E();P();Object.defineProperty(Ms,"__esModule",{value:!0});Ms.decode=Ms.encode=Ms.encodingLength=void 0;var Bs=Oo();function R1(e){return e<Bs.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}Ms.encodingLength=R1;function i6(e,t,r){let n=R1(t);return n===1?e.writeUInt8(t,r):n===2?(e.writeUInt8(Bs.OPS.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):n===3?(e.writeUInt8(Bs.OPS.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(Bs.OPS.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),n}Ms.encode=i6;function s6(e,t){let r=e.readUInt8(t),n,i;if(r<Bs.OPS.OP_PUSHDATA1)n=r,i=1;else if(r===Bs.OPS.OP_PUSHDATA1){if(t+2>e.length)return null;n=e.readUInt8(t+1),i=2}else if(r===Bs.OPS.OP_PUSHDATA2){if(t+3>e.length)return null;n=e.readUInt16LE(t+1),i=3}else{if(t+5>e.length)return null;if(r!==Bs.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=e.readUInt32LE(t+1),i=5}return{opcode:r,number:n,size:i}}Ms.decode=s6});var L1=K(la=>{"use strict";E();P();Object.defineProperty(la,"__esModule",{value:!0});la.encode=la.decode=void 0;function o6(e,t,r){t=t||4,r=r===void 0?!0:r;let n=e.length;if(n===0)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&(e[n-1]&127)===0&&(n<=1||(e[n-2]&128)===0))throw new Error("Non-minimally encoded script number");if(n===5){let s=e.readUInt32LE(0),o=e.readUInt8(4);return o&128?-((o&-129)*4294967296+s):o*4294967296+s}let i=0;for(let s=0;s<n;++s)i|=e[s]<<8*s;return e[n-1]&128?-(i&~(128<<8*(n-1))):i}la.decode=o6;function a6(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}function c6(e){let t=Math.abs(e),r=a6(t),n=m.Buffer.allocUnsafe(r),i=e<0;for(let s=0;s<r;++s)n.writeUInt8(t&255,s),t>>=8;return n[r-1]&128?n.writeUInt8(i?128:0,r-1):i&&(n[r-1]|=128),n}la.encode=c6});var Bo=K(de=>{"use strict";E();P();Object.defineProperty(de,"__esModule",{value:!0});de.bytes=de.stringToBytes=de.str=de.bytesToString=de.hex=de.utf8=de.bech32m=de.bech32=de.base58check=de.base58xmr=de.base58xrp=de.base58flickr=de.base58=de.base64url=de.base64=de.base32crockford=de.base32hex=de.base32=de.base16=de.utils=de.assertNumber=void 0;function Hs(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}de.assertNumber=Hs;function vi(...e){let t=(i,s)=>o=>i(s(o)),r=Array.from(e).reverse().reduce((i,s)=>i?t(i,s.encode):s.encode,void 0),n=e.reduce((i,s)=>i?t(i,s.decode):s.decode,void 0);return{encode:r,decode:n}}function Hi(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(r=>{if(Hs(r),r<0||r>=e.length)throw new Error(`Digit index outside alphabet: ${r} (alphabet: ${e.length})`);return e[r]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(r=>{if(typeof r!="string")throw new Error(`alphabet.decode: not string element=${r}`);let n=e.indexOf(r);if(n===-1)throw new Error(`Unknown letter: "${r}". Allowed: ${e}`);return n})}}}function ki(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let r of t)if(typeof r!="string")throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Ic(e,t="="){if(Hs(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("padding.encode input should be array of strings");for(let n of r)if(typeof n!="string")throw new Error(`padding.encode: non-string input=${n}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of r)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function z1(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function j1(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0,i=[],s=Array.from(e);for(s.forEach(o=>{if(Hs(o),o<0||o>=t)throw new Error(`Wrong integer: ${o}`)});;){let o=0,a=!0;for(let c=n;c<s.length;c++){let u=s[c],f=t*o+u;if(!Number.isSafeInteger(f)||t*o/t!==o||f-u!==t*o)throw new Error("convertRadix: carry overflow");if(o=f%r,s[c]=Math.floor(f/r),!Number.isSafeInteger(s[c])||s[c]*r+o!==f)throw new Error("convertRadix: carry overflow");if(a)s[c]?a=!1:n=c;else continue}if(i.push(o),a)break}for(let o=0;o<e.length-1&&e[o]===0;o++)i.push(0);return i.reverse()}var V1=(e,t)=>t?V1(t,e%t):e,qu=(e,t)=>e+(t-V1(e,t));function dl(e,t,r,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(qu(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${qu(t,r)}`);let i=0,s=0,o=2**r-1,a=[];for(let c of e){if(Hs(c),c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(i=i<<t|c,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=r;s-=r)a.push((i>>s-r&o)>>>0);i&=2**s-1}if(i=i<<r-s&o,!n&&s>=t)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&a.push(i>>>0),a}function G1(e){return Hs(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return j1(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(j1(t,e,2**8))}}}function hs(e,t=!1){if(Hs(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(qu(8,e)>32||qu(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return dl(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(dl(r,e,8,t))}}}function D1(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}function $1(e,t){if(Hs(e),typeof t!="function")throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");let n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");let n=r.slice(0,-e),i=t(n).slice(0,e),s=r.slice(-e);for(let o=0;o<e;o++)if(i[o]!==s[o])throw new Error("Invalid checksum");return n}}}de.utils={alphabet:Hi,chain:vi,checksum:$1,radix:G1,radix2:hs,join:ki,padding:Ic};de.base16=vi(hs(4),Hi("0123456789ABCDEF"),ki(""));de.base32=vi(hs(5),Hi("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Ic(5),ki(""));de.base32hex=vi(hs(5),Hi("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Ic(5),ki(""));de.base32crockford=vi(hs(5),Hi("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),ki(""),z1(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));de.base64=vi(hs(6),Hi("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ic(6),ki(""));de.base64url=vi(hs(6),Hi("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Ic(6),ki(""));var hl=e=>vi(G1(58),Hi(e),ki(""));de.base58=hl("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");de.base58flickr=hl("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");de.base58xrp=hl("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");var K1=[0,2,3,5,6,7,9,10,11];de.base58xmr={encode(e){let t="";for(let r=0;r<e.length;r+=8){let n=e.subarray(r,r+8);t+=de.base58.encode(n).padStart(K1[n.length],"1")}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=11){let n=e.slice(r,r+11),i=K1.indexOf(n.length),s=de.base58.decode(n);for(let o=0;o<s.length-i;o++)if(s[o]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(t)}};var u6=e=>vi($1(4,t=>e(e(t))),de.base58);de.base58check=u6;var ll=vi(Hi("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),ki("")),F1=[996825010,642813549,513874426,1027748829,705979059];function Tc(e){let t=e>>25,r=(e&33554431)<<5;for(let n=0;n<F1.length;n++)(t>>n&1)===1&&(r^=F1[n]);return r}function W1(e,t,r=1){let n=e.length,i=1;for(let s=0;s<n;s++){let o=e.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);i=Tc(i)^o>>5}i=Tc(i);for(let s=0;s<n;s++)i=Tc(i)^e.charCodeAt(s)&31;for(let s of t)i=Tc(i)^s;for(let s=0;s<6;s++)i=Tc(i);return i^=r,ll.encode(dl([i%2**30],30,5,!1))}function X1(e){let t=e==="bech32"?1:734539939,r=hs(5),n=r.decode,i=r.encode,s=D1(n);function o(f,d,h=90){if(typeof f!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof f}`);if(!Array.isArray(d)||d.length&&typeof d[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof d}`);let b=f.length+7+d.length;if(h!==!1&&b>h)throw new TypeError(`Length ${b} exceeds limit ${h}`);return f=f.toLowerCase(),`${f}1${ll.encode(d)}${W1(f,d,t)}`}function a(f,d=90){if(typeof f!="string")throw new Error(`bech32.decode input should be string, not ${typeof f}`);if(f.length<8||d!==!1&&f.length>d)throw new TypeError(`Wrong string length: ${f.length} (${f}). Expected (8..${d})`);let h=f.toLowerCase();if(f!==h&&f!==f.toUpperCase())throw new Error("String must be lowercase or uppercase");f=h;let b=f.lastIndexOf("1");if(b===0||b===-1)throw new Error('Letter "1" must be present between prefix and data only');let[g,y]=[f.slice(0,b),f.slice(b+1)];if(y.length<6)throw new Error("Data must be at least 6 characters long");let x=ll.decode(y).slice(0,-6),T=W1(g,x,t);if(!y.endsWith(T))throw new Error(`Invalid checksum in ${f}: expected "${T}"`);return{prefix:g,words:x}}let c=D1(a);function u(f){let{prefix:d,words:h}=a(f,!1);return{prefix:d,words:h,bytes:n(h)}}return{encode:o,decode:a,decodeToBytes:u,decodeUnsafe:c,fromWords:n,fromWordsUnsafe:s,toWords:i}}de.bech32=X1("bech32");de.bech32m=X1("bech32m");de.utf8={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)};de.hex=vi(hs(4),Hi("0123456789abcdef"),ki(""),z1(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));var Ac={utf8:de.utf8,hex:de.hex,base16:de.base16,base32:de.base32,base64:de.base64,base64url:de.base64url,base58:de.base58,base58xmr:de.base58xmr},Y1=`Invalid encoding type. Available types: ${Object.keys(Ac).join(", ")}`,f6=(e,t)=>{if(typeof e!="string"||!Ac.hasOwnProperty(e))throw new TypeError(Y1);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return Ac[e].encode(t)};de.bytesToString=f6;de.str=de.bytesToString;var d6=(e,t)=>{if(!Ac.hasOwnProperty(e))throw new TypeError(Y1);if(typeof t!="string")throw new TypeError("stringToBytes() expects string");return Ac[e].decode(t)};de.stringToBytes=d6;de.bytes=de.stringToBytes});var Z1=K(ks=>{"use strict";E();P();Object.defineProperty(ks,"__esModule",{value:!0});ks.base58=ks.fromBase58=ks.toBase58=void 0;var pl=Bo();Object.defineProperty(ks,"base58",{enumerable:!0,get:function(){return pl.base58}});function l6(e){let t=m.Buffer.from(e);return pl.base58.encode(Uint8Array.from(t))}ks.toBase58=l6;function h6(e){return pl.base58.decode(e)}ks.fromBase58=h6});var J1=K(Ru=>{"use strict";E();P();Object.defineProperty(Ru,"__esModule",{value:!0});Ru.crypto=void 0;Ru.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}});var Ur=K((me,Oc)=>{"use strict";E();P();Object.defineProperty(me,"__esModule",{value:!0});me.randomBytes=me.wrapConstructorWithOpts=me.wrapConstructor=me.checkOpts=me.Hash=me.assertHash=me.assertBytes=me.assertBool=me.assertNumber=me.concatBytes=me.toBytes=me.utf8ToBytes=me.asyncLoop=me.nextTick=me.hexToBytes=me.bytesToHex=me.isLE=me.rotr=me.createView=me.u32=me.u8=void 0;var Uu=J1(),p6=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);me.u8=p6;var b6=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));me.u32=b6;var g6=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);me.createView=g6;var y6=(e,t)=>e<<32-t|e>>>t;me.rotr=y6;me.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!me.isLE)throw new Error("Non little-endian hardware is not supported");var v6=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function m6(e){let t="";for(let r=0;r<e.length;r++)t+=v6[e[r]];return t}me.bytesToHex=m6;function w6(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s))throw new Error("Invalid byte sequence");t[r]=s}return t}me.hexToBytes=w6;me.nextTick=(()=>{let e=typeof Oc<"u"&&typeof Oc.require=="function"&&Oc.require.bind(Oc);try{if(e){let{setImmediate:t}=e("timers");return()=>new Promise(r=>t(r))}}catch{}return()=>new Promise(t=>setTimeout(t,0))})();async function x6(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let s=Date.now()-n;s>=0&&s<t||(await(0,me.nextTick)(),n+=s)}}me.asyncLoop=x6;function Q1(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}me.utf8ToBytes=Q1;function yl(e){if(typeof e=="string"&&(e=Q1(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}me.toBytes=yl;function _6(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let s=e[n];r.set(s,i),i+=s.length}return r}me.concatBytes=_6;function bl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}me.assertNumber=bl;function S6(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}me.assertBool=S6;function E6(e,...t){if(!(e instanceof Uint8Array&&(!t.length||t.includes(e.length))))throw new TypeError(`Expected ${t} bytes, not ${typeof e} with length=${e.length}`)}me.assertBytes=E6;function P6(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");bl(e.outputLen),bl(e.blockLen)}me.assertHash=P6;var gl=class{clone(){return this._cloneInto()}};me.Hash=gl;var T6=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function A6(e,t){if(t!==void 0&&(typeof t!="object"||!T6(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}me.checkOpts=A6;function I6(e){let t=n=>e().update(yl(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}me.wrapConstructor=I6;function O6(e){let t=(n,i)=>e(i).update(yl(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}me.wrapConstructorWithOpts=O6;function B6(e=32){if(Uu.crypto.web)return Uu.crypto.web.getRandomValues(new Uint8Array(e));if(Uu.crypto.node)return new Uint8Array(Uu.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}me.randomBytes=B6});var ju=K(Lu=>{"use strict";E();P();Object.defineProperty(Lu,"__esModule",{value:!0});Lu.SHA2=void 0;var Bc=Ur();function M6(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)}var vl=class extends Bc.Hash{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Bc.createView)(this.buffer)}update(t){if(this.destroyed)throw new Error("instance is destroyed");let{view:r,buffer:n,blockLen:i,finished:s}=this;if(s)throw new Error("digest() was already called");t=(0,Bc.toBytes)(t);let o=t.length;for(let a=0;a<o;){let c=Math.min(i-this.pos,o-a);if(c===i){let u=(0,Bc.createView)(t);for(;i<=o-a;a+=i)this.process(u,a);continue}n.set(t.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){if(this.destroyed)throw new Error("instance is destroyed");if(!(t instanceof Uint8Array)||t.length<this.outputLen)throw new Error("_Sha2: Invalid output buffer");if(this.finished)throw new Error("digest() was already called");this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:s}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let c=o;c<i;c++)r[c]=0;M6(n,i-8,BigInt(this.length*8),s),this.process(n,0);let a=(0,Bc.createView)(t);this.get().forEach((c,u)=>a.setUint32(4*u,c,s))}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%r&&t.buffer.set(n),t}};Lu.SHA2=vl});var ha=K(Du=>{"use strict";E();P();Object.defineProperty(Du,"__esModule",{value:!0});Du.sha256=void 0;var H6=ju(),mi=Ur(),k6=(e,t,r)=>e&t^~e&r,N6=(e,t,r)=>e&t^e&r^t&r,C6=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ns=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cs=new Uint32Array(64),ml=class extends H6.SHA2{constructor(){super(64,32,8,!1),this.A=Ns[0]|0,this.B=Ns[1]|0,this.C=Ns[2]|0,this.D=Ns[3]|0,this.E=Ns[4]|0,this.F=Ns[5]|0,this.G=Ns[6]|0,this.H=Ns[7]|0}get(){let{A:t,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[t,r,n,i,s,o,a,c]}set(t,r,n,i,s,o,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,r){for(let d=0;d<16;d++,r+=4)Cs[d]=t.getUint32(r,!1);for(let d=16;d<64;d++){let h=Cs[d-15],b=Cs[d-2],g=(0,mi.rotr)(h,7)^(0,mi.rotr)(h,18)^h>>>3,y=(0,mi.rotr)(b,17)^(0,mi.rotr)(b,19)^b>>>10;Cs[d]=y+Cs[d-7]+g+Cs[d-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:u,H:f}=this;for(let d=0;d<64;d++){let h=(0,mi.rotr)(a,6)^(0,mi.rotr)(a,11)^(0,mi.rotr)(a,25),b=f+h+k6(a,c,u)+C6[d]+Cs[d]|0,y=((0,mi.rotr)(n,2)^(0,mi.rotr)(n,13)^(0,mi.rotr)(n,22))+N6(n,i,s)|0;f=u,u=c,c=a,a=o+b|0,o=s,s=i,i=n,n=b+y|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,c,u,f)}roundClean(){Cs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};Du.sha256=(0,mi.wrapConstructor)(()=>new ml)});var pa=K(we=>{"use strict";E();P();Object.defineProperty(we,"__esModule",{value:!0});we.add5H=we.add5L=we.add4H=we.add4L=we.add3H=we.add3L=we.add=we.rotlBL=we.rotlBH=we.rotlSL=we.rotlSH=we.rotr32L=we.rotr32H=we.rotrBL=we.rotrBH=we.rotrSL=we.rotrSH=we.shrSL=we.shrSH=we.toBig=we.split=we.fromBig=void 0;var Ku=BigInt(2**32-1),wl=BigInt(32);function eb(e,t=!1){return t?{h:Number(e&Ku),l:Number(e>>wl&Ku)}:{h:Number(e>>wl&Ku)|0,l:Number(e&Ku)|0}}we.fromBig=eb;function q6(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:s,l:o}=eb(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}we.split=q6;var R6=(e,t)=>BigInt(e>>>0)<<wl|BigInt(t>>>0);we.toBig=R6;var U6=(e,t,r)=>e>>>r;we.shrSH=U6;var L6=(e,t,r)=>e<<32-r|t>>>r;we.shrSL=L6;var j6=(e,t,r)=>e>>>r|t<<32-r;we.rotrSH=j6;var D6=(e,t,r)=>e<<32-r|t>>>r;we.rotrSL=D6;var K6=(e,t,r)=>e<<64-r|t>>>r-32;we.rotrBH=K6;var F6=(e,t,r)=>e>>>r-32|t<<64-r;we.rotrBL=F6;var W6=(e,t)=>t;we.rotr32H=W6;var z6=(e,t)=>e;we.rotr32L=z6;var V6=(e,t,r)=>e<<r|t>>>32-r;we.rotlSH=V6;var G6=(e,t,r)=>t<<r|e>>>32-r;we.rotlSL=G6;var $6=(e,t,r)=>t<<r-32|e>>>64-r;we.rotlBH=$6;var X6=(e,t,r)=>e<<r-32|t>>>64-r;we.rotlBL=X6;function Y6(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}we.add=Y6;var Z6=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);we.add3L=Z6;var J6=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;we.add3H=J6;var Q6=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);we.add4L=Q6;var ex=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0;we.add4H=ex;var tx=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);we.add5L=tx;var rx=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0;we.add5H=rx});var Fu=K(Gr=>{"use strict";E();P();var nx=Gr&&Gr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ix=Gr&&Gr.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),sx=Gr&&Gr.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&nx(t,e,r);return ix(t,e),t};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.sha384=Gr.sha512_256=Gr.sha512=Gr.SHA512=void 0;var ox=ju(),Oe=sx(pa()),Sl=Ur(),[ax,cx]=Oe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),qs=new Uint32Array(80),Rs=new Uint32Array(80),ba=class extends ox.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:f,Fh:d,Fl:h,Gh:b,Gl:g,Hh:y,Hl:x}=this;return[t,r,n,i,s,o,a,c,u,f,d,h,b,g,y,x]}set(t,r,n,i,s,o,a,c,u,f,d,h,b,g,y,x){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=f|0,this.Fh=d|0,this.Fl=h|0,this.Gh=b|0,this.Gl=g|0,this.Hh=y|0,this.Hl=x|0}process(t,r){for(let k=0;k<16;k++,r+=4)qs[k]=t.getUint32(r),Rs[k]=t.getUint32(r+=4);for(let k=16;k<80;k++){let R=qs[k-15]|0,C=Rs[k-15]|0,q=Oe.rotrSH(R,C,1)^Oe.rotrSH(R,C,8)^Oe.shrSH(R,C,7),L=Oe.rotrSL(R,C,1)^Oe.rotrSL(R,C,8)^Oe.shrSL(R,C,7),j=qs[k-2]|0,G=Rs[k-2]|0,B=Oe.rotrSH(j,G,19)^Oe.rotrBH(j,G,61)^Oe.shrSH(j,G,6),l=Oe.rotrSL(j,G,19)^Oe.rotrBL(j,G,61)^Oe.shrSL(j,G,6),w=Oe.add4L(L,l,Rs[k-7],Rs[k-16]),_=Oe.add4H(w,q,B,qs[k-7],qs[k-16]);qs[k]=_|0,Rs[k]=w|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:f,Eh:d,El:h,Fh:b,Fl:g,Gh:y,Gl:x,Hh:T,Hl:M}=this;for(let k=0;k<80;k++){let R=Oe.rotrSH(d,h,14)^Oe.rotrSH(d,h,18)^Oe.rotrBH(d,h,41),C=Oe.rotrSL(d,h,14)^Oe.rotrSL(d,h,18)^Oe.rotrBL(d,h,41),q=d&b^~d&y,L=h&g^~h&x,j=Oe.add5L(M,C,L,cx[k],Rs[k]),G=Oe.add5H(j,T,R,q,ax[k],qs[k]),B=j|0,l=Oe.rotrSH(n,i,28)^Oe.rotrBH(n,i,34)^Oe.rotrBH(n,i,39),w=Oe.rotrSL(n,i,28)^Oe.rotrBL(n,i,34)^Oe.rotrBL(n,i,39),_=n&s^n&a^s&a,v=i&o^i&c^o&c;T=y|0,M=x|0,y=b|0,x=g|0,b=d|0,g=h|0,{h:d,l:h}=Oe.add(u|0,f|0,G|0,B|0),u=a|0,f=c|0,a=s|0,c=o|0,s=n|0,o=i|0;let S=Oe.add3L(B,w,v);n=Oe.add3H(S,G,l,_),i=S|0}({h:n,l:i}=Oe.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Oe.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Oe.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:f}=Oe.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:d,l:h}=Oe.add(this.Eh|0,this.El|0,d|0,h|0),{h:b,l:g}=Oe.add(this.Fh|0,this.Fl|0,b|0,g|0),{h:y,l:x}=Oe.add(this.Gh|0,this.Gl|0,y|0,x|0),{h:T,l:M}=Oe.add(this.Hh|0,this.Hl|0,T|0,M|0),this.set(n,i,s,o,a,c,u,f,d,h,b,g,y,x,T,M)}roundClean(){qs.fill(0),Rs.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};Gr.SHA512=ba;var xl=class extends ba{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},_l=class extends ba{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};Gr.sha512=(0,Sl.wrapConstructor)(()=>new ba);Gr.sha512_256=(0,Sl.wrapConstructor)(()=>new xl);Gr.sha384=(0,Sl.wrapConstructor)(()=>new _l)});var Tl=K(ga=>{"use strict";E();P();Object.defineProperty(ga,"__esModule",{value:!0});ga.ripemd160=ga.RIPEMD160=void 0;var ux=ju(),fx=Ur(),dx=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),rb=Uint8Array.from({length:16},(e,t)=>t),lx=rb.map(e=>(9*e+5)%16),El=[rb],Pl=[lx];for(let e=0;e<4;e++)for(let t of[El,Pl])t.push(t[e].map(r=>dx[r]));var nb=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),hx=El.map((e,t)=>e.map(r=>nb[t][r])),px=Pl.map((e,t)=>e.map(r=>nb[t][r])),bx=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),gx=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Wu=(e,t)=>e<<t|e>>>32-t;function tb(e,t,r,n){return e===0?t^r^n:e===1?t&r|~t&n:e===2?(t|~r)^n:e===3?t&n|r&~n:t^(r|~n)}var zu=new Uint32Array(16),Vu=class extends ux.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:t,h1:r,h2:n,h3:i,h4:s}=this;return[t,r,n,i,s]}set(t,r,n,i,s){this.h0=t|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(t,r){for(let b=0;b<16;b++,r+=4)zu[b]=t.getUint32(r,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,c=a,u=this.h3|0,f=u,d=this.h4|0,h=d;for(let b=0;b<5;b++){let g=4-b,y=bx[b],x=gx[b],T=El[b],M=Pl[b],k=hx[b],R=px[b];for(let C=0;C<16;C++){let q=Wu(n+tb(b,s,a,u)+zu[T[C]]+y,k[C])+d|0;n=d,d=u,u=Wu(a,10)|0,a=s,s=q}for(let C=0;C<16;C++){let q=Wu(i+tb(g,o,c,f)+zu[M[C]]+x,R[C])+h|0;i=h,h=f,f=Wu(c,10)|0,c=o,o=q}}this.set(this.h1+a+f|0,this.h2+u+h|0,this.h3+d+i|0,this.h4+n+o|0,this.h0+s+c|0)}roundClean(){zu.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};ga.RIPEMD160=Vu;ga.ripemd160=(0,fx.wrapConstructor)(()=>new Vu)});var Gu=K(et=>{"use strict";E();P();var yx=et&&et.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),vx=et&&et.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mx=et&&et.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&yx(t,e,r);return vx(t,e),t};Object.defineProperty(et,"__esModule",{value:!0});et.shake256=et.shake128=et.keccak_512=et.keccak_384=et.keccak_256=et.keccak_224=et.sha3_512=et.sha3_384=et.sha3_256=et.sha3_224=et.Keccak=et.keccakP=void 0;var Hc=mx(pa()),Mo=Ur(),[ob,ab,cb]=[[],[],[]],wx=BigInt(0),Mc=BigInt(1),xx=BigInt(2),_x=BigInt(7),Sx=BigInt(256),Ex=BigInt(113);for(let e=0,t=Mc,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],ob.push(2*(5*n+r)),ab.push((e+1)*(e+2)/2%64);let i=wx;for(let s=0;s<7;s++)t=(t<<Mc^(t>>_x)*Ex)%Sx,t&xx&&(i^=Mc<<(Mc<<BigInt(s))-Mc);cb.push(i)}var[Px,Tx]=Hc.split(cb,!0),ib=(e,t,r)=>r>32?Hc.rotlBH(e,t,r):Hc.rotlSH(e,t,r),sb=(e,t,r)=>r>32?Hc.rotlBL(e,t,r):Hc.rotlSL(e,t,r);function ub(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)r[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){let a=(o+8)%10,c=(o+2)%10,u=r[c],f=r[c+1],d=ib(u,f,1)^r[a],h=sb(u,f,1)^r[a+1];for(let b=0;b<50;b+=10)e[o+b]^=d,e[o+b+1]^=h}let i=e[2],s=e[3];for(let o=0;o<24;o++){let a=ab[o],c=ib(i,s,a),u=sb(i,s,a),f=ob[o];i=e[f],s=e[f+1],e[f]=c,e[f+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=Px[n],e[1]^=Tx[n]}r.fill(0)}et.keccakP=ub;var Ho=class extends Mo.Hash{constructor(t,r,n,i=!1,s=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,Mo.assertNumber)(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Mo.u32)(this.state)}keccak(){ub(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){if(this.destroyed)throw new Error("instance is destroyed");if(this.finished)throw new Error("digest() was already called");let{blockLen:r,state:n}=this;t=(0,Mo.toBytes)(t);let i=t.length;for(let s=0;s<i;){let o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=t[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:r,pos:n,blockLen:i}=this;t[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){if(this.destroyed)throw new Error("instance is destroyed");if(!(t instanceof Uint8Array))throw new Error("Keccak: invalid output buffer");this.finish();for(let r=0,n=t.length;r<n;){this.posOut>=this.blockLen&&this.keccak();let i=Math.min(this.blockLen-this.posOut,n-r);t.set(this.state.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,Mo.assertNumber)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(t.length<this.outputLen)throw new Error("Keccak: invalid output buffer");if(this.finished)throw new Error("digest() was already called");return this.finish(),this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new Ho(r,n,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=n,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}};et.Keccak=Ho;var Us=(e,t,r)=>(0,Mo.wrapConstructor)(()=>new Ho(t,e,r));et.sha3_224=Us(6,144,224/8);et.sha3_256=Us(6,136,256/8);et.sha3_384=Us(6,104,384/8);et.sha3_512=Us(6,72,512/8);et.keccak_224=Us(1,144,224/8);et.keccak_256=Us(1,136,256/8);et.keccak_384=Us(1,104,384/8);et.keccak_512=Us(1,72,512/8);var fb=(e,t,r)=>(0,Mo.wrapConstructorWithOpts)((n={})=>new Ho(t,e,n.dkLen!==void 0?n.dkLen:r,!0));et.shake128=fb(31,168,128/8);et.shake256=fb(31,136,256/8)});var $u=K(ya=>{"use strict";E();P();Object.defineProperty(ya,"__esModule",{value:!0});ya.BLAKE2=ya.SIGMA=void 0;var ko=Ur();ya.SIGMA=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);var Al=class extends ko.Hash{constructor(t,r,n={},i,s,o){if(super(),this.blockLen=t,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,(0,ko.assertNumber)(t),(0,ko.assertNumber)(r),(0,ko.assertNumber)(i),r<0||r>i)throw new Error("Blake2: outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>i))throw new Error(`Key should be up 1..${i} byte long or undefined`);if(n.salt!==void 0&&n.salt.length!==s)throw new Error(`Salt should be ${s} byte long or undefined`);if(n.personalization!==void 0&&n.personalization.length!==o)throw new Error(`Personalization should be ${o} byte long or undefined`);this.buffer32=(0,ko.u32)(this.buffer=new Uint8Array(t))}update(t){if(this.destroyed)throw new Error("instance is destroyed");let{finished:r,blockLen:n,buffer:i,buffer32:s}=this;if(r)throw new Error("digest() was already called");t=(0,ko.toBytes)(t);let o=t.length;for(let a=0;a<o;){this.pos===n&&(this.compress(s,0,!1),this.pos=0);let c=Math.min(n-this.pos,o-a),u=t.byteOffset+a;if(c===n&&!(u%4)&&a+c<o){let f=new Uint32Array(t.buffer,u,Math.floor((o-a)/4));for(let d=0;a+n<o;d+=s.length,a+=n)this.length+=n,this.compress(f,d,!1);continue}i.set(t.subarray(a,a+c),this.pos),this.pos+=c,this.length+=c,a+=c}return this}digestInto(t){if(this.destroyed)throw new Error("instance is destroyed");if(!(t instanceof Uint8Array)||t.length<this.outputLen)throw new Error("_Blake2: Invalid output buffer");let{finished:r,pos:n,buffer32:i}=this;if(r)throw new Error("digest() was already called");this.finished=!0,this.buffer.subarray(n).fill(0),this.compress(i,0,!0);let s=(0,ko.u32)(t);this.get().forEach((o,a)=>s[a]=o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){let{buffer:r,length:n,finished:i,destroyed:s,outputLen:o,pos:a}=this;return t||(t=new this.constructor({dkLen:o})),t.set(...this.get()),t.length=n,t.finished=i,t.destroyed=s,t.outputLen=o,t.buffer.set(r),t.pos=a,t}};ya.BLAKE2=Al});var Ol=K(Ni=>{"use strict";E();P();var Ax=Ni&&Ni.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ix=Ni&&Ni.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),lb=Ni&&Ni.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Ax(t,e,r);return Ix(t,e),t};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.blake2b=void 0;var db=lb($u()),on=lb(pa()),va=Ur(),vr=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),re=new Uint32Array(32);function Ls(e,t,r,n,i,s){let o=i[s],a=i[s+1],c=re[2*e],u=re[2*e+1],f=re[2*t],d=re[2*t+1],h=re[2*r],b=re[2*r+1],g=re[2*n],y=re[2*n+1],x=on.add3L(c,f,o);u=on.add3H(x,u,d,a),c=x|0,{Dh:y,Dl:g}={Dh:y^u,Dl:g^c},{Dh:y,Dl:g}={Dh:on.rotr32H(y,g),Dl:on.rotr32L(y,g)},{h:b,l:h}=on.add(b,h,y,g),{Bh:d,Bl:f}={Bh:d^b,Bl:f^h},{Bh:d,Bl:f}={Bh:on.rotrSH(d,f,24),Bl:on.rotrSL(d,f,24)},re[2*e]=c,re[2*e+1]=u,re[2*t]=f,re[2*t+1]=d,re[2*r]=h,re[2*r+1]=b,re[2*n]=g,re[2*n+1]=y}function js(e,t,r,n,i,s){let o=i[s],a=i[s+1],c=re[2*e],u=re[2*e+1],f=re[2*t],d=re[2*t+1],h=re[2*r],b=re[2*r+1],g=re[2*n],y=re[2*n+1],x=on.add3L(c,f,o);u=on.add3H(x,u,d,a),c=x|0,{Dh:y,Dl:g}={Dh:y^u,Dl:g^c},{Dh:y,Dl:g}={Dh:on.rotrSH(y,g,16),Dl:on.rotrSL(y,g,16)},{h:b,l:h}=on.add(b,h,y,g),{Bh:d,Bl:f}={Bh:d^b,Bl:f^h},{Bh:d,Bl:f}={Bh:on.rotrBH(d,f,63),Bl:on.rotrBL(d,f,63)},re[2*e]=c,re[2*e+1]=u,re[2*t]=f,re[2*t+1]=d,re[2*r]=h,re[2*r+1]=b,re[2*n]=g,re[2*n+1]=y}var Il=class extends db.BLAKE2{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=vr[0]|0,this.v0h=vr[1]|0,this.v1l=vr[2]|0,this.v1h=vr[3]|0,this.v2l=vr[4]|0,this.v2h=vr[5]|0,this.v3l=vr[6]|0,this.v3h=vr[7]|0,this.v4l=vr[8]|0,this.v4h=vr[9]|0,this.v5l=vr[10]|0,this.v5h=vr[11]|0,this.v6l=vr[12]|0,this.v6h=vr[13]|0,this.v7l=vr[14]|0,this.v7h=vr[15]|0;let r=t.key?t.key.length:0;if(this.v0l^=this.outputLen|r<<8|1<<16|1<<24,t.salt){let n=(0,va.u32)((0,va.toBytes)(t.salt));this.v4l^=n[0],this.v4h^=n[1],this.v5l^=n[2],this.v5h^=n[3]}if(t.personalization){let n=(0,va.u32)((0,va.toBytes)(t.personalization));this.v6l^=n[0],this.v6h^=n[1],this.v7l^=n[2],this.v7h^=n[3]}if(t.key){let n=new Uint8Array(this.blockLen);n.set((0,va.toBytes)(t.key)),this.update(n)}}get(){let{v0l:t,v0h:r,v1l:n,v1h:i,v2l:s,v2h:o,v3l:a,v3h:c,v4l:u,v4h:f,v5l:d,v5h:h,v6l:b,v6h:g,v7l:y,v7h:x}=this;return[t,r,n,i,s,o,a,c,u,f,d,h,b,g,y,x]}set(t,r,n,i,s,o,a,c,u,f,d,h,b,g,y,x){this.v0l=t|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=f|0,this.v5l=d|0,this.v5h=h|0,this.v6l=b|0,this.v6h=g|0,this.v7l=y|0,this.v7h=x|0}compress(t,r,n){this.get().forEach((c,u)=>re[u]=c),re.set(vr,16);let{h:i,l:s}=on.fromBig(BigInt(this.length));re[24]=vr[8]^s,re[25]=vr[9]^i,n&&(re[28]=~re[28],re[29]=~re[29]);let o=0,a=db.SIGMA;for(let c=0;c<12;c++)Ls(0,4,8,12,t,r+2*a[o++]),js(0,4,8,12,t,r+2*a[o++]),Ls(1,5,9,13,t,r+2*a[o++]),js(1,5,9,13,t,r+2*a[o++]),Ls(2,6,10,14,t,r+2*a[o++]),js(2,6,10,14,t,r+2*a[o++]),Ls(3,7,11,15,t,r+2*a[o++]),js(3,7,11,15,t,r+2*a[o++]),Ls(0,5,10,15,t,r+2*a[o++]),js(0,5,10,15,t,r+2*a[o++]),Ls(1,6,11,12,t,r+2*a[o++]),js(1,6,11,12,t,r+2*a[o++]),Ls(2,7,8,13,t,r+2*a[o++]),js(2,7,8,13,t,r+2*a[o++]),Ls(3,4,9,14,t,r+2*a[o++]),js(3,4,9,14,t,r+2*a[o++]);this.v0l^=re[0]^re[16],this.v0h^=re[1]^re[17],this.v1l^=re[2]^re[18],this.v1h^=re[3]^re[19],this.v2l^=re[4]^re[20],this.v2h^=re[5]^re[21],this.v3l^=re[6]^re[22],this.v3h^=re[7]^re[23],this.v4l^=re[8]^re[24],this.v4h^=re[9]^re[25],this.v5l^=re[10]^re[26],this.v5h^=re[11]^re[27],this.v6l^=re[12]^re[28],this.v6h^=re[13]^re[29],this.v7l^=re[14]^re[30],this.v7h^=re[15]^re[31],re.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};Ni.blake2b=(0,va.wrapConstructorWithOpts)(e=>new Il(e))});var kc=K(qt=>{"use strict";E();P();Object.defineProperty(qt,"__esModule",{value:!0});qt.sha3_512=qt.sha3_256=qt.ripemd160=qt.sha512=qt.sha256=qt.blake2=qt.keccak256=qt.keccak=qt.hash160=qt.doubleSha256=void 0;var Xu=ha();Object.defineProperty(qt,"sha256",{enumerable:!0,get:function(){return Xu.sha256}});var Ox=Fu();Object.defineProperty(qt,"sha512",{enumerable:!0,get:function(){return Ox.sha512}});var hb=Tl();Object.defineProperty(qt,"ripemd160",{enumerable:!0,get:function(){return hb.ripemd160}});var ma=Gu();Object.defineProperty(qt,"sha3_256",{enumerable:!0,get:function(){return ma.sha3_256}});Object.defineProperty(qt,"sha3_512",{enumerable:!0,get:function(){return ma.sha3_512}});var Bx=Ol();function Mx(e){let t=(0,Xu.sha256)(e);return(0,Xu.sha256)(t)}qt.doubleSha256=Mx;function Hx(e){let t=(0,Xu.sha256)(e);return(0,hb.ripemd160)(t)}qt.hash160=Hx;var kx=function(e,t=256){let r=m.Buffer.from(e);switch(t){case 224:return m.Buffer.from((0,ma.keccak_224)(r));case 256:return m.Buffer.from((0,ma.keccak_256)(r));case 384:return m.Buffer.from((0,ma.keccak_384)(r));case 512:return m.Buffer.from((0,ma.keccak_512)(r));default:throw new Error(`Invald algorithm: keccak${t}`)}};qt.keccak=kx;var Nx=function(e){return(0,qt.keccak)(e)};qt.keccak256=Nx;function Cx(e,t,r){let n=Math.ceil(t/8);return(0,Bx.blake2b)(e,{dkLen:n,key:r})}qt.blake2=Cx});var gb=K(wa=>{"use strict";E();P();Object.defineProperty(wa,"__esModule",{value:!0});wa.fromBase58Check=wa.toBase58Check=void 0;var pb=kc(),jN=D4(),bb=Bo();function qx(e){return(0,bb.base58check)(pb.sha256).encode(m.Buffer.from(e))}wa.toBase58Check=qx;function Rx(e){let t=(0,bb.base58check)(pb.sha256);return m.Buffer.from(t.decode(e))}wa.fromBase58Check=Rx});var yb=K(xa=>{"use strict";E();P();Object.defineProperty(xa,"__esModule",{value:!0});xa.fromBech32=xa.toBech32=void 0;var Yu=Bo();function Ux(e,t){let r=m.Buffer.from(t),n=Yu.bech32.toWords(Uint8Array.from(r));return Yu.bech32.encode(e,n)}xa.toBech32=Ux;function Lx(e,t){let r=Yu.bech32.decode(e,t),n=Yu.bech32.fromWords(r.words);return[r.prefix,m.Buffer.from(n)]}xa.fromBech32=Lx});var Bl=K(Ci=>{"use strict";E();P();Object.defineProperty(Ci,"__esModule",{value:!0});Ci.isHexPrefixed=Ci.stripHexPrefix=Ci.fromHex=Ci.toHex=void 0;function jx(e,t=!1){let r=m.Buffer.from(e);return t?"0x"+r.toString("hex"):r.toString("hex")}Ci.toHex=jx;function Dx(e){return e.startsWith("0x")&&(e=e.substring(2)),m.Buffer.from(e,"hex")}Ci.fromHex=Dx;function Kx(e){return e.startsWith("0x")?e.substring(2):e}Ci.stripHexPrefix=Kx;function Fx(e){return e.startsWith("0x")}Ci.isHexPrefixed=Fx});var Ml=K(_a=>{"use strict";E();P();Object.defineProperty(_a,"__esModule",{value:!0});_a.fromBase64=_a.toBase64=void 0;var vb=Bo();function Wx(e){let t=m.Buffer.from(e);return vb.base64.encode(Uint8Array.from(t))}_a.toBase64=Wx;function zx(e){return vb.base64.decode(e)}_a.fromBase64=zx});var Cc=K(Nc=>{"use strict";E();P();Object.defineProperty(Nc,"__esModule",{value:!0});Nc.hmac=void 0;var Zu=Ur(),Ju=class extends Zu.Hash{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,(0,Zu.assertHash)(t);let n=(0,Zu.toBytes)(r);if(this.iHash=t.create(),!(this.iHash instanceof Zu.Hash))throw new TypeError("Expected instance of class which extends utils.Hash");let i=this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;let s=new Uint8Array(i);s.set(n.length>this.iHash.blockLen?t.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){if(this.destroyed)throw new Error("instance is destroyed");return this.iHash.update(t),this}digestInto(t){if(this.destroyed)throw new Error("instance is destroyed");if(!(t instanceof Uint8Array)||t.length!==this.outputLen)throw new Error("HMAC: Invalid output buffer");if(this.finished)throw new Error("digest() was already called");this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Vx=(e,t,r)=>new Ju(e,t).update(r).digest();Nc.hmac=Vx;Nc.hmac.create=(e,t)=>new Ju(e,t)});var xb=K(Sa=>{"use strict";E();P();Object.defineProperty(Sa,"__esModule",{value:!0});Sa.hmacSHA512=Sa.hmacSHA256=void 0;var mb=Cc(),wb=kc();function Gx(e,t){return m.Buffer.from((0,mb.hmac)(wb.sha256,e,t))}Sa.hmacSHA256=Gx;function $x(e,t){return m.Buffer.from((0,mb.hmac)(wb.sha512,e,t))}Sa.hmacSHA512=$x});var _b=K(Ea=>{"use strict";E();P();Object.defineProperty(Ea,"__esModule",{value:!0});Ea.fromUtf8=Ea.toUtf8=void 0;function Xx(e){return new TextEncoder().encode(e)}Ea.toUtf8=Xx;function Yx(e){return new TextDecoder("utf-8",{fatal:!0}).decode(e)}Ea.fromUtf8=Yx});var kl=K(Ds=>{"use strict";E();P();Object.defineProperty(Ds,"__esModule",{value:!0});Ds.checkIsUndefined=Ds.checkIsDefined=Ds.check=void 0;var Hl=(e,t)=>{if(!e)throw t=t||"Invalid statement",t=t instanceof Error?t:new Error(t),t};Ds.check=Hl;var Zx=(e,t)=>(Hl(typeof e<"u",t||"Expect defined but actually undefined"),e);Ds.checkIsDefined=Zx;var Jx=(e,t)=>{Hl(typeof e>"u",t||`Expect undefined but actually ${e}`)};Ds.checkIsUndefined=Jx});var Eb=K(qi=>{"use strict";E();P();Object.defineProperty(qi,"__esModule",{value:!0});qi.string2BigNumber=qi.bigNumber2String=qi.fromBigIntHex=qi.toBigIntHex=void 0;var Sb=ft(),Qx=kl(),e_=e=>{let t=e.integerValue().toString(16);return t="0x"+t,t};qi.toBigIntHex=e_;var t_=e=>((0,Qx.check)(e&&e.startsWith("0x"),`Invalid hex string. value: ${e}`),new Sb.BigNumber(e).integerValue());qi.fromBigIntHex=t_;var r_=(e,t)=>e.integerValue().toString(t);qi.bigNumber2String=r_;var n_=(e,t)=>new Sb.BigNumber(e,t);qi.string2BigNumber=n_});var mr=K((Pb,Nl)=>{E();P();(function(e,t){"use strict";function r(B,l){if(!B)throw new Error(l||"Assertion failed")}function n(B,l){B.super_=l;var w=function(){};w.prototype=l.prototype,B.prototype=new w,B.prototype.constructor=B}function i(B,l,w){if(i.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((l==="le"||l==="be")&&(w=l,l=10),this._init(B||0,l||10,w||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=Cu().Buffer}catch{}i.isBN=function(l){return l instanceof i?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===i.wordSize&&Array.isArray(l.words)},i.max=function(l,w){return l.cmp(w)>0?l:w},i.min=function(l,w){return l.cmp(w)<0?l:w},i.prototype._init=function(l,w,_){if(typeof l=="number")return this._initNumber(l,w,_);if(typeof l=="object")return this._initArray(l,w,_);w==="hex"&&(w=16),r(w===(w|0)&&w>=2&&w<=36),l=l.toString().replace(/\s+/g,"");var v=0;l[0]==="-"&&(v++,this.negative=1),v<l.length&&(w===16?this._parseHex(l,v,_):(this._parseBase(l,w,v),_==="le"&&this._initArray(this.toArray(),w,_)))},i.prototype._initNumber=function(l,w,_){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(r(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),_==="le"&&this._initArray(this.toArray(),w,_)},i.prototype._initArray=function(l,w,_){if(r(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var S,H,U=0;if(_==="be")for(v=l.length-1,S=0;v>=0;v-=3)H=l[v]|l[v-1]<<8|l[v-2]<<16,this.words[S]|=H<<U&67108863,this.words[S+1]=H>>>26-U&67108863,U+=24,U>=26&&(U-=26,S++);else if(_==="le")for(v=0,S=0;v<l.length;v+=3)H=l[v]|l[v+1]<<8|l[v+2]<<16,this.words[S]|=H<<U&67108863,this.words[S+1]=H>>>26-U&67108863,U+=24,U>=26&&(U-=26,S++);return this.strip()};function o(B,l){var w=B.charCodeAt(l);return w>=65&&w<=70?w-55:w>=97&&w<=102?w-87:w-48&15}function a(B,l,w){var _=o(B,w);return w-1>=l&&(_|=o(B,w-1)<<4),_}i.prototype._parseHex=function(l,w,_){this.length=Math.ceil((l.length-w)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var S=0,H=0,U;if(_==="be")for(v=l.length-1;v>=w;v-=2)U=a(l,w,v)<<S,this.words[H]|=U&67108863,S>=18?(S-=18,H+=1,this.words[H]|=U>>>26):S+=8;else{var O=l.length-w;for(v=O%2===0?w+1:w;v<l.length;v+=2)U=a(l,w,v)<<S,this.words[H]|=U&67108863,S>=18?(S-=18,H+=1,this.words[H]|=U>>>26):S+=8}this.strip()};function c(B,l,w,_){for(var v=0,S=Math.min(B.length,w),H=l;H<S;H++){var U=B.charCodeAt(H)-48;v*=_,U>=49?v+=U-49+10:U>=17?v+=U-17+10:v+=U}return v}i.prototype._parseBase=function(l,w,_){this.words=[0],this.length=1;for(var v=0,S=1;S<=67108863;S*=w)v++;v--,S=S/w|0;for(var H=l.length-_,U=H%v,O=Math.min(H,H-U)+_,p=0,A=_;A<O;A+=v)p=c(l,A,A+v,w),this.imuln(S),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p);if(U!==0){var F=1;for(p=c(l,A,l.length,w),A=0;A<U;A++)F*=w;this.imuln(F),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p)}this.strip()},i.prototype.copy=function(l){l.words=new Array(this.length);for(var w=0;w<this.length;w++)l.words[w]=this.words[w];l.length=this.length,l.negative=this.negative,l.red=this.red},i.prototype.clone=function(){var l=new i(null);return this.copy(l),l},i.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(l,w){l=l||10,w=w|0||1;var _;if(l===16||l==="hex"){_="";for(var v=0,S=0,H=0;H<this.length;H++){var U=this.words[H],O=((U<<v|S)&16777215).toString(16);S=U>>>24-v&16777215,S!==0||H!==this.length-1?_=u[6-O.length]+O+_:_=O+_,v+=2,v>=26&&(v-=26,H--)}for(S!==0&&(_=S.toString(16)+_);_.length%w!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}if(l===(l|0)&&l>=2&&l<=36){var p=f[l],A=d[l];_="";var F=this.clone();for(F.negative=0;!F.isZero();){var W=F.modn(A).toString(l);F=F.idivn(A),F.isZero()?_=W+_:_=u[p-W.length]+W+_}for(this.isZero()&&(_="0"+_);_.length%w!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(l,w){return r(typeof s<"u"),this.toArrayLike(s,l,w)},i.prototype.toArray=function(l,w){return this.toArrayLike(Array,l,w)},i.prototype.toArrayLike=function(l,w,_){var v=this.byteLength(),S=_||Math.max(1,v);r(v<=S,"byte array longer than desired length"),r(S>0,"Requested array length <= 0"),this.strip();var H=w==="le",U=new l(S),O,p,A=this.clone();if(H){for(p=0;!A.isZero();p++)O=A.andln(255),A.iushrn(8),U[p]=O;for(;p<S;p++)U[p]=0}else{for(p=0;p<S-v;p++)U[p]=0;for(p=0;!A.isZero();p++)O=A.andln(255),A.iushrn(8),U[S-p-1]=O}return U},Math.clz32?i.prototype._countBits=function(l){return 32-Math.clz32(l)}:i.prototype._countBits=function(l){var w=l,_=0;return w>=4096&&(_+=13,w>>>=13),w>=64&&(_+=7,w>>>=7),w>=8&&(_+=4,w>>>=4),w>=2&&(_+=2,w>>>=2),_+w},i.prototype._zeroBits=function(l){if(l===0)return 26;var w=l,_=0;return(w&8191)===0&&(_+=13,w>>>=13),(w&127)===0&&(_+=7,w>>>=7),(w&15)===0&&(_+=4,w>>>=4),(w&3)===0&&(_+=2,w>>>=2),(w&1)===0&&_++,_},i.prototype.bitLength=function(){var l=this.words[this.length-1],w=this._countBits(l);return(this.length-1)*26+w};function h(B){for(var l=new Array(B.bitLength()),w=0;w<l.length;w++){var _=w/26|0,v=w%26;l[w]=(B.words[_]&1<<v)>>>v}return l}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,w=0;w<this.length;w++){var _=this._zeroBits(this.words[w]);if(l+=_,_!==26)break}return l},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},i.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var w=0;w<l.length;w++)this.words[w]=this.words[w]|l.words[w];return this.strip()},i.prototype.ior=function(l){return r((this.negative|l.negative)===0),this.iuor(l)},i.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},i.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},i.prototype.iuand=function(l){var w;this.length>l.length?w=l:w=this;for(var _=0;_<w.length;_++)this.words[_]=this.words[_]&l.words[_];return this.length=w.length,this.strip()},i.prototype.iand=function(l){return r((this.negative|l.negative)===0),this.iuand(l)},i.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},i.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},i.prototype.iuxor=function(l){var w,_;this.length>l.length?(w=this,_=l):(w=l,_=this);for(var v=0;v<_.length;v++)this.words[v]=w.words[v]^_.words[v];if(this!==w)for(;v<w.length;v++)this.words[v]=w.words[v];return this.length=w.length,this.strip()},i.prototype.ixor=function(l){return r((this.negative|l.negative)===0),this.iuxor(l)},i.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},i.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},i.prototype.inotn=function(l){r(typeof l=="number"&&l>=0);var w=Math.ceil(l/26)|0,_=l%26;this._expand(w),_>0&&w--;for(var v=0;v<w;v++)this.words[v]=~this.words[v]&67108863;return _>0&&(this.words[v]=~this.words[v]&67108863>>26-_),this.strip()},i.prototype.notn=function(l){return this.clone().inotn(l)},i.prototype.setn=function(l,w){r(typeof l=="number"&&l>=0);var _=l/26|0,v=l%26;return this._expand(_+1),w?this.words[_]=this.words[_]|1<<v:this.words[_]=this.words[_]&~(1<<v),this.strip()},i.prototype.iadd=function(l){var w;if(this.negative!==0&&l.negative===0)return this.negative=0,w=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,w=this.isub(l),l.negative=1,w._normSign();var _,v;this.length>l.length?(_=this,v=l):(_=l,v=this);for(var S=0,H=0;H<v.length;H++)w=(_.words[H]|0)+(v.words[H]|0)+S,this.words[H]=w&67108863,S=w>>>26;for(;S!==0&&H<_.length;H++)w=(_.words[H]|0)+S,this.words[H]=w&67108863,S=w>>>26;if(this.length=_.length,S!==0)this.words[this.length]=S,this.length++;else if(_!==this)for(;H<_.length;H++)this.words[H]=_.words[H];return this},i.prototype.add=function(l){var w;return l.negative!==0&&this.negative===0?(l.negative=0,w=this.sub(l),l.negative^=1,w):l.negative===0&&this.negative!==0?(this.negative=0,w=l.sub(this),this.negative=1,w):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},i.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var w=this.iadd(l);return l.negative=1,w._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var _=this.cmp(l);if(_===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,S;_>0?(v=this,S=l):(v=l,S=this);for(var H=0,U=0;U<S.length;U++)w=(v.words[U]|0)-(S.words[U]|0)+H,H=w>>26,this.words[U]=w&67108863;for(;H!==0&&U<v.length;U++)w=(v.words[U]|0)+H,H=w>>26,this.words[U]=w&67108863;if(H===0&&U<v.length&&v!==this)for(;U<v.length;U++)this.words[U]=v.words[U];return this.length=Math.max(this.length,U),v!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(l){return this.clone().isub(l)};function b(B,l,w){w.negative=l.negative^B.negative;var _=B.length+l.length|0;w.length=_,_=_-1|0;var v=B.words[0]|0,S=l.words[0]|0,H=v*S,U=H&67108863,O=H/67108864|0;w.words[0]=U;for(var p=1;p<_;p++){for(var A=O>>>26,F=O&67108863,W=Math.min(p,l.length-1),Z=Math.max(0,p-B.length+1);Z<=W;Z++){var Q=p-Z|0;v=B.words[Q]|0,S=l.words[Z]|0,H=v*S+F,A+=H/67108864|0,F=H&67108863}w.words[p]=F|0,O=A|0}return O!==0?w.words[p]=O|0:w.length--,w.strip()}var g=function(l,w,_){var v=l.words,S=w.words,H=_.words,U=0,O,p,A,F=v[0]|0,W=F&8191,Z=F>>>13,Q=v[1]|0,te=Q&8191,ee=Q>>>13,it=v[2]|0,Ie=it&8191,Be=it>>>13,Pr=v[3]|0,Ne=Pr&8191,_e=Pr>>>13,tr=v[4]|0,qe=tr&8191,ot=tr>>>13,sn=v[5]|0,lt=sn&8191,ct=sn>>>13,Vr=v[6]|0,fe=Vr&8191,Re=Vr>>>13,I=v[7]|0,N=I&8191,D=I>>>13,z=v[8]|0,$=z&8191,V=z>>>13,J=v[9]|0,X=J&8191,Y=J>>>13,pe=S[0]|0,he=pe&8191,ce=pe>>>13,Qe=S[1]|0,Ue=Qe&8191,He=Qe>>>13,As=S[2]|0,ht=As&8191,Lt=As>>>13,Sc=S[3]|0,jt=Sc&8191,Dt=Sc>>>13,ku=S[4]|0,Nt=ku&8191,Kt=ku>>>13,Nu=S[5]|0,Ct=Nu&8191,Ft=Nu>>>13,Ec=S[6]|0,We=Ec&8191,ut=Ec>>>13,Pc=S[7]|0,Wt=Pc&8191,rr=Pc>>>13,I1=S[8]|0,nr=I1&8191,ir=I1>>>13,O1=S[9]|0,sr=O1&8191,or=O1>>>13;_.negative=l.negative^w.negative,_.length=19,O=Math.imul(W,he),p=Math.imul(W,ce),p=p+Math.imul(Z,he)|0,A=Math.imul(Z,ce);var Fd=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(Fd>>>26)|0,Fd&=67108863,O=Math.imul(te,he),p=Math.imul(te,ce),p=p+Math.imul(ee,he)|0,A=Math.imul(ee,ce),O=O+Math.imul(W,Ue)|0,p=p+Math.imul(W,He)|0,p=p+Math.imul(Z,Ue)|0,A=A+Math.imul(Z,He)|0;var Wd=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(Wd>>>26)|0,Wd&=67108863,O=Math.imul(Ie,he),p=Math.imul(Ie,ce),p=p+Math.imul(Be,he)|0,A=Math.imul(Be,ce),O=O+Math.imul(te,Ue)|0,p=p+Math.imul(te,He)|0,p=p+Math.imul(ee,Ue)|0,A=A+Math.imul(ee,He)|0,O=O+Math.imul(W,ht)|0,p=p+Math.imul(W,Lt)|0,p=p+Math.imul(Z,ht)|0,A=A+Math.imul(Z,Lt)|0;var zd=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(zd>>>26)|0,zd&=67108863,O=Math.imul(Ne,he),p=Math.imul(Ne,ce),p=p+Math.imul(_e,he)|0,A=Math.imul(_e,ce),O=O+Math.imul(Ie,Ue)|0,p=p+Math.imul(Ie,He)|0,p=p+Math.imul(Be,Ue)|0,A=A+Math.imul(Be,He)|0,O=O+Math.imul(te,ht)|0,p=p+Math.imul(te,Lt)|0,p=p+Math.imul(ee,ht)|0,A=A+Math.imul(ee,Lt)|0,O=O+Math.imul(W,jt)|0,p=p+Math.imul(W,Dt)|0,p=p+Math.imul(Z,jt)|0,A=A+Math.imul(Z,Dt)|0;var Vd=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(Vd>>>26)|0,Vd&=67108863,O=Math.imul(qe,he),p=Math.imul(qe,ce),p=p+Math.imul(ot,he)|0,A=Math.imul(ot,ce),O=O+Math.imul(Ne,Ue)|0,p=p+Math.imul(Ne,He)|0,p=p+Math.imul(_e,Ue)|0,A=A+Math.imul(_e,He)|0,O=O+Math.imul(Ie,ht)|0,p=p+Math.imul(Ie,Lt)|0,p=p+Math.imul(Be,ht)|0,A=A+Math.imul(Be,Lt)|0,O=O+Math.imul(te,jt)|0,p=p+Math.imul(te,Dt)|0,p=p+Math.imul(ee,jt)|0,A=A+Math.imul(ee,Dt)|0,O=O+Math.imul(W,Nt)|0,p=p+Math.imul(W,Kt)|0,p=p+Math.imul(Z,Nt)|0,A=A+Math.imul(Z,Kt)|0;var Gd=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(Gd>>>26)|0,Gd&=67108863,O=Math.imul(lt,he),p=Math.imul(lt,ce),p=p+Math.imul(ct,he)|0,A=Math.imul(ct,ce),O=O+Math.imul(qe,Ue)|0,p=p+Math.imul(qe,He)|0,p=p+Math.imul(ot,Ue)|0,A=A+Math.imul(ot,He)|0,O=O+Math.imul(Ne,ht)|0,p=p+Math.imul(Ne,Lt)|0,p=p+Math.imul(_e,ht)|0,A=A+Math.imul(_e,Lt)|0,O=O+Math.imul(Ie,jt)|0,p=p+Math.imul(Ie,Dt)|0,p=p+Math.imul(Be,jt)|0,A=A+Math.imul(Be,Dt)|0,O=O+Math.imul(te,Nt)|0,p=p+Math.imul(te,Kt)|0,p=p+Math.imul(ee,Nt)|0,A=A+Math.imul(ee,Kt)|0,O=O+Math.imul(W,Ct)|0,p=p+Math.imul(W,Ft)|0,p=p+Math.imul(Z,Ct)|0,A=A+Math.imul(Z,Ft)|0;var $d=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+($d>>>26)|0,$d&=67108863,O=Math.imul(fe,he),p=Math.imul(fe,ce),p=p+Math.imul(Re,he)|0,A=Math.imul(Re,ce),O=O+Math.imul(lt,Ue)|0,p=p+Math.imul(lt,He)|0,p=p+Math.imul(ct,Ue)|0,A=A+Math.imul(ct,He)|0,O=O+Math.imul(qe,ht)|0,p=p+Math.imul(qe,Lt)|0,p=p+Math.imul(ot,ht)|0,A=A+Math.imul(ot,Lt)|0,O=O+Math.imul(Ne,jt)|0,p=p+Math.imul(Ne,Dt)|0,p=p+Math.imul(_e,jt)|0,A=A+Math.imul(_e,Dt)|0,O=O+Math.imul(Ie,Nt)|0,p=p+Math.imul(Ie,Kt)|0,p=p+Math.imul(Be,Nt)|0,A=A+Math.imul(Be,Kt)|0,O=O+Math.imul(te,Ct)|0,p=p+Math.imul(te,Ft)|0,p=p+Math.imul(ee,Ct)|0,A=A+Math.imul(ee,Ft)|0,O=O+Math.imul(W,We)|0,p=p+Math.imul(W,ut)|0,p=p+Math.imul(Z,We)|0,A=A+Math.imul(Z,ut)|0;var Xd=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(Xd>>>26)|0,Xd&=67108863,O=Math.imul(N,he),p=Math.imul(N,ce),p=p+Math.imul(D,he)|0,A=Math.imul(D,ce),O=O+Math.imul(fe,Ue)|0,p=p+Math.imul(fe,He)|0,p=p+Math.imul(Re,Ue)|0,A=A+Math.imul(Re,He)|0,O=O+Math.imul(lt,ht)|0,p=p+Math.imul(lt,Lt)|0,p=p+Math.imul(ct,ht)|0,A=A+Math.imul(ct,Lt)|0,O=O+Math.imul(qe,jt)|0,p=p+Math.imul(qe,Dt)|0,p=p+Math.imul(ot,jt)|0,A=A+Math.imul(ot,Dt)|0,O=O+Math.imul(Ne,Nt)|0,p=p+Math.imul(Ne,Kt)|0,p=p+Math.imul(_e,Nt)|0,A=A+Math.imul(_e,Kt)|0,O=O+Math.imul(Ie,Ct)|0,p=p+Math.imul(Ie,Ft)|0,p=p+Math.imul(Be,Ct)|0,A=A+Math.imul(Be,Ft)|0,O=O+Math.imul(te,We)|0,p=p+Math.imul(te,ut)|0,p=p+Math.imul(ee,We)|0,A=A+Math.imul(ee,ut)|0,O=O+Math.imul(W,Wt)|0,p=p+Math.imul(W,rr)|0,p=p+Math.imul(Z,Wt)|0,A=A+Math.imul(Z,rr)|0;var Yd=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(Yd>>>26)|0,Yd&=67108863,O=Math.imul($,he),p=Math.imul($,ce),p=p+Math.imul(V,he)|0,A=Math.imul(V,ce),O=O+Math.imul(N,Ue)|0,p=p+Math.imul(N,He)|0,p=p+Math.imul(D,Ue)|0,A=A+Math.imul(D,He)|0,O=O+Math.imul(fe,ht)|0,p=p+Math.imul(fe,Lt)|0,p=p+Math.imul(Re,ht)|0,A=A+Math.imul(Re,Lt)|0,O=O+Math.imul(lt,jt)|0,p=p+Math.imul(lt,Dt)|0,p=p+Math.imul(ct,jt)|0,A=A+Math.imul(ct,Dt)|0,O=O+Math.imul(qe,Nt)|0,p=p+Math.imul(qe,Kt)|0,p=p+Math.imul(ot,Nt)|0,A=A+Math.imul(ot,Kt)|0,O=O+Math.imul(Ne,Ct)|0,p=p+Math.imul(Ne,Ft)|0,p=p+Math.imul(_e,Ct)|0,A=A+Math.imul(_e,Ft)|0,O=O+Math.imul(Ie,We)|0,p=p+Math.imul(Ie,ut)|0,p=p+Math.imul(Be,We)|0,A=A+Math.imul(Be,ut)|0,O=O+Math.imul(te,Wt)|0,p=p+Math.imul(te,rr)|0,p=p+Math.imul(ee,Wt)|0,A=A+Math.imul(ee,rr)|0,O=O+Math.imul(W,nr)|0,p=p+Math.imul(W,ir)|0,p=p+Math.imul(Z,nr)|0,A=A+Math.imul(Z,ir)|0;var Zd=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(Zd>>>26)|0,Zd&=67108863,O=Math.imul(X,he),p=Math.imul(X,ce),p=p+Math.imul(Y,he)|0,A=Math.imul(Y,ce),O=O+Math.imul($,Ue)|0,p=p+Math.imul($,He)|0,p=p+Math.imul(V,Ue)|0,A=A+Math.imul(V,He)|0,O=O+Math.imul(N,ht)|0,p=p+Math.imul(N,Lt)|0,p=p+Math.imul(D,ht)|0,A=A+Math.imul(D,Lt)|0,O=O+Math.imul(fe,jt)|0,p=p+Math.imul(fe,Dt)|0,p=p+Math.imul(Re,jt)|0,A=A+Math.imul(Re,Dt)|0,O=O+Math.imul(lt,Nt)|0,p=p+Math.imul(lt,Kt)|0,p=p+Math.imul(ct,Nt)|0,A=A+Math.imul(ct,Kt)|0,O=O+Math.imul(qe,Ct)|0,p=p+Math.imul(qe,Ft)|0,p=p+Math.imul(ot,Ct)|0,A=A+Math.imul(ot,Ft)|0,O=O+Math.imul(Ne,We)|0,p=p+Math.imul(Ne,ut)|0,p=p+Math.imul(_e,We)|0,A=A+Math.imul(_e,ut)|0,O=O+Math.imul(Ie,Wt)|0,p=p+Math.imul(Ie,rr)|0,p=p+Math.imul(Be,Wt)|0,A=A+Math.imul(Be,rr)|0,O=O+Math.imul(te,nr)|0,p=p+Math.imul(te,ir)|0,p=p+Math.imul(ee,nr)|0,A=A+Math.imul(ee,ir)|0,O=O+Math.imul(W,sr)|0,p=p+Math.imul(W,or)|0,p=p+Math.imul(Z,sr)|0,A=A+Math.imul(Z,or)|0;var Jd=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(Jd>>>26)|0,Jd&=67108863,O=Math.imul(X,Ue),p=Math.imul(X,He),p=p+Math.imul(Y,Ue)|0,A=Math.imul(Y,He),O=O+Math.imul($,ht)|0,p=p+Math.imul($,Lt)|0,p=p+Math.imul(V,ht)|0,A=A+Math.imul(V,Lt)|0,O=O+Math.imul(N,jt)|0,p=p+Math.imul(N,Dt)|0,p=p+Math.imul(D,jt)|0,A=A+Math.imul(D,Dt)|0,O=O+Math.imul(fe,Nt)|0,p=p+Math.imul(fe,Kt)|0,p=p+Math.imul(Re,Nt)|0,A=A+Math.imul(Re,Kt)|0,O=O+Math.imul(lt,Ct)|0,p=p+Math.imul(lt,Ft)|0,p=p+Math.imul(ct,Ct)|0,A=A+Math.imul(ct,Ft)|0,O=O+Math.imul(qe,We)|0,p=p+Math.imul(qe,ut)|0,p=p+Math.imul(ot,We)|0,A=A+Math.imul(ot,ut)|0,O=O+Math.imul(Ne,Wt)|0,p=p+Math.imul(Ne,rr)|0,p=p+Math.imul(_e,Wt)|0,A=A+Math.imul(_e,rr)|0,O=O+Math.imul(Ie,nr)|0,p=p+Math.imul(Ie,ir)|0,p=p+Math.imul(Be,nr)|0,A=A+Math.imul(Be,ir)|0,O=O+Math.imul(te,sr)|0,p=p+Math.imul(te,or)|0,p=p+Math.imul(ee,sr)|0,A=A+Math.imul(ee,or)|0;var Qd=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(Qd>>>26)|0,Qd&=67108863,O=Math.imul(X,ht),p=Math.imul(X,Lt),p=p+Math.imul(Y,ht)|0,A=Math.imul(Y,Lt),O=O+Math.imul($,jt)|0,p=p+Math.imul($,Dt)|0,p=p+Math.imul(V,jt)|0,A=A+Math.imul(V,Dt)|0,O=O+Math.imul(N,Nt)|0,p=p+Math.imul(N,Kt)|0,p=p+Math.imul(D,Nt)|0,A=A+Math.imul(D,Kt)|0,O=O+Math.imul(fe,Ct)|0,p=p+Math.imul(fe,Ft)|0,p=p+Math.imul(Re,Ct)|0,A=A+Math.imul(Re,Ft)|0,O=O+Math.imul(lt,We)|0,p=p+Math.imul(lt,ut)|0,p=p+Math.imul(ct,We)|0,A=A+Math.imul(ct,ut)|0,O=O+Math.imul(qe,Wt)|0,p=p+Math.imul(qe,rr)|0,p=p+Math.imul(ot,Wt)|0,A=A+Math.imul(ot,rr)|0,O=O+Math.imul(Ne,nr)|0,p=p+Math.imul(Ne,ir)|0,p=p+Math.imul(_e,nr)|0,A=A+Math.imul(_e,ir)|0,O=O+Math.imul(Ie,sr)|0,p=p+Math.imul(Ie,or)|0,p=p+Math.imul(Be,sr)|0,A=A+Math.imul(Be,or)|0;var el=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(el>>>26)|0,el&=67108863,O=Math.imul(X,jt),p=Math.imul(X,Dt),p=p+Math.imul(Y,jt)|0,A=Math.imul(Y,Dt),O=O+Math.imul($,Nt)|0,p=p+Math.imul($,Kt)|0,p=p+Math.imul(V,Nt)|0,A=A+Math.imul(V,Kt)|0,O=O+Math.imul(N,Ct)|0,p=p+Math.imul(N,Ft)|0,p=p+Math.imul(D,Ct)|0,A=A+Math.imul(D,Ft)|0,O=O+Math.imul(fe,We)|0,p=p+Math.imul(fe,ut)|0,p=p+Math.imul(Re,We)|0,A=A+Math.imul(Re,ut)|0,O=O+Math.imul(lt,Wt)|0,p=p+Math.imul(lt,rr)|0,p=p+Math.imul(ct,Wt)|0,A=A+Math.imul(ct,rr)|0,O=O+Math.imul(qe,nr)|0,p=p+Math.imul(qe,ir)|0,p=p+Math.imul(ot,nr)|0,A=A+Math.imul(ot,ir)|0,O=O+Math.imul(Ne,sr)|0,p=p+Math.imul(Ne,or)|0,p=p+Math.imul(_e,sr)|0,A=A+Math.imul(_e,or)|0;var tl=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(tl>>>26)|0,tl&=67108863,O=Math.imul(X,Nt),p=Math.imul(X,Kt),p=p+Math.imul(Y,Nt)|0,A=Math.imul(Y,Kt),O=O+Math.imul($,Ct)|0,p=p+Math.imul($,Ft)|0,p=p+Math.imul(V,Ct)|0,A=A+Math.imul(V,Ft)|0,O=O+Math.imul(N,We)|0,p=p+Math.imul(N,ut)|0,p=p+Math.imul(D,We)|0,A=A+Math.imul(D,ut)|0,O=O+Math.imul(fe,Wt)|0,p=p+Math.imul(fe,rr)|0,p=p+Math.imul(Re,Wt)|0,A=A+Math.imul(Re,rr)|0,O=O+Math.imul(lt,nr)|0,p=p+Math.imul(lt,ir)|0,p=p+Math.imul(ct,nr)|0,A=A+Math.imul(ct,ir)|0,O=O+Math.imul(qe,sr)|0,p=p+Math.imul(qe,or)|0,p=p+Math.imul(ot,sr)|0,A=A+Math.imul(ot,or)|0;var rl=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(rl>>>26)|0,rl&=67108863,O=Math.imul(X,Ct),p=Math.imul(X,Ft),p=p+Math.imul(Y,Ct)|0,A=Math.imul(Y,Ft),O=O+Math.imul($,We)|0,p=p+Math.imul($,ut)|0,p=p+Math.imul(V,We)|0,A=A+Math.imul(V,ut)|0,O=O+Math.imul(N,Wt)|0,p=p+Math.imul(N,rr)|0,p=p+Math.imul(D,Wt)|0,A=A+Math.imul(D,rr)|0,O=O+Math.imul(fe,nr)|0,p=p+Math.imul(fe,ir)|0,p=p+Math.imul(Re,nr)|0,A=A+Math.imul(Re,ir)|0,O=O+Math.imul(lt,sr)|0,p=p+Math.imul(lt,or)|0,p=p+Math.imul(ct,sr)|0,A=A+Math.imul(ct,or)|0;var nl=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(nl>>>26)|0,nl&=67108863,O=Math.imul(X,We),p=Math.imul(X,ut),p=p+Math.imul(Y,We)|0,A=Math.imul(Y,ut),O=O+Math.imul($,Wt)|0,p=p+Math.imul($,rr)|0,p=p+Math.imul(V,Wt)|0,A=A+Math.imul(V,rr)|0,O=O+Math.imul(N,nr)|0,p=p+Math.imul(N,ir)|0,p=p+Math.imul(D,nr)|0,A=A+Math.imul(D,ir)|0,O=O+Math.imul(fe,sr)|0,p=p+Math.imul(fe,or)|0,p=p+Math.imul(Re,sr)|0,A=A+Math.imul(Re,or)|0;var il=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(il>>>26)|0,il&=67108863,O=Math.imul(X,Wt),p=Math.imul(X,rr),p=p+Math.imul(Y,Wt)|0,A=Math.imul(Y,rr),O=O+Math.imul($,nr)|0,p=p+Math.imul($,ir)|0,p=p+Math.imul(V,nr)|0,A=A+Math.imul(V,ir)|0,O=O+Math.imul(N,sr)|0,p=p+Math.imul(N,or)|0,p=p+Math.imul(D,sr)|0,A=A+Math.imul(D,or)|0;var sl=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(sl>>>26)|0,sl&=67108863,O=Math.imul(X,nr),p=Math.imul(X,ir),p=p+Math.imul(Y,nr)|0,A=Math.imul(Y,ir),O=O+Math.imul($,sr)|0,p=p+Math.imul($,or)|0,p=p+Math.imul(V,sr)|0,A=A+Math.imul(V,or)|0;var ol=(U+O|0)+((p&8191)<<13)|0;U=(A+(p>>>13)|0)+(ol>>>26)|0,ol&=67108863,O=Math.imul(X,sr),p=Math.imul(X,or),p=p+Math.imul(Y,sr)|0,A=Math.imul(Y,or);var al=(U+O|0)+((p&8191)<<13)|0;return U=(A+(p>>>13)|0)+(al>>>26)|0,al&=67108863,H[0]=Fd,H[1]=Wd,H[2]=zd,H[3]=Vd,H[4]=Gd,H[5]=$d,H[6]=Xd,H[7]=Yd,H[8]=Zd,H[9]=Jd,H[10]=Qd,H[11]=el,H[12]=tl,H[13]=rl,H[14]=nl,H[15]=il,H[16]=sl,H[17]=ol,H[18]=al,U!==0&&(H[19]=U,_.length++),_};Math.imul||(g=b);function y(B,l,w){w.negative=l.negative^B.negative,w.length=B.length+l.length;for(var _=0,v=0,S=0;S<w.length-1;S++){var H=v;v=0;for(var U=_&67108863,O=Math.min(S,l.length-1),p=Math.max(0,S-B.length+1);p<=O;p++){var A=S-p,F=B.words[A]|0,W=l.words[p]|0,Z=F*W,Q=Z&67108863;H=H+(Z/67108864|0)|0,Q=Q+U|0,U=Q&67108863,H=H+(Q>>>26)|0,v+=H>>>26,H&=67108863}w.words[S]=U,_=H,H=v}return _!==0?w.words[S]=_:w.length--,w.strip()}function x(B,l,w){var _=new T;return _.mulp(B,l,w)}i.prototype.mulTo=function(l,w){var _,v=this.length+l.length;return this.length===10&&l.length===10?_=g(this,l,w):v<63?_=b(this,l,w):v<1024?_=y(this,l,w):_=x(this,l,w),_};function T(B,l){this.x=B,this.y=l}T.prototype.makeRBT=function(l){for(var w=new Array(l),_=i.prototype._countBits(l)-1,v=0;v<l;v++)w[v]=this.revBin(v,_,l);return w},T.prototype.revBin=function(l,w,_){if(l===0||l===_-1)return l;for(var v=0,S=0;S<w;S++)v|=(l&1)<<w-S-1,l>>=1;return v},T.prototype.permute=function(l,w,_,v,S,H){for(var U=0;U<H;U++)v[U]=w[l[U]],S[U]=_[l[U]]},T.prototype.transform=function(l,w,_,v,S,H){this.permute(H,l,w,_,v,S);for(var U=1;U<S;U<<=1)for(var O=U<<1,p=Math.cos(2*Math.PI/O),A=Math.sin(2*Math.PI/O),F=0;F<S;F+=O)for(var W=p,Z=A,Q=0;Q<U;Q++){var te=_[F+Q],ee=v[F+Q],it=_[F+Q+U],Ie=v[F+Q+U],Be=W*it-Z*Ie;Ie=W*Ie+Z*it,it=Be,_[F+Q]=te+it,v[F+Q]=ee+Ie,_[F+Q+U]=te-it,v[F+Q+U]=ee-Ie,Q!==O&&(Be=p*W-A*Z,Z=p*Z+A*W,W=Be)}},T.prototype.guessLen13b=function(l,w){var _=Math.max(w,l)|1,v=_&1,S=0;for(_=_/2|0;_;_=_>>>1)S++;return 1<<S+1+v},T.prototype.conjugate=function(l,w,_){if(!(_<=1))for(var v=0;v<_/2;v++){var S=l[v];l[v]=l[_-v-1],l[_-v-1]=S,S=w[v],w[v]=-w[_-v-1],w[_-v-1]=-S}},T.prototype.normalize13b=function(l,w){for(var _=0,v=0;v<w/2;v++){var S=Math.round(l[2*v+1]/w)*8192+Math.round(l[2*v]/w)+_;l[v]=S&67108863,S<67108864?_=0:_=S/67108864|0}return l},T.prototype.convert13b=function(l,w,_,v){for(var S=0,H=0;H<w;H++)S=S+(l[H]|0),_[2*H]=S&8191,S=S>>>13,_[2*H+1]=S&8191,S=S>>>13;for(H=2*w;H<v;++H)_[H]=0;r(S===0),r((S&-8192)===0)},T.prototype.stub=function(l){for(var w=new Array(l),_=0;_<l;_++)w[_]=0;return w},T.prototype.mulp=function(l,w,_){var v=2*this.guessLen13b(l.length,w.length),S=this.makeRBT(v),H=this.stub(v),U=new Array(v),O=new Array(v),p=new Array(v),A=new Array(v),F=new Array(v),W=new Array(v),Z=_.words;Z.length=v,this.convert13b(l.words,l.length,U,v),this.convert13b(w.words,w.length,A,v),this.transform(U,H,O,p,v,S),this.transform(A,H,F,W,v,S);for(var Q=0;Q<v;Q++){var te=O[Q]*F[Q]-p[Q]*W[Q];p[Q]=O[Q]*W[Q]+p[Q]*F[Q],O[Q]=te}return this.conjugate(O,p,v),this.transform(O,p,Z,H,v,S),this.conjugate(Z,H,v),this.normalize13b(Z,v),_.negative=l.negative^w.negative,_.length=l.length+w.length,_.strip()},i.prototype.mul=function(l){var w=new i(null);return w.words=new Array(this.length+l.length),this.mulTo(l,w)},i.prototype.mulf=function(l){var w=new i(null);return w.words=new Array(this.length+l.length),x(this,l,w)},i.prototype.imul=function(l){return this.clone().mulTo(l,this)},i.prototype.imuln=function(l){r(typeof l=="number"),r(l<67108864);for(var w=0,_=0;_<this.length;_++){var v=(this.words[_]|0)*l,S=(v&67108863)+(w&67108863);w>>=26,w+=v/67108864|0,w+=S>>>26,this.words[_]=S&67108863}return w!==0&&(this.words[_]=w,this.length++),this},i.prototype.muln=function(l){return this.clone().imuln(l)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(l){var w=h(l);if(w.length===0)return new i(1);for(var _=this,v=0;v<w.length&&w[v]===0;v++,_=_.sqr());if(++v<w.length)for(var S=_.sqr();v<w.length;v++,S=S.sqr())w[v]!==0&&(_=_.mul(S));return _},i.prototype.iushln=function(l){r(typeof l=="number"&&l>=0);var w=l%26,_=(l-w)/26,v=67108863>>>26-w<<26-w,S;if(w!==0){var H=0;for(S=0;S<this.length;S++){var U=this.words[S]&v,O=(this.words[S]|0)-U<<w;this.words[S]=O|H,H=U>>>26-w}H&&(this.words[S]=H,this.length++)}if(_!==0){for(S=this.length-1;S>=0;S--)this.words[S+_]=this.words[S];for(S=0;S<_;S++)this.words[S]=0;this.length+=_}return this.strip()},i.prototype.ishln=function(l){return r(this.negative===0),this.iushln(l)},i.prototype.iushrn=function(l,w,_){r(typeof l=="number"&&l>=0);var v;w?v=(w-w%26)/26:v=0;var S=l%26,H=Math.min((l-S)/26,this.length),U=67108863^67108863>>>S<<S,O=_;if(v-=H,v=Math.max(0,v),O){for(var p=0;p<H;p++)O.words[p]=this.words[p];O.length=H}if(H!==0)if(this.length>H)for(this.length-=H,p=0;p<this.length;p++)this.words[p]=this.words[p+H];else this.words[0]=0,this.length=1;var A=0;for(p=this.length-1;p>=0&&(A!==0||p>=v);p--){var F=this.words[p]|0;this.words[p]=A<<26-S|F>>>S,A=F&U}return O&&A!==0&&(O.words[O.length++]=A),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(l,w,_){return r(this.negative===0),this.iushrn(l,w,_)},i.prototype.shln=function(l){return this.clone().ishln(l)},i.prototype.ushln=function(l){return this.clone().iushln(l)},i.prototype.shrn=function(l){return this.clone().ishrn(l)},i.prototype.ushrn=function(l){return this.clone().iushrn(l)},i.prototype.testn=function(l){r(typeof l=="number"&&l>=0);var w=l%26,_=(l-w)/26,v=1<<w;if(this.length<=_)return!1;var S=this.words[_];return!!(S&v)},i.prototype.imaskn=function(l){r(typeof l=="number"&&l>=0);var w=l%26,_=(l-w)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=_)return this;if(w!==0&&_++,this.length=Math.min(_,this.length),w!==0){var v=67108863^67108863>>>w<<w;this.words[this.length-1]&=v}return this.strip()},i.prototype.maskn=function(l){return this.clone().imaskn(l)},i.prototype.iaddn=function(l){return r(typeof l=="number"),r(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},i.prototype._iaddn=function(l){this.words[0]+=l;for(var w=0;w<this.length&&this.words[w]>=67108864;w++)this.words[w]-=67108864,w===this.length-1?this.words[w+1]=1:this.words[w+1]++;return this.length=Math.max(this.length,w+1),this},i.prototype.isubn=function(l){if(r(typeof l=="number"),r(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var w=0;w<this.length&&this.words[w]<0;w++)this.words[w]+=67108864,this.words[w+1]-=1;return this.strip()},i.prototype.addn=function(l){return this.clone().iaddn(l)},i.prototype.subn=function(l){return this.clone().isubn(l)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(l,w,_){var v=l.length+_,S;this._expand(v);var H,U=0;for(S=0;S<l.length;S++){H=(this.words[S+_]|0)+U;var O=(l.words[S]|0)*w;H-=O&67108863,U=(H>>26)-(O/67108864|0),this.words[S+_]=H&67108863}for(;S<this.length-_;S++)H=(this.words[S+_]|0)+U,U=H>>26,this.words[S+_]=H&67108863;if(U===0)return this.strip();for(r(U===-1),U=0,S=0;S<this.length;S++)H=-(this.words[S]|0)+U,U=H>>26,this.words[S]=H&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(l,w){var _=this.length-l.length,v=this.clone(),S=l,H=S.words[S.length-1]|0,U=this._countBits(H);_=26-U,_!==0&&(S=S.ushln(_),v.iushln(_),H=S.words[S.length-1]|0);var O=v.length-S.length,p;if(w!=="mod"){p=new i(null),p.length=O+1,p.words=new Array(p.length);for(var A=0;A<p.length;A++)p.words[A]=0}var F=v.clone()._ishlnsubmul(S,1,O);F.negative===0&&(v=F,p&&(p.words[O]=1));for(var W=O-1;W>=0;W--){var Z=(v.words[S.length+W]|0)*67108864+(v.words[S.length+W-1]|0);for(Z=Math.min(Z/H|0,67108863),v._ishlnsubmul(S,Z,W);v.negative!==0;)Z--,v.negative=0,v._ishlnsubmul(S,1,W),v.isZero()||(v.negative^=1);p&&(p.words[W]=Z)}return p&&p.strip(),v.strip(),w!=="div"&&_!==0&&v.iushrn(_),{div:p||null,mod:v}},i.prototype.divmod=function(l,w,_){if(r(!l.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,S,H;return this.negative!==0&&l.negative===0?(H=this.neg().divmod(l,w),w!=="mod"&&(v=H.div.neg()),w!=="div"&&(S=H.mod.neg(),_&&S.negative!==0&&S.iadd(l)),{div:v,mod:S}):this.negative===0&&l.negative!==0?(H=this.divmod(l.neg(),w),w!=="mod"&&(v=H.div.neg()),{div:v,mod:H.mod}):(this.negative&l.negative)!==0?(H=this.neg().divmod(l.neg(),w),w!=="div"&&(S=H.mod.neg(),_&&S.negative!==0&&S.isub(l)),{div:H.div,mod:S}):l.length>this.length||this.cmp(l)<0?{div:new i(0),mod:this}:l.length===1?w==="div"?{div:this.divn(l.words[0]),mod:null}:w==="mod"?{div:null,mod:new i(this.modn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new i(this.modn(l.words[0]))}:this._wordDiv(l,w)},i.prototype.div=function(l){return this.divmod(l,"div",!1).div},i.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},i.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},i.prototype.divRound=function(l){var w=this.divmod(l);if(w.mod.isZero())return w.div;var _=w.div.negative!==0?w.mod.isub(l):w.mod,v=l.ushrn(1),S=l.andln(1),H=_.cmp(v);return H<0||S===1&&H===0?w.div:w.div.negative!==0?w.div.isubn(1):w.div.iaddn(1)},i.prototype.modn=function(l){r(l<=67108863);for(var w=(1<<26)%l,_=0,v=this.length-1;v>=0;v--)_=(w*_+(this.words[v]|0))%l;return _},i.prototype.idivn=function(l){r(l<=67108863);for(var w=0,_=this.length-1;_>=0;_--){var v=(this.words[_]|0)+w*67108864;this.words[_]=v/l|0,w=v%l}return this.strip()},i.prototype.divn=function(l){return this.clone().idivn(l)},i.prototype.egcd=function(l){r(l.negative===0),r(!l.isZero());var w=this,_=l.clone();w.negative!==0?w=w.umod(l):w=w.clone();for(var v=new i(1),S=new i(0),H=new i(0),U=new i(1),O=0;w.isEven()&&_.isEven();)w.iushrn(1),_.iushrn(1),++O;for(var p=_.clone(),A=w.clone();!w.isZero();){for(var F=0,W=1;(w.words[0]&W)===0&&F<26;++F,W<<=1);if(F>0)for(w.iushrn(F);F-- >0;)(v.isOdd()||S.isOdd())&&(v.iadd(p),S.isub(A)),v.iushrn(1),S.iushrn(1);for(var Z=0,Q=1;(_.words[0]&Q)===0&&Z<26;++Z,Q<<=1);if(Z>0)for(_.iushrn(Z);Z-- >0;)(H.isOdd()||U.isOdd())&&(H.iadd(p),U.isub(A)),H.iushrn(1),U.iushrn(1);w.cmp(_)>=0?(w.isub(_),v.isub(H),S.isub(U)):(_.isub(w),H.isub(v),U.isub(S))}return{a:H,b:U,gcd:_.iushln(O)}},i.prototype._invmp=function(l){r(l.negative===0),r(!l.isZero());var w=this,_=l.clone();w.negative!==0?w=w.umod(l):w=w.clone();for(var v=new i(1),S=new i(0),H=_.clone();w.cmpn(1)>0&&_.cmpn(1)>0;){for(var U=0,O=1;(w.words[0]&O)===0&&U<26;++U,O<<=1);if(U>0)for(w.iushrn(U);U-- >0;)v.isOdd()&&v.iadd(H),v.iushrn(1);for(var p=0,A=1;(_.words[0]&A)===0&&p<26;++p,A<<=1);if(p>0)for(_.iushrn(p);p-- >0;)S.isOdd()&&S.iadd(H),S.iushrn(1);w.cmp(_)>=0?(w.isub(_),v.isub(S)):(_.isub(w),S.isub(v))}var F;return w.cmpn(1)===0?F=v:F=S,F.cmpn(0)<0&&F.iadd(l),F},i.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var w=this.clone(),_=l.clone();w.negative=0,_.negative=0;for(var v=0;w.isEven()&&_.isEven();v++)w.iushrn(1),_.iushrn(1);do{for(;w.isEven();)w.iushrn(1);for(;_.isEven();)_.iushrn(1);var S=w.cmp(_);if(S<0){var H=w;w=_,_=H}else if(S===0||_.cmpn(1)===0)break;w.isub(_)}while(!0);return _.iushln(v)},i.prototype.invm=function(l){return this.egcd(l).a.umod(l)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(l){return this.words[0]&l},i.prototype.bincn=function(l){r(typeof l=="number");var w=l%26,_=(l-w)/26,v=1<<w;if(this.length<=_)return this._expand(_+1),this.words[_]|=v,this;for(var S=v,H=_;S!==0&&H<this.length;H++){var U=this.words[H]|0;U+=S,S=U>>>26,U&=67108863,this.words[H]=U}return S!==0&&(this.words[H]=S,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(l){var w=l<0;if(this.negative!==0&&!w)return-1;if(this.negative===0&&w)return 1;this.strip();var _;if(this.length>1)_=1;else{w&&(l=-l),r(l<=67108863,"Number is too big");var v=this.words[0]|0;_=v===l?0:v<l?-1:1}return this.negative!==0?-_|0:_},i.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var w=this.ucmp(l);return this.negative!==0?-w|0:w},i.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var w=0,_=this.length-1;_>=0;_--){var v=this.words[_]|0,S=l.words[_]|0;if(v!==S){v<S?w=-1:v>S&&(w=1);break}}return w},i.prototype.gtn=function(l){return this.cmpn(l)===1},i.prototype.gt=function(l){return this.cmp(l)===1},i.prototype.gten=function(l){return this.cmpn(l)>=0},i.prototype.gte=function(l){return this.cmp(l)>=0},i.prototype.ltn=function(l){return this.cmpn(l)===-1},i.prototype.lt=function(l){return this.cmp(l)===-1},i.prototype.lten=function(l){return this.cmpn(l)<=0},i.prototype.lte=function(l){return this.cmp(l)<=0},i.prototype.eqn=function(l){return this.cmpn(l)===0},i.prototype.eq=function(l){return this.cmp(l)===0},i.red=function(l){return new j(l)},i.prototype.toRed=function(l){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(l){return this.red=l,this},i.prototype.forceRed=function(l){return r(!this.red,"Already a number in reduction context"),this._forceRed(l)},i.prototype.redAdd=function(l){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},i.prototype.redIAdd=function(l){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},i.prototype.redSub=function(l){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},i.prototype.redISub=function(l){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},i.prototype.redShl=function(l){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},i.prototype.redMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},i.prototype.redIMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(l){return r(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var M={k256:null,p224:null,p192:null,p25519:null};function k(B,l){this.name=B,this.p=new i(l,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}k.prototype._tmp=function(){var l=new i(null);return l.words=new Array(Math.ceil(this.n/13)),l},k.prototype.ireduce=function(l){var w=l,_;do this.split(w,this.tmp),w=this.imulK(w),w=w.iadd(this.tmp),_=w.bitLength();while(_>this.n);var v=_<this.n?-1:w.ucmp(this.p);return v===0?(w.words[0]=0,w.length=1):v>0?w.isub(this.p):w.strip!==void 0?w.strip():w._strip(),w},k.prototype.split=function(l,w){l.iushrn(this.n,0,w)},k.prototype.imulK=function(l){return l.imul(this.k)};function R(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(R,k),R.prototype.split=function(l,w){for(var _=4194303,v=Math.min(l.length,9),S=0;S<v;S++)w.words[S]=l.words[S];if(w.length=v,l.length<=9){l.words[0]=0,l.length=1;return}var H=l.words[9];for(w.words[w.length++]=H&_,S=10;S<l.length;S++){var U=l.words[S]|0;l.words[S-10]=(U&_)<<4|H>>>22,H=U}H>>>=22,l.words[S-10]=H,H===0&&l.length>10?l.length-=10:l.length-=9},R.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var w=0,_=0;_<l.length;_++){var v=l.words[_]|0;w+=v*977,l.words[_]=w&67108863,w=v*64+(w/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function C(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(C,k);function q(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(q,k);function L(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(L,k),L.prototype.imulK=function(l){for(var w=0,_=0;_<l.length;_++){var v=(l.words[_]|0)*19+w,S=v&67108863;v>>>=26,l.words[_]=S,w=v}return w!==0&&(l.words[l.length++]=w),l},i._prime=function(l){if(M[l])return M[l];var w;if(l==="k256")w=new R;else if(l==="p224")w=new C;else if(l==="p192")w=new q;else if(l==="p25519")w=new L;else throw new Error("Unknown prime "+l);return M[l]=w,w};function j(B){if(typeof B=="string"){var l=i._prime(B);this.m=l.p,this.prime=l}else r(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}j.prototype._verify1=function(l){r(l.negative===0,"red works only with positives"),r(l.red,"red works only with red numbers")},j.prototype._verify2=function(l,w){r((l.negative|w.negative)===0,"red works only with positives"),r(l.red&&l.red===w.red,"red works only with red numbers")},j.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):l.umod(this.m)._forceRed(this)},j.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},j.prototype.add=function(l,w){this._verify2(l,w);var _=l.add(w);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},j.prototype.iadd=function(l,w){this._verify2(l,w);var _=l.iadd(w);return _.cmp(this.m)>=0&&_.isub(this.m),_},j.prototype.sub=function(l,w){this._verify2(l,w);var _=l.sub(w);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},j.prototype.isub=function(l,w){this._verify2(l,w);var _=l.isub(w);return _.cmpn(0)<0&&_.iadd(this.m),_},j.prototype.shl=function(l,w){return this._verify1(l),this.imod(l.ushln(w))},j.prototype.imul=function(l,w){return this._verify2(l,w),this.imod(l.imul(w))},j.prototype.mul=function(l,w){return this._verify2(l,w),this.imod(l.mul(w))},j.prototype.isqr=function(l){return this.imul(l,l.clone())},j.prototype.sqr=function(l){return this.mul(l,l)},j.prototype.sqrt=function(l){if(l.isZero())return l.clone();var w=this.m.andln(3);if(r(w%2===1),w===3){var _=this.m.add(new i(1)).iushrn(2);return this.pow(l,_)}for(var v=this.m.subn(1),S=0;!v.isZero()&&v.andln(1)===0;)S++,v.iushrn(1);r(!v.isZero());var H=new i(1).toRed(this),U=H.redNeg(),O=this.m.subn(1).iushrn(1),p=this.m.bitLength();for(p=new i(2*p*p).toRed(this);this.pow(p,O).cmp(U)!==0;)p.redIAdd(U);for(var A=this.pow(p,v),F=this.pow(l,v.addn(1).iushrn(1)),W=this.pow(l,v),Z=S;W.cmp(H)!==0;){for(var Q=W,te=0;Q.cmp(H)!==0;te++)Q=Q.redSqr();r(te<Z);var ee=this.pow(A,new i(1).iushln(Z-te-1));F=F.redMul(ee),A=ee.redSqr(),W=W.redMul(A),Z=te}return F},j.prototype.invm=function(l){var w=l._invmp(this.m);return w.negative!==0?(w.negative=0,this.imod(w).redNeg()):this.imod(w)},j.prototype.pow=function(l,w){if(w.isZero())return new i(1).toRed(this);if(w.cmpn(1)===0)return l.clone();var _=4,v=new Array(1<<_);v[0]=new i(1).toRed(this),v[1]=l;for(var S=2;S<v.length;S++)v[S]=this.mul(v[S-1],l);var H=v[0],U=0,O=0,p=w.bitLength()%26;for(p===0&&(p=26),S=w.length-1;S>=0;S--){for(var A=w.words[S],F=p-1;F>=0;F--){var W=A>>F&1;if(H!==v[0]&&(H=this.sqr(H)),W===0&&U===0){O=0;continue}U<<=1,U|=W,O++,!(O!==_&&(S!==0||F!==0))&&(H=this.mul(H,v[U]),O=0,U=0)}p=26}return H},j.prototype.convertTo=function(l){var w=l.umod(this.m);return w===l?w.clone():w},j.prototype.convertFrom=function(l){var w=l.clone();return w.red=null,w},i.mont=function(l){return new G(l)};function G(B){j.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(G,j),G.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},G.prototype.convertFrom=function(l){var w=this.imod(l.mul(this.rinv));return w.red=null,w},G.prototype.imul=function(l,w){if(l.isZero()||w.isZero())return l.words[0]=0,l.length=1,l;var _=l.imul(w),v=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=_.isub(v).iushrn(this.shift),H=S;return S.cmp(this.m)>=0?H=S.isub(this.m):S.cmpn(0)<0&&(H=S.iadd(this.m)),H._forceRed(this)},G.prototype.mul=function(l,w){if(l.isZero()||w.isZero())return new i(0)._forceRed(this);var _=l.mul(w),v=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=_.isub(v).iushrn(this.shift),H=S;return S.cmp(this.m)>=0?H=S.isub(this.m):S.cmpn(0)<0&&(H=S.iadd(this.m)),H._forceRed(this)},G.prototype.invm=function(l){var w=this.imod(l._invmp(this.m).mul(this.r2));return w._forceRed(this)}})(typeof Nl>"u"||Nl,Pb)});var Ob=K(bn=>{"use strict";E();P();var i_=bn&&bn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bn,"__esModule",{value:!0});bn.stripHexPrefix=bn.isHexPrefixed=bn.getLength=bn.decode=bn.encode=void 0;var s_=i_(mr());function Ab(e){if(Array.isArray(e)){let t=[];for(let n=0;n<e.length;n++)t.push(Ab(e[n]));let r=m.Buffer.concat(t);return m.Buffer.concat([Tb(r.length,192),r])}else{let t=Ll(e);return t.length===1&&t[0]<128?t:m.Buffer.concat([Tb(t.length,128),t])}}bn.encode=Ab;function Cl(e,t){if(e[0]==="0"&&e[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function Tb(e,t){if(e<56)return m.Buffer.from([e+t]);{let r=Rl(e),n=r.length/2,i=Rl(t+55+n);return m.Buffer.from(i+r,"hex")}}function o_(e,t=!1){if(!e||e.length===0)return m.Buffer.from([]);let r=Ll(e),n=ql(r);if(t)return n;if(n.remainder.length!==0)throw new Error("invalid remainder");return n.data}bn.decode=o_;function a_(e){if(!e||e.length===0)return m.Buffer.from([]);let t=Ll(e),r=t[0];if(r<=127)return t.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;{let n=r-246,i=Cl(t.slice(1,n).toString("hex"),16);return n+i}}bn.getLength=a_;function ql(e){let t,r,n,i,s,o=[],a=e[0];if(a<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(a<=183){if(t=a-127,a===128?n=m.Buffer.from([]):n=e.slice(1,t),t===2&&n[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:n,remainder:e.slice(t)}}else if(a<=191){if(r=a-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=Cl(e.slice(1,r).toString("hex"),16),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(n=e.slice(r,t+r),n.length<t)throw new Error("invalid RLP: not enough bytes for string");return{data:n,remainder:e.slice(t+r)}}else if(a<=247){for(t=a-191,i=e.slice(1,t);i.length;)s=ql(i),o.push(s.data),i=s.remainder;return{data:o,remainder:e.slice(t)}}else{r=a-246,t=Cl(e.slice(1,r).toString("hex"),16);let c=r+t;if(c>e.length)throw new Error("invalid rlp: total length is larger than the data");if(i=e.slice(r,c),i.length===0)throw new Error("invalid rlp, List has a invalid length");for(;i.length;)s=ql(i),o.push(s.data),i=s.remainder;return{data:o,remainder:e.slice(c)}}}function Ul(e){return e.slice(0,2)==="0x"}bn.isHexPrefixed=Ul;function Ib(e){return Ul(e)?e.slice(2):e}bn.stripHexPrefix=Ib;function Rl(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");let t=e.toString(16);return t.length%2?`0${t}`:t}function c_(e){return e.length%2?`0${e}`:e}function u_(e){let t=Rl(e);return m.Buffer.from(t,"hex")}function Ll(e){if(!m.Buffer.isBuffer(e)){if(typeof e=="string")return Ul(e)?m.Buffer.from(c_(Ib(e)),"hex"):m.Buffer.from(e);if(typeof e=="number"||typeof e=="bigint")return e?u_(e):m.Buffer.from([]);if(e==null)return m.Buffer.from([]);if(e instanceof Uint8Array)return m.Buffer.from(e);if(s_.default.isBN(e))return m.Buffer.from(e.toArray());throw new Error("invalid type")}return e}});var Bb=K(Qu=>{"use strict";E();P();Object.defineProperty(Qu,"__esModule",{value:!0});Qu.isHexString=void 0;function f_(e,t){return e.match(/^0x[0-9A-Fa-f]*$/)?!(t&&e.length!==2+2*t):!1}Qu.isHexString=f_});var Mb=K(ef=>{"use strict";E();P();Object.defineProperty(ef,"__esModule",{value:!0});ef.encode=void 0;function d_(e){var t="0123456789abcdef";function r(C){var q,L="";for(q=0;q<=3;q++)L+=t.charAt(C>>q*8+4&15)+t.charAt(C>>q*8&15);return L}function n(C,q){var L=(C&65535)+(q&65535),j=(C>>16)+(q>>16)+(L>>16);return j<<16|L&65535}function i(C,q){return C<<q|C>>>32-q}function s(C,q,L,j,G,B){return n(i(n(n(q,C),n(j,B)),G),L)}function o(C,q,L,j,G,B,l){return s(q&L|~q&j,C,q,G,B,l)}function a(C,q,L,j,G,B,l){return s(q&j|L&~j,C,q,G,B,l)}function c(C,q,L,j,G,B,l){return s(q^L^j,C,q,G,B,l)}function u(C,q,L,j,G,B,l){return s(L^(q|~j),C,q,G,B,l)}function f(C){var q,L=(C.length+8>>6)+1,j=new Array(L*16);for(q=0;q<L*16;q++)j[q]=0;for(q=0;q<C.length;q++)j[q>>2]|=C.charCodeAt(q)<<q%4*8;return j[q>>2]|=128<<q%4*8,j[L*16-2]=C.length*8,j}var d,h=f(""+e),b=1732584193,g=-271733879,y=-1732584194,x=271733878,T,M,k,R;for(d=0;d<h.length;d+=16)T=b,M=g,k=y,R=x,b=o(b,g,y,x,h[d+0],7,-680876936),x=o(x,b,g,y,h[d+1],12,-389564586),y=o(y,x,b,g,h[d+2],17,606105819),g=o(g,y,x,b,h[d+3],22,-1044525330),b=o(b,g,y,x,h[d+4],7,-176418897),x=o(x,b,g,y,h[d+5],12,1200080426),y=o(y,x,b,g,h[d+6],17,-1473231341),g=o(g,y,x,b,h[d+7],22,-45705983),b=o(b,g,y,x,h[d+8],7,1770035416),x=o(x,b,g,y,h[d+9],12,-1958414417),y=o(y,x,b,g,h[d+10],17,-42063),g=o(g,y,x,b,h[d+11],22,-1990404162),b=o(b,g,y,x,h[d+12],7,1804603682),x=o(x,b,g,y,h[d+13],12,-40341101),y=o(y,x,b,g,h[d+14],17,-1502002290),g=o(g,y,x,b,h[d+15],22,1236535329),b=a(b,g,y,x,h[d+1],5,-165796510),x=a(x,b,g,y,h[d+6],9,-1069501632),y=a(y,x,b,g,h[d+11],14,643717713),g=a(g,y,x,b,h[d+0],20,-373897302),b=a(b,g,y,x,h[d+5],5,-701558691),x=a(x,b,g,y,h[d+10],9,38016083),y=a(y,x,b,g,h[d+15],14,-660478335),g=a(g,y,x,b,h[d+4],20,-405537848),b=a(b,g,y,x,h[d+9],5,568446438),x=a(x,b,g,y,h[d+14],9,-1019803690),y=a(y,x,b,g,h[d+3],14,-187363961),g=a(g,y,x,b,h[d+8],20,1163531501),b=a(b,g,y,x,h[d+13],5,-1444681467),x=a(x,b,g,y,h[d+2],9,-51403784),y=a(y,x,b,g,h[d+7],14,1735328473),g=a(g,y,x,b,h[d+12],20,-1926607734),b=c(b,g,y,x,h[d+5],4,-378558),x=c(x,b,g,y,h[d+8],11,-2022574463),y=c(y,x,b,g,h[d+11],16,1839030562),g=c(g,y,x,b,h[d+14],23,-35309556),b=c(b,g,y,x,h[d+1],4,-1530992060),x=c(x,b,g,y,h[d+4],11,1272893353),y=c(y,x,b,g,h[d+7],16,-155497632),g=c(g,y,x,b,h[d+10],23,-1094730640),b=c(b,g,y,x,h[d+13],4,681279174),x=c(x,b,g,y,h[d+0],11,-358537222),y=c(y,x,b,g,h[d+3],16,-722521979),g=c(g,y,x,b,h[d+6],23,76029189),b=c(b,g,y,x,h[d+9],4,-640364487),x=c(x,b,g,y,h[d+12],11,-421815835),y=c(y,x,b,g,h[d+15],16,530742520),g=c(g,y,x,b,h[d+2],23,-995338651),b=u(b,g,y,x,h[d+0],6,-198630844),x=u(x,b,g,y,h[d+7],10,1126891415),y=u(y,x,b,g,h[d+14],15,-1416354905),g=u(g,y,x,b,h[d+5],21,-57434055),b=u(b,g,y,x,h[d+12],6,1700485571),x=u(x,b,g,y,h[d+3],10,-1894986606),y=u(y,x,b,g,h[d+10],15,-1051523),g=u(g,y,x,b,h[d+1],21,-2054922799),b=u(b,g,y,x,h[d+8],6,1873313359),x=u(x,b,g,y,h[d+15],10,-30611744),y=u(y,x,b,g,h[d+6],15,-1560198380),g=u(g,y,x,b,h[d+13],21,1309151649),b=u(b,g,y,x,h[d+4],6,-145523070),x=u(x,b,g,y,h[d+11],10,-1120210379),y=u(y,x,b,g,h[d+2],15,718787259),g=u(g,y,x,b,h[d+9],21,-343485551),b=n(b,T),g=n(g,M),y=n(y,k),x=n(x,R);return r(b)+r(g)+r(y)+r(x)}ef.encode=d_});var ze=K((tf,Hb)=>{E();P();(function(e,t){typeof tf=="object"?Hb.exports=tf=t():typeof define=="function"&&define.amd?define([],t):e.CryptoJS=t()})(tf,function(){var e=e||function(t,r){var n=Object.create||function(){function y(){}return function(x){var T;return y.prototype=x,T=new y,y.prototype=null,T}}(),i={},s=i.lib={},o=s.Base=function(){return{extend:function(y){var x=n(this);return y&&x.mixIn(y),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var x in y)y.hasOwnProperty(x)&&(this[x]=y[x]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=s.WordArray=o.extend({init:function(y,x){y=this.words=y||[],x!=r?this.sigBytes=x:this.sigBytes=y.length*4},toString:function(y){return(y||u).stringify(this)},concat:function(y){var x=this.words,T=y.words,M=this.sigBytes,k=y.sigBytes;if(this.clamp(),M%4)for(var R=0;R<k;R++){var C=T[R>>>2]>>>24-R%4*8&255;x[M+R>>>2]|=C<<24-(M+R)%4*8}else for(var R=0;R<k;R+=4)x[M+R>>>2]=T[R>>>2];return this.sigBytes+=k,this},clamp:function(){var y=this.words,x=this.sigBytes;y[x>>>2]&=4294967295<<32-x%4*8,y.length=t.ceil(x/4)},clone:function(){var y=o.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var x=[],T=function(q){var q=q,L=987654321,j=4294967295;return function(){L=36969*(L&65535)+(L>>16)&j,q=18e3*(q&65535)+(q>>16)&j;var G=(L<<16)+q&j;return G/=4294967296,G+=.5,G*(t.random()>.5?1:-1)}},M=0,k;M<y;M+=4){var R=T((k||t.random())*4294967296);k=R()*987654071,x.push(R()*4294967296|0)}return new a.init(x,y)}}),c=i.enc={},u=c.Hex={stringify:function(y){for(var x=y.words,T=y.sigBytes,M=[],k=0;k<T;k++){var R=x[k>>>2]>>>24-k%4*8&255;M.push((R>>>4).toString(16)),M.push((R&15).toString(16))}return M.join("")},parse:function(y){for(var x=y.length,T=[],M=0;M<x;M+=2)T[M>>>3]|=parseInt(y.substr(M,2),16)<<24-M%8*4;return new a.init(T,x/2)}},f=c.Latin1={stringify:function(y){for(var x=y.words,T=y.sigBytes,M=[],k=0;k<T;k++){var R=x[k>>>2]>>>24-k%4*8&255;M.push(String.fromCharCode(R))}return M.join("")},parse:function(y){for(var x=y.length,T=[],M=0;M<x;M++)T[M>>>2]|=(y.charCodeAt(M)&255)<<24-M%4*8;return new a.init(T,x)}},d=c.Utf8={stringify:function(y){try{return decodeURIComponent(escape(f.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return f.parse(unescape(encodeURIComponent(y)))}},h=s.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=d.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var x=this._data,T=x.words,M=x.sigBytes,k=this.blockSize,R=k*4,C=M/R;y?C=t.ceil(C):C=t.max((C|0)-this._minBufferSize,0);var q=C*k,L=t.min(q*4,M);if(q){for(var j=0;j<q;j+=k)this._doProcessBlock(T,j);var G=T.splice(0,q);x.sigBytes-=L}return new a.init(G,L)},clone:function(){var y=o.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0}),b=s.Hasher=h.extend({cfg:o.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var x=this._doFinalize();return x},blockSize:512/32,_createHelper:function(y){return function(x,T){return new y.init(T).finalize(x)}},_createHmacHelper:function(y){return function(x,T){return new g.HMAC.init(y,T).finalize(x)}}}),g=i.algo={};return i}(Math);return e})});var qc=K((rf,kb)=>{E();P();(function(e,t){typeof rf=="object"?kb.exports=rf=t(ze()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(rf,function(e){return function(t){var r=e,n=r.lib,i=n.Base,s=n.WordArray,o=r.x64={},a=o.Word=i.extend({init:function(u,f){this.high=u,this.low=f}}),c=o.WordArray=i.extend({init:function(u,f){u=this.words=u||[],f!=t?this.sigBytes=f:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,f=u.length,d=[],h=0;h<f;h++){var b=u[h];d.push(b.high),d.push(b.low)}return s.create(d,this.sigBytes)},clone:function(){for(var u=i.clone.call(this),f=u.words=this.words.slice(0),d=f.length,h=0;h<d;h++)f[h]=f[h].clone();return u}})}(),e})});var Cb=K((nf,Nb)=>{E();P();(function(e,t){typeof nf=="object"?Nb.exports=nf=t(ze()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(nf,function(e){return function(){if(typeof ArrayBuffer=="function"){var t=e,r=t.lib,n=r.WordArray,i=n.init,s=n.init=function(o){if(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),(o instanceof Int8Array||typeof Uint8ClampedArray<"u"&&o instanceof Uint8ClampedArray||o instanceof Int16Array||o instanceof Uint16Array||o instanceof Int32Array||o instanceof Uint32Array||o instanceof Float32Array||o instanceof Float64Array)&&(o=new Uint8Array(o.buffer,o.byteOffset,o.byteLength)),o instanceof Uint8Array){for(var a=o.byteLength,c=[],u=0;u<a;u++)c[u>>>2]|=o[u]<<24-u%4*8;i.call(this,c,a)}else i.apply(this,arguments)};s.prototype=n}}(),e.lib.WordArray})});var Rb=K((sf,qb)=>{E();P();(function(e,t){typeof sf=="object"?qb.exports=sf=t(ze()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(sf,function(e){return function(){var t=e,r=t.lib,n=r.WordArray,i=t.enc,s=i.Utf16=i.Utf16BE={stringify:function(a){for(var c=a.words,u=a.sigBytes,f=[],d=0;d<u;d+=2){var h=c[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(a){for(var c=a.length,u=[],f=0;f<c;f++)u[f>>>1]|=a.charCodeAt(f)<<16-f%2*16;return n.create(u,c*2)}};i.Utf16LE={stringify:function(a){for(var c=a.words,u=a.sigBytes,f=[],d=0;d<u;d+=2){var h=o(c[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(a){for(var c=a.length,u=[],f=0;f<c;f++)u[f>>>1]|=o(a.charCodeAt(f)<<16-f%2*16);return n.create(u,c*2)}};function o(a){return a<<8&4278255360|a>>>8&16711935}}(),e.enc.Utf16})});var No=K((of,Ub)=>{E();P();(function(e,t){typeof of=="object"?Ub.exports=of=t(ze()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(of,function(e){return function(){var t=e,r=t.lib,n=r.WordArray,i=t.enc,s=i.Base64={stringify:function(a){var c=a.words,u=a.sigBytes,f=this._map;a.clamp();for(var d=[],h=0;h<u;h+=3)for(var b=c[h>>>2]>>>24-h%4*8&255,g=c[h+1>>>2]>>>24-(h+1)%4*8&255,y=c[h+2>>>2]>>>24-(h+2)%4*8&255,x=b<<16|g<<8|y,T=0;T<4&&h+T*.75<u;T++)d.push(f.charAt(x>>>6*(3-T)&63));var M=f.charAt(64);if(M)for(;d.length%4;)d.push(M);return d.join("")},parse:function(a){var c=a.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<u.length;d++)f[u.charCodeAt(d)]=d}var h=u.charAt(64);if(h){var b=a.indexOf(h);b!==-1&&(c=b)}return o(a,c,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(a,c,u){for(var f=[],d=0,h=0;h<c;h++)if(h%4){var b=u[a.charCodeAt(h-1)]<<h%4*2,g=u[a.charCodeAt(h)]>>>6-h%4*2;f[d>>>2]|=(b|g)<<24-d%4*8,d++}return n.create(f,d)}}(),e.enc.Base64})});var Co=K((af,Lb)=>{E();P();(function(e,t){typeof af=="object"?Lb.exports=af=t(ze()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(af,function(e){return function(t){var r=e,n=r.lib,i=n.WordArray,s=n.Hasher,o=r.algo,a=[];(function(){for(var b=0;b<64;b++)a[b]=t.abs(t.sin(b+1))*4294967296|0})();var c=o.MD5=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(b,g){for(var y=0;y<16;y++){var x=g+y,T=b[x];b[x]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}var M=this._hash.words,k=b[g+0],R=b[g+1],C=b[g+2],q=b[g+3],L=b[g+4],j=b[g+5],G=b[g+6],B=b[g+7],l=b[g+8],w=b[g+9],_=b[g+10],v=b[g+11],S=b[g+12],H=b[g+13],U=b[g+14],O=b[g+15],p=M[0],A=M[1],F=M[2],W=M[3];p=u(p,A,F,W,k,7,a[0]),W=u(W,p,A,F,R,12,a[1]),F=u(F,W,p,A,C,17,a[2]),A=u(A,F,W,p,q,22,a[3]),p=u(p,A,F,W,L,7,a[4]),W=u(W,p,A,F,j,12,a[5]),F=u(F,W,p,A,G,17,a[6]),A=u(A,F,W,p,B,22,a[7]),p=u(p,A,F,W,l,7,a[8]),W=u(W,p,A,F,w,12,a[9]),F=u(F,W,p,A,_,17,a[10]),A=u(A,F,W,p,v,22,a[11]),p=u(p,A,F,W,S,7,a[12]),W=u(W,p,A,F,H,12,a[13]),F=u(F,W,p,A,U,17,a[14]),A=u(A,F,W,p,O,22,a[15]),p=f(p,A,F,W,R,5,a[16]),W=f(W,p,A,F,G,9,a[17]),F=f(F,W,p,A,v,14,a[18]),A=f(A,F,W,p,k,20,a[19]),p=f(p,A,F,W,j,5,a[20]),W=f(W,p,A,F,_,9,a[21]),F=f(F,W,p,A,O,14,a[22]),A=f(A,F,W,p,L,20,a[23]),p=f(p,A,F,W,w,5,a[24]),W=f(W,p,A,F,U,9,a[25]),F=f(F,W,p,A,q,14,a[26]),A=f(A,F,W,p,l,20,a[27]),p=f(p,A,F,W,H,5,a[28]),W=f(W,p,A,F,C,9,a[29]),F=f(F,W,p,A,B,14,a[30]),A=f(A,F,W,p,S,20,a[31]),p=d(p,A,F,W,j,4,a[32]),W=d(W,p,A,F,l,11,a[33]),F=d(F,W,p,A,v,16,a[34]),A=d(A,F,W,p,U,23,a[35]),p=d(p,A,F,W,R,4,a[36]),W=d(W,p,A,F,L,11,a[37]),F=d(F,W,p,A,B,16,a[38]),A=d(A,F,W,p,_,23,a[39]),p=d(p,A,F,W,H,4,a[40]),W=d(W,p,A,F,k,11,a[41]),F=d(F,W,p,A,q,16,a[42]),A=d(A,F,W,p,G,23,a[43]),p=d(p,A,F,W,w,4,a[44]),W=d(W,p,A,F,S,11,a[45]),F=d(F,W,p,A,O,16,a[46]),A=d(A,F,W,p,C,23,a[47]),p=h(p,A,F,W,k,6,a[48]),W=h(W,p,A,F,B,10,a[49]),F=h(F,W,p,A,U,15,a[50]),A=h(A,F,W,p,j,21,a[51]),p=h(p,A,F,W,S,6,a[52]),W=h(W,p,A,F,q,10,a[53]),F=h(F,W,p,A,_,15,a[54]),A=h(A,F,W,p,R,21,a[55]),p=h(p,A,F,W,l,6,a[56]),W=h(W,p,A,F,O,10,a[57]),F=h(F,W,p,A,G,15,a[58]),A=h(A,F,W,p,H,21,a[59]),p=h(p,A,F,W,L,6,a[60]),W=h(W,p,A,F,v,10,a[61]),F=h(F,W,p,A,C,15,a[62]),A=h(A,F,W,p,w,21,a[63]),M[0]=M[0]+p|0,M[1]=M[1]+A|0,M[2]=M[2]+F|0,M[3]=M[3]+W|0},_doFinalize:function(){var b=this._data,g=b.words,y=this._nDataBytes*8,x=b.sigBytes*8;g[x>>>5]|=128<<24-x%32;var T=t.floor(y/4294967296),M=y;g[(x+64>>>9<<4)+15]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,g[(x+64>>>9<<4)+14]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,b.sigBytes=(g.length+1)*4,this._process();for(var k=this._hash,R=k.words,C=0;C<4;C++){var q=R[C];R[C]=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360}return k},clone:function(){var b=s.clone.call(this);return b._hash=this._hash.clone(),b}});function u(b,g,y,x,T,M,k){var R=b+(g&y|~g&x)+T+k;return(R<<M|R>>>32-M)+g}function f(b,g,y,x,T,M,k){var R=b+(g&x|y&~x)+T+k;return(R<<M|R>>>32-M)+g}function d(b,g,y,x,T,M,k){var R=b+(g^y^x)+T+k;return(R<<M|R>>>32-M)+g}function h(b,g,y,x,T,M,k){var R=b+(y^(g|~x))+T+k;return(R<<M|R>>>32-M)+g}r.MD5=s._createHelper(c),r.HmacMD5=s._createHmacHelper(c)}(Math),e.MD5})});var uf=K((cf,jb)=>{E();P();(function(e,t){typeof cf=="object"?jb.exports=cf=t(ze()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(cf,function(e){return function(){var t=e,r=t.lib,n=r.WordArray,i=r.Hasher,s=t.algo,o=[],a=s.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,u){for(var f=this._hash.words,d=f[0],h=f[1],b=f[2],g=f[3],y=f[4],x=0;x<80;x++){if(x<16)o[x]=c[u+x]|0;else{var T=o[x-3]^o[x-8]^o[x-14]^o[x-16];o[x]=T<<1|T>>>31}var M=(d<<5|d>>>27)+y+o[x];x<20?M+=(h&b|~h&g)+1518500249:x<40?M+=(h^b^g)+1859775393:x<60?M+=(h&b|h&g|b&g)-1894007588:M+=(h^b^g)-899497514,y=g,g=b,b=h<<30|h>>>2,h=d,d=M}f[0]=f[0]+d|0,f[1]=f[1]+h|0,f[2]=f[2]+b|0,f[3]=f[3]+g|0,f[4]=f[4]+y|0},_doFinalize:function(){var c=this._data,u=c.words,f=this._nDataBytes*8,d=c.sigBytes*8;return u[d>>>5]|=128<<24-d%32,u[(d+64>>>9<<4)+14]=Math.floor(f/4294967296),u[(d+64>>>9<<4)+15]=f,c.sigBytes=u.length*4,this._process(),this._hash},clone:function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c}});t.SHA1=i._createHelper(a),t.HmacSHA1=i._createHmacHelper(a)}(),e.SHA1})});var jl=K((ff,Db)=>{E();P();(function(e,t){typeof ff=="object"?Db.exports=ff=t(ze()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(ff,function(e){return function(t){var r=e,n=r.lib,i=n.WordArray,s=n.Hasher,o=r.algo,a=[],c=[];(function(){function d(y){for(var x=t.sqrt(y),T=2;T<=x;T++)if(!(y%T))return!1;return!0}function h(y){return(y-(y|0))*4294967296|0}for(var b=2,g=0;g<64;)d(b)&&(g<8&&(a[g]=h(t.pow(b,1/2))),c[g]=h(t.pow(b,1/3)),g++),b++})();var u=[],f=o.SHA256=s.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(d,h){for(var b=this._hash.words,g=b[0],y=b[1],x=b[2],T=b[3],M=b[4],k=b[5],R=b[6],C=b[7],q=0;q<64;q++){if(q<16)u[q]=d[h+q]|0;else{var L=u[q-15],j=(L<<25|L>>>7)^(L<<14|L>>>18)^L>>>3,G=u[q-2],B=(G<<15|G>>>17)^(G<<13|G>>>19)^G>>>10;u[q]=j+u[q-7]+B+u[q-16]}var l=M&k^~M&R,w=g&y^g&x^y&x,_=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),v=(M<<26|M>>>6)^(M<<21|M>>>11)^(M<<7|M>>>25),S=C+v+l+c[q]+u[q],H=_+w;C=R,R=k,k=M,M=T+S|0,T=x,x=y,y=g,g=S+H|0}b[0]=b[0]+g|0,b[1]=b[1]+y|0,b[2]=b[2]+x|0,b[3]=b[3]+T|0,b[4]=b[4]+M|0,b[5]=b[5]+k|0,b[6]=b[6]+R|0,b[7]=b[7]+C|0},_doFinalize:function(){var d=this._data,h=d.words,b=this._nDataBytes*8,g=d.sigBytes*8;return h[g>>>5]|=128<<24-g%32,h[(g+64>>>9<<4)+14]=t.floor(b/4294967296),h[(g+64>>>9<<4)+15]=b,d.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var d=s.clone.call(this);return d._hash=this._hash.clone(),d}});r.SHA256=s._createHelper(f),r.HmacSHA256=s._createHmacHelper(f)}(Math),e.SHA256})});var Fb=K((df,Kb)=>{E();P();(function(e,t,r){typeof df=="object"?Kb.exports=df=t(ze(),jl()):typeof define=="function"&&define.amd?define(["./core","./sha256"],t):t(e.CryptoJS)})(df,function(e){return function(){var t=e,r=t.lib,n=r.WordArray,i=t.algo,s=i.SHA256,o=i.SHA224=s.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var a=s._doFinalize.call(this);return a.sigBytes-=4,a}});t.SHA224=s._createHelper(o),t.HmacSHA224=s._createHmacHelper(o)}(),e.SHA224})});var Dl=K((lf,Wb)=>{E();P();(function(e,t,r){typeof lf=="object"?Wb.exports=lf=t(ze(),qc()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],t):t(e.CryptoJS)})(lf,function(e){return function(){var t=e,r=t.lib,n=r.Hasher,i=t.x64,s=i.Word,o=i.WordArray,a=t.algo;function c(){return s.create.apply(s,arguments)}var u=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],f=[];(function(){for(var h=0;h<80;h++)f[h]=c()})();var d=a.SHA512=n.extend({_doReset:function(){this._hash=new o.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(h,b){for(var g=this._hash.words,y=g[0],x=g[1],T=g[2],M=g[3],k=g[4],R=g[5],C=g[6],q=g[7],L=y.high,j=y.low,G=x.high,B=x.low,l=T.high,w=T.low,_=M.high,v=M.low,S=k.high,H=k.low,U=R.high,O=R.low,p=C.high,A=C.low,F=q.high,W=q.low,Z=L,Q=j,te=G,ee=B,it=l,Ie=w,Be=_,Pr=v,Ne=S,_e=H,tr=U,qe=O,ot=p,sn=A,lt=F,ct=W,Vr=0;Vr<80;Vr++){var fe=f[Vr];if(Vr<16)var Re=fe.high=h[b+Vr*2]|0,I=fe.low=h[b+Vr*2+1]|0;else{var N=f[Vr-15],D=N.high,z=N.low,$=(D>>>1|z<<31)^(D>>>8|z<<24)^D>>>7,V=(z>>>1|D<<31)^(z>>>8|D<<24)^(z>>>7|D<<25),J=f[Vr-2],X=J.high,Y=J.low,pe=(X>>>19|Y<<13)^(X<<3|Y>>>29)^X>>>6,he=(Y>>>19|X<<13)^(Y<<3|X>>>29)^(Y>>>6|X<<26),ce=f[Vr-7],Qe=ce.high,Ue=ce.low,He=f[Vr-16],As=He.high,ht=He.low,I=V+Ue,Re=$+Qe+(I>>>0<V>>>0?1:0),I=I+he,Re=Re+pe+(I>>>0<he>>>0?1:0),I=I+ht,Re=Re+As+(I>>>0<ht>>>0?1:0);fe.high=Re,fe.low=I}var Lt=Ne&tr^~Ne&ot,Sc=_e&qe^~_e&sn,jt=Z&te^Z&it^te&it,Dt=Q&ee^Q&Ie^ee&Ie,ku=(Z>>>28|Q<<4)^(Z<<30|Q>>>2)^(Z<<25|Q>>>7),Nt=(Q>>>28|Z<<4)^(Q<<30|Z>>>2)^(Q<<25|Z>>>7),Kt=(Ne>>>14|_e<<18)^(Ne>>>18|_e<<14)^(Ne<<23|_e>>>9),Nu=(_e>>>14|Ne<<18)^(_e>>>18|Ne<<14)^(_e<<23|Ne>>>9),Ct=u[Vr],Ft=Ct.high,Ec=Ct.low,We=ct+Nu,ut=lt+Kt+(We>>>0<ct>>>0?1:0),We=We+Sc,ut=ut+Lt+(We>>>0<Sc>>>0?1:0),We=We+Ec,ut=ut+Ft+(We>>>0<Ec>>>0?1:0),We=We+I,ut=ut+Re+(We>>>0<I>>>0?1:0),Pc=Nt+Dt,Wt=ku+jt+(Pc>>>0<Nt>>>0?1:0);lt=ot,ct=sn,ot=tr,sn=qe,tr=Ne,qe=_e,_e=Pr+We|0,Ne=Be+ut+(_e>>>0<Pr>>>0?1:0)|0,Be=it,Pr=Ie,it=te,Ie=ee,te=Z,ee=Q,Q=We+Pc|0,Z=ut+Wt+(Q>>>0<We>>>0?1:0)|0}j=y.low=j+Q,y.high=L+Z+(j>>>0<Q>>>0?1:0),B=x.low=B+ee,x.high=G+te+(B>>>0<ee>>>0?1:0),w=T.low=w+Ie,T.high=l+it+(w>>>0<Ie>>>0?1:0),v=M.low=v+Pr,M.high=_+Be+(v>>>0<Pr>>>0?1:0),H=k.low=H+_e,k.high=S+Ne+(H>>>0<_e>>>0?1:0),O=R.low=O+qe,R.high=U+tr+(O>>>0<qe>>>0?1:0),A=C.low=A+sn,C.high=p+ot+(A>>>0<sn>>>0?1:0),W=q.low=W+ct,q.high=F+lt+(W>>>0<ct>>>0?1:0)},_doFinalize:function(){var h=this._data,b=h.words,g=this._nDataBytes*8,y=h.sigBytes*8;b[y>>>5]|=128<<24-y%32,b[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),b[(y+128>>>10<<5)+31]=g,h.sigBytes=b.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var h=n.clone.call(this);return h._hash=this._hash.clone(),h},blockSize:1024/32});t.SHA512=n._createHelper(d),t.HmacSHA512=n._createHmacHelper(d)}(),e.SHA512})});var Vb=K((hf,zb)=>{E();P();(function(e,t,r){typeof hf=="object"?zb.exports=hf=t(ze(),qc(),Dl()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],t):t(e.CryptoJS)})(hf,function(e){return function(){var t=e,r=t.x64,n=r.Word,i=r.WordArray,s=t.algo,o=s.SHA512,a=s.SHA384=o.extend({_doReset:function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=16,c}});t.SHA384=o._createHelper(a),t.HmacSHA384=o._createHmacHelper(a)}(),e.SHA384})});var $b=K((pf,Gb)=>{E();P();(function(e,t,r){typeof pf=="object"?Gb.exports=pf=t(ze(),qc()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],t):t(e.CryptoJS)})(pf,function(e){return function(t){var r=e,n=r.lib,i=n.WordArray,s=n.Hasher,o=r.x64,a=o.Word,c=r.algo,u=[],f=[],d=[];(function(){for(var g=1,y=0,x=0;x<24;x++){u[g+5*y]=(x+1)*(x+2)/2%64;var T=y%5,M=(2*g+3*y)%5;g=T,y=M}for(var g=0;g<5;g++)for(var y=0;y<5;y++)f[g+5*y]=y+(2*g+3*y)%5*5;for(var k=1,R=0;R<24;R++){for(var C=0,q=0,L=0;L<7;L++){if(k&1){var j=(1<<L)-1;j<32?q^=1<<j:C^=1<<j-32}k&128?k=k<<1^113:k<<=1}d[R]=a.create(C,q)}})();var h=[];(function(){for(var g=0;g<25;g++)h[g]=a.create()})();var b=c.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,y){for(var x=this._state,T=this.blockSize/2,M=0;M<T;M++){var k=g[y+2*M],R=g[y+2*M+1];k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360;var C=x[M];C.high^=R,C.low^=k}for(var q=0;q<24;q++){for(var L=0;L<5;L++){for(var j=0,G=0,B=0;B<5;B++){var C=x[L+5*B];j^=C.high,G^=C.low}var l=h[L];l.high=j,l.low=G}for(var L=0;L<5;L++)for(var w=h[(L+4)%5],_=h[(L+1)%5],v=_.high,S=_.low,j=w.high^(v<<1|S>>>31),G=w.low^(S<<1|v>>>31),B=0;B<5;B++){var C=x[L+5*B];C.high^=j,C.low^=G}for(var H=1;H<25;H++){var C=x[H],U=C.high,O=C.low,p=u[H];if(p<32)var j=U<<p|O>>>32-p,G=O<<p|U>>>32-p;else var j=O<<p-32|U>>>64-p,G=U<<p-32|O>>>64-p;var A=h[f[H]];A.high=j,A.low=G}var F=h[0],W=x[0];F.high=W.high,F.low=W.low;for(var L=0;L<5;L++)for(var B=0;B<5;B++){var H=L+5*B,C=x[H],Z=h[H],Q=h[(L+1)%5+5*B],te=h[(L+2)%5+5*B];C.high=Z.high^~Q.high&te.high,C.low=Z.low^~Q.low&te.low}var C=x[0],ee=d[q];C.high^=ee.high,C.low^=ee.low}},_doFinalize:function(){var g=this._data,y=g.words,x=this._nDataBytes*8,T=g.sigBytes*8,M=this.blockSize*32;y[T>>>5]|=1<<24-T%32,y[(t.ceil((T+1)/M)*M>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var k=this._state,R=this.cfg.outputLength/8,C=R/8,q=[],L=0;L<C;L++){var j=k[L],G=j.high,B=j.low;G=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360,B=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,q.push(B),q.push(G)}return new i.init(q,R)},clone:function(){for(var g=s.clone.call(this),y=g._state=this._state.slice(0),x=0;x<25;x++)y[x]=y[x].clone();return g}});r.SHA3=s._createHelper(b),r.HmacSHA3=s._createHmacHelper(b)}(Math),e.SHA3})});var Yb=K((bf,Xb)=>{E();P();(function(e,t){typeof bf=="object"?Xb.exports=bf=t(ze()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(bf,function(e){return function(t){var r=e,n=r.lib,i=n.WordArray,s=n.Hasher,o=r.algo,a=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=i.create([0,1518500249,1859775393,2400959708,2840853838]),h=i.create([1352829926,1548603684,1836072691,2053994217,0]),b=o.RIPEMD160=s.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(R,C){for(var q=0;q<16;q++){var L=C+q,j=R[L];R[L]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360}var G=this._hash.words,B=d.words,l=h.words,w=a.words,_=c.words,v=u.words,S=f.words,H,U,O,p,A,F,W,Z,Q,te;F=H=G[0],W=U=G[1],Z=O=G[2],Q=p=G[3],te=A=G[4];for(var ee,q=0;q<80;q+=1)ee=H+R[C+w[q]]|0,q<16?ee+=g(U,O,p)+B[0]:q<32?ee+=y(U,O,p)+B[1]:q<48?ee+=x(U,O,p)+B[2]:q<64?ee+=T(U,O,p)+B[3]:ee+=M(U,O,p)+B[4],ee=ee|0,ee=k(ee,v[q]),ee=ee+A|0,H=A,A=p,p=k(O,10),O=U,U=ee,ee=F+R[C+_[q]]|0,q<16?ee+=M(W,Z,Q)+l[0]:q<32?ee+=T(W,Z,Q)+l[1]:q<48?ee+=x(W,Z,Q)+l[2]:q<64?ee+=y(W,Z,Q)+l[3]:ee+=g(W,Z,Q)+l[4],ee=ee|0,ee=k(ee,S[q]),ee=ee+te|0,F=te,te=Q,Q=k(Z,10),Z=W,W=ee;ee=G[1]+O+Q|0,G[1]=G[2]+p+te|0,G[2]=G[3]+A+F|0,G[3]=G[4]+H+W|0,G[4]=G[0]+U+Z|0,G[0]=ee},_doFinalize:function(){var R=this._data,C=R.words,q=this._nDataBytes*8,L=R.sigBytes*8;C[L>>>5]|=128<<24-L%32,C[(L+64>>>9<<4)+14]=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360,R.sigBytes=(C.length+1)*4,this._process();for(var j=this._hash,G=j.words,B=0;B<5;B++){var l=G[B];G[B]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360}return j},clone:function(){var R=s.clone.call(this);return R._hash=this._hash.clone(),R}});function g(R,C,q){return R^C^q}function y(R,C,q){return R&C|~R&q}function x(R,C,q){return(R|~C)^q}function T(R,C,q){return R&q|C&~q}function M(R,C,q){return R^(C|~q)}function k(R,C){return R<<C|R>>>32-C}r.RIPEMD160=s._createHelper(b),r.HmacRIPEMD160=s._createHmacHelper(b)}(Math),e.RIPEMD160})});var yf=K((gf,Zb)=>{E();P();(function(e,t){typeof gf=="object"?Zb.exports=gf=t(ze()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(gf,function(e){(function(){var t=e,r=t.lib,n=r.Base,i=t.enc,s=i.Utf8,o=t.algo,a=o.HMAC=n.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=s.parse(u));var f=c.blockSize,d=f*4;u.sigBytes>d&&(u=c.finalize(u)),u.clamp();for(var h=this._oKey=u.clone(),b=this._iKey=u.clone(),g=h.words,y=b.words,x=0;x<f;x++)g[x]^=1549556828,y[x]^=909522486;h.sigBytes=b.sigBytes=d,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,f=u.finalize(c);u.reset();var d=u.finalize(this._oKey.clone().concat(f));return d}})})()})});var Qb=K((vf,Jb)=>{E();P();(function(e,t,r){typeof vf=="object"?Jb.exports=vf=t(ze(),uf(),yf()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],t):t(e.CryptoJS)})(vf,function(e){return function(){var t=e,r=t.lib,n=r.Base,i=r.WordArray,s=t.algo,o=s.SHA1,a=s.HMAC,c=s.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:o,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,f){for(var d=this.cfg,h=a.create(d.hasher,u),b=i.create(),g=i.create([1]),y=b.words,x=g.words,T=d.keySize,M=d.iterations;y.length<T;){var k=h.update(f).finalize(g);h.reset();for(var R=k.words,C=R.length,q=k,L=1;L<M;L++){q=h.finalize(q),h.reset();for(var j=q.words,G=0;G<C;G++)R[G]^=j[G]}b.concat(k),x[0]++}return b.sigBytes=T*4,b}});t.PBKDF2=function(u,f,d){return c.create(d).compute(u,f)}}(),e.PBKDF2})});var Ks=K((mf,eg)=>{E();P();(function(e,t,r){typeof mf=="object"?eg.exports=mf=t(ze(),uf(),yf()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],t):t(e.CryptoJS)})(mf,function(e){return function(){var t=e,r=t.lib,n=r.Base,i=r.WordArray,s=t.algo,o=s.MD5,a=s.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:o,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,u){for(var f=this.cfg,d=f.hasher.create(),h=i.create(),b=h.words,g=f.keySize,y=f.iterations;b.length<g;){x&&d.update(x);var x=d.update(c).finalize(u);d.reset();for(var T=1;T<y;T++)x=d.finalize(x),d.reset();h.concat(x)}return h.sigBytes=g*4,h}});t.EvpKDF=function(c,u,f){return a.create(f).compute(c,u)}}(),e.EvpKDF})});var Tr=K((wf,tg)=>{E();P();(function(e,t,r){typeof wf=="object"?tg.exports=wf=t(ze(),Ks()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],t):t(e.CryptoJS)})(wf,function(e){e.lib.Cipher||function(t){var r=e,n=r.lib,i=n.Base,s=n.WordArray,o=n.BufferedBlockAlgorithm,a=r.enc,c=a.Utf8,u=a.Base64,f=r.algo,d=f.EvpKDF,h=n.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(l,w){return this.create(this._ENC_XFORM_MODE,l,w)},createDecryptor:function(l,w){return this.create(this._DEC_XFORM_MODE,l,w)},init:function(l,w,_){this.cfg=this.cfg.extend(_),this._xformMode=l,this._key=w,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(l){return this._append(l),this._process()},finalize:function(l){l&&this._append(l);var w=this._doFinalize();return w},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function l(w){return typeof w=="string"?B:L}return function(w){return{encrypt:function(_,v,S){return l(v).encrypt(w,_,v,S)},decrypt:function(_,v,S){return l(v).decrypt(w,_,v,S)}}}}()}),b=n.StreamCipher=h.extend({_doFinalize:function(){var l=this._process(!0);return l},blockSize:1}),g=r.mode={},y=n.BlockCipherMode=i.extend({createEncryptor:function(l,w){return this.Encryptor.create(l,w)},createDecryptor:function(l,w){return this.Decryptor.create(l,w)},init:function(l,w){this._cipher=l,this._iv=w}}),x=g.CBC=function(){var l=y.extend();l.Encryptor=l.extend({processBlock:function(_,v){var S=this._cipher,H=S.blockSize;w.call(this,_,v,H),S.encryptBlock(_,v),this._prevBlock=_.slice(v,v+H)}}),l.Decryptor=l.extend({processBlock:function(_,v){var S=this._cipher,H=S.blockSize,U=_.slice(v,v+H);S.decryptBlock(_,v),w.call(this,_,v,H),this._prevBlock=U}});function w(_,v,S){var H=this._iv;if(H){var U=H;this._iv=t}else var U=this._prevBlock;for(var O=0;O<S;O++)_[v+O]^=U[O]}return l}(),T=r.pad={},M=T.Pkcs7={pad:function(l,w){for(var _=w*4,v=_-l.sigBytes%_,S=v<<24|v<<16|v<<8|v,H=[],U=0;U<v;U+=4)H.push(S);var O=s.create(H,v);l.concat(O)},unpad:function(l){var w=l.words[l.sigBytes-1>>>2]&255;l.sigBytes-=w}},k=n.BlockCipher=h.extend({cfg:h.cfg.extend({mode:x,padding:M}),reset:function(){h.reset.call(this);var l=this.cfg,w=l.iv,_=l.mode;if(this._xformMode==this._ENC_XFORM_MODE)var v=_.createEncryptor;else{var v=_.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==v?this._mode.init(this,w&&w.words):(this._mode=v.call(_,this,w&&w.words),this._mode.__creator=v)},_doProcessBlock:function(l,w){this._mode.processBlock(l,w)},_doFinalize:function(){var l=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){l.pad(this._data,this.blockSize);var w=this._process(!0)}else{var w=this._process(!0);l.unpad(w)}return w},blockSize:128/32}),R=n.CipherParams=i.extend({init:function(l){this.mixIn(l)},toString:function(l){return(l||this.formatter).stringify(this)}}),C=r.format={},q=C.OpenSSL={stringify:function(l){var w=l.ciphertext,_=l.salt;if(_)var v=s.create([1398893684,1701076831]).concat(_).concat(w);else var v=w;return v.toString(u)},parse:function(l){var w=u.parse(l),_=w.words;if(_[0]==1398893684&&_[1]==1701076831){var v=s.create(_.slice(2,4));_.splice(0,4),w.sigBytes-=16}return R.create({ciphertext:w,salt:v})}},L=n.SerializableCipher=i.extend({cfg:i.extend({format:q}),encrypt:function(l,w,_,v){v=this.cfg.extend(v);var S=l.createEncryptor(_,v),H=S.finalize(w),U=S.cfg;return R.create({ciphertext:H,key:_,iv:U.iv,algorithm:l,mode:U.mode,padding:U.padding,blockSize:l.blockSize,formatter:v.format})},decrypt:function(l,w,_,v){v=this.cfg.extend(v),w=this._parse(w,v.format);var S=l.createDecryptor(_,v).finalize(w.ciphertext);return S},_parse:function(l,w){return typeof l=="string"?w.parse(l,this):l}}),j=r.kdf={},G=j.OpenSSL={execute:function(l,w,_,v){v||(v=s.random(64/8));var S=d.create({keySize:w+_}).compute(l,v),H=s.create(S.words.slice(w),_*4);return S.sigBytes=w*4,R.create({key:S,iv:H,salt:v})}},B=n.PasswordBasedCipher=L.extend({cfg:L.cfg.extend({kdf:G}),encrypt:function(l,w,_,v){v=this.cfg.extend(v);var S=v.kdf.execute(_,l.keySize,l.ivSize);v.iv=S.iv;var H=L.encrypt.call(this,l,w,S.key,v);return H.mixIn(S),H},decrypt:function(l,w,_,v){v=this.cfg.extend(v),w=this._parse(w,v.format);var S=v.kdf.execute(_,l.keySize,l.ivSize,w.salt);v.iv=S.iv;var H=L.decrypt.call(this,l,w,S.key,v);return H}})}()})});var ng=K((xf,rg)=>{E();P();(function(e,t,r){typeof xf=="object"?rg.exports=xf=t(ze(),Tr()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(xf,function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();t.Encryptor=t.extend({processBlock:function(n,i){var s=this._cipher,o=s.blockSize;r.call(this,n,i,o,s),this._prevBlock=n.slice(i,i+o)}}),t.Decryptor=t.extend({processBlock:function(n,i){var s=this._cipher,o=s.blockSize,a=n.slice(i,i+o);r.call(this,n,i,o,s),this._prevBlock=a}});function r(n,i,s,o){var a=this._iv;if(a){var c=a.slice(0);this._iv=void 0}else var c=this._prevBlock;o.encryptBlock(c,0);for(var u=0;u<s;u++)n[i+u]^=c[u]}return t}(),e.mode.CFB})});var sg=K((_f,ig)=>{E();P();(function(e,t,r){typeof _f=="object"?ig.exports=_f=t(ze(),Tr()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(_f,function(e){return e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(n,i){var s=this._cipher,o=s.blockSize,a=this._iv,c=this._counter;a&&(c=this._counter=a.slice(0),this._iv=void 0);var u=c.slice(0);s.encryptBlock(u,0),c[o-1]=c[o-1]+1|0;for(var f=0;f<o;f++)n[i+f]^=u[f]}});return t.Decryptor=r,t}(),e.mode.CTR})});var ag=K((Sf,og)=>{E();P();(function(e,t,r){typeof Sf=="object"?og.exports=Sf=t(ze(),Tr()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(Sf,function(e){return e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function r(s){if((s>>24&255)===255){var o=s>>16&255,a=s>>8&255,c=s&255;o===255?(o=0,a===255?(a=0,c===255?c=0:++c):++a):++o,s=0,s+=o<<16,s+=a<<8,s+=c}else s+=1<<24;return s}function n(s){return(s[0]=r(s[0]))===0&&(s[1]=r(s[1])),s}var i=t.Encryptor=t.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,u=this._iv,f=this._counter;u&&(f=this._counter=u.slice(0),this._iv=void 0),n(f);var d=f.slice(0);a.encryptBlock(d,0);for(var h=0;h<c;h++)s[o+h]^=d[h]}});return t.Decryptor=i,t}(),e.mode.CTRGladman})});var ug=K((Ef,cg)=>{E();P();(function(e,t,r){typeof Ef=="object"?cg.exports=Ef=t(ze(),Tr()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(Ef,function(e){return e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(n,i){var s=this._cipher,o=s.blockSize,a=this._iv,c=this._keystream;a&&(c=this._keystream=a.slice(0),this._iv=void 0),s.encryptBlock(c,0);for(var u=0;u<o;u++)n[i+u]^=c[u]}});return t.Decryptor=r,t}(),e.mode.OFB})});var dg=K((Pf,fg)=>{E();P();(function(e,t,r){typeof Pf=="object"?fg.exports=Pf=t(ze(),Tr()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(Pf,function(e){return e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(r,n){this._cipher.encryptBlock(r,n)}}),t.Decryptor=t.extend({processBlock:function(r,n){this._cipher.decryptBlock(r,n)}}),t}(),e.mode.ECB})});var hg=K((Tf,lg)=>{E();P();(function(e,t,r){typeof Tf=="object"?lg.exports=Tf=t(ze(),Tr()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(Tf,function(e){return e.pad.AnsiX923={pad:function(t,r){var n=t.sigBytes,i=r*4,s=i-n%i,o=n+s-1;t.clamp(),t.words[o>>>2]|=s<<24-o%4*8,t.sigBytes+=s},unpad:function(t){var r=t.words[t.sigBytes-1>>>2]&255;t.sigBytes-=r}},e.pad.Ansix923})});var bg=K((Af,pg)=>{E();P();(function(e,t,r){typeof Af=="object"?pg.exports=Af=t(ze(),Tr()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(Af,function(e){return e.pad.Iso10126={pad:function(t,r){var n=r*4,i=n-t.sigBytes%n;t.concat(e.lib.WordArray.random(i-1)).concat(e.lib.WordArray.create([i<<24],1))},unpad:function(t){var r=t.words[t.sigBytes-1>>>2]&255;t.sigBytes-=r}},e.pad.Iso10126})});var yg=K((If,gg)=>{E();P();(function(e,t,r){typeof If=="object"?gg.exports=If=t(ze(),Tr()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(If,function(e){return e.pad.Iso97971={pad:function(t,r){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,r)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971})});var mg=K((Of,vg)=>{E();P();(function(e,t,r){typeof Of=="object"?vg.exports=Of=t(ze(),Tr()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(Of,function(e){return e.pad.ZeroPadding={pad:function(t,r){var n=r*4;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){for(var r=t.words,n=t.sigBytes-1;!(r[n>>>2]>>>24-n%4*8&255);)n--;t.sigBytes=n+1}},e.pad.ZeroPadding})});var xg=K((Bf,wg)=>{E();P();(function(e,t,r){typeof Bf=="object"?wg.exports=Bf=t(ze(),Tr()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(Bf,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding})});var Sg=K((Mf,_g)=>{E();P();(function(e,t,r){typeof Mf=="object"?_g.exports=Mf=t(ze(),Tr()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(Mf,function(e){return function(t){var r=e,n=r.lib,i=n.CipherParams,s=r.enc,o=s.Hex,a=r.format,c=a.Hex={stringify:function(u){return u.ciphertext.toString(o)},parse:function(u){var f=o.parse(u);return i.create({ciphertext:f})}}}(),e.format.Hex})});var Pg=K((Hf,Eg)=>{E();P();(function(e,t,r){typeof Hf=="object"?Eg.exports=Hf=t(ze(),No(),Co(),Ks(),Tr()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)})(Hf,function(e){return function(){var t=e,r=t.lib,n=r.BlockCipher,i=t.algo,s=[],o=[],a=[],c=[],u=[],f=[],d=[],h=[],b=[],g=[];(function(){for(var T=[],M=0;M<256;M++)M<128?T[M]=M<<1:T[M]=M<<1^283;for(var k=0,R=0,M=0;M<256;M++){var C=R^R<<1^R<<2^R<<3^R<<4;C=C>>>8^C&255^99,s[k]=C,o[C]=k;var q=T[k],L=T[q],j=T[L],G=T[C]*257^C*16843008;a[k]=G<<24|G>>>8,c[k]=G<<16|G>>>16,u[k]=G<<8|G>>>24,f[k]=G;var G=j*16843009^L*65537^q*257^k*16843008;d[C]=G<<24|G>>>8,h[C]=G<<16|G>>>16,b[C]=G<<8|G>>>24,g[C]=G,k?(k=q^T[T[T[j^q]]],R^=T[T[R]]):k=R=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],x=i.AES=n.extend({_doReset:function(){if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var T=this._keyPriorReset=this._key,M=T.words,k=T.sigBytes/4,R=this._nRounds=k+6,C=(R+1)*4,q=this._keySchedule=[],L=0;L<C;L++)if(L<k)q[L]=M[L];else{var j=q[L-1];L%k?k>6&&L%k==4&&(j=s[j>>>24]<<24|s[j>>>16&255]<<16|s[j>>>8&255]<<8|s[j&255]):(j=j<<8|j>>>24,j=s[j>>>24]<<24|s[j>>>16&255]<<16|s[j>>>8&255]<<8|s[j&255],j^=y[L/k|0]<<24),q[L]=q[L-k]^j}for(var G=this._invKeySchedule=[],B=0;B<C;B++){var L=C-B;if(B%4)var j=q[L];else var j=q[L-4];B<4||L<=4?G[B]=j:G[B]=d[s[j>>>24]]^h[s[j>>>16&255]]^b[s[j>>>8&255]]^g[s[j&255]]}}},encryptBlock:function(T,M){this._doCryptBlock(T,M,this._keySchedule,a,c,u,f,s)},decryptBlock:function(T,M){var k=T[M+1];T[M+1]=T[M+3],T[M+3]=k,this._doCryptBlock(T,M,this._invKeySchedule,d,h,b,g,o);var k=T[M+1];T[M+1]=T[M+3],T[M+3]=k},_doCryptBlock:function(T,M,k,R,C,q,L,j){for(var G=this._nRounds,B=T[M]^k[0],l=T[M+1]^k[1],w=T[M+2]^k[2],_=T[M+3]^k[3],v=4,S=1;S<G;S++){var H=R[B>>>24]^C[l>>>16&255]^q[w>>>8&255]^L[_&255]^k[v++],U=R[l>>>24]^C[w>>>16&255]^q[_>>>8&255]^L[B&255]^k[v++],O=R[w>>>24]^C[_>>>16&255]^q[B>>>8&255]^L[l&255]^k[v++],p=R[_>>>24]^C[B>>>16&255]^q[l>>>8&255]^L[w&255]^k[v++];B=H,l=U,w=O,_=p}var H=(j[B>>>24]<<24|j[l>>>16&255]<<16|j[w>>>8&255]<<8|j[_&255])^k[v++],U=(j[l>>>24]<<24|j[w>>>16&255]<<16|j[_>>>8&255]<<8|j[B&255])^k[v++],O=(j[w>>>24]<<24|j[_>>>16&255]<<16|j[B>>>8&255]<<8|j[l&255])^k[v++],p=(j[_>>>24]<<24|j[B>>>16&255]<<16|j[l>>>8&255]<<8|j[w&255])^k[v++];T[M]=H,T[M+1]=U,T[M+2]=O,T[M+3]=p},keySize:256/32});t.AES=n._createHelper(x)}(),e.AES})});var Ag=K((kf,Tg)=>{E();P();(function(e,t,r){typeof kf=="object"?Tg.exports=kf=t(ze(),No(),Co(),Ks(),Tr()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)})(kf,function(e){return function(){var t=e,r=t.lib,n=r.WordArray,i=r.BlockCipher,s=t.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=s.DES=i.extend({_doReset:function(){for(var y=this._key,x=y.words,T=[],M=0;M<56;M++){var k=o[M]-1;T[M]=x[k>>>5]>>>31-k%32&1}for(var R=this._subKeys=[],C=0;C<16;C++){for(var q=R[C]=[],L=c[C],M=0;M<24;M++)q[M/6|0]|=T[(a[M]-1+L)%28]<<31-M%6,q[4+(M/6|0)]|=T[28+(a[M+24]-1+L)%28]<<31-M%6;q[0]=q[0]<<1|q[0]>>>31;for(var M=1;M<7;M++)q[M]=q[M]>>>(M-1)*4+3;q[7]=q[7]<<5|q[7]>>>27}for(var j=this._invSubKeys=[],M=0;M<16;M++)j[M]=R[15-M]},encryptBlock:function(y,x){this._doCryptBlock(y,x,this._subKeys)},decryptBlock:function(y,x){this._doCryptBlock(y,x,this._invSubKeys)},_doCryptBlock:function(y,x,T){this._lBlock=y[x],this._rBlock=y[x+1],h.call(this,4,252645135),h.call(this,16,65535),b.call(this,2,858993459),b.call(this,8,16711935),h.call(this,1,1431655765);for(var M=0;M<16;M++){for(var k=T[M],R=this._lBlock,C=this._rBlock,q=0,L=0;L<8;L++)q|=u[L][((C^k[L])&f[L])>>>0];this._lBlock=C,this._rBlock=R^q}var j=this._lBlock;this._lBlock=this._rBlock,this._rBlock=j,h.call(this,1,1431655765),b.call(this,8,16711935),b.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),y[x]=this._lBlock,y[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function h(y,x){var T=(this._lBlock>>>y^this._rBlock)&x;this._rBlock^=T,this._lBlock^=T<<y}function b(y,x){var T=(this._rBlock>>>y^this._lBlock)&x;this._lBlock^=T,this._rBlock^=T<<y}t.DES=i._createHelper(d);var g=s.TripleDES=i.extend({_doReset:function(){var y=this._key,x=y.words;this._des1=d.createEncryptor(n.create(x.slice(0,2))),this._des2=d.createEncryptor(n.create(x.slice(2,4))),this._des3=d.createEncryptor(n.create(x.slice(4,6)))},encryptBlock:function(y,x){this._des1.encryptBlock(y,x),this._des2.decryptBlock(y,x),this._des3.encryptBlock(y,x)},decryptBlock:function(y,x){this._des3.decryptBlock(y,x),this._des2.encryptBlock(y,x),this._des1.decryptBlock(y,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});t.TripleDES=i._createHelper(g)}(),e.TripleDES})});var Og=K((Nf,Ig)=>{E();P();(function(e,t,r){typeof Nf=="object"?Ig.exports=Nf=t(ze(),No(),Co(),Ks(),Tr()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)})(Nf,function(e){return function(){var t=e,r=t.lib,n=r.StreamCipher,i=t.algo,s=i.RC4=n.extend({_doReset:function(){for(var c=this._key,u=c.words,f=c.sigBytes,d=this._S=[],h=0;h<256;h++)d[h]=h;for(var h=0,b=0;h<256;h++){var g=h%f,y=u[g>>>2]>>>24-g%4*8&255;b=(b+d[h]+y)%256;var x=d[h];d[h]=d[b],d[b]=x}this._i=this._j=0},_doProcessBlock:function(c,u){c[u]^=o.call(this)},keySize:256/32,ivSize:0});function o(){for(var c=this._S,u=this._i,f=this._j,d=0,h=0;h<4;h++){u=(u+1)%256,f=(f+c[u])%256;var b=c[u];c[u]=c[f],c[f]=b,d|=c[(c[u]+c[f])%256]<<24-h*8}return this._i=u,this._j=f,d}t.RC4=n._createHelper(s);var a=i.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)o.call(this)}});t.RC4Drop=n._createHelper(a)}(),e.RC4})});var Mg=K((Cf,Bg)=>{E();P();(function(e,t,r){typeof Cf=="object"?Bg.exports=Cf=t(ze(),No(),Co(),Ks(),Tr()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)})(Cf,function(e){return function(){var t=e,r=t.lib,n=r.StreamCipher,i=t.algo,s=[],o=[],a=[],c=i.Rabbit=n.extend({_doReset:function(){for(var f=this._key.words,d=this.cfg.iv,h=0;h<4;h++)f[h]=(f[h]<<8|f[h]>>>24)&16711935|(f[h]<<24|f[h]>>>8)&4278255360;var b=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var h=0;h<4;h++)u.call(this);for(var h=0;h<8;h++)g[h]^=b[h+4&7];if(d){var y=d.words,x=y[0],T=y[1],M=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,k=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,R=M>>>16|k&4294901760,C=k<<16|M&65535;g[0]^=M,g[1]^=R,g[2]^=k,g[3]^=C,g[4]^=M,g[5]^=R,g[6]^=k,g[7]^=C;for(var h=0;h<4;h++)u.call(this)}},_doProcessBlock:function(f,d){var h=this._X;u.call(this),s[0]=h[0]^h[5]>>>16^h[3]<<16,s[1]=h[2]^h[7]>>>16^h[5]<<16,s[2]=h[4]^h[1]>>>16^h[7]<<16,s[3]=h[6]^h[3]>>>16^h[1]<<16;for(var b=0;b<4;b++)s[b]=(s[b]<<8|s[b]>>>24)&16711935|(s[b]<<24|s[b]>>>8)&4278255360,f[d+b]^=s[b]},blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,d=this._C,h=0;h<8;h++)o[h]=d[h];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<o[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<o[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<o[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<o[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<o[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<o[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<o[6]>>>0?1:0)|0,this._b=d[7]>>>0<o[7]>>>0?1:0;for(var h=0;h<8;h++){var b=f[h]+d[h],g=b&65535,y=b>>>16,x=((g*g>>>17)+g*y>>>15)+y*y,T=((b&4294901760)*b|0)+((b&65535)*b|0);a[h]=x^T}f[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,f[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,f[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,f[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,f[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,f[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,f[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,f[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.Rabbit=n._createHelper(c)}(),e.Rabbit})});var kg=K((qf,Hg)=>{E();P();(function(e,t,r){typeof qf=="object"?Hg.exports=qf=t(ze(),No(),Co(),Ks(),Tr()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)})(qf,function(e){return function(){var t=e,r=t.lib,n=r.StreamCipher,i=t.algo,s=[],o=[],a=[],c=i.RabbitLegacy=n.extend({_doReset:function(){var f=this._key.words,d=this.cfg.iv,h=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],b=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)b[g]^=h[g+4&7];if(d){var y=d.words,x=y[0],T=y[1],M=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,k=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,R=M>>>16|k&4294901760,C=k<<16|M&65535;b[0]^=M,b[1]^=R,b[2]^=k,b[3]^=C,b[4]^=M,b[5]^=R,b[6]^=k,b[7]^=C;for(var g=0;g<4;g++)u.call(this)}},_doProcessBlock:function(f,d){var h=this._X;u.call(this),s[0]=h[0]^h[5]>>>16^h[3]<<16,s[1]=h[2]^h[7]>>>16^h[5]<<16,s[2]=h[4]^h[1]>>>16^h[7]<<16,s[3]=h[6]^h[3]>>>16^h[1]<<16;for(var b=0;b<4;b++)s[b]=(s[b]<<8|s[b]>>>24)&16711935|(s[b]<<24|s[b]>>>8)&4278255360,f[d+b]^=s[b]},blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,d=this._C,h=0;h<8;h++)o[h]=d[h];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<o[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<o[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<o[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<o[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<o[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<o[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<o[6]>>>0?1:0)|0,this._b=d[7]>>>0<o[7]>>>0?1:0;for(var h=0;h<8;h++){var b=f[h]+d[h],g=b&65535,y=b>>>16,x=((g*g>>>17)+g*y>>>15)+y*y,T=((b&4294901760)*b|0)+((b&65535)*b|0);a[h]=x^T}f[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,f[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,f[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,f[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,f[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,f[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,f[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,f[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.RabbitLegacy=n._createHelper(c)}(),e.RabbitLegacy})});var Kl=K((Rf,Ng)=>{E();P();(function(e,t,r){typeof Rf=="object"?Ng.exports=Rf=t(ze(),qc(),Cb(),Rb(),No(),Co(),uf(),jl(),Fb(),Dl(),Vb(),$b(),Yb(),yf(),Qb(),Ks(),Tr(),ng(),sg(),ag(),ug(),dg(),hg(),bg(),yg(),mg(),xg(),Sg(),Pg(),Ag(),Og(),Mg(),kg()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],t):e.CryptoJS=t(e.CryptoJS)})(Rf,function(e){return e})});var Cg=K(Nn=>{"use strict";E();P();var l_=Nn&&Nn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),h_=Nn&&Nn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),p_=Nn&&Nn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&l_(t,e,r);return h_(t,e),t};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.decrypt=Nn.encrypt=void 0;var ps=p_(Kl());function b_(e,t){let r=ps.enc.Utf8.parse(t);return ps.AES.encrypt(e,r,{iv:r,mode:ps.mode.CBC,padding:ps.pad.Pkcs7}).toString()}Nn.encrypt=b_;function g_(e,t){let r=ps.enc.Utf8.parse(t);return ps.AES.decrypt(e,r,{iv:r,mode:ps.mode.CBC,padding:ps.pad.Pkcs7}).toString(ps.enc.Utf8)}Nn.decrypt=g_});var Rg=K(pt=>{"use strict";E();P();var y_=pt&&pt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),v_=pt&&pt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),m_=pt&&pt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&y_(t,e,r);return v_(t,e),t};Object.defineProperty(pt,"__esModule",{value:!0});pt.wrapPEM=pt.unwrapPEM=pt.covertPublicKeyFromPkcs8ToPkcs1=pt.covertPublicKeyFromPkcs8ToPkix=pt.genKeyPair=pt.decodeAny=pt.encodeAny=pt.decode=pt.encode=void 0;var Ke=m_(N1()),w_=Ke.BigInteger,Uf=Bl(),x_=Ml();function Fl(e,t){let r=Ke.KJUR.crypto.Cipher.encrypt(e,t,"RSA");return(0,Uf.fromHex)(r)}pt.encode=Fl;function Wl(e,t){return Ke.KJUR.crypto.Cipher.decrypt(e,t,"RSA")}pt.decode=Wl;function __(e,t){let r=T_(t),n=Math.floor((r.n.bitLength()+7)/8),i=e.length,s=0,o=n-11,a=[];for(;;){if(s+o>=i){let u=Fl(e.slice(s),r);a.push(u);break}let c=Fl(e.slice(s,s+o),r);a.push(c),s+=o}return Ke.hextob64((0,Uf.toHex)(m.Buffer.concat(a)))}pt.encodeAny=__;function S_(e,t){let r=Ke.RSAKey.getHexValueArrayOfChildrenFromHex(Ke.b64tohex(t)),n=new Ke.RSAKey;n.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8]);let i=Math.floor((n.n.bitLength()+7)/8),s=(0,x_.fromBase64)(e),o=s.length,a=0,c=[];for(;;){if(a+i>=o){let f=Wl((0,Uf.toHex)(s.slice(a)),n);c.push(f);break}let u=Wl((0,Uf.toHex)(s.slice(a,a+i)),n);c.push(u),a+=i}return c.join("")}pt.decodeAny=S_;function E_(e){let t=Ke.KEYUTIL.generateKeypair("RSA",e),r=Ke.KEYUTIL.getPEM(t.prvKeyObj,"PKCS1PRV"),n=Ke.KEYUTIL.getPEM(t.pubKeyObj),i=qg(zl(n,!0));return{privateKey:zl(r,!1),publicKey:i}}pt.genKeyPair=E_;function P_(e){let t=Ke.KEYUTIL.getKey(Vl(e,!0)),r=new Ke.KJUR.asn1.DERSequence({array:[new Ke.KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new Ke.KJUR.asn1.DERNull]}),n=new Ke.KJUR.asn1.DERSequence({array:[new Ke.KJUR.asn1.DERInteger({bigint:t.n}),new Ke.KJUR.asn1.DERInteger({int:t.e})]}),i=new Ke.KJUR.asn1.DERBitString({hex:"00"+n.getEncodedHex()}),s=new Ke.KJUR.asn1.DERSequence({array:[r,i]});return Ke.hextob64(s.getEncodedHex())}pt.covertPublicKeyFromPkcs8ToPkix=P_;function qg(e){let t=Ke.KEYUTIL.getKey(Vl(e,!0)),r=new Ke.KJUR.asn1.DERSequence({array:[new Ke.KJUR.asn1.DERInteger({bigint:t.n}),new Ke.KJUR.asn1.DERInteger({int:t.e})]});return Ke.hextob64(r.getEncodedHex())}pt.covertPublicKeyFromPkcs8ToPkcs1=qg;function T_(e){let t=Ke.b64tohex(e);if(!Ke.ASN1HEX.isASN1HEX(t))throw new Error("keyHex is not ASN.1 hex string");let r=Ke.ASN1HEX.getChildIdx(t,0),n=new Ke.RSAKey,i=Ke.ASN1HEX.getV(t,r[0]);n.n=new w_(i,16);let s=Ke.ASN1HEX.getV(t,r[1]);return n.e=parseInt(s,16),n.isPublic=!0,n.isPrivate=!1,n}function zl(e,t){let r=t?"PUBLIC KEY":"RSA PRIVATE KEY";return Ke.hextob64(Ke.pemtohex(e,r))}pt.unwrapPEM=zl;function Vl(e,t){let r=t?"PUBLIC KEY":"RSA PRIVATE KEY";return Ke.hextopem(Ke.b64tohex(e),r)}pt.wrapPEM=Vl});var $l=K(st=>{"use strict";E();P();var A_=st&&st.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),I_=st&&st.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Lg=st&&st.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&A_(t,e,r);return I_(t,e),t};Object.defineProperty(st,"__esModule",{value:!0});st.blake2s=st.compress=st.IV=void 0;var O_=Lg(pa()),Ug=Lg($u()),Ri=Ur();st.IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);function Fs(e,t,r,n,i){return e=e+t+i|0,n=(0,Ri.rotr)(n^e,16),r=r+n|0,t=(0,Ri.rotr)(t^r,12),{a:e,b:t,c:r,d:n}}function Ws(e,t,r,n,i){return e=e+t+i|0,n=(0,Ri.rotr)(n^e,8),r=r+n|0,t=(0,Ri.rotr)(t^r,7),{a:e,b:t,c:r,d:n}}function jg(e,t,r,n,i,s,o,a,c,u,f,d,h,b,g,y,x,T,M,k){let R=0;for(let C=0;C<n;C++)({a:i,b:c,c:h,d:x}=Fs(i,c,h,x,r[t+e[R++]])),{a:i,b:c,c:h,d:x}=Ws(i,c,h,x,r[t+e[R++]]),{a:s,b:u,c:b,d:T}=Fs(s,u,b,T,r[t+e[R++]]),{a:s,b:u,c:b,d:T}=Ws(s,u,b,T,r[t+e[R++]]),{a:o,b:f,c:g,d:M}=Fs(o,f,g,M,r[t+e[R++]]),{a:o,b:f,c:g,d:M}=Ws(o,f,g,M,r[t+e[R++]]),{a,b:d,c:y,d:k}=Fs(a,d,y,k,r[t+e[R++]]),{a,b:d,c:y,d:k}=Ws(a,d,y,k,r[t+e[R++]]),{a:i,b:u,c:g,d:k}=Fs(i,u,g,k,r[t+e[R++]]),{a:i,b:u,c:g,d:k}=Ws(i,u,g,k,r[t+e[R++]]),{a:s,b:f,c:y,d:x}=Fs(s,f,y,x,r[t+e[R++]]),{a:s,b:f,c:y,d:x}=Ws(s,f,y,x,r[t+e[R++]]),{a:o,b:d,c:h,d:T}=Fs(o,d,h,T,r[t+e[R++]]),{a:o,b:d,c:h,d:T}=Ws(o,d,h,T,r[t+e[R++]]),{a,b:c,c:b,d:M}=Fs(a,c,b,M,r[t+e[R++]]),{a,b:c,c:b,d:M}=Ws(a,c,b,M,r[t+e[R++]]);return{v0:i,v1:s,v2:o,v3:a,v4:c,v5:u,v6:f,v7:d,v8:h,v9:b,v10:g,v11:y,v12:x,v13:T,v14:M,v15:k}}st.compress=jg;var Gl=class extends Ug.BLAKE2{constructor(t={}){super(64,t.dkLen===void 0?32:t.dkLen,t,32,8,8),this.v0=st.IV[0]|0,this.v1=st.IV[1]|0,this.v2=st.IV[2]|0,this.v3=st.IV[3]|0,this.v4=st.IV[4]|0,this.v5=st.IV[5]|0,this.v6=st.IV[6]|0,this.v7=st.IV[7]|0;let r=t.key?t.key.length:0;if(this.v0^=this.outputLen|r<<8|1<<16|1<<24,t.salt){let n=(0,Ri.u32)((0,Ri.toBytes)(t.salt));this.v4^=n[0],this.v5^=n[1]}if(t.personalization){let n=(0,Ri.u32)((0,Ri.toBytes)(t.personalization));this.v6^=n[0],this.v7^=n[1]}if(t.key){let n=new Uint8Array(this.blockLen);n.set((0,Ri.toBytes)(t.key)),this.update(n)}}get(){let{v0:t,v1:r,v2:n,v3:i,v4:s,v5:o,v6:a,v7:c}=this;return[t,r,n,i,s,o,a,c]}set(t,r,n,i,s,o,a,c){this.v0=t|0,this.v1=r|0,this.v2=n|0,this.v3=i|0,this.v4=s|0,this.v5=o|0,this.v6=a|0,this.v7=c|0}compress(t,r,n){let{h:i,l:s}=O_.fromBig(BigInt(this.length)),{v0:o,v1:a,v2:c,v3:u,v4:f,v5:d,v6:h,v7:b,v8:g,v9:y,v10:x,v11:T,v12:M,v13:k,v14:R,v15:C}=jg(Ug.SIGMA,r,t,10,this.v0,this.v1,this.v2,this.v3,this.v4,this.v5,this.v6,this.v7,st.IV[0],st.IV[1],st.IV[2],st.IV[3],s^st.IV[4],i^st.IV[5],n?~st.IV[6]:st.IV[6],st.IV[7]);this.v0^=o^g,this.v1^=a^y,this.v2^=c^x,this.v3^=u^T,this.v4^=f^M,this.v5^=d^k,this.v6^=h^R,this.v7^=b^C}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0)}};st.blake2s=(0,Ri.wrapConstructorWithOpts)(e=>new Gl(e))});var Lf=K(Pa=>{"use strict";E();P();Object.defineProperty(Pa,"__esModule",{value:!0});Pa.pbkdf2Async=Pa.pbkdf2=void 0;var B_=Cc(),Ui=Ur();function Dg(e,t,r,n){(0,Ui.assertHash)(e);let i=(0,Ui.checkOpts)({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if((0,Ui.assertNumber)(s),(0,Ui.assertNumber)(o),(0,Ui.assertNumber)(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let c=(0,Ui.toBytes)(t),u=(0,Ui.toBytes)(r),f=new Uint8Array(o),d=B_.hmac.create(e,c),h=d._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:f,PRF:d,PRFSalt:h}}function Kg(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}function M_(e,t,r,n){let{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:c}=Dg(e,t,r,n),u,f=new Uint8Array(4),d=(0,Ui.createView)(f),h=new Uint8Array(a.outputLen);for(let b=1,g=0;g<s;b++,g+=a.outputLen){let y=o.subarray(g,g+a.outputLen);d.setInt32(0,b,!1),(u=c._cloneInto(u)).update(f).digestInto(h),y.set(h.subarray(0,y.length));for(let x=1;x<i;x++){a._cloneInto(u).update(h).digestInto(h);for(let T=0;T<y.length;T++)y[T]^=h[T]}}return Kg(a,c,o,u,h)}Pa.pbkdf2=M_;async function H_(e,t,r,n){let{c:i,dkLen:s,asyncTick:o,DK:a,PRF:c,PRFSalt:u}=Dg(e,t,r,n),f,d=new Uint8Array(4),h=(0,Ui.createView)(d),b=new Uint8Array(c.outputLen);for(let g=1,y=0;y<s;g++,y+=c.outputLen){let x=a.subarray(y,y+c.outputLen);h.setInt32(0,g,!1),(f=u._cloneInto(f)).update(d).digestInto(b),x.set(b.subarray(0,x.length)),await(0,Ui.asyncLoop)(i-1,o,T=>{c._cloneInto(f).update(b).digestInto(b);for(let M=0;M<x.length;M++)x[M]^=b[M]})}return Kg(c,u,a,f,b)}Pa.pbkdf2Async=H_});var $g=K(Aa=>{"use strict";E();P();Object.defineProperty(Aa,"__esModule",{value:!0});Aa.scryptAsync=Aa.scrypt=void 0;var Wg=ha(),zg=Lf(),Cn=Ur(),tt=(e,t)=>e<<t|e>>>32-t;function Fg(e,t,r,n,i,s){let o=e[t++]^r[n++],a=e[t++]^r[n++],c=e[t++]^r[n++],u=e[t++]^r[n++],f=e[t++]^r[n++],d=e[t++]^r[n++],h=e[t++]^r[n++],b=e[t++]^r[n++],g=e[t++]^r[n++],y=e[t++]^r[n++],x=e[t++]^r[n++],T=e[t++]^r[n++],M=e[t++]^r[n++],k=e[t++]^r[n++],R=e[t++]^r[n++],C=e[t++]^r[n++],q=o,L=a,j=c,G=u,B=f,l=d,w=h,_=b,v=g,S=y,H=x,U=T,O=M,p=k,A=R,F=C;for(let W=0;W<8;W+=2)B^=tt(q+O|0,7),v^=tt(B+q|0,9),O^=tt(v+B|0,13),q^=tt(O+v|0,18),S^=tt(l+L|0,7),p^=tt(S+l|0,9),L^=tt(p+S|0,13),l^=tt(L+p|0,18),A^=tt(H+w|0,7),j^=tt(A+H|0,9),w^=tt(j+A|0,13),H^=tt(w+j|0,18),G^=tt(F+U|0,7),_^=tt(G+F|0,9),U^=tt(_+G|0,13),F^=tt(U+_|0,18),L^=tt(q+G|0,7),j^=tt(L+q|0,9),G^=tt(j+L|0,13),q^=tt(G+j|0,18),w^=tt(l+B|0,7),_^=tt(w+l|0,9),B^=tt(_+w|0,13),l^=tt(B+_|0,18),U^=tt(H+S|0,7),v^=tt(U+H|0,9),S^=tt(v+U|0,13),H^=tt(S+v|0,18),O^=tt(F+A|0,7),p^=tt(O+F|0,9),A^=tt(p+O|0,13),F^=tt(A+p|0,18);i[s++]=o+q|0,i[s++]=a+L|0,i[s++]=c+j|0,i[s++]=u+G|0,i[s++]=f+B|0,i[s++]=d+l|0,i[s++]=h+w|0,i[s++]=b+_|0,i[s++]=g+v|0,i[s++]=y+S|0,i[s++]=x+H|0,i[s++]=T+U|0,i[s++]=M+O|0,i[s++]=k+p|0,i[s++]=R+A|0,i[s++]=C+F|0}function Ta(e,t,r,n,i){let s=n+0,o=n+16*i;for(let a=0;a<16;a++)r[o+a]=e[t+(2*i-1)*16+a];for(let a=0;a<i;a++,s+=16,t+=16)Fg(r,o,e,t,r,s),a>0&&(o+=16),Fg(r,s,e,t+=16,r,o)}function Vg(e,t,r){let n=(0,Cn.checkOpts)({dkLen:32,asyncTick:10,maxmem:1073742848},r),{N:i,r:s,p:o,dkLen:a,asyncTick:c,maxmem:u,onProgress:f}=n;if((0,Cn.assertNumber)(i),(0,Cn.assertNumber)(s),(0,Cn.assertNumber)(o),(0,Cn.assertNumber)(a),(0,Cn.assertNumber)(c),(0,Cn.assertNumber)(u),f!==void 0&&typeof f!="function")throw new Error("progressCb should be function");let d=128*s,h=d/4;if(i<=1||(i&i-1)!==0||i>=2**(d/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/d)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");let b=d*(i+o);if(b>u)throw new Error(`Scrypt: parameters too large, ${b} (128 * r * (N + p)) > ${u} (maxmem)`);let g=(0,zg.pbkdf2)(Wg.sha256,e,t,{c:1,dkLen:d*o}),y=(0,Cn.u32)(g),x=(0,Cn.u32)(new Uint8Array(d*i)),T=(0,Cn.u32)(new Uint8Array(d)),M=()=>{};if(f){let k=2*i*o,R=Math.max(Math.floor(k/1e4),1),C=0;M=()=>{C++,f&&(!(C%R)||C===k)&&f(C/k)}}return{N:i,r:s,p:o,dkLen:a,blockSize32:h,V:x,B32:y,B:g,tmp:T,blockMixCb:M,asyncTick:c}}function Gg(e,t,r,n,i){let s=(0,zg.pbkdf2)(Wg.sha256,e,r,{c:1,dkLen:t});return r.fill(0),n.fill(0),i.fill(0),s}function k_(e,t,r){let{N:n,r:i,p:s,dkLen:o,blockSize32:a,V:c,B32:u,B:f,tmp:d,blockMixCb:h}=Vg(e,t,r);for(let b=0;b<s;b++){let g=a*b;for(let y=0;y<a;y++)c[y]=u[g+y];for(let y=0,x=0;y<n-1;y++)Ta(c,x,c,x+=a,i),h();Ta(c,(n-1)*a,u,g,i),h();for(let y=0;y<n;y++){let x=u[g+a-16]%n;for(let T=0;T<a;T++)d[T]=u[g+T]^c[x*a+T];Ta(d,0,u,g,i),h()}}return Gg(e,o,f,c,d)}Aa.scrypt=k_;async function N_(e,t,r){let{N:n,r:i,p:s,dkLen:o,blockSize32:a,V:c,B32:u,B:f,tmp:d,blockMixCb:h,asyncTick:b}=Vg(e,t,r);for(let g=0;g<s;g++){let y=a*g;for(let T=0;T<a;T++)c[T]=u[y+T];let x=0;await(0,Cn.asyncLoop)(n-1,b,T=>{Ta(c,x,c,x+=a,i),h()}),Ta(c,(n-1)*a,u,y,i),h(),await(0,Cn.asyncLoop)(n,b,T=>{let M=u[y+a-16]%n;for(let k=0;k<a;k++)d[k]=u[y+k]^c[M*a+k];Ta(d,0,u,y,i),h()})}return Gg(e,o,f,c,d)}Aa.scryptAsync=N_});var Zg=K(Li=>{"use strict";E();P();var C_=Li&&Li.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),q_=Li&&Li.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Xl=Li&&Li.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&C_(t,e,r);return q_(t,e),t};Object.defineProperty(Li,"__esModule",{value:!0});Li.blake3=void 0;var Xg=Xl(pa()),R_=Xl($u()),wi=Xl($l()),qo=Ur(),qn;(function(e){e[e.CHUNK_START=1]="CHUNK_START",e[e.CHUNK_END=2]="CHUNK_END",e[e.PARENT=4]="PARENT",e[e.ROOT=8]="ROOT",e[e.KEYED_HASH=16]="KEYED_HASH",e[e.DERIVE_KEY_CONTEXT=32]="DERIVE_KEY_CONTEXT",e[e.DERIVE_KEY_MATERIAL=64]="DERIVE_KEY_MATERIAL"})(qn||(qn={}));var Yg=(()=>{let e=Array.from({length:16},(n,i)=>i),t=n=>[2,6,3,10,7,0,4,13,1,11,12,5,9,14,15,8].map(i=>n[i]),r=[];for(let n=0,i=e;n<7;n++,i=t(i))r.push(...i);return Uint8Array.from(r)})(),Rc=class extends R_.BLAKE2{constructor(t={},r=0){if(super(64,t.dkLen===void 0?32:t.dkLen,{},Number.MAX_SAFE_INTEGER,0,0),this.flags=0,this.chunkPos=0,this.chunksDone=0,this.stack=[],this.posOut=0,this.bufferOut32=new Uint32Array(16),this.chunkOut=0,this.enableXOF=!0,this.outputLen=t.dkLen===void 0?32:t.dkLen,(0,qo.assertNumber)(this.outputLen),t.key!==void 0&&t.context!==void 0)throw new Error("Blake3: only key or context can be specified at same time");if(t.key!==void 0){let n=(0,qo.toBytes)(t.key);if(n.length!==32)throw new Error("Blake3: key should be 32 byte");this.IV=(0,qo.u32)(n),this.flags=r|qn.KEYED_HASH}else if(t.context!==void 0){let n=new Rc({dkLen:32},qn.DERIVE_KEY_CONTEXT).update(t.context).digest();this.IV=(0,qo.u32)(n),this.flags=r|qn.DERIVE_KEY_MATERIAL}else this.IV=wi.IV.slice(),this.flags=r;this.state=this.IV.slice(),this.bufferOut=(0,qo.u8)(this.bufferOut32)}get(){return[]}set(){}b2Compress(t,r,n,i=0){let{state:s,pos:o}=this,{h:a,l:c}=Xg.fromBig(BigInt(t),!0),{v0:u,v1:f,v2:d,v3:h,v4:b,v5:g,v6:y,v7:x,v8:T,v9:M,v10:k,v11:R,v12:C,v13:q,v14:L,v15:j}=wi.compress(Yg,i,n,7,s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],wi.IV[0],wi.IV[1],wi.IV[2],wi.IV[3],a,c,o,r);s[0]=u^T,s[1]=f^M,s[2]=d^k,s[3]=h^R,s[4]=b^C,s[5]=g^q,s[6]=y^L,s[7]=x^j}compress(t,r=0,n=!1){let i=this.flags;if(this.chunkPos||(i|=qn.CHUNK_START),(this.chunkPos===15||n)&&(i|=qn.CHUNK_END),n||(this.pos=this.blockLen),this.b2Compress(this.chunksDone,i,t,r),this.chunkPos+=1,this.chunkPos===16||n){let s=this.state;this.state=this.IV.slice();for(let o,a=this.chunksDone+1;(n||!(a&1))&&(o=this.stack.pop());a>>=1)this.buffer32.set(o,0),this.buffer32.set(s,8),this.pos=this.blockLen,this.b2Compress(0,this.flags|qn.PARENT,this.buffer32,0),s=this.state,this.state=this.IV.slice();this.chunksDone++,this.chunkPos=0,this.stack.push(s)}this.pos=0}_cloneInto(t){t=super._cloneInto(t);let{IV:r,flags:n,state:i,chunkPos:s,posOut:o,chunkOut:a,stack:c,chunksDone:u}=this;return t.state.set(i.slice()),t.stack=c.map(f=>Uint32Array.from(f)),t.IV.set(r),t.flags=n,t.chunkPos=s,t.chunksDone=u,t.posOut=o,t.chunkOut=a,t.enableXOF=this.enableXOF,t.bufferOut32.set(this.bufferOut32),t}destroy(){this.destroyed=!0,this.state.fill(0),this.buffer32.fill(0),this.IV.fill(0),this.bufferOut32.fill(0);for(let t of this.stack)t.fill(0)}b2CompressOut(){let{state:t,pos:r,flags:n,buffer32:i,bufferOut32:s}=this,{h:o,l:a}=Xg.fromBig(BigInt(this.chunkOut++)),{v0:c,v1:u,v2:f,v3:d,v4:h,v5:b,v6:g,v7:y,v8:x,v9:T,v10:M,v11:k,v12:R,v13:C,v14:q,v15:L}=wi.compress(Yg,0,i,7,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],wi.IV[0],wi.IV[1],wi.IV[2],wi.IV[3],a,o,r,n);s[0]=c^x,s[1]=u^T,s[2]=f^M,s[3]=d^k,s[4]=h^R,s[5]=b^C,s[6]=g^q,s[7]=y^L,s[8]=t[0]^x,s[9]=t[1]^T,s[10]=t[2]^M,s[11]=t[3]^k,s[12]=t[4]^R,s[13]=t[5]^C,s[14]=t[6]^q,s[15]=t[7]^L,this.posOut=0}finish(){if(this.finished)return;this.finished=!0,this.buffer.fill(0,this.pos);let t=this.flags|qn.ROOT;this.stack.length?(t|=qn.PARENT,this.compress(this.buffer32,0,!0),this.chunksDone=0,this.pos=this.blockLen):t|=(this.chunkPos?0:qn.CHUNK_START)|qn.CHUNK_END,this.flags=t,this.b2CompressOut()}writeInto(t){if(this.destroyed)throw new Error("instance is destroyed");if(!(t instanceof Uint8Array))throw new Error("Blake3: Invalid output buffer");this.finish();let{blockLen:r,bufferOut:n}=this;for(let i=0,s=t.length;i<s;){this.posOut>=r&&this.b2CompressOut();let o=Math.min(this.blockLen-this.posOut,s-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF impossible after digest call");return this.writeInto(t)}xof(t){return(0,qo.assertNumber)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(t.length<this.outputLen)throw new Error("Blake3: Invalid output buffer");if(this.finished)throw new Error("digest() was already called");return this.enableXOF=!1,this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}};Li.blake3=(0,qo.wrapConstructorWithOpts)(e=>new Rc(e))});var Ro=K(xe=>{"use strict";E();P();var Jg=xe&&xe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),U_=xe&&xe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),zt=xe&&xe.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Jg(t,e,r)},Uc=xe&&xe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Jg(t,e,r);return U_(t,e),t};Object.defineProperty(xe,"__esModule",{value:!0});xe.randomBytes=xe.concatBytes=xe.reverseBuffer=xe.rsa=xe.aes=xe.md5=xe.rlp=void 0;zt(Z1(),xe);zt(gb(),xe);zt(yb(),xe);zt(Bl(),xe);zt(Ml(),xe);zt(kc(),xe);zt(xb(),xe);zt(_b(),xe);zt(Eb(),xe);zt(kl(),xe);xe.rlp=Uc(Ob());zt(Bb(),xe);xe.md5=Uc(Mb());xe.aes=Uc(Cg());xe.rsa=Uc(Rg());zt(Bo(),xe);zt(ha(),xe);zt(Cc(),xe);zt(Tl(),xe);zt(Fu(),xe);zt(Gu(),xe);zt(Ol(),xe);zt($l(),xe);zt(Lf(),xe);zt($g(),xe);zt(Zg(),xe);var L_=Uc(Ur()),j_=j4();function D_(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}xe.reverseBuffer=D_;function K_(e,t){return L_.concatBytes(Uint8Array.from(e),Uint8Array.from(t))}xe.concatBytes=K_;function F_(e){return j_(e)}xe.randomBytes=F_});var Rn=K(Qg=>{"use strict";E();P();var xi=Qg,W_=mr(),z_=K4(),jf=W4();xi.assert=z_;xi.toArray=jf.toArray;xi.zero2=jf.zero2;xi.toHex=jf.toHex;xi.encode=jf.encode;function V_(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,s=e.clone(),o=0;o<n.length;o++){var a,c=s.andln(i-1);s.isOdd()?(c>(i>>1)-1?a=(i>>1)-c:a=c,s.isubn(a)):a=0,n[o]=a,s.iushrn(1)}return n}xi.getNAF=V_;function G_(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n=0,i=0,s;e.cmpn(-n)>0||t.cmpn(-i)>0;){var o=e.andln(3)+n&3,a=t.andln(3)+i&3;o===3&&(o=-1),a===3&&(a=-1);var c;(o&1)===0?c=0:(s=e.andln(7)+n&7,(s===3||s===5)&&a===2?c=-o:c=o),r[0].push(c);var u;(a&1)===0?u=0:(s=t.andln(7)+i&7,(s===3||s===5)&&o===2?u=-a:u=a),r[1].push(u),2*n===c+1&&(n=1-n),2*i===u+1&&(i=1-i),e.iushrn(1),t.iushrn(1)}return r}xi.getJSF=G_;function $_(e,t,r){var n="_"+t;e.prototype[t]=function(){return this[n]!==void 0?this[n]:this[n]=r.call(this)}}xi.cachedProperty=$_;function X_(e){return typeof e=="string"?xi.toArray(e,"hex"):e}xi.parseBytes=X_;function Y_(e){return new W_(e,"hex","le")}xi.intFromLE=Y_});var jc=K((uR,e2)=>{"use strict";E();P();var Lc=Rn(),Uo=mr(),Df=Lc.getNAF,Z_=Lc.getJSF,Kf=Lc.assert;function zs(e,t){this.type=e,this.p=new Uo(t.p,16),this.red=t.prime?Uo.red(t.prime):Uo.mont(this.p),this.zero=new Uo(0).toRed(this.red),this.one=new Uo(1).toRed(this.red),this.two=new Uo(2).toRed(this.red),this.n=t.n&&new Uo(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}e2.exports=zs;zs.prototype.point=function(){throw new Error("Not implemented")};zs.prototype.validate=function(){throw new Error("Not implemented")};zs.prototype._fixedNafMul=function(t,r){Kf(t.precomputed);var n=t._getDoubles(),i=Df(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var u=a+n.step-1;u>=a;u--)c=(c<<1)+i[u];o.push(c)}for(var f=this.jpoint(null,null,null),d=this.jpoint(null,null,null),h=s;h>0;h--){for(a=0;a<o.length;a++)c=o[a],c===h?d=d.mixedAdd(n.points[a]):c===-h&&(d=d.mixedAdd(n.points[a].neg()));f=f.add(d)}return f.toP()};zs.prototype._wnafMul=function(t,r){var n=4,i=t._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Df(r,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var u=0;c>=0&&o[c]===0;c--)u++;if(c>=0&&u++,a=a.dblp(u),c<0)break;var f=o[c];Kf(f!==0),t.type==="affine"?f>0?a=a.mixedAdd(s[f-1>>1]):a=a.mixedAdd(s[-f-1>>1].neg()):f>0?a=a.add(s[f-1>>1]):a=a.add(s[-f-1>>1].neg())}return t.type==="affine"?a.toP():a};zs.prototype._wnafMulAdd=function(t,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,u=0,f,d,h;for(f=0;f<i;f++){h=r[f];var b=h._getNAFPoints(t);o[f]=b.wnd,a[f]=b.points}for(f=i-1;f>=1;f-=2){var g=f-1,y=f;if(o[g]!==1||o[y]!==1){c[g]=Df(n[g],o[g],this._bitLength),c[y]=Df(n[y],o[y],this._bitLength),u=Math.max(c[g].length,u),u=Math.max(c[y].length,u);continue}var x=[r[g],null,null,r[y]];r[g].y.cmp(r[y].y)===0?(x[1]=r[g].add(r[y]),x[2]=r[g].toJ().mixedAdd(r[y].neg())):r[g].y.cmp(r[y].y.redNeg())===0?(x[1]=r[g].toJ().mixedAdd(r[y]),x[2]=r[g].add(r[y].neg())):(x[1]=r[g].toJ().mixedAdd(r[y]),x[2]=r[g].toJ().mixedAdd(r[y].neg()));var T=[-3,-1,-5,-7,0,7,5,1,3],M=Z_(n[g],n[y]);for(u=Math.max(M[0].length,u),c[g]=new Array(u),c[y]=new Array(u),d=0;d<u;d++){var k=M[0][d]|0,R=M[1][d]|0;c[g][d]=T[(k+1)*3+(R+1)],c[y][d]=0,a[g]=x}}var C=this.jpoint(null,null,null),q=this._wnafT4;for(f=u;f>=0;f--){for(var L=0;f>=0;){var j=!0;for(d=0;d<i;d++)q[d]=c[d][f]|0,q[d]!==0&&(j=!1);if(!j)break;L++,f--}if(f>=0&&L++,C=C.dblp(L),f<0)break;for(d=0;d<i;d++){var G=q[d];G!==0&&(G>0?h=a[d][G-1>>1]:G<0&&(h=a[d][-G-1>>1].neg()),h.type==="affine"?C=C.mixedAdd(h):C=C.add(h))}}for(f=0;f<i;f++)a[f]=null;return s?C:C.toP()};function Un(e,t){this.curve=e,this.type=t,this.precomputed=null}zs.BasePoint=Un;Un.prototype.eq=function(){throw new Error("Not implemented")};Un.prototype.validate=function(){return this.curve.validate(this)};zs.prototype.decodePoint=function(t,r){t=Lc.toArray(t,r);var n=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*n){t[0]===6?Kf(t[t.length-1]%2===0):t[0]===7&&Kf(t[t.length-1]%2===1);var i=this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));return i}else if((t[0]===2||t[0]===3)&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),t[0]===3);throw new Error("Unknown point format")};Un.prototype.encodeCompressed=function(t){return this.encode(t,!0)};Un.prototype._encode=function(t){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Un.prototype.encode=function(t,r){return Lc.encode(this._encode(r),t)};Un.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this};Un.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1};Un.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=t){for(var o=0;o<t;o++)i=i.dbl();n.push(i)}return{step:t,points:n}};Un.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<t)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:t,points:r}};Un.prototype._getBeta=function(){return null};Un.prototype.dblp=function(t){for(var r=this,n=0;n<t;n++)r=r.dbl();return r}});var r2=K((lR,t2)=>{"use strict";E();P();var J_=Rn(),Vt=mr(),Yl=cl(),Ia=jc(),Q_=J_.assert;function Ln(e){Ia.call(this,"short",e),this.a=new Vt(e.a,16).toRed(this.red),this.b=new Vt(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Yl(Ln,Ia);t2.exports=Ln;Ln.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(t.beta)r=new Vt(t.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(t.lambda)n=new Vt(t.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],Q_(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return t.basis?o=t.basis.map(function(a){return{a:new Vt(a.a,16),b:new Vt(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};Ln.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:Vt.mont(t),n=new Vt(2).toRed(r).redInvm(),i=n.redNeg(),s=new Vt(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};Ln.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=t,i=this.n.clone(),s=new Vt(1),o=new Vt(0),a=new Vt(0),c=new Vt(1),u,f,d,h,b,g,y,x=0,T,M;n.cmpn(0)!==0;){var k=i.div(n);T=i.sub(k.mul(n)),M=a.sub(k.mul(s));var R=c.sub(k.mul(o));if(!d&&T.cmp(r)<0)u=y.neg(),f=s,d=T.neg(),h=M;else if(d&&++x===2)break;y=T,i=n,n=T,a=s,s=M,c=o,o=R}b=T.neg(),g=M;var C=d.sqr().add(h.sqr()),q=b.sqr().add(g.sqr());return q.cmp(C)>=0&&(b=u,g=f),d.negative&&(d=d.neg(),h=h.neg()),b.negative&&(b=b.neg(),g=g.neg()),[{a:d,b:h},{a:b,b:g}]};Ln.prototype._endoSplit=function(t){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(t).divRound(this.n),o=n.b.neg().mul(t).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),u=s.mul(n.b),f=o.mul(i.b),d=t.sub(a).sub(c),h=u.add(f).neg();return{k1:d,k2:h}};Ln.prototype.pointFromX=function(t,r){t=new Vt(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(t,i)};Ln.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,n=t.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};Ln.prototype._endoWnafMulAdd=function(t,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(r[o]),c=t[o],u=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),i[o*2]=c,i[o*2+1]=u,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var f=this._wnafMulAdd(1,i,s,o*2,n),d=0;d<o*2;d++)i[d]=null,s[d]=null;return f};function Ar(e,t,r,n){Ia.BasePoint.call(this,e,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Vt(t,16),this.y=new Vt(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Yl(Ar,Ia.BasePoint);Ln.prototype.point=function(t,r,n){return new Ar(this,t,r,n)};Ln.prototype.pointFromJSON=function(t,r){return Ar.fromJSON(this,t,r)};Ar.prototype._getBeta=function(){if(!!this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return r}};Ar.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Ar.fromJSON=function(t,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=t.point(r[0],r[1],n);if(!r[2])return i;function s(a){return t.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};Ar.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Ar.prototype.isInfinity=function(){return this.inf};Ar.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(t.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Ar.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=t.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};Ar.prototype.getX=function(){return this.x.fromRed()};Ar.prototype.getY=function(){return this.y.fromRed()};Ar.prototype.mul=function(t){return t=new Vt(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};Ar.prototype.mulAdd=function(t,r,n){var i=[this,r],s=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};Ar.prototype.jmulAdd=function(t,r,n){var i=[this,r],s=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};Ar.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Ar.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Ar.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function Lr(e,t,r,n){Ia.BasePoint.call(this,e,"jacobian"),t===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Vt(0)):(this.x=new Vt(t,16),this.y=new Vt(r,16),this.z=new Vt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Yl(Lr,Ia.BasePoint);Ln.prototype.jpoint=function(t,r,n){return new Lr(this,t,r,n)};Lr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(t);return this.curve.point(n,i)};Lr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Lr.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=t.x.redMul(n),o=this.y.redMul(r.redMul(t.z)),a=t.y.redMul(n.redMul(this.z)),c=i.redSub(s),u=o.redSub(a);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=c.redSqr(),d=f.redMul(c),h=i.redMul(f),b=u.redSqr().redIAdd(d).redISub(h).redISub(h),g=u.redMul(h.redISub(b)).redISub(o.redMul(d)),y=this.z.redMul(t.z).redMul(c);return this.curve.jpoint(b,g,y)};Lr.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=t.x.redMul(r),s=this.y,o=t.y.redMul(r).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),f=u.redMul(a),d=n.redMul(u),h=c.redSqr().redIAdd(f).redISub(d).redISub(d),b=c.redMul(d.redISub(h)).redISub(s.redMul(f)),g=this.z.redMul(a);return this.curve.jpoint(h,b,g)};Lr.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<t;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,u=c.redSqr().redSqr(),f=a.redAdd(a);for(r=0;r<t;r++){var d=o.redSqr(),h=f.redSqr(),b=h.redSqr(),g=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(u)),y=o.redMul(h),x=g.redSqr().redISub(y.redAdd(y)),T=y.redISub(x),M=g.redMul(T);M=M.redIAdd(M).redISub(b);var k=f.redMul(c);r+1<t&&(u=u.redMul(b)),o=x,c=k,f=M}return this.curve.jpoint(o,f.redMul(s),c)};Lr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Lr.prototype._zeroDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),u=c.redSqr().redISub(a).redISub(a),f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),t=u,r=c.redMul(a.redISub(u)).redISub(f),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),h=this.y.redSqr(),b=h.redSqr(),g=this.x.redAdd(h).redSqr().redISub(d).redISub(b);g=g.redIAdd(g);var y=d.redAdd(d).redIAdd(d),x=y.redSqr(),T=b.redIAdd(b);T=T.redIAdd(T),T=T.redIAdd(T),t=x.redISub(g).redISub(g),r=y.redMul(g.redISub(t)).redISub(T),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(t,r,n)};Lr.prototype._threeDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=c.redSqr().redISub(a).redISub(a);t=u;var f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),r=c.redMul(a.redISub(u)).redISub(f),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),h=this.y.redSqr(),b=this.x.redMul(h),g=this.x.redSub(d).redMul(this.x.redAdd(d));g=g.redAdd(g).redIAdd(g);var y=b.redIAdd(b);y=y.redIAdd(y);var x=y.redAdd(y);t=g.redSqr().redISub(x),n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(d);var T=h.redSqr();T=T.redIAdd(T),T=T.redIAdd(T),T=T.redIAdd(T),r=g.redMul(y.redISub(t)).redISub(T)}return this.curve.jpoint(t,r,n)};Lr.prototype._dbl=function(){var t=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(s)),u=r.redAdd(r);u=u.redIAdd(u);var f=u.redMul(a),d=c.redSqr().redISub(f.redAdd(f)),h=f.redISub(d),b=a.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var g=c.redMul(h).redISub(b),y=n.redAdd(n).redMul(i);return this.curve.jpoint(d,g,y)};Lr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=t.redAdd(t).redIAdd(t),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(t).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var f=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(u),d=r.redMul(f);d=d.redIAdd(d),d=d.redIAdd(d);var h=this.x.redMul(c).redISub(d);h=h.redIAdd(h),h=h.redIAdd(h);var b=this.y.redMul(f.redMul(u.redISub(f)).redISub(a.redMul(c)));b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var g=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(h,b,g)};Lr.prototype.mul=function(t,r){return t=new Vt(t,r),this.curve._wnafMul(this,t)};Lr.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),n=t.z.redSqr();if(this.x.redMul(n).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(i)).cmpn(0)===0};Lr.prototype.eqXToP=function(t){var r=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=t.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Lr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Lr.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var s2=K((bR,i2)=>{"use strict";E();P();var Oa=mr(),n2=cl(),Ff=jc(),e5=Rn();function Ba(e){Ff.call(this,"mont",e),this.a=new Oa(e.a,16).toRed(this.red),this.b=new Oa(e.b,16).toRed(this.red),this.i4=new Oa(4).toRed(this.red).redInvm(),this.two=new Oa(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}n2(Ba,Ff);i2.exports=Ba;Ba.prototype.validate=function(t){var r=t.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function Ir(e,t,r){Ff.BasePoint.call(this,e,"projective"),t===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Oa(t,16),this.z=new Oa(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}n2(Ir,Ff.BasePoint);Ba.prototype.decodePoint=function(t,r){return this.point(e5.toArray(t,r),1)};Ba.prototype.point=function(t,r){return new Ir(this,t,r)};Ba.prototype.pointFromJSON=function(t){return Ir.fromJSON(this,t)};Ir.prototype.precompute=function(){};Ir.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Ir.fromJSON=function(t,r){return new Ir(t,r[0],r[1]||t.one)};Ir.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ir.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Ir.prototype.dbl=function(){var t=this.x.redAdd(this.z),r=t.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),o=r.redMul(i),a=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};Ir.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Ir.prototype.diffAdd=function(t,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=t.x.redAdd(t.z),o=t.x.redSub(t.z),a=o.redMul(n),c=s.redMul(i),u=r.z.redMul(a.redAdd(c).redSqr()),f=r.x.redMul(a.redISub(c).redSqr());return this.curve.point(u,f)};Ir.prototype.mul=function(t){for(var r=t.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};Ir.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Ir.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Ir.prototype.eq=function(t){return this.getX().cmp(t.getX())===0};Ir.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Ir.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var c2=K((vR,a2)=>{"use strict";E();P();var t5=Rn(),bs=mr(),o2=cl(),Wf=jc(),r5=t5.assert;function ji(e){this.twisted=(e.a|0)!==1,this.mOneA=this.twisted&&(e.a|0)===-1,this.extended=this.mOneA,Wf.call(this,"edwards",e),this.a=new bs(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new bs(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new bs(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),r5(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(e.c|0)===1}o2(ji,Wf);a2.exports=ji;ji.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)};ji.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)};ji.prototype.jpoint=function(t,r,n,i){return this.point(t,r,n,i)};ji.prototype.pointFromX=function(t,r){t=new bs(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var c=a.fromRed().isOdd();return(r&&!c||!r&&c)&&(a=a.redNeg()),this.point(t,a)};ji.prototype.pointFromY=function(t,r){t=new bs(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,t)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,t)};ji.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var r=t.x.redSqr(),n=t.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function bt(e,t,r,n,i){Wf.BasePoint.call(this,e,"projective"),t===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new bs(t,16),this.y=new bs(r,16),this.z=n?new bs(n,16):this.curve.one,this.t=i&&new bs(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o2(bt,Wf.BasePoint);ji.prototype.pointFromJSON=function(t){return bt.fromJSON(this,t)};ji.prototype.point=function(t,r,n,i){return new bt(this,t,r,n,i)};bt.fromJSON=function(t,r){return new bt(t,r[0],r[1],r[2])};bt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};bt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};bt.prototype._extDbl=function(){var t=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(t),s=this.x.redAdd(this.y).redSqr().redISub(t).redISub(r),o=i.redAdd(r),a=o.redSub(n),c=i.redSub(r),u=s.redMul(a),f=o.redMul(c),d=s.redMul(c),h=a.redMul(o);return this.curve.point(u,f,h,d)};bt.prototype._projDbl=function(){var t=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,o,a,c,u;if(this.curve.twisted){a=this.curve._mulA(r);var f=a.redAdd(n);this.zOne?(i=t.redSub(r).redSub(n).redMul(f.redSub(this.curve.two)),s=f.redMul(a.redSub(n)),o=f.redSqr().redSub(f).redSub(f)):(c=this.z.redSqr(),u=f.redSub(c).redISub(c),i=t.redSub(r).redISub(n).redMul(u),s=f.redMul(a.redSub(n)),o=f.redMul(u))}else a=r.redAdd(n),c=this.curve._mulC(this.z).redSqr(),u=a.redSub(c).redSub(c),i=this.curve._mulC(t.redISub(a)).redMul(u),s=this.curve._mulC(a).redMul(r.redISub(n)),o=a.redMul(u);return this.curve.point(i,s,o)};bt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};bt.prototype._extAdd=function(t){var r=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),n=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),i=this.t.redMul(this.curve.dd).redMul(t.t),s=this.z.redMul(t.z.redAdd(t.z)),o=n.redSub(r),a=s.redSub(i),c=s.redAdd(i),u=n.redAdd(r),f=o.redMul(a),d=c.redMul(u),h=o.redMul(u),b=a.redMul(c);return this.curve.point(f,d,b,h)};bt.prototype._projAdd=function(t){var r=this.z.redMul(t.z),n=r.redSqr(),i=this.x.redMul(t.x),s=this.y.redMul(t.y),o=this.curve.d.redMul(i).redMul(s),a=n.redSub(o),c=n.redAdd(o),u=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(i).redISub(s),f=r.redMul(a).redMul(u),d,h;return this.curve.twisted?(d=r.redMul(c).redMul(s.redSub(this.curve._mulA(i))),h=a.redMul(c)):(d=r.redMul(c).redMul(s.redSub(i)),h=this.curve._mulC(a).redMul(c)),this.curve.point(f,d,h)};bt.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)};bt.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)};bt.prototype.mulAdd=function(t,r,n){return this.curve._wnafMulAdd(1,[this,r],[t,n],2,!1)};bt.prototype.jmulAdd=function(t,r,n){return this.curve._wnafMulAdd(1,[this,r],[t,n],2,!0)};bt.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this};bt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};bt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};bt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};bt.prototype.eq=function(t){return this===t||this.getX().cmp(t.getX())===0&&this.getY().cmp(t.getY())===0};bt.prototype.eqXToP=function(t){var r=t.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=t.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};bt.prototype.toP=bt.prototype.normalize;bt.prototype.mixedAdd=bt.prototype.add});var Zl=K(u2=>{"use strict";E();P();var zf=u2;zf.base=jc();zf.short=r2();zf.mont=s2();zf.edwards=c2()});var d2=K((ER,f2)=>{"use strict";E();P();f2.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var Vf=K(p2=>{"use strict";E();P();var Ql=p2,Vs=H1(),Jl=Zl(),n5=Rn(),l2=n5.assert;function h2(e){e.type==="short"?this.curve=new Jl.short(e):e.type==="edwards"?this.curve=new Jl.edwards(e):this.curve=new Jl.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,l2(this.g.validate(),"Invalid curve"),l2(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}Ql.PresetCurve=h2;function Gs(e,t){Object.defineProperty(Ql,e,{configurable:!0,enumerable:!0,get:function(){var r=new h2(t);return Object.defineProperty(Ql,e,{configurable:!0,enumerable:!0,value:r}),r}})}Gs("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Vs.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Gs("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Vs.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Gs("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Vs.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Gs("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Vs.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Gs("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Vs.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Gs("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Vs.sha256,gRed:!1,g:["9"]});Gs("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Vs.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var eh;try{eh=d2()}catch{eh=void 0}Gs("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Vs.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",eh]})});var g2=K((BR,b2)=>{"use strict";E();P();var i5=mr(),s5=Rn(),th=s5.assert;function $r(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}b2.exports=$r;$r.fromPublic=function(t,r,n){return r instanceof $r?r:new $r(t,{pub:r,pubEnc:n})};$r.fromPrivate=function(t,r,n){return r instanceof $r?r:new $r(t,{priv:r,privEnc:n})};$r.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};$r.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub};$r.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};$r.prototype._importPrivate=function(t,r){this.priv=new i5(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)};$r.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?th(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&th(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};$r.prototype.derive=function(t){return t.validate()||th(t.validate(),"public point not validated"),t.mul(this.priv).getX()};$r.prototype.sign=function(t,r,n){return this.ec.sign(t,this,r,n)};$r.prototype.verify=function(t,r){return this.ec.verify(t,r,this)};$r.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var m2=K((kR,v2)=>{"use strict";E();P();var Gf=mr(),ih=Rn(),o5=ih.assert;function Dc(e,t,r){if(t instanceof Dc)return t;this._importDER(t,r)||(o5(t.r&&t.s,"Signature without r or s"),this.r=new Gf(t.r,16),this.s=new Gf(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam,this.curve=e,this.byteLength=this.curve.n.byteLength())}v2.exports=Dc;function a5(){this.place=0}function rh(e,t){var r=e[t.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=t.place;s<n;s++,o++)i<<=8,i|=e[o],i>>>=0;return i<=127?!1:(t.place=o,i)}function y2(e){for(var t=0,r=e.length-1;!e[t]&&!(e[t+1]&128)&&t<r;)t++;return t===0?e:e.slice(t)}Dc.prototype._importDER=function(t,r){t=ih.toArray(t,r);var n=new a5;if(t[n.place++]!==48)return!1;var i=rh(t,n);if(i===!1||i+n.place!==t.length||t[n.place++]!==2)return!1;var s=rh(t,n);if(s===!1)return!1;var o=t.slice(n.place,s+n.place);if(n.place+=s,t[n.place++]!==2)return!1;var a=rh(t,n);if(a===!1||t.length!==a+n.place)return!1;var c=t.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Gf(o),this.s=new Gf(c),this.recoveryParam=null,!0};function nh(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(r|128);--r;)e.push(t>>>(r<<3)&255);e.push(t)}Dc.prototype.toDER=function(t){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=y2(r),n=y2(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];nh(i,r.length),i=i.concat(r),i.push(2),nh(i,n.length);var s=i.concat(n),o=[48];return nh(o,s.length),o=o.concat(s),ih.encode(o,t)};Dc.prototype.toBytes=function(){let t=this.r.toArray("be",this.byteLength),r=this.s.toArray("be",this.byteLength);return t.concat(r)}});var S2=K((qR,_2)=>{"use strict";E();P();var Lo=mr(),w2=z4(),c5=Rn(),sh=Vf(),u5=F4(),x2=c5.assert,oh=g2(),$f=m2();function jn(e){if(!(this instanceof jn))return new jn(e);typeof e=="string"&&(x2(Object.prototype.hasOwnProperty.call(sh,e),"Unknown curve "+e),e=sh[e]),e instanceof sh.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}_2.exports=jn;jn.prototype.keyPair=function(t){return new oh(this,t)};jn.prototype.keyFromPrivate=function(t,r){return oh.fromPrivate(this,t,r)};jn.prototype.keyFromPublic=function(t,r){return oh.fromPublic(this,t,r)};jn.prototype.genKeyPair=function(t){t||(t={});for(var r=new w2({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||u5(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Lo(2));;){var s=new Lo(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};jn.prototype._truncateToN=function(t,r){var n=t.byteLength()*8-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t};jn.prototype.sign=function(t,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),t=this._truncateToN(new Lo(t,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=t.toArray("be",s),c=new w2({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new Lo(1)),f=0;;f++){var d=i.k?i.k(f):new Lo(c.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(u)>=0)){var h=this.g.mul(d);if(!h.isInfinity()){var b=h.getX(),g=b.umod(this.n);if(g.cmpn(0)!==0){var y=d.invm(this.n).mul(g.mul(r.getPrivate()).iadd(t));if(y=y.umod(this.n),y.cmpn(0)!==0){var x=(h.getY().isOdd()?1:0)|(b.cmp(g)!==0?2:0);return i.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),x^=1),new $f(this.curve,{r:g,s:y,recoveryParam:x})}}}}}};jn.prototype.verify=function(t,r,n,i){t=this._truncateToN(new Lo(t,16)),n=this.keyFromPublic(n,i),r=new $f(this.curve,r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),c=a.mul(t).umod(this.n),u=a.mul(s).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(c,n.getPublic(),u),f.isInfinity()?!1:f.eqXToP(s)):(f=this.g.mulAdd(c,n.getPublic(),u),f.isInfinity()?!1:f.getX().umod(this.n).cmp(s)===0)};jn.prototype.recoverPubKey=function(e,t,r,n){x2((3&r)===r,"The recovery param is more than two bits"),t=new $f(this.curve,t,n);var i=this.n,s=new Lo(e),o=t.r,a=t.s,c=r&1,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var f=t.r.invm(i),d=i.sub(s).mul(f).umod(i),h=a.mul(f).umod(i);return this.g.mulAdd(d,o,h)};jn.prototype.getKeyRecoveryParam=function(e,t,r,n){if(t=new $f(this.curve,t,n),t.recoveryParam!==null)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")}});var A2=K((LR,T2)=>{"use strict";E();P();var Kc=Rn(),P2=Kc.assert,E2=Kc.parseBytes,Ma=Kc.cachedProperty;function Or(e,t){this.eddsa=e,this._secret=E2(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=E2(t.pub)}Or.fromPublic=function(t,r){return r instanceof Or?r:new Or(t,{pub:r})};Or.fromSecret=function(t,r){return r instanceof Or?r:new Or(t,{secret:r})};Or.prototype.secret=function(){return this._secret};Ma(Or,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Ma(Or,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Ma(Or,"privBytes",function(){var t=this.eddsa,r=this.hash(),n=t.encodingLength-1,i=r.slice(0,t.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});Ma(Or,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Ma(Or,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Ma(Or,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Or.prototype.sign=function(t){return P2(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)};Or.prototype.verify=function(t,r){return this.eddsa.verify(t,r,this)};Or.prototype.getSecret=function(t){return P2(this._secret,"KeyPair is public only"),Kc.encode(this.secret(),t)};Or.prototype.getPublic=function(t){return Kc.encode(this.pubBytes(),t)};T2.exports=Or});var O2=K((KR,I2)=>{"use strict";E();P();var f5=mr(),Xf=Rn(),d5=Xf.assert,Yf=Xf.cachedProperty,l5=Xf.parseBytes;function jo(e,t){this.eddsa=e,typeof t!="object"&&(t=l5(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),d5(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof f5&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}Yf(jo,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Yf(jo,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Yf(jo,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Yf(jo,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});jo.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};jo.prototype.toHex=function(){return Xf.encode(this.toBytes(),"hex").toUpperCase()};I2.exports=jo});var N2=K((zR,k2)=>{"use strict";E();P();var h5=H1(),p5=Vf(),Ha=Rn(),b5=Ha.assert,M2=Ha.parseBytes,H2=A2(),B2=O2();function gn(e){if(b5(e==="ed25519","only tested with ed25519 so far"),!(this instanceof gn))return new gn(e);e=p5[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=h5.sha512}k2.exports=gn;gn.prototype.sign=function(t,r){t=M2(t);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),t),s=this.g.mul(i),o=this.encodePoint(s),a=this.hashInt(o,n.pubBytes(),t).mul(n.priv()),c=i.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:o})};gn.prototype.verify=function(t,r,n){t=M2(t),r=this.makeSignature(r);var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),t),o=this.g.mul(r.S()),a=r.R().add(i.pub().mul(s));return a.eq(o)};gn.prototype.hashInt=function(){for(var t=this.hash(),r=0;r<arguments.length;r++)t.update(arguments[r]);return Ha.intFromLE(t.digest()).umod(this.curve.n)};gn.prototype.keyFromPublic=function(t){return H2.fromPublic(this,t)};gn.prototype.keyFromSecret=function(t){return H2.fromSecret(this,t)};gn.prototype.makeSignature=function(t){return t instanceof B2?t:new B2(this,t)};gn.prototype.encodePoint=function(t){var r=t.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=t.getX().isOdd()?128:0,r};gn.prototype.decodePoint=function(t){t=Ha.parseBytes(t);var r=t.length-1,n=t.slice(0,r).concat(t[r]&-129),i=(t[r]&128)!==0,s=Ha.intFromLE(n);return this.curve.pointFromY(s,i)};gn.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)};gn.prototype.decodeInt=function(t){return Ha.intFromLE(t)};gn.prototype.isPoint=function(t){return t instanceof this.pointClass}});var ka=K(Di=>{"use strict";E();P();Object.defineProperty(Di,"__esModule",{value:!0});Di.curves=Di.curve=Di.eddsa=Di.ec=void 0;var g5=Zl();Di.curve=g5;var y5=Vf();Di.curves=y5;var v5=S2();Di.ec=v5;var m5=N2();Di.eddsa=m5});var R2=K((C2,q2)=>{"use strict";E();P();Object.defineProperty(C2,"__esModule",{value:!0});var w5=ka(),Ki=new w5.ec("secp256k1"),Ve=Ki.curve,gt=mr();function x5(e,t){let r=new gt(t);if(r.cmp(Ve.p)>=0)return null;r=r.toRed(Ve.red);let n=r.redSqr().redIMul(r).redIAdd(Ve.b).redSqrt();return e===3!==n.isOdd()&&(n=n.redNeg()),Ki.keyPair({pub:{x:r,y:n}})}function _5(e,t,r){let n=new gt(t),i=new gt(r);if(n.cmp(Ve.p)>=0||i.cmp(Ve.p)>=0||(n=n.toRed(Ve.red),i=i.toRed(Ve.red),(e===6||e===7)&&i.isOdd()!==(e===7)))return null;let s=n.redSqr().redIMul(n);return i.redSqr().redISub(s.redIAdd(Ve.b)).isZero()?Ki.keyPair({pub:{x:n,y:i}}):null}function $s(e){let t=e[0];switch(t){case 2:case 3:return e.length!==33?null:x5(t,e.subarray(1,33));case 4:case 6:case 7:return e.length!==65?null:_5(t,e.subarray(1,33),e.subarray(33,65));default:return null}}q2.exports={contextRandomize(){return 0},privateKeyVerify(e){let t=new gt(e);return t.cmp(Ve.n)<0&&!t.isZero()},privateKeyNegate(e){let t=new gt(e);return m.Buffer.from(Ve.n.sub(t).umod(Ve.n).toArray("be",32))},privateKeyTweakAdd(e,t){let r=new gt(t);return r.cmp(Ve.n)>=0||(r.iadd(new gt(e)),r.cmp(Ve.n)>=0&&r.isub(Ve.n),r.isZero())?null:m.Buffer.from(r.toArray("be",32))},privateKeyTweakMul(e,t){let r=new gt(t);return r.cmp(Ve.n)>=0||r.isZero()?1:(r.imul(new gt(e)),r.cmp(Ve.n)>=0&&(r=r.umod(Ve.n)),m.Buffer.from(r.toArray("be",32)))},publicKeyVerify(e){let t=$s(e);return t==null?null:t.validate().result},publicKeyCreate(e,t){let r=new gt(e);if(r.cmp(Ve.n)>=0||r.isZero())return null;let n=Ki.keyFromPrivate(e,null).getPublic();return m.Buffer.from(n.encode(null,t))},publicKeyConvert(e,t){let n=$s(e).getPublic();return m.Buffer.from(n.encode(null,t))},publicKeyNegate(e,t){let r=$s(e);if(r===null)return 1;let n=r.getPublic();return n.y=n.y.redNeg(),m.Buffer.from(n.encode(null,t))},publicKeyCombine(e,t){let r=new Array(e.length);for(let i=0;i<e.length;++i)if(r[i]=$s(e[i]),r[i]===null)return null;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?null:m.Buffer.from(n.encode(null,t))},publicKeyTweakAdd(e,t,r){let n=$s(e);if(n===null||new gt(t).cmp(Ve.n)>=0)return null;let s=n.getPublic().add(Ve.g.mul(t));return s.isInfinity()?null:m.Buffer.from(s.encode(null,r))},publicKeyTweakMul(e,t,r){let n=$s(e);if(n===null)return null;let i=new gt(t);if(i.cmp(Ve.n)>=0||i.isZero())return null;let s=n.getPublic().mul(t);return m.Buffer.from(s.encode(null,r))},signatureNormalize(e){let t=new gt(e.subarray(0,32)),r=new gt(e.subarray(32,64));return t.cmp(Ve.n)>=0||r.cmp(Ve.n)>=0?null:(r.cmp(Ki.nh)===1&&e.set(Ve.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){let r=t.subarray(0,32),n=t.subarray(32,64);if(new gt(r).cmp(Ve.n)>=0||new gt(n).cmp(Ve.n)>=0)return 1;let{output:i}=e,s=i.subarray(4,4+33);s[0]=0,s.set(r,1);let o=33,a=0;for(;o>1&&s[a]===0&&!(s[a+1]&128);--o,++a);if(s=s.subarray(a),s[0]&128||o>1&&s[0]===0&&!(s[1]&128))return 1;let c=i.subarray(6+33,6+33+33);c[0]=0,c.set(n,1);let u=33,f=0;for(;u>1&&c[f]===0&&!(c[f+1]&128);--u,++f);return c=c.subarray(f),c[0]&128||u>1&&c[0]===0&&!(c[1]&128)?1:(e.outputlen=6+o+u,i[0]=48,i[1]=e.outputlen-2,i[2]=2,i[3]=s.length,i.set(s,4),i[4+o]=2,i[5+o]=c.length,i.set(c,6+o),0)},signatureImport(e,t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return 1;let r=t[3];if(r===0||5+r>=t.length||t[4+r]!==2)return 1;let n=t[5+r];if(n===0||6+r+n!==t.length||t[4]&128||r>1&&t[4]===0&&!(t[5]&128)||t[r+6]&128||n>1&&t[r+6]===0&&!(t[r+7]&128))return 1;let i=t.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let s=t.subarray(6+r);if(s.length===33&&s[0]===0&&(s=s.slice(1)),s.length>32)throw new Error("S length is too long");let o=new gt(i);o.cmp(Ve.n)>=0&&(o=new gt(0));let a=new gt(t.subarray(6+r));return a.cmp(Ve.n)>=0&&(a=new gt(0)),e.set(o.toArrayLike(Uint8Array,"be",32),0),e.set(a.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t){let r=new gt(t);return r.cmp(Ve.n)>=0||r.isZero()?null:Ki.sign(e,t,{canonical:!0}).toBytes()},ecdsaVerify(e,t,r){let n={r:e.subarray(0,32),s:e.subarray(32,64)},i=new gt(n.r),s=new gt(n.s);if(i.cmp(Ve.n)>=0||s.cmp(Ve.n)>=0)return 1;if(s.cmp(Ki.nh)===1||i.isZero()||s.isZero())return 3;let o=$s(r);if(o===null)return 2;let a=o.getPublic();return Ki.verify(t,n,a)},ecdsaRecover(e,t,r,n){let i={r:e.slice(0,32),s:e.slice(32,64)},s=new gt(i.r),o=new gt(i.s);if(s.cmp(Ve.n)>=0||o.cmp(Ve.n)>=0)return 1;if(s.isZero()||o.isZero())return 2;let a;try{a=Ki.recoverPubKey(r,i,t,null)}catch{return 2}return m.Buffer.from(a.encode(null,n))},ecdh(e,t,r,n,i,s,o){let a=$s(t);if(a===null)return 1;let c=new gt(r);if(c.cmp(Ve.n)>=0||c.isZero())return 2;let u=a.getPublic().mul(c);if(i===void 0){let f=u.encode(null,!0),d=Ki.hash().update(f).digest();for(let h=0;h<32;++h)e[h]=d[h]}else{s||(s=new Uint8Array(32));let f=u.getX().toArray("be",32);for(let g=0;g<32;++g)s[g]=f[g];o||(o=new Uint8Array(32));let d=u.getY().toArray("be",32);for(let g=0;g<32;++g)o[g]=d[g];let h=i(s,o,n);if(!(h instanceof Uint8Array&&h.length===e.length))return 2;e.set(h)}return 0}}});var K2=K(Br=>{"use strict";E();P();var S5=Br&&Br.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),E5=Br&&Br.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),P5=Br&&Br.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&S5(t,e,r);return E5(t,e),t};Object.defineProperty(Br,"__esModule",{value:!0});Br.fromSeed=Br.fromPublicKey=Br.fromPrivateKey=Br.fromBase58=Br.tinySecp256k1Interface=void 0;var ah=P5(Ro()),T5=Bo(),A5=kc(),L2=(0,T5.base58check)(A5.sha256),j2=R2(),jr=C1(),I5=V4();function O5(e){return{isPoint:t=>e.publicKeyVerify(t),isPrivate:t=>e.privateKeyVerify(t),pointAddScalar:(t,r,n)=>e.publicKeyTweakAdd(t,r,n),pointFromScalar:(t,r)=>e.publicKeyCreate(t,r),privateAdd:(t,r)=>e.privateKeyTweakAdd(new Uint8Array(t),r),sign:(t,r)=>e.ecdsaSign(t,r),verify:(t,r,n)=>e.ecdsaVerify(n,t,r)}}function B5(e){return{isPoint:t=>e.publicKeyVerify(t),pointCompress:(t,r)=>Uint8Array.from(e.publicKeyConvert(t,r!=null?r:!0)),isPrivate:t=>e.privateKeyVerify(t),pointFromScalar:(t,r)=>{let n=e.publicKeyCreate(t,r!=null?r:!0);return n==null?null:Uint8Array.from(n)},sign:(t,r,n)=>Uint8Array.from(e.ecdsaSign(t,r)),verify:(t,r,n,i)=>e.ecdsaVerify(n,t,r)}}var Xs=O5(j2);Br.tinySecp256k1Interface=B5(j2);var ch=jr.BufferN(32),M5=jr.compile({wif:jr.UInt8,bip32:{public:jr.UInt32,private:jr.UInt32}}),Qf={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},U2=2147483648,H5=Math.pow(2,31)-1;function k5(e){return jr.String(e)&&e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)!==null}function N5(e){return jr.UInt32(e)&&e<=H5}var Zf=class{constructor(t,r,n,i,s=0,o=0,a=0){this.__D=t,this.__Q=r,this.chainCode=n,this.network=i,this.__DEPTH=s,this.__INDEX=o,this.__PARENT_FINGERPRINT=a,jr(M5,i),this.lowR=!1}get depth(){return this.__DEPTH}get index(){return this.__INDEX}get parentFingerprint(){return this.__PARENT_FINGERPRINT}get publicKey(){return this.__Q===void 0&&(this.__Q=m.Buffer.from(Xs.pointFromScalar(this.__D,!0))),this.__Q}get privateKey(){return this.__D}get identifier(){return m.Buffer.from(ah.hash160(this.publicKey))}get fingerprint(){return this.identifier.slice(0,4)}get compressed(){return!0}isNeutered(){return this.__D===void 0}neutered(){return Jf(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}toBase58(){let t=this.network,r=this.isNeutered()?t.bip32.public:t.bip32.private,n=m.Buffer.allocUnsafe(78);return n.writeUInt32BE(r,0),n.writeUInt8(this.depth,4),n.writeUInt32BE(this.parentFingerprint,5),n.writeUInt32BE(this.index,9),this.chainCode.copy(n,13),this.isNeutered()?this.publicKey.copy(n,45):(n.writeUInt8(0,45),this.privateKey.copy(n,46)),L2.encode(n)}toWIF(){if(!this.privateKey)throw new TypeError("Missing private key");return I5.encode(this.network.wif,this.privateKey,!0)}derive(t){jr(jr.UInt32,t);let r=t>=U2,n=m.Buffer.allocUnsafe(37);if(r){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");n[0]=0,this.privateKey.copy(n,1),n.writeUInt32BE(t,33)}else this.publicKey.copy(n,0),n.writeUInt32BE(t,33);let i=ah.hmacSHA512(this.chainCode,n),s=i.slice(0,32),o=i.slice(32);if(!Xs.isPrivate(s))return this.derive(t+1);let a;if(this.isNeutered()){let c=Xs.pointAddScalar(this.publicKey,s,!0);if(c===null)return this.derive(t+1);a=Jf(c,o,this.network,this.depth+1,t,this.fingerprint.readUInt32BE(0))}else{let c=Xs.privateAdd(this.privateKey,s);if(c==null)return this.derive(t+1);a=uh(c,o,this.network,this.depth+1,t,this.fingerprint.readUInt32BE(0))}return a}deriveHardened(t){return jr(N5,t),this.derive(t+U2)}derivePath(t){jr(k5,t);let r=t.split("/");if(r[0]==="m"){if(this.parentFingerprint)throw new TypeError("Expected master, got child");r=r.slice(1)}return r.reduce((n,i)=>{let s;return i.slice(-1)==="'"?(s=parseInt(i.slice(0,-1),10),n.deriveHardened(s)):(s=parseInt(i,10),n.derive(s))},this)}sign(t){if(!this.privateKey)throw new Error("Missing private key");return Xs.sign(t,this.privateKey)}verify(t,r){return Xs.verify(t,this.publicKey,r)}};function C5(e,t){let r=m.Buffer.from(L2.decode(e));if(r.length!==78)throw new TypeError("Invalid buffer length");t=t||Qf;let n=r.readUInt32BE(0);if(n!==t.bip32.private&&n!==t.bip32.public)throw new TypeError("Invalid network version");let i=r[4],s=r.readUInt32BE(5);if(i===0&&s!==0)throw new TypeError("Invalid parent fingerprint");let o=r.readUInt32BE(9);if(i===0&&o!==0)throw new TypeError("Invalid index");let a=r.slice(13,45),c;if(n===t.bip32.private){if(r.readUInt8(45)!==0)throw new TypeError("Invalid private key");let u=r.slice(46,78);c=uh(u,a,t,i,o,s)}else{let u=r.slice(45,78);c=Jf(u,a,t,i,o,s)}return c}Br.fromBase58=C5;function D2(e,t,r){return uh(e,t,r)}Br.fromPrivateKey=D2;function uh(e,t,r,n,i,s){if(jr({privateKey:ch,chainCode:ch},{privateKey:e,chainCode:t}),r=r||Qf,!Xs.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return new Zf(e,void 0,t,r,n,i,s)}function q5(e,t,r){return Jf(e,t,r)}Br.fromPublicKey=q5;function Jf(e,t,r,n,i,s){if(jr({publicKey:jr.BufferN(33),chainCode:ch},{publicKey:e,chainCode:t}),r=r||Qf,!Xs.isPoint(e))throw new TypeError("Point is not on the curve");return new Zf(void 0,e,t,r,n,i,s)}function R5(e,t){if(jr(jr.Buffer,e),e.length<16)throw new TypeError("Seed should be at least 128 bits");if(e.length>64)throw new TypeError("Seed should be at most 512 bits");t=t||Qf;let r=ah.hmacSHA512(m.Buffer.from("Bitcoin seed","utf8"),e),n=r.slice(0,32),i=r.slice(32);return D2(n,i,t)}Br.fromSeed=R5});var F2=K(Dn=>{"use strict";E();P();Object.defineProperty(Dn,"__esModule",{value:!0});Dn.fromPrivateKey=Dn.fromPublicKey=Dn.fromBase58=Dn.fromSeed=Dn.tinySecp256k1Interface=void 0;var Fc=K2();Object.defineProperty(Dn,"tinySecp256k1Interface",{enumerable:!0,get:function(){return Fc.tinySecp256k1Interface}});Object.defineProperty(Dn,"fromSeed",{enumerable:!0,get:function(){return Fc.fromSeed}});Object.defineProperty(Dn,"fromBase58",{enumerable:!0,get:function(){return Fc.fromBase58}});Object.defineProperty(Dn,"fromPublicKey",{enumerable:!0,get:function(){return Fc.fromPublicKey}});Object.defineProperty(Dn,"fromPrivateKey",{enumerable:!0,get:function(){return Fc.fromPrivateKey}})});var W2=K((sU,U5)=>{U5.exports=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"]});var dh=K(Do=>{"use strict";E();P();Object.defineProperty(Do,"__esModule",{value:!0});Do._default=Do.wordlists=void 0;var fh={};Do.wordlists=fh;var e0;Do._default=e0;try{Do._default=e0=W2(),fh.english=e0,fh.EN=e0}catch{}});var ny=K(ar=>{"use strict";E();P();Object.defineProperty(ar,"__esModule",{value:!0});ar.wordlists=ar.getDefaultWordlist=ar.setDefaultWordlist=ar.validateMnemonic=ar.generateMnemonic=ar.entropyToMnemonic=ar.mnemonicToEntropy=ar.mnemonicToSeed=ar.mnemonicToSeedSync=void 0;var V2=Ro(),G2=Lf(),t0=dh(),$2=Fu(),Wc=t0._default,z2="Invalid mnemonic",Ko="Invalid entropy",L5="Invalid mnemonic checksum",X2=`A wordlist is required but a default could not be found.
Please pass a 2048 word array explicitly.`;function j5(e,t,r,n,i){let s=(0,G2.pbkdf2)($2.sha512,e,t,{c:r,dkLen:n});return Promise.resolve(m.Buffer.from(s))}function zc(e){return(e||"").normalize("NFKD")}function Y2(e,t,r){for(;e.length<r;)e=t+e;return e}function Z2(e){return parseInt(e,2)}function J2(e){return e.map(t=>Y2(t.toString(2),"0",8)).join("")}function Q2(e){let r=e.length*8/32,n=(0,V2.sha256)(e);return J2(Array.from(n)).slice(0,r)}function ey(e){return"mnemonic"+(e||"")}function D5(e,t){let r=m.Buffer.from(zc(e),"utf8"),n=m.Buffer.from(ey(zc(t)),"utf8"),i=(0,G2.pbkdf2)($2.sha512,r,n,{c:2048,dkLen:64});return m.Buffer.from(i)}ar.mnemonicToSeedSync=D5;function K5(e,t){return Promise.resolve().then(()=>{let r=m.Buffer.from(zc(e),"utf8"),n=m.Buffer.from(ey(zc(t)),"utf8");return j5(r,n,2048,64,"sha512")})}ar.mnemonicToSeed=K5;function ty(e,t){if(t=t||Wc,!t)throw new Error(X2);let r=zc(e).split(" ");if(r.length%3!==0)throw new Error(z2);let n=r.map(f=>{let d=t.indexOf(f);if(d===-1)throw new Error(z2);return Y2(d.toString(2),"0",11)}).join(""),i=Math.floor(n.length/33)*32,s=n.slice(0,i),o=n.slice(i),a=s.match(/(.{1,8})/g).map(Z2);if(a.length<16)throw new Error(Ko);if(a.length>32)throw new Error(Ko);if(a.length%4!==0)throw new Error(Ko);let c=m.Buffer.from(a);if(Q2(c)!==o)throw new Error(L5);return c.toString("hex")}ar.mnemonicToEntropy=ty;function ry(e,t){if(m.Buffer.isBuffer(e)||(e=m.Buffer.from(e,"hex")),t=t||Wc,!t)throw new Error(X2);if(e.length<16)throw new TypeError(Ko);if(e.length>32)throw new TypeError(Ko);if(e.length%4!==0)throw new TypeError(Ko);let r=J2(Array.from(e)),n=Q2(e),o=(r+n).match(/(.{1,11})/g).map(a=>{let c=Z2(a);return t[c]});return t[0]==="\u3042\u3044\u3053\u304F\u3057\u3093"?o.join("\u3000"):o.join(" ")}ar.entropyToMnemonic=ry;function F5(e,t,r){if(e=e||128,e%32!==0)throw new TypeError(Ko);return t=t||V2.randomBytes,ry(t(e/8),r)}ar.generateMnemonic=F5;function W5(e,t){try{ty(e,t)}catch{return!1}return!0}ar.validateMnemonic=W5;function z5(e){let t=t0.wordlists[e];if(t)Wc=t;else throw new Error('Could not find wordlist for language "'+e+'"')}ar.setDefaultWordlist=z5;function V5(){if(!Wc)throw new Error("No Default Wordlist set");return Object.keys(t0.wordlists).filter(e=>e==="JA"||e==="EN"?!1:t0.wordlists[e].every((t,r)=>t===Wc[r]))[0]}ar.getDefaultWordlist=V5;var G5=dh();Object.defineProperty(ar,"wordlists",{enumerable:!0,get:function(){return G5.wordlists}})});var sy=K(Xr=>{"use strict";E();P();Object.defineProperty(Xr,"__esModule",{value:!0});Xr.unpadBuffer=Xr.stripZeros=Xr.setLengthRight=Xr.setLengthLeft=Xr.zeros=Xr.assertIsBuffer=void 0;var $5=function(e){if(!m.Buffer.isBuffer(e)){let t=`This method only supports Buffer but input was: ${e}`;throw new Error(t)}};Xr.assertIsBuffer=$5;var X5=function(e){return m.Buffer.allocUnsafe(e).fill(0)};Xr.zeros=X5;var iy=function(e,t,r){let n=(0,Xr.zeros)(t);return r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)},Y5=function(e,t){return m.Buffer.isBuffer(e)||(e=m.Buffer.from(e)),iy(e,t,!1)};Xr.setLengthLeft=Y5;var Z5=function(e,t){return m.Buffer.isBuffer(e)||(e=m.Buffer.from(e)),iy(e,t,!0)};Xr.setLengthRight=Z5;var J5=function(e){let t=e[0];for(;e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e};Xr.stripZeros=J5;var Q5=function(e){return m.Buffer.isBuffer(e)||(e=m.Buffer.from(e)),(0,Xr.stripZeros)(e)};Xr.unpadBuffer=Q5});var r0=K(Gt=>{"use strict";E();P();Object.defineProperty(Gt,"__esModule",{value:!0});Gt.isHexString=Gt.getKeys=Gt.fromAscii=Gt.fromUtf8=Gt.toAscii=Gt.arrayContainsArray=Gt.getBinarySize=Gt.padToEven=Gt.stripHexPrefix=Gt.isHexPrefixed=void 0;function oy(e){if(typeof e!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof e}`);return e[0]==="0"&&e[1]==="x"}Gt.isHexPrefixed=oy;var eS=e=>{if(typeof e!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof e}`);return oy(e)?e.slice(2):e};Gt.stripHexPrefix=eS;function ay(e){let t=e;if(typeof t!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof t}`);return t.length%2&&(t=`0${t}`),t}Gt.padToEven=ay;function tS(e){if(typeof e!="string")throw new Error(`[getBinarySize] method requires input type 'string', received ${typeof e}`);return m.Buffer.byteLength(e,"utf8")}Gt.getBinarySize=tS;function rS(e,t,r){if(Array.isArray(e)!==!0)throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(Array.isArray(t)!==!0)throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[r===!0?"some":"every"](n=>e.indexOf(n)>=0)}Gt.arrayContainsArray=rS;function nS(e){let t="",r=0,n=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<n;r+=2){let i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t}Gt.toAscii=nS;function iS(e){let t=m.Buffer.from(e,"utf8");return`0x${ay(t.toString("hex")).replace(/^0+|0+$/g,"")}`}Gt.fromUtf8=iS;function sS(e){let t="";for(let r=0;r<e.length;r++){let i=e.charCodeAt(r).toString(16);t+=i.length<2?`0${i}`:i}return`0x${t}`}Gt.fromAscii=sS;function oS(e,t,r){if(!Array.isArray(e))throw new Error(`[getKeys] method expects input 'params' to be an array, got ${typeof e}`);if(typeof t!="string")throw new Error(`[getKeys] method expects input 'key' to be type 'string', got ${typeof e}`);let n=[];for(let i=0;i<e.length;i++){let s=e[i][t];if(r===!0&&!s)s="";else if(typeof s!="string")throw new Error(`invalid abi - expected type 'string', received ${typeof s}`);n.push(s)}return n}Gt.getKeys=oS;function aS(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||typeof t<"u"&&t>0&&e.length!==2+2*t)}Gt.isHexString=aS});var cy=K(Fi=>{"use strict";E();P();Object.defineProperty(Fi,"__esModule",{value:!0});Fi.assertIsString=Fi.assertIsArray=Fi.assertIsBuffer=Fi.assertIsHexString=void 0;var cS=r0(),uS=function(e){if(!(0,cS.isHexString)(e)){let t=`This method only supports 0x-prefixed hex strings but input was: ${e}`;throw new Error(t)}};Fi.assertIsHexString=uS;var fS=function(e){if(!m.Buffer.isBuffer(e)){let t=`This method only supports Buffer but input was: ${e}`;throw new Error(t)}};Fi.assertIsBuffer=fS;var dS=function(e){if(!Array.isArray(e)){let t=`This method only supports number arrays but input was: ${e}`;throw new Error(t)}};Fi.assertIsArray=dS;var lS=function(e){if(typeof e!="string"){let t=`This method only supports strings but input was: ${e}`;throw new Error(t)}};Fi.assertIsString=lS});var ly=K(ue=>{"use strict";E();P();Object.defineProperty(ue,"__esModule",{value:!0});ue.intToUnpaddedBuffer=ue.bigIntToUnpaddedBuffer=ue.bigIntToHex=ue.bufArrToArr=ue.arrToBufArr=ue.validateNoLeadingZeroes=ue.baToJSON=ue.toUtf8=ue.short=ue.addHexPrefix=ue.toUnsigned=ue.fromSigned=ue.bufferToInt=ue.bigIntToBuffer=ue.bufferToBigInt=ue.bufferToHex=ue.toBuffer=ue.unpadHexString=ue.unpadArray=ue.unpadBuffer=ue.setLengthRight=ue.setLengthLeft=ue.zeros=ue.intToBuffer=ue.intToHex=void 0;var Vc=cy(),Fo=r0(),hS=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};ue.intToHex=hS;var pS=function(e){let t=(0,ue.intToHex)(e);return m.Buffer.from((0,Fo.padToEven)(t.slice(2)),"hex")};ue.intToBuffer=pS;var bS=function(e){return m.Buffer.allocUnsafe(e).fill(0)};ue.zeros=bS;var uy=function(e,t,r){let n=(0,ue.zeros)(t);return r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)},gS=function(e,t){return(0,Vc.assertIsBuffer)(e),uy(e,t,!1)};ue.setLengthLeft=gS;var yS=function(e,t){return(0,Vc.assertIsBuffer)(e),uy(e,t,!0)};ue.setLengthRight=yS;var lh=function(e){let t=e[0];for(;e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e},vS=function(e){return(0,Vc.assertIsBuffer)(e),lh(e)};ue.unpadBuffer=vS;var mS=function(e){return(0,Vc.assertIsArray)(e),lh(e)};ue.unpadArray=mS;var wS=function(e){return(0,Vc.assertIsHexString)(e),e=(0,Fo.stripHexPrefix)(e),"0x"+lh(e)};ue.unpadHexString=wS;var xS=function(e){if(e==null)return m.Buffer.allocUnsafe(0);if(m.Buffer.isBuffer(e))return m.Buffer.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return m.Buffer.from(e);if(typeof e=="string"){if(!(0,Fo.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return m.Buffer.from((0,Fo.padToEven)((0,Fo.stripHexPrefix)(e)),"hex")}if(typeof e=="number")return(0,ue.intToBuffer)(e);if(typeof e=="bigint"){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let t=e.toString(16);return t.length%2&&(t="0"+t),m.Buffer.from(t,"hex")}if(e.toArray)return m.Buffer.from(e.toArray());if(e.toBuffer)return m.Buffer.from(e.toBuffer());throw new Error("invalid type")};ue.toBuffer=xS;var _S=function(e){return e=(0,ue.toBuffer)(e),"0x"+e.toString("hex")};ue.bufferToHex=_S;function hh(e){let t=(0,ue.bufferToHex)(e);return BigInt(t==="0x"?0:t)}ue.bufferToBigInt=hh;function ph(e){return(0,ue.toBuffer)("0x"+e.toString(16))}ue.bigIntToBuffer=ph;var SS=function(e){let t=Number(hh(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};ue.bufferToInt=SS;var ES=function(e){return BigInt.asIntN(256,hh(e))};ue.fromSigned=ES;var PS=function(e){return ph(BigInt.asUintN(256,e))};ue.toUnsigned=PS;var TS=function(e){return typeof e!="string"||(0,Fo.isHexPrefixed)(e)?e:"0x"+e};ue.addHexPrefix=TS;function AS(e,t=50){let r=m.Buffer.isBuffer(e)?e.toString("hex"):e;return r.length<=t?r:r.slice(0,t)+"\u2026"}ue.short=AS;var IS=function(e){let t=/^(00)+|(00)+$/g;if(e=(0,Fo.stripHexPrefix)(e),e.length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return m.Buffer.from(e.replace(t,""),"hex").toString("utf8")};ue.toUtf8=IS;var OS=function(e){if(m.Buffer.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){let t=[];for(let r=0;r<e.length;r++)t.push((0,ue.baToJSON)(e[r]));return t}};ue.baToJSON=OS;var BS=function(e){for(let[t,r]of Object.entries(e))if(r!==void 0&&r.length>0&&r[0]===0)throw new Error(`${t} cannot have leading zeroes, received: ${r.toString("hex")}`)};ue.validateNoLeadingZeroes=BS;function fy(e){return Array.isArray(e)?e.map(t=>fy(t)):m.Buffer.from(e)}ue.arrToBufArr=fy;function dy(e){return Array.isArray(e)?e.map(t=>dy(t)):Uint8Array.from(e!=null?e:[])}ue.bufArrToArr=dy;var MS=e=>"0x"+e.toString(16);ue.bigIntToHex=MS;function HS(e){return(0,ue.unpadBuffer)(ph(e))}ue.bigIntToUnpaddedBuffer=HS;function kS(e){return(0,ue.unpadBuffer)((0,ue.intToBuffer)(e))}ue.intToUnpaddedBuffer=kS});var gy=K((EU,by)=>{"use strict";E();P();var n0=sy(),Na=Ro(),yn=mr(),{isHexString:NS,stripHexPrefix:CS,padToEven:qS}=r0(),{intToBuffer:RS,addHexPrefix:US,bufferToHex:LS}=ly(),Ot=function(){};function i0(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}function bh(e){if(e==null)return m.Buffer.allocUnsafe(0);if(m.Buffer.isBuffer(e))return m.Buffer.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return m.Buffer.from(e);if(typeof e=="string"){if(!NS(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return m.Buffer.from(qS(CS(e)),"hex")}if(typeof e=="number")return RS(e);if(typeof e=="bigint"){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let t=e.toString(16);return t.length%2&&(t="0"+t),m.Buffer.from(t,"hex")}if(e.toArray)return m.Buffer.from(e.toArray());if(e.toBuffer)return m.Buffer.from(e.toBuffer());throw new Error("invalid type")}function jS(e){if(!!e){if(typeof e=="number"){if(e<0)return"0x";let t=bh(e);e=LS(t)}if(typeof e!="string"){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return US(e.toLowerCase())}}Ot.eventID=function(e,t){var r=e+"("+t.map(i0).join(",")+")";return Na.keccak256(m.Buffer.from(r))};Ot.methodID=function(e,t){return Ot.eventID(e,t).slice(0,4)};function Ys(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function gh(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function $c(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}function Wo(e){var t=typeof e;if(t==="string")return Na.isHexPrefixed(e)?new yn(Na.stripHexPrefix(e),16):new yn(e,10);if(t==="number")return new yn(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function py(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(t.length!==3)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(t[2]);if(r!==null&&r.length===3)return{method:t[1],args:r[1].split(","),retargs:r[2].split(",")};var n=t[2].split(",");return n.length===1&&n[0]===""&&(n=[]),{method:t[1],args:n}}function Wi(e,t){var r,n,i,s;if(e==="address")return Wi("uint160",Wo(t));if(e==="bool")return Wi("uint8",t?1:0);if(e==="string")return Wi("bytes",m.Buffer.from(t,"utf8"));if(Gc(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=$c(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);i=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(s in t)i.push(Wi(e,t[s]));if(r==="dynamic"){var o=Wi("uint256",t.length);i.unshift(o)}return m.Buffer.concat(i)}else{if(e==="bytes")return t=m.Buffer.from(t),i=m.Buffer.concat([Wi("uint256",t.length),t]),t.length%32!==0&&(i=m.Buffer.concat([i,n0.zeros(32-t.length%32)])),i;if(e.startsWith("bytes")){if(r=Ys(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return n0.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=Ys(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=Wo(t),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(m.Buffer,"be",32)}else if(e.startsWith("int")){if(r=Ys(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=Wo(t),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(m.Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=gh(e),n=Wo(t),n<0)throw new Error("Supplied ufixed is negative");return Wi("uint256",n.mul(new yn(2).pow(new yn(r[1]))))}else if(e.startsWith("fixed"))return r=gh(e),Wi("int256",Wo(t).mul(new yn(2).pow(new yn(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}function _i(e,t,r){typeof e=="string"&&(e=yh(e));var n,i,s,o;if(e.name==="address")return _i(e.rawType,t,r).toArrayLike(m.Buffer,"be",20).toString("hex");if(e.name==="bool")return _i(e.rawType,t,r).toString()===new yn(1).toString();if(e.name==="string"){var a=_i(e.rawType,t,r);return m.Buffer.from(a,"utf8").toString()}else if(e.isArray){for(s=[],n=e.size,e.size==="dynamic"&&(r=_i("uint256",t,r).toNumber(),n=_i("uint256",t,r).toNumber(),r=r+32),o=0;o<n;o++){var c=_i(e.subArray,t,r);s.push(c),r+=e.subArray.memoryUsage}return s}else{if(e.name==="bytes")return r=_i("uint256",t,r).toNumber(),n=_i("uint256",t,r).toNumber(),t.slice(r+32,r+32+n);if(e.name.startsWith("bytes"))return t.slice(r,r+e.size);if(e.name.startsWith("uint")){if(i=new yn(t.slice(r,r+32),16,"be"),i.bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("int")){if(i=new yn(t.slice(r,r+32),16,"be").fromTwos(256),i.bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("ufixed")){if(n=new yn(2).pow(new yn(e.size[1])),i=_i("uint256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}else if(e.name.startsWith("fixed")){if(n=new yn(2).pow(new yn(e.size[1])),i=_i("int256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}}throw new Error("Unsupported or invalid type: "+e.name)}function yh(e){var t,r;if(Gc(e)){t=$c(e);var n=e.slice(0,e.lastIndexOf("["));return n=yh(n),r={isArray:!0,name:e,size:t,memoryUsage:t==="dynamic"?32:n.memoryUsage*t,subArray:n},r}else{var i;switch(e){case"address":i="uint160";break;case"bool":i="uint8";break;case"string":i="bytes";break}if(r={rawType:i,name:e,memoryUsage:32},e.startsWith("bytes")&&e!=="bytes"||e.startsWith("uint")||e.startsWith("int")?r.size=Ys(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(r.size=gh(e)),e.startsWith("bytes")&&e!=="bytes"&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((e.startsWith("uint")||e.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}}function DS(e){return e==="string"||e==="bytes"||$c(e)==="dynamic"}function Gc(e){return e.lastIndexOf("]")===e.length-1}Ot.rawEncode=function(e,t){var r=[],n=[],i=0;e.forEach(function(u){if(Gc(u)){var f=$c(u);f!=="dynamic"?i+=32*f:i+=32}else i+=32});for(var s=0;s<e.length;s++){var o=i0(e[s]),a=t[s],c=Wi(o,a);DS(o)?(r.push(Wi("uint256",i)),n.push(c),i+=c.length):r.push(c)}return m.Buffer.concat(r.concat(n))};Ot.rawDecode=function(e,t){var r=[];t=m.Buffer.from(t);for(var n=0,i=0;i<e.length;i++){var s=i0(e[i]),o=yh(s,t,n),a=_i(o,t,n);n+=o.memoryUsage,r.push(a)}return r};Ot.simpleEncode=function(e){var t=Array.prototype.slice.call(arguments).slice(1),r=py(e);if(t.length!==r.args.length)throw new Error("Argument count mismatch");return m.Buffer.concat([Ot.methodID(r.method,r.args),Ot.rawEncode(r.args,t)])};Ot.simpleDecode=function(e,t){var r=py(e);if(!r.retargs)throw new Error("No return values in method");return Ot.rawDecode(r.retargs,t)};function hy(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}Ot.stringify=function(e,t){var r=[];for(var n in e){var i=e[n],s=t[n];/^[^\[]+\[.*\]$/.test(i)?s=s.map(function(o){return hy(i,o)}).join(", "):s=hy(i,s),r.push(s)}return r};Ot.solidityHexValue=function(e,t,r){var n,i;if(Gc(e)){var s=e.replace(/\[.*?\]/,"");if(!Gc(s)){var o=$c(e);if(o!=="dynamic"&&o!==0&&t.length>o)throw new Error("Elements exceed array size: "+o)}var a=t.map(function(f){return Ot.solidityHexValue(s,f,256)});return m.Buffer.concat(a)}else{if(e==="bytes")return t;if(e==="string")return m.Buffer.from(t,"utf8");if(e==="bool"){r=r||8;var c=Array(r/4).join("0");return m.Buffer.from(t?c+"1":c+"0","hex")}else if(e==="address"){var u=20;return r&&(u=r/8),n0.setLengthLeft(bh(t),u)}else if(e.startsWith("bytes")){if(n=Ys(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return typeof t=="number"&&(t=jS(t)),n0.setLengthRight(bh(t),n)}else if(e.startsWith("uint")){if(n=Ys(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if(i=Wo(t),i.bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toArrayLike(m.Buffer,"be",r/8)}else if(e.startsWith("int")){if(n=Ys(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if(i=Wo(t),i.bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toTwos(n).toArrayLike(m.Buffer,"be",r/8)}else throw new Error("Unsupported or invalid type: "+e)}};Ot.solidityPack=function(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r=[],n=0;n<e.length;n++){var i=i0(e[n]),s=t[n];r.push(Ot.solidityHexValue(i,s,null))}return m.Buffer.concat(r)};Ot.soliditySHA3=function(e,t){return Na.keccak256(Ot.solidityPack(e,t))};Ot.soliditySHA256=function(e,t){return Na.sha256(Ot.solidityPack(e,t))};Ot.solidityRIPEMD160=function(e,t){return Na.ripemd160(Ot.solidityPack(e,t),!0)};function KS(e){return e>="0"&&e<="9"}Ot.fromSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="s")t.push("bytes");else if(n==="b"){for(var i="bytes",s=r+1;s<e.length&&KS(e[s]);)i+=e[s]-"0",s++;r=s-1,t.push(i)}else if(n==="i")t.push("int256");else if(n==="a")t.push("int256[]");else throw new Error("Unsupported or invalid type: "+n)}return t};Ot.toSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="bytes")t.push("s");else if(n.startsWith("bytes"))t.push("b"+Ys(n));else if(n==="int256")t.push("i");else if(n==="int256[]")t.push("a");else throw new Error("Unsupported or invalid type: "+n)}return t.join("")};by.exports=Ot});var yy=K(Zs=>{"use strict";E();P();Object.defineProperty(Zs,"__esModule",{value:!0});Zs.SoliditySHA3=Zs.RawEncode=Zs.ABI=void 0;var vh=gy();Zs.ABI=vh;function FS(e,t){return vh.rawEncode(e,t)}Zs.RawEncode=FS;function WS(e,t){return vh.soliditySHA3(e,t)}Zs.SoliditySHA3=WS});var Sy=K(Ge=>{"use strict";E();P();var zS=Ge&&Ge.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),VS=Ge&&Ge.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),GS=Ge&&Ge.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&zS(t,e,r);return VS(t,e),t},$S=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.loadUncompressedPublicKey=Ge.loadCompressedPublicKey=Ge.publicKeyConvert=Ge.publicKeyCreate=Ge.publicKeyVerify=Ge.privateKeyVerify=Ge.loadPublicKey=Ge.recover=Ge.verifyWithNoRecovery=Ge.verify=Ge.getV=Ge.sign=void 0;var XS=GS(ka()),Mr=new XS.ec("secp256k1"),vy=Ro(),Ca=$S(mr());function YS(e,t,r=!0){let n=Mr.sign(Array.from(e),m.Buffer.from(t),{canonical:r});return{signature:n.toBytes(),recovery:n.recoveryParam}}Ge.sign=YS;function ZS(e,t,r,n,i=!0){let s=Xc(n);if(s==null)throw new Error("pubkey error");let o=Mr.keyPair({pub:{x:s.x,y:s.y}}).getPublic();return Mr.getKeyRecoveryParam(e,{r:t,s:r},o,i)}Ge.getV=ZS;function JS(e,t,r,n){let i=my(t,r,e,!0);if(i==null)return!1;let s=wy(n,!0);return s==null?!1:i.equals(s)}Ge.verify=JS;function QS(e,t,r){let n=Xc(r);if(n==null)throw new Error("pubkey error");let i=Mr.keyPair({pub:{x:n.x,y:n.y}}),s={r:(0,vy.toHex)(t.slice(0,32)),s:(0,vy.toHex)(t.slice(32,64))};return i.verify(e,s)}Ge.verifyWithNoRecovery=QS;function my(e,t,r,n){let i={r:Array.from(e.slice(0,32)),s:Array.from(e.slice(32,64))},s=new Ca.default(i.r),o=new Ca.default(i.s);if(s.cmp(Mr.curve.n)>=0||o.cmp(Mr.curve.n)>=0||s.isZero()||o.isZero())return null;let a;try{a=Mr.recoverPubKey(Array.from(r),i,t,null)}catch{return null}return m.Buffer.from(a.encode(null,n))}Ge.recover=my;function Xc(e){let t=m.Buffer.from(e),r=t[0];switch(r){case 2:case 3:return t.length!==33?null:xy(r,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:_y(r,t.subarray(1,33),t.subarray(33,65));default:return null}}Ge.loadPublicKey=Xc;function e7(e){let t=new Ca.default(Array.from(e));return t.cmp(Mr.curve.n)<0&&!t.isZero()}Ge.privateKeyVerify=e7;function t7(e){return Xc(e)!==null}Ge.publicKeyVerify=t7;function r7(e,t){let r=Mr.keyFromPrivate(Array.from(e),"bytes").getPublic();return m.Buffer.from(r.encode(null,t))}Ge.publicKeyCreate=r7;function wy(e,t){let r=Xc(e);if(r==null)return null;let n=Mr.keyPair({pub:{x:r.x,y:r.y}}).getPublic();return m.Buffer.from(n.encode(null,t))}Ge.publicKeyConvert=wy;function xy(e,t){let r=new Ca.default(Array.from(t));if(r.cmp(Mr.curve.p)>=0)return null;let n=r.toRed(Mr.curve.red),i=n.redSqr().redIMul(n).redIAdd(Mr.curve.b).redSqrt();return e===3!==i.isOdd()&&(i=i.redNeg()),{x:n,y:i}}Ge.loadCompressedPublicKey=xy;function _y(e,t,r){let n=new Ca.default(Array.from(t)),i=new Ca.default(Array.from(r));if(n.cmp(Mr.curve.p)>=0||i.cmp(Mr.curve.p)>=0)return null;let s=n.toRed(Mr.curve.red),o=i.toRed(Mr.curve.red);if((e===6||e===7)&&o.isOdd()!==(e===7))return null;let a=s.redSqr().redIMul(s);return o.redSqr().redISub(a.redIAdd(Mr.curve.b)).isZero()?{x:s,y:o}:null}Ge.loadUncompressedPublicKey=_y});var Py=K(Bt=>{"use strict";E();P();var n7=Bt&&Bt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),i7=Bt&&Bt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s7=Bt&&Bt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&n7(t,e,r);return i7(t,e),t},o7=Bt&&Bt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.fromSecret=Bt.fromSeed=Bt.privateKeyVerify=Bt.publicKeyVerify=Bt.publicKeyCreate=Bt.verify=Bt.sign=void 0;var a7=s7(ka()),c7=Ro(),u7=o7(mr()),zo=new a7.eddsa("ed25519"),Ey=zo.curve;function f7(e,t){let r=t;r.length==64&&(r=r.slice(0,32));let i=zo.keyFromSecret(Array.from(r)).sign(Array.from(e)).toBytes();return Uint8Array.from(i)}Bt.sign=f7;function d7(e,t,r){return zo.keyFromPublic(Array.from(r)).verify(Array.from(e),Array.from(t))}Bt.verify=d7;function l7(e){let t=e;t.length==64&&(t=t.slice(0,32));let r=zo.keyFromSecret(Array.from(t));return Uint8Array.from(r.getPublic())}Bt.publicKeyCreate=l7;function h7(e){let t=zo.decodePoint(Array.from(e));return Ey.validate(t)}Bt.publicKeyVerify=h7;function p7(e){let t=new u7.default(Array.from(e));return t.cmp(Ey.n)<0&&!t.isZero()}Bt.privateKeyVerify=p7;function b7(e){let t=zo.keyFromSecret(Array.from(e)),r=Uint8Array.from(t.getPublic());return{publicKey:r,secretKey:(0,c7.concatBytes)(e,r)}}Bt.fromSeed=b7;function g7(e){let t=e.slice(0,32),r=zo.keyFromSecret(Array.from(t));return{publicKey:Uint8Array.from(r.getPublic()),secretKey:Uint8Array.from(t)}}Bt.fromSecret=g7});var Oy=K(at=>{"use strict";E();P();var y7=at&&at.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),v7=at&&at.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),m7=at&&at.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&y7(t,e,r);return v7(t,e),t},w7=at&&at.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(at,"__esModule",{value:!0});at.loadUncompressedPublicKey=at.loadCompressedPublicKey=at.publicKeyConvert=at.publicKeyCreate=at.publicKeyVerify=at.privateKeyVerify=at.loadPublicKey=at.recover=at.verify=at.sign=void 0;var x7=m7(ka()),an=new x7.ec("p256"),qa=w7(mr());function _7(e,t,r=!0){let n=an.sign(Array.from(e),m.Buffer.from(t),{canonical:r});return{signature:n.toBytes(),recovery:n.recoveryParam}}at.sign=_7;function S7(e,t,r,n){let i=Ty(t,r,e,!1);return i==null?!1:i.equals(n)}at.verify=S7;function Ty(e,t,r,n){let i={r:Array.from(e.slice(0,32)),s:Array.from(e.slice(32,64))},s=new qa.default(i.r),o=new qa.default(i.s);if(s.cmp(an.curve.n)>=0||o.cmp(an.curve.n)>=0||s.isZero()||o.isZero())return null;let a;try{a=an.recoverPubKey(Array.from(r),i,t,null)}catch{return null}return m.Buffer.from(a.encode(null,n))}at.recover=Ty;function mh(e){let t=m.Buffer.from(e),r=t[0];switch(r){case 2:case 3:return t.length!==33?null:Ay(r,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:Iy(r,t.subarray(1,33),t.subarray(33,65));default:return null}}at.loadPublicKey=mh;function E7(e){let t=new qa.default(Array.from(e));return t.cmp(an.curve.n)<0&&!t.isZero()}at.privateKeyVerify=E7;function P7(e){return mh(e)!==null}at.publicKeyVerify=P7;function T7(e,t){let r=an.keyFromPrivate(Array.from(e),"bytes").getPublic();return m.Buffer.from(r.encode(null,t))}at.publicKeyCreate=T7;function A7(e,t){let r=mh(e);if(r==null)return null;let n=an.keyPair({pub:{x:r.x,y:r.y}}).getPublic();return m.Buffer.from(n.encode(null,t))}at.publicKeyConvert=A7;function Ay(e,t){let r=new qa.default(Array.from(t));if(r.cmp(an.curve.p)>=0)return null;let n=r.toRed(an.curve.red),i=n.redSqr().redIMul(n).redIAdd(an.curve.b).redSqrt();return e===3!==i.isOdd()&&(i=i.redNeg()),{x:n,y:i}}at.loadCompressedPublicKey=Ay;function Iy(e,t,r){let n=new qa.default(Array.from(t)),i=new qa.default(Array.from(r));if(n.cmp(an.curve.p)>=0||i.cmp(an.curve.p)>=0)return null;let s=n.toRed(an.curve.red),o=i.toRed(an.curve.red);if((e===6||e===7)&&o.isOdd()!==(e===7))return null;let a=s.redSqr().redIMul(s);return o.redSqr().redISub(a.redIAdd(an.curve.b)).isZero()?{x:s,y:o}:null}at.loadUncompressedPublicKey=Iy});var gs=K(Pe=>{"use strict";E();P();Object.defineProperty(Pe,"__esModule",{value:!0});Pe.validateObject=Pe.createHmacDrbg=Pe.bitMask=Pe.bitSet=Pe.bitGet=Pe.bitLen=Pe.utf8ToBytes=Pe.equalBytes=Pe.concatBytes=Pe.ensureBytes=Pe.numberToVarBytesBE=Pe.numberToBytesLE=Pe.numberToBytesBE=Pe.bytesToNumberLE=Pe.bytesToNumberBE=Pe.hexToBytes=Pe.hexToNumber=Pe.numberToHexUnpadded=Pe.bytesToHex=void 0;var My=BigInt(0),s0=BigInt(1),I7=BigInt(2),o0=e=>e instanceof Uint8Array,O7=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function xh(e){if(!o0(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=O7[e[r]];return t}Pe.bytesToHex=xh;function Hy(e){let t=e.toString(16);return t.length&1?`0${t}`:t}Pe.numberToHexUnpadded=Hy;function _h(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}Pe.hexToNumber=_h;function a0(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("invalid byte sequence");t[r]=s}return t}Pe.hexToBytes=a0;function B7(e){return _h(xh(e))}Pe.bytesToNumberBE=B7;function M7(e){if(!o0(e))throw new Error("Uint8Array expected");return _h(xh(Uint8Array.from(e).reverse()))}Pe.bytesToNumberLE=M7;var H7=(e,t)=>a0(e.toString(16).padStart(t*2,"0"));Pe.numberToBytesBE=H7;var k7=(e,t)=>(0,Pe.numberToBytesBE)(e,t).reverse();Pe.numberToBytesLE=k7;var N7=e=>a0(Hy(e));Pe.numberToVarBytesBE=N7;function C7(e,t,r){let n;if(typeof t=="string")try{n=a0(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(o0(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}Pe.ensureBytes=C7;function ky(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!o0(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}Pe.concatBytes=ky;function q7(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}Pe.equalBytes=q7;function R7(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}Pe.utf8ToBytes=R7;function U7(e){let t;for(t=0;e>My;e>>=s0,t+=1);return t}Pe.bitLen=U7;var L7=(e,t)=>e>>BigInt(t)&s0;Pe.bitGet=L7;var j7=(e,t,r)=>e|(r?s0:My)<<BigInt(t);Pe.bitSet=j7;var D7=e=>(I7<<BigInt(e-1))-s0;Pe.bitMask=D7;var wh=e=>new Uint8Array(e),By=e=>Uint8Array.from(e);function K7(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=wh(e),i=wh(e),s=0,o=()=>{n.fill(1),i.fill(0),s=0},a=(...d)=>r(i,n,...d),c=(d=wh())=>{i=a(By([0]),d),n=a(),d.length!==0&&(i=a(By([1]),d),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0,h=[];for(;d<t;){n=a();let b=n.slice();h.push(b),d+=n.length}return ky(...h)};return(d,h)=>{o(),c(d);let b;for(;!(b=h(u()));)c();return o(),b}}Pe.createHmacDrbg=K7;var F7={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function W7(e,t,r={}){let n=(i,s,o)=>{let a=F7[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);let c=e[i];if(!(o&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(let[i,s]of Object.entries(t))n(i,s,!1);for(let[i,s]of Object.entries(r))n(i,s,!0);return e}Pe.validateObject=W7});var Vo=K(Le=>{"use strict";E();P();Object.defineProperty(Le,"__esModule",{value:!0});Le.hashToPrivateScalar=Le.FpSqrtEven=Le.FpSqrtOdd=Le.Field=Le.nLength=Le.FpIsSquare=Le.FpDiv=Le.FpInvertBatch=Le.FpPow=Le.validateField=Le.isNegativeLE=Le.FpSqrt=Le.tonelliShanks=Le.invert=Le.pow2=Le.pow=Le.mod=void 0;var ys=gs(),wr=BigInt(0),wt=BigInt(1),Js=BigInt(2),z7=BigInt(3),Sh=BigInt(4),Ny=BigInt(5),Cy=BigInt(8),V7=BigInt(9),G7=BigInt(16);function Kn(e,t){let r=e%t;return r>=wr?r:t+r}Le.mod=Kn;function qy(e,t,r){if(r<=wr||t<wr)throw new Error("Expected power/modulo > 0");if(r===wt)return wr;let n=wt;for(;t>wr;)t&wt&&(n=n*e%r),e=e*e%r,t>>=wt;return n}Le.pow=qy;function $7(e,t,r){let n=e;for(;t-- >wr;)n*=n,n%=r;return n}Le.pow2=$7;function c0(e,t){if(e===wr||t<=wr)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Kn(e,t),n=t,i=wr,s=wt,o=wt,a=wr;for(;r!==wr;){let u=n/r,f=n%r,d=i-o*u,h=s-a*u;n=r,r=f,i=o,s=a,o=d,a=h}if(n!==wt)throw new Error("invert: does not exist");return Kn(i,t)}Le.invert=c0;function Ry(e){let t=(e-wt)/Js,r,n,i;for(r=e-wt,n=0;r%Js===wr;r/=Js,n++);for(i=Js;i<e&&qy(i,t,e)!==e-wt;i++);if(n===1){let o=(e+wt)/Sh;return function(c,u){let f=c.pow(u,o);if(!c.eql(c.sqr(f),u))throw new Error("Cannot find square root");return f}}let s=(r+wt)/Js;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,i),r),d=a.pow(c,s),h=a.pow(c,r);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let b=1;for(let y=a.sqr(h);b<u&&!a.eql(y,a.ONE);b++)y=a.sqr(y);let g=a.pow(f,wt<<BigInt(u-b-1));f=a.sqr(g),d=a.mul(d,g),h=a.mul(h,f),u=b}return d}}Le.tonelliShanks=Ry;function Uy(e){if(e%Sh===z7){let t=(e+wt)/Sh;return function(n,i){let s=n.pow(i,t);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%Cy===Ny){let t=(e-Ny)/Cy;return function(n,i){let s=n.mul(i,Js),o=n.pow(s,t),a=n.mul(i,o),c=n.mul(n.mul(a,Js),o),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return e%G7,Ry(e)}Le.FpSqrt=Uy;var X7=(e,t)=>(Kn(e,t)&wt)===wt;Le.isNegativeLE=X7;var Y7=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Z7(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Y7.reduce((n,i)=>(n[i]="function",n),t);return(0,ys.validateObject)(e,r)}Le.validateField=Z7;function Ly(e,t,r){if(r<wr)throw new Error("Expected power > 0");if(r===wr)return e.ONE;if(r===wt)return t;let n=e.ONE,i=t;for(;r>wr;)r&wt&&(n=e.mul(n,i)),i=e.sqr(i),r>>=wt;return n}Le.FpPow=Ly;function jy(e,t){let r=new Array(t.length),n=t.reduce((s,o,a)=>e.is0(o)?s:(r[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return t.reduceRight((s,o,a)=>e.is0(o)?s:(r[a]=e.mul(s,r[a]),e.mul(s,o)),i),r}Le.FpInvertBatch=jy;function J7(e,t,r){return e.mul(t,typeof r=="bigint"?c0(r,e.ORDER):e.inv(r))}Le.FpDiv=J7;function Q7(e){let t=(e.ORDER-wt)/Js;return r=>{let n=e.pow(r,t);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}}Le.FpIsSquare=Q7;function Eh(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}Le.nLength=Eh;function eE(e,t,r=!1,n={}){if(e<=wr)throw new Error(`Expected Fp ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:s}=Eh(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=Uy(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:(0,ys.bitMask)(i),ZERO:wr,ONE:wt,create:c=>Kn(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return wr<=c&&c<e},is0:c=>c===wr,isOdd:c=>(c&wt)===wt,neg:c=>Kn(-c,e),eql:(c,u)=>c===u,sqr:c=>Kn(c*c,e),add:(c,u)=>Kn(c+u,e),sub:(c,u)=>Kn(c-u,e),mul:(c,u)=>Kn(c*u,e),pow:(c,u)=>Ly(a,c,u),div:(c,u)=>Kn(c*c0(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>c0(c,e),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>jy(a,c),cmov:(c,u,f)=>f?u:c,toBytes:c=>r?(0,ys.numberToBytesLE)(c,s):(0,ys.numberToBytesBE)(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return r?(0,ys.bytesToNumberLE)(c):(0,ys.bytesToNumberBE)(c)}});return Object.freeze(a)}Le.Field=eE;function tE(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)}Le.FpSqrtOdd=tE;function rE(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r}Le.FpSqrtEven=rE;function nE(e,t,r=!1){e=(0,ys.ensureBytes)("privateHash",e);let n=e.length,i=Eh(t).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);let s=r?(0,ys.bytesToNumberLE)(e):(0,ys.bytesToNumberBE)(e);return Kn(s,t-wt)+wt}Le.hashToPrivateScalar=nE});var Ky=K(Ra=>{"use strict";E();P();Object.defineProperty(Ra,"__esModule",{value:!0});Ra.validateBasic=Ra.wNAF=void 0;var Dy=Vo(),iE=gs(),sE=BigInt(0),Ph=BigInt(1);function oE(e,t){let r=(i,s)=>{let o=s.negate();return i?o:s},n=i=>{let s=Math.ceil(t/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:r,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>sE;)s&Ph&&(o=o.add(a)),a=a.double(),s>>=Ph;return o},precomputeWindow(i,s){let{windows:o,windowSize:a}=n(s),c=[],u=i,f=u;for(let d=0;d<o;d++){f=u,c.push(f);for(let h=1;h<a;h++)f=f.add(u),c.push(f);u=f.double()}return c},wNAF(i,s,o){let{windows:a,windowSize:c}=n(i),u=e.ZERO,f=e.BASE,d=BigInt(2**i-1),h=2**i,b=BigInt(i);for(let g=0;g<a;g++){let y=g*c,x=Number(o&d);o>>=b,x>c&&(x-=h,o+=Ph);let T=y,M=y+Math.abs(x)-1,k=g%2!==0,R=x<0;x===0?f=f.add(r(k,s[T])):u=u.add(r(R,s[M]))}return{p:u,f}},wNAFCached(i,s,o,a){let c=i._WINDOW_SIZE||1,u=s.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&s.set(i,a(u))),this.wNAF(c,u,o)}}}Ra.wNAF=oE;function aE(e){return(0,Dy.validateField)(e.Fp),(0,iE.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,Dy.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}Ra.validateBasic=aE});var f0=K(xt=>{"use strict";E();P();var cE=xt&&xt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),uE=xt&&xt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Wy=xt&&xt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&cE(t,e,r);return uE(t,e),t};Object.defineProperty(xt,"__esModule",{value:!0});xt.mapToCurveSimpleSWU=xt.SWUFpSqrtRatio=xt.weierstrass=xt.weierstrassPoints=xt.DER=void 0;var Yc=Wy(Vo()),cr=Wy(gs()),zi=gs(),Th=Ky();function fE(e){let t=(0,Th.validateBasic)(e);cr.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:dE,hexToBytes:lE}=cr;xt.DER={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=xt.DER;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:dE(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=xt.DER,r=typeof e=="string"?lE(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:s}=xt.DER._parseInt(r.subarray(2)),{d:o,l:a}=xt.DER._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){let t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{let f=u.toString(16);return f.length&1?`0${f}`:f},n=t(r(e.s)),i=t(r(e.r)),s=n.length/2,o=i.length/2,a=r(s),c=r(o);return`30${r(o+s+4)}02${c}${i}02${a}${n}`}};var Si=BigInt(0),$t=BigInt(1),Qs=BigInt(2),u0=BigInt(3),Fy=BigInt(4);function zy(e){let t=fE(e),{Fp:r}=t,n=t.toBytes||((g,y,x)=>{let T=y.toAffine();return cr.concatBytes(Uint8Array.from([4]),r.toBytes(T.x),r.toBytes(T.y))}),i=t.fromBytes||(g=>{let y=g.subarray(1),x=r.fromBytes(y.subarray(0,r.BYTES)),T=r.fromBytes(y.subarray(r.BYTES,2*r.BYTES));return{x,y:T}});function s(g){let{a:y,b:x}=t,T=r.sqr(g),M=r.mul(T,g);return r.add(r.add(M,r.mul(g,y)),x)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(g){return typeof g=="bigint"&&Si<g&&g<t.n}function a(g){if(!o(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(g){let{allowedPrivateKeyLengths:y,nByteLength:x,wrapPrivateKey:T,n:M}=t;if(y&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=cr.bytesToHex(g)),typeof g!="string"||!y.includes(g.length))throw new Error("Invalid key");g=g.padStart(x*2,"0")}let k;try{k=typeof g=="bigint"?g:cr.bytesToNumberBE((0,zi.ensureBytes)("private key",g,x))}catch{throw new Error(`private key must be ${x} bytes, hex or bigint, not ${typeof g}`)}return T&&(k=Yc.mod(k,M)),a(k),k}let u=new Map;function f(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(y,x,T){if(this.px=y,this.py=x,this.pz=T,y==null||!r.isValid(y))throw new Error("x required");if(x==null||!r.isValid(x))throw new Error("y required");if(T==null||!r.isValid(T))throw new Error("z required")}static fromAffine(y){let{x,y:T}=y||{};if(!y||!r.isValid(x)||!r.isValid(T))throw new Error("invalid affine point");if(y instanceof d)throw new Error("projective point not allowed");let M=k=>r.eql(k,r.ZERO);return M(x)&&M(T)?d.ZERO:new d(x,T,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){let x=r.invertBatch(y.map(T=>T.pz));return y.map((T,M)=>T.toAffine(x[M])).map(d.fromAffine)}static fromHex(y){let x=d.fromAffine(i((0,zi.ensureBytes)("pointHex",y)));return x.assertValidity(),x}static fromPrivateKey(y){return d.BASE.multiply(c(y))}_setWindowSize(y){this._WINDOW_SIZE=y,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}let{x:y,y:x}=this.toAffine();if(!r.isValid(y)||!r.isValid(x))throw new Error("bad point: x or y not FE");let T=r.sqr(x),M=s(y);if(!r.eql(T,M))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y}=this.toAffine();if(r.isOdd)return!r.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){f(y);let{px:x,py:T,pz:M}=this,{px:k,py:R,pz:C}=y,q=r.eql(r.mul(x,C),r.mul(k,M)),L=r.eql(r.mul(T,C),r.mul(R,M));return q&&L}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){let{a:y,b:x}=t,T=r.mul(x,u0),{px:M,py:k,pz:R}=this,C=r.ZERO,q=r.ZERO,L=r.ZERO,j=r.mul(M,M),G=r.mul(k,k),B=r.mul(R,R),l=r.mul(M,k);return l=r.add(l,l),L=r.mul(M,R),L=r.add(L,L),C=r.mul(y,L),q=r.mul(T,B),q=r.add(C,q),C=r.sub(G,q),q=r.add(G,q),q=r.mul(C,q),C=r.mul(l,C),L=r.mul(T,L),B=r.mul(y,B),l=r.sub(j,B),l=r.mul(y,l),l=r.add(l,L),L=r.add(j,j),j=r.add(L,j),j=r.add(j,B),j=r.mul(j,l),q=r.add(q,j),B=r.mul(k,R),B=r.add(B,B),j=r.mul(B,l),C=r.sub(C,j),L=r.mul(B,G),L=r.add(L,L),L=r.add(L,L),new d(C,q,L)}add(y){f(y);let{px:x,py:T,pz:M}=this,{px:k,py:R,pz:C}=y,q=r.ZERO,L=r.ZERO,j=r.ZERO,G=t.a,B=r.mul(t.b,u0),l=r.mul(x,k),w=r.mul(T,R),_=r.mul(M,C),v=r.add(x,T),S=r.add(k,R);v=r.mul(v,S),S=r.add(l,w),v=r.sub(v,S),S=r.add(x,M);let H=r.add(k,C);return S=r.mul(S,H),H=r.add(l,_),S=r.sub(S,H),H=r.add(T,M),q=r.add(R,C),H=r.mul(H,q),q=r.add(w,_),H=r.sub(H,q),j=r.mul(G,S),q=r.mul(B,_),j=r.add(q,j),q=r.sub(w,j),j=r.add(w,j),L=r.mul(q,j),w=r.add(l,l),w=r.add(w,l),_=r.mul(G,_),S=r.mul(B,S),w=r.add(w,_),_=r.sub(l,_),_=r.mul(G,_),S=r.add(S,_),l=r.mul(w,S),L=r.add(L,l),l=r.mul(H,S),q=r.mul(v,q),q=r.sub(q,l),l=r.mul(v,w),j=r.mul(H,j),j=r.add(j,l),new d(q,L,j)}subtract(y){return this.add(y.negate())}is0(){return this.equals(d.ZERO)}wNAF(y){return b.wNAFCached(this,u,y,x=>{let T=r.invertBatch(x.map(M=>M.pz));return x.map((M,k)=>M.toAffine(T[k])).map(d.fromAffine)})}multiplyUnsafe(y){let x=d.ZERO;if(y===Si)return x;if(a(y),y===$t)return this;let{endo:T}=t;if(!T)return b.unsafeLadder(this,y);let{k1neg:M,k1:k,k2neg:R,k2:C}=T.splitScalar(y),q=x,L=x,j=this;for(;k>Si||C>Si;)k&$t&&(q=q.add(j)),C&$t&&(L=L.add(j)),j=j.double(),k>>=$t,C>>=$t;return M&&(q=q.negate()),R&&(L=L.negate()),L=new d(r.mul(L.px,T.beta),L.py,L.pz),q.add(L)}multiply(y){a(y);let x=y,T,M,{endo:k}=t;if(k){let{k1neg:R,k1:C,k2neg:q,k2:L}=k.splitScalar(x),{p:j,f:G}=this.wNAF(C),{p:B,f:l}=this.wNAF(L);j=b.constTimeNegate(R,j),B=b.constTimeNegate(q,B),B=new d(r.mul(B.px,k.beta),B.py,B.pz),T=j.add(B),M=G.add(l)}else{let{p:R,f:C}=this.wNAF(x);T=R,M=C}return d.normalizeZ([T,M])[0]}multiplyAndAddUnsafe(y,x,T){let M=d.BASE,k=(C,q)=>q===Si||q===$t||!C.equals(M)?C.multiplyUnsafe(q):C.multiply(q),R=k(this,x).add(k(y,T));return R.is0()?void 0:R}toAffine(y){let{px:x,py:T,pz:M}=this,k=this.is0();y==null&&(y=k?r.ONE:r.inv(M));let R=r.mul(x,y),C=r.mul(T,y),q=r.mul(M,y);if(k)return{x:r.ZERO,y:r.ZERO};if(!r.eql(q,r.ONE))throw new Error("invZ was invalid");return{x:R,y:C}}isTorsionFree(){let{h:y,isTorsionFree:x}=t;if(y===$t)return!0;if(x)return x(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:y,clearCofactor:x}=t;return y===$t?this:x?x(d,this):this.multiplyUnsafe(t.h)}toRawBytes(y=!0){return this.assertValidity(),n(d,this,y)}toHex(y=!0){return cr.bytesToHex(this.toRawBytes(y))}}d.BASE=new d(t.Gx,t.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);let h=t.nBitLength,b=(0,Th.wNAF)(d,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}xt.weierstrassPoints=zy;function hE(e){let t=(0,Th.validateBasic)(e);return cr.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function pE(e){let t=hE(e),{Fp:r,n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function o(S){return Si<S&&S<r.ORDER}function a(S){return Yc.mod(S,n)}function c(S){return Yc.invert(S,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:d,isWithinCurveOrder:h}=zy({...t,toBytes(S,H,U){let O=H.toAffine(),p=r.toBytes(O.x),A=cr.concatBytes;return U?A(Uint8Array.from([H.hasEvenY()?2:3]),p):A(Uint8Array.from([4]),p,r.toBytes(O.y))},fromBytes(S){let H=S.length,U=S[0],O=S.subarray(1);if(H===i&&(U===2||U===3)){let p=cr.bytesToNumberBE(O);if(!o(p))throw new Error("Point is not on curve");let A=d(p),F=r.sqrt(A),W=(F&$t)===$t;return(U&1)===1!==W&&(F=r.neg(F)),{x:p,y:F}}else if(H===s&&U===4){let p=r.fromBytes(O.subarray(0,r.BYTES)),A=r.fromBytes(O.subarray(r.BYTES,2*r.BYTES));return{x:p,y:A}}else throw new Error(`Point of length ${H} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),b=S=>cr.bytesToHex(cr.numberToBytesBE(S,t.nByteLength));function g(S){let H=n>>$t;return S>H}function y(S){return g(S)?a(-S):S}let x=(S,H,U)=>cr.bytesToNumberBE(S.slice(H,U));class T{constructor(H,U,O){this.r=H,this.s=U,this.recovery=O,this.assertValidity()}static fromCompact(H){let U=t.nByteLength;return H=(0,zi.ensureBytes)("compactSignature",H,U*2),new T(x(H,0,U),x(H,U,2*U))}static fromDER(H){let{r:U,s:O}=xt.DER.toSig((0,zi.ensureBytes)("DER",H));return new T(U,O)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(H){return new T(this.r,this.s,H)}recoverPublicKey(H){let{r:U,s:O,recovery:p}=this,A=L((0,zi.ensureBytes)("msgHash",H));if(p==null||![0,1,2,3].includes(p))throw new Error("recovery id invalid");let F=p===2||p===3?U+t.n:U;if(F>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let W=(p&1)===0?"02":"03",Z=u.fromHex(W+b(F)),Q=c(F),te=a(-A*Q),ee=a(O*Q),it=u.BASE.multiplyAndAddUnsafe(Z,te,ee);if(!it)throw new Error("point at infinify");return it.assertValidity(),it}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new T(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return cr.hexToBytes(this.toDERHex())}toDERHex(){return xt.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return cr.hexToBytes(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}let M={isValidPrivateKey(S){try{return f(S),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let S=t.randomBytes(r.BYTES+8),H=Yc.hashToPrivateScalar(S,n);return cr.numberToBytesBE(H,t.nByteLength)},precompute(S=8,H=u.BASE){return H._setWindowSize(S),H.multiply(BigInt(3)),H}};function k(S,H=!0){return u.fromPrivateKey(S).toRawBytes(H)}function R(S){let H=S instanceof Uint8Array,U=typeof S=="string",O=(H||U)&&S.length;return H?O===i||O===s:U?O===2*i||O===2*s:S instanceof u}function C(S,H,U=!0){if(R(S))throw new Error("first arg must be private key");if(!R(H))throw new Error("second arg must be public key");return u.fromHex(H).multiply(f(S)).toRawBytes(U)}let q=t.bits2int||function(S){let H=cr.bytesToNumberBE(S),U=S.length*8-t.nBitLength;return U>0?H>>BigInt(U):H},L=t.bits2int_modN||function(S){return a(q(S))},j=cr.bitMask(t.nBitLength);function G(S){if(typeof S!="bigint")throw new Error("bigint expected");if(!(Si<=S&&S<j))throw new Error(`bigint expected < 2^${t.nBitLength}`);return cr.numberToBytesBE(S,t.nByteLength)}function B(S,H,U=l){if(["recovered","canonical"].some(Be=>Be in U))throw new Error("sign() legacy options not supported");let{hash:O,randomBytes:p}=t,{lowS:A,prehash:F,extraEntropy:W}=U;A==null&&(A=!0),S=(0,zi.ensureBytes)("msgHash",S),F&&(S=(0,zi.ensureBytes)("prehashed msgHash",O(S)));let Z=L(S),Q=f(H),te=[G(Q),G(Z)];if(W!=null){let Be=W===!0?p(r.BYTES):W;te.push((0,zi.ensureBytes)("extraEntropy",Be,r.BYTES))}let ee=cr.concatBytes(...te),it=Z;function Ie(Be){let Pr=q(Be);if(!h(Pr))return;let Ne=c(Pr),_e=u.BASE.multiply(Pr).toAffine(),tr=a(_e.x);if(tr===Si)return;let qe=a(Ne*a(it+tr*Q));if(qe===Si)return;let ot=(_e.x===tr?0:2)|Number(_e.y&$t),sn=qe;return A&&g(qe)&&(sn=y(qe),ot^=1),new T(tr,sn,ot)}return{seed:ee,k2sig:Ie}}let l={lowS:t.lowS,prehash:!1},w={lowS:t.lowS,prehash:!1};function _(S,H,U=l){let{seed:O,k2sig:p}=B(S,H,U),A=t;return cr.createHmacDrbg(A.hash.outputLen,A.nByteLength,A.hmac)(O,p)}u.BASE._setWindowSize(8);function v(S,H,U,O=w){var _e;let p=S;if(H=(0,zi.ensureBytes)("msgHash",H),U=(0,zi.ensureBytes)("publicKey",U),"strict"in O)throw new Error("options.strict was renamed to lowS");let{lowS:A,prehash:F}=O,W,Z;try{if(typeof p=="string"||p instanceof Uint8Array)try{W=T.fromDER(p)}catch(tr){if(!(tr instanceof xt.DER.Err))throw tr;W=T.fromCompact(p)}else if(typeof p=="object"&&typeof p.r=="bigint"&&typeof p.s=="bigint"){let{r:tr,s:qe}=p;W=new T(tr,qe)}else throw new Error("PARSE");Z=u.fromHex(U)}catch(tr){if(tr.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(A&&W.hasHighS())return!1;F&&(H=t.hash(H));let{r:Q,s:te}=W,ee=L(H),it=c(te),Ie=a(ee*it),Be=a(Q*it),Pr=(_e=u.BASE.multiplyAndAddUnsafe(Z,Ie,Be))==null?void 0:_e.toAffine();return Pr?a(Pr.x)===Q:!1}return{CURVE:t,getPublicKey:k,getSharedSecret:C,sign:_,verify:v,ProjectivePoint:u,Signature:T,utils:M}}xt.weierstrass=pE;function Vy(e,t){let r=e.ORDER,n=Si;for(let g=r-$t;g%Qs===Si;g/=Qs)n+=$t;let i=n,s=Qs<<i-$t-$t,o=s*Qs,a=(r-$t)/o,c=(a-$t)/Qs,u=o-$t,f=s,d=e.pow(t,a),h=e.pow(t,(a+$t)/Qs),b=(g,y)=>{let x=d,T=e.pow(y,u),M=e.sqr(T);M=e.mul(M,y);let k=e.mul(g,M);k=e.pow(k,c),k=e.mul(k,T),T=e.mul(k,y),M=e.mul(k,g);let R=e.mul(M,T);k=e.pow(R,f);let C=e.eql(k,e.ONE);T=e.mul(M,h),k=e.mul(R,x),M=e.cmov(T,M,C),R=e.cmov(k,R,C);for(let q=i;q>$t;q--){let L=q-Qs;L=Qs<<L-$t;let j=e.pow(R,L),G=e.eql(j,e.ONE);T=e.mul(M,x),x=e.mul(x,x),j=e.mul(R,x),M=e.cmov(T,M,G),R=e.cmov(j,R,G)}return{isValid:C,value:M}};if(e.ORDER%Fy===u0){let g=(e.ORDER-u0)/Fy,y=e.sqrt(e.neg(t));b=(x,T)=>{let M=e.sqr(T),k=e.mul(x,T);M=e.mul(M,k);let R=e.pow(M,g);R=e.mul(R,k);let C=e.mul(R,y),q=e.mul(e.sqr(R),T),L=e.eql(q,x),j=e.cmov(C,R,L);return{isValid:L,value:j}}}return b}xt.SWUFpSqrtRatio=Vy;function bE(e,t){if(Yc.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let r=Vy(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,c,u,f,d;i=e.sqr(n),i=e.mul(i,t.Z),s=e.sqr(i),s=e.add(s,i),o=e.add(s,e.ONE),o=e.mul(o,t.B),a=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,t.A),s=e.sqr(o),u=e.sqr(a),c=e.mul(u,t.A),s=e.add(s,c),s=e.mul(s,o),u=e.mul(u,a),c=e.mul(u,t.B),s=e.add(s,c),f=e.mul(i,o);let{isValid:h,value:b}=r(s,u);d=e.mul(i,n),d=e.mul(d,b),f=e.cmov(f,o,h),d=e.cmov(d,b,h);let g=e.isOdd(n)===e.isOdd(d);return d=e.cmov(e.neg(d),d,g),f=e.div(f,a),{x:f,y:d}}}xt.mapToCurveSimpleSWU=bE});var Xy=K(Fn=>{"use strict";E();P();Object.defineProperty(Fn,"__esModule",{value:!0});Fn.createHasher=Fn.isogenyMap=Fn.hash_to_field=Fn.expand_message_xof=Fn.expand_message_xmd=void 0;var gE=Vo(),Ei=gs();function yE(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return(0,Ei.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}var vE=Ei.bytesToNumberBE;function eo(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);let r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=e&255,e>>>=8;return new Uint8Array(r)}function mE(e,t){let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function Zc(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function Ih(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Gy(e,t,r,n){Zc(e),Zc(t),Ih(r),t.length>255&&(t=n((0,Ei.concatBytes)((0,Ei.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:i,blockLen:s}=n,o=Math.ceil(r/i);if(o>255)throw new Error("Invalid xmd length");let a=(0,Ei.concatBytes)(t,eo(t.length,1)),c=eo(0,s),u=eo(r,2),f=new Array(o),d=n((0,Ei.concatBytes)(c,e,u,eo(0,1),a));f[0]=n((0,Ei.concatBytes)(d,eo(1,1),a));for(let b=1;b<=o;b++){let g=[mE(d,f[b-1]),eo(b+1,1),a];f[b]=n((0,Ei.concatBytes)(...g))}return(0,Ei.concatBytes)(...f).slice(0,r)}Fn.expand_message_xmd=Gy;function $y(e,t,r,n,i){if(Zc(e),Zc(t),Ih(r),t.length>255){let s=Math.ceil(2*n/8);t=i.create({dkLen:s}).update((0,Ei.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(eo(r,2)).update(t).update(eo(t.length,1)).digest()}Fn.expand_message_xof=$y;function Ah(e,t,r){(0,Ei.validateObject)(r,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:n,k:i,m:s,hash:o,expand:a,DST:c}=r;Zc(e),Ih(t);let u=yE(c),f=n.toString(2).length,d=Math.ceil((f+i)/8),h=t*s*d,b;if(a==="xmd")b=Gy(e,u,h,o);else if(a==="xof")b=$y(e,u,h,i,o);else if(a==="_internal_pass")b=e;else throw new Error('expand must be "xmd" or "xof"');let g=new Array(t);for(let y=0;y<t;y++){let x=new Array(s);for(let T=0;T<s;T++){let M=d*(T+y*s),k=b.subarray(M,M+d);x[T]=(0,gE.mod)(vE(k),n)}g[y]=x}return g}Fn.hash_to_field=Ah;function wE(e,t){let r=t.map(n=>Array.from(n).reverse());return(n,i)=>{let[s,o,a,c]=r.map(u=>u.reduce((f,d)=>e.add(e.mul(f,n),d)));return n=e.div(s,o),i=e.mul(i,e.div(a,c)),{x:n,y:i}}}Fn.isogenyMap=wE;function xE(e,t,r){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){let s=Ah(n,2,{...r,DST:r.DST,...i}),o=e.fromAffine(t(s[0])),a=e.fromAffine(t(s[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(n,i){let s=Ah(n,1,{...r,DST:r.encodeDST,...i}),o=e.fromAffine(t(s[0])).clearCofactor();return o.assertValidity(),o}}}Fn.createHasher=xE});var Oh=K(Ua=>{"use strict";E();P();Object.defineProperty(Ua,"__esModule",{value:!0});Ua.createCurve=Ua.getHash=void 0;var _E=Cc(),Yy=Ur(),SE=f0();function Zy(e){return{hash:e,hmac:(t,...r)=>(0,_E.hmac)(e,t,(0,Yy.concatBytes)(...r)),randomBytes:Yy.randomBytes}}Ua.getHash=Zy;function EE(e,t){let r=n=>(0,SE.weierstrass)({...e,...Zy(n)});return Object.freeze({...r(t),create:r})}Ua.createCurve=EE});var av=K(ur=>{"use strict";E();P();var PE=ur&&ur.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),TE=ur&&ur.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),AE=ur&&ur.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&PE(t,e,r);return TE(t,e),t},Bh;Object.defineProperty(ur,"__esModule",{value:!0});ur.encodeToCurve=ur.hashToCurve=ur.schnorr=ur.secp256k1=void 0;var d0=ha(),IE=Ur(),Hr=Vo(),OE=f0(),Yr=gs(),ev=AE(Xy()),BE=Oh(),b0=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l0=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),tv=BigInt(1),h0=BigInt(2),Jy=(e,t)=>(e+t/h0)/t;function rv(e){let t=b0,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,f=u*u*e%t,d=(0,Hr.pow2)(f,r,t)*f%t,h=(0,Hr.pow2)(d,r,t)*f%t,b=(0,Hr.pow2)(h,h0,t)*u%t,g=(0,Hr.pow2)(b,i,t)*b%t,y=(0,Hr.pow2)(g,s,t)*g%t,x=(0,Hr.pow2)(y,a,t)*y%t,T=(0,Hr.pow2)(x,c,t)*x%t,M=(0,Hr.pow2)(T,a,t)*y%t,k=(0,Hr.pow2)(M,r,t)*f%t,R=(0,Hr.pow2)(k,o,t)*g%t,C=(0,Hr.pow2)(R,n,t)*u%t,q=(0,Hr.pow2)(C,h0,t);if(!to.eql(to.sqr(q),e))throw new Error("Cannot find square root");return q}var to=(0,Hr.Field)(b0,void 0,void 0,{sqrt:rv});ur.secp256k1=(0,BE.createCurve)({a:BigInt(0),b:BigInt(7),Fp:to,n:l0,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=l0,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-tv*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=Jy(s*e,t),c=Jy(-n*e,t),u=(0,Hr.mod)(e-a*r-c*i,t),f=(0,Hr.mod)(-a*n-c*s,t),d=u>o,h=f>o;if(d&&(u=t-u),h&&(f=t-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:h,k2:f}}}},d0.sha256);var g0=BigInt(0),nv=e=>typeof e=="bigint"&&g0<e&&e<b0,ME=e=>typeof e=="bigint"&&g0<e&&e<l0,Qy={};function p0(e,...t){let r=Qy[e];if(r===void 0){let n=(0,d0.sha256)(Uint8Array.from(e,i=>i.charCodeAt(0)));r=(0,Yr.concatBytes)(n,n),Qy[e]=r}return(0,d0.sha256)((0,Yr.concatBytes)(r,...t))}var Nh=e=>e.toRawBytes(!0).slice(1),Hh=e=>(0,Yr.numberToBytesBE)(e,32),Mh=e=>(0,Hr.mod)(e,b0),Jc=e=>(0,Hr.mod)(e,l0),Ch=ur.secp256k1.ProjectivePoint,HE=(e,t,r)=>Ch.BASE.multiplyAndAddUnsafe(e,t,r);function kh(e){let t=ur.secp256k1.utils.normPrivateKeyToScalar(e),r=Ch.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:Jc(-t),bytes:Nh(r)}}function iv(e){if(!nv(e))throw new Error("bad x: need 0 < x < p");let t=Mh(e*e),r=Mh(t*e+BigInt(7)),n=rv(r);n%h0!==g0&&(n=Mh(-n));let i=new Ch(e,n,tv);return i.assertValidity(),i}function sv(...e){return Jc((0,Yr.bytesToNumberBE)(p0("BIP0340/challenge",...e)))}function kE(e){return kh(e).bytes}function NE(e,t,r=(0,IE.randomBytes)(32)){let n=(0,Yr.ensureBytes)("message",e),{bytes:i,scalar:s}=kh(t),o=(0,Yr.ensureBytes)("auxRand",r,32),a=Hh(s^(0,Yr.bytesToNumberBE)(p0("BIP0340/aux",o))),c=p0("BIP0340/nonce",a,i,n),u=Jc((0,Yr.bytesToNumberBE)(c));if(u===g0)throw new Error("sign failed: k is zero");let{bytes:f,scalar:d}=kh(u),h=sv(f,i,n),b=new Uint8Array(64);if(b.set(f,0),b.set(Hh(Jc(d+h*s)),32),!ov(b,n,i))throw new Error("sign: Invalid signature produced");return b}function ov(e,t,r){let n=(0,Yr.ensureBytes)("signature",e,64),i=(0,Yr.ensureBytes)("message",t),s=(0,Yr.ensureBytes)("publicKey",r,32);try{let o=iv((0,Yr.bytesToNumberBE)(s)),a=(0,Yr.bytesToNumberBE)(n.subarray(0,32));if(!nv(a))return!1;let c=(0,Yr.bytesToNumberBE)(n.subarray(32,64));if(!ME(c))return!1;let u=sv(Hh(a),Nh(o),i),f=HE(o,c,Jc(-u));return!(!f||!f.hasEvenY()||f.toAffine().x!==a)}catch{return!1}}ur.schnorr={getPublicKey:kE,sign:NE,verify:ov,utils:{randomPrivateKey:ur.secp256k1.utils.randomPrivateKey,lift_x:iv,pointToBytes:Nh,numberToBytesBE:Yr.numberToBytesBE,bytesToNumberBE:Yr.bytesToNumberBE,taggedHash:p0,mod:Hr.mod}};var CE=ev.isogenyMap(to,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),qE=(0,OE.mapToCurveSimpleSWU)(to,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:to.create(BigInt("-11"))});Bh=ev.createHasher(ur.secp256k1.ProjectivePoint,e=>{let{x:t,y:r}=qE(to.create(e[0]));return CE(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:to.ORDER,m:1,k:128,expand:"xmd",hash:d0.sha256}),ur.hashToCurve=Bh.hashToCurve,ur.encodeToCurve=Bh.encodeToCurve});var fv=K(ro=>{"use strict";E();P();Object.defineProperty(ro,"__esModule",{value:!0});ro.poseidon=ro.splitConstants=ro.validateOpts=void 0;var cv=Vo();function uv(e){let{Fp:t}=e;(0,cv.validateField)(t);for(let c of["t","roundsFull","roundsPartial"])if(typeof e[c]!="number"||!Number.isSafeInteger(e[c]))throw new Error(`Poseidon: invalid param ${c}=${e[c]} (${typeof e[c]})`);if(e.reversePartialPowIdx!==void 0&&typeof e.reversePartialPowIdx!="boolean")throw new Error(`Poseidon: invalid param reversePartialPowIdx=${e.reversePartialPowIdx}`);let r=e.sboxPower;if(r===void 0&&(r=5),typeof r!="number"||!Number.isSafeInteger(r))throw new Error(`Poseidon wrong sboxPower=${r}`);let n=BigInt(r),i=c=>(0,cv.FpPow)(t,c,n);if(r===3?i=c=>t.mul(t.sqrN(c),c):r===5&&(i=c=>t.mul(t.sqrN(t.sqrN(c)),c)),e.roundsFull%2!==0)throw new Error(`Poseidon roundsFull is not even: ${e.roundsFull}`);let s=e.roundsFull+e.roundsPartial;if(!Array.isArray(e.roundConstants)||e.roundConstants.length!==s)throw new Error("Poseidon: wrong round constants");let o=e.roundConstants.map(c=>{if(!Array.isArray(c)||c.length!==e.t)throw new Error(`Poseidon wrong round constants: ${c}`);return c.map(u=>{if(typeof u!="bigint"||!t.isValid(u))throw new Error(`Poseidon wrong round constant=${u}`);return t.create(u)})});if(!Array.isArray(e.mds)||e.mds.length!==e.t)throw new Error("Poseidon: wrong MDS matrix");let a=e.mds.map(c=>{if(!Array.isArray(c)||c.length!==e.t)throw new Error(`Poseidon MDS matrix row: ${c}`);return c.map(u=>{if(typeof u!="bigint")throw new Error(`Poseidon MDS matrix value=${u}`);return t.create(u)})});return Object.freeze({...e,rounds:s,sboxFn:i,roundConstants:o,mds:a})}ro.validateOpts=uv;function RE(e,t){if(typeof t!="number")throw new Error("poseidonSplitConstants: wrong t");if(!Array.isArray(e)||e.length%t)throw new Error("poseidonSplitConstants: wrong rc");let r=[],n=[];for(let i=0;i<e.length;i++)n.push(e[i]),n.length===t&&(r.push(n),n=[]);return r}ro.splitConstants=RE;function UE(e){let{t,Fp:r,rounds:n,sboxFn:i,reversePartialPowIdx:s}=uv(e),o=Math.floor(e.roundsFull/2),a=s?t-1:0,c=(f,d,h)=>(f=f.map((b,g)=>r.add(b,e.roundConstants[h][g])),d?f=f.map(b=>i(b)):f[a]=i(f[a]),f=e.mds.map(b=>b.reduce((g,y,x)=>r.add(g,r.mulN(y,f[x])),r.ZERO)),f),u=function(d){if(!Array.isArray(d)||d.length!==t)throw new Error(`Poseidon: wrong values (expected array of bigints with length ${t})`);d=d.map(b=>{if(typeof b!="bigint")throw new Error(`Poseidon: wrong value=${b} (${typeof b})`);return r.create(b)});let h=0;for(let b=0;b<o;b++)d=c(d,!0,h++);for(let b=0;b<e.roundsPartial;b++)d=c(d,!1,h++);for(let b=0;b<o;b++)d=c(d,!0,h++);if(h!==n)throw new Error(`Poseidon: wrong number of rounds: last round=${h}, total=${n}`);return d};return u.roundConstants=e.roundConstants,u}ro.poseidon=UE});var Sv=K(se=>{"use strict";E();P();var LE=se&&se.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jE=se&&se.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),DE=se&&se.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&LE(t,e,r);return jE(t,e),t};Object.defineProperty(se,"__esModule",{value:!0});se.poseidonHashMany=se.poseidonHashSingle=se.poseidonHashFunc=se.poseidonHash=se.poseidonSmall=se.poseidonCreate=se.poseidonBasic=se._poseidonMDS=se.Fp251=se.Fp253=se.keccak=se.computeHashOnElements=se.hashChain=se.pedersen=se.getAccountPath=se.ethSigToPrivate=se.getStarkKey=se.grindKey=se.utils=se.Signature=se.ProjectivePoint=se.CURVE=se.verify=se.sign=se.getSharedSecret=se.getPublicKey=se._starkCurve=void 0;var KE=Gu(),Uh=ha(),FE=Ur(),$o=Vo(),WE=fv(),zE=f0(),Zr=DE(gs()),VE=Oh(),v0=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),hv=252;function dv(e){for(;e[0]===0;)e=e.subarray(1);let t=e.length*8-hv,r=Zr.bytesToNumberBE(e);return t>0?r>>BigInt(t):r}function pv(e){return typeof e=="string"&&(e=jh(e),e.length&1&&(e="0"+e)),Zr.hexToBytes(e)}var Xo=(0,zE.weierstrass)({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:(0,$o.Field)(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:v0,nBitLength:hv,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...(0,VE.getHash)(Uh.sha256),bits2int:dv,bits2int_modN:e=>{let t=Zr.bytesToNumberBE(e).toString(16);return t.length===63&&(e=pv(t+"0")),(0,$o.mod)(dv(e),v0)}});se._starkCurve=Xo;function Go(e){return Zr.ensureBytes("",typeof e=="string"?pv(e):e)}function Lh(e){return Zr.bytesToHex(Go(e)).padStart(64,"0")}function bv(e,t=!1){return Xo.getPublicKey(Lh(e),t)}se.getPublicKey=bv;function GE(e,t){return Xo.getSharedSecret(Lh(e),t)}se.getSharedSecret=GE;function $E(e,t,r){return Xo.sign(Go(e),Lh(t),r)}se.sign=$E;function XE(e,t,r){let n=e instanceof gv?e:Go(e);return Xo.verify(n,Go(t),Go(r))}se.verify=XE;var{CURVE:YE,ProjectivePoint:La,Signature:gv,utils:ZE}=Xo;se.CURVE=YE;se.ProjectivePoint=La;se.Signature=gv;se.utils=ZE;function yv(e){return`0x${Zr.bytesToHex(e.subarray(1)).replace(/^0+/gm,"")}`}function jh(e){return e.replace(/^0x/i,"")}function JE(e){return`0x${e.toString(16)}`}function vv(e){let t=Go(e),r=2n**256n,n=r-(0,$o.mod)(r,v0);for(let i=0;;i++){let s=qh(Zr.concatBytes(t,Zr.numberToVarBytesBE(BigInt(i))));if(s<n)return(0,$o.mod)(s,v0).toString(16);if(i===1e5)throw new Error("grindKey is broken: tried 100k vals")}}se.grindKey=vv;function QE(e){return yv(bv(e,!0))}se.getStarkKey=QE;function e9(e){if(e=jh(e),e.length!==130)throw new Error("Wrong ethereum signature");return vv(e.substring(0,64))}se.ethSigToPrivate=e9;var t9=2n**31n-1n,y0=e=>Number(e&t9);function r9(e,t,r,n){let i=y0(qh(e)),s=y0(qh(t)),o=Zr.hexToNumber(jh(r));return`m/2645'/${i}'/${s}'/${y0(o)}'/${y0(o>>31n)}'/${n}`}se.getAccountPath=r9;var Qc=[new La(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new La(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new La(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new La(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new La(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function mv(e,t){let r=[],n=e;for(let i=0;i<248;i++)r.push(n),n=n.double();n=t;for(let i=0;i<4;i++)r.push(n),n=n.double();return r}var n9=mv(Qc[1],Qc[2]),i9=mv(Qc[3],Qc[4]);function wv(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"){if(!Number.isSafeInteger(e))throw new Error(`Invalid pedersenArg: ${e}`);t=BigInt(e)}else t=Zr.bytesToNumberBE(Go(e));if(!(0n<=t&&t<Xo.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${t}`);return t}function lv(e,t,r){let n=wv(t);for(let i=0;i<252;i++){let s=r[i];if(s.equals(e))throw new Error("Same point");(n&1n)!==0n&&(e=e.add(s)),n>>=1n}return e}function Dh(e,t){let r=Qc[0];return r=lv(r,e,n9),r=lv(r,t,i9),yv(r.toRawBytes(!0))}se.pedersen=Dh;function s9(e,t=Dh){if(!Array.isArray(e)||e.length<1)throw new Error("data should be array of at least 1 element");return e.length===1?JE(wv(e[0])):Array.from(e).reverse().reduce((r,n)=>t(n,r))}se.hashChain=s9;var o9=(e,t=Dh)=>[0,...e,e.length].reduce((r,n)=>t(r,n));se.computeHashOnElements=o9;var a9=Zr.bitMask(250),c9=e=>Zr.bytesToNumberBE((0,KE.keccak_256)(e))&a9;se.keccak=c9;var qh=e=>Zr.bytesToNumberBE((0,Uh.sha256)(e));se.Fp253=(0,$o.Field)(BigInt("14474011154664525231415395255581126252639794253786371766033694892385558855681"));se.Fp251=(0,$o.Field)(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function Rh(e,t,r){let n=e.fromBytes((0,Uh.sha256)((0,FE.utf8ToBytes)(`${t}${r}`)));return e.create(n)}function xv(e,t,r,n=0){let i=[],s=[];for(let o=0;o<r;o++)i.push(Rh(e,`${t}x`,n*r+o)),s.push(Rh(e,`${t}y`,n*r+o));if(new Set([...i,...s]).size!==2*r)throw new Error("X and Y values are not distinct");return i.map(o=>s.map(a=>e.inv(e.sub(o,a))))}se._poseidonMDS=xv;var u9=[[3,1,1],[1,-1,1],[1,1,-2]].map(e=>e.map(BigInt));function Kh(e,t){if((0,$o.validateField)(e.Fp),!Number.isSafeInteger(e.rate)||!Number.isSafeInteger(e.capacity))throw new Error(`Wrong poseidon opts: ${e}`);let r=e.rate+e.capacity,n=e.roundsFull+e.roundsPartial,i=[];for(let o=0;o<n;o++){let a=[];for(let c=0;c<r;c++)a.push(Rh(e.Fp,"Hades",r*o+c));i.push(a)}let s=(0,WE.poseidon)({...e,t:r,sboxPower:3,reversePartialPowIdx:!0,mds:t,roundConstants:i});return s.m=r,s.rate=e.rate,s.capacity=e.capacity,s}se.poseidonBasic=Kh;function f9(e,t=0){let r=e.rate+e.capacity;if(!Number.isSafeInteger(t))throw new Error(`Wrong mdsAttempt=${t}`);return Kh(e,xv(e.Fp,"HadesMDS",r,t))}se.poseidonCreate=f9;se.poseidonSmall=Kh({Fp:se.Fp251,rate:2,capacity:1,roundsFull:8,roundsPartial:83},u9);function _v(e,t,r=se.poseidonSmall){return r([e,t,2n])[0]}se.poseidonHash=_v;function d9(e,t,r=se.poseidonSmall){return Zr.numberToVarBytesBE(_v(Zr.bytesToNumberBE(e),Zr.bytesToNumberBE(t),r))}se.poseidonHashFunc=d9;function l9(e,t=se.poseidonSmall){return t([e,0n,1n])[0]}se.poseidonHashSingle=l9;function h9(e,t=se.poseidonSmall){let{m:r,rate:n}=t;if(!Array.isArray(e))throw new Error("bigint array expected in values");let i=Array.from(e);for(i.push(1n);i.length%n!==0;)i.push(0n);let s=new Array(r).fill(0n);for(let o=0;o<i.length;o+=n){for(let a=0;a<n;a++)s[a]+=i[o+a];s=t(s)}return s[0]}se.poseidonHashMany=h9});var Tv=K(Jr=>{"use strict";E();P();var p9=Jr&&Jr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),b9=Jr&&Jr.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ev=Jr&&Jr.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&p9(t,e,r);return b9(t,e),t};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.bytesToHex=Jr.hexToBytes=Jr.stark=Jr.secp256k1=void 0;Jr.secp256k1=Ev(av());Jr.stark=Ev(Sv());var Pv=gs();Object.defineProperty(Jr,"hexToBytes",{enumerable:!0,get:function(){return Pv.hexToBytes}});Object.defineProperty(Jr,"bytesToHex",{enumerable:!0,get:function(){return Pv.bytesToHex}})});var Av=K(Qr=>{"use strict";E();P();var g9=Qr&&Qr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),y9=Qr&&Qr.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),m0=Qr&&Qr.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&g9(t,e,r);return y9(t,e),t};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.schnorr=Qr.p256=Qr.ed25519=Qr.secp256k1=void 0;Qr.secp256k1=m0(Sy());Qr.ed25519=m0(Py());Qr.p256=m0(Oy());Qr.schnorr=m0(Tv())});var Ov=K(ja=>{"use strict";E();P();var v9=ja&&ja.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ja,"__esModule",{value:!0});ja.Decimal=void 0;var Yo=v9(mr()),Iv=100,fr=class{static fromUserInput(t,r){fr.verifyFractionalDigits(r);let n=t.match(/[^0-9.]/);if(n)throw new Error(`Invalid character at position ${n.index+1}`);let i,s;if(t.search(/\./)===-1)i=t,s="";else{let a=t.split(".");switch(a.length){case 0:case 1:throw new Error("Fewer than two elements in split result. This must not happen here.");case 2:if(!a[1])throw new Error("Fractional part missing");i=a[0],s=a[1].replace(/0+$/,"");break;default:throw new Error("More than one separator found")}}if(s.length>r)throw new Error("Got more fractional digits than supported");let o=`${i}${s.padEnd(r,"0")}`;return new fr(o,r)}static fromAtomics(t,r){return fr.verifyFractionalDigits(r),new fr(t,r)}static zero(t){return fr.verifyFractionalDigits(t),new fr("0",t)}static one(t){return fr.verifyFractionalDigits(t),new fr("1"+"0".repeat(t),t)}static verifyFractionalDigits(t){if(!Number.isInteger(t))throw new Error("Fractional digits is not an integer");if(t<0)throw new Error("Fractional digits must not be negative");if(t>Iv)throw new Error(`Fractional digits must not exceed ${Iv}`)}static compare(t,r){if(t.fractionalDigits!==r.fractionalDigits)throw new Error("Fractional digits do not match");return t.data.atomics.cmp(new Yo.default(r.atomics))}get atomics(){return this.data.atomics.toString()}get fractionalDigits(){return this.data.fractionalDigits}constructor(t,r){this.data={atomics:new Yo.default(t),fractionalDigits:r}}toString(){let t=new Yo.default(10).pow(new Yo.default(this.data.fractionalDigits)),r=this.data.atomics.div(t),n=this.data.atomics.mod(t);if(n.isZero())return r.toString();{let s=n.toString().padStart(this.data.fractionalDigits,"0").replace(/0+$/,"");return`${r.toString()}.${s}`}}toFloatApproximation(){let t=Number(this.toString());if(Number.isNaN(t))throw new Error("Conversion to number failed");return t}plus(t){if(this.fractionalDigits!==t.fractionalDigits)throw new Error("Fractional digits do not match");let r=this.data.atomics.add(new Yo.default(t.atomics));return new fr(r.toString(),this.fractionalDigits)}minus(t){if(this.fractionalDigits!==t.fractionalDigits)throw new Error("Fractional digits do not match");let r=this.data.atomics.sub(new Yo.default(t.atomics));if(r.ltn(0))throw new Error("Difference must not be negative");return new fr(r.toString(),this.fractionalDigits)}multiply(t){let r=this.data.atomics.mul(new Yo.default(t.toString()));return new fr(r.toString(),this.fractionalDigits)}equals(t){return fr.compare(this,t)===0}isLessThan(t){return fr.compare(this,t)<0}isLessThanOrEqual(t){return fr.compare(this,t)<=0}isGreaterThan(t){return fr.compare(this,t)>0}isGreaterThanOrEqual(t){return fr.compare(this,t)>=0}};ja.Decimal=fr});var Bv=K(Wn=>{"use strict";E();P();var m9=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.Uint64=Wn.Uint53=Wn.Int53=Wn.Uint32=void 0;var w0=m9(mr()),w9=new w0.default("18446744073709551615",10,"be"),Zo=class{static fromBigEndianBytes(t){return Zo.fromBytes(t)}static fromBytes(t,r="be"){if(t.length!==4)throw new Error("Invalid input length. Expected 4 bytes.");for(let i=0;i<t.length;++i)if(!Number.isInteger(t[i])||t[i]>255||t[i]<0)throw new Error("Invalid value in byte. Found: "+t[i]);let n=r==="be"?t:Array.from(t).reverse();return new Zo(n[0]*2**24+n[1]*2**16+n[2]*2**8+n[3])}static fromString(t){if(!t.match(/^[0-9]+$/))throw new Error("Invalid string format");return new Zo(Number.parseInt(t,10))}constructor(t){if(Number.isNaN(t))throw new Error("Input is not a number");if(!Number.isInteger(t))throw new Error("Input is not an integer");if(t<0||t>4294967295)throw new Error("Input not in uint32 range: "+t.toString());this.data=t}toBytesBigEndian(){return new Uint8Array([Math.floor(this.data/2**24)&255,Math.floor(this.data/2**16)&255,Math.floor(this.data/2**8)&255,Math.floor(this.data/2**0)&255])}toBytesLittleEndian(){return new Uint8Array([Math.floor(this.data/2**0)&255,Math.floor(this.data/2**8)&255,Math.floor(this.data/2**16)&255,Math.floor(this.data/2**24)&255])}toNumber(){return this.data}toString(){return this.data.toString()}};Wn.Uint32=Zo;var Jo=class{static fromString(t){if(!t.match(/^-?[0-9]+$/))throw new Error("Invalid string format");return new Jo(Number.parseInt(t,10))}constructor(t){if(Number.isNaN(t))throw new Error("Input is not a number");if(!Number.isInteger(t))throw new Error("Input is not an integer");if(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER)throw new Error("Input not in int53 range: "+t.toString());this.data=t}toNumber(){return this.data}toString(){return this.data.toString()}};Wn.Int53=Jo;var eu=class{static fromString(t){let r=Jo.fromString(t);return new eu(r.toNumber())}constructor(t){let r=new Jo(t);if(r.toNumber()<0)throw new Error("Input is negative");this.data=r}toNumber(){return this.data.toNumber()}toString(){return this.data.toString()}};Wn.Uint53=eu;var no=class{static fromBytesBigEndian(t){return no.fromBytes(t)}static fromBytes(t,r="be"){if(t.length!==8)throw new Error("Invalid input length. Expected 8 bytes.");for(let i=0;i<t.length;++i)if(!Number.isInteger(t[i])||t[i]>255||t[i]<0)throw new Error("Invalid value in byte. Found: "+t[i]);let n=r==="be"?Array.from(t):Array.from(t).reverse();return new no(new w0.default(n))}static fromString(t){if(!t.match(/^[0-9]+$/))throw new Error("Invalid string format");return new no(new w0.default(t,10,"be"))}static fromNumber(t){if(Number.isNaN(t))throw new Error("Input is not a number");if(!Number.isInteger(t))throw new Error("Input is not an integer");let r;try{r=new w0.default(t)}catch{throw new Error("Input is not a safe integer")}return new no(r)}constructor(t){if(t.isNeg())throw new Error("Input is negative");if(t.gt(w9))throw new Error("Input exceeds uint64 range");this.data=t}toBytesBigEndian(){return Uint8Array.from(this.data.toArray("be",8))}toBytesLittleEndian(){return Uint8Array.from(this.data.toArray("le",8))}toString(){return this.data.toString(10)}toNumber(){return this.data.toNumber()}};Wn.Uint64=no});var Mv=K(zn=>{"use strict";E();P();Object.defineProperty(zn,"__esModule",{value:!0});zn.Uint64=zn.Uint53=zn.Uint32=zn.Int53=zn.Decimal=void 0;var x9=Ov();Object.defineProperty(zn,"Decimal",{enumerable:!0,get:function(){return x9.Decimal}});var x0=Bv();Object.defineProperty(zn,"Int53",{enumerable:!0,get:function(){return x0.Int53}});Object.defineProperty(zn,"Uint32",{enumerable:!0,get:function(){return x0.Uint32}});Object.defineProperty(zn,"Uint53",{enumerable:!0,get:function(){return x0.Uint53}});Object.defineProperty(zn,"Uint64",{enumerable:!0,get:function(){return x0.Uint64}})});var Nv=K((kv,Fh)=>{E();P();var Hv=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function r(_,v,S){this.low=_|0,this.high=v|0,this.unsigned=!!S}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0});function n(_){return(_&&_.__isLong__)===!0}function i(_){var v=Math.clz32(_&-_);return _?31-v:v}r.isLong=n;var s={},o={};function a(_,v){var S,H,U;return v?(_>>>=0,(U=0<=_&&_<256)&&(H=o[_],H)?H:(S=u(_,0,!0),U&&(o[_]=S),S)):(_|=0,(U=-128<=_&&_<128)&&(H=s[_],H)?H:(S=u(_,_<0?-1:0,!1),U&&(s[_]=S),S))}r.fromInt=a;function c(_,v){if(isNaN(_))return v?R:k;if(v){if(_<0)return R;if(_>=x)return G}else{if(_<=-T)return B;if(_+1>=T)return j}return _<0?c(-_,v).neg():u(_%y|0,_/y|0,v)}r.fromNumber=c;function u(_,v,S){return new r(_,v,S)}r.fromBits=u;var f=Math.pow;function d(_,v,S){if(_.length===0)throw Error("empty string");if(typeof v=="number"?(S=v,v=!1):v=!!v,_==="NaN"||_==="Infinity"||_==="+Infinity"||_==="-Infinity")return v?R:k;if(S=S||10,S<2||36<S)throw RangeError("radix");var H;if((H=_.indexOf("-"))>0)throw Error("interior hyphen");if(H===0)return d(_.substring(1),v,S).neg();for(var U=c(f(S,8)),O=k,p=0;p<_.length;p+=8){var A=Math.min(8,_.length-p),F=parseInt(_.substring(p,p+A),S);if(A<8){var W=c(f(S,A));O=O.mul(W).add(c(F))}else O=O.mul(U),O=O.add(c(F))}return O.unsigned=v,O}r.fromString=d;function h(_,v){return typeof _=="number"?c(_,v):typeof _=="string"?d(_,v):u(_.low,_.high,typeof v=="boolean"?v:_.unsigned)}r.fromValue=h;var b=1<<16,g=1<<24,y=b*b,x=y*y,T=x/2,M=a(g),k=a(0);r.ZERO=k;var R=a(0,!0);r.UZERO=R;var C=a(1);r.ONE=C;var q=a(1,!0);r.UONE=q;var L=a(-1);r.NEG_ONE=L;var j=u(-1,2147483647,!1);r.MAX_VALUE=j;var G=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=G;var B=u(0,-2147483648,!1);r.MIN_VALUE=B;var l=r.prototype;l.toInt=function(){return this.unsigned?this.low>>>0:this.low},l.toNumber=function(){return this.unsigned?(this.high>>>0)*y+(this.low>>>0):this.high*y+(this.low>>>0)},l.toString=function(v){if(v=v||10,v<2||36<v)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(B)){var S=c(v),H=this.div(S),U=H.mul(S).sub(this);return H.toString(v)+U.toInt().toString(v)}else return"-"+this.neg().toString(v);for(var O=c(f(v,6),this.unsigned),p=this,A="";;){var F=p.div(O),W=p.sub(F.mul(O)).toInt()>>>0,Z=W.toString(v);if(p=F,p.isZero())return Z+A;for(;Z.length<6;)Z="0"+Z;A=""+Z+A}},l.getHighBits=function(){return this.high},l.getHighBitsUnsigned=function(){return this.high>>>0},l.getLowBits=function(){return this.low},l.getLowBitsUnsigned=function(){return this.low>>>0},l.getNumBitsAbs=function(){if(this.isNegative())return this.eq(B)?64:this.neg().getNumBitsAbs();for(var v=this.high!=0?this.high:this.low,S=31;S>0&&(v&1<<S)==0;S--);return this.high!=0?S+33:S+1},l.isZero=function(){return this.high===0&&this.low===0},l.eqz=l.isZero,l.isNegative=function(){return!this.unsigned&&this.high<0},l.isPositive=function(){return this.unsigned||this.high>=0},l.isOdd=function(){return(this.low&1)===1},l.isEven=function(){return(this.low&1)===0},l.equals=function(v){return n(v)||(v=h(v)),this.unsigned!==v.unsigned&&this.high>>>31===1&&v.high>>>31===1?!1:this.high===v.high&&this.low===v.low},l.eq=l.equals,l.notEquals=function(v){return!this.eq(v)},l.neq=l.notEquals,l.ne=l.notEquals,l.lessThan=function(v){return this.comp(v)<0},l.lt=l.lessThan,l.lessThanOrEqual=function(v){return this.comp(v)<=0},l.lte=l.lessThanOrEqual,l.le=l.lessThanOrEqual,l.greaterThan=function(v){return this.comp(v)>0},l.gt=l.greaterThan,l.greaterThanOrEqual=function(v){return this.comp(v)>=0},l.gte=l.greaterThanOrEqual,l.ge=l.greaterThanOrEqual,l.compare=function(v){if(n(v)||(v=h(v)),this.eq(v))return 0;var S=this.isNegative(),H=v.isNegative();return S&&!H?-1:!S&&H?1:this.unsigned?v.high>>>0>this.high>>>0||v.high===this.high&&v.low>>>0>this.low>>>0?-1:1:this.sub(v).isNegative()?-1:1},l.comp=l.compare,l.negate=function(){return!this.unsigned&&this.eq(B)?B:this.not().add(C)},l.neg=l.negate,l.add=function(v){n(v)||(v=h(v));var S=this.high>>>16,H=this.high&65535,U=this.low>>>16,O=this.low&65535,p=v.high>>>16,A=v.high&65535,F=v.low>>>16,W=v.low&65535,Z=0,Q=0,te=0,ee=0;return ee+=O+W,te+=ee>>>16,ee&=65535,te+=U+F,Q+=te>>>16,te&=65535,Q+=H+A,Z+=Q>>>16,Q&=65535,Z+=S+p,Z&=65535,u(te<<16|ee,Z<<16|Q,this.unsigned)},l.subtract=function(v){return n(v)||(v=h(v)),this.add(v.neg())},l.sub=l.subtract,l.multiply=function(v){if(this.isZero())return this;if(n(v)||(v=h(v)),t){var S=t.mul(this.low,this.high,v.low,v.high);return u(S,t.get_high(),this.unsigned)}if(v.isZero())return this.unsigned?R:k;if(this.eq(B))return v.isOdd()?B:k;if(v.eq(B))return this.isOdd()?B:k;if(this.isNegative())return v.isNegative()?this.neg().mul(v.neg()):this.neg().mul(v).neg();if(v.isNegative())return this.mul(v.neg()).neg();if(this.lt(M)&&v.lt(M))return c(this.toNumber()*v.toNumber(),this.unsigned);var H=this.high>>>16,U=this.high&65535,O=this.low>>>16,p=this.low&65535,A=v.high>>>16,F=v.high&65535,W=v.low>>>16,Z=v.low&65535,Q=0,te=0,ee=0,it=0;return it+=p*Z,ee+=it>>>16,it&=65535,ee+=O*Z,te+=ee>>>16,ee&=65535,ee+=p*W,te+=ee>>>16,ee&=65535,te+=U*Z,Q+=te>>>16,te&=65535,te+=O*W,Q+=te>>>16,te&=65535,te+=p*F,Q+=te>>>16,te&=65535,Q+=H*Z+U*W+O*F+p*A,Q&=65535,u(ee<<16|it,Q<<16|te,this.unsigned)},l.mul=l.multiply,l.divide=function(v){if(n(v)||(v=h(v)),v.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&v.low===-1&&v.high===-1)return this;var S=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,v.low,v.high);return u(S,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?R:k;var H,U,O;if(this.unsigned){if(v.unsigned||(v=v.toUnsigned()),v.gt(this))return R;if(v.gt(this.shru(1)))return q;O=R}else{if(this.eq(B)){if(v.eq(C)||v.eq(L))return B;if(v.eq(B))return C;var p=this.shr(1);return H=p.div(v).shl(1),H.eq(k)?v.isNegative()?C:L:(U=this.sub(v.mul(H)),O=H.add(U.div(v)),O)}else if(v.eq(B))return this.unsigned?R:k;if(this.isNegative())return v.isNegative()?this.neg().div(v.neg()):this.neg().div(v).neg();if(v.isNegative())return this.div(v.neg()).neg();O=k}for(U=this;U.gte(v);){H=Math.max(1,Math.floor(U.toNumber()/v.toNumber()));for(var A=Math.ceil(Math.log(H)/Math.LN2),F=A<=48?1:f(2,A-48),W=c(H),Z=W.mul(v);Z.isNegative()||Z.gt(U);)H-=F,W=c(H,this.unsigned),Z=W.mul(v);W.isZero()&&(W=C),O=O.add(W),U=U.sub(Z)}return O},l.div=l.divide,l.modulo=function(v){if(n(v)||(v=h(v)),t){var S=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,v.low,v.high);return u(S,t.get_high(),this.unsigned)}return this.sub(this.div(v).mul(v))},l.mod=l.modulo,l.rem=l.modulo,l.not=function(){return u(~this.low,~this.high,this.unsigned)},l.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},l.clz=l.countLeadingZeros,l.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},l.ctz=l.countTrailingZeros,l.and=function(v){return n(v)||(v=h(v)),u(this.low&v.low,this.high&v.high,this.unsigned)},l.or=function(v){return n(v)||(v=h(v)),u(this.low|v.low,this.high|v.high,this.unsigned)},l.xor=function(v){return n(v)||(v=h(v)),u(this.low^v.low,this.high^v.high,this.unsigned)},l.shiftLeft=function(v){return n(v)&&(v=v.toInt()),(v&=63)===0?this:v<32?u(this.low<<v,this.high<<v|this.low>>>32-v,this.unsigned):u(0,this.low<<v-32,this.unsigned)},l.shl=l.shiftLeft,l.shiftRight=function(v){return n(v)&&(v=v.toInt()),(v&=63)===0?this:v<32?u(this.low>>>v|this.high<<32-v,this.high>>v,this.unsigned):u(this.high>>v-32,this.high>=0?0:-1,this.unsigned)},l.shr=l.shiftRight,l.shiftRightUnsigned=function(v){return n(v)&&(v=v.toInt()),(v&=63)===0?this:v<32?u(this.low>>>v|this.high<<32-v,this.high>>>v,this.unsigned):v===32?u(this.high,0,this.unsigned):u(this.high>>>v-32,0,this.unsigned)},l.shru=l.shiftRightUnsigned,l.shr_u=l.shiftRightUnsigned,l.rotateLeft=function(v){var S;return n(v)&&(v=v.toInt()),(v&=63)===0?this:v===32?u(this.high,this.low,this.unsigned):v<32?(S=32-v,u(this.low<<v|this.high>>>S,this.high<<v|this.low>>>S,this.unsigned)):(v-=32,S=32-v,u(this.high<<v|this.low>>>S,this.low<<v|this.high>>>S,this.unsigned))},l.rotl=l.rotateLeft,l.rotateRight=function(v){var S;return n(v)&&(v=v.toInt()),(v&=63)===0?this:v===32?u(this.high,this.low,this.unsigned):v<32?(S=32-v,u(this.high<<S|this.low>>>v,this.low<<S|this.high>>>v,this.unsigned)):(v-=32,S=32-v,u(this.low<<S|this.high>>>v,this.high<<S|this.low>>>v,this.unsigned))},l.rotr=l.rotateRight,l.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},l.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},l.toBytes=function(v){return v?this.toBytesLE():this.toBytesBE()},l.toBytesLE=function(){var v=this.high,S=this.low;return[S&255,S>>>8&255,S>>>16&255,S>>>24,v&255,v>>>8&255,v>>>16&255,v>>>24]},l.toBytesBE=function(){var v=this.high,S=this.low;return[v>>>24,v>>>16&255,v>>>8&255,v&255,S>>>24,S>>>16&255,S>>>8&255,S&255]},r.fromBytes=function(v,S,H){return H?r.fromBytesLE(v,S):r.fromBytesBE(v,S)},r.fromBytesLE=function(v,S){return new r(v[0]|v[1]<<8|v[2]<<16|v[3]<<24,v[4]|v[5]<<8|v[6]<<16|v[7]<<24,S)},r.fromBytesBE=function(v,S){return new r(v[4]<<24|v[5]<<16|v[6]<<8|v[7],v[0]<<24|v[1]<<16|v[2]<<8|v[3],S)};var w=r;return e.default=w,"default"in e?e.default:e}({});typeof define=="function"&&define.amd?define([],function(){return Hv}):typeof Fh=="object"&&typeof kv=="object"&&(Fh.exports=Hv)});var em=K(je=>{"use strict";E();P();Object.defineProperty(je,"__esModule",{value:!0});je.utils=je.schnorr=je.verify=je.signSync=je.sign=je.getSharedSecret=je.recoverPublicKey=je.getPublicKey=je.Signature=je.Point=je.CURVE=void 0;var _9=k1(),Fe=BigInt(0),_t=BigInt(1),oo=BigInt(2),ru=BigInt(3),Cv=BigInt(8),dt=Object.freeze({a:Fe,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:_t,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});je.CURVE=dt;var qv=(e,t)=>(e+t/oo)/t,_0={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){let{n:t}=dt,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-_t*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=qv(s*e,t),c=qv(-n*e,t),u=ne(e-a*r-c*i,t),f=ne(-a*n-c*s,t),d=u>o,h=f>o;if(d&&(u=t-u),h&&(f=t-f),u>o||f>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:h,k2:f}}},Pi=32,Qo=32,Fv=32,A0=Pi+1,I0=2*Pi+1;function Rv(e){let{a:t,b:r}=dt,n=ne(e*e),i=ne(n*e);return ne(i+t*e+r)}var S0=dt.a===Fe,iu=class extends Error{constructor(t){super(t)}};function Uv(e){if(!(e instanceof Ye))throw new TypeError("JacobianPoint expected")}var Ye=class{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof $e))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals($e.ZERO)?Ye.ZERO:new Ye(t.x,t.y,_t)}static toAffineBatch(t){let r=A9(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return Ye.toAffineBatch(t).map(Ye.fromAffine)}equals(t){Uv(t);let{x:r,y:n,z:i}=this,{x:s,y:o,z:a}=t,c=ne(i*i),u=ne(a*a),f=ne(r*u),d=ne(s*c),h=ne(ne(n*a)*u),b=ne(ne(o*i)*c);return f===d&&h===b}negate(){return new Ye(this.x,ne(-this.y),this.z)}double(){let{x:t,y:r,z:n}=this,i=ne(t*t),s=ne(r*r),o=ne(s*s),a=t+s,c=ne(oo*(ne(a*a)-i-o)),u=ne(ru*i),f=ne(u*u),d=ne(f-oo*c),h=ne(u*(c-d)-Cv*o),b=ne(oo*r*n);return new Ye(d,h,b)}add(t){Uv(t);let{x:r,y:n,z:i}=this,{x:s,y:o,z:a}=t;if(s===Fe||o===Fe)return this;if(r===Fe||n===Fe)return t;let c=ne(i*i),u=ne(a*a),f=ne(r*u),d=ne(s*c),h=ne(ne(n*a)*u),b=ne(ne(o*i)*c),g=ne(d-f),y=ne(b-h);if(g===Fe)return y===Fe?this.double():Ye.ZERO;let x=ne(g*g),T=ne(g*x),M=ne(f*x),k=ne(y*y-T-oo*M),R=ne(y*(M-k)-h*T),C=ne(i*a*g);return new Ye(k,R,C)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let r=Ye.ZERO;if(typeof t=="bigint"&&t===Fe)return r;let n=Dv(t);if(n===_t)return this;if(!S0){let d=r,h=this;for(;n>Fe;)n&_t&&(d=d.add(h)),h=h.double(),n>>=_t;return d}let{k1neg:i,k1:s,k2neg:o,k2:a}=_0.splitScalar(n),c=r,u=r,f=this;for(;s>Fe||a>Fe;)s&_t&&(c=c.add(f)),a&_t&&(u=u.add(f)),f=f.double(),s>>=_t,a>>=_t;return i&&(c=c.negate()),o&&(u=u.negate()),u=new Ye(ne(u.x*_0.beta),u.y,u.z),c.add(u)}precomputeWindow(t){let r=S0?128/t+1:256/t+1,n=[],i=this,s=i;for(let o=0;o<r;o++){s=i,n.push(s);for(let a=1;a<2**(t-1);a++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(t,r){!r&&this.equals(Ye.BASE)&&(r=$e.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&Wh.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=Ye.normalizeZ(i),Wh.set(r,i)));let s=Ye.ZERO,o=Ye.BASE,a=1+(S0?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),f=2**n,d=BigInt(n);for(let h=0;h<a;h++){let b=h*c,g=Number(t&u);t>>=d,g>c&&(g-=f,t+=_t);let y=b,x=b+Math.abs(g)-1,T=h%2!==0,M=g<0;g===0?o=o.add(E0(T,i[y])):s=s.add(E0(M,i[x]))}return{p:s,f:o}}multiply(t,r){let n=Dv(t),i,s;if(S0){let{k1neg:o,k1:a,k2neg:c,k2:u}=_0.splitScalar(n),{p:f,f:d}=this.wNAF(a,r),{p:h,f:b}=this.wNAF(u,r);f=E0(o,f),h=E0(c,h),h=new Ye(ne(h.x*_0.beta),h.y,h.z),i=f.add(h),s=d.add(b)}else{let{p:o,f:a}=this.wNAF(n,r);i=o,s=a}return Ye.normalizeZ([i,s])[0]}toAffine(t){let{x:r,y:n,z:i}=this,s=this.equals(Ye.ZERO);t==null&&(t=s?Cv:za(i));let o=t,a=ne(o*o),c=ne(a*o),u=ne(r*a),f=ne(n*c),d=ne(i*o);if(s)return $e.ZERO;if(d!==_t)throw new Error("invZ was invalid");return new $e(u,f)}};Ye.BASE=new Ye(dt.Gx,dt.Gy,_t);Ye.ZERO=new Ye(Fe,_t,Fe);function E0(e,t){let r=t.negate();return e?r:t}var Wh=new WeakMap,$e=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,Wh.delete(this)}hasEvenY(){return this.y%oo===Fe}static fromCompressedHex(t){let r=t.length===32,n=Bn(r?t:t.subarray(1));if(!T0(n))throw new Error("Point is not on curve");let i=Rv(n),s=T9(i),o=(s&_t)===_t;r?o&&(s=ne(-s)):(t[0]&1)===1!==o&&(s=ne(-s));let a=new $e(n,s);return a.assertValidity(),a}static fromUncompressedHex(t){let r=Bn(t.subarray(1,Pi+1)),n=Bn(t.subarray(Pi+1,Pi*2+1)),i=new $e(r,n);return i.assertValidity(),i}static fromHex(t){let r=Vi(t),n=r.length,i=r[0];if(n===Pi)return this.fromCompressedHex(r);if(n===A0&&(i===2||i===3))return this.fromCompressedHex(r);if(n===I0&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${A0} compressed bytes or ${I0} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return $e.BASE.multiply(ea(t))}static fromSignature(t,r,n){let{r:i,s}=zv(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let o=zh(Vi(t)),{n:a}=dt,c=n===2||n===3?i+a:i,u=za(c,a),f=ne(-o*u,a),d=ne(s*u,a),h=n&1?"03":"02",b=$e.fromHex(h+ao(c)),g=$e.BASE.multiplyAndAddUnsafe(b,f,d);if(!g)throw new Error("Cannot recover signature: point at infinify");return g.assertValidity(),g}toRawBytes(t=!1){return co(this.toHex(t))}toHex(t=!1){let r=ao(this.x);return t?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${ao(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:r,y:n}=this;if(!T0(r)||!T0(n))throw new Error(t);let i=ne(n*n),s=Rv(r);if(ne(i-s)!==Fe)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new $e(this.x,ne(-this.y))}double(){return Ye.fromAffine(this).double().toAffine()}add(t){return Ye.fromAffine(this).add(Ye.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Ye.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,r,n){let i=Ye.fromAffine(this),s=r===Fe||r===_t||this!==$e.BASE?i.multiplyUnsafe(r):i.multiply(r),o=Ye.fromAffine(t).multiplyUnsafe(n),a=s.add(o);return a.equals(Ye.ZERO)?void 0:a.toAffine()}};je.Point=$e;$e.BASE=new $e(dt.Gx,dt.Gy);$e.ZERO=new $e(Fe,Fe);function Lv(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function jv(e){if(e.length<2||e[0]!==2)throw new Error(`Invalid signature integer tag: ${Ka(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Bn(r),left:e.subarray(t+2)}}function S9(e){if(e.length<2||e[0]!=48)throw new Error(`Invalid signature tag: ${Ka(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:r}=jv(e.subarray(2)),{data:n,left:i}=jv(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Ka(i)}`);return{r:t,s:n}}var Ti=class{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromCompact(t){let r=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?Ka(t):t;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new Ti(O0(i.slice(0,64)),O0(i.slice(64,128)))}static fromDER(t){let r=t instanceof Uint8Array;if(typeof t!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=S9(r?t:co(t));return new Ti(n,i)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!Wa(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Wa(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=dt.n>>_t;return this.s>t}normalizeS(){return this.hasHighS()?new Ti(this.r,ne(-this.s,dt.n)):this}toDERRawBytes(){return co(this.toDERHex())}toDERHex(){let t=Lv(tu(this.s)),r=Lv(tu(this.r)),n=t.length/2,i=r.length/2,s=tu(n),o=tu(i);return`30${tu(i+n+4)}02${o}${r}02${s}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return co(this.toCompactHex())}toCompactHex(){return ao(this.r)+ao(this.s)}};je.Signature=Ti;function so(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let s=e[n];r.set(s,i),i+=s.length}return r}var E9=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ka(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=E9[e[r]];return t}var P9=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function ao(e){if(typeof e!="bigint")throw new Error("Expected bigint");if(!(Fe<=e&&e<P9))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function Fa(e){let t=co(ao(e));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function tu(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function O0(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function co(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function Bn(e){return O0(Ka(e))}function Vi(e){return e instanceof Uint8Array?Uint8Array.from(e):co(e)}function Dv(e){if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if(typeof e=="bigint"&&Wa(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function ne(e,t=dt.P){let r=e%t;return r>=Fe?r:t+r}function Vn(e,t){let{P:r}=dt,n=e;for(;t-- >Fe;)n*=n,n%=r;return n}function T9(e){let{P:t}=dt,r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),c=e*e*e%t,u=c*c*e%t,f=Vn(u,ru)*u%t,d=Vn(f,ru)*u%t,h=Vn(d,oo)*c%t,b=Vn(h,n)*h%t,g=Vn(b,i)*b%t,y=Vn(g,o)*g%t,x=Vn(y,a)*y%t,T=Vn(x,o)*g%t,M=Vn(T,ru)*u%t,k=Vn(M,s)*b%t,R=Vn(k,r)*c%t,C=Vn(R,oo);if(C*C%t!==e)throw new Error("Cannot find square root");return C}function za(e,t=dt.P){if(e===Fe||t<=Fe)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=ne(e,t),n=t,i=Fe,s=_t,o=_t,a=Fe;for(;r!==Fe;){let u=n/r,f=n%r,d=i-o*u,h=s-a*u;n=r,r=f,i=o,s=a,o=d,a=h}if(n!==_t)throw new Error("invert: does not exist");return ne(i,t)}function A9(e,t=dt.P){let r=new Array(e.length),n=e.reduce((s,o,a)=>o===Fe?s:(r[a]=s,ne(s*o,t)),_t),i=za(n,t);return e.reduceRight((s,o,a)=>o===Fe?s:(r[a]=ne(s*r[a],t),ne(s*o,t)),i),r}function I9(e){let t=e.length*8-Qo*8,r=Bn(e);return t>0?r>>BigInt(t):r}function zh(e,t=!1){let r=I9(e);if(t)return r;let{n}=dt;return r>=n?r-n:r}var Da,nu,B0=class{constructor(t,r){if(this.hashLen=t,this.qByteLen=r,typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return je.utils.hmacSha256(this.k,...t)}hmacSync(...t){return nu(this.k,...t)}checkSync(){if(typeof nu!="function")throw new iu("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),t.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),t.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0,r=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);let n=this.v.slice();r.push(n),t+=this.v.length}return so(...r)}generateSync(){this.checkSync(),this.incr();let t=0,r=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);let n=this.v.slice();r.push(n),t+=this.v.length}return so(...r)}};function Wa(e){return Fe<e&&e<dt.n}function T0(e){return Fe<e&&e<dt.P}function Wv(e,t,r,n=!0){let{n:i}=dt,s=zh(e,!0);if(!Wa(s))return;let o=za(s,i),a=$e.BASE.multiply(s),c=ne(a.x,i);if(c===Fe)return;let u=ne(o*ne(t+r*c,i),i);if(u===Fe)return;let f=new Ti(c,u),d=(a.x===f.r?0:2)|Number(a.y&_t);return n&&f.hasHighS()&&(f=f.normalizeS(),d^=1),{sig:f,recovery:d}}function ea(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==2*Qo)throw new Error("Expected 32 bytes of private key");t=O0(e)}else if(e instanceof Uint8Array){if(e.length!==Qo)throw new Error("Expected 32 bytes of private key");t=Bn(e)}else throw new TypeError("Expected valid private key");if(!Wa(t))throw new Error("Expected private key: 0 < key < n");return t}function Vh(e){return e instanceof $e?(e.assertValidity(),e):$e.fromHex(e)}function zv(e){if(e instanceof Ti)return e.assertValidity(),e;try{return Ti.fromDER(e)}catch{return Ti.fromCompact(e)}}function O9(e,t=!1){return $e.fromPrivateKey(e).toRawBytes(t)}je.getPublicKey=O9;function B9(e,t,r,n=!1){return $e.fromSignature(e,t,r).toRawBytes(n)}je.recoverPublicKey=B9;function Kv(e){let t=e instanceof Uint8Array,r=typeof e=="string",n=(t||r)&&e.length;return t?n===A0||n===I0:r?n===A0*2||n===I0*2:e instanceof $e}function M9(e,t,r=!1){if(Kv(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!Kv(t))throw new TypeError("getSharedSecret: second arg must be public key");let n=Vh(t);return n.assertValidity(),n.multiply(ea(e)).toRawBytes(r)}je.getSharedSecret=M9;function Vv(e){let t=e.length>Pi?e.slice(0,Pi):e;return Bn(t)}function H9(e){let t=Vv(e),r=ne(t,dt.n);return Gv(r<Fe?t:r)}function Gv(e){return Fa(e)}function $v(e,t,r){if(e==null)throw new Error(`sign: expected valid message hash, not "${e}"`);let n=Vi(e),i=ea(t),s=[Gv(i),H9(n)];if(r!=null){r===!0&&(r=je.utils.randomBytes(Pi));let c=Vi(r);if(c.length!==Pi)throw new Error(`sign: Expected ${Pi} bytes of extra data`);s.push(c)}let o=so(...s),a=Vv(n);return{seed:o,m:a,d:i}}function Xv(e,t){let{sig:r,recovery:n}=e,{der:i,recovered:s}=Object.assign({canonical:!0,der:!0},t),o=i?r.toDERRawBytes():r.toCompactRawBytes();return s?[o,n]:o}async function k9(e,t,r={}){let{seed:n,m:i,d:s}=$v(e,t,r.extraEntropy),o=new B0(Fv,Qo);await o.reseed(n);let a;for(;!(a=Wv(await o.generate(),i,s,r.canonical));)await o.reseed();return Xv(a,r)}je.sign=k9;function N9(e,t,r={}){let{seed:n,m:i,d:s}=$v(e,t,r.extraEntropy),o=new B0(Fv,Qo);o.reseedSync(n);let a;for(;!(a=Wv(o.generateSync(),i,s,r.canonical));)o.reseedSync();return Xv(a,r)}je.signSync=N9;var C9={strict:!0};function q9(e,t,r,n=C9){let i;try{i=zv(e),t=Vi(t)}catch{return!1}let{r:s,s:o}=i;if(n.strict&&i.hasHighS())return!1;let a=zh(t),c;try{c=Vh(r)}catch{return!1}let{n:u}=dt,f=za(o,u),d=ne(a*f,u),h=ne(s*f,u),b=$e.BASE.multiplyAndAddUnsafe(c,d,h);return b?ne(b.x,u)===s:!1}je.verify=q9;function M0(e){return ne(Bn(e),dt.n)}var uo=class{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=Vi(t);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=Bn(r.subarray(0,32)),i=Bn(r.subarray(32,64));return new uo(n,i)}assertValidity(){let{r:t,s:r}=this;if(!T0(t)||!Wa(r))throw new Error("Invalid signature")}toHex(){return ao(this.r)+ao(this.s)}toRawBytes(){return co(this.toHex())}};function R9(e){return $e.fromPrivateKey(e).toRawX()}var H0=class{constructor(t,r,n=je.utils.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);this.m=Vi(t);let{x:i,scalar:s}=this.getScalar(ea(r));if(this.px=i,this.d=s,this.rand=Vi(n),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(t){let r=$e.fromPrivateKey(t),n=r.hasEvenY()?t:dt.n-t;return{point:r,scalar:n,x:r.toRawX()}}initNonce(t,r){return Fa(t^Bn(r))}finalizeNonce(t){let r=ne(Bn(t),dt.n);if(r===Fe)throw new Error("sign: Creation of signature failed. k is zero");let{point:n,x:i,scalar:s}=this.getScalar(r);return{R:n,rx:i,k:s}}finalizeSig(t,r,n,i){return new uo(t.x,ne(r+n*i,dt.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){let{m:t,d:r,px:n,rand:i}=this,s=je.utils.taggedHash,o=this.initNonce(r,await s(io.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(await s(io.nonce,o,n,t)),f=M0(await s(io.challenge,c,n,t)),d=this.finalizeSig(a,u,f,r);return await Jv(d,t,n)||this.error(),d}calcSync(){let{m:t,d:r,px:n,rand:i}=this,s=je.utils.taggedHashSync,o=this.initNonce(r,s(io.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(s(io.nonce,o,n,t)),f=M0(s(io.challenge,c,n,t)),d=this.finalizeSig(a,u,f,r);return Qv(d,t,n)||this.error(),d}};async function U9(e,t,r){return new H0(e,t,r).calc()}function L9(e,t,r){return new H0(e,t,r).calcSync()}function Yv(e,t,r){let n=e instanceof uo,i=n?e:uo.fromHex(e);return n&&i.assertValidity(),{...i,m:Vi(t),P:Vh(r)}}function Zv(e,t,r,n){let i=$e.BASE.multiplyAndAddUnsafe(t,ea(r),ne(-n,dt.n));return!(!i||!i.hasEvenY()||i.x!==e)}async function Jv(e,t,r){try{let{r:n,s:i,m:s,P:o}=Yv(e,t,r),a=M0(await je.utils.taggedHash(io.challenge,Fa(n),o.toRawX(),s));return Zv(n,o,i,a)}catch{return!1}}function Qv(e,t,r){try{let{r:n,s:i,m:s,P:o}=Yv(e,t,r),a=M0(je.utils.taggedHashSync(io.challenge,Fa(n),o.toRawX(),s));return Zv(n,o,i,a)}catch(n){if(n instanceof iu)throw n;return!1}}je.schnorr={Signature:uo,getPublicKey:R9,sign:U9,verify:Jv,signSync:L9,verifySync:Qv};$e.BASE._setWindowSize(8);var On={node:_9,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},io={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},P0={};je.utils={bytesToHex:Ka,hexToBytes:co,concatBytes:so,mod:ne,invert:za,isValidPrivateKey(e){try{return ea(e),!0}catch{return!1}},_bigintTo32Bytes:Fa,_normalizePrivateKey:ea,hashToPrivateKey:e=>{e=Vi(e);let t=Qo+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=ne(Bn(e),dt.n-_t)+_t;return Fa(r)},randomBytes:(e=32)=>{if(On.web)return On.web.getRandomValues(new Uint8Array(e));if(On.node){let{randomBytes:t}=On.node;return Uint8Array.from(t(e))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>je.utils.hashToPrivateKey(je.utils.randomBytes(Qo+8)),precompute(e=8,t=$e.BASE){let r=t===$e.BASE?t:new $e(t.x,t.y);return r._setWindowSize(e),r.multiply(ru),r},sha256:async(...e)=>{if(On.web){let t=await On.web.subtle.digest("SHA-256",so(...e));return new Uint8Array(t)}else if(On.node){let{createHash:t}=On.node,r=t("sha256");return e.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(On.web){let r=await On.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=so(...t),i=await On.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(On.node){let{createHmac:r}=On.node,n=r("sha256",e);return t.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=P0[e];if(r===void 0){let n=await je.utils.sha256(Uint8Array.from(e,i=>i.charCodeAt(0)));r=so(n,n),P0[e]=r}return je.utils.sha256(r,...t)},taggedHashSync:(e,...t)=>{if(typeof Da!="function")throw new iu("sha256Sync is undefined, you need to set it");let r=P0[e];if(r===void 0){let n=Da(Uint8Array.from(e,i=>i.charCodeAt(0)));r=so(n,n),P0[e]=r}return Da(r,...t)},_JacobianPoint:Ye};Object.defineProperties(je.utils,{sha256Sync:{configurable:!1,get(){return Da},set(e){Da||(Da=e)}},hmacSha256Sync:{configurable:!1,get(){return nu},set(e){nu||(nu=e)}}})});var ft=K(ge=>{"use strict";E();P();var tm=ge&&ge.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),j9=ge&&ge.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Mn=ge&&ge.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&tm(t,e,r);return j9(t,e),t},rm=ge&&ge.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&tm(t,e,r)},k0=ge&&ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ge,"__esModule",{value:!0});ge.rsa=ge.cryptoJS=ge.secp256k1=ge.ed25519=ge.Long=ge._m0=ge.protobuf=ge.typeforce=ge.safeBuffer=ge.BigNumber=ge.BN=ge.math=ge.signUtil=ge.abi=ge.elliptic=ge.bip39=ge.bip32=ge.base=void 0;ge.base=Mn(Ro());ge.bip32=Mn(F2());ge.bip39=Mn(ny());ge.elliptic=Mn(ka());ge.abi=Mn(yy());ge.signUtil=Mn(Av());ge.math=Mn(Mv());var D9=k0(mr());ge.BN=D9.default;var K9=k0(G4());ge.BigNumber=K9.default;var F9=k0(M1());ge.safeBuffer=F9.default;var W9=C1();ge.typeforce=W9;ge.protobuf=Mn($4());ge._m0=Mn(X4());var z9=k0(Nv());ge.Long=z9.default;ge.ed25519=Mn(Y4());ge.secp256k1=Mn(em());rm((J4(),B1(Z4)),ge);rm((e6(),B1(Q4)),ge);var V9=Mn(Kl());ge.cryptoJS=V9;var G9=Mn(N1());ge.rsa=G9});var en=K(le=>{"use strict";E();P();Object.defineProperty(le,"__esModule",{value:!0});le.oneOf=le.Null=le.BufferN=le.Function=le.UInt32=le.UInt8=le.tuple=le.maybe=le.Hex=le.Buffer=le.String=le.Boolean=le.Array=le.Number=le.Hash256bit=le.Hash160bit=le.Buffer256bit=le.isTaptree=le.isTapleaf=le.TAPLEAF_VERSION_MASK=le.Satoshi=le.Signer=le.BIP32Path=le.UInt31=le.isPoint=le.typeforce=void 0;var N0=Cu(),Xt=ft();Object.defineProperty(le,"typeforce",{enumerable:!0,get:function(){return Xt.typeforce}});var nm=N0.Buffer.alloc(32,0),im=N0.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function $9(e){if(!N0.Buffer.isBuffer(e)||e.length<33)return!1;let t=e[0],r=e.slice(1,33);if(r.compare(nm)===0||r.compare(im)>=0)return!1;if((t===2||t===3)&&e.length===33)return!0;let n=e.slice(33);return n.compare(nm)===0||n.compare(im)>=0?!1:t===4&&e.length===65}le.isPoint=$9;var X9=Math.pow(2,31)-1;function Y9(e){return Xt.typeforce.UInt32(e)&&e<=X9}le.UInt31=Y9;function sm(e){return Xt.typeforce.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}le.BIP32Path=sm;sm.toJSON=()=>"BIP32 derivation path";function Z9(e){return(Xt.typeforce.Buffer(e.publicKey)||typeof e.getPublicKey=="function")&&typeof e.sign=="function"}le.Signer=Z9;var J9=21*1e14;function Q9(e){return Xt.typeforce.UInt53(e)&&e<=J9}le.Satoshi=Q9;le.TAPLEAF_VERSION_MASK=254;function om(e){return!e||!("output"in e)||!N0.Buffer.isBuffer(e.output)?!1:e.version!==void 0?(e.version&le.TAPLEAF_VERSION_MASK)===e.version:!0}le.isTapleaf=om;function am(e){return(0,le.Array)(e)?e.length!==2?!1:e.every(t=>am(t)):om(e)}le.isTaptree=am;le.Buffer256bit=Xt.typeforce.BufferN(32);le.Hash160bit=Xt.typeforce.BufferN(20);le.Hash256bit=Xt.typeforce.BufferN(32);le.Number=Xt.typeforce.Number;le.Array=Xt.typeforce.Array;le.Boolean=Xt.typeforce.Boolean;le.String=Xt.typeforce.String;le.Buffer=Xt.typeforce.Buffer;le.Hex=Xt.typeforce.Hex;le.maybe=Xt.typeforce.maybe;le.tuple=Xt.typeforce.tuple;le.UInt8=Xt.typeforce.UInt8;le.UInt32=Xt.typeforce.UInt32;le.Function=Xt.typeforce.Function;le.BufferN=Xt.typeforce.BufferN;le.Null=Xt.typeforce.Null;le.oneOf=Xt.typeforce.oneOf});var hm=K(Gn=>{"use strict";E();P();var eP=Gn&&Gn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),tP=Gn&&Gn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),dm=Gn&&Gn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&eP(t,e,r);return tP(t,e),t};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.encode=Gn.decode=void 0;var lm=dm(ul()),Gh=dm(en()),{typeforce:rP}=Gh,cm=m.Buffer.alloc(1,0);function um(e){let t=0;for(;e[t]===0;)++t;return t===e.length?cm:(e=e.slice(t),e[0]&128?m.Buffer.concat([cm,e],1+e.length):e)}function fm(e){e[0]===0&&(e=e.slice(1));let t=m.Buffer.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}function nP(e){let t=e.readUInt8(e.length-1),r=t&-193;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);let n=lm.decode(e.slice(0,-1)),i=fm(n.r),s=fm(n.s);return{signature:m.Buffer.concat([i,s],64),hashType:t}}Gn.decode=nP;function iP(e,t){rP({signature:Gh.BufferN(64),hashType:Gh.UInt8},{signature:e,hashType:t});let r=t&-193;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);let n=m.Buffer.allocUnsafe(1);n.writeUInt8(t,0);let i=um(e.slice(0,32)),s=um(e.slice(32,64));return m.Buffer.concat([lm.encode(i,s),n])}Gn.encode=iP});var xr=K(rt=>{"use strict";E();P();var sP=rt&&rt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),oP=rt&&rt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ou=rt&&rt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&sP(t,e,r);return oP(t,e),t};Object.defineProperty(rt,"__esModule",{value:!0});rt.signature=rt.number=rt.isCanonicalScriptSignature=rt.isDefinedHashType=rt.isCanonicalPubKey=rt.toStack=rt.fromASM=rt.toASM=rt.decompile=rt.compile=rt.isPushOnly=rt.OPS=void 0;var aP=ou(ul()),vn=Oo();Object.defineProperty(rt,"OPS",{enumerable:!0,get:function(){return vn.OPS}});var $h=ou(U1()),pm=ou(L1()),cP=ou(hm()),Gi=ou(en()),{typeforce:su}=Gi,bm=vn.OPS.OP_RESERVED;function uP(e){return Gi.Number(e)&&(e===vn.OPS.OP_0||e>=vn.OPS.OP_1&&e<=vn.OPS.OP_16||e===vn.OPS.OP_1NEGATE)}function fP(e){return Gi.Buffer(e)||uP(e)}function gm(e){return Gi.Array(e)&&e.every(fP)}rt.isPushOnly=gm;function C0(e){if(e.length===0)return vn.OPS.OP_0;if(e.length===1){if(e[0]>=1&&e[0]<=16)return bm+e[0];if(e[0]===129)return vn.OPS.OP_1NEGATE}}function ym(e){return m.Buffer.isBuffer(e)}function dP(e){return Gi.Array(e)}function q0(e){return m.Buffer.isBuffer(e)}function vm(e){if(ym(e))return e;su(Gi.Array,e);let t=e.reduce((i,s)=>q0(s)?s.length===1&&C0(s)!==void 0?i+1:i+$h.encodingLength(s.length)+s.length:i+1,0),r=m.Buffer.allocUnsafe(t),n=0;if(e.forEach(i=>{if(q0(i)){let s=C0(i);if(s!==void 0){r.writeUInt8(s,n),n+=1;return}n+=$h.encode(r,i.length,n),i.copy(r,n),n+=i.length}else r.writeUInt8(i,n),n+=1}),n!==r.length)throw new Error("Could not decode chunks");return r}rt.compile=vm;function Xh(e){if(dP(e))return e;su(Gi.Buffer,e);let t=[],r=0;for(;r<e.length;){let n=e[r];if(n>vn.OPS.OP_0&&n<=vn.OPS.OP_PUSHDATA4){let i=$h.decode(e,r);if(i===null||(r+=i.size,r+i.number>e.length))return null;let s=e.slice(r,r+i.number);r+=i.number;let o=C0(s);o!==void 0?t.push(o):t.push(s)}else t.push(n),r+=1}return t}rt.decompile=Xh;function lP(e){return ym(e)&&(e=Xh(e)),e.map(t=>{if(q0(t)){let r=C0(t);if(r===void 0)return t.toString("hex");t=r}return vn.REVERSE_OPS[t]}).join(" ")}rt.toASM=lP;function hP(e){return su(Gi.String,e),vm(e.split(" ").map(t=>vn.OPS[t]!==void 0?vn.OPS[t]:(su(Gi.Hex,t),m.Buffer.from(t,"hex"))))}rt.fromASM=hP;function pP(e){return e=Xh(e),su(gm,e),e.map(t=>q0(t)?t:t===vn.OPS.OP_0?m.Buffer.allocUnsafe(0):pm.encode(t-bm))}rt.toStack=pP;function bP(e){return Gi.isPoint(e)}rt.isCanonicalPubKey=bP;function mm(e){let t=e;return t&128&&(t=t&-129),t&64&&(t=t&-65),t>0&&t<4}rt.isDefinedHashType=mm;function gP(e){return!m.Buffer.isBuffer(e)||!mm(e[e.length-1])?!1:aP.check(e.slice(0,-1))}rt.isCanonicalScriptSignature=gP;rt.number=pm;rt.signature=cP});var vs=K(Va=>{"use strict";E();P();Object.defineProperty(Va,"__esModule",{value:!0});Va.value=Va.prop=void 0;function yP(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let n=r.call(this);return this[t]=n,n},set(n){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:n,writable:!0})}})}Va.prop=yP;function vP(e){let t;return()=>(t!==void 0||(t=e()),t)}Va.value=vP});var Sm=K($i=>{"use strict";E();P();var mP=$i&&$i.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),wP=$i&&$i.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),_m=$i&&$i.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&mP(t,e,r);return wP(t,e),t};Object.defineProperty($i,"__esModule",{value:!0});$i.p2data=void 0;var xP=In(),R0=_m(xr()),ms=en(),wm=_m(vs()),xm=R0.OPS;function _P(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function SP(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,ms.typeforce)({network:ms.typeforce.maybe(ms.typeforce.Object),output:ms.typeforce.maybe(ms.typeforce.Buffer),data:ms.typeforce.maybe(ms.typeforce.arrayOf(ms.typeforce.Buffer))},e);let r=e.network||xP.bitcoin,n={name:"embed",network:r};if(wm.prop(n,"output",()=>{if(!!e.data)return R0.compile([xm.OP_RETURN].concat(e.data))}),wm.prop(n,"data",()=>{if(!!e.output)return R0.decompile(e.output).slice(1)}),t.validate&&e.output){let i=R0.decompile(e.output);if(i[0]!==xm.OP_RETURN)throw new TypeError("Output is invalid");if(!i.slice(1).every(ms.typeforce.Buffer))throw new TypeError("Output is invalid");if(e.data&&!_P(e.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,e)}$i.p2data=SP});var Tm=K(Xi=>{"use strict";E();P();var EP=Xi&&Xi.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),PP=Xi&&Xi.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Pm=Xi&&Xi.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&EP(t,e,r);return PP(t,e),t};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.p2ms=void 0;var TP=In(),Ga=Pm(xr()),_r=en(),fo=Pm(vs()),$a=Ga.OPS,U0=$a.OP_RESERVED;function Em(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function AP(e,t){if(!e.input&&!e.output&&!(e.pubkeys&&e.m!==void 0)&&!e.signatures)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{});function r(c){return Ga.isCanonicalScriptSignature(c)||(t.allowIncomplete&&c===$a.OP_0)!==void 0}(0,_r.typeforce)({network:_r.typeforce.maybe(_r.typeforce.Object),m:_r.typeforce.maybe(_r.typeforce.Number),n:_r.typeforce.maybe(_r.typeforce.Number),output:_r.typeforce.maybe(_r.typeforce.Buffer),pubkeys:_r.typeforce.maybe(_r.typeforce.arrayOf(_r.isPoint)),signatures:_r.typeforce.maybe(_r.typeforce.arrayOf(r)),input:_r.typeforce.maybe(_r.typeforce.Buffer)},e);let i={network:e.network||TP.bitcoin},s=[],o=!1;function a(c){o||(o=!0,s=Ga.decompile(c),i.m=s[0]-U0,i.n=s[s.length-2]-U0,i.pubkeys=s.slice(1,-2))}if(fo.prop(i,"output",()=>{if(!!e.m&&!!i.n&&!!e.pubkeys)return Ga.compile([].concat(U0+e.m,e.pubkeys,U0+i.n,$a.OP_CHECKMULTISIG))}),fo.prop(i,"m",()=>{if(!!i.output)return a(i.output),i.m}),fo.prop(i,"n",()=>{if(!!i.pubkeys)return i.pubkeys.length}),fo.prop(i,"pubkeys",()=>{if(!!e.output)return a(e.output),i.pubkeys}),fo.prop(i,"signatures",()=>{if(!!e.input)return Ga.decompile(e.input).slice(1)}),fo.prop(i,"input",()=>{if(!!e.signatures)return Ga.compile([$a.OP_0].concat(e.signatures))}),fo.prop(i,"witness",()=>{if(!!i.input)return[]}),fo.prop(i,"name",()=>{if(!(!i.m||!i.n))return`p2ms(${i.m} of ${i.n})`}),t.validate){if(e.output){if(a(e.output),!_r.typeforce.Number(s[0]))throw new TypeError("Output is invalid");if(!_r.typeforce.Number(s[s.length-2]))throw new TypeError("Output is invalid");if(s[s.length-1]!==$a.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(i.m<=0||i.n>16||i.m>i.n||i.n!==s.length-3)throw new TypeError("Output is invalid");if(!i.pubkeys.every(c=>(0,_r.isPoint)(c)))throw new TypeError("Output is invalid");if(e.m!==void 0&&e.m!==i.m)throw new TypeError("m mismatch");if(e.n!==void 0&&e.n!==i.n)throw new TypeError("n mismatch");if(e.pubkeys&&!Em(e.pubkeys,i.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(e.n!==void 0&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(i.n=e.pubkeys.length,i.n<i.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<i.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>i.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==$a.OP_0)throw new TypeError("Input is invalid");if(i.signatures.length===0||!i.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!Em(e.signatures,i.signatures))throw new TypeError("Signature mismatch");if(e.m!==void 0&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(i,e)}Xi.p2ms=AP});var Om=K(Yi=>{"use strict";E();P();var IP=Yi&&Yi.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),OP=Yi&&Yi.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Im=Yi&&Yi.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&IP(t,e,r);return OP(t,e),t};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.p2pk=void 0;var BP=In(),Ya=Im(xr()),Ai=en(),Xa=Im(vs()),Am=Ya.OPS;function MP(e,t){if(!e.input&&!e.output&&!e.pubkey&&!e.input&&!e.signature)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Ai.typeforce)({network:Ai.typeforce.maybe(Ai.typeforce.Object),output:Ai.typeforce.maybe(Ai.typeforce.Buffer),pubkey:Ai.typeforce.maybe(Ai.isPoint),signature:Ai.typeforce.maybe(Ya.isCanonicalScriptSignature),input:Ai.typeforce.maybe(Ai.typeforce.Buffer)},e);let r=Xa.value(()=>Ya.decompile(e.input)),n=e.network||BP.bitcoin,i={name:"p2pk",network:n};if(Xa.prop(i,"output",()=>{if(!!e.pubkey)return Ya.compile([e.pubkey,Am.OP_CHECKSIG])}),Xa.prop(i,"pubkey",()=>{if(!!e.output)return e.output.slice(1,-1)}),Xa.prop(i,"signature",()=>{if(!!e.input)return r()[0]}),Xa.prop(i,"input",()=>{if(!!e.signature)return Ya.compile([e.signature])}),Xa.prop(i,"witness",()=>{if(!!i.input)return[]}),t.validate){if(e.output){if(e.output[e.output.length-1]!==Am.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,Ai.isPoint)(i.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(i.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(i.input))throw new TypeError("Signature mismatch");if(e.input){if(r().length!==1)throw new TypeError("Input is invalid");if(!Ya.isCanonicalScriptSignature(i.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(i,e)}Yi.p2pk=MP});var cn=K($n=>{"use strict";E();P();Object.defineProperty($n,"__esModule",{value:!0});$n.taggedHash=$n.hash256=$n.hash160=$n.sha256=$n.ripemd160=void 0;var Bm=ft();function Mm(e){return m.Buffer.from(Bm.base.ripemd160(e))}$n.ripemd160=Mm;function Za(e){return m.Buffer.from(Bm.base.sha256(e))}$n.sha256=Za;function HP(e){return Mm(Za(e))}$n.hash160=HP;function kP(e){return Za(Za(e))}$n.hash256=kP;var NP=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],CP=Object.fromEntries(NP.map(e=>{let t=Za(m.Buffer.from(e));return[e,m.Buffer.concat([t,t])]}));function qP(e,t){return Za(m.Buffer.concat([CP[e],t]))}$n.taggedHash=qP});var km=K(Zi=>{"use strict";E();P();var RP=Zi&&Zi.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),UP=Zi&&Zi.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Zh=Zi&&Zi.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&RP(t,e,r);return UP(t,e),t};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.p2pkh=void 0;var Yh=Zh(cn()),LP=In(),Ja=Zh(xr()),un=en(),ws=Zh(vs()),lo=Ja.OPS,Hm=ft();function jP(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.input)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,un.typeforce)({network:un.typeforce.maybe(un.typeforce.Object),address:un.typeforce.maybe(un.typeforce.String),hash:un.typeforce.maybe(un.typeforce.BufferN(20)),output:un.typeforce.maybe(un.typeforce.BufferN(25)),pubkey:un.typeforce.maybe(un.isPoint),signature:un.typeforce.maybe(Ja.isCanonicalScriptSignature),input:un.typeforce.maybe(un.typeforce.Buffer)},e);let r=ws.value(()=>{let o=Hm.base.fromBase58Check(e.address),a=o.readUInt8(0),c=o.slice(1);return{version:a,hash:c}}),n=ws.value(()=>Ja.decompile(e.input)),i=e.network||LP.bitcoin,s={name:"p2pkh",network:i};if(ws.prop(s,"address",()=>{if(!s.hash)return;let o=m.Buffer.allocUnsafe(21);return o.writeUInt8(i.pubKeyHash,0),s.hash.copy(o,1),Hm.base.toBase58Check(o)}),ws.prop(s,"hash",()=>{if(e.output)return e.output.slice(3,23);if(e.address)return r().hash;if(e.pubkey||s.pubkey)return Yh.hash160(e.pubkey||s.pubkey)}),ws.prop(s,"output",()=>{if(!!s.hash)return Ja.compile([lo.OP_DUP,lo.OP_HASH160,s.hash,lo.OP_EQUALVERIFY,lo.OP_CHECKSIG])}),ws.prop(s,"pubkey",()=>{if(!!e.input)return n()[1]}),ws.prop(s,"signature",()=>{if(!!e.input)return n()[0]}),ws.prop(s,"input",()=>{if(!!e.pubkey&&!!e.signature)return Ja.compile([e.signature,e.pubkey])}),ws.prop(s,"witness",()=>{if(!!s.input)return[]}),t.validate){let o=m.Buffer.from([]);if(e.address){if(r().version!==i.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(r().hash.length!==20)throw new TypeError("Invalid address");o=r().hash}if(e.hash){if(o.length>0&&!o.equals(e.hash))throw new TypeError("Hash mismatch");o=e.hash}if(e.output){if(e.output.length!==25||e.output[0]!==lo.OP_DUP||e.output[1]!==lo.OP_HASH160||e.output[2]!==20||e.output[23]!==lo.OP_EQUALVERIFY||e.output[24]!==lo.OP_CHECKSIG)throw new TypeError("Output is invalid");let a=e.output.slice(3,23);if(o.length>0&&!o.equals(a))throw new TypeError("Hash mismatch");o=a}if(e.pubkey){let a=Yh.hash160(e.pubkey);if(o.length>0&&!o.equals(a))throw new TypeError("Hash mismatch");o=a}if(e.input){let a=n();if(a.length!==2)throw new TypeError("Input is invalid");if(!Ja.isCanonicalScriptSignature(a[0]))throw new TypeError("Input has invalid signature");if(!(0,un.isPoint)(a[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(a[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(a[1]))throw new TypeError("Pubkey mismatch");let c=Yh.hash160(a[1]);if(o.length>0&&!o.equals(c))throw new TypeError("Hash mismatch")}}return Object.assign(s,e)}Zi.p2pkh=jP});var qm=K(Qi=>{"use strict";E();P();var DP=Qi&&Qi.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),KP=Qi&&Qi.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Jh=Qi&&Qi.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&DP(t,e,r);return KP(t,e),t};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.p2sh=void 0;var Nm=Jh(cn()),FP=In(),xs=Jh(xr()),Mt=en(),Ji=Jh(vs()),Cm=ft(),L0=xs.OPS;function WP(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function zP(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.input)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Mt.typeforce)({network:Mt.typeforce.maybe(Mt.typeforce.Object),address:Mt.typeforce.maybe(Mt.typeforce.String),hash:Mt.typeforce.maybe(Mt.typeforce.BufferN(20)),output:Mt.typeforce.maybe(Mt.typeforce.BufferN(23)),redeem:Mt.typeforce.maybe({network:Mt.typeforce.maybe(Mt.typeforce.Object),output:Mt.typeforce.maybe(Mt.typeforce.Buffer),input:Mt.typeforce.maybe(Mt.typeforce.Buffer),witness:Mt.typeforce.maybe(Mt.typeforce.arrayOf(Mt.typeforce.Buffer))}),input:Mt.typeforce.maybe(Mt.typeforce.Buffer),witness:Mt.typeforce.maybe(Mt.typeforce.arrayOf(Mt.typeforce.Buffer))},e);let r=e.network;r||(r=e.redeem&&e.redeem.network||FP.bitcoin);let n={network:r},i=Ji.value(()=>{let a=Cm.base.fromBase58Check(e.address),c=a.readUInt8(0),u=a.slice(1);return{version:c,hash:u}}),s=Ji.value(()=>xs.decompile(e.input)),o=Ji.value(()=>{let a=s();return{network:r,output:a[a.length-1],input:xs.compile(a.slice(0,-1)),witness:e.witness||[]}});if(Ji.prop(n,"address",()=>{if(!n.hash)return;let a=m.Buffer.allocUnsafe(21);return a.writeUInt8(n.network.scriptHash,0),n.hash.copy(a,1),Cm.base.toBase58Check(a)}),Ji.prop(n,"hash",()=>{if(e.output)return e.output.slice(2,22);if(e.address)return i().hash;if(n.redeem&&n.redeem.output)return Nm.hash160(n.redeem.output)}),Ji.prop(n,"output",()=>{if(!!n.hash)return xs.compile([L0.OP_HASH160,n.hash,L0.OP_EQUAL])}),Ji.prop(n,"redeem",()=>{if(!!e.input)return o()}),Ji.prop(n,"input",()=>{if(!(!e.redeem||!e.redeem.input||!e.redeem.output))return xs.compile([].concat(xs.decompile(e.redeem.input),e.redeem.output))}),Ji.prop(n,"witness",()=>{if(n.redeem&&n.redeem.witness)return n.redeem.witness;if(n.input)return[]}),Ji.prop(n,"name",()=>{let a=["p2sh"];return n.redeem!==void 0&&n.redeem.name!==void 0&&a.push(n.redeem.name),a.join("-")}),t.validate){let a=m.Buffer.from([]);if(e.address){if(i().version!==r.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(i().hash.length!==20)throw new TypeError("Invalid address");a=i().hash}if(e.hash){if(a.length>0&&!a.equals(e.hash))throw new TypeError("Hash mismatch");a=e.hash}if(e.output){if(e.output.length!==23||e.output[0]!==L0.OP_HASH160||e.output[1]!==20||e.output[22]!==L0.OP_EQUAL)throw new TypeError("Output is invalid");let u=e.output.slice(2,22);if(a.length>0&&!a.equals(u))throw new TypeError("Hash mismatch");a=u}let c=u=>{if(u.output){let f=xs.decompile(u.output);if(!f||f.length<1)throw new TypeError("Redeem.output too short");let d=Nm.hash160(u.output);if(a.length>0&&!a.equals(d))throw new TypeError("Hash mismatch");a=d}if(u.input){let f=u.input.length>0,d=u.witness&&u.witness.length>0;if(!f&&!d)throw new TypeError("Empty input");if(f&&d)throw new TypeError("Input and witness provided");if(f){let h=xs.decompile(u.input);if(!xs.isPushOnly(h))throw new TypeError("Non push-only scriptSig")}}};if(e.input){let u=s();if(!u||u.length<1)throw new TypeError("Input too short");if(!m.Buffer.isBuffer(o().output))throw new TypeError("Input is invalid");c(o())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==r)throw new TypeError("Network mismatch");if(e.input){let u=o();if(e.redeem.output&&!e.redeem.output.equals(u.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(u.input))throw new TypeError("Redeem.input mismatch")}c(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!WP(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(n,e)}Qi.p2sh=zP});var Um=K(es=>{"use strict";E();P();var VP=es&&es.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),GP=es&&es.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ep=es&&es.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&VP(t,e,r);return GP(t,e),t};Object.defineProperty(es,"__esModule",{value:!0});es.p2wpkh=void 0;var Qh=ep(cn()),$P=In(),D0=ep(xr()),Sr=en(),ho=ep(vs()),j0=ft(),Rm=D0.OPS,XP=m.Buffer.alloc(0);function YP(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.witness)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Sr.typeforce)({address:Sr.typeforce.maybe(Sr.typeforce.String),hash:Sr.typeforce.maybe(Sr.typeforce.BufferN(20)),input:Sr.typeforce.maybe(Sr.typeforce.BufferN(0)),network:Sr.typeforce.maybe(Sr.typeforce.Object),output:Sr.typeforce.maybe(Sr.typeforce.BufferN(22)),pubkey:Sr.typeforce.maybe(Sr.isPoint),signature:Sr.typeforce.maybe(D0.isCanonicalScriptSignature),witness:Sr.typeforce.maybe(Sr.typeforce.arrayOf(Sr.typeforce.Buffer))},e);let r=ho.value(()=>{let s=j0.base.bech32.decode(e.address),o=s.words.shift(),a=j0.base.bech32.fromWords(s.words);return{version:o,prefix:s.prefix,data:m.Buffer.from(a)}}),n=e.network||$P.bitcoin,i={name:"p2wpkh",network:n};if(ho.prop(i,"address",()=>{if(!i.hash)return;let s=j0.base.bech32.toWords(i.hash);return s.unshift(0),j0.base.bech32.encode(n.bech32,s)}),ho.prop(i,"hash",()=>{if(e.output)return e.output.slice(2,22);if(e.address)return r().data;if(e.pubkey||i.pubkey)return Qh.hash160(e.pubkey||i.pubkey)}),ho.prop(i,"output",()=>{if(!!i.hash)return D0.compile([Rm.OP_0,i.hash])}),ho.prop(i,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(!!e.witness)return e.witness[1]}),ho.prop(i,"signature",()=>{if(!!e.witness)return e.witness[0]}),ho.prop(i,"input",()=>{if(!!i.witness)return XP}),ho.prop(i,"witness",()=>{if(!!e.pubkey&&!!e.signature)return[e.signature,e.pubkey]}),t.validate){let s=m.Buffer.from([]);if(e.address){if(n&&n.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==0)throw new TypeError("Invalid address version");if(r().data.length!==20)throw new TypeError("Invalid address data");s=r().data}if(e.hash){if(s.length>0&&!s.equals(e.hash))throw new TypeError("Hash mismatch");s=e.hash}if(e.output){if(e.output.length!==22||e.output[0]!==Rm.OP_0||e.output[1]!==20)throw new TypeError("Output is invalid");if(s.length>0&&!s.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");s=e.output.slice(2)}if(e.pubkey){let o=Qh.hash160(e.pubkey);if(s.length>0&&!s.equals(o))throw new TypeError("Hash mismatch");if(s=o,!(0,Sr.isPoint)(e.pubkey)||e.pubkey.length!==33)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(e.witness.length!==2)throw new TypeError("Witness is invalid");if(!D0.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,Sr.isPoint)(e.witness[1])||e.witness[1].length!==33)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");let o=Qh.hash160(e.witness[1]);if(s.length>0&&!s.equals(o))throw new TypeError("Hash mismatch")}}return Object.assign(i,e)}es.p2wpkh=YP});var Dm=K(ts=>{"use strict";E();P();var ZP=ts&&ts.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),JP=ts&&ts.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),rp=ts&&ts.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&ZP(t,e,r);return JP(t,e),t};Object.defineProperty(ts,"__esModule",{value:!0});ts.p2wsh=void 0;var Lm=rp(cn()),QP=In(),po=rp(xr()),St=en(),_s=rp(vs()),K0=ft(),jm=po.OPS,tp=m.Buffer.alloc(0);function eT(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function F0(e){return!!(m.Buffer.isBuffer(e)&&e.length===65&&e[0]===4&&(0,St.isPoint)(e))}function tT(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.witness)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,St.typeforce)({network:St.typeforce.maybe(St.typeforce.Object),address:St.typeforce.maybe(St.typeforce.String),hash:St.typeforce.maybe(St.typeforce.BufferN(32)),output:St.typeforce.maybe(St.typeforce.BufferN(34)),redeem:St.typeforce.maybe({input:St.typeforce.maybe(St.typeforce.Buffer),network:St.typeforce.maybe(St.typeforce.Object),output:St.typeforce.maybe(St.typeforce.Buffer),witness:St.typeforce.maybe(St.typeforce.arrayOf(St.typeforce.Buffer))}),input:St.typeforce.maybe(St.typeforce.BufferN(0)),witness:St.typeforce.maybe(St.typeforce.arrayOf(St.typeforce.Buffer))},e);let r=_s.value(()=>{let o=K0.base.bech32.decode(e.address),a=o.words.shift(),c=K0.base.bech32.fromWords(o.words);return{version:a,prefix:o.prefix,data:m.Buffer.from(c)}}),n=_s.value(()=>po.decompile(e.redeem.input)),i=e.network;i||(i=e.redeem&&e.redeem.network||QP.bitcoin);let s={network:i};if(_s.prop(s,"address",()=>{if(!s.hash)return;let o=K0.base.bech32.toWords(s.hash);return o.unshift(0),K0.base.bech32.encode(i.bech32,o)}),_s.prop(s,"hash",()=>{if(e.output)return e.output.slice(2);if(e.address)return r().data;if(s.redeem&&s.redeem.output)return Lm.sha256(s.redeem.output)}),_s.prop(s,"output",()=>{if(!!s.hash)return po.compile([jm.OP_0,s.hash])}),_s.prop(s,"redeem",()=>{if(!!e.witness)return{output:e.witness[e.witness.length-1],input:tp,witness:e.witness.slice(0,-1)}}),_s.prop(s,"input",()=>{if(!!s.witness)return tp}),_s.prop(s,"witness",()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){let o=po.toStack(n());return s.redeem=Object.assign({witness:o},e.redeem),s.redeem.input=tp,[].concat(o,e.redeem.output)}if(!!e.redeem&&!!e.redeem.output&&!!e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)}),_s.prop(s,"name",()=>{let o=["p2wsh"];return s.redeem!==void 0&&s.redeem.name!==void 0&&o.push(s.redeem.name),o.join("-")}),t.validate){let o=m.Buffer.from([]);if(e.address){if(r().prefix!==i.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==0)throw new TypeError("Invalid address version");if(r().data.length!==32)throw new TypeError("Invalid address data");o=r().data}if(e.hash){if(o.length>0&&!o.equals(e.hash))throw new TypeError("Hash mismatch");o=e.hash}if(e.output){if(e.output.length!==34||e.output[0]!==jm.OP_0||e.output[1]!==32)throw new TypeError("Output is invalid");let a=e.output.slice(2);if(o.length>0&&!o.equals(a))throw new TypeError("Hash mismatch");o=a}if(e.redeem){if(e.redeem.network&&e.redeem.network!==i)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){if(po.decompile(e.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");let a=Lm.sha256(e.redeem.output);if(o.length>0&&!o.equals(a))throw new TypeError("Hash mismatch");o=a}if(e.redeem.input&&!po.isPushOnly(n()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!eT(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&n().some(F0)||e.redeem.output&&(po.decompile(e.redeem.output)||[]).some(F0))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){let a=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(a))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(F0)||(po.decompile(a)||[]).some(F0))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(s,e)}ts.p2wsh=tT});var sp=K((vj,Fm)=>{"use strict";E();P();var np=M1().Buffer,rT=9007199254740991;function ip(e){if(e<0||e>rT||e%1!==0)throw new RangeError("value out of range")}function au(e,t,r){if(ip(e),t||(t=np.allocUnsafe(Km(e))),!np.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");return r||(r=0),e<253?(t.writeUInt8(e,r),au.bytes=1):e<=65535?(t.writeUInt8(253,r),t.writeUInt16LE(e,r+1),au.bytes=3):e<=4294967295?(t.writeUInt8(254,r),t.writeUInt32LE(e,r+1),au.bytes=5):(t.writeUInt8(255,r),t.writeUInt32LE(e>>>0,r+1),t.writeUInt32LE(e/4294967296|0,r+5),au.bytes=9),t}function cu(e,t){if(!np.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");t||(t=0);var r=e.readUInt8(t);if(r<253)return cu.bytes=1,r;if(r===253)return cu.bytes=3,e.readUInt16LE(t+1);if(r===254)return cu.bytes=5,e.readUInt32LE(t+1);cu.bytes=9;var n=e.readUInt32LE(t+1),i=e.readUInt32LE(t+5),s=i*4294967296+n;return ip(s),s}function Km(e){return ip(e),e<253?1:e<=65535?3:e<=4294967295?5:9}Fm.exports={encode:au,decode:cu,encodingLength:Km}});var bo=K(Yt=>{"use strict";E();P();var nT=Yt&&Yt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),iT=Yt&&Yt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Wm=Yt&&Yt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&nT(t,e,r);return iT(t,e),t};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.BufferReader=Yt.BufferWriter=Yt.cloneBuffer=Yt.reverseBuffer=Yt.writeUInt64LE=Yt.readUInt64LE=Yt.varuint=void 0;var ta=Wm(en()),{typeforce:zm}=ta,uu=Wm(sp());Yt.varuint=uu;function Vm(e,t){if(typeof e!="number")throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function Gm(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return n*=4294967296,Vm(n+r,9007199254740991),n+r}Yt.readUInt64LE=Gm;function $m(e,t,r){return Vm(t,9007199254740991),e.writeInt32LE(t&-1,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}Yt.writeUInt64LE=$m;function sT(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}Yt.reverseBuffer=sT;function oT(e){let t=m.Buffer.allocUnsafe(e.length);return e.copy(t),t}Yt.cloneBuffer=oT;var fu=class{static withCapacity(t){return new fu(m.Buffer.alloc(t))}constructor(t,r=0){this.buffer=t,this.offset=r,zm(ta.tuple(ta.Buffer,ta.UInt32),[t,r])}writeUInt8(t){this.offset=this.buffer.writeUInt8(t,this.offset)}writeInt32(t){this.offset=this.buffer.writeInt32LE(t,this.offset)}writeUInt32(t){this.offset=this.buffer.writeUInt32LE(t,this.offset)}writeUInt64(t){this.offset=$m(this.buffer,t,this.offset)}writeVarInt(t){uu.encode(t,this.buffer,this.offset),this.offset+=uu.encode.bytes}writeSlice(t){if(this.buffer.length<this.offset+t.length)throw new Error("Cannot write slice out of bounds");this.offset+=t.copy(this.buffer,this.offset)}writeVarSlice(t){this.writeVarInt(t.length),this.writeSlice(t)}writeVector(t){this.writeVarInt(t.length),t.forEach(r=>this.writeVarSlice(r))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}};Yt.BufferWriter=fu;var op=class{constructor(t,r=0){this.buffer=t,this.offset=r,zm(ta.tuple(ta.Buffer,ta.UInt32),[t,r])}readUInt8(){let t=this.buffer.readUInt8(this.offset);return this.offset++,t}readInt32(){let t=this.buffer.readInt32LE(this.offset);return this.offset+=4,t}readUInt32(){let t=this.buffer.readUInt32LE(this.offset);return this.offset+=4,t}readUInt64(){let t=Gm(this.buffer,this.offset);return this.offset+=8,t}readVarInt(){let t=uu.decode(this.buffer,this.offset);return this.offset+=uu.decode.bytes,t}readSlice(t){if(this.buffer.length<this.offset+t)throw new Error("Cannot read slice out of bounds");let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){let t=this.readVarInt(),r=[];for(let n=0;n<t;n++)r.push(this.readVarSlice());return r}};Yt.BufferReader=op});var ra=K(Qa=>{"use strict";E();P();Object.defineProperty(Qa,"__esModule",{value:!0});Qa.taprootTweakPubkey=Qa.taprootTweakPrivKey=void 0;var aT=ft(),cp=aT.signUtil.schnorr.secp256k1,up=cp.schnorr,Xm=cp.secp256k1.ProjectivePoint,ap=cp.secp256k1.CURVE.n;function Ym(e,t){let r=up.utils,n=r.taggedHash("TapTweak",e,t),i=r.bytesToNumberBE(n);if(i>=ap)throw new Error("tweak higher than curve order");return i}function cT(e,t=new Uint8Array){let r=up.utils,n=r.bytesToNumberBE(e),i=Xm.fromPrivateKey(n),s=i.hasEvenY()?n:r.mod(-n,ap),o=r.pointToBytes(i),a=Ym(o,t);return r.numberToBytesBE(r.mod(s+a,ap),32)}Qa.taprootTweakPrivKey=cT;function uT(e,t){t||(t=new Uint8Array);let r=up.utils,n=Ym(e,t),s=r.lift_x(r.bytesToNumberBE(e)).add(Xm.fromPrivateKey(n)),o=s.hasEvenY()?0:1;return[r.pointToBytes(s),o]}Qa.taprootTweakPubkey=uT});var W0=K(Et=>{"use strict";E();P();var fT=Et&&Et.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),dT=Et&&Et.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),lT=Et&&Et.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&fT(t,e,r);return dT(t,e),t};Object.defineProperty(Et,"__esModule",{value:!0});Et.tweakKey=Et.tapTweakHash=Et.tapleafHash=Et.findScriptPath=Et.toHashTree=Et.rootHashFromPath=Et.MAX_TAPTREE_DEPTH=Et.LEAF_VERSION_TAPSCRIPT=void 0;var go=Cu(),hp=lT(cn()),Zm=bo(),hT=en(),pT=ra();Et.LEAF_VERSION_TAPSCRIPT=192;Et.MAX_TAPTREE_DEPTH=128;var bT=e=>"left"in e&&"right"in e;function gT(e,t){if(e.length<33)throw new TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);let r=(e.length-33)/32,n=t;for(let i=0;i<r;i++){let s=e.slice(33+32*i,65+32*i);n.compare(s)<0?n=lp(n,s):n=lp(s,n)}return n}Et.rootHashFromPath=gT;function fp(e){if((0,hT.isTapleaf)(e))return{hash:Jm(e)};let t=[fp(e[0]),fp(e[1])];t.sort((i,s)=>i.hash.compare(s.hash));let[r,n]=t;return{hash:lp(r.hash,n.hash),left:r,right:n}}Et.toHashTree=fp;function dp(e,t){if(bT(e)){let r=dp(e.left,t);if(r!==void 0)return[...r,e.right.hash];let n=dp(e.right,t);if(n!==void 0)return[...n,e.left.hash]}else if(e.hash.equals(t))return[]}Et.findScriptPath=dp;function Jm(e){let t=e.version||Et.LEAF_VERSION_TAPSCRIPT;return hp.taggedHash("TapLeaf",go.Buffer.concat([go.Buffer.from([t]),mT(e.output)]))}Et.tapleafHash=Jm;function yT(e,t){return hp.taggedHash("TapTweak",go.Buffer.concat(t?[e,t]:[e]))}Et.tapTweakHash=yT;function vT(e,t){if(!go.Buffer.isBuffer(e)||e.length!==32||t&&t.length!==32)return null;let r=(0,pT.taprootTweakPubkey)(e,t);return{parity:r[1],x:go.Buffer.from(r[0])}}Et.tweakKey=vT;function lp(e,t){return hp.taggedHash("TapBranch",go.Buffer.concat([e,t]))}function mT(e){let t=Zm.varuint.encodingLength(e.length),r=go.Buffer.allocUnsafe(t);return Zm.varuint.encode(e.length,r),go.Buffer.concat([r,e])}});var rw=K(rs=>{"use strict";E();P();var wT=rs&&rs.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),xT=rs&&rs.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),tw=rs&&rs.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&wT(t,e,r);return xT(t,e),t};Object.defineProperty(rs,"__esModule",{value:!0});rs.p2tr=void 0;var z0=Cu(),_T=In(),pp=tw(xr()),Ze=en(),mn=W0(),Xn=tw(vs()),V0=ft(),Qm=pp.OPS,ew=1,ST=80;function ET(e,t){if(!e.address&&!e.output&&!e.pubkey&&!e.internalPubkey&&!(e.witness&&e.witness.length>1))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Ze.typeforce)({address:Ze.typeforce.maybe(Ze.typeforce.String),input:Ze.typeforce.maybe(Ze.typeforce.BufferN(0)),network:Ze.typeforce.maybe(Ze.typeforce.Object),output:Ze.typeforce.maybe(Ze.typeforce.BufferN(34)),internalPubkey:Ze.typeforce.maybe(Ze.typeforce.BufferN(32)),hash:Ze.typeforce.maybe(Ze.typeforce.BufferN(32)),pubkey:Ze.typeforce.maybe(Ze.typeforce.BufferN(32)),witness:Ze.typeforce.maybe(Ze.typeforce.arrayOf(Ze.typeforce.Buffer)),scriptTree:Ze.typeforce.maybe(Ze.isTaptree),redeem:Ze.typeforce.maybe({output:Ze.typeforce.maybe(Ze.typeforce.Buffer),redeemVersion:Ze.typeforce.maybe(Ze.typeforce.Number),witness:Ze.typeforce.maybe(Ze.typeforce.arrayOf(Ze.typeforce.Buffer))}),redeemVersion:Ze.typeforce.maybe(Ze.typeforce.Number)},e);let r=Xn.value(()=>{let a=V0.base.bech32m.decode(e.address),c=a.words.shift(),u=V0.base.bech32m.fromWords(a.words);return{version:c,prefix:a.prefix,data:z0.Buffer.from(u)}}),n=Xn.value(()=>{if(!(!e.witness||!e.witness.length))return e.witness.length>=2&&e.witness[e.witness.length-1][0]===ST?e.witness.slice(0,-1):e.witness.slice()}),i=Xn.value(()=>{if(e.scriptTree)return(0,mn.toHashTree)(e.scriptTree);if(e.hash)return{hash:e.hash}}),s=e.network||_T.bitcoin,o={name:"p2tr",network:s};if(Xn.prop(o,"address",()=>{if(!o.pubkey)return;let a=V0.base.bech32m.toWords(o.pubkey);return a.unshift(ew),V0.base.bech32m.encode(s.bech32,a)}),Xn.prop(o,"hash",()=>{let a=i();if(a)return a.hash;let c=n();if(c&&c.length>1){let u=c[c.length-1],f=u[0]&Ze.TAPLEAF_VERSION_MASK,d=c[c.length-2],h=(0,mn.tapleafHash)({output:d,version:f});return(0,mn.rootHashFromPath)(u,h)}return null}),Xn.prop(o,"output",()=>{if(!!o.pubkey)return pp.compile([Qm.OP_1,o.pubkey])}),Xn.prop(o,"redeemVersion",()=>e.redeemVersion?e.redeemVersion:e.redeem&&e.redeem.redeemVersion!==void 0&&e.redeem.redeemVersion!==null?e.redeem.redeemVersion:mn.LEAF_VERSION_TAPSCRIPT),Xn.prop(o,"redeem",()=>{let a=n();if(!(!a||a.length<2))return{output:a[a.length-2],witness:a.slice(0,-2),redeemVersion:a[a.length-1][0]&Ze.TAPLEAF_VERSION_MASK}}),Xn.prop(o,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return r().data;if(o.internalPubkey){let a=(0,mn.tweakKey)(o.internalPubkey,o.hash);if(a)return a.x}}),Xn.prop(o,"internalPubkey",()=>{if(e.internalPubkey)return e.internalPubkey;let a=n();if(a&&a.length>1)return a[a.length-1].slice(1,33)}),Xn.prop(o,"signature",()=>{if(e.signature)return e.signature;let a=n();if(!(!a||a.length!==1))return a[0]}),Xn.prop(o,"witness",()=>{if(e.witness)return e.witness;let a=i();if(a&&e.redeem&&e.redeem.output&&e.internalPubkey){let c=(0,mn.tapleafHash)({output:e.redeem.output,version:o.redeemVersion}),u=(0,mn.findScriptPath)(a,c);if(!u)return;let f=(0,mn.tweakKey)(e.internalPubkey,a.hash);if(!f)return;let d=z0.Buffer.concat([z0.Buffer.from([o.redeemVersion|f.parity]),e.internalPubkey].concat(u));return[e.redeem.output,d]}if(e.signature)return[e.signature]}),t.validate){let a=z0.Buffer.from([]);if(e.address){if(s&&s.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==ew)throw new TypeError("Invalid address version");if(r().data.length!==32)throw new TypeError("Invalid address data");a=r().data}if(e.pubkey){if(a.length>0&&!a.equals(e.pubkey))throw new TypeError("Pubkey mismatch");a=e.pubkey}if(e.output){if(e.output.length!==34||e.output[0]!==Qm.OP_1||e.output[1]!==32)throw new TypeError("Output is invalid");if(a.length>0&&!a.equals(e.output.slice(2)))throw new TypeError("Pubkey mismatch");a=e.output.slice(2)}if(e.internalPubkey){let f=(0,mn.tweakKey)(e.internalPubkey,o.hash);if(a.length>0&&!a.equals(f.x))throw new TypeError("Pubkey mismatch");a=f.x}if(a&&a.length&&a.length!==32)throw new TypeError("Invalid pubkey for p2tr");let c=i();if(e.hash&&c&&!e.hash.equals(c.hash))throw new TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&c){let f=(0,mn.tapleafHash)({output:e.redeem.output,version:o.redeemVersion});if(!(0,mn.findScriptPath)(c,f))throw new TypeError("Redeem script not in tree")}let u=n();if(e.redeem&&o.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==o.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(pp.decompile(e.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");if(o.redeem.output&&!e.redeem.output.equals(o.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&o.redeem.witness&&!PT(e.redeem.witness,o.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(u&&u.length)if(u.length===1){if(e.signature&&!e.signature.equals(u[0]))throw new TypeError("Signature mismatch")}else{let f=u[u.length-1];if(f.length<33)throw new TypeError(`The control-block length is too small. Got ${f.length}, expected min 33.`);if((f.length-33)%32!==0)throw new TypeError(`The control-block length of ${f.length} is incorrect!`);let d=(f.length-33)/32;if(d>128)throw new TypeError(`The script path is too long. Got ${d}, expected max 128.`);let h=f.slice(1,33);if(e.internalPubkey&&!e.internalPubkey.equals(h))throw new TypeError("Internal pubkey mismatch");if(h.length!==32)throw new TypeError("Invalid internalPubkey for p2tr witness");let b=f[0]&Ze.TAPLEAF_VERSION_MASK,g=u[u.length-2],y=(0,mn.tapleafHash)({output:g,version:b}),x=(0,mn.rootHashFromPath)(f,y),T=(0,mn.tweakKey)(h,x);if(!T)throw new TypeError("Invalid outputKey for p2tr witness");if(a.length&&!a.equals(T.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(T.parity!==(f[0]&1))throw new Error("Incorrect parity")}}return Object.assign(o,e)}rs.p2tr=ET;function PT(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}});var yo=K(kr=>{"use strict";E();P();Object.defineProperty(kr,"__esModule",{value:!0});kr.p2tr=kr.p2wsh=kr.p2wpkh=kr.p2sh=kr.p2pkh=kr.p2pk=kr.p2ms=kr.embed=void 0;var TT=Sm();Object.defineProperty(kr,"embed",{enumerable:!0,get:function(){return TT.p2data}});var AT=Tm();Object.defineProperty(kr,"p2ms",{enumerable:!0,get:function(){return AT.p2ms}});var IT=Om();Object.defineProperty(kr,"p2pk",{enumerable:!0,get:function(){return IT.p2pk}});var OT=km();Object.defineProperty(kr,"p2pkh",{enumerable:!0,get:function(){return OT.p2pkh}});var BT=qm();Object.defineProperty(kr,"p2sh",{enumerable:!0,get:function(){return BT.p2sh}});var MT=Um();Object.defineProperty(kr,"p2wpkh",{enumerable:!0,get:function(){return MT.p2wpkh}});var HT=Dm();Object.defineProperty(kr,"p2wsh",{enumerable:!0,get:function(){return HT.p2wsh}});var kT=rw();Object.defineProperty(kr,"p2tr",{enumerable:!0,get:function(){return kT.p2tr}})});var ec=K(dr=>{"use strict";E();P();var NT=dr&&dr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),CT=dr&&dr.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),$0=dr&&dr.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&NT(t,e,r);return CT(t,e),t};Object.defineProperty(dr,"__esModule",{value:!0});dr.toOutputScript=dr.fromOutputScript=dr.toBech32=dr.toBase58Check=dr.fromBech32=dr.fromBase58Check=void 0;var nw=$0(In()),ns=$0(yo()),iw=$0(xr()),G0=$0(en()),vo=ft(),{typeforce:qT}=G0,sw=40,ow=2,aw=16,cw=2,uw=80,fw="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function RT(e,t){let r=e.slice(2);if(r.length<ow||r.length>sw)throw new TypeError("Invalid program length for segwit address");let n=e[0]-uw;if(n<cw||n>aw)throw new TypeError("Invalid version for segwit address");if(e[1]!==r.length)throw new TypeError("Invalid script for segwit address");return console.warn(fw),hw(r,n,t.bech32)}function dw(e){let t=vo.base.fromBase58Check(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");let r=t.readUInt8(0),n=t.slice(1);return{version:r,hash:n}}dr.fromBase58Check=dw;function lw(e){let t,r;try{t=vo.base.bech32.decode(e)}catch{}if(t){if(r=t.words[0],r!==0)throw new TypeError(e+" uses wrong encoding")}else if(t=vo.base.bech32m.decode(e),r=t.words[0],r===0)throw new TypeError(e+" uses wrong encoding");let n=vo.base.bech32.fromWords(t.words.slice(1));return{version:r,prefix:t.prefix,data:m.Buffer.from(n)}}dr.fromBech32=lw;function UT(e,t){qT(G0.tuple(G0.Hash160bit,G0.UInt8),arguments);let r=m.Buffer.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),vo.base.toBase58Check(r)}dr.toBase58Check=UT;function hw(e,t,r){let n=vo.base.bech32.toWords(e);return n.unshift(t),t===0?vo.base.bech32.encode(r,n):vo.base.bech32m.encode(r,n)}dr.toBech32=hw;function LT(e,t){t=t||nw.bitcoin;try{return ns.p2pkh({output:e,network:t}).address}catch{}try{return ns.p2sh({output:e,network:t}).address}catch{}try{return ns.p2wpkh({output:e,network:t}).address}catch{}try{return ns.p2wsh({output:e,network:t}).address}catch{}try{return ns.p2tr({output:e,network:t}).address}catch{}try{return RT(e,t)}catch{}throw new Error(iw.toASM(e)+" has no matching Address")}dr.fromOutputScript=LT;function jT(e,t){t=t||nw.bitcoin;let r,n;try{r=dw(e)}catch{}if(r){if(r.version===t.pubKeyHash)return ns.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return ns.p2sh({hash:r.hash}).output}else{try{n=lw(e)}catch{}if(n){if(n.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(n.version===0){if(n.data.length===20)return ns.p2wpkh({hash:n.data}).output;if(n.data.length===32)return ns.p2wsh({hash:n.data}).output}else if(n.version===1){if(n.data.length===32)return ns.p2tr({pubkey:n.data}).output}else if(n.version>=cw&&n.version<=aw&&n.data.length>=ow&&n.data.length<=sw)return console.warn(fw),iw.compile([n.version+uw,n.data])}}throw new Error(e+" has no matching Script")}dr.toOutputScript=jT});var na=K(xn=>{"use strict";E();P();var DT=xn&&xn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),KT=xn&&xn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),bp=xn&&xn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&DT(t,e,r);return KT(t,e),t};Object.defineProperty(xn,"__esModule",{value:!0});xn.Transaction=xn.vectorSize=xn.varSliceSize=void 0;var Pt=bo(),lr=bp(cn()),pw=bp(xr()),FT=xr(),Me=bp(en()),{typeforce:Ii}=Me;function wn(e){let t=e.length;return Pt.varuint.encodingLength(t)+t}xn.varSliceSize=wn;function yw(e){let t=e.length;return Pt.varuint.encodingLength(t)+e.reduce((r,n)=>r+wn(n),0)}xn.vectorSize=yw;var mo=m.Buffer.allocUnsafe(0),bw=[],tc=m.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),gw=m.Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),WT=m.Buffer.from("ffffffffffffffff","hex"),zT={script:mo,valueBuffer:WT};function VT(e){return e.value!==void 0}var ye=class{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(t,r){let n=new Pt.BufferReader(t),i=new ye;i.version=n.readInt32();let s=n.readUInt8(),o=n.readUInt8(),a=!1;s===ye.ADVANCED_TRANSACTION_MARKER&&o===ye.ADVANCED_TRANSACTION_FLAG?a=!0:n.offset-=2;let c=n.readVarInt();for(let f=0;f<c;++f)i.ins.push({hash:n.readSlice(32),index:n.readUInt32(),script:n.readVarSlice(),sequence:n.readUInt32(),witness:bw});let u=n.readVarInt();for(let f=0;f<u;++f)i.outs.push({value:n.readUInt64(),script:n.readVarSlice()});if(a){for(let f=0;f<c;++f)i.ins[f].witness=n.readVector();if(!i.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(i.locktime=n.readUInt32(),r)return i;if(n.offset!==t.length)throw new Error("Transaction has unexpected data");return i}static fromHex(t){return ye.fromBuffer(m.Buffer.from(t,"hex"),!1)}static isCoinbaseHash(t){Ii(Me.Hash256bit,t);for(let r=0;r<32;++r)if(t[r]!==0)return!1;return!0}isCoinbase(){return this.ins.length===1&&ye.isCoinbaseHash(this.ins[0].hash)}addInput(t,r,n,i){return Ii(Me.tuple(Me.Hash256bit,Me.UInt32,Me.maybe(Me.UInt32),Me.maybe(Me.Buffer)),arguments),Me.Null(n)&&(n=ye.DEFAULT_SEQUENCE),this.ins.push({hash:t,index:r,script:i||mo,sequence:n,witness:bw})-1}addOutput(t,r){return Ii(Me.tuple(Me.Buffer,Me.Satoshi),arguments),this.outs.push({script:t,value:r})-1}hasWitnesses(){return this.ins.some(t=>t.witness.length!==0)}weight(){let t=this.byteLength(!1),r=this.byteLength(!0);return t*3+r}virtualSize(){return Math.ceil(this.weight()/4)}dogeByteLength(){let t=26+this.ins.reduce((r,n)=>{let i=40+wn(n.script);return r+32+4+i},0)+this.outs.reduce((r,n)=>r+9+n.script.length,0);return Math.ceil(t)}byteLength(t=!0){let r=t&&this.hasWitnesses();return(r?10:8)+Pt.varuint.encodingLength(this.ins.length)+Pt.varuint.encodingLength(this.outs.length)+this.ins.reduce((n,i)=>n+40+wn(i.script),0)+this.outs.reduce((n,i)=>n+8+wn(i.script),0)+(r?this.ins.reduce((n,i)=>n+yw(i.witness),0):0)}clone(){let t=new ye;return t.version=this.version,t.locktime=this.locktime,t.ins=this.ins.map(r=>({hash:r.hash,index:r.index,script:r.script,sequence:r.sequence,witness:r.witness})),t.outs=this.outs.map(r=>({script:r.script,value:r.value})),t}hashForSignature(t,r,n){if(Ii(Me.tuple(Me.UInt32,Me.Buffer,Me.Number),arguments),t>=this.ins.length)return gw;let i=pw.compile(pw.decompile(r).filter(a=>a!==FT.OPS.OP_CODESEPARATOR)),s=this.clone();if((n&31)===ye.SIGHASH_NONE)s.outs=[],s.ins.forEach((a,c)=>{c!==t&&(a.sequence=0)});else if((n&31)===ye.SIGHASH_SINGLE){if(t>=this.outs.length)return gw;s.outs.length=t+1;for(let a=0;a<t;a++)s.outs[a]=zT;s.ins.forEach((a,c)=>{c!==t&&(a.sequence=0)})}n&ye.SIGHASH_ANYONECANPAY?(s.ins=[s.ins[t]],s.ins[0].script=i):(s.ins.forEach(a=>{a.script=mo}),s.ins[t].script=i);let o=m.Buffer.allocUnsafe(s.byteLength(!1)+4);return o.writeInt32LE(n,o.length-4),s.__toBuffer(o,0,!1),lr.hash256(o)}hashForCashSignature(t,r,n,i){if(i&ye.SIGHASH_BITCOINCASHBIP143){if(Me.Null(n))throw new Error("Bitcoin Cash sighash requires value of input to be signed.");return this.hashForWitnessV0(t,r,n,i)}else return this.hashForSignature(t,r,i)}hashForWitnessV1(t,r,n,i,s,o){if(Ii(Me.tuple(Me.UInt32,Ii.arrayOf(Me.Buffer),Ii.arrayOf(Me.Satoshi),Me.UInt32),arguments),n.length!==this.ins.length||r.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");let a=i===ye.SIGHASH_DEFAULT?ye.SIGHASH_ALL:i&ye.SIGHASH_OUTPUT_MASK,u=(i&ye.SIGHASH_INPUT_MASK)===ye.SIGHASH_ANYONECANPAY,f=a===ye.SIGHASH_NONE,d=a===ye.SIGHASH_SINGLE,h=mo,b=mo,g=mo,y=mo,x=mo;if(!u){let R=Pt.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach(C=>{R.writeSlice(C.hash),R.writeUInt32(C.index)}),h=lr.sha256(R.end()),R=Pt.BufferWriter.withCapacity(8*this.ins.length),n.forEach(C=>R.writeUInt64(C)),b=lr.sha256(R.end()),R=Pt.BufferWriter.withCapacity(r.map(wn).reduce((C,q)=>C+q)),r.forEach(C=>R.writeVarSlice(C)),g=lr.sha256(R.end()),R=Pt.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach(C=>R.writeUInt32(C.sequence)),y=lr.sha256(R.end())}if(f||d){if(d&&t<this.outs.length){let R=this.outs[t],C=Pt.BufferWriter.withCapacity(8+wn(R.script));C.writeUInt64(R.value),C.writeVarSlice(R.script),x=lr.sha256(C.end())}}else{let R=this.outs.map(q=>8+wn(q.script)).reduce((q,L)=>q+L),C=Pt.BufferWriter.withCapacity(R);this.outs.forEach(q=>{C.writeUInt64(q.value),C.writeVarSlice(q.script)}),x=lr.sha256(C.end())}let T=(s?2:0)+(o?1:0),M=174-(u?49:0)-(f?32:0)+(o?32:0)+(s?37:0),k=Pt.BufferWriter.withCapacity(M);if(k.writeUInt8(i),k.writeInt32(this.version),k.writeUInt32(this.locktime),k.writeSlice(h),k.writeSlice(b),k.writeSlice(g),k.writeSlice(y),f||d||k.writeSlice(x),k.writeUInt8(T),u){let R=this.ins[t];k.writeSlice(R.hash),k.writeUInt32(R.index),k.writeUInt64(n[t]),k.writeVarSlice(r[t]),k.writeUInt32(R.sequence)}else k.writeUInt32(t);if(o){let R=Pt.BufferWriter.withCapacity(wn(o));R.writeVarSlice(o),k.writeSlice(lr.sha256(R.end()))}return d&&k.writeSlice(x),s&&(k.writeSlice(s),k.writeUInt8(0),k.writeUInt32(4294967295)),lr.taggedHash("TapSighash",m.Buffer.concat([m.Buffer.of(0),k.end()]))}hashForWitnessV0(t,r,n,i){Ii(Me.tuple(Me.UInt32,Me.Buffer,Me.Satoshi,Me.UInt32),arguments);let s=m.Buffer.from([]),o,a=tc,c=tc,u=tc;if(i&ye.SIGHASH_ANYONECANPAY||(s=m.Buffer.allocUnsafe(36*this.ins.length),o=new Pt.BufferWriter(s,0),this.ins.forEach(d=>{o.writeSlice(d.hash),o.writeUInt32(d.index)}),c=lr.hash256(s)),!(i&ye.SIGHASH_ANYONECANPAY)&&(i&31)!==ye.SIGHASH_SINGLE&&(i&31)!==ye.SIGHASH_NONE&&(s=m.Buffer.allocUnsafe(4*this.ins.length),o=new Pt.BufferWriter(s,0),this.ins.forEach(d=>{o.writeUInt32(d.sequence)}),u=lr.hash256(s)),(i&31)!==ye.SIGHASH_SINGLE&&(i&31)!==ye.SIGHASH_NONE){let d=this.outs.reduce((h,b)=>h+8+wn(b.script),0);s=m.Buffer.allocUnsafe(d),o=new Pt.BufferWriter(s,0),this.outs.forEach(h=>{o.writeUInt64(h.value),o.writeVarSlice(h.script)}),a=lr.hash256(s)}else if((i&31)===ye.SIGHASH_SINGLE&&t<this.outs.length){let d=this.outs[t];s=m.Buffer.allocUnsafe(8+wn(d.script)),o=new Pt.BufferWriter(s,0),o.writeUInt64(d.value),o.writeVarSlice(d.script),a=lr.hash256(s)}s=m.Buffer.allocUnsafe(156+wn(r)),o=new Pt.BufferWriter(s,0);let f=this.ins[t];return o.writeInt32(this.version),o.writeSlice(c),o.writeSlice(u),o.writeSlice(f.hash),o.writeUInt32(f.index),o.writeVarSlice(r),o.writeUInt64(n),o.writeUInt32(f.sequence),o.writeSlice(a),o.writeUInt32(this.locktime),o.writeUInt32(i),lr.hash256(s)}getHash(t){return t&&this.isCoinbase()?m.Buffer.alloc(32,0):lr.hash256(this.__toBuffer(void 0,void 0,t))}getId(){return(0,Pt.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(t,r){return this.__toBuffer(t,r,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(t,r){Ii(Me.tuple(Me.Number,Me.Buffer),arguments),this.ins[t].script=r}setWitness(t,r){Ii(Me.tuple(Me.Number,[Me.Buffer]),arguments),this.ins[t].witness=r}__toBuffer(t,r,n=!1){t||(t=m.Buffer.allocUnsafe(this.byteLength(n)));let i=new Pt.BufferWriter(t,r||0);i.writeInt32(this.version);let s=n&&this.hasWitnesses();return s&&(i.writeUInt8(ye.ADVANCED_TRANSACTION_MARKER),i.writeUInt8(ye.ADVANCED_TRANSACTION_FLAG)),i.writeVarInt(this.ins.length),this.ins.forEach(o=>{i.writeSlice(o.hash),i.writeUInt32(o.index),i.writeVarSlice(o.script),i.writeUInt32(o.sequence)}),i.writeVarInt(this.outs.length),this.outs.forEach(o=>{VT(o)?i.writeUInt64(o.value):i.writeSlice(o.valueBuffer),i.writeVarSlice(o.script)}),s&&this.ins.forEach(o=>{i.writeVector(o.witness)}),i.writeUInt32(this.locktime),r!==void 0?t.slice(r,i.offset):t}hashForWitness(t,r,n,i){Ii(Me.tuple(Me.UInt32,Me.Buffer,Me.Satoshi,Me.UInt32),arguments);let s=m.Buffer.from([]),o,a=tc,c=tc,u=tc;if(i&ye.SIGHASH_ANYONECANPAY||(s=m.Buffer.allocUnsafe(36*this.ins.length),o=new Pt.BufferWriter(s,0),this.ins.forEach(d=>{o.writeSlice(d.hash),o.writeUInt32(d.index)}),c=lr.hash256(s)),!(i&ye.SIGHASH_ANYONECANPAY)&&(i&31)!==ye.SIGHASH_SINGLE&&(i&31)!==ye.SIGHASH_NONE&&(s=m.Buffer.allocUnsafe(4*this.ins.length),o=new Pt.BufferWriter(s,0),this.ins.forEach(d=>{o.writeUInt32(d.sequence)}),u=lr.hash256(s)),(i&31)!==ye.SIGHASH_SINGLE&&(i&31)!==ye.SIGHASH_NONE){let d=this.outs.reduce((h,b)=>h+8+wn(b.script),0);s=m.Buffer.allocUnsafe(d),o=new Pt.BufferWriter(s,0),this.outs.forEach(h=>{o.writeUInt64(h.value),o.writeVarSlice(h.script)}),a=lr.hash256(s)}else if((i&31)===ye.SIGHASH_SINGLE&&t<this.outs.length){let d=this.outs[t];s=m.Buffer.allocUnsafe(8+wn(d.script)),o=new Pt.BufferWriter(s,0),o.writeUInt64(d.value),o.writeVarSlice(d.script),a=lr.hash256(s)}s=m.Buffer.allocUnsafe(156+r.length),o=new Pt.BufferWriter(s,0);let f=this.ins[t];return o.writeInt32(this.version),o.writeSlice(c),o.writeSlice(u),o.writeSlice(f.hash),o.writeUInt32(f.index),o.writeSlice(r),o.writeUInt64(n),o.writeUInt32(f.sequence),o.writeSlice(a),o.writeUInt32(this.locktime),o.writeUInt32(i),lr.hash256(s)}};xn.Transaction=ye;ye.DEFAULT_SEQUENCE=4294967295;ye.SIGHASH_DEFAULT=0;ye.SIGHASH_ALL=1;ye.SIGHASH_NONE=2;ye.SIGHASH_SINGLE=3;ye.SIGHASH_ANYONECANPAY=128;ye.SIGHASH_OUTPUT_MASK=3;ye.SIGHASH_INPUT_MASK=128;ye.SIGHASH_BITCOINCASHBIP143=64;ye.ADVANCED_TRANSACTION_MARKER=0;ye.ADVANCED_TRANSACTION_FLAG=1});var Nr=K(Dr=>{"use strict";E();P();Object.defineProperty(Dr,"__esModule",{value:!0});Dr.OUTPUT_TYPE_NAMES=Dr.OutputTypes=Dr.INPUT_TYPE_NAMES=Dr.InputTypes=Dr.GLOBAL_TYPE_NAMES=Dr.GlobalTypes=void 0;var GT;(function(e){e[e.UNSIGNED_TX=0]="UNSIGNED_TX",e[e.GLOBAL_XPUB=1]="GLOBAL_XPUB"})(GT=Dr.GlobalTypes||(Dr.GlobalTypes={}));Dr.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"];var $T;(function(e){e[e.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",e[e.WITNESS_UTXO=1]="WITNESS_UTXO",e[e.PARTIAL_SIG=2]="PARTIAL_SIG",e[e.SIGHASH_TYPE=3]="SIGHASH_TYPE",e[e.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=6]="BIP32_DERIVATION",e[e.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",e[e.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",e[e.POR_COMMITMENT=9]="POR_COMMITMENT",e[e.TAP_KEY_SIG=19]="TAP_KEY_SIG",e[e.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",e[e.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",e[e.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",e[e.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT"})($T=Dr.InputTypes||(Dr.InputTypes={}));Dr.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"];var XT;(function(e){e[e.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=2]="BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",e[e.TAP_TREE=6]="TAP_TREE",e[e.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"})(XT=Dr.OutputTypes||(Dr.OutputTypes={}));Dr.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]});var mw=K(Yn=>{"use strict";E();P();Object.defineProperty(Yn,"__esModule",{value:!0});Yn.canAddToArray=Yn.check=Yn.expected=Yn.encode=Yn.decode=void 0;var vw=Nr(),YT=e=>[...Array(e).keys()];function ZT(e){if(e.key[0]!==vw.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(e.key.length!==79||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!==0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");let t=e.key.slice(1),r={masterFingerprint:e.value.slice(0,4),extendedPubkey:t,path:"m"};for(let n of YT(e.value.length/4-1)){let i=e.value.readUInt32LE(n*4+4),s=!!(i&2147483648),o=i&2147483647;r.path+="/"+o.toString(10)+(s?"'":"")}return r}Yn.decode=ZT;function JT(e){let t=m.Buffer.from([vw.GlobalTypes.GLOBAL_XPUB]),r=m.Buffer.concat([t,e.extendedPubkey]),n=e.path.split("/"),i=m.Buffer.allocUnsafe(n.length*4);e.masterFingerprint.copy(i,0);let s=4;return n.slice(1).forEach(o=>{let a=o.slice(-1)==="'",c=2147483647&parseInt(a?o.slice(0,-1):o,10);a&&(c+=2147483648),i.writeUInt32LE(c,s),s+=4}),{key:r,value:i}}Yn.encode=JT;Yn.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }";function QT(e){let t=e.extendedPubkey,r=e.masterFingerprint,n=e.path;return m.Buffer.isBuffer(t)&&t.length===78&&[2,3].indexOf(t[45])>-1&&m.Buffer.isBuffer(r)&&r.length===4&&typeof n=="string"&&!!n.match(/^m(\/\d+'?)*$/)}Yn.check=QT;function eA(e,t,r){let n=t.extendedPubkey.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.extendedPubkey.equals(t.extendedPubkey)).length===0)}Yn.canAddToArray=eA});var ww=K(X0=>{"use strict";E();P();Object.defineProperty(X0,"__esModule",{value:!0});X0.encode=void 0;var tA=Nr();function rA(e){return{key:m.Buffer.from([tA.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}X0.encode=rA});var _w=K(Zn=>{"use strict";E();P();Object.defineProperty(Zn,"__esModule",{value:!0});Zn.canAdd=Zn.check=Zn.expected=Zn.encode=Zn.decode=void 0;var xw=Nr();function nA(e){if(e.key[0]!==xw.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value}Zn.decode=nA;function iA(e){return{key:m.Buffer.from([xw.InputTypes.FINAL_SCRIPTSIG]),value:e}}Zn.encode=iA;Zn.expected="Buffer";function sA(e){return m.Buffer.isBuffer(e)}Zn.check=sA;function oA(e,t){return!!e&&!!t&&e.finalScriptSig===void 0}Zn.canAdd=oA});var Ew=K(Jn=>{"use strict";E();P();Object.defineProperty(Jn,"__esModule",{value:!0});Jn.canAdd=Jn.check=Jn.expected=Jn.encode=Jn.decode=void 0;var Sw=Nr();function aA(e){if(e.key[0]!==Sw.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value}Jn.decode=aA;function cA(e){return{key:m.Buffer.from([Sw.InputTypes.FINAL_SCRIPTWITNESS]),value:e}}Jn.encode=cA;Jn.expected="Buffer";function uA(e){return m.Buffer.isBuffer(e)}Jn.check=uA;function fA(e,t){return!!e&&!!t&&e.finalScriptWitness===void 0}Jn.canAdd=fA});var Tw=K(Qn=>{"use strict";E();P();Object.defineProperty(Qn,"__esModule",{value:!0});Qn.canAdd=Qn.check=Qn.expected=Qn.encode=Qn.decode=void 0;var Pw=Nr();function dA(e){if(e.key[0]!==Pw.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value}Qn.decode=dA;function lA(e){return{key:m.Buffer.from([Pw.InputTypes.NON_WITNESS_UTXO]),value:e}}Qn.encode=lA;Qn.expected="Buffer";function hA(e){return m.Buffer.isBuffer(e)}Qn.check=hA;function pA(e,t){return!!e&&!!t&&e.nonWitnessUtxo===void 0}Qn.canAdd=pA});var Iw=K(ei=>{"use strict";E();P();Object.defineProperty(ei,"__esModule",{value:!0});ei.canAddToArray=ei.check=ei.expected=ei.encode=ei.decode=void 0;var Aw=Nr();function bA(e){if(e.key[0]!==Aw.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(!(e.key.length===34||e.key.length===66)||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}}ei.decode=bA;function gA(e){let t=m.Buffer.from([Aw.InputTypes.PARTIAL_SIG]);return{key:m.Buffer.concat([t,e.pubkey]),value:e.signature}}ei.encode=gA;ei.expected="{ pubkey: Buffer; signature: Buffer; }";function yA(e){return m.Buffer.isBuffer(e.pubkey)&&m.Buffer.isBuffer(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&vA(e.signature)}ei.check=yA;function vA(e){if(!m.Buffer.isBuffer(e)||e.length<9||e[0]!==48||e.length!==e[1]+3||e[2]!==2)return!1;let t=e[3];if(t>33||t<1||e[3+t+1]!==2)return!1;let r=e[3+t+2];return!(r>33||r<1||e.length!==3+t+2+r+2)}function mA(e,t,r){let n=t.pubkey.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.pubkey.equals(t.pubkey)).length===0)}ei.canAddToArray=mA});var Bw=K(ti=>{"use strict";E();P();Object.defineProperty(ti,"__esModule",{value:!0});ti.canAdd=ti.check=ti.expected=ti.encode=ti.decode=void 0;var Ow=Nr();function wA(e){if(e.key[0]!==Ow.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")}ti.decode=wA;function xA(e){return{key:m.Buffer.from([Ow.InputTypes.POR_COMMITMENT]),value:m.Buffer.from(e,"utf8")}}ti.encode=xA;ti.expected="string";function _A(e){return typeof e=="string"}ti.check=_A;function SA(e,t){return!!e&&!!t&&e.porCommitment===void 0}ti.canAdd=SA});var Hw=K(ri=>{"use strict";E();P();Object.defineProperty(ri,"__esModule",{value:!0});ri.canAdd=ri.check=ri.expected=ri.encode=ri.decode=void 0;var Mw=Nr();function EA(e){if(e.key[0]!==Mw.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)}ri.decode=EA;function PA(e){let t=m.Buffer.from([Mw.InputTypes.SIGHASH_TYPE]),r=m.Buffer.allocUnsafe(4);return r.writeUInt32LE(e,0),{key:t,value:r}}ri.encode=PA;ri.expected="number";function TA(e){return typeof e=="number"}ri.check=TA;function AA(e,t){return!!e&&!!t&&e.sighashType===void 0}ri.canAdd=AA});var Cw=K(ni=>{"use strict";E();P();Object.defineProperty(ni,"__esModule",{value:!0});ni.canAdd=ni.check=ni.expected=ni.encode=ni.decode=void 0;var kw=Nr();function IA(e){if(e.key[0]!==kw.InputTypes.TAP_KEY_SIG||e.key.length!==1)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+e.key.toString("hex"));if(!Nw(e.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return e.value}ni.decode=IA;function OA(e){return{key:m.Buffer.from([kw.InputTypes.TAP_KEY_SIG]),value:e}}ni.encode=OA;ni.expected="Buffer";function Nw(e){return m.Buffer.isBuffer(e)&&(e.length===64||e.length===65)}ni.check=Nw;function BA(e,t){return!!e&&!!t&&e.tapKeySig===void 0}ni.canAdd=BA});var Rw=K(ii=>{"use strict";E();P();Object.defineProperty(ii,"__esModule",{value:!0});ii.canAddToArray=ii.check=ii.expected=ii.encode=ii.decode=void 0;var qw=Nr();function MA(e){if(e.key[0]!==qw.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+e.key.toString("hex"));if((e.key.length-2)%32!==0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+e.key.toString("hex"));let t=e.value[e.value.length-1];if((e.key[1]&254)!==t)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+e.key.toString("hex"));let r=e.value.slice(0,-1);return{controlBlock:e.key.slice(1),script:r,leafVersion:t}}ii.decode=MA;function HA(e){let t=m.Buffer.from([qw.InputTypes.TAP_LEAF_SCRIPT]),r=m.Buffer.from([e.leafVersion]);return{key:m.Buffer.concat([t,e.controlBlock]),value:m.Buffer.concat([e.script,r])}}ii.encode=HA;ii.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }";function kA(e){return m.Buffer.isBuffer(e.controlBlock)&&(e.controlBlock.length-1)%32===0&&(e.controlBlock[0]&254)===e.leafVersion&&m.Buffer.isBuffer(e.script)}ii.check=kA;function NA(e,t,r){let n=t.controlBlock.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.controlBlock.equals(t.controlBlock)).length===0)}ii.canAddToArray=NA});var jw=K(si=>{"use strict";E();P();Object.defineProperty(si,"__esModule",{value:!0});si.canAdd=si.check=si.expected=si.encode=si.decode=void 0;var Uw=Nr();function CA(e){if(e.key[0]!==Uw.InputTypes.TAP_MERKLE_ROOT||e.key.length!==1)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+e.key.toString("hex"));if(!Lw(e.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return e.value}si.decode=CA;function qA(e){return{key:m.Buffer.from([Uw.InputTypes.TAP_MERKLE_ROOT]),value:e}}si.encode=qA;si.expected="Buffer";function Lw(e){return m.Buffer.isBuffer(e)&&e.length===32}si.check=Lw;function RA(e,t){return!!e&&!!t&&e.tapMerkleRoot===void 0}si.canAdd=RA});var Kw=K(oi=>{"use strict";E();P();Object.defineProperty(oi,"__esModule",{value:!0});oi.canAddToArray=oi.check=oi.expected=oi.encode=oi.decode=void 0;var Dw=Nr();function UA(e){if(e.key[0]!==Dw.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+e.key.toString("hex"));if(e.key.length!==65)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+e.key.toString("hex"));if(e.value.length!==64&&e.value.length!==65)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+e.key.toString("hex"));let t=e.key.slice(1,33),r=e.key.slice(33);return{pubkey:t,leafHash:r,signature:e.value}}oi.decode=UA;function LA(e){let t=m.Buffer.from([Dw.InputTypes.TAP_SCRIPT_SIG]);return{key:m.Buffer.concat([t,e.pubkey,e.leafHash]),value:e.signature}}oi.encode=LA;oi.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }";function jA(e){return m.Buffer.isBuffer(e.pubkey)&&m.Buffer.isBuffer(e.leafHash)&&m.Buffer.isBuffer(e.signature)&&e.pubkey.length===32&&e.leafHash.length===32&&(e.signature.length===64||e.signature.length===65)}oi.check=jA;function DA(e,t,r){let n=t.pubkey.toString("hex")+t.leafHash.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.pubkey.equals(t.pubkey)&&i.leafHash.equals(t.leafHash)).length===0)}oi.canAddToArray=DA});var xo=K(wo=>{"use strict";E();P();Object.defineProperty(wo,"__esModule",{value:!0});wo.encodingLength=wo.decode=wo.encode=void 0;var KA=9007199254740991;function gp(e){if(e<0||e>KA||e%1!==0)throw new RangeError("value out of range")}function du(e,t,r){if(gp(e),t||(t=m.Buffer.allocUnsafe(Fw(e))),!m.Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");return r||(r=0),e<253?(t.writeUInt8(e,r),Object.assign(du,{bytes:1})):e<=65535?(t.writeUInt8(253,r),t.writeUInt16LE(e,r+1),Object.assign(du,{bytes:3})):e<=4294967295?(t.writeUInt8(254,r),t.writeUInt32LE(e,r+1),Object.assign(du,{bytes:5})):(t.writeUInt8(255,r),t.writeUInt32LE(e>>>0,r+1),t.writeUInt32LE(e/4294967296|0,r+5),Object.assign(du,{bytes:9})),t}wo.encode=du;function lu(e,t){if(!m.Buffer.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");t||(t=0);let r=e.readUInt8(t);if(r<253)return Object.assign(lu,{bytes:1}),r;if(r===253)return Object.assign(lu,{bytes:3}),e.readUInt16LE(t+1);if(r===254)return Object.assign(lu,{bytes:5}),e.readUInt32LE(t+1);{Object.assign(lu,{bytes:9});let n=e.readUInt32LE(t+1),s=e.readUInt32LE(t+5)*4294967296+n;return gp(s),s}}wo.decode=lu;function Fw(e){return gp(e),e<253?1:e<=65535?3:e<=4294967295?5:9}wo.encodingLength=Fw});var Z0=K(hr=>{"use strict";E();P();var FA=hr&&hr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),WA=hr&&hr.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),zA=hr&&hr.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&FA(t,e,r);return WA(t,e),t};Object.defineProperty(hr,"__esModule",{value:!0});hr.writeUInt64LE=hr.readUInt64LE=hr.keyValToBuffer=hr.keyValsToBuffer=hr.reverseBuffer=hr.range=void 0;var Y0=zA(xo()),VA=e=>[...Array(e).keys()];hr.range=VA;function GA(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}hr.reverseBuffer=GA;function $A(e){let t=e.map(Ww);return t.push(m.Buffer.from([0])),m.Buffer.concat(t)}hr.keyValsToBuffer=$A;function Ww(e){let t=e.key.length,r=e.value.length,n=Y0.encodingLength(t),i=Y0.encodingLength(r),s=m.Buffer.allocUnsafe(n+t+i+r);return Y0.encode(t,s,0),e.key.copy(s,n),Y0.encode(r,s,n+t),e.value.copy(s,n+t+i),s}hr.keyValToBuffer=Ww;function zw(e,t){if(typeof e!="number")throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function XA(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return n*=4294967296,zw(n+r,9007199254740991),n+r}hr.readUInt64LE=XA;function YA(e,t,r){return zw(t,9007199254740991),e.writeInt32LE(t&-1,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}hr.writeUInt64LE=YA});var $w=K(Cr=>{"use strict";E();P();var ZA=Cr&&Cr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),JA=Cr&&Cr.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),QA=Cr&&Cr.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&ZA(t,e,r);return JA(t,e),t};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.canAdd=Cr.check=Cr.expected=Cr.encode=Cr.decode=void 0;var Vw=Nr(),Gw=Z0(),J0=QA(xo());function eI(e){if(e.key[0]!==Vw.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));let t=(0,Gw.readUInt64LE)(e.value,0),r=8,n=J0.decode(e.value,r);r+=J0.encodingLength(n);let i=e.value.slice(r);if(i.length!==n)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:i,value:t}}Cr.decode=eI;function tI(e){let{script:t,value:r}=e,n=J0.encodingLength(t.length),i=m.Buffer.allocUnsafe(8+n+t.length);return(0,Gw.writeUInt64LE)(i,r,0),J0.encode(t.length,i,8),t.copy(i,8+n),{key:m.Buffer.from([Vw.InputTypes.WITNESS_UTXO]),value:i}}Cr.encode=tI;Cr.expected="{ script: Buffer; value: number; }";function rI(e){return m.Buffer.isBuffer(e.script)&&typeof e.value=="number"}Cr.check=rI;function nI(e,t){return!!e&&!!t&&e.witnessUtxo===void 0}Cr.canAdd=nI});var Yw=K(qr=>{"use strict";E();P();var iI=qr&&qr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),sI=qr&&qr.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),oI=qr&&qr.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&iI(t,e,r);return sI(t,e),t};Object.defineProperty(qr,"__esModule",{value:!0});qr.canAdd=qr.check=qr.expected=qr.encode=qr.decode=void 0;var Xw=Nr(),yp=oI(xo());function aI(e){if(e.key[0]!==Xw.OutputTypes.TAP_TREE||e.key.length!==1)throw new Error("Decode Error: could not decode tapTree with key 0x"+e.key.toString("hex"));let t=0,r=[];for(;t<e.value.length;){let n=e.value[t++],i=e.value[t++],s=yp.decode(e.value,t);t+=yp.encodingLength(s),r.push({depth:n,leafVersion:i,script:e.value.slice(t,t+s)}),t+=s}return{leaves:r}}qr.decode=aI;function cI(e){let t=m.Buffer.from([Xw.OutputTypes.TAP_TREE]),r=[].concat(...e.leaves.map(n=>[m.Buffer.of(n.depth,n.leafVersion),yp.encode(n.script.length),n.script]));return{key:t,value:m.Buffer.concat(r)}}qr.encode=cI;qr.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }";function uI(e){return Array.isArray(e.leaves)&&e.leaves.every(t=>t.depth>=0&&t.depth<=128&&(t.leafVersion&254)===t.leafVersion&&m.Buffer.isBuffer(t.script))}qr.check=uI;function fI(e,t){return!!e&&!!t&&e.tapTree===void 0}qr.canAdd=fI});var vp=K(Q0=>{"use strict";E();P();Object.defineProperty(Q0,"__esModule",{value:!0});Q0.makeConverter=void 0;var dI=e=>[...Array(e).keys()],lI=e=>e.length===33&&[2,3].includes(e[0])||e.length===65&&e[0]===4;function hI(e,t=lI){function r(a){if(a.key[0]!==e)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+a.key.toString("hex"));let c=a.key.slice(1);if(!t(c))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+a.key.toString("hex"));if(a.value.length/4%1!==0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");let u={masterFingerprint:a.value.slice(0,4),pubkey:c,path:"m"};for(let f of dI(a.value.length/4-1)){let d=a.value.readUInt32LE(f*4+4),h=!!(d&2147483648),b=d&2147483647;u.path+="/"+b.toString(10)+(h?"'":"")}return u}function n(a){let c=m.Buffer.from([e]),u=m.Buffer.concat([c,a.pubkey]),f=a.path.split("/"),d=m.Buffer.allocUnsafe(f.length*4);a.masterFingerprint.copy(d,0);let h=4;return f.slice(1).forEach(b=>{let g=b.slice(-1)==="'",y=2147483647&parseInt(g?b.slice(0,-1):b,10);g&&(y+=2147483648),d.writeUInt32LE(y,h),h+=4}),{key:u,value:d}}let i="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }";function s(a){return m.Buffer.isBuffer(a.pubkey)&&m.Buffer.isBuffer(a.masterFingerprint)&&typeof a.path=="string"&&t(a.pubkey)&&a.masterFingerprint.length===4}function o(a,c,u){let f=c.pubkey.toString("hex");return u.has(f)?!1:(u.add(f),a.filter(d=>d.pubkey.equals(c.pubkey)).length===0)}return{decode:r,encode:n,check:s,expected:i,canAddToArray:o}}Q0.makeConverter=hI});var Zw=K(ed=>{"use strict";E();P();Object.defineProperty(ed,"__esModule",{value:!0});ed.makeChecker=void 0;function pI(e){return t;function t(r){let n;if(e.includes(r.key[0])&&(n=r.key.slice(1),!(n.length===33||n.length===65)||![2,3,4].includes(n[0])))throw new Error("Format Error: invalid pubkey in key 0x"+r.key.toString("hex"));return n}}ed.makeChecker=pI});var Jw=K(td=>{"use strict";E();P();Object.defineProperty(td,"__esModule",{value:!0});td.makeConverter=void 0;function bI(e){function t(o){if(o.key[0]!==e)throw new Error("Decode Error: could not decode redeemScript with key 0x"+o.key.toString("hex"));return o.value}function r(o){return{key:m.Buffer.from([e]),value:o}}let n="Buffer";function i(o){return m.Buffer.isBuffer(o)}function s(o,a){return!!o&&!!a&&o.redeemScript===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:s}}td.makeConverter=bI});var e3=K(is=>{"use strict";E();P();var gI=is&&is.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),yI=is&&is.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Qw=is&&is.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&gI(t,e,r);return yI(t,e),t};Object.defineProperty(is,"__esModule",{value:!0});is.makeConverter=void 0;var rd=Qw(xo()),vI=Qw(vp()),mI=e=>e.length===32;function wI(e){let t=vI.makeConverter(e,mI);function r(o){let a=rd.decode(o.value),c=rd.encodingLength(a),u=t.decode({key:o.key,value:o.value.slice(c+a*32)}),f=new Array(a);for(let d=0,h=c;d<a;d++,h+=32)f[d]=o.value.slice(h,h+32);return{...u,leafHashes:f}}function n(o){let a=t.encode(o),c=rd.encodingLength(o.leafHashes.length),u=m.Buffer.allocUnsafe(c);rd.encode(o.leafHashes.length,u);let f=m.Buffer.concat([u,...o.leafHashes,a.value]);return{...a,value:f}}let i="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }";function s(o){return Array.isArray(o.leafHashes)&&o.leafHashes.every(a=>m.Buffer.isBuffer(a)&&a.length===32)&&t.check(o)}return{decode:r,encode:n,check:s,expected:i,canAddToArray:t.canAddToArray}}is.makeConverter=wI});var t3=K(nd=>{"use strict";E();P();Object.defineProperty(nd,"__esModule",{value:!0});nd.makeConverter=void 0;function xI(e){function t(o){if(o.key[0]!==e||o.key.length!==1)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+o.key.toString("hex"));if(o.value.length!==32)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return o.value}function r(o){return{key:m.Buffer.from([e]),value:o}}let n="Buffer";function i(o){return m.Buffer.isBuffer(o)&&o.length===32}function s(o,a){return!!o&&!!a&&o.tapInternalKey===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:s}}nd.makeConverter=xI});var r3=K(id=>{"use strict";E();P();Object.defineProperty(id,"__esModule",{value:!0});id.makeConverter=void 0;function _I(e){function t(o){if(o.key[0]!==e)throw new Error("Decode Error: could not decode witnessScript with key 0x"+o.key.toString("hex"));return o.value}function r(o){return{key:m.Buffer.from([e]),value:o}}let n="Buffer";function i(o){return m.Buffer.isBuffer(o)}function s(o,a){return!!o&&!!a&&o.witnessScript===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:s}}id.makeConverter=_I});var sd=K(_n=>{"use strict";E();P();var SI=_n&&_n.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),EI=_n&&_n.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),pr=_n&&_n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&SI(t,e,r);return EI(t,e),t};Object.defineProperty(_n,"__esModule",{value:!0});_n.outputs=_n.inputs=_n.globals=void 0;var Hn=Nr(),PI=pr(mw()),TI=pr(ww()),AI=pr(_w()),II=pr(Ew()),OI=pr(Tw()),BI=pr(Iw()),MI=pr(Bw()),HI=pr(Hw()),kI=pr(Cw()),NI=pr(Rw()),CI=pr(jw()),qI=pr(Kw()),RI=pr($w()),UI=pr(Yw()),n3=pr(vp()),mp=pr(Zw()),i3=pr(Jw()),s3=pr(e3()),o3=pr(t3()),a3=pr(r3()),LI={unsignedTx:TI,globalXpub:PI,checkPubkey:mp.makeChecker([])};_n.globals=LI;var jI={nonWitnessUtxo:OI,partialSig:BI,sighashType:HI,finalScriptSig:AI,finalScriptWitness:II,porCommitment:MI,witnessUtxo:RI,bip32Derivation:n3.makeConverter(Hn.InputTypes.BIP32_DERIVATION),redeemScript:i3.makeConverter(Hn.InputTypes.REDEEM_SCRIPT),witnessScript:a3.makeConverter(Hn.InputTypes.WITNESS_SCRIPT),checkPubkey:mp.makeChecker([Hn.InputTypes.PARTIAL_SIG,Hn.InputTypes.BIP32_DERIVATION]),tapKeySig:kI,tapScriptSig:qI,tapLeafScript:NI,tapBip32Derivation:s3.makeConverter(Hn.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:o3.makeConverter(Hn.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:CI};_n.inputs=jI;var DI={bip32Derivation:n3.makeConverter(Hn.OutputTypes.BIP32_DERIVATION),redeemScript:i3.makeConverter(Hn.OutputTypes.REDEEM_SCRIPT),witnessScript:a3.makeConverter(Hn.OutputTypes.WITNESS_SCRIPT),checkPubkey:mp.makeChecker([Hn.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:s3.makeConverter(Hn.OutputTypes.TAP_BIP32_DERIVATION),tapTree:UI,tapInternalKey:o3.makeConverter(Hn.OutputTypes.TAP_INTERNAL_KEY)};_n.outputs=DI});var d3=K(Sn=>{"use strict";E();P();var KI=Sn&&Sn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),FI=Sn&&Sn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u3=Sn&&Sn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&KI(t,e,r);return FI(t,e),t};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.psbtFromKeyVals=Sn.checkKeyBuffer=Sn.psbtFromBuffer=void 0;var Tt=u3(sd()),od=Z0(),c3=u3(xo()),Te=Nr();function WI(e,t){let r=0;function n(){let x=c3.decode(e,r);r+=c3.encodingLength(x);let T=e.slice(r,r+x);return r+=x,T}function i(){let x=e.readUInt32BE(r);return r+=4,x}function s(){let x=e.readUInt8(r);return r+=1,x}function o(){let x=n(),T=n();return{key:x,value:T}}function a(){if(r>=e.length)throw new Error("Format Error: Unexpected End of PSBT");let x=e.readUInt8(r)===0;return x&&r++,x}if(i()!==1886610036)throw new Error("Format Error: Invalid Magic Number");if(s()!==255)throw new Error("Format Error: Magic Number must be followed by 0xff separator");let c=[],u={};for(;!a();){let x=o(),T=x.key.toString("hex");if(u[T])throw new Error("Format Error: Keys must be unique for global keymap: key "+T);u[T]=1,c.push(x)}let f=c.filter(x=>x.key[0]===Te.GlobalTypes.UNSIGNED_TX);if(f.length!==1)throw new Error("Format Error: Only one UNSIGNED_TX allowed");let d=t(f[0].value),{inputCount:h,outputCount:b}=d.getInputOutputCounts(),g=[],y=[];for(let x of(0,od.range)(h)){let T={},M=[];for(;!a();){let k=o(),R=k.key.toString("hex");if(T[R])throw new Error("Format Error: Keys must be unique for each input: input index "+x+" key "+R);T[R]=1,M.push(k)}g.push(M)}for(let x of(0,od.range)(b)){let T={},M=[];for(;!a();){let k=o(),R=k.key.toString("hex");if(T[R])throw new Error("Format Error: Keys must be unique for each output: output index "+x+" key "+R);T[R]=1,M.push(k)}y.push(M)}return f3(d,{globalMapKeyVals:c,inputKeyVals:g,outputKeyVals:y})}Sn.psbtFromBuffer=WI;function Kr(e,t,r){if(!t.equals(m.Buffer.from([r])))throw new Error(`Format Error: Invalid ${e} key: ${t.toString("hex")}`)}Sn.checkKeyBuffer=Kr;function f3(e,{globalMapKeyVals:t,inputKeyVals:r,outputKeyVals:n}){let i={unsignedTx:e},s=0;for(let f of t)switch(f.key[0]){case Te.GlobalTypes.UNSIGNED_TX:if(Kr("global",f.key,Te.GlobalTypes.UNSIGNED_TX),s>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");s++;break;case Te.GlobalTypes.GLOBAL_XPUB:i.globalXpub===void 0&&(i.globalXpub=[]),i.globalXpub.push(Tt.globals.globalXpub.decode(f));break;default:i.unknownKeyVals||(i.unknownKeyVals=[]),i.unknownKeyVals.push(f)}let o=r.length,a=n.length,c=[],u=[];for(let f of(0,od.range)(o)){let d={};for(let h of r[f])switch(Tt.inputs.checkPubkey(h),h.key[0]){case Te.InputTypes.NON_WITNESS_UTXO:if(Kr("input",h.key,Te.InputTypes.NON_WITNESS_UTXO),d.nonWitnessUtxo!==void 0)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");d.nonWitnessUtxo=Tt.inputs.nonWitnessUtxo.decode(h);break;case Te.InputTypes.WITNESS_UTXO:if(Kr("input",h.key,Te.InputTypes.WITNESS_UTXO),d.witnessUtxo!==void 0)throw new Error("Format Error: Input has multiple WITNESS_UTXO");d.witnessUtxo=Tt.inputs.witnessUtxo.decode(h);break;case Te.InputTypes.PARTIAL_SIG:d.partialSig===void 0&&(d.partialSig=[]),d.partialSig.push(Tt.inputs.partialSig.decode(h));break;case Te.InputTypes.SIGHASH_TYPE:if(Kr("input",h.key,Te.InputTypes.SIGHASH_TYPE),d.sighashType!==void 0)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");d.sighashType=Tt.inputs.sighashType.decode(h);break;case Te.InputTypes.REDEEM_SCRIPT:if(Kr("input",h.key,Te.InputTypes.REDEEM_SCRIPT),d.redeemScript!==void 0)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");d.redeemScript=Tt.inputs.redeemScript.decode(h);break;case Te.InputTypes.WITNESS_SCRIPT:if(Kr("input",h.key,Te.InputTypes.WITNESS_SCRIPT),d.witnessScript!==void 0)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");d.witnessScript=Tt.inputs.witnessScript.decode(h);break;case Te.InputTypes.BIP32_DERIVATION:d.bip32Derivation===void 0&&(d.bip32Derivation=[]),d.bip32Derivation.push(Tt.inputs.bip32Derivation.decode(h));break;case Te.InputTypes.FINAL_SCRIPTSIG:Kr("input",h.key,Te.InputTypes.FINAL_SCRIPTSIG),d.finalScriptSig=Tt.inputs.finalScriptSig.decode(h);break;case Te.InputTypes.FINAL_SCRIPTWITNESS:Kr("input",h.key,Te.InputTypes.FINAL_SCRIPTWITNESS),d.finalScriptWitness=Tt.inputs.finalScriptWitness.decode(h);break;case Te.InputTypes.POR_COMMITMENT:Kr("input",h.key,Te.InputTypes.POR_COMMITMENT),d.porCommitment=Tt.inputs.porCommitment.decode(h);break;case Te.InputTypes.TAP_KEY_SIG:Kr("input",h.key,Te.InputTypes.TAP_KEY_SIG),d.tapKeySig=Tt.inputs.tapKeySig.decode(h);break;case Te.InputTypes.TAP_SCRIPT_SIG:d.tapScriptSig===void 0&&(d.tapScriptSig=[]),d.tapScriptSig.push(Tt.inputs.tapScriptSig.decode(h));break;case Te.InputTypes.TAP_LEAF_SCRIPT:d.tapLeafScript===void 0&&(d.tapLeafScript=[]),d.tapLeafScript.push(Tt.inputs.tapLeafScript.decode(h));break;case Te.InputTypes.TAP_BIP32_DERIVATION:d.tapBip32Derivation===void 0&&(d.tapBip32Derivation=[]),d.tapBip32Derivation.push(Tt.inputs.tapBip32Derivation.decode(h));break;case Te.InputTypes.TAP_INTERNAL_KEY:Kr("input",h.key,Te.InputTypes.TAP_INTERNAL_KEY),d.tapInternalKey=Tt.inputs.tapInternalKey.decode(h);break;case Te.InputTypes.TAP_MERKLE_ROOT:Kr("input",h.key,Te.InputTypes.TAP_MERKLE_ROOT),d.tapMerkleRoot=Tt.inputs.tapMerkleRoot.decode(h);break;default:d.unknownKeyVals||(d.unknownKeyVals=[]),d.unknownKeyVals.push(h)}c.push(d)}for(let f of(0,od.range)(a)){let d={};for(let h of n[f])switch(Tt.outputs.checkPubkey(h),h.key[0]){case Te.OutputTypes.REDEEM_SCRIPT:if(Kr("output",h.key,Te.OutputTypes.REDEEM_SCRIPT),d.redeemScript!==void 0)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");d.redeemScript=Tt.outputs.redeemScript.decode(h);break;case Te.OutputTypes.WITNESS_SCRIPT:if(Kr("output",h.key,Te.OutputTypes.WITNESS_SCRIPT),d.witnessScript!==void 0)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");d.witnessScript=Tt.outputs.witnessScript.decode(h);break;case Te.OutputTypes.BIP32_DERIVATION:d.bip32Derivation===void 0&&(d.bip32Derivation=[]),d.bip32Derivation.push(Tt.outputs.bip32Derivation.decode(h));break;case Te.OutputTypes.TAP_INTERNAL_KEY:Kr("output",h.key,Te.OutputTypes.TAP_INTERNAL_KEY),d.tapInternalKey=Tt.outputs.tapInternalKey.decode(h);break;case Te.OutputTypes.TAP_TREE:Kr("output",h.key,Te.OutputTypes.TAP_TREE),d.tapTree=Tt.outputs.tapTree.decode(h);break;case Te.OutputTypes.TAP_BIP32_DERIVATION:d.tapBip32Derivation===void 0&&(d.tapBip32Derivation=[]),d.tapBip32Derivation.push(Tt.outputs.tapBip32Derivation.decode(h));break;default:d.unknownKeyVals||(d.unknownKeyVals=[]),d.unknownKeyVals.push(h)}u.push(d)}return{globalMap:i,inputs:c,outputs:u}}Sn.psbtFromKeyVals=f3});var p3=K(ai=>{"use strict";E();P();var zI=ai&&ai.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),VI=ai&&ai.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),GI=ai&&ai.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&zI(t,e,r);return VI(t,e),t};Object.defineProperty(ai,"__esModule",{value:!0});ai.psbtToKeyVals=ai.psbtToBuffer=void 0;var wp=GI(sd()),l3=Z0();function $I({globalMap:e,inputs:t,outputs:r}){let{globalKeyVals:n,inputKeyVals:i,outputKeyVals:s}=h3({globalMap:e,inputs:t,outputs:r}),o=(0,l3.keyValsToBuffer)(n),a=d=>d.length===0?[m.Buffer.from([0])]:d.map(l3.keyValsToBuffer),c=a(i),u=a(s),f=m.Buffer.allocUnsafe(5);return f.writeUIntBE(482972169471,0,5),m.Buffer.concat([f,o].concat(c,u))}ai.psbtToBuffer=$I;var XI=(e,t)=>e.key.compare(t.key);function xp(e,t){let r=new Set,n=Object.entries(e).reduce((s,[o,a])=>{if(o==="unknownKeyVals")return s;let c=t[o];if(c===void 0)return s;let u=(Array.isArray(a)?a:[a]).map(c.encode);return u.map(d=>d.key.toString("hex")).forEach(d=>{if(r.has(d))throw new Error("Serialize Error: Duplicate key: "+d);r.add(d)}),s.concat(u)},[]),i=e.unknownKeyVals?e.unknownKeyVals.filter(s=>!r.has(s.key.toString("hex"))):[];return n.concat(i).sort(XI)}function h3({globalMap:e,inputs:t,outputs:r}){return{globalKeyVals:xp(e,wp.globals),inputKeyVals:t.map(n=>xp(n,wp.inputs)),outputKeyVals:r.map(n=>xp(n,wp.outputs))}}ai.psbtToKeyVals=h3});var _p=K(_o=>{"use strict";E();P();var YI=_o&&_o.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),b3=_o&&_o.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&YI(t,e,r)};Object.defineProperty(_o,"__esModule",{value:!0});b3(d3(),_o);b3(p3(),_o)});var y3=K(ad=>{"use strict";E();P();Object.defineProperty(ad,"__esModule",{value:!0});ad.combine=void 0;var Sp=_p();function ZI(e){let t=e[0],r=(0,Sp.psbtToKeyVals)(t),n=e.slice(1);if(n.length===0)throw new Error("Combine: Nothing to combine");let i=g3(t);if(i===void 0)throw new Error("Combine: Self missing transaction");let s=rc(r.globalKeyVals),o=r.inputKeyVals.map(rc),a=r.outputKeyVals.map(rc);for(let c of n){let u=g3(c);if(u===void 0||!u.toBuffer().equals(i.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");let f=(0,Sp.psbtToKeyVals)(c);rc(f.globalKeyVals).forEach(Ep(s,r.globalKeyVals,f.globalKeyVals)),f.inputKeyVals.map(rc).forEach((g,y)=>g.forEach(Ep(o[y],r.inputKeyVals[y],f.inputKeyVals[y]))),f.outputKeyVals.map(rc).forEach((g,y)=>g.forEach(Ep(a[y],r.outputKeyVals[y],f.outputKeyVals[y])))}return(0,Sp.psbtFromKeyVals)(i,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})}ad.combine=ZI;function Ep(e,t,r){return n=>{if(e.has(n))return;let i=r.filter(s=>s.key.toString("hex")===n)[0];t.push(i),e.add(n)}}function g3(e){return e.globalMap.unsignedTx}function rc(e){let t=new Set;return e.forEach(r=>{let n=r.key.toString("hex");if(t.has(n))throw new Error("Combine: KeyValue Map keys should be unique");t.add(n)}),t}});var Tp=K(Xe=>{"use strict";E();P();var JI=Xe&&Xe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),QI=Xe&&Xe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),eO=Xe&&Xe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&JI(t,e,r);return QI(t,e),t};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.defaultLocktimeSetter=Xe.defaultVersionSetter=Xe.addOutputAttributes=Xe.addInputAttributes=Xe.updateOutput=Xe.updateInput=Xe.updateGlobal=Xe.inputCheckUncleanFinalized=Xe.getEnumLength=Xe.checkHasKey=Xe.checkForOutput=Xe.checkForInput=void 0;var tO=eO(sd());function m3(e,t){let r=e[t];if(r===void 0)throw new Error(`No input #${t}`);return r}Xe.checkForInput=m3;function w3(e,t){let r=e[t];if(r===void 0)throw new Error(`No output #${t}`);return r}Xe.checkForOutput=w3;function rO(e,t,r){if(e.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&t.filter(n=>n.key.equals(e.key)).length!==0)throw new Error(`Duplicate Key: ${e.key.toString("hex")}`)}Xe.checkHasKey=rO;function nO(e){let t=0;return Object.keys(e).forEach(r=>{Number(isNaN(Number(r)))&&t++}),t}Xe.getEnumLength=nO;function iO(e,t){let r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){let n=!!t.redeemScript,i=!!t.witnessScript,s=!n||!!t.finalScriptSig,o=!i||!!t.finalScriptWitness,a=!!t.finalScriptSig||!!t.finalScriptWitness;r=s&&o&&a}if(r===!1)throw new Error(`Input #${e} has too much or too little data to clean`)}Xe.inputCheckUncleanFinalized=iO;function v3(e,t,r,n){throw new Error(`Data for ${e} key ${t} is incorrect: Expected ${r} and got ${JSON.stringify(n)}`)}function Pp(e){return(t,r)=>{for(let n of Object.keys(t)){let i=t[n],{canAdd:s,canAddToArray:o,check:a,expected:c}=tO[e+"s"][n]||{},u=!!o;if(a)if(u){if(!Array.isArray(i)||r[n]&&!Array.isArray(r[n]))throw new Error(`Key type ${n} must be an array`);i.every(a)||v3(e,n,c,i);let f=r[n]||[],d=new Set;if(!i.every(h=>o(f,h,d)))throw new Error("Can not add duplicate data to array");r[n]=f.concat(i)}else{if(a(i)||v3(e,n,c,i),!s(r,i))throw new Error(`Can not add duplicate data to ${e}`);r[n]=i}}}}Xe.updateGlobal=Pp("global");Xe.updateInput=Pp("input");Xe.updateOutput=Pp("output");function sO(e,t){let r=e.length-1,n=m3(e,r);(0,Xe.updateInput)(t,n)}Xe.addInputAttributes=sO;function oO(e,t){let r=e.length-1,n=w3(e,r);(0,Xe.updateOutput)(t,n)}Xe.addOutputAttributes=oO;function aO(e,t){if(!m.Buffer.isBuffer(t)||t.length<4)throw new Error("Set Version: Invalid Transaction");return t.writeUInt32LE(e,0),t}Xe.defaultVersionSetter=aO;function cO(e,t){if(!m.Buffer.isBuffer(t)||t.length<4)throw new Error("Set Locktime: Invalid Transaction");return t.writeUInt32LE(e,t.length-4),t}Xe.defaultLocktimeSetter=cO});var _3=K(cd=>{"use strict";E();P();Object.defineProperty(cd,"__esModule",{value:!0});cd.Psbt=void 0;var uO=y3(),x3=_p(),Ap=Nr(),Fr=Tp(),Ip=class{static fromBase64(t,r){let n=m.Buffer.from(t,"base64");return this.fromBuffer(n,r)}static fromHex(t,r){let n=m.Buffer.from(t,"hex");return this.fromBuffer(n,r)}static fromBuffer(t,r){let n=(0,x3.psbtFromBuffer)(t,r),i=new this(n.globalMap.unsignedTx);return Object.assign(i,n),i}constructor(t){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:t}}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return(0,x3.psbtToBuffer)(this)}updateGlobal(t){return(0,Fr.updateGlobal)(t,this.globalMap),this}updateInput(t,r){let n=(0,Fr.checkForInput)(this.inputs,t);return(0,Fr.updateInput)(r,n),this}updateOutput(t,r){let n=(0,Fr.checkForOutput)(this.outputs,t);return(0,Fr.updateOutput)(r,n),this}addUnknownKeyValToGlobal(t){return(0,Fr.checkHasKey)(t,this.globalMap.unknownKeyVals,(0,Fr.getEnumLength)(Ap.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(t),this}addUnknownKeyValToInput(t,r){let n=(0,Fr.checkForInput)(this.inputs,t);return(0,Fr.checkHasKey)(r,n.unknownKeyVals,(0,Fr.getEnumLength)(Ap.InputTypes)),n.unknownKeyVals||(n.unknownKeyVals=[]),n.unknownKeyVals.push(r),this}addUnknownKeyValToOutput(t,r){let n=(0,Fr.checkForOutput)(this.outputs,t);return(0,Fr.checkHasKey)(r,n.unknownKeyVals,(0,Fr.getEnumLength)(Ap.OutputTypes)),n.unknownKeyVals||(n.unknownKeyVals=[]),n.unknownKeyVals.push(r),this}addInput(t){this.globalMap.unsignedTx.addInput(t),this.inputs.push({unknownKeyVals:[]});let r=t.unknownKeyVals||[],n=this.inputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach(i=>this.addUnknownKeyValToInput(n,i)),(0,Fr.addInputAttributes)(this.inputs,t),this}addOutput(t){this.globalMap.unsignedTx.addOutput(t),this.outputs.push({unknownKeyVals:[]});let r=t.unknownKeyVals||[],n=this.outputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach(i=>this.addUnknownKeyValToInput(n,i)),(0,Fr.addOutputAttributes)(this.outputs,t),this}clearFinalizedInput(t){let r=(0,Fr.checkForInput)(this.inputs,t);(0,Fr.inputCheckUncleanFinalized)(t,r);for(let n of Object.keys(r))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(n)||delete r[n];return this}combine(...t){let r=(0,uO.combine)([this].concat(t));return Object.assign(this,r),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}};cd.Psbt=Ip});var oa=K(nt=>{"use strict";E();P();var fO=nt&&nt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),dO=nt&&nt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Op=nt&&nt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&fO(t,e,r);return dO(t,e),t};Object.defineProperty(nt,"__esModule",{value:!0});nt.signatureBlocksAction=nt.checkInputForSig=nt.pubkeyInScript=nt.pubkeyPositionInScript=nt.witnessStackToScriptWitness=nt.isP2TR=nt.isP2SHScript=nt.isP2WSHScript=nt.isP2WPKH=nt.isP2PKH=nt.isP2PK=nt.isP2MS=void 0;var S3=Op(xo()),hu=Op(xr()),ud=na(),lO=cn(),ia=Op(yo());function sa(e){return t=>{try{return e({output:t}),!0}catch{return!1}}}nt.isP2MS=sa(ia.p2ms);nt.isP2PK=sa(ia.p2pk);nt.isP2PKH=sa(ia.p2pkh);nt.isP2WPKH=sa(ia.p2wpkh);nt.isP2WSHScript=sa(ia.p2wsh);nt.isP2SHScript=sa(ia.p2sh);nt.isP2TR=sa(ia.p2tr);function hO(e){let t=m.Buffer.allocUnsafe(0);function r(o){t=m.Buffer.concat([t,m.Buffer.from(o)])}function n(o){let a=t.length,c=S3.encodingLength(o);t=m.Buffer.concat([t,m.Buffer.allocUnsafe(c)]),S3.encode(o,t,a)}function i(o){n(o.length),r(o)}function s(o){n(o.length),o.forEach(i)}return s(e),t}nt.witnessStackToScriptWitness=hO;function E3(e,t){let r=(0,lO.hash160)(e),n=e.slice(1,33),i=hu.decompile(t);if(i===null)throw new Error("Unknown script error");return i.findIndex(s=>typeof s=="number"?!1:s.equals(e)||s.equals(r)||s.equals(n))}nt.pubkeyPositionInScript=E3;function pO(e,t){return E3(e,t)!==-1}nt.pubkeyInScript=pO;function bO(e,t){return gO(e).some(n=>P3(n,hu.signature.decode,t))}nt.checkInputForSig=bO;function P3(e,t,r){let{hashType:n}=t(e),i=[];switch(n&ud.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),n&31){case ud.Transaction.SIGHASH_ALL:break;case ud.Transaction.SIGHASH_SINGLE:case ud.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence");break}return i.indexOf(r)===-1}nt.signatureBlocksAction=P3;function gO(e){let t=[];if((e.partialSig||[]).length===0){if(!e.finalScriptSig&&!e.finalScriptWitness)return[];t=yO(e)}else t=e.partialSig;return t.map(r=>r.signature)}function yO(e){let t=e.finalScriptSig?hu.decompile(e.finalScriptSig)||[]:[],r=e.finalScriptWitness?hu.decompile(e.finalScriptWitness)||[]:[];return t.concat(r).filter(n=>m.Buffer.isBuffer(n)&&hu.isCanonicalScriptSignature(n)).map(n=>({signature:n}))}});var Np=K(Ht=>{"use strict";E();P();Object.defineProperty(Ht,"__esModule",{value:!0});Ht.checkTaprootInputForSigs=Ht.tapTreeFromList=Ht.tapTreeToList=Ht.tweakInternalPubKey=Ht.checkTaprootOutputFields=Ht.checkTaprootInputFields=Ht.isTaprootOutput=Ht.isTaprootInput=Ht.serializeTaprootSignature=Ht.tapScriptFinalizer=Ht.toXOnly=void 0;var kp=en(),vO=na(),ld=oa(),So=W0(),mO=yo(),wO=oa(),xO=e=>e.length===32?e:e.slice(1,33);Ht.toXOnly=xO;function _O(e,t,r){let n=jO(t,e,r);try{let s=UO(t,n).concat(n.script).concat(n.controlBlock);return{finalScriptWitness:(0,ld.witnessStackToScriptWitness)(s)}}catch(i){throw new Error(`Can not finalize taproot input #${e}: ${i}`)}}Ht.tapScriptFinalizer=_O;function SO(e,t){let r=t?m.Buffer.from([t]):m.Buffer.from([]);return m.Buffer.concat([e,r])}Ht.serializeTaprootSignature=SO;function fd(e){return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||e.witnessUtxo&&(0,ld.isP2TR)(e.witnessUtxo.script))}Ht.isTaprootInput=fd;function dd(e,t){return e&&!!(e.tapInternalKey||e.tapTree||e.tapBip32Derivation&&e.tapBip32Derivation.length||t&&(0,ld.isP2TR)(t))}Ht.isTaprootOutput=dd;function EO(e,t,r){CO(e,t,r),RO(e,t,r)}Ht.checkTaprootInputFields=EO;function PO(e,t,r){qO(e,t,r),TO(e,t)}Ht.checkTaprootOutputFields=PO;function TO(e,t){if(!t.tapTree&&!t.tapInternalKey)return;let r=t.tapInternalKey||e.tapInternalKey,n=t.tapTree||e.tapTree;if(r){let{script:i}=e,s=AO(r,n);if(i&&!i.equals(s))throw new Error("Error adding output. Script or address missmatch.")}}function AO(e,t){let r=t&&T3(t.leaves),{output:n}=(0,mO.p2tr)({internalPubkey:e,scriptTree:r});return n}function IO(e,t){let r=t.tapInternalKey,n=r&&(0,So.tweakKey)(r,t.tapMerkleRoot);if(!n)throw new Error(`Cannot tweak tap internal key for input #${e}. Public key: ${r&&r.toString("hex")}`);return n.x}Ht.tweakInternalPubKey=IO;function OO(e){if(!(0,kp.isTaptree)(e))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return Mp(e)}Ht.tapTreeToList=OO;function T3(e=[]){return e.length===1&&e[0].depth===0?{output:e[0].script,version:e[0].leafVersion}:NO(e)}Ht.tapTreeFromList=T3;function BO(e,t){return HO(e).some(n=>(0,wO.signatureBlocksAction)(n,MO,t))}Ht.checkTaprootInputForSigs=BO;function MO(e){return{signature:e.slice(0,64),hashType:e.slice(64)[0]||vO.Transaction.SIGHASH_DEFAULT}}function HO(e){let t=[];if(e.tapKeySig&&t.push(e.tapKeySig),e.tapScriptSig&&t.push(...e.tapScriptSig.map(r=>r.signature)),!t.length){let r=kO(e.finalScriptWitness);r&&t.push(r)}return t}function kO(e){if(!e)return;let t=e.slice(2);if(t.length===64||t.length===65)return t}function Mp(e,t=[],r=0){if(r>So.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return e?(0,kp.isTapleaf)(e)?(t.push({depth:r,leafVersion:e.version||So.LEAF_VERSION_TAPSCRIPT,script:e.output}),t):(e[0]&&Mp(e[0],t,r+1),e[1]&&Mp(e[1],t,r+1),t):[]}function NO(e){let t;for(let r of e)if(t=Hp(r,t),!t)throw new Error("No room left to insert tapleaf in tree");return t}function Hp(e,t,r=0){if(r>So.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(e.depth===r)return t?void 0:{output:e.script,version:e.leafVersion};if((0,kp.isTapleaf)(t))return;let n=Hp(e,t&&t[0],r+1);if(n)return[n,t&&t[1]];let i=Hp(e,t&&t[1],r+1);if(i)return[t&&t[0],i]}function CO(e,t,r){let n=fd(e)&&nc(t),i=nc(e)&&fd(t),s=e===t&&fd(t)&&nc(t);if(n||i||s)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function qO(e,t,r){let n=dd(e)&&nc(t),i=nc(e)&&dd(t),s=e===t&&dd(t)&&nc(t);if(n||i||s)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function RO(e,t,r){if(t.tapMerkleRoot){let n=(t.tapLeafScript||[]).every(s=>Bp(s,t.tapMerkleRoot)),i=(e.tapLeafScript||[]).every(s=>Bp(s,t.tapMerkleRoot));if(!n||!i)throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}else if(e.tapMerkleRoot&&!(t.tapLeafScript||[]).every(i=>Bp(i,e.tapMerkleRoot)))throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}function Bp(e,t){if(!t)return!0;let r=(0,So.tapleafHash)({output:e.script,version:e.leafVersion});return(0,So.rootHashFromPath)(e.controlBlock,r).equals(t)}function UO(e,t){let r=(0,So.tapleafHash)({output:t.script,version:t.leafVersion});return(e.tapScriptSig||[]).filter(n=>n.leafHash.equals(r)).map(n=>LO(t.script,n)).sort((n,i)=>i.positionInScript-n.positionInScript).map(n=>n.signature)}function LO(e,t){return Object.assign({positionInScript:(0,ld.pubkeyPositionInScript)(t.pubkey,e)},t)}function jO(e,t,r){if(!e.tapScriptSig||!e.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${t}. No tapleaf script signature provided.`);let n=(e.tapLeafScript||[]).sort((i,s)=>i.controlBlock.length-s.controlBlock.length).find(i=>DO(i,e.tapScriptSig,r));if(!n)throw new Error(`Can not finalize taproot input #${t}. Signature for tapleaf script not found.`);return n}function DO(e,t,r){let n=(0,So.tapleafHash)({output:e.script,version:e.leafVersion});return(!r||r.equals(n))&&t.find(s=>s.leafHash.equals(n))!==void 0}function nc(e){return e&&!!(e.redeemScript||e.witnessScript||e.bip32Derivation&&e.bip32Derivation.length)}});var Lp=K(ui=>{"use strict";E();P();var KO=ui&&ui.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),FO=ui&&ui.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Up=ui&&ui.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&KO(t,e,r);return FO(t,e),t};Object.defineProperty(ui,"__esModule",{value:!0});ui.getHashAndSighashType=ui.Psbt=void 0;var A3=_3(),I3=Up(xo()),fn=Tp(),O3=ec(),ic=bo(),WO=In(),ci=Up(yo()),zO=W0(),Ss=Up(xr()),Zt=na(),yt=Np(),Er=oa(),gu=ft(),VO=xr(),GO=ra(),$O=gu.signUtil.schnorr.secp256k1.schnorr,XO={network:WO.bitcoin,maximumFeeRate:5e3},sc=class{static fromBase64(t,r={}){let n=m.Buffer.from(t,"base64");return this.fromBuffer(n,r)}static fromHex(t,r={}){let n=m.Buffer.from(t,"hex");return this.fromBuffer(n,r)}static fromBuffer(t,r={}){let n=A3.Psbt.fromBuffer(t,YO),i=new sc(r,n);return tB(i.__CACHE.__TX,i.__CACHE),i}constructor(t={},r=new A3.Psbt(new pd)){this.data=r,this.opts=Object.assign({},XO,t),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},this.data.inputs.length===0&&this.setVersion(2);let n=(i,s,o,a)=>Object.defineProperty(i,s,{enumerable:o,writable:a});n(this,"__CACHE",!1,!0),n(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(t){this.setVersion(t)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(t){this.setLocktime(t)}get txInputs(){return this.__CACHE.__TX.ins.map(t=>({hash:(0,ic.cloneBuffer)(t.hash),index:t.index,sequence:t.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(t=>{let r;try{r=(0,O3.fromOutputScript)(t.script,this.opts.network)}catch{}return{script:(0,ic.cloneBuffer)(t.script),value:t.value,address:r}})}combine(...t){return this.data.combine(...t.map(r=>r.data)),this}clone(){let t=sc.fromBuffer(this.data.toBuffer());return t.opts=JSON.parse(JSON.stringify(this.opts)),t}setMaximumFeeRate(t){hd(t),this.opts.maximumFeeRate=t}setVersion(t){hd(t),pu(this.data.inputs,"setVersion");let r=this.__CACHE;return r.__TX.version=t,r.__EXTRACTED_TX=void 0,this}setLocktime(t){hd(t),pu(this.data.inputs,"setLocktime");let r=this.__CACHE;return r.__TX.locktime=t,r.__EXTRACTED_TX=void 0,this}setInputSequence(t,r){hd(r),pu(this.data.inputs,"setInputSequence");let n=this.__CACHE;if(n.__TX.ins.length<=t)throw new Error("Input index too high");return n.__TX.ins[t].sequence=r,n.__EXTRACTED_TX=void 0,this}addInputs(t){return t.forEach(r=>this.addInput(r)),this}addInput(t){if(arguments.length>1||!t||t.hash===void 0||t.index===void 0)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,yt.checkTaprootInputFields)(t,t,"addInput"),pu(this.data.inputs,"addInput"),t.witnessScript&&bd(t.witnessScript);let r=this.__CACHE;this.data.addInput(t);let n=r.__TX.ins[r.__TX.ins.length-1];U3(r,n);let i=this.data.inputs.length-1,s=this.data.inputs[i];return s.nonWitnessUtxo&&Rp(this.__CACHE,s,i),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}addOutputs(t){return t.forEach(r=>this.addOutput(r)),this}addOutput(t){if(arguments.length>1||!t||t.value===void 0||t.address===void 0&&t.script===void 0)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");pu(this.data.inputs,"addOutput");let{address:r}=t;if(typeof r=="string"){let{network:i}=this.opts,s=(0,O3.toOutputScript)(r,i);t=Object.assign(t,{script:s})}(0,yt.checkTaprootOutputFields)(t,t,"addOutput");let n=this.__CACHE;return this.data.addOutput(t),n.__FEE=void 0,n.__FEE_RATE=void 0,n.__EXTRACTED_TX=void 0,this}extractTransaction(t){if(!this.data.inputs.every(q3))throw new Error("Not finalized");let r=this.__CACHE;if(t||JO(this,r,this.opts),r.__EXTRACTED_TX)return r.__EXTRACTED_TX;let n=r.__TX.clone();return F3(this.data.inputs,n,r,!0),n}getFeeRate(){return N3("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return N3("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,fn.checkForInput)(this.data.inputs,0),bu(this.data.inputs.length).forEach(t=>this.finalizeInput(t)),this}finalizeInput(t,r){let n=(0,fn.checkForInput)(this.data.inputs,t);return(0,yt.isTaprootInput)(n)?this._finalizeTaprootInput(t,n,void 0,r):this._finalizeInput(t,n,r)}finalizeTaprootInput(t,r,n=yt.tapScriptFinalizer){let i=(0,fn.checkForInput)(this.data.inputs,t);if((0,yt.isTaprootInput)(i))return this._finalizeTaprootInput(t,i,r,n);throw new Error(`Cannot finalize input #${t}. Not Taproot.`)}_finalizeInput(t,r,n=rB){let{script:i,isP2SH:s,isP2WSH:o,isSegwit:a}=oB(t,r,this.__CACHE);if(!i)throw new Error(`No script found for input #${t}`);QO(r);let{finalScriptSig:c,finalScriptWitness:u}=n(t,r,i,a,s,o);if(c&&this.data.updateInput(t,{finalScriptSig:c}),u&&this.data.updateInput(t,{finalScriptWitness:u}),!c&&!u)throw new Error(`Unknown error finalizing input #${t}`);return this.data.clearFinalizedInput(t),this}_finalizeTaprootInput(t,r,n,i=yt.tapScriptFinalizer){if(!r.witnessUtxo)throw new Error(`Cannot finalize input #${t}. Missing withness utxo.`);if(r.tapKeySig){let s=ci.p2tr({output:r.witnessUtxo.script,signature:r.tapKeySig}),o=(0,Er.witnessStackToScriptWitness)(s.witness);this.data.updateInput(t,{finalScriptWitness:o})}else{let{finalScriptWitness:s}=i(t,r,n);this.data.updateInput(t,{finalScriptWitness:s})}return this.data.clearFinalizedInput(t),this}getInputType(t){let r=(0,fn.checkForInput)(this.data.inputs,t),n=W3(t,r,this.__CACHE),i=yd(n,t,"input",r.redeemScript||dB(r.finalScriptSig),r.witnessScript||lB(r.finalScriptWitness)),s=i.type==="raw"?"":i.type+"-",o=G3(i.meaningfulScript);return s+o}inputHasPubkey(t,r){let n=(0,fn.checkForInput)(this.data.inputs,t);return uB(r,n,t,this.__CACHE)}inputHasHDKey(t,r){let n=(0,fn.checkForInput)(this.data.inputs,t),i=M3(r);return!!n.bip32Derivation&&n.bip32Derivation.some(i)}outputHasPubkey(t,r){let n=(0,fn.checkForOutput)(this.data.outputs,t);return fB(r,n,t,this.__CACHE)}outputHasHDKey(t,r){let n=(0,fn.checkForOutput)(this.data.outputs,t),i=M3(r);return!!n.bip32Derivation&&n.bip32Derivation.some(i)}validateSignaturesOfAllInputs(t){return(0,fn.checkForInput)(this.data.inputs,0),bu(this.data.inputs.length).map(n=>this.validateSignaturesOfInput(n,t)).reduce((n,i)=>i===!0&&n,!0)}validateSignaturesOfInput(t,r,n){let i=this.data.inputs[t];return(0,yt.isTaprootInput)(i)?this.validateSignaturesOfTaprootInput(t,r,n):this._validateSignaturesOfInput(t,r,n)}_validateSignaturesOfInput(t,r,n){let i=this.data.inputs[t],s=(i||{}).partialSig;if(!i||!s||s.length<1)throw new Error("No signatures to validate");if(typeof r!="function")throw new Error("Need validator function to validate signatures");let o=n?s.filter(d=>d.pubkey.equals(n)):s;if(o.length<1)throw new Error("No signatures for this pubkey");let a=[],c,u,f;for(let d of o){let h=Ss.signature.decode(d.signature),{hash:b,script:g}=f!==h.hashType?j3(t,Object.assign({},i,{sighashType:h.hashType}),this.__CACHE,!0):{hash:c,script:u};f=h.hashType,c=b,u=g,R3(d.pubkey,g,"verify"),a.push(r(d.pubkey,b,h.signature))}return a.every(d=>d===!0)}validateSignaturesOfTaprootInput(t,r,n){let i=this.data.inputs[t],s=(i||{}).tapKeySig,o=(i||{}).tapScriptSig;if(!i&&!s&&!(o&&!o.length))throw new Error("No signatures to validate");if(typeof r!="function")throw new Error("Need validator function to validate signatures");n=n&&(0,yt.toXOnly)(n);let a=n?qp(t,i,this.data.inputs,n,this.__CACHE):iB(t,i,this.data.inputs,this.__CACHE);if(!a.length)throw new Error("No signatures for this pubkey");let c=a.find(u=>!!u.leafHash);if(s&&c&&!r(c.pubkey,c.hash,s))return!1;if(o)for(let u of o){let f=a.find(d=>u.pubkey.equals(d.pubkey));if(f&&!r(u.pubkey,f.hash,u.signature))return!1}return!0}signAllInputsHD(t,r=[Zt.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");let n=[];for(let i of bu(this.data.inputs.length))try{this.signInputHD(i,t,r),n.push(!0)}catch{n.push(!1)}if(n.every(i=>i===!1))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(t,r=[Zt.Transaction.SIGHASH_ALL]){return new Promise((n,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));let s=[],o=[];for(let a of bu(this.data.inputs.length))o.push(this.signInputHDAsync(a,t,r).then(()=>{s.push(!0)},()=>{s.push(!1)}));return Promise.all(o).then(()=>{if(s.every(a=>a===!1))return i(new Error("No inputs were signed"));n()})})}signInputHD(t,r,n=[Zt.Transaction.SIGHASH_ALL]){if(!r||!r.publicKey||!r.fingerprint)throw new Error("Need HDSigner to sign input");return C3(t,this.data.inputs,r).forEach(s=>this.signInput(t,s,n)),this}signInputHDAsync(t,r,n=[Zt.Transaction.SIGHASH_ALL]){return new Promise((i,s)=>{if(!r||!r.publicKey||!r.fingerprint)return s(new Error("Need HDSigner to sign input"));let a=C3(t,this.data.inputs,r).map(c=>this.signInputAsync(t,c,n));return Promise.all(a).then(()=>{i()}).catch(s)})}signAllInputs(t,r){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");let n=[];for(let i of bu(this.data.inputs.length))try{this.signInput(i,t,r),n.push(!0)}catch{n.push(!1)}if(n.every(i=>i===!1))throw new Error("No inputs were signed");return this}signAllInputsAsync(t,r){return new Promise((n,i)=>{if(!t||!t.publicKey)return i(new Error("Need Signer to sign input"));let s=[],o=[];for(let[a]of this.data.inputs.entries())o.push(this.signInputAsync(a,t,r).then(()=>{s.push(!0)},()=>{s.push(!1)}));return Promise.all(o).then(()=>{if(s.every(a=>a===!1))return i(new Error("No inputs were signed"));n()})})}signInput(t,r,n){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let i=(0,fn.checkForInput)(this.data.inputs,t);return(0,yt.isTaprootInput)(i)?this._signTaprootInput(t,i,r,void 0,n):this._signInput(t,r,n)}signTaprootInput(t,r,n,i){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let s=(0,fn.checkForInput)(this.data.inputs,t);if((0,yt.isTaprootInput)(s))return this._signTaprootInput(t,s,r,n,i);throw new Error(`Input #${t} is not of type Taproot.`)}getHashAndSighashType(t,r,n=[Zt.Transaction.SIGHASH_ALL]){let{hash:i,sighashType:s}=yu(this.data.inputs,t,r,this.__CACHE,n);return{hash:i,sighashType:s}}_signInput(t,r,n=[Zt.Transaction.SIGHASH_ALL]){let{hash:i,sighashType:s}=yu(this.data.inputs,t,r.publicKey,this.__CACHE,n),o=[{pubkey:r.publicKey,signature:Ss.signature.encode(r.sign(i),s)}];return this.data.updateInput(t,{partialSig:o}),this}_signTaprootInput(t,r,n,i,s=[Zt.Transaction.SIGHASH_DEFAULT]){let o=this.checkTaprootHashesForSig(t,r,n,i,s),a=o.filter(u=>!u.leafHash).map(u=>(0,yt.serializeTaprootSignature)(n.signSchnorr(u.hash),r.sighashType))[0],c=o.filter(u=>!!u.leafHash).map(u=>({pubkey:(0,yt.toXOnly)(n.publicKey),signature:(0,yt.serializeTaprootSignature)(n.signSchnorr(u.hash),r.sighashType),leafHash:u.leafHash}));return a&&this.data.updateInput(t,{tapKeySig:a}),c.length&&this.data.updateInput(t,{tapScriptSig:c}),this}signInputAsync(t,r,n){return Promise.resolve().then(()=>{if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let i=(0,fn.checkForInput)(this.data.inputs,t);return(0,yt.isTaprootInput)(i)?this._signTaprootInputAsync(t,i,r,void 0,n):this._signInputAsync(t,r,n)})}signTaprootInputAsync(t,r,n,i){return Promise.resolve().then(()=>{if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let s=(0,fn.checkForInput)(this.data.inputs,t);if((0,yt.isTaprootInput)(s))return this._signTaprootInputAsync(t,s,r,n,i);throw new Error(`Input #${t} is not of type Taproot.`)})}_signInputAsync(t,r,n=[Zt.Transaction.SIGHASH_ALL]){let{hash:i,sighashType:s}=yu(this.data.inputs,t,r.publicKey,this.__CACHE,n);return Promise.resolve(r.sign(i)).then(o=>{let a=[{pubkey:r.publicKey,signature:Ss.signature.encode(o,s)}];this.data.updateInput(t,{partialSig:a})})}async _signTaprootInputAsync(t,r,n,i,s=[Zt.Transaction.SIGHASH_DEFAULT]){let o=this.checkTaprootHashesForSig(t,r,n,i,s),a=[],c=o.filter(f=>!f.leafHash)[0];if(c){let f=Promise.resolve(n.signSchnorr(c.hash)).then(d=>({tapKeySig:(0,yt.serializeTaprootSignature)(d,r.sighashType)}));a.push(f)}let u=o.filter(f=>!!f.leafHash);if(u.length){let f=u.map(d=>Promise.resolve(n.signSchnorr(d.hash)).then(h=>({tapScriptSig:[{pubkey:(0,yt.toXOnly)(n.publicKey),signature:(0,yt.serializeTaprootSignature)(h,r.sighashType),leafHash:d.leafHash}]})));a.push(...f)}return Promise.all(a).then(f=>{f.forEach(d=>this.data.updateInput(t,d))})}checkTaprootHashesForSig(t,r,n,i,s){if(typeof n.signSchnorr!="function")throw new Error(`Need Schnorr Signer to sign taproot input #${t}.`);let o=qp(t,r,this.data.inputs,n.publicKey,this.__CACHE,i,s);if(!o||!o.length)throw new Error(`Can not sign for input #${t} with the key ${n.publicKey.toString("hex")}`);return o}toBuffer(){return Cp(this.__CACHE),this.data.toBuffer()}toHex(){return Cp(this.__CACHE),this.data.toHex()}toBase64(){return Cp(this.__CACHE),this.data.toBase64()}updateGlobal(t){return this.data.updateGlobal(t),this}updateInput(t,r){return r.witnessScript&&bd(r.witnessScript),(0,yt.checkTaprootInputFields)(this.data.inputs[t],r,"updateInput"),this.data.updateInput(t,r),r.nonWitnessUtxo&&Rp(this.__CACHE,this.data.inputs[t],t),this}updateOutput(t,r){let n=this.data.outputs[t];return(0,yt.checkTaprootOutputFields)(n,r,"updateOutput"),this.data.updateOutput(t,r),this}addUnknownKeyValToGlobal(t){return this.data.addUnknownKeyValToGlobal(t),this}addUnknownKeyValToInput(t,r){return this.data.addUnknownKeyValToInput(t,r),this}addUnknownKeyValToOutput(t,r){return this.data.addUnknownKeyValToOutput(t,r),this}clearFinalizedInput(t){return this.data.clearFinalizedInput(t),this}verify(t,r){let n=[Zt.Transaction.SIGHASH_SINGLE|Zt.Transaction.SIGHASH_ANYONECANPAY,Zt.Transaction.SIGHASH_ALL,Zt.Transaction.SIGHASH_DEFAULT];for(let i=0;i<this.inputCount;i++)if((0,yt.isTaprootInput)(this.data.inputs[i])){let s=m.Buffer.from((0,GO.taprootTweakPubkey)(t.slice(1))[0]),a=new ic.BufferReader(r).readVector(),c={publicKey:s,sign(d){return m.Buffer.alloc(64)},signSchnorr(d){return m.Buffer.alloc(64)}},f=this.checkTaprootHashesForSig(i,this.data.inputs[i],c,void 0,n).filter(d=>!d.leafHash)[0].hash;if(!$O.verify(gu.base.toHex(a[0]),gu.base.toHex(f),gu.base.toHex(s)))return!1}else{let{hash:s}=yu(this.data.inputs,i,t,this.__CACHE,n),a=new ic.BufferReader(r).readVector(),c=VO.signature.decode(a[0]).signature,u=a[1];if(!t.equals(u))throw Error("pubKey error");if(!gu.signUtil.secp256k1.verifyWithNoRecovery(s,c,t))return!1}return!0}};ui.Psbt=sc;var YO=e=>new pd(e),pd=class{constructor(t=m.Buffer.from([2,0,0,0,0,0,0,0,0,0])){this.tx=Zt.Transaction.fromBuffer(t),eB(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(t){if(t.hash===void 0||t.index===void 0||!m.Buffer.isBuffer(t.hash)&&typeof t.hash!="string"||typeof t.index!="number")throw new Error("Error adding input.");let r=typeof t.hash=="string"?(0,ic.reverseBuffer)(m.Buffer.from(t.hash,"hex")):t.hash;this.tx.addInput(r,t.index,t.sequence)}addOutput(t){if(t.script===void 0||t.value===void 0||!m.Buffer.isBuffer(t.script)||typeof t.value!="number")throw new Error("Error adding output.");this.tx.addOutput(t.script,t.value)}toBuffer(){return this.tx.toBuffer()}};function ZO(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return B3(1,e.partialSig);case"multisig":let n=ci.p2ms({output:t});return B3(n.m,e.partialSig,n.pubkeys);default:return!1}}function Cp(e){if(e.__UNSAFE_SIGN_NONSEGWIT!==!1)throw new Error("Not BIP174 compliant, can not export")}function B3(e,t,r){if(!t)return!1;let n;if(r?n=r.map(i=>{let s=hB(i);return t.find(o=>o.pubkey.equals(s))}).filter(i=>!!i):n=t,n.length>e)throw new Error("Too many signatures");return n.length===e}function q3(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function M3(e){return t=>!(!t.masterFingerprint.equals(e.fingerprint)||!e.derivePath(t.path).publicKey.equals(t.pubkey))}function hd(e){if(typeof e!="number"||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function JO(e,t,r){let n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),s=n*i;if(n>=r.maximumFeeRate)throw new Error(`Warning: You are paying around ${(s/1e8).toFixed(8)} in fees, which is ${n} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}function pu(e,t){e.forEach(r=>{if((0,yt.isTaprootInput)(r)?(0,yt.checkTaprootInputForSigs)(r,t):(0,Er.checkInputForSig)(r,t))throw new Error("Can not modify transaction, signatures exist.")})}function QO(e){if(!e.sighashType||!e.partialSig)return;let{partialSig:t,sighashType:r}=e;t.forEach(n=>{let{hashType:i}=Ss.signature.decode(n.signature);if(r!==i)throw new Error("Signature sighash does not match input sighash type")})}function R3(e,t,r){if(!(0,Er.pubkeyInScript)(e,t))throw new Error(`Can not ${r} for this input with the key ${e.toString("hex")}`)}function eB(e){if(!e.ins.every(r=>r.script&&r.script.length===0&&r.witness&&r.witness.length===0))throw new Error("Format Error: Transaction ScriptSigs are not empty")}function tB(e,t){e.ins.forEach(r=>{U3(t,r)})}function U3(e,t){let r=(0,ic.reverseBuffer)(m.Buffer.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function L3(e,t){return(r,n,i,s)=>{let o=e({redeem:{output:i}}).output;if(!n.equals(o))throw new Error(`${t} for ${s} #${r} doesn't match the scriptPubKey in the prevout`)}}var H3=L3(ci.p2sh,"Redeem script"),k3=L3(ci.p2wsh,"Witness script");function N3(e,t,r,n){if(!r.every(q3))throw new Error(`PSBT must be finalized to calculate ${t}`);if(e==="__FEE_RATE"&&n.__FEE_RATE)return n.__FEE_RATE;if(e==="__FEE"&&n.__FEE)return n.__FEE;let i,s=!0;if(n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,s=!1):i=n.__TX.clone(),F3(r,i,n,s),e==="__FEE_RATE")return n.__FEE_RATE;if(e==="__FEE")return n.__FEE}function rB(e,t,r,n,i,s){let o=G3(r);if(!ZO(t,r,o))throw new Error(`Can not finalize input #${e}`);return nB(r,o,t.partialSig,n,i,s)}function nB(e,t,r,n,i,s){let o,a,c=sB(e,t,r),u=s?ci.p2wsh({redeem:c}):null,f=i?ci.p2sh({redeem:u||c}):null;return n?(u?a=(0,Er.witnessStackToScriptWitness)(u.witness):a=(0,Er.witnessStackToScriptWitness)(c.witness),f&&(o=f.input)):f?o=f.input:o=c.input,{finalScriptSig:o,finalScriptWitness:a}}function yu(e,t,r,n,i){let s=(0,fn.checkForInput)(e,t),{hash:o,sighashType:a,script:c}=j3(t,s,n,!1,i);return R3(r,c,"sign"),{hash:o,sighashType:a}}ui.getHashAndSighashType=yu;function j3(e,t,r,n,i){let s=r.__TX,o=t.sighashType||Zt.Transaction.SIGHASH_ALL;D3(o,i);let a,c;if(t.nonWitnessUtxo){let d=gd(r,t,e),h=s.ins[e].hash,b=d.getHash();if(!h.equals(b))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);let g=s.ins[e].index;c=d.outs[g]}else if(t.witnessUtxo)c=t.witnessUtxo;else throw new Error("Need a Utxo input item for signing");let{meaningfulScript:u,type:f}=yd(c.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(f)>=0)a=s.hashForWitnessV0(e,u,c.value,o);else if((0,Er.isP2WPKH)(u)){let d=ci.p2pkh({hash:u.slice(2)}).output;a=s.hashForWitnessV0(e,d,c.value,o)}else{if(t.nonWitnessUtxo===void 0&&r.__UNSAFE_SIGN_NONSEGWIT===!1)throw new Error(`Input #${e} has witnessUtxo but non-segwit script: ${u.toString("hex")}`);!n&&r.__UNSAFE_SIGN_NONSEGWIT!==!1&&console.warn(`Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.
*********************
PROCEED WITH CAUTION!
*********************`),a=s.hashForSignature(e,u,o)}return{script:u,sighashType:o,hash:a}}function iB(e,t,r,n){let i=[];if(t.tapInternalKey){let o=(0,yt.tweakInternalPubKey)(e,t);i.push(o)}if(t.tapScriptSig){let o=t.tapScriptSig.map(a=>a.pubkey);i.push(...o)}return i.map(o=>qp(e,t,r,o,n)).flat()}function qp(e,t,r,n,i,s,o){let a=i.__TX,c=t.sighashType||Zt.Transaction.SIGHASH_DEFAULT;D3(c,o);let u=r.map((g,y)=>z3(y,g,i)),f=u.map(g=>g.script),d=u.map(g=>g.value),h=[];if(t.tapInternalKey&&!s){let g=(0,yt.tweakInternalPubKey)(e,t);if((0,yt.toXOnly)(n).equals(g)){let y=a.hashForWitnessV1(e,f,d,c);h.push({pubkey:n,hash:y})}}let b=(t.tapLeafScript||[]).filter(g=>(0,Er.pubkeyInScript)(n,g.script)).map(g=>{let y=(0,zO.tapleafHash)({output:g.script,version:g.leafVersion});return Object.assign({hash:y},g)}).filter(g=>!s||s.equals(g.hash)).map(g=>{let y=a.hashForWitnessV1(e,f,d,Zt.Transaction.SIGHASH_DEFAULT,g.hash);return{pubkey:n,hash:y,leafHash:g.hash}});return h.concat(b)}function D3(e,t){if(t&&t.indexOf(e)<0){let r=cB(e);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${r}`)}}function sB(e,t,r){let n;switch(t){case"multisig":let i=aB(e,r);n=ci.p2ms({output:e,signatures:i});break;case"pubkey":n=ci.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=ci.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=ci.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break}return n}function oB(e,t,r){let n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){let s=gd(r,t,e),o=n.ins[e].index;i.script=s.outs[o].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||(0,Er.isP2WPKH)(i.script))&&(i.isSegwit=!0),i}function C3(e,t,r){let n=(0,fn.checkForInput)(t,e);if(!n.bip32Derivation||n.bip32Derivation.length===0)throw new Error("Need bip32Derivation to sign with HD");let i=n.bip32Derivation.map(o=>{if(o.masterFingerprint.equals(r.fingerprint))return o}).filter(o=>!!o);if(i.length===0)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map(o=>{let a=r.derivePath(o.path);if(!o.pubkey.equals(a.publicKey))throw new Error("pubkey did not match bip32Derivation");return a})}function aB(e,t){return ci.p2ms({output:e}).pubkeys.map(n=>(t.filter(i=>i.pubkey.equals(n))[0]||{}).signature).filter(n=>!!n)}function K3(e){let t=0;function r(o){return t+=o,e.slice(t-o,t)}function n(){let o=I3.decode(e,t);return t+=I3.decode.bytes,o}function i(){return r(n())}function s(){let o=n(),a=[];for(let c=0;c<o;c++)a.push(i());return a}return s()}function cB(e){let t=e&Zt.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(e&31){case Zt.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case Zt.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case Zt.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE";break}return t}function Rp(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;let n=Zt.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;let i=e,s=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){let o=i.__NON_WITNESS_UTXO_BUF_CACHE[s],a=i.__NON_WITNESS_UTXO_TX_CACHE[s];if(o!==void 0)return o;{let c=a.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[s]=c,c}},set(o){i.__NON_WITNESS_UTXO_BUF_CACHE[s]=o}})}function F3(e,t,r,n){let i=0;e.forEach((c,u)=>{if(n&&c.finalScriptSig&&(t.ins[u].script=c.finalScriptSig),n&&c.finalScriptWitness&&(t.ins[u].witness=K3(c.finalScriptWitness)),c.witnessUtxo)i+=c.witnessUtxo.value;else if(c.nonWitnessUtxo){let f=gd(r,c,u),d=t.ins[u].index;i+=f.outs[d].value}});let s=t.outs.reduce((c,u)=>c+u.value,0),o=i-s;if(o<0)throw new Error("Outputs are spending more than Inputs");let a=t.virtualSize();r.__FEE=o,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(o/a)}function gd(e,t,r){let n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||Rp(e,t,r),n[r]}function W3(e,t,r){let{script:n}=z3(e,t,r);return n}function z3(e,t,r){if(t.witnessUtxo!==void 0)return{script:t.witnessUtxo.script,value:t.witnessUtxo.value};if(t.nonWitnessUtxo!==void 0){let i=gd(r,t,e).outs[r.__TX.ins[e].index];return{script:i.script,value:i.value}}else throw new Error("Can't find pubkey in input without Utxo data")}function uB(e,t,r,n){let i=W3(r,t,n),{meaningfulScript:s}=yd(i,r,"input",t.redeemScript,t.witnessScript);return(0,Er.pubkeyInScript)(e,s)}function fB(e,t,r,n){let i=n.__TX.outs[r].script,{meaningfulScript:s}=yd(i,r,"output",t.redeemScript,t.witnessScript);return(0,Er.pubkeyInScript)(e,s)}function dB(e){if(!e)return;let t=Ss.decompile(e);if(!t)return;let r=t[t.length-1];if(!(!m.Buffer.isBuffer(r)||V3(r)||pB(r)||!Ss.decompile(r)))return r}function lB(e){if(!e)return;let t=K3(e),r=t[t.length-1];if(!(V3(r)||!Ss.decompile(r)))return r}function hB(e){if(e.length===65){let t=e[64]&1,r=e.slice(0,33);return r[0]=2|t,r}return e.slice()}function V3(e){return e.length===33&&Ss.isCanonicalPubKey(e)}function pB(e){return Ss.isCanonicalScriptSignature(e)}function yd(e,t,r,n,i){let s=(0,Er.isP2SHScript)(e),o=s&&n&&(0,Er.isP2WSHScript)(n),a=(0,Er.isP2WSHScript)(e);if(s&&n===void 0)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((a||o)&&i===void 0)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let c;return o?(c=i,H3(t,e,n,r),k3(t,n,i,r),bd(c)):a?(c=i,k3(t,e,i,r),bd(c)):s?(c=n,H3(t,e,n,r)):c=e,{meaningfulScript:c,type:o?"p2sh-p2wsh":s?"p2sh":a?"p2wsh":"raw"}}function bd(e){if((0,Er.isP2WPKH)(e)||(0,Er.isP2SHScript)(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function G3(e){return(0,Er.isP2WPKH)(e)?"witnesspubkeyhash":(0,Er.isP2PKH)(e)?"pubkeyhash":(0,Er.isP2MS)(e)?"multisig":(0,Er.isP2PK)(e)?"pubkey":"nonstandard"}function bu(e){return[...Array(e).keys()]}});var Kp=K(ss=>{"use strict";E();P();Object.defineProperty(ss,"__esModule",{value:!0});ss.encode=ss.decode=ss.encodeRaw=ss.decodeRaw=void 0;var jp=ft();function $3(e,t){if(t!==void 0&&e[0]!==t)throw new Error("Invalid network version");if(e.length===33)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(e.length!==34)throw new Error("Invalid WIF length");if(e[33]!==1)throw new Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}ss.decodeRaw=$3;function Dp(e,t,r){let n=m.Buffer.alloc(r?34:33);return n.writeUInt8(e,0),t.copy(n,1),r&&(n[33]=1),n}ss.encodeRaw=Dp;function bB(e,t){return $3(jp.base.fromBase58Check(e),t)}ss.decode=bB;function gB(e,t,r){return typeof e=="number"?jp.base.toBase58Check(Dp(e,t,r)):jp.base.toBase58Check(Dp(e.version,e.privateKey,e.compressed))}ss.encode=gB});var vd=K(En=>{"use strict";E();P();var yB=En&&En.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),vB=En&&En.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mB=En&&En.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&yB(t,e,r);return vB(t,e),t};Object.defineProperty(En,"__esModule",{value:!0});En.countAdjustedVsize=En.convertScriptSigAsm=En.countScriptSigops=void 0;var wB=Oo(),xB=os(),X3=ft(),_B=mB(fi());function vu(e,t=!1,r=!1){var i,s;if(!(e!=null&&e.length))return 0;let n=0;if(n+=((i=e.match(/OP_CHECKSIG/g))==null?void 0:i.length)||0,t)n+=20*(((s=e.match(/OP_CHECKMULTISIG/g))==null?void 0:s.length)||0);else{let o=e.matchAll(/(?:OP_(?:PUSHNUM_)?(\d+))? OP_CHECKMULTISIG/g);for(let a of o){let c=parseInt(a[1]);Number.isInteger(c)?n+=c:n+=20}}return r?n:n*4}En.countScriptSigops=vu;function mu(e){if((e==null?void 0:e.length)==0)return"";let t=[],r=0;for(;r<e.length;){let n=e[r];if(n>=1&&n<=78){r++;let i;n===76?(i=e.readUInt8(r),t.push("OP_PUSHDATA1"),r+=1):n===77?(i=e.readUInt16LE(r),t.push("OP_PUSHDATA2"),r+=2):n===78?(i=e.readUInt32LE(r),t.push("OP_PUSHDATA4"),r+=4):(i=n,t.push("OP_PUSHBYTES_"+i));let s=e.slice(r,r+i);if(s.length!==i)break;t.push(s.toString("hex")),r+=s.length}else{if(n===0)t.push("OP_0");else if(n===79)t.push("OP_PUSHNUM_NEG1");else if(n===177)t.push("OP_CLTV");else if(n===178)t.push("OP_CSV");else if(n===186)t.push("OP_CHECKSIGADD");else{let i=wB.REVERSE_OPS[n];i&&n<253?/^OP_(\d+)$/.test(i)?t.push(i.replace(/^OP_(\d+)$/,"OP_PUSHNUM_$1")):t.push(i):t.push("OP_RETURN_"+n)}r+=1}}return t.join(" ")}En.convertScriptSigAsm=mu;function SB(e,t,r){if(e==null)return 0;r==null&&(r=_B.networks.bitcoin);let n=0;(t!=null||null)&&t.length==e.ins.length&&e.ins.forEach((s,o)=>{var c,u,f;if(s.script!=null&&(n+=vu(mu(s.script),!0)),t.length<=o||t[o]==null||null||t[o]=="")return;let a=(0,xB.getAddressType)(t[o],r);switch(!0){case(a==="segwit_nested"&&((c=s.witness)==null?void 0:c.length)===2&&s.script&&X3.base.toHex(s.script).startsWith("160014")):case a==="segwit_native":n+=1;break;case(a==="segwit_nested"&&((u=s.witness)==null?void 0:u.length)&&s.script&&X3.base.toHex(s.script).startsWith("220020")):case a==="segwit_native":(f=s.witness)!=null&&f.length&&(n+=vu(mu(s.witness[s.witness.length-1]),!1,!0));break;case a==="segwit_nested":s.script&&(n+=vu(mu(s.script)));break}});for(let s of e.outs)s&&(n+=vu(mu(s.script),!0));let i=e.virtualSize();return i>n*5?i:n*5}En.countAdjustedVsize=SB});var os=K(Ae=>{"use strict";E();P();var EB=Ae&&Ae.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),PB=Ae&&Ae.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),wu=Ae&&Ae.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&EB(t,e,r);return PB(t,e),t};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.estimateBchFee=Ae.estimateBtcFee=Ae.ValidSignedTransaction=Ae.getMPCTransaction=Ae.calculateBchTxSize=Ae.calculateTxSize=Ae.signBch=Ae.getAddressType=Ae.signBtc=Ae.TxBuild=Ae.private2Wif=Ae.wif2Public=Ae.sign=Ae.private2public=Ae.privateKeyFromWIF=Ae.Array=void 0;var Ce=wu(fi()),Z3=fi(),ae=ft(),J3=wu(Kp()),Y3=ec(),Q3=wu(cn()),e8=wu(ra()),Es=wu(xr()),Eo=Oo(),TB=vd(),t8=ae.signUtil.schnorr.secp256k1.schnorr;Ae.Array=ae.typeforce.Array;function Fp(e,t){let r=J3.decode(e),n=r.version;if((0,Ae.Array)(t)){if(t=t.filter(i=>n===i.wif).pop(),!t)throw new Error("Unknown network version")}else if(t=t||Ce.networks.bitcoin,n!==t.wif)throw new Error("Invalid network version");return ae.base.toHex(r.privateKey)}Ae.privateKeyFromWIF=Fp;function Wp(e){return ae.signUtil.secp256k1.publicKeyCreate(ae.base.fromHex(e),!0)}Ae.private2public=Wp;function md(e,t){let{signature:r}=ae.signUtil.secp256k1.sign(e,ae.base.fromHex(t));return m.Buffer.from(r)}Ae.sign=md;function AB(e,t){let r=Fp(e,t);return Wp(r)}Ae.wif2Public=AB;function xu(e,t){return t=t||Ce.networks.bitcoin,J3.encode(t.wif,e,!0)}Ae.private2Wif=xu;var aa=class{constructor(t,r,n,i){this.tx=new Ce.Transaction,this.network=Ce.networks.bitcoin,t?this.tx.version=t:this.tx.version=2,r&&(this.network=r),this.inputs=[],this.outputs=[],this.bitcoinCash=n||!1,this.hardware=i||!1}addInput(t,r,n,i,s,o,a,c){this.inputs.push({txId:t,index:r,privateKey:n,address:i,script:s,value:o,publicKey:a,sequence:c})}addOutput(t,r,n){this.outputs.push({address:t,value:r,omniScript:n})}build(t){let r=[];for(let n of this.inputs){let i=ae.base.reverseBuffer(m.Buffer.from(n.txId,"hex"));this.tx.addInput(i,n.index,n.sequence),n.privateKey?r.push(Fp(n.privateKey,this.network)):r.push("")}for(let n of this.outputs)if(n.omniScript)this.tx.addOutput(ae.base.fromHex(n.omniScript),0);else{let i=Ce.address.toOutputScript(n.address,this.network);this.tx.addOutput(i,n.value)}if(this.hardware)return this.tx.toHex();for(let n=0;n<r.length;n++){let i=r[n],s;i?s=Wp(i):this.hardware||(s=ae.base.fromHex(this.inputs[n].publicKey));let o,a=Ce.Transaction.SIGHASH_ALL;if(this.bitcoinCash){let c=Ce.payments.p2pkh({pubkey:s}).output;a=Ce.Transaction.SIGHASH_ALL|Ce.Transaction.SIGHASH_BITCOINCASHBIP143;let u=this.inputs[n].value||0;o=this.tx.hashForCashSignature(n,c,u,a);let f;t?(t.push(ae.base.toHex(o)),f=m.Buffer.alloc(64,0)):f=md(o,i);let d=Ce.payments.p2pkh({output:c,pubkey:s,signature:Ce.script.signature.encode(f,a)});d.input&&(this.tx.ins[n].script=d.input)}else{let c=r8(this.inputs[n].address,this.network);if(c==="legacy"){let u=Ce.payments.p2pkh({pubkey:s}).output;o=this.tx.hashForSignature(n,u,a);let f;t?(t.push(ae.base.toHex(o)),f=m.Buffer.alloc(64,0)):f=md(o,i);let d=Ce.payments.p2pkh({output:u,pubkey:s,signature:Ce.script.signature.encode(f,a)});d.input&&(this.tx.ins[n].script=d.input)}else if(c==="segwit_taproot"){let u=this.inputs.map(h=>Ce.address.toOutputScript(h.address,this.network)),f=this.inputs.map(h=>h.value);o=this.tx.hashForWitnessV1(n,u,f,Ce.Transaction.SIGHASH_DEFAULT);let d;if(t)t.push(ae.base.toHex(o)),d=m.Buffer.alloc(64,0);else{let h=e8.taprootTweakPrivKey(ae.base.fromHex(i));d=m.Buffer.from(t8.sign(o,h,ae.base.randomBytes(32)))}this.tx.ins[n].witness=[m.Buffer.from(d)]}else{let u=Q3.hash160(s),f=m.Buffer.of(25,118,169,20,...u,136,172),d=this.inputs[n].value||0;o=this.tx.hashForWitness(n,f,d,a);let h;t?(t.push(ae.base.toHex(o)),h=m.Buffer.alloc(64,0)):h=md(o,i),this.tx.ins[n].witness=[],this.tx.ins[n].witness.push(Ce.script.signature.encode(h,a)),this.tx.ins[n].witness.push(s);let b=m.Buffer.of(22,0,20,...u);c!=="segwit_native"&&(this.tx.ins[n].script=b)}}}return this.tx.toHex()}virtualSize(){return(0,TB.countAdjustedVsize)(this.tx,this.inputs.map(t=>t.address),this.network||Ce.networks.bitcoin)}};Ae.TxBuild=aa;function IB(e,t,r,n,i,s){let o=e.inputs,a=e.outputs,c=e.address,u=e.feePerB||10,f=e.dustSize||546;if(r=r||Ce.networks.bitcoin,e.memo&&(ae.base.isHexString(e.memo)?ae.base.fromHex(e.memo):m.Buffer.from(ae.base.toUtf8(e.memo))).length>80)throw new Error("data after op_return is  too long");let d=t;if(d||(d=xu(ae.base.fromHex("853fd8960ff34838208d662ecd3b9f8cf413e13e0f74f95e554f8089f5058db0"),r)),s){let{inputAmount:T,outputAmount:M,virtualSize:k}=wd(o,a,c,d,r,f,!1,e.memo,e.memoPos);return(T-M-k*u).toString()}let{inputAmount:h,outputAmount:b,virtualSize:g}=wd(o,a,c,d,r,f,!1,e.memo,e.memoPos),y=h-b-g*u,x=new aa(2,r,!1,i);for(let T=0;T<o.length;T++){let M=o[T],k=M.privateKey||t,R=M.address||c;x.addInput(M.txId,M.vOut,k,R,M.reedScript,M.amount,M.publicKey,M.sequence)}e.memo&&e.memoPos==0&&x.addOutput("",0,ae.base.toHex(Es.compile([Eo.OPS.OP_RETURN].concat(ae.base.isHexString(e.memo)?ae.base.fromHex(e.memo):m.Buffer.from(ae.base.toUtf8(e.memo))))));for(let T=0;T<a.length;T++){let M=a[T];x.addOutput(M.address,M.amount,M.omniScript),e.memo&&e.memoPos&&x.outputs.length==e.memoPos&&x.addOutput("",0,ae.base.toHex(Es.compile([Eo.OPS.OP_RETURN].concat(ae.base.isHexString(e.memo)?ae.base.fromHex(e.memo):m.Buffer.from(ae.base.toUtf8(e.memo))))))}return y>f&&(x.addOutput(c,y),e.memo&&e.memoPos&&x.outputs.length==e.memoPos&&x.addOutput("",0,ae.base.toHex(Es.compile([Eo.OPS.OP_RETURN].concat(ae.base.isHexString(e.memo)?ae.base.fromHex(e.memo):m.Buffer.from(ae.base.toUtf8(e.memo))))))),e.memo&&(e.memoPos==null||e.memoPos<0||e.memoPos>x.outputs.length)&&x.addOutput("",0,ae.base.toHex(Es.compile([Eo.OPS.OP_RETURN].concat(ae.base.isHexString(e.memo)?ae.base.fromHex(e.memo):m.Buffer.from(ae.base.toUtf8(e.memo)))))),x.build(n)}Ae.signBtc=IB;function r8(e,t){let r,n;try{r=(0,Y3.fromBase58Check)(e)}catch{}if(r){if(r.version===t.pubKeyHash)return"legacy";if(r.version===t.scriptHash)return"segwit_nested"}else{try{n=(0,Y3.fromBech32)(e)}catch{}if(n){if(n.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(n.version===0)return"segwit_native";if(n.version===1)return"segwit_taproot"}}return"legacy"}Ae.getAddressType=r8;function OB(e,t,r,n,i){let s=e.inputs,o=e.outputs,a=e.address,c=e.feePerB||10,u=e.dustSize||546;r=r||Ce.networks.bitcoin;let f=t;f||(f=xu(ae.base.fromHex("853fd8960ff34838208d662ecd3b9f8cf413e13e0f74f95e554f8089f5058db0"),r));let{inputAmount:d,outputAmount:h,virtualSize:b}=zp(s,o,a,f,r,u),g=d-h-b*c,y=new aa(2,r,!0,i);for(let x=0;x<s.length;x++){let T=s[x];y.addInput(T.txId,T.vOut,t,a,void 0,T.amount,T.publicKey,T.sequence)}for(let x=0;x<o.length;x++){let T=o[x];y.addOutput(T.address,T.amount)}return g>u&&y.addOutput(a,g),y.build(n)}Ae.signBch=OB;function wd(e,t,r,n,i,s,o,a,c){let u=new aa(2,i,!1,o),f=0;for(let g=0;g<e.length;g++){let y=e[g],x=y.privateKey||n,T=y.address||r;u.addInput(y.txId,y.vOut,x,T,y.reedScript,y.amount,y.publicKey,y.sequence),f=f+(y.amount||0)}a&&c==0&&u.addOutput("",0,ae.base.toHex(Es.compile([Eo.OPS.OP_RETURN].concat(ae.base.isHexString(a)?ae.base.fromHex(a):m.Buffer.from(ae.base.toUtf8(a))))));let d=0;for(let g=0;g<t.length;g++){let y=t[g];u.addOutput(y.address,y.amount,y.omniScript),d=d+y.amount,a&&c&&u.outputs.length==c&&u.addOutput("",0,ae.base.toHex(Es.compile([Eo.OPS.OP_RETURN].concat(ae.base.isHexString(a)?ae.base.fromHex(a):m.Buffer.from(ae.base.toUtf8(a))))))}f-d>s&&(u.addOutput(r,f-d),a&&c&&u.outputs.length==c&&u.addOutput("",0,ae.base.toHex(Es.compile([Eo.OPS.OP_RETURN].concat(ae.base.isHexString(a)?ae.base.fromHex(a):m.Buffer.from(ae.base.toUtf8(a))))))),a&&(c==null||c<0||c>u.outputs.length)&&u.addOutput("",0,ae.base.toHex(Es.compile([Eo.OPS.OP_RETURN].concat(ae.base.isHexString(a)?ae.base.fromHex(a):m.Buffer.from(ae.base.toUtf8(a))))));let h=u.build(),b=u.virtualSize();return{inputAmount:f,outputAmount:d,virtualSize:b,txHex:h}}Ae.calculateTxSize=wd;function zp(e,t,r,n,i,s,o){let a=new aa(2,i,!0,o),c=0;for(let h=0;h<e.length;h++){let b=e[h];a.addInput(b.txId,b.vOut,n,r,void 0,b.amount,b.publicKey,b.sequence),c=c+(b.amount||0)}let u=0;for(let h=0;h<t.length;h++){let b=t[h];a.addOutput(b.address,b.amount),u=u+b.amount}c-u>s&&a.addOutput(r,c-u);let f=a.build(),d=a.tx.virtualSize();return{inputAmount:c,outputAmount:u,virtualSize:d,txHex:f}}Ae.calculateBchTxSize=zp;function BB(e,t,r){let n=Z3.Transaction.fromBuffer(ae.base.fromHex(e),!1);for(let i=0;i<n.ins.length;i++){let s=n.ins[i],o=ae.base.fromHex(t[i]),a=Ce.Transaction.SIGHASH_ALL;if(r){a=Ce.Transaction.SIGHASH_ALL|Ce.Transaction.SIGHASH_BITCOINCASHBIP143;let c=Ce.payments.p2pkh({input:s.script}),u=Ce.payments.p2pkh({pubkey:c.pubkey,signature:Ce.script.signature.encode(o,a)});u.input&&(s.script=u.input)}else{let c;if(s.witness.length===2)c="segwit_native";else if(s.witness.length===1)c="segwit_taproot";else if(s.witness.length===0)c="legacy";else throw Error("unknown witness length");if(c==="legacy"){let u=Ce.payments.p2pkh({input:s.script}),f=Ce.payments.p2pkh({pubkey:u.pubkey,signature:Ce.script.signature.encode(o,a)});f.input&&(s.script=f.input)}else c==="segwit_taproot"?s.witness=[o]:s.witness[0]=Ce.script.signature.encode(o,a)}}return n.toHex()}Ae.getMPCTransaction=BB;function MB(e,t,r){let n=Z3.Transaction.fromBuffer(ae.base.fromHex(e),!1);if(!t)return n;for(let i=0;i<n.ins.length;i++){let s=n.ins[i],o=t[i],a;if(s.witness.length===2)a="segwit_native";else if(s.witness.length===1)a="segwit_taproot";else if(s.witness.length===0)a="legacy";else throw Error("unknown witness length");if(a==="legacy"){let c=Es.decompile(s.script),u=c[0],f=c[1],d=Ce.script.signature.decode(u),h=Ce.address.toOutputScript(o.address,r),b=n.hashForSignature(i,h,d.hashType);if(!ae.signUtil.secp256k1.verifyWithNoRecovery(b,d.signature,f))throw Error("signature error")}else if(a==="segwit_native"){let c=s.witness[0],u=s.witness[1],f=Ce.script.signature.decode(c),d=m.Buffer.of(25,118,169,20,...Q3.hash160(u),136,172),h=n.hashForWitness(i,d,o.value,f.hashType);if(!ae.signUtil.secp256k1.verifyWithNoRecovery(h,f.signature,u))throw Error("signature error")}else{let c=s.witness[0],u=t.map(b=>Ce.address.toOutputScript(b.address,r)),f=t.map(b=>b.value),d=n.hashForWitnessV1(i,u,f,Ce.Transaction.SIGHASH_DEFAULT),h=e8.taprootTweakPubkey(ae.base.fromHex(o.publicKey).slice(1))[0];if(!t8.verify(ae.base.toHex(c),ae.base.toHex(d),ae.base.toHex(h)))throw Error("signature error")}}for(let i of n.ins)i.hash=ae.base.reverseBuffer(i.hash);return n}Ae.ValidSignedTransaction=MB;function HB(e,t){let r=e.inputs,n=e.outputs,i=e.feePerB||10,s=e.dustSize||546;t=t||Ce.networks.bitcoin;let o=xu(ae.base.fromHex("853fd8960ff34838208d662ecd3b9f8cf413e13e0f74f95e554f8089f5058db0"),t),{virtualSize:a}=wd(r,n,e.address,o,t,s,!1,e.memo);return a*i}Ae.estimateBtcFee=HB;function kB(e,t){let r=e.inputs,n=e.outputs,i=e.feePerB||10,s=e.dustSize||546;t=t||Ce.networks.bitcoin;let o=xu(ae.base.fromHex("853fd8960ff34838208d662ecd3b9f8cf413e13e0f74f95e554f8089f5058db0"),t),{virtualSize:a}=zp(r,n,e.address,o,t,s);return a*i}Ae.estimateBchFee=kB});var Zp=K(ve=>{"use strict";E();P();var NB=ve&&ve.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),CB=ve&&ve.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s8=ve&&ve.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&NB(t,e,r);return CB(t,e),t};Object.defineProperty(ve,"__esModule",{value:!0});ve.generateMPCSignedPSBT=ve.generateMPCUnsignedPSBT=ve.generateMPCSignedBuyingTx=ve.generateMPCUnsignedBuyingPSBT=ve.generateMPCSignedListingPSBT=ve.generateMPCUnsignedListingPSBT=ve.generateSignedBuyingTx=ve.mergeSignedBuyingPsbt=ve.generateUnsignedBuyingPsbt=ve.generateSignedListingPsbt=ve.generateUnsignedListingPsbt=ve.extractPsbtTransaction=ve.psbtSignImpl=ve.signPsbtWithKeyPathAndScriptPathImpl=ve.signPsbtWithKeyPathAndScriptPath=ve.signPsbtWithKeyPathAndScriptPathBatch=ve.psbtDecode=ve.psbtSign=ve.classicToPsbt=ve.buildPsbt=void 0;var Pn=Lp(),Ee=ft(),Wr=os(),ke=fi(),oc=s8(ra()),Po=Np(),qB=ec(),RB=bo(),n8=oa(),Vp=s8(xr()),UB=cn(),LB=k1(),xd=Ee.signUtil.schnorr.secp256k1.schnorr,_u=5e3;function Gp(e,t,r){return o8(e,t,r).toHex()}ve.buildPsbt=Gp;function o8(e,t,r){let n=new Pn.Psbt({network:t,maximumFeeRate:r||_u});return e.inputs.forEach(i=>{let s=(0,qB.toOutputScript)(i.address,t),o={hash:i.txId,index:i.vOut,witnessUtxo:{script:s,value:i.amount}},a=(0,Wr.getAddressType)(i.address,t||ke.networks.bitcoin);i.bip32Derivation&&(a==="segwit_taproot"?o.tapBip32Derivation=i.bip32Derivation.map(c=>{let u=Ee.base.fromHex(c.pubkey);return u.length!=32&&(u=u.slice(1)),{masterFingerprint:Ee.base.fromHex(c.masterFingerprint),pubkey:u,path:c.path,leafHashes:c.leafHashes.map(f=>m.Buffer.from(f,"hex"))}}):o.bip32Derivation=i.bip32Derivation.map(c=>({masterFingerprint:Ee.base.fromHex(c.masterFingerprint),pubkey:Ee.base.fromHex(c.pubkey),path:c.path}))),a==="legacy"?o.nonWitnessUtxo=Ee.base.fromHex(i.nonWitnessUtxo):a==="segwit_taproot"?i.publicKey&&(o.tapInternalKey=(0,Po.toXOnly)(Ee.base.fromHex(i.publicKey))):a==="segwit_nested"&&(o.redeemScript=ke.payments.p2wpkh({pubkey:m.Buffer.from(i.publicKey,"hex"),network:t}).output),i.sighashType&&(o.sighashType=i.sighashType),n.addInput(o)}),e.outputs.forEach(i=>{if(i.omniScript)n.addOutput({script:Ee.base.fromHex(i.omniScript),value:0});else{let s={address:i.address,value:i.amount};i.bip32Derivation&&(s.bip32Derivation=i.bip32Derivation.map(o=>({masterFingerprint:Ee.base.fromHex(o.masterFingerprint),pubkey:Ee.base.fromHex(o.pubkey),path:o.path}))),n.addOutput(s)}}),n}ve.classicToPsbt=o8;function $p(e,t,r,n){let i=Pn.Psbt.fromBase64(e,{network:r,maximumFeeRate:n||_u});return u8(i,t,r),i.toBase64()}ve.psbtSign=$p;function jB(e,t,r){try{let n=Pn.Psbt.fromHex(e,{network:t,maximumFeeRate:r||_u});return n.txInputs?n.txInputs.filter(i=>!i.hash.equals(m.Buffer.alloc(32))).map(i=>({txId:Ee.base.toHex(Ee.base.reverseBuffer(i.hash)),vOut:i.index})):[]}catch{let i=Pn.Psbt.fromBase64(e,{network:t,maximumFeeRate:r||_u});return i.txInputs?i.txInputs.filter(s=>!s.hash.equals(m.Buffer.alloc(32))).map(s=>({txId:Ee.base.toHex(Ee.base.reverseBuffer(s.hash)),vOut:s.index})):[]}}ve.psbtDecode=jB;function DB(e,t,r,n){if(e==null||e.length==0)return[];let i=[],s=n==null?0:n.length,o=0;for(o=0;o<e.length;o++){let a={};o<s&&n&&(a=n[o]);let c=a8(e[o],t,r,{autoFinalized:a.autoFinalized,toSignInputs:a.toSignInputs});i.push(c)}return i}ve.signPsbtWithKeyPathAndScriptPathBatch=DB;function a8(e,t,r,n={}){let i=Yp(e,r);return c8(i,t,r,n.autoFinalized,n.toSignInputs),i.toHex()}ve.signPsbtWithKeyPathAndScriptPath=a8;function c8(e,t,r,n,i){var u,f,d;r=r||ke.networks.bitcoin;let s=(0,Wr.privateKeyFromWIF)(t,r),o=new Map;i!=null&&i.map(h=>{o.set(h.index,h)});let a={psbtIndex:0,needTweak:!0,tweakHash:m.Buffer.alloc(0),toSignInputsMap:o,publicKey:m.Buffer.alloc(0),sign(h){return(0,Wr.sign)(h,s)},signSchnorr(h){var g,y;let b=oc.taprootTweakPrivKey(Ee.base.fromHex(s));return(g=this.toSignInputsMap)!=null&&g.has(this.psbtIndex)&&(y=this.toSignInputsMap.get(this.psbtIndex))!=null&&y.disableTweakSigner?m.Buffer.from(xd.sign(h,s,Ee.base.randomBytes(32))):this.needTweak?(this.needTweak&&this.tweakHash.length>0&&(b=oc.taprootTweakPrivKey(Ee.base.fromHex(s),this.tweakHash)),m.Buffer.from(xd.sign(h,b,Ee.base.randomBytes(32)))):m.Buffer.from(xd.sign(h,s,Ee.base.randomBytes(32)))}},c=[ke.Transaction.SIGHASH_SINGLE|ke.Transaction.SIGHASH_ANYONECANPAY,ke.Transaction.SIGHASH_ALL,ke.Transaction.SIGHASH_DEFAULT];for(let h=0;h<e.inputCount;h++){if((o==null?void 0:o.size)>0&&!(o!=null&&o.has(h)))continue;a.psbtIndex=h;let b=e.data.inputs[h];(0,Po.isTaprootInput)(b)?(b.tapInternalKey||(b.tapInternalKey=(0,Po.toXOnly)((0,Wr.wif2Public)(t,r))),a.needTweak=!0,a.publicKey=m.Buffer.from(oc.taprootTweakPubkey((0,Po.toXOnly)((0,Wr.wif2Public)(t,r)))[0]),o!=null&&o.has(h)&&(u=o==null?void 0:o.get(h))!=null&&u.disableTweakSigner&&(a.publicKey=(0,Wr.wif2Public)(t,r),a.needTweak=!1),b.tapLeafScript&&((f=b.tapLeafScript)==null?void 0:f.length)>0&&!b.tapMerkleRoot?b.tapLeafScript.map(g=>{g.controlBlock&&g.script&&(a.publicKey=(0,Wr.wif2Public)(t,r),a.needTweak=!1)}):b.tapMerkleRoot&&(a.needTweak=!0,a.tweakHash=b.tapMerkleRoot,a.publicKey=m.Buffer.from(oc.taprootTweakPubkey((0,Po.toXOnly)((0,Wr.wif2Public)(t,r)),b.tapMerkleRoot)[0]))):(a.needTweak=!1,a.tweakHash=m.Buffer.alloc(0),a.publicKey=(0,Wr.wif2Public)(t,r));try{if(o!=null&&o.has(h)){let g=(d=o==null?void 0:o.get(h))==null?void 0:d.sighashTypes;g!=null&&(c=g)}if(e.signInput(h,a,c),n!=null&&!n)continue;e.finalizeInput(h)}catch(g){if((o==null?void 0:o.size)>0&&(o==null?void 0:o.has(h)))throw g}}}ve.signPsbtWithKeyPathAndScriptPathImpl=c8;function u8(e,t,r){r=r||ke.networks.bitcoin;let n=(0,Wr.privateKeyFromWIF)(t,r),i={publicKey:m.Buffer.alloc(0),sign(o){return(0,Wr.sign)(o,n)},signSchnorr(o){let a=oc.taprootTweakPrivKey(Ee.base.fromHex(n));return m.Buffer.from(xd.sign(o,a,Ee.base.randomBytes(32)))}},s=[ke.Transaction.SIGHASH_SINGLE|ke.Transaction.SIGHASH_ANYONECANPAY,ke.Transaction.SIGHASH_ALL|ke.Transaction.SIGHASH_ANYONECANPAY,ke.Transaction.SIGHASH_ALL,ke.Transaction.SIGHASH_DEFAULT];for(let o=0;o<e.inputCount;o++){if((0,Po.isTaprootInput)(e.data.inputs[o])){let a=e.data.inputs[o];a.tapInternalKey||(a.tapInternalKey=(0,Po.toXOnly)((0,Wr.wif2Public)(t,r))),i.publicKey=m.Buffer.from(oc.taprootTweakPubkey((0,Po.toXOnly)((0,Wr.wif2Public)(t,r)))[0])}else i.publicKey=(0,Wr.wif2Public)(t,r);try{e.signInput(o,i,s)}catch{}}}ve.psbtSignImpl=u8;function Xp(e,t,r){let n=Pn.Psbt.fromHex(e,{network:t,maximumFeeRate:r||_u}),i;try{i=n.finalizeAllInputs().extractTransaction()}catch(s){i=n.extractTransaction(),console.log(s)}return i.toHex()}ve.extractPsbtTransaction=Xp;function f8(e,t,r){let n=ke.address.toOutputScript(e.nftAddress,t);if(((0,n8.isP2SHScript)(n)||(0,n8.isP2TR)(n))&&!r)throw new Error("Missing publicKey");let i={inputs:[],outputs:[]},s="bc1pcyj5mt2q4t4py8jnur8vpxvxxchke4pzy7tdr9yvj3u3kdfgrj6sw3rzmr";t===ke.networks.testnet&&(s="tb1pcyj5mt2q4t4py8jnur8vpxvxxchke4pzy7tdr9yvj3u3kdfgrj6see4dpv"),i.inputs.push({txId:"0".repeat(64),vOut:0,amount:0,address:s},{txId:"0".repeat(64),vOut:1,amount:0,address:s}),i.outputs.push({address:s,amount:0},{address:s,amount:0}),i.inputs.push({txId:e.nftUtxo.txHash,vOut:e.nftUtxo.vout,address:e.nftAddress,amount:e.nftUtxo.coinAmount,publicKey:r,nonWitnessUtxo:e.nftUtxo.rawTransation,sighashType:ke.Transaction.SIGHASH_SINGLE|ke.Transaction.SIGHASH_ANYONECANPAY}),i.outputs.push({address:e.receiveBtcAddress,amount:e.price});let o=Gp(i,t);return Ee.base.toBase64(Ee.base.fromHex(o))}ve.generateUnsignedListingPsbt=f8;function KB(e,t,r){let n=Ee.base.toHex((0,Wr.wif2Public)(t,r));return $p(f8(e,r,n),t,r)}ve.generateSignedListingPsbt=KB;var To=2,FB=600,WB=546;function d8(e,t,r){let n={inputs:[],outputs:[],address:e.paymentAndChangeAddress,feePerB:e.feeRate};e.dummyUtxos.forEach(o=>{n.inputs.push({txId:o.txHash,vOut:o.vout,address:e.paymentAndChangeAddress,amount:o.coinAmount,publicKey:r,nonWitnessUtxo:o.rawTransation})}),n.outputs.push({address:e.paymentAndChangeAddress,amount:e.dummyUtxos.reduce((o,a)=>o+a.coinAmount,0)});let i=[];e.sellerPsbts.forEach(o=>{let a=Pn.Psbt.fromBase64(o,{network:t}),c=a.data.globalMap.unsignedTx.tx.ins[To];i.push(a.data.globalMap.unsignedTx.tx.outs[To]);let u=a.data.inputs[To].witnessUtxo;u||(u=ke.Transaction.fromBuffer(a.data.inputs[To].nonWitnessUtxo).outs[c.index]),n.inputs.push({txId:Ee.base.toHex((0,RB.reverseBuffer)(c.hash)),vOut:c.index,address:ke.address.fromOutputScript(u.script,t),amount:u.value,sighashType:ke.Transaction.SIGHASH_SINGLE|ke.Transaction.SIGHASH_ANYONECANPAY}),n.outputs.push({address:e.receiveNftAddress,amount:u.value})}),i.forEach(o=>{n.outputs.push({address:ke.address.fromOutputScript(o.script,t),amount:o.value})}),e.paymentUtxos.forEach(o=>{n.inputs.push({txId:o.txHash,vOut:o.vout,address:e.paymentAndChangeAddress,amount:o.coinAmount,publicKey:r,nonWitnessUtxo:o.rawTransation})}),e.dummyUtxos.forEach(()=>{n.outputs.push({address:e.paymentAndChangeAddress,amount:FB})});let s=parseInt((0,Wr.signBtc)(n,"",t,void 0,!1,!0));return s>=WB&&n.outputs.push({address:e.paymentAndChangeAddress,amount:s}),Ee.base.toBase64(Ee.base.fromHex(Gp(n,t)))}ve.generateUnsignedBuyingPsbt=d8;function l8(e,t){let r=Pn.Psbt.fromBase64(e),n=t.length+1;return t.forEach((i,s)=>{let o=Pn.Psbt.fromBase64(i);r.data.globalMap.unsignedTx.tx.ins[n+s]=o.data.globalMap.unsignedTx.tx.ins[To],r.data.inputs[n+s]=o.data.inputs[To]}),r}ve.mergeSignedBuyingPsbt=l8;function zB(e,t,r){let n=Ee.base.toHex((0,Wr.wif2Public)(t,r)),i=$p(d8(e,r,n),t,r);return Xp(l8(i,e.sellerPsbts).toHex(),r)}ve.generateSignedBuyingTx=zB;function VB(e,t,r){let n=Pn.Psbt.fromBase64(e,{network:r}),i=Ee.base.fromHex(t),s=[ke.Transaction.SIGHASH_SINGLE|ke.Transaction.SIGHASH_ANYONECANPAY],o=[];for(let a=0;a<n.inputCount;a++){if(a!=To)continue;let{hash:c,sighashType:u}=n.getHashAndSighashType(a,i,s);o.push(Ee.base.toHex(c))}return{psbtBase64:e,signHashList:o}}ve.generateMPCUnsignedListingPSBT=VB;function GB(e,t,r,n){let i=Pn.Psbt.fromBase64(e,{network:n}),o=[{pubkey:Ee.base.fromHex(t),signature:Vp.signature.encode(Ee.base.fromHex(r),ke.Transaction.SIGHASH_SINGLE|ke.Transaction.SIGHASH_ANYONECANPAY)}];return i.data.updateInput(To,{partialSig:o}),i.toBase64()}ve.generateMPCSignedListingPSBT=GB;function $B(e,t,r,n=1){let i=Pn.Psbt.fromBase64(e,{network:r}),s=Ee.base.fromHex(t),o=[ke.Transaction.SIGHASH_ALL],a=[],c=n+1;for(let u=0;u<i.inputCount;u++){if(u>=c&&u<c+n)continue;let{hash:f,sighashType:d}=i.getHashAndSighashType(u,s,o);a.push(Ee.base.toHex(f))}return{psbtBase64:e,signHashList:a}}ve.generateMPCUnsignedBuyingPSBT=$B;function XB(e,t,r,n,i=1){let s=Pn.Psbt.fromBase64(e,{network:n}),o=Ee.base.fromHex(t),a=i+1;for(let c=0;c<s.inputCount;c++){if(c>=a&&c<a+i)continue;let u=[{pubkey:o,signature:Vp.signature.encode(Ee.base.fromHex(r[c]),ke.Transaction.SIGHASH_ALL)}];s.data.updateInput(c,{partialSig:u})}return Xp(s.toHex(),n)}ve.generateMPCSignedBuyingTx=XB;function h8(e,t,r){let n=Yp(e,r),i=Ee.base.fromHex(t),s=[ke.Transaction.SIGHASH_SINGLE|ke.Transaction.SIGHASH_ANYONECANPAY,ke.Transaction.SIGHASH_SINGLE|ke.Transaction.SIGHASH_ANYONECANPAY,ke.Transaction.SIGHASH_ALL|ke.Transaction.SIGHASH_ANYONECANPAY,ke.Transaction.SIGHASH_ALL,ke.Transaction.SIGHASH_DEFAULT],o=[];for(let c=0;c<n.inputCount;c++)try{let{hash:u,sighashType:f}=n.getHashAndSighashType(c,i,s);o.push(Ee.base.toHex(u))}catch{let f=i8();o.push(f)}let a=new Map;return o.map((c,u)=>{let f=a.get(c);f=f==null?0:f,f!=null&&f>=1&&(o[u]=i8()),a.set(c,f+1)}),{psbtStr:e,signHashList:o}}ve.generateMPCUnsignedPSBT=h8;function i8(){let e=(0,UB.sha256)((0,LB.randomBytes)(32)),t=Ee.base.toHex(e.slice(0,28));return"ffffffff"+t}function YB(e,t,r,n){let i=Yp(e,n),s=Ee.base.fromHex(t),o=ke.Transaction.SIGHASH_ALL,c=h8(e,t,n).signHashList;for(let u=0;u<i.inputCount;u++){if(c[u].slice(0,8)=="ffffffff")continue;i.data.inputs[u].sighashType!=null&&(o=i.data.inputs[u].sighashType);let f=[{pubkey:s,signature:Vp.signature.encode(Ee.base.fromHex(r[u]),o)}];try{i.data.updateInput(u,{partialSig:f})}catch{}}return i.toHex()}ve.generateMPCSignedPSBT=YB;function Yp(e,t){let r;return Ee.base.isHexString("0x"+e)?r=Pn.Psbt.fromHex(e,{network:t}):r=Pn.Psbt.fromBase64(e,{network:t}),r}});var w8=K(cc=>{"use strict";E();P();Object.defineProperty(cc,"__esModule",{value:!0});cc.verifySimple=cc.signSimple=void 0;var ac=ft(),b8=ec(),g8=na(),y8=Lp(),p8=sp(),ZB=Zp(),JB=os(),v8=oa();function m8(e){let t="BIP0322-signed-message",r=ac.base.sha256(m.Buffer.from(t)),n=ac.base.sha256(m.Buffer.concat([r,r,m.Buffer.from(e)]));return ac.base.toHex(n)}async function QB(e,t,r,n){let i=(0,b8.toOutputScript)(t,n),s=m.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),o=4294967295,a=0,c=m.Buffer.concat([m.Buffer.from("0020","hex"),m.Buffer.from(m8(e),"hex")]),u=new g8.Transaction;u.version=0,u.addInput(s,o,a,c),u.addOutput(i,0);let f=new y8.Psbt({network:n});f.setVersion(0),f.addInput({hash:u.getHash(),index:0,sequence:0,witnessUtxo:{script:i,value:0}}),(0,v8.isP2TR)(i)&&f.updateInput(0,{tapInternalKey:(0,JB.wif2Public)(r,n).slice(1)}),f.addOutput({script:m.Buffer.from("6a","hex"),value:0}),(0,ZB.psbtSignImpl)(f,r,n),f.finalizeAllInputs();let d=f.extractTransaction();function h(y){return m.Buffer.concat([(0,p8.encode)(y.byteLength),y])}let b=(0,p8.encode)(d.ins[0].witness.length),g=m.Buffer.concat([b,...d.ins[0].witness.map(y=>h(y))]);return ac.base.toBase64(g)}cc.signSimple=QB;function eM(e,t,r,n,i){let s=(0,b8.toOutputScript)(t,i),o=m.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),a=4294967295,c=0,u=m.Buffer.concat([m.Buffer.from("0020","hex"),m.Buffer.from(m8(e),"hex")]),f=new g8.Transaction;f.version=0,f.addInput(o,a,c,u),f.addOutput(s,0);let d=new y8.Psbt;d.setVersion(0),d.addInput({hash:f.getHash(),index:0,sequence:0,witnessUtxo:{script:s,value:0}});let h=ac.base.fromHex(n);return(0,v8.isP2TR)(s)&&d.updateInput(0,{tapInternalKey:h.slice(1)}),d.addOutput({script:m.Buffer.from("6a","hex"),value:0}),d.verify(h,m.Buffer.from(ac.base.fromBase64(r)))}cc.verifySimple=eM});var fi=K(kt=>{"use strict";E();P();var tM=kt&&kt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),rM=kt&&kt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),uc=kt&&kt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&tM(t,e,r);return rM(t,e),t};Object.defineProperty(kt,"__esModule",{value:!0});kt.BufferWriter=kt.Transaction=kt.bip0322=kt.script=kt.payments=kt.networks=kt.crypto=kt.address=void 0;var nM=uc(ec());kt.address=nM;var iM=uc(cn());kt.crypto=iM;var sM=uc(In());kt.networks=sM;var oM=uc(yo());kt.payments=oM;var aM=uc(xr());kt.script=aM;var cM=uc(w8());kt.bip0322=cM;var uM=na();Object.defineProperty(kt,"Transaction",{enumerable:!0,get:function(){return uM.Transaction}});var fM=bo();Object.defineProperty(kt,"BufferWriter",{enumerable:!0,get:function(){return fM.BufferWriter}})});var Sd=K(_d=>{"use strict";E();P();Object.defineProperty(_d,"__esModule",{value:!0});_d.validate=void 0;function dM(e,t){if(!e)throw new Error(t)}_d.validate=dM});var S8=K(fc=>{"use strict";E();P();Object.defineProperty(fc,"__esModule",{value:!0});fc.decode=fc.encode=void 0;var _8=Sd(),lM="qpzry9x8gf2tvdw0s3jn54khce6mua7l",x8={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};function hM(e){for(var t="",r=0;r<e.length;++r){var n=e[r];(0,_8.validate)(0<=n&&n<32,"Invalid value: "+n+"."),t+=lM[n]}return t}fc.encode=hM;function pM(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;++r){var n=e[r];(0,_8.validate)(n in x8,"Invalid value: "+n+"."),t[r]=x8[n]}return t}fc.decode=pM});var E8=K((nF,Ed)=>{E();P();var br=function(e){"use strict";var t=1e7,r=7,n=9007199254740992,i=f(n),s=Math.log(n);function o(I,N){return typeof I>"u"?o[0]:typeof N<"u"?+N==10?fe(I):tr(I,N):fe(I)}function a(I,N){this.value=I,this.sign=N,this.isSmall=!1}a.prototype=Object.create(o.prototype);function c(I){this.value=I,this.sign=I<0,this.isSmall=!0}c.prototype=Object.create(o.prototype);function u(I){return-n<I&&I<n}function f(I){return I<1e7?[I]:I<1e14?[I%1e7,Math.floor(I/1e7)]:[I%1e7,Math.floor(I/1e7)%1e7,Math.floor(I/1e14)]}function d(I){h(I);var N=I.length;if(N<4&&H(I,i)<0)switch(N){case 0:return 0;case 1:return I[0];case 2:return I[0]+I[1]*t;default:return I[0]+(I[1]+I[2]*t)*t}return I}function h(I){for(var N=I.length;I[--N]===0;);I.length=N+1}function b(I){for(var N=new Array(I),D=-1;++D<I;)N[D]=0;return N}function g(I){return I>0?Math.floor(I):Math.ceil(I)}function y(I,N){var D=I.length,z=N.length,$=new Array(D),V=0,J=t,X,Y;for(Y=0;Y<z;Y++)X=I[Y]+N[Y]+V,V=X>=J?1:0,$[Y]=X-V*J;for(;Y<D;)X=I[Y]+V,V=X===J?1:0,$[Y++]=X-V*J;return V>0&&$.push(V),$}function x(I,N){return I.length>=N.length?y(I,N):y(N,I)}function T(I,N){var D=I.length,z=new Array(D),$=t,V,J;for(J=0;J<D;J++)V=I[J]-$+N,N=Math.floor(V/$),z[J]=V-N*$,N+=1;for(;N>0;)z[J++]=N%$,N=Math.floor(N/$);return z}a.prototype.add=function(I){var N=fe(I);if(this.sign!==N.sign)return this.subtract(N.negate());var D=this.value,z=N.value;return N.isSmall?new a(T(D,Math.abs(z)),this.sign):new a(x(D,z),this.sign)},a.prototype.plus=a.prototype.add,c.prototype.add=function(I){var N=fe(I),D=this.value;if(D<0!==N.sign)return this.subtract(N.negate());var z=N.value;if(N.isSmall){if(u(D+z))return new c(D+z);z=f(Math.abs(z))}return new a(T(z,Math.abs(D)),D<0)},c.prototype.plus=c.prototype.add;function M(I,N){var D=I.length,z=N.length,$=new Array(D),V=0,J=t,X,Y;for(X=0;X<z;X++)Y=I[X]-V-N[X],Y<0?(Y+=J,V=1):V=0,$[X]=Y;for(X=z;X<D;X++){if(Y=I[X]-V,Y<0)Y+=J;else{$[X++]=Y;break}$[X]=Y}for(;X<D;X++)$[X]=I[X];return h($),$}function k(I,N,D){var z;return H(I,N)>=0?z=M(I,N):(z=M(N,I),D=!D),z=d(z),typeof z=="number"?(D&&(z=-z),new c(z)):new a(z,D)}function R(I,N,D){var z=I.length,$=new Array(z),V=-N,J=t,X,Y;for(X=0;X<z;X++)Y=I[X]+V,V=Math.floor(Y/J),Y%=J,$[X]=Y<0?Y+J:Y;return $=d($),typeof $=="number"?(D&&($=-$),new c($)):new a($,D)}a.prototype.subtract=function(I){var N=fe(I);if(this.sign!==N.sign)return this.add(N.negate());var D=this.value,z=N.value;return N.isSmall?R(D,Math.abs(z),this.sign):k(D,z,this.sign)},a.prototype.minus=a.prototype.subtract,c.prototype.subtract=function(I){var N=fe(I),D=this.value;if(D<0!==N.sign)return this.add(N.negate());var z=N.value;return N.isSmall?new c(D-z):R(z,Math.abs(D),D>=0)},c.prototype.minus=c.prototype.subtract,a.prototype.negate=function(){return new a(this.value,!this.sign)},c.prototype.negate=function(){var I=this.sign,N=new c(-this.value);return N.sign=!I,N},a.prototype.abs=function(){return new a(this.value,!1)},c.prototype.abs=function(){return new c(Math.abs(this.value))};function C(I,N){var D=I.length,z=N.length,$=D+z,V=b($),J=t,X,Y,pe,he,ce;for(pe=0;pe<D;++pe){he=I[pe];for(var Qe=0;Qe<z;++Qe)ce=N[Qe],X=he*ce+V[pe+Qe],Y=Math.floor(X/J),V[pe+Qe]=X-Y*J,V[pe+Qe+1]+=Y}return h(V),V}function q(I,N){var D=I.length,z=new Array(D),$=t,V=0,J,X;for(X=0;X<D;X++)J=I[X]*N+V,V=Math.floor(J/$),z[X]=J-V*$;for(;V>0;)z[X++]=V%$,V=Math.floor(V/$);return z}function L(I,N){for(var D=[];N-- >0;)D.push(0);return D.concat(I)}function j(I,N){var D=Math.max(I.length,N.length);if(D<=30)return C(I,N);D=Math.ceil(D/2);var z=I.slice(D),$=I.slice(0,D),V=N.slice(D),J=N.slice(0,D),X=j($,J),Y=j(z,V),pe=j(x($,z),x(J,V)),he=x(x(X,L(M(M(pe,X),Y),D)),L(Y,2*D));return h(he),he}function G(I,N){return-.012*I-.012*N+15e-6*I*N>0}a.prototype.multiply=function(I){var N=fe(I),D=this.value,z=N.value,$=this.sign!==N.sign,V;if(N.isSmall){if(z===0)return o[0];if(z===1)return this;if(z===-1)return this.negate();if(V=Math.abs(z),V<t)return new a(q(D,V),$);z=f(V)}return G(D.length,z.length)?new a(j(D,z),$):new a(C(D,z),$)},a.prototype.times=a.prototype.multiply;function B(I,N,D){return I<t?new a(q(N,I),D):new a(C(N,f(I)),D)}c.prototype._multiplyBySmall=function(I){return u(I.value*this.value)?new c(I.value*this.value):B(Math.abs(I.value),f(Math.abs(this.value)),this.sign!==I.sign)},a.prototype._multiplyBySmall=function(I){return I.value===0?o[0]:I.value===1?this:I.value===-1?this.negate():B(Math.abs(I.value),this.value,this.sign!==I.sign)},c.prototype.multiply=function(I){return fe(I)._multiplyBySmall(this)},c.prototype.times=c.prototype.multiply;function l(I){var N=I.length,D=b(N+N),z=t,$,V,J,X,Y;for(J=0;J<N;J++){X=I[J],V=0-X*X;for(var pe=J;pe<N;pe++)Y=I[pe],$=2*(X*Y)+D[J+pe]+V,V=Math.floor($/z),D[J+pe]=$-V*z;D[J+N]=V}return h(D),D}a.prototype.square=function(){return new a(l(this.value),!1)},c.prototype.square=function(){var I=this.value*this.value;return u(I)?new c(I):new a(l(f(Math.abs(this.value))),!1)};function w(I,N){var D=I.length,z=N.length,$=t,V=b(N.length),J=N[z-1],X=Math.ceil($/(2*J)),Y=q(I,X),pe=q(N,X),he,ce,Qe,Ue,He,As,ht;for(Y.length<=D&&Y.push(0),pe.push(0),J=pe[z-1],ce=D-z;ce>=0;ce--){for(he=$-1,Y[ce+z]!==J&&(he=Math.floor((Y[ce+z]*$+Y[ce+z-1])/J)),Qe=0,Ue=0,As=pe.length,He=0;He<As;He++)Qe+=he*pe[He],ht=Math.floor(Qe/$),Ue+=Y[ce+He]-(Qe-ht*$),Qe=ht,Ue<0?(Y[ce+He]=Ue+$,Ue=-1):(Y[ce+He]=Ue,Ue=0);for(;Ue!==0;){for(he-=1,Qe=0,He=0;He<As;He++)Qe+=Y[ce+He]-$+pe[He],Qe<0?(Y[ce+He]=Qe+$,Qe=0):(Y[ce+He]=Qe,Qe=1);Ue+=Qe}V[ce]=he}return Y=v(Y,X)[0],[d(V),d(Y)]}function _(I,N){for(var D=I.length,z=N.length,$=[],V=[],J=t,X,Y,pe,he,ce;D;){if(V.unshift(I[--D]),h(V),H(V,N)<0){$.push(0);continue}Y=V.length,pe=V[Y-1]*J+V[Y-2],he=N[z-1]*J+N[z-2],Y>z&&(pe=(pe+1)*J),X=Math.ceil(pe/he);do{if(ce=q(N,X),H(ce,V)<=0)break;X--}while(X);$.push(X),V=M(V,ce)}return $.reverse(),[d($),d(V)]}function v(I,N){var D=I.length,z=b(D),$=t,V,J,X,Y;for(X=0,V=D-1;V>=0;--V)Y=X*$+I[V],J=g(Y/N),X=Y-J*N,z[V]=J|0;return[z,X|0]}function S(I,N){var D,z=fe(N),$=I.value,V=z.value,J;if(V===0)throw new Error("Cannot divide by zero");if(I.isSmall)return z.isSmall?[new c(g($/V)),new c($%V)]:[o[0],I];if(z.isSmall){if(V===1)return[I,o[0]];if(V==-1)return[I.negate(),o[0]];var X=Math.abs(V);if(X<t){D=v($,X),J=d(D[0]);var Y=D[1];return I.sign&&(Y=-Y),typeof J=="number"?(I.sign!==z.sign&&(J=-J),[new c(J),new c(Y)]):[new a(J,I.sign!==z.sign),new c(Y)]}V=f(X)}var pe=H($,V);if(pe===-1)return[o[0],I];if(pe===0)return[o[I.sign===z.sign?1:-1],o[0]];$.length+V.length<=200?D=w($,V):D=_($,V),J=D[0];var he=I.sign!==z.sign,ce=D[1],Qe=I.sign;return typeof J=="number"?(he&&(J=-J),J=new c(J)):J=new a(J,he),typeof ce=="number"?(Qe&&(ce=-ce),ce=new c(ce)):ce=new a(ce,Qe),[J,ce]}a.prototype.divmod=function(I){var N=S(this,I);return{quotient:N[0],remainder:N[1]}},c.prototype.divmod=a.prototype.divmod,a.prototype.divide=function(I){return S(this,I)[0]},c.prototype.over=c.prototype.divide=a.prototype.over=a.prototype.divide,a.prototype.mod=function(I){return S(this,I)[1]},c.prototype.remainder=c.prototype.mod=a.prototype.remainder=a.prototype.mod,a.prototype.pow=function(I){var N=fe(I),D=this.value,z=N.value,$,V,J;if(z===0)return o[1];if(D===0)return o[0];if(D===1)return o[1];if(D===-1)return N.isEven()?o[1]:o[-1];if(N.sign)return o[0];if(!N.isSmall)throw new Error("The exponent "+N.toString()+" is too large.");if(this.isSmall&&u($=Math.pow(D,z)))return new c(g($));for(V=this,J=o[1];z&!0&&(J=J.times(V),--z),z!==0;)z/=2,V=V.square();return J},c.prototype.pow=a.prototype.pow,a.prototype.modPow=function(I,N){if(I=fe(I),N=fe(N),N.isZero())throw new Error("Cannot take modPow with modulus 0");for(var D=o[1],z=this.mod(N);I.isPositive();){if(z.isZero())return o[0];I.isOdd()&&(D=D.multiply(z).mod(N)),I=I.divide(2),z=z.square().mod(N)}return D},c.prototype.modPow=a.prototype.modPow;function H(I,N){if(I.length!==N.length)return I.length>N.length?1:-1;for(var D=I.length-1;D>=0;D--)if(I[D]!==N[D])return I[D]>N[D]?1:-1;return 0}a.prototype.compareAbs=function(I){var N=fe(I),D=this.value,z=N.value;return N.isSmall?1:H(D,z)},c.prototype.compareAbs=function(I){var N=fe(I),D=Math.abs(this.value),z=N.value;return N.isSmall?(z=Math.abs(z),D===z?0:D>z?1:-1):-1},a.prototype.compare=function(I){if(I===1/0)return-1;if(I===-1/0)return 1;var N=fe(I),D=this.value,z=N.value;return this.sign!==N.sign?N.sign?1:-1:N.isSmall?this.sign?-1:1:H(D,z)*(this.sign?-1:1)},a.prototype.compareTo=a.prototype.compare,c.prototype.compare=function(I){if(I===1/0)return-1;if(I===-1/0)return 1;var N=fe(I),D=this.value,z=N.value;return N.isSmall?D==z?0:D>z?1:-1:D<0!==N.sign?D<0?-1:1:D<0?1:-1},c.prototype.compareTo=c.prototype.compare,a.prototype.equals=function(I){return this.compare(I)===0},c.prototype.eq=c.prototype.equals=a.prototype.eq=a.prototype.equals,a.prototype.notEquals=function(I){return this.compare(I)!==0},c.prototype.neq=c.prototype.notEquals=a.prototype.neq=a.prototype.notEquals,a.prototype.greater=function(I){return this.compare(I)>0},c.prototype.gt=c.prototype.greater=a.prototype.gt=a.prototype.greater,a.prototype.lesser=function(I){return this.compare(I)<0},c.prototype.lt=c.prototype.lesser=a.prototype.lt=a.prototype.lesser,a.prototype.greaterOrEquals=function(I){return this.compare(I)>=0},c.prototype.geq=c.prototype.greaterOrEquals=a.prototype.geq=a.prototype.greaterOrEquals,a.prototype.lesserOrEquals=function(I){return this.compare(I)<=0},c.prototype.leq=c.prototype.lesserOrEquals=a.prototype.leq=a.prototype.lesserOrEquals,a.prototype.isEven=function(){return(this.value[0]&1)===0},c.prototype.isEven=function(){return(this.value&1)===0},a.prototype.isOdd=function(){return(this.value[0]&1)===1},c.prototype.isOdd=function(){return(this.value&1)===1},a.prototype.isPositive=function(){return!this.sign},c.prototype.isPositive=function(){return this.value>0},a.prototype.isNegative=function(){return this.sign},c.prototype.isNegative=function(){return this.value<0},a.prototype.isUnit=function(){return!1},c.prototype.isUnit=function(){return Math.abs(this.value)===1},a.prototype.isZero=function(){return!1},c.prototype.isZero=function(){return this.value===0},a.prototype.isDivisibleBy=function(I){var N=fe(I),D=N.value;return D===0?!1:D===1?!0:D===2?this.isEven():this.mod(N).equals(o[0])},c.prototype.isDivisibleBy=a.prototype.isDivisibleBy;function U(I){var N=I.abs();if(N.isUnit())return!1;if(N.equals(2)||N.equals(3)||N.equals(5))return!0;if(N.isEven()||N.isDivisibleBy(3)||N.isDivisibleBy(5))return!1;if(N.lesser(49))return!0}function O(I,N){for(var D=I.prev(),z=D,$=0,V,J,X,Y;z.isEven();)z=z.divide(2),$++;e:for(X=0;X<N.length;X++)if(!I.lesser(N[X])&&(Y=br(N[X]).modPow(z,I),!(Y.equals(o[1])||Y.equals(D)))){for(V=$-1;V!=0;V--){if(Y=Y.square().mod(I),Y.isUnit())return!1;if(Y.equals(D))continue e}return!1}return!0}a.prototype.isPrime=function(I){var N=U(this);if(N!==e)return N;var D=this.abs(),z=D.bitLength();if(z<=64)return O(D,[2,325,9375,28178,450775,9780504,1795265022]);for(var $=Math.log(2)*z,V=Math.ceil(I===!0?2*Math.pow($,2):$),J=[],X=0;X<V;X++)J.push(br(X+2));return O(D,J)},c.prototype.isPrime=a.prototype.isPrime,a.prototype.isProbablePrime=function(I){var N=U(this);if(N!==e)return N;for(var D=this.abs(),z=I===e?5:I,$=[],V=0;V<z;V++)$.push(br.randBetween(2,D.minus(2)));return O(D,$)},c.prototype.isProbablePrime=a.prototype.isProbablePrime,a.prototype.modInv=function(I){for(var N=br.zero,D=br.one,z=fe(I),$=this.abs(),V,J,X;!$.equals(br.zero);)V=z.divide($),J=N,X=z,N=D,z=$,D=J.subtract(V.multiply(D)),$=X.subtract(V.multiply($));if(!z.equals(1))throw new Error(this.toString()+" and "+I.toString()+" are not co-prime");return N.compare(0)===-1&&(N=N.add(I)),this.isNegative()?N.negate():N},c.prototype.modInv=a.prototype.modInv,a.prototype.next=function(){var I=this.value;return this.sign?R(I,1,this.sign):new a(T(I,1),this.sign)},c.prototype.next=function(){var I=this.value;return I+1<n?new c(I+1):new a(i,!1)},a.prototype.prev=function(){var I=this.value;return this.sign?new a(T(I,1),!0):R(I,1,this.sign)},c.prototype.prev=function(){var I=this.value;return I-1>-n?new c(I-1):new a(i,!0)};for(var p=[1];2*p[p.length-1]<=t;)p.push(2*p[p.length-1]);var A=p.length,F=p[A-1];function W(I){return(typeof I=="number"||typeof I=="string")&&+Math.abs(I)<=t||I instanceof a&&I.value.length<=1}a.prototype.shiftLeft=function(I){if(!W(I))throw new Error(String(I)+" is too large for shifting.");if(I=+I,I<0)return this.shiftRight(-I);var N=this;if(N.isZero())return N;for(;I>=A;)N=N.multiply(F),I-=A-1;return N.multiply(p[I])},c.prototype.shiftLeft=a.prototype.shiftLeft,a.prototype.shiftRight=function(I){var N;if(!W(I))throw new Error(String(I)+" is too large for shifting.");if(I=+I,I<0)return this.shiftLeft(-I);for(var D=this;I>=A;){if(D.isZero()||D.isNegative()&&D.isUnit())return D;N=S(D,F),D=N[1].isNegative()?N[0].prev():N[0],I-=A-1}return N=S(D,p[I]),N[1].isNegative()?N[0].prev():N[0]},c.prototype.shiftRight=a.prototype.shiftRight;function Z(I,N,D){N=fe(N);for(var z=I.isNegative(),$=N.isNegative(),V=z?I.not():I,J=$?N.not():N,X=0,Y=0,pe=null,he=null,ce=[];!V.isZero()||!J.isZero();)pe=S(V,F),X=pe[1].toJSNumber(),z&&(X=F-1-X),he=S(J,F),Y=he[1].toJSNumber(),$&&(Y=F-1-Y),V=pe[0],J=he[0],ce.push(D(X,Y));for(var Qe=D(z?1:0,$?1:0)!==0?br(-1):br(0),Ue=ce.length-1;Ue>=0;Ue-=1)Qe=Qe.multiply(F).add(br(ce[Ue]));return Qe}a.prototype.not=function(){return this.negate().prev()},c.prototype.not=a.prototype.not,a.prototype.and=function(I){return Z(this,I,function(N,D){return N&D})},c.prototype.and=a.prototype.and,a.prototype.or=function(I){return Z(this,I,function(N,D){return N|D})},c.prototype.or=a.prototype.or,a.prototype.xor=function(I){return Z(this,I,function(N,D){return N^D})},c.prototype.xor=a.prototype.xor;var Q=1<<30,te=(t&-t)*(t&-t)|Q;function ee(I){var N=I.value,D=typeof N=="number"?N|Q:N[0]+N[1]*t|te;return D&-D}function it(I,N){if(N.compareTo(I)<=0){var D=it(I,N.square(N)),z=D.p,$=D.e,V=z.multiply(N);return V.compareTo(I)<=0?{p:V,e:$*2+1}:{p:z,e:$*2}}return{p:br(1),e:0}}a.prototype.bitLength=function(){var I=this;return I.compareTo(br(0))<0&&(I=I.negate().subtract(br(1))),I.compareTo(br(0))===0?br(0):br(it(I,br(2)).e).add(br(1))},c.prototype.bitLength=a.prototype.bitLength;function Ie(I,N){return I=fe(I),N=fe(N),I.greater(N)?I:N}function Be(I,N){return I=fe(I),N=fe(N),I.lesser(N)?I:N}function Pr(I,N){if(I=fe(I).abs(),N=fe(N).abs(),I.equals(N))return I;if(I.isZero())return N;if(N.isZero())return I;for(var D=o[1],z,$;I.isEven()&&N.isEven();)z=Math.min(ee(I),ee(N)),I=I.divide(z),N=N.divide(z),D=D.multiply(z);for(;I.isEven();)I=I.divide(ee(I));do{for(;N.isEven();)N=N.divide(ee(N));I.greater(N)&&($=N,N=I,I=$),N=N.subtract(I)}while(!N.isZero());return D.isUnit()?I:I.multiply(D)}function Ne(I,N){return I=fe(I).abs(),N=fe(N).abs(),I.divide(Pr(I,N)).multiply(N)}function _e(I,N){I=fe(I),N=fe(N);var D=Be(I,N),z=Ie(I,N),$=z.subtract(D).add(1);if($.isSmall)return D.add(Math.floor(Math.random()*$));for(var V=$.value.length-1,J=[],X=!0,Y=V;Y>=0;Y--){var pe=X?$.value[Y]:t,he=g(Math.random()*pe);J.unshift(he),he<pe&&(X=!1)}return J=d(J),D.add(typeof J=="number"?new c(J):new a(J,!1))}var tr=function(I,N){for(var D=I.length,z,$=Math.abs(N),z=0;z<D;z++){var V=I[z].toLowerCase();if(V!=="-"&&/[a-z0-9]/.test(V)){if(/[0-9]/.test(V)&&+V>=$){if(V==="1"&&$===1)continue;throw new Error(V+" is not a valid digit in base "+N+".")}else if(V.charCodeAt(0)-87>=$)throw new Error(V+" is not a valid digit in base "+N+".")}}if(2<=N&&N<=36&&D<=s/Math.log(N)){var J=parseInt(I,N);if(isNaN(J))throw new Error(V+" is not a valid digit in base "+N+".");return new c(parseInt(I,N))}N=fe(N);var X=[],Y=I[0]==="-";for(z=Y?1:0;z<I.length;z++){var V=I[z].toLowerCase(),pe=V.charCodeAt(0);if(48<=pe&&pe<=57)X.push(fe(V));else if(97<=pe&&pe<=122)X.push(fe(V.charCodeAt(0)-87));else if(V==="<"){var he=z;do z++;while(I[z]!==">");X.push(fe(I.slice(he+1,z)))}else throw new Error(V+" is not a valid character")}return qe(X,N,Y)};function qe(I,N,D){var z=o[0],$=o[1],V;for(V=I.length-1;V>=0;V--)z=z.add(I[V].times($)),$=$.times(N);return D?z.negate():z}function ot(I){return I<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(I):"<"+I+">"}function sn(I,N){if(N=br(N),N.isZero()){if(I.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(N.equals(-1)){if(I.isZero())return{value:[0],isNegative:!1};if(I.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-I)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var D=Array.apply(null,Array(+I-1)).map(Array.prototype.valueOf,[0,1]);return D.unshift([1]),{value:[].concat.apply([],D),isNegative:!1}}var z=!1;if(I.isNegative()&&N.isPositive()&&(z=!0,I=I.abs()),N.equals(1))return I.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+I)).map(Number.prototype.valueOf,1),isNegative:z};for(var $=[],V=I,J;V.isNegative()||V.compareAbs(N)>=0;){J=V.divmod(N),V=J.quotient;var X=J.remainder;X.isNegative()&&(X=N.minus(X).abs(),V=V.next()),$.push(X.toJSNumber())}return $.push(V.toJSNumber()),{value:$.reverse(),isNegative:z}}function lt(I,N){var D=sn(I,N);return(D.isNegative?"-":"")+D.value.map(ot).join("")}a.prototype.toArray=function(I){return sn(this,I)},c.prototype.toArray=function(I){return sn(this,I)},a.prototype.toString=function(I){if(I===e&&(I=10),I!==10)return lt(this,I);for(var N=this.value,D=N.length,z=String(N[--D]),$="0000000",V;--D>=0;)V=String(N[D]),z+=$.slice(V.length)+V;var J=this.sign?"-":"";return J+z},c.prototype.toString=function(I){return I===e&&(I=10),I!=10?lt(this,I):String(this.value)},a.prototype.toJSON=c.prototype.toJSON=function(){return this.toString()},a.prototype.valueOf=function(){return parseInt(this.toString(),10)},a.prototype.toJSNumber=a.prototype.valueOf,c.prototype.valueOf=function(){return this.value},c.prototype.toJSNumber=c.prototype.valueOf;function ct(I){if(u(+I)){var N=+I;if(N===g(N))return new c(N);throw new Error("Invalid integer: "+I)}var D=I[0]==="-";D&&(I=I.slice(1));var z=I.split(/e/i);if(z.length>2)throw new Error("Invalid integer: "+z.join("e"));if(z.length===2){var $=z[1];if($[0]==="+"&&($=$.slice(1)),$=+$,$!==g($)||!u($))throw new Error("Invalid integer: "+$+" is not a valid exponent.");var V=z[0],J=V.indexOf(".");if(J>=0&&($-=V.length-J-1,V=V.slice(0,J)+V.slice(J+1)),$<0)throw new Error("Cannot include negative exponent part for integers");V+=new Array($+1).join("0"),I=V}var X=/^([0-9][0-9]*)$/.test(I);if(!X)throw new Error("Invalid integer: "+I);for(var Y=[],pe=I.length,he=r,ce=pe-he;pe>0;)Y.push(+I.slice(ce,pe)),ce-=he,ce<0&&(ce=0),pe-=he;return h(Y),new a(Y,D)}function Vr(I){if(u(I)){if(I!==g(I))throw new Error(I+" is not an integer.");return new c(I)}return ct(I.toString())}function fe(I){return typeof I=="number"?Vr(I):typeof I=="string"?ct(I):I}for(var Re=0;Re<1e3;Re++)o[Re]=new c(Re),Re>0&&(o[-Re]=new c(-Re));return o.one=o[1],o.zero=o[0],o.minusOne=o[-1],o.max=Ie,o.min=Be,o.gcd=Pr,o.lcm=Ne,o.isInstance=function(I){return I instanceof a||I instanceof c},o.randBetween=_e,o.fromArray=function(I,N,D){return qe(I.map(fe),fe(N||10),D)},o}();typeof Ed<"u"&&Ed.hasOwnProperty("exports")&&(Ed.exports=br);typeof define=="function"&&define.amd&&define("big-integer",[],function(){return br})});var T8=K(Pd=>{"use strict";E();P();Object.defineProperty(Pd,"__esModule",{value:!0});Pd.convert=void 0;var P8=Sd();function bM(e,t,r,n){for(var i=n?Math.floor(e.length*t/r):Math.ceil(e.length*t/r),s=(1<<r)-1,o=new Uint8Array(i),a=0,c=0,u=0,f=0;f<e.length;++f){var d=e[f];for((0,P8.validate)(0<=d&&d>>t===0,"Invalid value: "+d+"."),c=c<<t|d,u+=t;u>=r;)u-=r,o[a]=c>>u&s,++a}return n?(0,P8.validate)(u<t&&(c<<r-u&s)===0,"Input cannot be converted to "+r+" bits without padding, but strict mode was used."):u>0&&(o[a]=c<<r-u&s,++a),o}Pd.convert=bM});var H8=K(di=>{"use strict";E();P();var gM=di&&di.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),yM=di&&di.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),A8=di&&di.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&gM(t,e,r);return yM(t,e),t};Object.defineProperty(di,"__esModule",{value:!0});di.decode=di.encode=void 0;var I8=A8(S8()),vM=E8(),O8=A8(T8()),Jp=Sd();function mM(e,t,r){let n=ca(B8(e),new Uint8Array(1)),i=_M(t)+EM(r),s=TM(ca(new Uint8Array([i]),r)),o=ca(ca(n,s),new Uint8Array(8)),a=ca(s,xM(M8(o)));return e+":"+I8.encode(a)}di.encode=mM;function wM(e){let t=e.toLowerCase().split(":");(0,Jp.validate)(t.length===2,"Missing prefix: "+e+".");let r=t[0],n=I8.decode(t[1]);(0,Jp.validate)(IM(r,n),"Invalid checksum: "+e+".");let i=AM(n.subarray(0,-8)),s=i[0],o=i.subarray(1);(0,Jp.validate)(PM(s)===o.length*8,"Invalid hash size: "+e+".");let a=SM(s);return{prefix:r,type:a,hash:o}}di.decode=wM;function B8(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;++r)t[r]=e[r].charCodeAt(0)&31;return t}function xM(e){for(var t=new Uint8Array(8),r=0;r<8;++r)t[7-r]=e.and(31).toJSNumber(),e=e.shiftRight(5);return t}function _M(e){switch(e){case"P2PKH":return 0;case"P2SH":return 8;default:throw new Error("Invalid type: "+e+".")}}function SM(e){switch(e&120){case 0:return"P2PKH";case 8:return"P2SH";default:throw new Error("Invalid address type in version byte: "+e+".")}}function EM(e){switch(e.length*8){case 160:return 0;case 192:return 1;case 224:return 2;case 256:return 3;case 320:return 4;case 384:return 5;case 448:return 6;case 512:return 7;default:throw new Error("Invalid hash size: "+e.length+".")}}function PM(e){switch(e&7){case 0:return 160;case 1:return 192;case 2:return 224;case 3:return 256;case 4:return 320;case 5:return 384;case 6:return 448;case 7:return 512}}function TM(e){return O8.convert(e,8,5,!1)}function AM(e){return O8.convert(e,5,8,!0)}function ca(e,t){var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function M8(e){for(var t=[656907472481,522768456162,0xf33e5fb3c4,748107326120,130178868336],r=vM(1),n=0;n<e.length;++n){var i=e[n],s=r.shiftRight(35);r=r.and(34359738367).shiftLeft(5).xor(i);for(var o=0;o<t.length;++o)s.shiftRight(o).and(1).equals(1)&&(r=r.xor(t[o]))}return r.xor(1)}function IM(e,t){var r=ca(B8(e),new Uint8Array(1)),n=ca(r,t);return M8(n).equals(0)}});var q8=K(gr=>{"use strict";E();P();var OM=gr&&gr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),BM=gr&&gr.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),N8=gr&&gr.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&OM(t,e,r);return BM(t,e),t};Object.defineProperty(gr,"__esModule",{value:!0});gr.convert2LegacyAddress=gr.isCashAddress=gr.ValidateBitcashP2PkHAddress=gr.GetBitcashP2PkHAddressByPublicKey=gr.GetBitcashAddressByPublicKey=gr.GetBitcashAddressByHash=void 0;var C8=cn(),Td=N8(H8()),k8=N8(yo());function Qp(e,t,r){return Td.encode(e,t,r)}gr.GetBitcashAddressByHash=Qp;function MM(e,t,r){let n=(0,C8.hash160)(m.Buffer.from(r));return Qp(e,t,n)}gr.GetBitcashAddressByPublicKey=MM;function HM(e){let t=(0,C8.hash160)(m.Buffer.from(e));return Qp("bitcoincash","P2PKH",t)}gr.GetBitcashP2PkHAddressByPublicKey=HM;function kM(e){try{e.indexOf(":")===-1&&(e="bitcoincash:"+e);let{prefix:t,type:r,hash:n}=Td.decode(e);return r==="P2PKH"&&n.length===20}catch{return!1}}gr.ValidateBitcashP2PkHAddress=kM;function NM(e){try{return e.startsWith("bitcoincash:")||(e="bitcoincash:"+e,Td.decode(e)),!0}catch{return!1}}gr.isCashAddress=NM;function CM(e,t){e.indexOf(":")===-1&&(e="bitcoincash:"+e);let{type:r,hash:n}=Td.decode(e);if(r=="P2PKH")return k8.p2pkh({hash:m.Buffer.from(n),network:t}).address;if(r=="P2SH")return k8.p2sh({hash:m.Buffer.from(n),network:t}).address;throw new Error("convert2LegacyAddress error")}gr.convert2LegacyAddress=CM});var U8=K(R8=>{"use strict";E();P();Object.defineProperty(R8,"__esModule",{value:!0})});var F8=K(li=>{"use strict";E();P();var qM=li&&li.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),RM=li&&li.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e1=li&&li.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&qM(t,e,r);return RM(t,e),t};Object.defineProperty(li,"__esModule",{value:!0});li.srcInscribe=li.SrcInscriptionTool=void 0;var tn=e1(fi()),ua=ft(),UM=e1(ra()),LM=e1(cn()),Su=os(),jM=fi(),L8=vd(),DM=ua.signUtil.schnorr.secp256k1.schnorr,KM=2,j8=31,FM=4294967293,WM=7800,zM=7800,vF=4e6/10,dc=class{constructor(){this.network=tn.networks.bitcoin,this.revealTxs=[],this.commitTx=new tn.Transaction,this.commitTxPrevOutputFetcher=[],this.revealTxPrevOutputFetcher=[],this.mustCommitTxFee=0,this.mustRevealTxFees=[],this.commitAddrs=[]}static newSrcInscriptionTool(t,r){let n=new dc;n.network=t;let i=r.revealOutValue||WM,s=r.minChangeValue||zM;return n.buildCommitTx(t,r.inscriptionData,i,r.commitTxPrevOutputList,r.changeAddress,r.commitFeeRate,s)||n.signCommitTx(r.commitTxPrevOutputList),n}buildCommitTx(t,r,n,i,s,o,a){let c=m.Buffer.from(r.contentType),u=m.Buffer.from(r.body);for(;u[u.length-1]==0;)u=u.slice(0,u.length-1);let f=2+c.length+u.length,d=f%62==0?f:f+62-f%62,h=jM.BufferWriter.withCapacity(d);h.writeSlice(m.Buffer.from([(c.length+u.length)/256,(c.length+u.length)%256])),h.writeSlice(c),h.writeSlice(u),d>f&&h.writeSlice(m.Buffer.alloc(d-f));let b=h.end(),g=ua.base.fromHex(XM(i[0].txId,b.toString("hex"))),y=0,x=0,T=new tn.Transaction;for(T.version=KM,x+=n,T.addOutput(tn.address.toOutputScript(r.revealAddr,t),n);g.length;){let L=g.slice(0,Math.min(j8,g.length)),j=L.toString("hex");j.length<62&&(j=j+"0".repeat(62-j.length)),g=g.slice(L.length);let B=g.slice(0,Math.min(j8,g.length)).toString("hex");B.length<62&&(B=B+"0".repeat(62-B.length)),g=g.slice(L.length);let l=["03"+j+"00","02"+B+"00","020202020202020202020202020202020202020202020202020202020202020202"].map(_=>m.Buffer.from(_,"hex")),w=tn.payments.p2ms({m:1,pubkeys:l});T.addOutput(w.output,n),x+=n}i.forEach(L=>{let j=ua.base.reverseBuffer(ua.base.fromHex(L.txId));T.addInput(j,L.vOut,FM),this.commitTxPrevOutputFetcher.push(L.amount),y+=L.amount});let M=tn.address.toOutputScript(s,t);T.addOutput(M,0);let k=T.clone();D8(k,i,this.network);let R=(0,L8.countAdjustedVsize)(k,i.map(L=>L.address),t),C=Math.floor(R*o),q=y-x-C;if(q>=a)T.outs[T.outs.length-1].value=q;else{T.outs=T.outs.slice(0,T.outs.length-1),k.outs=k.outs.slice(0,k.outs.length-1);let L=(0,L8.countAdjustedVsize)(k,i.map(G=>G.address),t),j=Math.floor(L*o);if(y-x-j<0)return this.mustCommitTxFee=C,!0}return this.commitTx=T,!1}signCommitTx(t){D8(this.commitTx,t,this.network)}calculateFee(){let t=0;this.commitTx.ins.forEach((n,i)=>{t+=this.commitTxPrevOutputFetcher[i]}),this.commitTx.outs.forEach(n=>{t-=n.value});let r=[];return this.revealTxs.forEach((n,i)=>{let s=0;s+=this.revealTxPrevOutputFetcher[i],s-=n.outs[0].value,r.push(s)}),{commitTxFee:t,revealTxFees:r}}};li.SrcInscriptionTool=dc;function D8(e,t,r){e.ins.forEach((n,i)=>{let s=(0,Su.getAddressType)(t[i].address,r),o=ua.base.fromHex((0,Su.privateKeyFromWIF)(t[i].privateKey,r)),a=ua.base.toHex(o),c=(0,Su.private2public)(a);if(s==="segwit_taproot"){let u=t.map(g=>tn.address.toOutputScript(g.address,r)),f=t.map(g=>g.amount),d=e.hashForWitnessV1(i,u,f,tn.Transaction.SIGHASH_DEFAULT),h=UM.taprootTweakPrivKey(o),b=m.Buffer.from(DM.sign(d,h,ua.base.randomBytes(32)));n.witness=[m.Buffer.from(b)]}else if(s==="legacy"){let u=tn.address.toOutputScript(t[i].address,r),f=e.hashForSignature(i,u,tn.Transaction.SIGHASH_ALL),d=(0,Su.sign)(f,a),h=tn.payments.p2pkh({signature:tn.script.signature.encode(d,tn.Transaction.SIGHASH_ALL),pubkey:c});n.script=h.input}else{let u=LM.hash160(c),f=m.Buffer.of(25,118,169,20,...u,136,172),d=t[i].amount,h=e.hashForWitness(i,f,d,tn.Transaction.SIGHASH_ALL),b=(0,Su.sign)(h,a);n.witness=[tn.script.signature.encode(b,tn.Transaction.SIGHASH_ALL),c];let g=m.Buffer.of(22,0,20,...u);s==="segwit_nested"&&(n.script=g)}})}function VM(e,t){let r=dc.newSrcInscriptionTool(e,t);return r.mustCommitTxFee>0?{commitTx:"",revealTxs:[],commitTxFee:r.mustCommitTxFee,revealTxFees:r.mustRevealTxFees,commitAddrs:r.commitAddrs}:{commitTx:r.commitTx.toHex(),revealTxs:r.revealTxs.map(n=>n.toHex()),...r.calculateFee(),commitAddrs:r.commitAddrs}}li.srcInscribe=VM;function GM(e,t){for(var r=[],n=0,i,s="",o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)n=(n+r[o]+e.charCodeAt(o%e.length))%256,i=r[o],r[o]=r[n],r[n]=i;o=0,n=0;for(var a=0;a<t.length;a++)o=(o+1)%256,n=(n+r[o])%256,i=r[o],r[o]=r[n],r[n]=i,s+=String.fromCharCode(t.charCodeAt(a)^r[(r[o]+r[n])%256]);return s}function K8(e){for(var t=[],r,n=0;n<e.length-1;n+=2){var i=parseInt(e.substr(n,2),16);t.push(i)}return r=String.fromCharCode.apply(String,t),r}function $M(e){var t,r,n="",i;for(e+="",t=0,r=e.length;t<r;t++)i=e.charCodeAt(t).toString(16),n+=i.length<2?"0"+i:i;return n}function XM(e,t){return $M(GM(K8(e),K8(t)))}});var Z8=K(rn=>{"use strict";E();P();var YM=rn&&rn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ZM=rn&&rn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n1=rn&&rn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&YM(t,e,r);return ZM(t,e),t};Object.defineProperty(rn,"__esModule",{value:!0});rn.inscribeForMPCSigned=rn.inscribeForMPCUnsigned=rn.inscribe=rn.InscriptionTool=void 0;var Se=n1(fi()),Tn=ft(),JM=n1(ra()),z8=n1(cn()),V8=na(),fa=os(),t1=oa(),Ad=vd(),i1=Tn.signUtil.schnorr.secp256k1.schnorr,Id=2,Od=4294967293,G8=546,$8=546,W8=4e6/10,lc=class{constructor(){this.network=Se.networks.bitcoin,this.inscriptionTxCtxDataList=[],this.revealTxs=[],this.commitTx=new Se.Transaction,this.commitTxPrevOutputFetcher=[],this.revealTxPrevOutputFetcher=[],this.mustCommitTxFee=0,this.mustRevealTxFees=[],this.commitAddrs=[]}static newInscriptionTool(t,r){let n=new lc;n.network=t;let i=r.revealOutValue||G8,s=r.minChangeValue||$8,o=r.commitTxPrevOutputList[0].privateKey;r.inscriptionDataList.forEach(u=>{n.inscriptionTxCtxDataList.push(X8(t,u,o))});let a=n.buildEmptyRevealTx(t,i,r.revealFeeRate);return n.buildCommitTx(t,r.commitTxPrevOutputList,r.changeAddress,a,r.commitFeeRate,s)||(n.signCommitTx(r.commitTxPrevOutputList),n.completeRevealTx()),n}buildEmptyRevealTx(t,r,n){let i=0,s=[],o=[],a=[];return this.inscriptionTxCtxDataList.forEach((c,u)=>{let f=new Se.Transaction;f.version=Id,f.addInput(m.Buffer.alloc(32),u,Od),f.addOutput(c.revealPkScript,r);let d=m.Buffer.alloc(64),h=m.Buffer.alloc(33),b=[];b.push(d),b.push(c.inscriptionScript),b.push(h);let g=Math.floor((f.byteLength()+Math.floor(((0,V8.vectorSize)(b)+2+3)/4))*n),y=r+g;c.revealTxPrevOutput={pkScript:c.commitTxAddressPkScript,value:y},i+=y,s.push(f),o.push(g),a.push(c.commitTxAddress)}),this.revealTxs=s,this.mustRevealTxFees=o,this.commitAddrs=a,i}buildCommitTx(t,r,n,i,s,o){let a=0,c=new Se.Transaction;c.version=Id,r.forEach(g=>{let y=Tn.base.reverseBuffer(Tn.base.fromHex(g.txId));c.addInput(y,g.vOut,Od),this.commitTxPrevOutputFetcher.push(g.amount),a+=g.amount}),this.inscriptionTxCtxDataList.forEach(g=>{c.addOutput(g.revealTxPrevOutput.pkScript,g.revealTxPrevOutput.value)});let u=Se.address.toOutputScript(n,t);c.addOutput(u,0);let f=c.clone();r1(f,r,this.network);let d=(0,Ad.countAdjustedVsize)(f,r.map(g=>g.address),t),h=Math.floor(d*s),b=a-i-h;if(b>=o)c.outs[c.outs.length-1].value=b;else{c.outs=c.outs.slice(0,c.outs.length-1),f.outs=f.outs.slice(0,f.outs.length-1);let g=(0,Ad.countAdjustedVsize)(f,r.map(x=>x.address),t),y=Math.floor(g*s);if(a-i-y<0)return this.mustCommitTxFee=h,!0}return this.commitTx=c,!1}signCommitTx(t){r1(this.commitTx,t,this.network)}completeRevealTx(){this.revealTxs.forEach((t,r)=>{t.ins[0].hash=this.commitTx.getHash();let n=[this.inscriptionTxCtxDataList[r].revealTxPrevOutput.pkScript],i=[this.inscriptionTxCtxDataList[r].revealTxPrevOutput.value];this.revealTxPrevOutputFetcher.push(this.inscriptionTxCtxDataList[r].revealTxPrevOutput.value);let s=t.hashForWitnessV1(0,n,i,Se.Transaction.SIGHASH_DEFAULT,this.inscriptionTxCtxDataList[r].hash),o=m.Buffer.from(i1.sign(s,this.inscriptionTxCtxDataList[r].privateKey,Tn.base.randomBytes(32)));t.ins[0].witness=[m.Buffer.from(o),...this.inscriptionTxCtxDataList[r].witness];let a=t.weight();if(a>W8)throw new Error(`reveal(index ${r}) transaction weight greater than ${W8} (MAX_STANDARD_TX_WEIGHT): ${a}`)})}calculateFee(){let t=0;this.commitTx.ins.forEach((n,i)=>{t+=this.commitTxPrevOutputFetcher[i]}),this.commitTx.outs.forEach(n=>{t-=n.value});let r=[];return this.revealTxs.forEach((n,i)=>{let s=0;s+=this.revealTxPrevOutputFetcher[i],s-=n.outs[0].value,r.push(s)}),{commitTxFee:t,revealTxFees:r}}};rn.InscriptionTool=lc;function r1(e,t,r){e.ins.forEach((n,i)=>{let s=(0,fa.getAddressType)(t[i].address,r),o=Tn.base.fromHex((0,fa.privateKeyFromWIF)(t[i].privateKey,r)),a=Tn.base.toHex(o),c=(0,fa.private2public)(a);if(s==="segwit_taproot"){let u=t.map(g=>Se.address.toOutputScript(g.address,r)),f=t.map(g=>g.amount),d=e.hashForWitnessV1(i,u,f,Se.Transaction.SIGHASH_DEFAULT),h=JM.taprootTweakPrivKey(o),b=m.Buffer.from(i1.sign(d,h,Tn.base.randomBytes(32)));n.witness=[m.Buffer.from(b)]}else if(s==="legacy"){let u=Se.address.toOutputScript(t[i].address,r),f=e.hashForSignature(i,u,Se.Transaction.SIGHASH_ALL),d=(0,fa.sign)(f,a),h=Se.payments.p2pkh({signature:Se.script.signature.encode(d,Se.Transaction.SIGHASH_ALL),pubkey:c});n.script=h.input}else{let u=z8.hash160(c),f=m.Buffer.of(25,118,169,20,...u,136,172),d=t[i].amount,h=e.hashForWitness(i,f,d,Se.Transaction.SIGHASH_ALL),b=(0,fa.sign)(h,a);n.witness=[Se.script.signature.encode(b,Se.Transaction.SIGHASH_ALL),c];let g=m.Buffer.of(22,0,20,...u);s==="segwit_nested"&&(n.script=g)}})}function X8(e,t,r){let n=Tn.base.fromHex((0,fa.privateKeyFromWIF)(r,e)),i=(0,fa.wif2Public)(r,e).slice(1),s=Se.script.OPS,o=[];o.push(i),o.push(s.OP_CHECKSIG),o.push(s.OP_FALSE),o.push(s.OP_IF),o.push(m.Buffer.from("ord")),o.push(s.OP_DATA_1),o.push(s.OP_DATA_1),o.push(m.Buffer.from(t.contentType)),o.push(s.OP_0);let a=520,c=m.Buffer.from(t.body),u=c.length;for(let T=0;T<u;T+=a){let M=T+a;M>u&&(M=u),o.push(c.slice(T,M))}o.push(s.OP_ENDIF);let f=Se.script.compile(o),d={output:f},h={output:f,redeemVersion:192},{output:b,witness:g,hash:y,address:x}=Se.payments.p2tr({internalPubkey:i,scriptTree:d,redeem:h,network:e});return{privateKey:n,inscriptionScript:f,commitTxAddress:x,commitTxAddressPkScript:b,witness:g,hash:y,revealTxPrevOutput:{pkScript:m.Buffer.alloc(0),value:0},revealPkScript:Se.address.toOutputScript(t.revealAddr,e)}}function QM(e,t){let r=lc.newInscriptionTool(e,t);return r.mustCommitTxFee>0?{commitTx:"",revealTxs:[],commitTxFee:r.mustCommitTxFee,revealTxFees:r.mustRevealTxFees,commitAddrs:r.commitAddrs}:{commitTx:r.commitTx.toHex(),revealTxs:r.revealTxs.map(n=>n.toHex()),...r.calculateFee(),commitAddrs:r.commitAddrs}}rn.inscribe=QM;function Y8(e,t,r,n){let i=e.commitTxPrevOutputList[0].privateKey,s=[];e.inscriptionDataList.forEach(C=>{s.push(X8(t,C,i))});let o=0,a=e.revealOutValue||G8,c=[];s.forEach((C,q)=>{let L=new Se.Transaction;L.version=Id,L.addInput(m.Buffer.alloc(32),q,Od),L.addOutput(C.revealPkScript,a),c.push(L);let j=m.Buffer.alloc(64),G=m.Buffer.alloc(33),B=[];B.push(j),B.push(C.inscriptionScript),B.push(G);let l=Math.floor((L.byteLength()+Math.floor(((0,V8.vectorSize)(B)+2+3)/4))*e.revealFeeRate),w=a+l;C.revealTxPrevOutput={pkScript:C.commitTxAddressPkScript,value:w},o+=w});let u=0,f=new Se.Transaction;f.version=Id,e.commitTxPrevOutputList.forEach(C=>{f.addInput(Tn.base.reverseBuffer(Tn.base.fromHex(C.txId)),C.vOut,Od),u+=C.amount});let d=[];s.forEach(C=>{f.addOutput(C.revealTxPrevOutput.pkScript,C.revealTxPrevOutput.value),d.push(C.commitTxAddress)});let h=Se.address.toOutputScript(e.changeAddress,t);f.addOutput(h,0);let b=f.clone();r1(b,e.commitTxPrevOutputList,t);let g=(0,Ad.countAdjustedVsize)(b,e.commitTxPrevOutputList.map(C=>C.address),t),y=Math.floor(g*e.commitFeeRate),x=u-o-y;if(x>=(e.minChangeValue||$8))f.outs[f.outs.length-1].value=x;else{f.outs=f.outs.slice(0,f.outs.length-1),b.outs=b.outs.slice(0,b.outs.length-1);let C=(0,Ad.countAdjustedVsize)(b,e.commitTxPrevOutputList.map(L=>L.address),t),q=Math.floor(C*e.commitFeeRate);if(u-o-q<0)throw new Error("insufficient balance")}let T=tH(f,e.commitTxPrevOutputList,t),M=f.getHash();n&&(M=n),c.forEach((C,q)=>{C.ins[0].hash=M;let L=[s[q].revealTxPrevOutput.pkScript],j=[s[q].revealTxPrevOutput.value],G=C.hashForWitnessV1(0,L,j,Se.Transaction.SIGHASH_DEFAULT,s[q].hash),B=m.Buffer.from(i1.sign(G,s[q].privateKey,Tn.base.randomBytes(32)));C.ins[0].witness=[B,...s[q].witness]});let k=0;f.ins.forEach((C,q)=>{k+=e.commitTxPrevOutputList[q].amount}),f.outs.forEach(C=>{k-=C.value});let R=[];return c.forEach((C,q)=>{let L=0;L+=s[q].revealTxPrevOutput.value,L-=C.outs[0].value,R.push(L)}),{signHashList:T,commitTx:f.toHex(),revealTxs:c.map(C=>C.toHex()),commitTxFee:k,revealTxFees:R,commitAddrs:d}}rn.inscribeForMPCUnsigned=Y8;function eH(e,t){let r=e.commitTx,n=e.signatureList,i=Se.Transaction.fromHex(r),s=i.getHash();i.ins.forEach((c,u)=>{let f=Tn.base.fromHex(n[u]);c.witness?c.witness[0]=Se.script.signature.encode(f,Se.Transaction.SIGHASH_ALL):c.script=Se.payments.p2pkh({pubkey:Se.payments.p2pkh({input:c.script}).pubkey,signature:Se.script.signature.encode(f,Se.Transaction.SIGHASH_ALL)}).input});let o=i.getHash(),a=Y8(e,t,s,o);return{signHashList:null,commitTx:i.toHex(),revealTxs:a.revealTxs,commitTxFee:a.commitTxFee,revealTxFees:a.revealTxFees,commitAddrs:a.commitAddrs}}rn.inscribeForMPCSigned=eH;function tH(e,t,r){let n=[];return e.ins.forEach((i,s)=>{let o=Tn.base.fromHex(t[s].publicKey),a=Se.address.toOutputScript(t[s].address,r),c=m.Buffer.alloc(64,0),u;if((0,t1.isP2TR)(a)){let f=t.map(h=>Se.address.toOutputScript(h.address,r)),d=t.map(h=>h.amount);u=e.hashForWitnessV1(s,f,d,Se.Transaction.SIGHASH_DEFAULT),i.witness=[c]}else if((0,t1.isP2PKH)(a)){let f=Se.address.toOutputScript(t[s].address,r);u=e.hashForSignature(s,f,Se.Transaction.SIGHASH_ALL),i.script=Se.payments.p2pkh({pubkey:o,signature:Se.script.signature.encode(c,Se.Transaction.SIGHASH_ALL)}).input}else{let f=z8.hash160(o),d=m.Buffer.of(25,118,169,20,...f,136,172);u=e.hashForWitness(s,d,t[s].amount,Se.Transaction.SIGHASH_ALL),i.witness=Se.payments.p2wpkh({pubkey:o,signature:Se.script.signature.encode(c,Se.Transaction.SIGHASH_ALL)}).witness;let h=m.Buffer.of(22,0,20,...f);(0,t1.isP2SHScript)(a)&&(i.script=h)}n.push(Tn.base.toHex(u))}),n}});var n4=K(Jt=>{"use strict";E();P();var rH=Jt&&Jt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),nH=Jt&&Jt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a1=Jt&&Jt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&rH(t,e,r);return nH(t,e),t};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.dogInscribe=Jt.DogInscriptionTool=Jt.DogScript=Jt.bufferToChunk=Jt.bufferToBuffer=Jt.CHANGE_OUTPUT_MAX_SIZE=void 0;var vt=a1(fi()),as=ft(),iH=a1(cn()),hi=os(),r4=fi(),dn=Oo(),sH=a1(yo()),Ao=bo();Jt.CHANGE_OUTPUT_MAX_SIZE=20+4+34+4;var J8=2,s1=4294967293,oH=1e5,aH=1e5,cH=240,Q8=1500;function e4(e){return{buf:e<=16?void 0:e<128?m.Buffer.from([e]):m.Buffer.from([e%256,e/256]),len:e<=16?0:e<128?1:2,opcodenum:e==0?0:e<=16?80+e:e<128?1:2}}function Eu(e){let t=hc(e),r=Ao.varuint.encodingLength(t.opcodenum);var n=t.opcodenum;t.buf&&((n===dn.OPS.OP_PUSHDATA1||n===dn.OPS.OP_PUSHDATA2||n===dn.OPS.OP_PUSHDATA4)&&(r+=Ao.varuint.encodingLength(t.len)),r+=t.buf.length);let i=r4.BufferWriter.withCapacity(r);return i.writeUInt8(t.opcodenum),t.buf&&(n<dn.OPS.OP_PUSHDATA1?i.writeSlice(t.buf):n===dn.OPS.OP_PUSHDATA1?(i.writeUInt8(t.len),i.writeSlice(t.buf)):n===dn.OPS.OP_PUSHDATA2?(i.writeUInt64(t.len),i.writeSlice(t.buf)):n===dn.OPS.OP_PUSHDATA4&&(i.writeUInt32(t.len),i.writeSlice(t.buf))),i.end()}Jt.bufferToBuffer=Eu;function hc(e){return{buf:e.length?e:void 0,len:e.length,opcodenum:e.length<=75?e.length:e.length<=255?76:77}}Jt.bufferToChunk=hc;function o1(e){return{opcodenum:e}}var pc=class{constructor(){this.chunks=[]}total(){return this.chunks.length==0?0:this.chunks.map(r=>{let n=Ao.varuint.encodingLength(r.opcodenum);var i=r.opcodenum;return r.buf&&(i<dn.OPS.OP_PUSHDATA1||(i===dn.OPS.OP_PUSHDATA1||i===dn.OPS.OP_PUSHDATA2||i===dn.OPS.OP_PUSHDATA4)&&(n+=Ao.varuint.encodingLength(r.len)),n+=r.buf.length),n}).reduce((r,n)=>r+n)}toBuffer(){let t=this.total(),r=r4.BufferWriter.withCapacity(t);for(var n=0;n<this.chunks.length;n++){var i=this.chunks[n],s=i.opcodenum;r.writeUInt8(i.opcodenum),i.buf&&(s<dn.OPS.OP_PUSHDATA1?r.writeSlice(i.buf):s===dn.OPS.OP_PUSHDATA1?(r.writeUInt8(i.len),r.writeSlice(i.buf)):s===dn.OPS.OP_PUSHDATA2?(r.writeUInt64(i.len),r.writeSlice(i.buf)):s===dn.OPS.OP_PUSHDATA4&&(r.writeUInt32(i.len),r.writeSlice(i.buf)))}return r.end()}};Jt.DogScript=pc;var bc=class{constructor(){this.network=vt.networks.bitcoin,this.inscriptionTxCtxDataList=[],this.revealTxs=[],this.commitTx=new vt.Transaction,this.commitTxPrevOutputFetcher=[],this.revealTxPrevOutputFetcher=[],this.mustCommitTxFee=0,this.mustRevealTxFees=[],this.commitAddrs=[],this.fromAddr="",this.revealAddr=""}static newDogInscriptionTool(t,r){let n=new bc;n.network=t;let i=r.revealOutValue||oH,s=r.minChangeValue||aH,o=r.commitTxPrevOutputList[0].privateKey;n.inscriptionTxCtxDataList=uH(t,r.inscriptionData,o),n.revealAddr=r.inscriptionData.revealAddr;let a=as.base.toHex(as.base.fromHex((0,hi.privateKeyFromWIF)(o,t))),c=(0,hi.private2public)(a);n.fromAddr=vt.payments.p2pkh({pubkey:c,network:t}).address;let u=n.buildEmptyRevealTxs(t,i,r.revealFeeRate);return n.buildCommitTx(t,r.commitTxPrevOutputList,r.changeAddress,u,i,r.commitFeeRate,s)||(n.signCommitTx(r.commitTxPrevOutputList),n.completeRevealTx()),n}buildEmptyRevealTxs(t,r,n){let i=0,s=[],o=[],a=[],c=0;for(let u=this.inscriptionTxCtxDataList.length-1;u>-1;u--){let f=this.inscriptionTxCtxDataList[u],d=new vt.Transaction;d.version=J8,d.addInput(m.Buffer.alloc(32),0,s1),d.addInput(m.Buffer.alloc(32),1,s1),d.addOutput(u!=this.inscriptionTxCtxDataList.length-1?f.commitTxAddressPkScript:f.revealPkScript,r);let h=m.Buffer.alloc(72),b=m.Buffer.concat([f.inscriptionScript,Eu(h),Eu(f.redeemScript)]);d.ins[0].script=b,u!=this.inscriptionTxCtxDataList.length-1&&d.addOutput(vt.address.toOutputScript(this.fromAddr,t),c),d.ins[1].script=m.Buffer.alloc(106);let g=Math.floor((d.dogeByteLength()+Jt.CHANGE_OUTPUT_MAX_SIZE)*n);c+=g;let y=g;f.revealTxPrevOutput={pkScript:f.commitTxAddressPkScript,value:y},i+=y,s.push(d),o.push(g),a.push(f.commitTxAddress)}for(let u=0,f=s.length-1;u<f;u++,f--)[s[u],s[f]]=[s[f],s[u]],[o[u],o[f]]=[o[f],o[u]],[a[u],a[f]]=[a[f],a[u]];return this.revealTxs=s,this.mustRevealTxFees=o,this.commitAddrs=a,i+=r,i}buildCommitTx(t,r,n,i,s,o,a){let c=0,u=new vt.Transaction;u.version=J8,r.forEach(g=>{let y=as.base.reverseBuffer(as.base.fromHex(g.txId));u.addInput(y,g.vOut,s1),this.commitTxPrevOutputFetcher.push(g.amount),c+=g.amount}),u.addOutput(this.inscriptionTxCtxDataList[0].revealTxPrevOutput.pkScript,s),u.addOutput(vt.address.toOutputScript(this.fromAddr,t),i);let f=vt.address.toOutputScript(n,t);u.addOutput(f,0);let d=u.clone();t4(d,r,this.network);let h=Math.floor((d.dogeByteLength()+Jt.CHANGE_OUTPUT_MAX_SIZE)*o),b=c-i-h;if(b>=a)u.outs[u.outs.length-1].value=b;else{u.outs=u.outs.slice(0,u.outs.length-1),d.outs=d.outs.slice(0,d.outs.length-1);let g=Math.floor(d.dogeByteLength()*o);if(c-i-g<0)return this.mustCommitTxFee=h,!0}return this.commitTx=u,!1}signCommitTx(t){t4(this.commitTx,t,this.network)}completeRevealTx(){for(let t=0;t<this.revealTxs.length;t++){let r=this.revealTxs[t];r.ins[0].hash=t==0?this.commitTx.getHash():this.revealTxs[t-1].getHash(),r.ins[1].hash=t==0?this.commitTx.getHash():this.revealTxs[t-1].getHash(),this.revealTxPrevOutputFetcher.push(this.inscriptionTxCtxDataList[t].revealTxPrevOutput.value);let n=this.inscriptionTxCtxDataList[t].redeemScript,i=r.hashForSignature(0,n,vt.Transaction.SIGHASH_ALL),s=as.base.toHex(this.inscriptionTxCtxDataList[t].privateKey),o=(0,hi.sign)(i,s),a=vt.script.signature.encode(o,vt.Transaction.SIGHASH_ALL);r.ins[0].script=m.Buffer.concat([this.inscriptionTxCtxDataList[t].inscriptionScript,Eu(a),Eu(this.inscriptionTxCtxDataList[t].redeemScript)]);let c=vt.address.toOutputScript(this.fromAddr,this.network),u=r.hashForSignature(1,c,vt.Transaction.SIGHASH_ALL),f=(0,hi.sign)(u,s),d=vt.payments.p2pkh({signature:vt.script.signature.encode(f,vt.Transaction.SIGHASH_ALL),pubkey:(0,hi.private2public)(s)});r.ins[1].script=d.input}}calculateFee(){let t=0;this.commitTx.ins.forEach((n,i)=>{t+=this.commitTxPrevOutputFetcher[i]}),this.commitTx.outs.forEach(n=>{t-=n.value});let r=[];return this.revealTxs.forEach((n,i)=>{let s=0;s=this.revealTxPrevOutputFetcher[i],r.push(s)}),{commitTxFee:t,revealTxFees:r}}};Jt.DogInscriptionTool=bc;function t4(e,t,r){e.ins.forEach((n,i)=>{let s=(0,hi.getAddressType)(t[i].address,r),o=as.base.fromHex((0,hi.privateKeyFromWIF)(t[i].privateKey,r)),a=as.base.toHex(o),c=(0,hi.private2public)(a);if(s==="legacy"){let u=vt.address.toOutputScript(t[i].address,r),f=e.hashForSignature(i,u,vt.Transaction.SIGHASH_ALL),d=(0,hi.sign)(f,a),h=vt.payments.p2pkh({signature:vt.script.signature.encode(d,vt.Transaction.SIGHASH_ALL),pubkey:c});n.script=h.input}else{let u=iH.hash160(c),f=m.Buffer.of(25,118,169,20,...u,136,172),d=t[i].amount,h=e.hashForWitness(i,f,d,vt.Transaction.SIGHASH_ALL),b=(0,hi.sign)(h,a);n.witness=[vt.script.signature.encode(b,vt.Transaction.SIGHASH_ALL),c];let g=m.Buffer.of(22,0,20,...u);s==="segwit_nested"&&(n.script=g)}})}function uH(e,t,r){let n=as.base.fromHex((0,hi.privateKeyFromWIF)(r,e)),i=(0,hi.wif2Public)(r,e),s=vt.script.OPS,o;typeof t.body=="string"?o=m.Buffer.from(t.body):o=t.body;let a=[];for(;o.length;){let f=o.slice(0,Math.min(cH,o.length));o=o.slice(f.length),a.push(f)}let c=new pc;c.chunks.push(hc(m.Buffer.from("ord"))),c.chunks.push(e4(a.length)),c.chunks.push(hc(m.Buffer.from(t.contentType))),a.forEach((f,d)=>{c.chunks.push(e4(a.length-d-1)),c.chunks.push(hc(f))});let u=[];for(;c.chunks.length;){let f=new pc;for(u.length==0&&f.chunks.push(c.chunks.shift());f.total()<=Q8&&c.chunks.length;)f.chunks.push(c.chunks.shift()),f.chunks.push(c.chunks.shift());f.total()>Q8&&(c.chunks.unshift(f.chunks.pop()),c.chunks.unshift(f.chunks.pop()));let d=new pc;d.chunks.push(hc(i)),d.chunks.push(o1(s.OP_CHECKSIGVERIFY)),f.chunks.forEach(()=>{d.chunks.push(o1(s.OP_DROP))}),d.chunks.push(o1(s.OP_TRUE));let h=as.base.ripemd160(as.base.sha256(d.toBuffer())),{output:b,address:g}=sH.p2sh({hash:m.Buffer.from(h),network:e}),y={privateKey:n,inscriptionScript:f.toBuffer(),redeemScript:d.toBuffer(),commitTxAddress:g,commitTxAddressPkScript:b,revealTxPrevOutput:{pkScript:m.Buffer.alloc(0),value:1e5},revealPkScript:vt.address.toOutputScript(t.revealAddr,e)};u.push(y)}return u}function fH(e,t){let r=bc.newDogInscriptionTool(e,t);return r.mustCommitTxFee>0?{commitTx:"",revealTxs:[],commitTxFee:r.mustCommitTxFee,revealTxFees:r.mustRevealTxFees,commitAddrs:r.commitAddrs}:{commitTx:r.commitTx.toHex(),revealTxs:r.revealTxs.map(n=>n.toHex()),...r.calculateFee(),commitAddrs:r.commitAddrs}}Jt.dogInscribe=fH});var a4=K(An=>{"use strict";E();P();Object.defineProperty(An,"__esModule",{value:!0});An.verifyWithAddress=An.getMPCSignedMessage=An.verify=An.sign=An.toCompact=An.magicHash=void 0;var Rt=ft(),dH=os(),lH=m.Buffer.from(`Bitcoin Signed Message:
`);function i4(e){let t;return e<253?(t=m.Buffer.alloc(1),t.writeUInt8(e,0)):e<65536?(t=m.Buffer.alloc(1+2),t.writeUInt8(253,0),t.writeUInt16LE(e,1)):e<4294967296?(t=m.Buffer.alloc(1+4),t.writeUInt8(254,0),t.writeUInt32LE(e,1)):(t=m.Buffer.alloc(1+8),t.writeUInt8(255,0),t.writeInt32LE(e&-1,1),t.writeUInt32LE(Math.floor(e/4294967296),5)),t}function Md(e,t){let r=t?m.Buffer.from(t,"utf8"):lH,n=i4(r.length),i=m.Buffer.from(e),s=i4(i.length),o=m.Buffer.concat([n,r,s,i]);return Rt.base.doubleSha256(o)}An.magicHash=Md;function u1(e,t,r){if(!(e===0||e===1||e===2||e===3))throw new Error("i must be equal to 0, 1, 2, or 3");let n=e+27+4;return r||(n=n-4),m.Buffer.concat([Uint8Array.of(n),Uint8Array.from(t)])}An.toCompact=u1;function hH(e,t,r,n){let i=Md(t,n);if(!e)return Rt.base.toHex(i);let s=Rt.base.fromHex((0,dH.privateKeyFromWIF)(e,r)),{signature:o,recovery:a}=Rt.signUtil.secp256k1.sign(m.Buffer.from(i),s);return Rt.base.toBase64(u1(a,o,!0))}An.sign=hH;function pH(e,t,r,n){let i=Md(t,n),s=Rt.base.fromBase64(r),o=s[0]-27-4,a=s.slice(1);return Rt.signUtil.secp256k1.verify(m.Buffer.from(i),a,o,Rt.base.fromHex(e))}An.verify=pH;function bH(e,t,r){let n=Rt.base.fromHex(t),i=n.slice(0,32),s=n.slice(32,64),o=Rt.signUtil.secp256k1.getV(Rt.base.fromHex(e),Rt.base.toHex(i),Rt.base.toHex(s),Rt.base.fromHex(r));return Rt.base.toBase64(u1(o,n,!0))}An.getMPCSignedMessage=bH;function gH(e,t,r,n){let i=Md(t,n),s=Rt.base.fromBase64(r),o=s[0]-27,a=s.slice(1),c=o&3,u=o&8?o&4?c1.P2WPKH:c1.P2SH_P2WPKH:null,f=!!(o&12),d=Rt.signUtil.secp256k1.recover(a,c,m.Buffer.from(i),f);if(d==null)return!1;let h=m.Buffer.from(Rt.base.hash160(d)),b,g;if(u)u===c1.P2SH_P2WPKH?(b=o4(h),g=Rt.base.fromBase58Check(e).slice(1)):(b=h,g=s4(e));else try{return g=s4(e),Bd(h,g)}catch{let x=o4(h),T=Rt.base.fromBase58Check(e).slice(1);return Bd(h,T)||Bd(x,T)}return Bd(b,g)}An.verifyWithAddress=gH;var c1={P2WPKH:"p2wpkh",P2SH_P2WPKH:"p2sh(p2wpkh)"};function s4(e){let t=Rt.base.bech32.decode(e),r=Rt.base.bech32.fromWords(t.words.slice(1));return m.Buffer.from(r)}function o4(e){let t=m.Buffer.concat([m.Buffer.from("0014","hex"),e]);return m.Buffer.from(Rt.base.hash160(t))}function Bd(e,t){if(!m.Buffer.isBuffer(e)||!m.Buffer.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return!0;if(typeof e.equals=="function")return e.equals(t);if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}});var u4=K(c4=>{"use strict";E();P();Object.defineProperty(c4,"__esModule",{value:!0})});var f4=K(pi=>{"use strict";E();P();Object.defineProperty(pi,"__esModule",{value:!0});pi.CoinCurveMap=pi.MultiAddressCoins=pi.segwitType=pi.Currency=void 0;var De;(function(e){e[e.NULL=-1]="NULL",e[e.BTC=0]="BTC",e[e.TBTC=1]="TBTC",e[e.ETH=60]="ETH",e[e.LTC=2]="LTC",e[e.DOGE=3]="DOGE",e[e.BCH=145]="BCH",e[e.BSV=236]="BSV",e[e.TRX=195]="TRX",e[e.SOL=501]="SOL",e[e.APTOS=637]="APTOS",e[e.OMNI_USDT=20001]="OMNI_USDT",e[e.OMNI_USDT_TEST=20002]="OMNI_USDT_TEST",e[e.SUI=784]="SUI",e[e.ATOM=118]="ATOM",e[e.OSMO=1e3]="OSMO",e[e.EVMOS=1001]="EVMOS",e[e.AXL=1002]="AXL",e[e.CRO=1003]="CRO",e[e.Iris=1004]="Iris",e[e.Juno=1005]="Juno",e[e.Kava=1006]="Kava",e[e.Kujira=1007]="Kujira",e[e.SCRT=1008]="SCRT",e[e.Stargaze=1009]="Stargaze",e[e.Terra=1010]="Terra",e[e.ZKSPACE=1011]="ZKSPACE",e[e.ZKSYNC=804]="ZKSYNC",e[e.Stx=5757]="Stx",e[e.SEI=2837]="SEI",e[e.WAX=14001]="WAX",e[e.Starknet=9004]="Starknet",e[e.ADA=1815]="ADA",e[e.INJ=2892]="INJ",e[e.Celestia=2854]="Celestia",e[e.DYDX=2897]="DYDX",e[e.Kaspa=111111]="Kaspa",e[e.NostrAssets=1237]="NostrAssets"})(De=pi.Currency||(pi.Currency={}));var yH;(function(e){e[e.SEGWIT_NESTED=1]="SEGWIT_NESTED",e[e.SEGWIT_NESTED_49=2]="SEGWIT_NESTED_49",e[e.SEGWIT_NATIVE=3]="SEGWIT_NATIVE",e[e.SEGWIT_TAPROOT=4]="SEGWIT_TAPROOT"})(yH=pi.segwitType||(pi.segwitType={}));pi.MultiAddressCoins=[De.BTC,De.TBTC,De.LTC,De.DOGE,De.BSV,De.OMNI_USDT,De.OMNI_USDT_TEST];var At="secp256k1",f1="ed25519";pi.CoinCurveMap=new Map([[De.BTC,At],[De.TBTC,At],[De.ETH,At],[De.LTC,At],[De.DOGE,At],[De.BCH,At],[De.BSV,At],[De.TRX,At],[De.OMNI_USDT,At],[De.OMNI_USDT_TEST,At],[De.ATOM,At],[De.OSMO,At],[De.EVMOS,At],[De.AXL,At],[De.CRO,At],[De.Iris,At],[De.Juno,At],[De.Kava,At],[De.Kujira,At],[De.SCRT,At],[De.Stargaze,At],[De.Terra,At],[De.SEI,At],[De.Celestia,At],[De.DYDX,At],[De.SOL,f1],[De.APTOS,f1],[De.SUI,f1]])});var d1=K(oe=>{"use strict";E();P();Object.defineProperty(oe,"__esModule",{value:!0});oe.EstimateFeeError=oe.validSignedTransactionError=oe.GetPayLoadError=oe.HardwareDerivePubKeyError=oe.CalcTxHashError=oe.SignMsgStep3Error=oe.SignMsgSetupError=oe.Ed25519Step3Error=oe.Ed25519Step2Error=oe.Ed25519Step1Error=oe.Ed25519SetupError=oe.EcdsaStep3Error=oe.EcdsaStep2Error=oe.EcdsaStep1Error=oe.EcdsaSetupError=oe.MPCShakeHandsError=oe.MPCStepError=oe.MPCAesKeyMissError=oe.GetHardWareMessageHashError=oe.GetHardwareSignedTransactionError=oe.GetHardwareRawTransactionError=oe.GetMpcTransactionError=oe.GetMpcRawTransactionError=oe.DerivePathError=oe.GenMnemonicError=oe.GenPrivateKeyError=oe.UnsupportedCoinError=oe.SignMsgError=oe.SignTxError=oe.ValidAddressError=oe.NewAddressError=oe.NotImplementedError=void 0;oe.NotImplementedError="no implementation method";oe.NewAddressError="generate address error";oe.ValidAddressError="valid address error";oe.SignTxError="sign tx error";oe.SignMsgError="sign message error";oe.UnsupportedCoinError="unsupported currency";oe.GenPrivateKeyError="generate private key error";oe.GenMnemonicError="generate mnemonic error";oe.DerivePathError="derive hdPath error";oe.GetMpcRawTransactionError="get mpc raw transaction error";oe.GetMpcTransactionError="get mpc transaction error";oe.GetHardwareRawTransactionError="get hardware raw transaction error";oe.GetHardwareSignedTransactionError="get hardware signed transaction error";oe.GetHardWareMessageHashError="get hardware message hash error";oe.MPCAesKeyMissError="mpc get aes key error";oe.MPCStepError="mpc step error";oe.MPCShakeHandsError="mpc shake hands error";oe.EcdsaSetupError="ecdsa setup error";oe.EcdsaStep1Error="ecdsa step1 error";oe.EcdsaStep2Error="ecdsa step2 error";oe.EcdsaStep3Error="ecdsa step3 error";oe.Ed25519SetupError="ed25519 setup error";oe.Ed25519Step1Error="ed25519 step1 error";oe.Ed25519Step2Error="ed25519 step2 error";oe.Ed25519Step3Error="ed25519 step3 error";oe.SignMsgSetupError="sign message setup error";oe.SignMsgStep3Error="sign message step3 error";oe.CalcTxHashError="calculate tx hash error";oe.HardwareDerivePubKeyError="derive sub pub key error";oe.GetPayLoadError="get payload error";oe.validSignedTransactionError="valid signed transaction error";oe.EstimateFeeError="estimate fee error"});var l4=K(gc=>{"use strict";E();P();Object.defineProperty(gc,"__esModule",{value:!0});gc.BaseWallet=gc.secp256k1SignTest=void 0;var yr=d1(),Ps=ft();function d4(e){let t=Ps.base.sha256("secp256k1-test"),r=Ps.signUtil.secp256k1.publicKeyCreate(e,!1),{signature:n,recovery:i}=Ps.signUtil.secp256k1.sign(m.Buffer.from(t),e);return Ps.signUtil.secp256k1.verify(t,n,i,r)}gc.secp256k1SignTest=d4;var l1=class{getRandomPrivateKey(){try{for(;;){let t=Ps.base.randomBytes(32);if(d4(t))return Promise.resolve(Ps.base.toHex(t,!0))}}catch{}return Promise.reject(yr.GenPrivateKeyError)}getDerivedPrivateKey(t){return Ps.bip39.mnemonicToSeed(t.mnemonic).then(r=>{let n=Ps.bip32.fromSeed(r).derivePath(t.hdPath);if(n.privateKey){let i=Ps.base.toHex(n.privateKey);return Promise.resolve("0x"+i)}else return Promise.reject(yr.GenPrivateKeyError)}).catch(r=>Promise.reject(yr.GenPrivateKeyError))}getDerivedPath(t){return Promise.reject(yr.NotImplementedError)}validPrivateKey(t){return Promise.reject(yr.NotImplementedError)}signMessage(t){return Promise.reject(yr.NotImplementedError)}verifyMessage(t){return Promise.reject(yr.NotImplementedError)}ecRecover(t,r){return Promise.reject(yr.NotImplementedError)}getAddressByPublicKey(t){return Promise.reject(yr.NotImplementedError)}getMPCRawTransaction(t){return Promise.reject(yr.NotImplementedError)}getMPCTransaction(t){return Promise.reject(yr.NotImplementedError)}getMPCRawMessage(t){return Promise.reject(yr.NotImplementedError)}getMPCSignedMessage(t){return Promise.reject(yr.NotImplementedError)}getHardWareRawTransaction(t){return Promise.reject(yr.NotImplementedError)}getHardWareSignedTransaction(t){return Promise.reject(yr.NotImplementedError)}getHardWareMessageHash(t){return Promise.reject(yr.NotImplementedError)}calcTxHash(t){return Promise.reject(yr.NotImplementedError)}getRawTransaction(t){return Promise.reject(yr.NotImplementedError)}validSignedTransaction(t){return Promise.reject(yr.NotImplementedError)}estimateFee(t){return Promise.reject(yr.NotImplementedError)}};gc.BaseWallet=l1});var b4=K(Oi=>{"use strict";E();P();Object.defineProperty(Oi,"__esModule",{value:!0});Oi.ed25519_getDerivedPrivateKey=Oi.isValidPath=Oi.ed25519_getRandomPrivateKey=Oi.ed25519SignTest=void 0;var zr=ft();function h4(e){let t=zr.base.sha256("ed25519-test"),r=zr.signUtil.ed25519.publicKeyCreate(e),n=zr.signUtil.ed25519.sign(t,e);return zr.signUtil.ed25519.verify(t,n,r)}Oi.ed25519SignTest=h4;function vH(e,t){for(;;){let r=zr.base.randomBytes(32);if(zr.signUtil.ed25519.privateKeyVerify(r)&&h4(r)){let n=zr.signUtil.ed25519.publicKeyCreate(r),i=e?zr.base.concatBytes(r,n):r;return t==="base58"?zr.base.toBase58(i):zr.base.toHex(i)}}}Oi.ed25519_getRandomPrivateKey=vH;var mH=new RegExp("^m(\\/[0-9]+')+$"),p4=e=>e.replace("'",""),wH=2147483648;function xH(e){let t=zr.base.hmacSHA512("ed25519 seed",e),r=t.slice(0,32),n=t.slice(32);return{key:r,chainCode:n}}function _H({key:e,chainCode:t},r){let n=m.Buffer.allocUnsafe(4);n.writeUInt32BE(r,0);let i=m.Buffer.concat([m.Buffer.alloc(1,0),e,n]),s=zr.base.hmacSHA512(t,i),o=s.slice(0,32),a=s.slice(32);return{key:o,chainCode:a}}var SH=e=>mH.test(e)?!e.split("/").slice(1).map(p4).some(isNaN):!1;Oi.isValidPath=SH;function EH(e,t,r=wH){if(!(0,Oi.isValidPath)(e))throw new Error("Invalid derivation path");let{key:n,chainCode:i}=xH(t);return e.split("/").slice(1).map(p4).map(o=>parseInt(o,10)).reduce((o,a)=>_H(o,a+r),{key:n,chainCode:i})}async function PH(e,t,r){let n=await zr.bip39.mnemonicToSeed(e.mnemonic),i=EH(e.hdPath,n).key,s=zr.signUtil.ed25519.publicKeyCreate(i),o=t?zr.base.concatBytes(i,s):i;return r==="base58"?Promise.resolve(zr.base.toBase58(o)):Promise.resolve(zr.base.toHex(o))}Oi.ed25519_getDerivedPrivateKey=PH});var g4=K(bi=>{"use strict";E();P();Object.defineProperty(bi,"__esModule",{value:!0});bi.jsonStringifyUniform=bi.cloneObject=bi.assertBufferLength=bi.convert2BigNumber=bi.convert2Number=void 0;var Hd=ft();function TH(e){if(e!=null)return typeof e=="string"?parseInt(e):e}bi.convert2Number=TH;function AH(e){if(e!=null)return Hd.BigNumber.isBigNumber(e)?e:new Hd.BigNumber(e)}bi.convert2BigNumber=AH;function IH(e,t){if(e.length!=t)throw Error("buffer length is illegal")}bi.assertBufferLength=IH;function OH(e){return JSON.parse(JSON.stringify(e))}bi.cloneObject=OH;function BH(e){return JSON.stringify(e,(t,r)=>r&&(r.type==="Buffer"||r instanceof Uint8Array?Hd.base.toHex(r):typeof r=="bigint"?r.toString():r))}bi.jsonStringifyUniform=BH});var v4=K(Io=>{"use strict";E();P();var MH=Io&&Io.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),y4=Io&&Io.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&MH(t,e,r)};Object.defineProperty(Io,"__esModule",{value:!0});y4(b4(),Io);y4(g4(),Io)});var cs=K(Bi=>{"use strict";E();P();var HH=Bi&&Bi.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Pu=Bi&&Bi.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&HH(t,e,r)};Object.defineProperty(Bi,"__esModule",{value:!0});Pu(u4(),Bi);Pu(f4(),Bi);Pu(d1(),Bi);Pu(l4(),Bi);Pu(v4(),Bi)});var us=K(Qt=>{"use strict";E();P();var kH=Qt&&Qt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),NH=Qt&&Qt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),CH=Qt&&Qt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&kH(t,e,r);return NH(t,e),t};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.convert2UtxoTx=Qt.number2Hex=Qt.TBtcWallet=Qt.BtcWallet=Qt.BITCOIN_MESSAGE_BIP0322_SIMPLE=Qt.BITCOIN_MESSAGE_ECDSA=void 0;var be=cs(),yc=ft(),ie=CH(ln()),Rr=ln();Qt.BITCOIN_MESSAGE_ECDSA=0;Qt.BITCOIN_MESSAGE_BIP0322_SIMPLE=1;var kd=class extends be.BaseWallet{network(){return ie.networks.bitcoin}async getDerivedPath(t){return t.segwitType?t.segwitType==be.segwitType.SEGWIT_NESTED?`m/84'/0'/0'/0/${t.index}`:t.segwitType==be.segwitType.SEGWIT_NESTED_49?`m/49'/0'/0'/0/${t.index}`:t.segwitType==be.segwitType.SEGWIT_NATIVE?`m/84'/0'/0'/0/${t.index}`:t.segwitType==be.segwitType.SEGWIT_TAPROOT?`m/86'/0'/0'/0/${t.index}`:Promise.reject(be.DerivePathError):`m/44'/0'/0'/0/${t.index}`}async validPrivateKey(t){let r;try{let{version:i}=ie.wif.decode(t.privateKey);r=i===this.network().wif}catch{r=!1}let n={isValid:r,privateKey:t.privateKey};return Promise.resolve(n)}async getNewAddress(t){try{let r=this.network(),n=t.privateKey,i=t.addressType||"Legacy",s=ie.wif2Public(n,r),o;i==="Legacy"?o=ie.payments.p2pkh({pubkey:s,network:r}).address:i==="segwit_native"?o=ie.payments.p2wpkh({pubkey:s,network:r}).address:i==="segwit_nested"?o=ie.payments.p2sh({redeem:ie.payments.p2wpkh({pubkey:s,network:r})}).address:i==="segwit_taproot"&&(o=ie.payments.p2tr({internalPubkey:s.slice(1),network:r}).address);let a={address:o||"",publicKey:yc.base.toHex(i==="segwit_taproot"?s.slice(1):s),compressedPublicKey:yc.base.toHex(s)};return Promise.resolve(a)}catch{return Promise.reject(be.NewAddressError)}}async validAddress(t){let r=!1,n=this.network();try{ie.address.toOutputScript(t.address,n)&&(r=!0)}catch{}t.addressType&&(r=t.addressType===ie.getAddressType(t.address,n));let i={isValid:r,address:t.address};return Promise.resolve(i)}async signTransaction(t){let r=t.data.type||0;if(r===ie.BtcXrcTypes.INSCRIBE)try{return Promise.resolve(ie.inscribe(this.network(),t.data))}catch{return Promise.reject(be.SignTxError)}else if(r===ie.BtcXrcTypes.PSBT)try{return Promise.resolve(ie.psbtSign(t.data.psbt,t.privateKey,this.network()))}catch{return Promise.reject(be.SignTxError)}else if(r===ie.BtcXrcTypes.PSBT_DEODE)try{return Promise.resolve(ie.psbtDecode(t.data.psbt,this.network()))}catch{return Promise.reject(be.SignTxError)}else if(r===ie.BtcXrcTypes.PSBT_MPC_UNSIGNED_LIST)try{return Promise.resolve(ie.generateMPCUnsignedListingPSBT(t.data.psbt,t.data.publicKey,this.network()))}catch{return Promise.reject(be.SignTxError)}else if(r===ie.BtcXrcTypes.PSBT_MPC_SIGNED_LIST)try{return Promise.resolve(ie.generateMPCSignedListingPSBT(t.data.psbt,t.data.publicKey,t.data.signature,this.network()))}catch{return Promise.reject(be.SignTxError)}else if(r===ie.BtcXrcTypes.PSBT_MPC_UNSIGNED_BUY)try{return Promise.resolve(ie.generateMPCUnsignedBuyingPSBT(t.data.psbt,t.data.publicKey,this.network(),t.data.batchSize))}catch{return Promise.reject(be.SignTxError)}else if(r===ie.BtcXrcTypes.PSBT_MPC_SIGNED_BUY)try{return Promise.resolve(ie.generateMPCSignedBuyingTx(t.data.psbt,t.data.publicKey,t.data.signatureList,this.network(),t.data.batchSize))}catch{return Promise.reject(be.SignTxError)}else if(r===ie.BtcXrcTypes.PSBT_MPC_UNSIGNED)try{return Promise.resolve(ie.generateMPCUnsignedPSBT(t.data.psbt,t.data.publicKey,this.network()))}catch{return Promise.reject(be.SignTxError)}else if(r===ie.BtcXrcTypes.PSBT_MPC_SIGNED)try{return Promise.resolve(ie.generateMPCSignedPSBT(t.data.psbt,t.data.publicKey,t.data.signatureList,this.network()))}catch{return Promise.reject(be.SignTxError)}else if(r===ie.BtcXrcTypes.PSBT_KEY_SCRIPT_PATH)try{return Promise.resolve(ie.signPsbtWithKeyPathAndScriptPath(t.data.psbt,t.privateKey,this.network(),{autoFinalized:t.data.autoFinalized,toSignInputs:t.data.toSignInputs}))}catch{return Promise.reject(be.SignTxError)}else if(r===ie.BtcXrcTypes.PSBT_KEY_SCRIPT_PATH_BATCH)try{return Promise.resolve(ie.signPsbtWithKeyPathAndScriptPathBatch(t.data.psbtHexs,t.privateKey,this.network(),t.data.options))}catch{return Promise.reject(be.SignTxError)}else if(r===ie.BtcXrcTypes.SRC20)try{return Promise.resolve(ie.srcInscribe(this.network(),t.data))}catch{return Promise.reject(be.SignTxError)}else if(r===ie.BtcXrcTypes.RUNE)try{let n=new Rr.RuneWallet;return this.network()===Rr.networks.testnet&&(n=new Rr.RuneTestWallet),Promise.resolve(n.signTransaction(t))}catch{return Promise.reject(be.SignTxError)}else if(r===ie.BtcXrcTypes.RUNEMAIN)try{let n=new Rr.RuneMainWallet;return this.network()===Rr.networks.testnet&&(n=new Rr.RuneMainTestWallet),Promise.resolve(n.signTransaction(t))}catch{return Promise.reject(be.SignTxError)}else if(r===ie.BtcXrcTypes.ARC20)try{let n=new Rr.AtomicalWallet;return this.network()===Rr.networks.testnet&&(n=new Rr.AtomicalTestWallet),Promise.resolve(n.signTransaction(t))}catch{return Promise.reject(be.SignTxError)}else{let n=null;try{let i=t.privateKey,s=Tu(t.data);return n=ie.signBtc(s,i,this.network()),Promise.resolve(n)}catch{return Promise.reject(be.SignTxError)}}}getRandomPrivateKey(){try{let t=this.network();for(;;){let r=yc.base.randomBytes(32);if((0,be.secp256k1SignTest)(r)){let n=ie.private2Wif(r,t);return Promise.resolve(n)}}}catch{return Promise.reject(be.GenPrivateKeyError)}}getDerivedPrivateKey(t){let r=this.network();return yc.bip39.mnemonicToSeed(t.mnemonic).then(n=>{let i=yc.bip32.fromSeed(n).derivePath(t.hdPath);if(!i.privateKey)return Promise.reject(be.GenPrivateKeyError);let s=ie.private2Wif(i.privateKey,r);return Promise.resolve(s)}).catch(n=>Promise.reject(be.GenPrivateKeyError))}getAddressByPublicKey(t){try{let r=this.network(),n=yc.base.fromHex(t.publicKey);if(t.addressType){if(t.addressType==="Legacy")return Promise.resolve(ie.payments.p2pkh({pubkey:n,network:r}).address);if(t.addressType==="segwit_nested")return Promise.resolve(ie.payments.p2sh({redeem:ie.payments.p2wpkh({pubkey:n,network:r})}).address);if(t.addressType==="segwit_native")return Promise.resolve(ie.payments.p2wpkh({pubkey:n,network:r}).address);if(t.addressType==="segwit_taproot")return Promise.resolve(ie.payments.p2tr({internalPubkey:n.slice(1),network:r}).address)}else{let i=[];return i.push({addressType:"Legacy",address:ie.payments.p2pkh({pubkey:n,network:r}).address}),i.push({addressType:"segwit_nested",address:ie.payments.p2sh({redeem:ie.payments.p2wpkh({pubkey:n,network:r})}).address}),i.push({addressType:"segwit_native",address:ie.payments.p2wpkh({pubkey:n,network:r}).address}),Promise.resolve(i)}}catch{}return Promise.reject(be.NewAddressError)}getMPCRawTransaction(t){try{let r=Tu(t.data),n=[],s={raw:ie.signBtc(r,"",this.network(),n),hash:n};return Promise.resolve(s)}catch{return Promise.reject(be.GetMpcRawTransactionError)}}getMPCTransaction(t){try{let r=ie.getMPCTransaction(t.raw,t.sigs,!1);return Promise.resolve(r)}catch{return Promise.reject(be.GetMpcTransactionError)}}async getMPCRawMessage(t){try{let r=await this.signMessage(t);return Promise.resolve({hash:r})}catch{return Promise.reject(be.GetMpcRawTransactionError)}}async getMPCSignedMessage(t){try{return Promise.resolve(ie.message.getMPCSignedMessage(t.hash,t.sigs,t.publicKey))}catch{return Promise.reject(be.GetMpcTransactionError)}}getHardWareRawTransaction(t){try{let r=t.data.type||0,n=Tu(t.data);if(r===2){let i=ie.signBtc(n,"",this.network(),void 0,!0,!0),s=n.dustSize||546;if(parseInt(i)>=s){let a={address:n.address,amount:parseInt(i),bip32Derivation:n.bip32Derivation};n.outputs.push(a)}let o=ie.buildPsbt(n,this.network());return Promise.resolve(o)}else{let i=ie.signBtc(n,"",this.network(),void 0,!0);return Promise.resolve(i)}}catch{return Promise.reject(be.GetHardwareRawTransactionError)}}async calcTxHash(t){try{return Promise.resolve(ie.Transaction.fromHex(t.data).getId())}catch{return Promise.reject(be.CalcTxHashError)}}signMessage(t){try{let r=t.data,n;return r.type===Qt.BITCOIN_MESSAGE_ECDSA?n=ie.message.sign(t.privateKey,r.message,this.network()):n=ie.bip0322.signSimple(r.message,r.address,t.privateKey,this.network()),Promise.resolve(n)}catch{return Promise.reject(be.SignMsgError)}}async verifyMessage(t){try{let r=t.data;if(r.type===Qt.BITCOIN_MESSAGE_ECDSA){let n=ie.message.verify(r.publicKey,r.message,t.signature);return Promise.resolve(n)}else{let n=ie.bip0322.verifySimple(r.message,r.address,t.signature,r.publicKey,this.network());return Promise.resolve(n)}}catch{return Promise.reject(be.SignMsgError)}}static async extractPsbtTransaction(t){try{return Promise.resolve(ie.extractPsbtTransaction(t))}catch{return Promise.reject(be.SignMsgError)}}async validSignedTransaction(t){try{t.data&&t.data.forEach(n=>n.value=n.amount);let r=ie.ValidSignedTransaction(t.tx,t.data,this.network());return Promise.resolve((0,be.jsonStringifyUniform)(r))}catch{return Promise.reject(be.validSignedTransactionError)}}async estimateFee(t){try{let r=t.data.type||0;if(r===ie.BtcXrcTypes.INSCRIBE)return Promise.reject(be.EstimateFeeError);if(r===ie.BtcXrcTypes.PSBT)return Promise.reject(be.EstimateFeeError);if(r===ie.BtcXrcTypes.RUNE)try{let n=new Rr.RuneWallet;return this.network()===Rr.networks.testnet&&(n=new Rr.RuneTestWallet),Promise.resolve(n.estimateFee(t))}catch{return Promise.reject(be.EstimateFeeError)}else if(r===ie.BtcXrcTypes.RUNEMAIN)try{let n=new Rr.RuneMainWallet;return this.network()===Rr.networks.testnet&&(n=new Rr.RuneMainTestWallet),Promise.resolve(n.estimateFee(t))}catch{return Promise.reject(be.EstimateFeeError)}else if(r===ie.BtcXrcTypes.ARC20)try{let n=new Rr.AtomicalWallet;return this.network()===Rr.networks.testnet&&(n=new Rr.AtomicalTestWallet),Promise.resolve(n.estimateFee(t))}catch{return Promise.reject(be.EstimateFeeError)}else{let n=Tu(t.data),i=ie.estimateBtcFee(n,this.network());return Promise.resolve(i)}}catch{return Promise.reject(be.EstimateFeeError)}}static async oneKeyBuildBtcTx(t){try{return Promise.resolve(ie.oneKeyBuildBtcTx(t))}catch{return Promise.reject(be.SignTxError)}}};Qt.BtcWallet=kd;var h1=class extends kd{network(){return ie.networks.testnet}};Qt.TBtcWallet=h1;function qH(e,t){let r=e.toString(16),n=t-r.length;if(n>0)for(let i=0;i<n;i++)r="0"+r;return r}Qt.number2Hex=qH;function Tu(e){let t=(0,be.cloneObject)(e);return t.inputs.forEach(r=>{r.amount=(0,be.convert2Number)(r.amount)}),t.outputs.forEach(r=>{r.amount=(0,be.convert2Number)(r.amount)}),t.omni&&(t.omni.amount=(0,be.convert2Number)(t.omni.amount)),e.dustSize&&(t.dustSize=(0,be.convert2Number)(e.dustSize)),t}Qt.convert2UtxoTx=Tu});var w4=K(fs=>{"use strict";E();P();var RH=fs&&fs.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),UH=fs&&fs.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),LH=fs&&fs.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&RH(t,e,r);return UH(t,e),t};Object.defineProperty(fs,"__esModule",{value:!0});fs.BchWallet=void 0;var vc=cs(),m4=ft(),Au=us(),mt=LH(ln()),p1=class extends Au.BtcWallet{async getDerivedPath(t){return`m/44'/145'/0'/0/${t.index}`}async getNewAddress(t){try{let r=this.network(),n=t.privateKey,i=mt.wif2Public(n,r),a={address:mt.GetBitcashP2PkHAddressByPublicKey(i).replace("bitcoincash:","")||"",publicKey:m4.base.toHex(i)};return Promise.resolve(a)}catch{return Promise.reject(vc.NewAddressError)}}async validAddress(t){let r=!1;try{let i=this.network();mt.address.toOutputScript(t.address,i)&&(r=!0)}catch{}r||(r=mt.ValidateBitcashP2PkHAddress(t.address));let n={isValid:r,address:t.address};return Promise.resolve(n)}async signTransaction(t){let r=null;try{let n=t.privateKey,i=(0,Au.convert2UtxoTx)(t.data);return i.outputs.forEach(s=>{mt.isCashAddress(s.address)&&(s.address=mt.convert2LegacyAddress(s.address,this.network()))}),mt.isCashAddress(i.address)&&(i.address=mt.convert2LegacyAddress(i.address,this.network())),r=mt.signBch(i,n,this.network()),Promise.resolve(r)}catch{return Promise.reject(vc.SignTxError)}}async estimateFee(t){try{let r=(0,Au.convert2UtxoTx)(t.data);r.outputs.forEach(i=>{mt.isCashAddress(i.address)&&(i.address=mt.convert2LegacyAddress(i.address,this.network()))}),mt.isCashAddress(r.address)&&(r.address=mt.convert2LegacyAddress(r.address,this.network()));let n=mt.estimateBchFee(r,this.network());return Promise.resolve(n)}catch{return Promise.reject(vc.EstimateFeeError)}}getMPCRawTransaction(t){try{let r=(0,Au.convert2UtxoTx)(t.data);r.outputs.forEach(o=>{mt.isCashAddress(o.address)&&(o.address=mt.convert2LegacyAddress(o.address,this.network()))}),mt.isCashAddress(r.address)&&(r.address=mt.convert2LegacyAddress(r.address,this.network()));let n=[],s={raw:mt.signBch(r,"",this.network(),n),hash:n};return Promise.resolve(s)}catch{return Promise.reject(vc.GetMpcRawTransactionError)}}getAddressByPublicKey(t){let r=m4.base.fromHex(t.publicKey),n=mt.GetBitcashP2PkHAddressByPublicKey(r);return Promise.resolve(n.replace("bitcoincash:",""))}getMPCTransaction(t){try{let r=mt.getMPCTransaction(t.raw,t.sigs,!0);return Promise.resolve(r)}catch{return Promise.reject(vc.GetMpcTransactionError)}}getHardWareRawTransaction(t){try{let r=(0,Au.convert2UtxoTx)(t.data);r.outputs.forEach(i=>{mt.isCashAddress(i.address)&&(i.address=mt.convert2LegacyAddress(i.address,this.network()))}),mt.isCashAddress(r.address)&&(r.address=mt.convert2LegacyAddress(r.address,this.network()));let n=mt.signBch(r,"",this.network(),void 0,!0);return Promise.resolve(n)}catch{return Promise.reject(vc.GetHardwareRawTransactionError)}}};fs.BchWallet=p1});var x4=K(ds=>{"use strict";E();P();var jH=ds&&ds.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),DH=ds&&ds.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),KH=ds&&ds.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&jH(t,e,r);return DH(t,e),t};Object.defineProperty(ds,"__esModule",{value:!0});ds.BsvWallet=void 0;var Iu=cs(),Ou=us(),Bu=KH(ln()),b1=class extends Ou.BtcWallet{async getDerivedPath(t){return`m/44'/236'/0'/0/${t.index}`}async signTransaction(t){let r=null;try{let n=t.privateKey,i=(0,Ou.convert2UtxoTx)(t.data);return r=Bu.signBch(i,n,this.network()),Promise.resolve(r)}catch{return Promise.reject(Iu.SignTxError)}}async estimateFee(t){try{let r=(0,Ou.convert2UtxoTx)(t.data),n=Bu.estimateBchFee(r,this.network());return Promise.resolve(n)}catch{return Promise.reject(Iu.EstimateFeeError)}}getMPCRawTransaction(t){try{let r=(0,Ou.convert2UtxoTx)(t.data),n=[],s={raw:Bu.signBch(r,"",this.network(),n),hash:n};return Promise.resolve(s)}catch{return Promise.reject(Iu.GetMpcRawTransactionError)}}getMPCTransaction(t){try{let r=Bu.getMPCTransaction(t.raw,t.sigs,!0);return Promise.resolve(r)}catch{return Promise.reject(Iu.GetMpcTransactionError)}}getHardWareRawTransaction(t){try{let r=(0,Ou.convert2UtxoTx)(t.data),n=Bu.signBch(r,"",this.network(),void 0,!0);return Promise.resolve(n)}catch{return Promise.reject(Iu.GetHardwareRawTransactionError)}}};ds.BsvWallet=b1});var _4=K(nn=>{"use strict";E();P();var FH=nn&&nn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),WH=nn&&nn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),zH=nn&&nn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&FH(t,e,r);return WH(t,e),t};Object.defineProperty(nn,"__esModule",{value:!0});nn.DogeWallet=nn.dogeCoin=void 0;var Nd=zH(ln()),Cd=cs(),VH=us();nn.dogeCoin={messagePrefix:`Dogecoin Signed Message:
`,bech32:"bc",bip32:{public:49990397,private:49988504},pubKeyHash:30,scriptHash:22,wif:158};var g1=class extends VH.BtcWallet{network(){return nn.dogeCoin}async signTransaction(t){let r=t.data.type||0;if(r===1)try{return Promise.resolve(Nd.dogInscribe(nn.dogeCoin,t.data))}catch{return Promise.reject(Cd.SignTxError)}else if(r===2)try{return Promise.resolve(Nd.psbtSign(t.data.psbt,t.privateKey,this.network(),t.data.maximumFeeRate?t.data.maximumFeeRate:1e5))}catch{return Promise.reject(Cd.SignTxError)}else return super.signTransaction(t)}signMessage(t){try{let r=t.data,n=Nd.message.sign(t.privateKey,r.message,this.network(),nn.dogeCoin.messagePrefix);return Promise.resolve(n)}catch{return Promise.reject(Cd.SignMsgError)}}async verifyMessage(t){try{let r=t.data,n=Nd.message.verify(r.publicKey,r.message,t.signature,nn.dogeCoin.messagePrefix);return Promise.resolve(n)}catch{return Promise.reject(Cd.SignMsgError)}}};nn.DogeWallet=g1});var E4=K(hn=>{"use strict";E();P();var GH=hn&&hn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$H=hn&&hn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),XH=hn&&hn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&GH(t,e,r);return $H(t,e),t};Object.defineProperty(hn,"__esModule",{value:!0});hn.LtcWallet=hn.litecoin=void 0;var mc=cs(),YH=us(),S4=XH(ln());hn.litecoin={messagePrefix:`Litecoin Signed Message:
`,bech32:"ltc",bip32:{public:27108450,private:27106558},pubKeyHash:48,scriptHash:50,wif:176};var y1=class extends YH.BtcWallet{network(){return hn.litecoin}async getDerivedPath(t){return t.segwitType?t.segwitType==mc.segwitType.SEGWIT_NESTED?`m/84'/2'/0'/0/${t.index}`:t.segwitType==mc.segwitType.SEGWIT_NESTED_49?`m/49'/2'/0'/0/${t.index}`:t.segwitType==mc.segwitType.SEGWIT_NATIVE?`m/84'/2'/0'/0/${t.index}`:Promise.reject(mc.DerivePathError):`m/44'/2'/0'/0/${t.index}`}signMessage(t){try{let r=t.data,n=S4.message.sign(t.privateKey,r.message,this.network(),hn.litecoin.messagePrefix);return Promise.resolve(n)}catch{return Promise.reject(mc.SignMsgError)}}async verifyMessage(t){try{let r=t.data,n=S4.message.verify(r.publicKey,r.message,t.signature,hn.litecoin.messagePrefix);return Promise.resolve(n)}catch{return Promise.reject(mc.SignMsgError)}}};hn.LtcWallet=y1});var P4=K(gi=>{"use strict";E();P();var ZH=gi&&gi.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),JH=gi&&gi.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),QH=gi&&gi.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&ZH(t,e,r);return JH(t,e),t};Object.defineProperty(gi,"__esModule",{value:!0});gi.UsdtTestWallet=gi.UsdtWallet=void 0;var wc=cs(),ls=us(),xc=QH(ln()),qd=class extends ls.BtcWallet{async signTransaction(t){let r=null;try{let n=t.privateKey,i=(0,ls.convert2UtxoTx)(t.data);if(!i.omni)return Promise.reject(wc.SignTxError);let s=(0,ls.number2Hex)(i.omni.coinType||31,8),o=(0,ls.number2Hex)(i.omni.amount,16),a="6a146f6d6e6900000000"+s+o,c={address:"",amount:0,omniScript:a};return i.outputs.push(c),r=xc.signBtc(i,n,this.network()),Promise.resolve(r)}catch{return Promise.reject(wc.SignTxError)}}async estimateFee(t){try{let r=(0,ls.convert2UtxoTx)(t.data);if(!r.omni)return Promise.reject(wc.EstimateFeeError);let n=(0,ls.number2Hex)(r.omni.coinType||31,8),i=(0,ls.number2Hex)(r.omni.amount,16),s="6a146f6d6e6900000000"+n+i,o={address:"",amount:0,omniScript:s};r.outputs.push(o);let a=xc.estimateBtcFee(r,this.network());return Promise.resolve(a)}catch{return Promise.reject(wc.EstimateFeeError)}}getHardWareRawTransaction(t){try{let r=t.data.type||0,n=(0,ls.convert2UtxoTx)(t.data);if(!n.omni)return Promise.reject(wc.SignTxError);let i=(0,ls.number2Hex)(n.omni.coinType||31,8),s=(0,ls.number2Hex)(n.omni.amount,16),o="6a146f6d6e6900000000"+i+s,a={address:"",amount:0,omniScript:o};n.outputs.push(a);let c;if(r===2){let u=xc.signBtc(n,"",this.network(),void 0,!0,!0),f={address:n.address,amount:parseInt(u),bip32Derivation:n.bip32Derivation};n.outputs.push(f),c=xc.buildPsbt(n,this.network())}else c=xc.signBtc(n,"",this.network(),void 0,!0);return Promise.resolve(c)}catch{return Promise.reject(wc.GetHardwareRawTransactionError)}}};gi.UsdtWallet=qd;var v1=class extends qd{network(){return xc.networks.testnet}};gi.UsdtTestWallet=v1});var w1=K(er=>{"use strict";E();P();var ek=er&&er.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),tk=er&&er.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),rk=er&&er.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&ek(t,e,r);return tk(t,e),t};Object.defineProperty(er,"__esModule",{value:!0});er.buildRuneMainMintData=er.buildRuneData=er.encodeToVecV2=er.toVarIntV2=er.fromVarInt=er.encodeToVec=er.toVarInt=void 0;var A4=rk(xr()),m1=Oo(),nk=Rd(),I4=BigInt(0),mW=BigInt(2),wW=BigInt(4),xW=BigInt(6),_W=BigInt(8),SW=BigInt(10),EW=BigInt(12),PW=BigInt(14),TW=BigInt(16),AW=BigInt(118),T4=BigInt(20),ik=BigInt(22),IW=BigInt(126),OW=BigInt(1),BW=BigInt(3),MW=BigInt(5),HW=BigInt(127);function sk(e){let t=[];return _c(e,t),new Uint8Array(t)}er.toVarInt=sk;function _c(e,t){let r=18,n=new Array(19).fill(0);for(n[r]=Number(e&BigInt(127));e>BigInt(127);)e=e/BigInt(128)-BigInt(1),r--,n[r]=Number(e&BigInt(255))|128;t.push(...n.slice(r))}er.encodeToVec=_c;function ok(e){let t=[];return kn(e,t),new Uint8Array(t)}er.toVarIntV2=ok;function kn(e,t){for(;e>>7n>0n;)t.push(Number(e&0x7fn|0x80n)),e>>=7n;return t.push(Number(e&0x7fn)),t}er.encodeToVecV2=kn;function ak(e){let t=BigInt(0),r=0;for(;;){let n=BigInt(e[r]);if(n<BigInt(128))return[t+n,r+1];if(t+=n-BigInt(127),t=t*BigInt(128),r++,r>=e.length)throw new Error("Varint decoding error: buffer overflow")}}er.fromVarInt=ak;function ck(e,t){let r=[];for(let s of t)typeof s.amount=="string"&&(s.amount=BigInt(s.amount));if(t.length>0){_c(I4,r),t.sort((o,a)=>o.id-a.id);let s=0;for(let o of t)_c(BigInt(o.id-s),r),_c(BigInt(o.amount),r),_c(BigInt(o.output),r),s=o.id}let n;return e?n="R":n="RUNE_TEST",A4.compile([m1.OPS.OP_RETURN,m.Buffer.from(n),m.Buffer.from(r)])}er.buildRuneData=ck;function uk(e,t,r,n,i,s){let o=[];for(let c of t)typeof c.amount=="string"&&(c.amount=BigInt(c.amount));if(i!=null&&i&&t[0].block!=null&&(kn(T4,o),kn(BigInt(t[0].block),o),kn(T4,o),kn(BigInt(t[0].id),o)),r&&(kn(ik,o),kn(BigInt(n),o)),t.length>0){kn(I4,o),t.sort((f,d)=>f.block===d.block?f.id<d.id?-1:f.id>d.id?1:0:f.block-d.block);let c=0,u=0;for(let f of t)kn(BigInt(f.block-u),o),kn(BigInt(f.id-c),o),kn(BigInt(f.amount),o),kn(BigInt(f.output),o),c=f.id,u=f.block}if(o.length>80)throw new Error(JSON.stringify({errCode:nk.ErrCodeOpreturnExceeds,date:{payloadLenth:o.length}}));return A4.compile([m1.OPS.OP_RETURN,m1.OPS.OP_13,m.Buffer.from(o)])}er.buildRuneMainMintData=uk});var M4=K(yi=>{"use strict";E();P();var fk=yi&&yi.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),dk=yi&&yi.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),lk=yi&&yi.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&fk(t,e,r);return dk(t,e),t};Object.defineProperty(yi,"__esModule",{value:!0});yi.RuneTestWallet=yi.RuneWallet=void 0;var hk=cs(),pk=us(),B4=lk(ln()),O4=ln(),bk=w1(),gk=ft(),Ud=class extends pk.BtcWallet{convert2RuneTx(t){let r=(0,hk.cloneObject)(t);for(let d of r.inputs){let h=d.data;if(h!=null&&h instanceof Array)for(let b of h)typeof b.amount=="string"&&(b.amount=BigInt(b.amount))}for(let d of r.outputs){let h=d.data;if(h!=null&&h instanceof Array)for(let b of h)typeof b.amount=="string"&&(b.amount=BigInt(b.amount))}let n=r.inputs,i=new Map;for(let d of n){let h=d.data;if(h!=null&&h instanceof Array)for(let b of h){let g=b.id,y=BigInt(b.amount);if(g==null||y==null)continue;let x=i.get(g);x==null?i.set(g,y):i.set(g,BigInt(x)+BigInt(y))}}let s=r.outputs,o=new Map;for(let d of s){let h=d.data;if(h!=null){let b=h.id,g=BigInt(h.amount);if(b==null||g==null)continue;let y=o.get(b);y==null?o.set(b,g):o.set(b,BigInt(y)+BigInt(g))}}let a=!1;for(let d of i.keys()){let h=i.get(d),b=o.get(d);(h!=null&&b!=null&&h>b||h!=null&&b==null)&&(a=!0),a=!0}let c=0,u=[];if(a){let d={address:r.address,amount:546};u.push(d),c++}let f=[];for(let d of s){let h=d.data;if(h!=null){let b=h.id,g=BigInt(h.amount);if(b==null||g==null)continue;let y={id:parseInt("0x"+b),amount:BigInt(g),output:c};f.push(y)}d.data=null,u.push(d),c++}return{inputs:r.inputs,outputs:u,address:r.address,feePerB:r.feePerB,runeData:{edicts:f,etching:r.runeData.etching,burn:r.runeData.burn}}}async signTransaction(t){let r=this.network(),n=null;try{let i=t.privateKey;if(!t.data.runeData)return Promise.reject("missing runeData");let s=this.convert2RuneTx(t.data),o=this.getOpReturnOutput(r,s.runeData);return s.outputs.push(o),n=(0,O4.signBtc)(s,i,r),Promise.resolve(n)}catch(i){return Promise.reject(i)}}getOpReturnOutput(t,r){let n=!1;O4.networks.bitcoin===t&&(n=!0);let i=(0,bk.buildRuneData)(n,r.edicts);return{address:"",amount:0,omniScript:gk.base.toHex(i)}}async estimateFee(t){try{if(!t.data.runeData)return Promise.reject("missing runeData");let r=this.convert2RuneTx(t.data),n=this.getOpReturnOutput(this.network(),r.runeData);r.outputs.push(n);let i=B4.estimateBtcFee(r,this.network());return Promise.resolve(i)}catch(r){return Promise.reject(r)}}};yi.RuneWallet=Ud;var x1=class extends Ud{network(){return B4.networks.testnet}};yi.RuneTestWallet=x1});var H4=K(Ut=>{"use strict";E();P();var yk=Ut&&Ut.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),vk=Ut&&Ut.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mk=Ut&&Ut.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&yk(t,e,r);return vk(t,e),t};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.RuneMainTestWallet=Ut.RuneMainWallet=Ut.ErrCodeMultipleRuneId=Ut.ErrCodeRuneIdNotStandard=Ut.ErrCodeOpreturnExceeds=Ut.ErrCodeLessRunesMainAmt=void 0;var _1=cs(),wk=us(),Ld=mk(ln()),Mu=ln(),xk=w1(),_k=ft(),Sk=ln();Ut.ErrCodeLessRunesMainAmt=2010300;Ut.ErrCodeOpreturnExceeds=2010301;Ut.ErrCodeRuneIdNotStandard=2010302;Ut.ErrCodeMultipleRuneId=2010303;var jd=class extends wk.BtcWallet{convert2RuneTx(t){let r=(0,_1.cloneObject)(t);r.useDefaultOutput==!0&&r.defaultOutput==null&&(r.defaultOutput=0),r.mint==!0&&r.mintNum==null&&(r.mintNUm=1);for(let d of r.inputs){let h=d.data;if(h!=null&&h instanceof Array)for(let b of h)typeof b.amount=="string"&&(b.amount=BigInt(b.amount))}for(let d of r.outputs){let h=d.data;if(h!=null&&h instanceof Array)for(let b of h)typeof b.amount=="string"&&(b.amount=BigInt(b.amount))}let n=r.inputs,i=new Map;for(let d of n){let h=d.data;if(h!=null&&h instanceof Array)for(let b of h){let g=b.id,y=BigInt(b.amount);if(g==null||y==null)continue;if(g.split(":").length<=1)throw new Error(JSON.stringify({errCode:Ut.ErrCodeRuneIdNotStandard,date:{runeId:g}}));let x=i.get(g);x==null?i.set(g,y):i.set(g,BigInt(x)+BigInt(y))}}if(i.size>1)throw new Error(JSON.stringify({errCode:Ut.ErrCodeMultipleRuneId,date:{runeInputMapSize:i.size}}));let s=r.outputs,o=new Map;for(let d of s){let h=d.data;if(h!=null){let b=h.id,g=BigInt(h.amount);if(b==null||g==null)continue;let y=o.get(b);y==null?o.set(b,g):o.set(b,BigInt(y)+BigInt(g))}}let a=!1;for(let d of i.keys()){let h=i.get(d),b=o.get(d);(h!=null&&b!=null&&h>b||h!=null&&b==null)&&r.runeData.useDefaultOutput==!1&&(a=!0)}let c=0,u=[];if(a){let d={address:r.address,amount:546};u.push(d),c++}let f=[];for(let d of s){let h=d.data;if(h!=null){let b=h.id,g=BigInt(h.amount);if(b==null||g==null)continue;let y={block:parseInt(b.split(":")[0]),id:parseInt(b.split(":")[1]),amount:BigInt(g),output:c};f.push(y)}d.data=null,u.push(d),c++}if(r.runeData.useDefaultOutput==!0&&r.runeData.defaultOutput>u.length-1)throw new Error(JSON.stringify({errCode:Ut.ErrCodeLessRunesMainAmt,date:{defaultOutput:r.runeData.defaultOutput,ouputLenth:u.length}}));return{inputs:r.inputs,outputs:u,address:r.address,feePerB:r.feePerB,runeData:{edicts:f,etching:r.runeData.etching,burn:r.runeData.burn,defaultOutput:r.runeData.defaultOutput,mint:r.runeData.mint,mintNum:r.runeData.mintNum}}}getMockMinRuneTx(t,r){let n=(0,_1.cloneObject)(t),i=[],s={block:parseInt(r.id.split(":")[0]),id:parseInt(r.id.split(":")[1]),amount:BigInt(r.amount),output:0};return i.push(s),{inputs:[{txId:n.inputs[0].txId,vOut:0,amount:600,data:[r]}],outputs:[{address:n.address,amount:546,data:r}],address:n.address,feePerB:n.feePerB,runeData:{edicts:i,etching:n.runeData.etching,burn:n.runeData.burn,defaultOutput:n.runeData.defaultOutput,mint:n.runeData.mint,mintNum:n.runeData.mintNum}}}getMinRuneTx(t,r,n,i){let s=(0,_1.cloneObject)(t);return{inputs:[n],outputs:[i],address:s.address,feePerB:s.feePerB,RuneData:s.runeData}}async signTransaction(t){let r=this.network(),n=null;if(t.data.runeData.mintNum==null||t.data.runeData.mintNum<=1)try{let i=t.privateKey;if(!t.data.runeData)return Promise.reject("missing runeData");let s=this.convert2RuneTx(t.data),o=this.getRuneMainOpReturnOutput(r,s.runeData);return s.outputs.push(o),n=(0,Mu.signBtc)(s,i,r),Promise.resolve(n)}catch(i){return Promise.reject(i)}else if(t.data.runeData.mint)try{let i=[],s=t.privateKey;if(!t.data.runeData)return Promise.reject("missing runeData");let o={id:t.data.outputs[0].data.id,amount:t.data.outputs[0].data.amount,mintNum:t.data.runeData.mintNum},a=this.getMockMinRuneTx(t.data,o),c=this.getRuneMainOpReturnOutput(r,a.runeData);a.outputs.push(c),n=(0,Mu.signBtc)(a,s,r);let u=Ld.estimateBtcFee(a,this.network())+546,f=this.convert2RuneTx(t.data),d=f.outputs.length;for(let g=0;g<o.mintNum-1;g++)f.outputs.push({address:t.data.address,amount:u});let h=this.getRuneMainOpReturnOutput(r,f.runeData);f.outputs.push(h),n=(0,Mu.signBtc)(f,s,r);let b=Sk.Transaction.fromHex(n).getId();i.push(n);for(let g=0;g<o.mintNum-1;g++){let y={txId:b,vOut:d,address:t.data.address,amount:u,data:[o]},x={address:t.data.address,amount:546};d+=1;let T=this.getMinRuneTx(t.data,o,y,x);T.outputs.push(h);let M=(0,Mu.signBtc)(T,s,r);i.push(M)}return Promise.resolve(i)}catch(i){return Promise.reject(i)}}getRuneMainOpReturnOutput(t,r){let n=!1;Mu.networks.bitcoin===t&&(n=!0),r.useDefaultOutput==null&&(r.useDefaultOutput=!1),r.defaultOutput==null&&(r.defaultOutput=0),r.mint==null&&(r.mint=!1),r.mintNum==null&&(r.mintNum=0);let i=(0,xk.buildRuneMainMintData)(n,r.edicts,r.useDefaultOutput,r.defaultOutput,r.mint,r.mintNum);return{address:"",amount:0,omniScript:_k.base.toHex(i)}}async estimateFee(t){try{if(!t.data.runeData)return Promise.reject("missing runeData");let r=this.convert2RuneTx(t.data),n=this.getRuneMainOpReturnOutput(this.network(),r.runeData);r.outputs.push(n);let i={id:t.data.outputs[0].data.id,amount:t.data.outputs[0].data.amount,mintNum:t.data.runeData.mintNum},s=r.outputs.length;for(let a=0;a<i.mintNum-1;a++)r.outputs.push({address:t.data.address,amount:8e3});let o=Ld.estimateBtcFee(r,this.network());if(t.data.runeData.mintNum==null||t.data.runeData.mintNum<=1)return Promise.resolve(o);{let a=[];a.push(o);let c={id:t.data.outputs[0].data.id,amount:t.data.outputs[0].data.amount,mintNum:t.data.runeData.mintNum},u=this.getMockMinRuneTx(t.data,c),f=this.getRuneMainOpReturnOutput(this.network(),u.runeData);u.outputs.push(f);let d=Ld.estimateBtcFee(u,this.network());for(let h=0;h<t.data.runeData.mintNum-1;h++)a.push(d);return Promise.resolve(a)}}catch(r){return Promise.reject(r)}}};Ut.RuneMainWallet=jd;var S1=class extends jd{network(){return Ld.networks.testnet}};Ut.RuneMainTestWallet=S1});var N4=K(Je=>{"use strict";E();P();var Ek=Je&&Je.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Pk=Je&&Je.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Tk=Je&&Je.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Ek(t,e,r);return Pk(t,e),t};Object.defineProperty(Je,"__esModule",{value:!0});Je.AtomicalTestWallet=Je.AtomicalWallet=Je.ErrCodeMul=Je.ErrCodeUnknownAsset=Je.ErrCodeCommon=Je.ErrCodeVoutDust=Je.ErrCodeAtomicalChangeFail=Je.ErrCodeLessAtomicalAmt=void 0;var Ak=cs(),Ik=us(),k4=Tk(ln()),Ok=ln();Je.ErrCodeLessAtomicalAmt=2011400;Je.ErrCodeAtomicalChangeFail=2011401;Je.ErrCodeVoutDust=2011402;Je.ErrCodeCommon=2011403;Je.ErrCodeUnknownAsset=2011404;Je.ErrCodeMul=2011420;var Dd=class extends Ik.BtcWallet{convert2AtomicalTx(t){let r=(0,Ak.cloneObject)(t),n=new Map,i=new Map,s=new Map,o=[],a=r.feePerB||10,c=r.dustSize||546,u=r.inputs;for(let h of u){let b=h.data;if(b!=null&&b instanceof Array)for(let g of b){let y=g.atomicalId,x=g.type,T=h.amount;if(y==null||T==null||x==null||x!="FT"&&x!="NFT")continue;i.get(y)==null&&i.set(y,x);let M=n.get(y);M==null?n.set(y,T):n.set(y,M+T)}if(Object.keys(n).length>1)throw new Error(JSON.stringify({errCode:Je.ErrCodeMul}))}let f=r.outputs;for(let h of f){let b=h.data;if(b!=null&&b instanceof Array)for(let g of b){let y=g.atomicalId,x=h.amount,T=g.type;if(y==null||x==null||T==null||T!="FT"&&T!="NFT")continue;if(i.get(y)!=T)throw new Error(JSON.stringify({errCode:Je.ErrCodeUnknownAsset}));let M=s.get(y);if(M==null)s.set(y,x);else if(s.set(y,M+x),T=="NFT")throw new Error(JSON.stringify({errCode:Je.ErrCodeMul}))}if(Object.keys(s).length>1)throw new Error(JSON.stringify({errCode:Je.ErrCodeMul}));o.push({amount:h.amount,address:h.address})}let d=!1;for(let h of n.keys()){let b=n.get(h),g=s.get(h);if(i.get(h)=="FT"){if(g==null)throw new Error(JSON.stringify({errCode:Je.ErrCodeCommon}));if(b!=null&&g!=null&&b>g){d=!0;let y=b-g;if(y<c)throw new Error(JSON.stringify({errCode:Je.ErrCodeAtomicalChangeFail,date:{atomicalId:h,amount:b-g}}));o.push({address:r.address,amount:y})}else if(b!=null&&g!=null&&b<g)throw new Error(JSON.stringify({errCode:Je.ErrCodeLessAtomicalAmt,date:{atomicalId:h,amount:b-g}}))}else if(i.get(h)=="NFT"&&g==null)throw new Error(JSON.stringify({errCode:Je.ErrCodeCommon}))}for(let[h,b]of o.entries())if(b.amount<c)throw new Error(JSON.stringify({errCode:Je.ErrCodeVoutDust,vOut:h}));return{inputs:r.inputs,outputs:o,address:r.address,feePerB:a}}async signTransaction(t){let r=this.network(),n=null;try{let i=t.privateKey,s=this.convert2AtomicalTx(t.data);return n=(0,Ok.signBtc)(s,i,r),Promise.resolve(n)}catch(i){return Promise.reject(i)}}async estimateFee(t){try{let r=this.convert2AtomicalTx(t.data),n=k4.estimateBtcFee(r,this.network());return Promise.resolve(n)}catch(r){return Promise.reject(r)}}};Je.AtomicalWallet=Dd;var E1=class extends Dd{network(){return k4.networks.testnet}};Je.AtomicalTestWallet=E1});var Rd=K(pn=>{"use strict";E();P();var Bk=pn&&pn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ts=pn&&pn.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Bk(t,e,r)};Object.defineProperty(pn,"__esModule",{value:!0});Ts(us(),pn);Ts(w4(),pn);Ts(x4(),pn);Ts(_4(),pn);Ts(E4(),pn);Ts(P4(),pn);Ts(M4(),pn);Ts(H4(),pn);Ts(N4(),pn)});var q4=K(Kd=>{"use strict";E();P();Object.defineProperty(Kd,"__esModule",{value:!0});Kd.oneKeyBuildBtcTx=void 0;var Mk=fi(),Hk=bo(),P1=ft(),T1=Rd(),A1=os(),kk=In(),Nk={legacy:"SPENDADDRESS",segwit_native:"SPENDWITNESS",segwit_nested:"SPENDP2SHWITNESS",segwit_taproot:"SPENDTAPROOT"},Ck={legacy:"PAYTOADDRESS",segwit_native:"PAYTOWITNESS",segwit_nested:"PAYTOP2SHWITNESS",segwit_taproot:"PAYTOTAPROOT"};function qk(e,t=kk.bitcoin){let r=(0,T1.convert2UtxoTx)(e);if(r.omni){let c=(0,T1.number2Hex)(r.omni.coinType||31,8),u=(0,T1.number2Hex)(r.omni.amount,16),f="6f6d6e6900000000"+c+u;r.outputs.push({address:"",amount:0,omniScript:f})}let n=parseInt((0,A1.signBtc)(r,"",t,void 0,!0,!0)),i=e.dustSize||546;n>=i&&r.outputs.push({address:r.address,amount:n,derivationPath:r.derivationPath,isChange:!0});let s=[],o=[];r.inputs.forEach(c=>{let u=C4(c.derivationPath);s.push({address_n:u,prev_hash:c.txId,prev_index:c.vOut,amount:c.amount.toString(),script_type:Nk[(0,A1.getAddressType)(c.address,t)]}),o.push(Rk(c.nonWitnessUtxo,c.txId))});let a=[];return r.outputs.forEach(c=>{c.isChange?a.push({address_n:C4(c.derivationPath),amount:c.amount.toString(),script_type:Ck[(0,A1.getAddressType)(c.address,t)]}):c.omniScript?a.push({amount:"0",op_return_data:c.omniScript,script_type:"PAYTOOPRETURN"}):a.push({address:c.address,amount:c.amount.toString(),script_type:"PAYTOADDRESS"})}),{inputs:s,outputs:a,refTxs:o,coin:"btc"}}Kd.oneKeyBuildBtcTx=qk;function Rk(e,t){let r=Mk.Transaction.fromHex(e),n=[];r.ins.forEach(s=>{n.push({prev_hash:P1.base.toHex((0,Hk.reverseBuffer)(s.hash)),prev_index:s.index,script_sig:P1.base.toHex(s.script),sequence:s.sequence})});let i=[];return r.outs.forEach(s=>{i.push({amount:s.value,script_pubkey:P1.base.toHex(s.script)})}),{hash:t,inputs:n,bin_outputs:i,lock_time:r.locktime,version:r.version}}function C4(e){let t=e.split("/");t[0]==="m"&&(t=t.slice(1));let r=[];return t.forEach(n=>{let i;n.slice(-1)==="'"?i=Uk(parseInt(n.slice(0,-1),10)):i=parseInt(n,10),r.push(i)}),r}function Uk(e){return 2147483648+e}});var R4=K(Hu=>{"use strict";E();P();Object.defineProperty(Hu,"__esModule",{value:!0});Hu.BtcXrcTypes=void 0;var Lk;(function(e){e[e.INSCRIBE=1]="INSCRIBE",e[e.PSBT=2]="PSBT",e[e.PSBT_MPC_UNSIGNED_LIST=21]="PSBT_MPC_UNSIGNED_LIST",e[e.PSBT_MPC_SIGNED_LIST=22]="PSBT_MPC_SIGNED_LIST",e[e.PSBT_MPC_UNSIGNED_BUY=23]="PSBT_MPC_UNSIGNED_BUY",e[e.PSBT_MPC_SIGNED_BUY=24]="PSBT_MPC_SIGNED_BUY",e[e.PSBT_MPC_UNSIGNED=25]="PSBT_MPC_UNSIGNED",e[e.PSBT_MPC_SIGNED=26]="PSBT_MPC_SIGNED",e[e.PSBT_KEY_SCRIPT_PATH=3]="PSBT_KEY_SCRIPT_PATH",e[e.PSBT_KEY_SCRIPT_PATH_BATCH=4]="PSBT_KEY_SCRIPT_PATH_BATCH",e[e.SRC20=101]="SRC20",e[e.RUNE=102]="RUNE",e[e.RUNEMAIN=103]="RUNEMAIN",e[e.PSBT_DEODE=104]="PSBT_DEODE",e[e.ARC20=114]="ARC20"})(Lk=Hu.BtcXrcTypes||(Hu.BtcXrcTypes={}))});var ln=K(It=>{E();P();var U4=It&&It.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jk=It&&It.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Mi=It&&It.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&U4(t,e,r)},L4=It&&It.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&U4(t,e,r);return jk(t,e),t};Object.defineProperty(It,"__esModule",{value:!0});It.message=It.wif=void 0;Mi(fi(),It);Mi(q8(),It);Mi(os(),It);Mi(U8(),It);It.wif=L4(Kp());Mi(F8(),It);Mi(Z8(),It);Mi(n4(),It);Mi(Zp(),It);It.message=L4(a4());Mi(Rd(),It);Mi(q4(),It);Mi(R4(),It)});export{ln as a};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */
/** @preserve
	(c) 2012 by Cédric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-4UZ7F7LV.js.map
